"use strict";(self.webpackChunkmempool=self.webpackChunkmempool||[]).push([[952],{5952:(Cn,Pt,y)=>{y.r(Pt),y.d(Pt,{BisqModule:()=>vh});var x=y(3091),ae=y(4728),E=y(8505),N=y(3900),I=y(4004),i=y(4650),J=y(641),Y=y(529);const R="/bisq/api";let w=(()=>{class n{constructor(e){this.httpClient=e}getStats$(){return this.httpClient.get(R+"/stats")}getTransaction$(e){return this.httpClient.get(R+"/tx/"+e)}listTransactions$(e,o,s){let r=new Y.LE;return s.forEach(a=>{r=r.append("types[]",a)}),this.httpClient.get(`/bisq/api/txs/${e}/${o}`,{params:r,observe:"response"})}getBlock$(e){return this.httpClient.get(R+"/block/"+e)}listBlocks$(e,o){return this.httpClient.get(`/bisq/api/blocks/${e}/${o}`,{observe:"response"})}getAddress$(e){return this.httpClient.get(R+"/address/"+e)}getMarkets$(){return this.httpClient.get(R+"/markets/markets")}getMarketsTicker$(){return this.httpClient.get(R+"/markets/ticker")}getMarketsCurrencies$(){return this.httpClient.get(R+"/markets/currencies")}getMarketsHloc$(e,o){return this.httpClient.get(R+"/markets/hloc?market="+e+"&interval="+o)}getMarketOffers$(e){return this.httpClient.get(R+"/markets/offers?market="+e)}getMarketTrades$(e){return this.httpClient.get(R+"/markets/trades?market="+e)}getMarketVolumesByTime$(e){return this.httpClient.get(R+"/markets/volumes/"+e)}getAllVolumesDay$(){return this.httpClient.get(R+"/markets/volumes?interval=week")}}return n.\u0275fac=function(e){return new(e||n)(i.LFG(Y.eN))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z=y(5568),P=y(4006),T=y(6895),Ue=y(6585),Et=y(7310),ht=y(2216);const bn=function(n){return{color:n}};let Ge=(()=>{class n{constructor(){this.iconProp=["fas","leaf"]}ngOnChanges(){switch(this.txType){case"UNVERIFIED":default:this.iconProp[1]="question",this.color="ffac00";break;case"INVALID":this.iconProp[1]="exclamation-triangle",this.color="ff4500";break;case"GENESIS":this.iconProp[1]="rocket",this.color="25B135";break;case"TRANSFER_BSQ":this.iconProp[1]="retweet",this.color="a3a3a3";break;case"PAY_TRADE_FEE":this.iconProp[1]="leaf",this.color="689f43";break;case"PROPOSAL":case"ASSET_LISTING_FEE":case"PROOF_OF_BURN":this.iconProp[1]="file-alt",this.color="6c8b3b";break;case"COMPENSATION_REQUEST":this.iconProp[1]="money-bill",this.color="689f43";break;case"REIMBURSEMENT_REQUEST":this.iconProp[1]="money-bill",this.color="04a908";break;case"BLIND_VOTE":this.iconProp[1]="eye-slash",this.color="07579a";break;case"VOTE_REVEAL":this.iconProp[1]="eye",this.color="4AC5FF";break;case"LOCKUP":this.iconProp[1]="lock",this.color="0056c4";break;case"UNLOCK":this.iconProp[1]="lock-open",this.color="1d965f";break;case"IRREGULAR":this.iconProp[1]="exclamation-circle",this.color="ffd700"}this.iconProp=this.iconProp.slice()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-icon"]],inputs:{txType:"txType"},features:[i.TTD],decls:1,vars:5,consts:[[3,"icon","fixedWidth","ngStyle"]],template:function(e,o){1&e&&i._UZ(0,"fa-icon",0),2&e&&i.Q6J("icon",o.iconProp)("fixedWidth",!0)("ngStyle",i.VKq(3,bn,"#"+o.color))},dependencies:[T.PC,ht.BN],changeDetection:0}),n})();var An=y(2722);let le=(()=>{class n{constructor(){this._searchCache={},this._searchCacheInclusive={},this._prevSkippedItems={}}transform(e,o="",s=0,r=0,a){o=o.toLowerCase(),e!==this._lastOptions&&(this._lastOptions=e,this._searchCache={},this._searchCacheInclusive={},this._prevSkippedItems={});const l=this._searchCache.hasOwnProperty(o)?this._searchCache[o]:this._doSearch(e,o,s,a);return e.length<=s?l:this._limitRenderedItems(l,r)}_getSubsetOptions(e,o,s){const r=this._searchCacheInclusive[s];return!0===r?o:"number"==typeof r?[...o,...e.slice(r)]:e}_doSearch(e,o,s,r){const a=o.slice(0,-1),l=this._searchCache[a],h=this._prevSkippedItems[a]||0;l&&(e=this._getSubsetOptions(e,l,a));const c=e.length,u=s>0?Math.min(s,c):c,_=r(o),f=[];let d=0,p=0,m=0;const g=B=>_.test(B.name),v=B=>e.filter(j=>j.parentId===B.id),C=B=>e.find(j=>B.parentId===j.id),M=B=>{f.push(B),p++},O=l?()=>m++:()=>{};for(;d<c&&p<u;++d){const B=e[d];g(B)||typeof B.parentId>"u"&&v(B).some(g)||typeof B.parentId<"u"&&g(C(B))?M(B):O()}const k=d+h;return this._searchCache[o]=f,this._searchCacheInclusive[o]=d===c||k,this._prevSkippedItems[o]=m+h,f}_limitRenderedItems(e,o){return e.length>o&&o>0?e.slice(0,o):e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=i.Yjl({name:"searchFilter",type:n,pure:!0}),n})();var xn=y(7579);let Je=(()=>{class n{constructor(e){this.elemRef=e}get element(){return this.elemRef.nativeElement}ngOnInit(){this.focus()}ngOnChanges(e){const o=e.ssAutofocus;o&&!o.isFirstChange()&&this.focus()}focus(){this.ssAutofocus||this.element.focus&&this.element.focus()}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(i.SBq,1))},n.\u0275dir=i.lG2({type:n,selectors:[["","ssAutofocus",""]],inputs:{ssAutofocus:"ssAutofocus"},features:[i.TTD]}),n})(),Ye=(()=>{class n{constructor(){this.onOffClick=new i.vpe}onClick(e){this._clickEvent=e}onTouch(e){this._touchEvent=e}onDocumentClick(e){e!==this._clickEvent&&this.onOffClick.emit(e)}onDocumentTouch(e){e!==this._touchEvent&&this.onOffClick.emit(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=i.lG2({type:n,selectors:[["","offClick",""]],hostBindings:function(e,o){1&e&&i.NdJ("click",function(r){return o.onClick(r)})("touchstart",function(r){return o.onTouch(r)})("click",function(r){return o.onDocumentClick(r)},!1,i.evT)("touchstart",function(r){return o.onDocumentTouch(r)},!1,i.evT)},outputs:{onOffClick:"offClick"}}),n})();function Bn(n,t){if(1&n){const e=i.EpF();i.TgZ(0,"div",19)(1,"button",20),i.NdJ("click",function(s){i.CHM(e);const r=i.oxw(4);return i.KtG(r.clearSearch(s))}),i._UZ(2,"i",21),i.qZA()()}}function wn(n,t){if(1&n&&(i.TgZ(0,"div",13)(1,"div",14)(2,"span",15),i._UZ(3,"i",16),i.qZA()(),i._UZ(4,"input",17),i.YNc(5,Bn,3,0,"div",18),i.qZA()),2&n){const e=i.oxw(3);i.xp6(4),i.Q6J("formControl",e.filterControl)("placeholder",e.texts.searchPlaceholder),i.xp6(1),i.Q6J("ngIf",e.filterControl.value.length>0)}}const On=function(n,t){return{"glyphicon glyphicon-ok":n,"fa fa-check":t}};function In(n,t){if(1&n){const e=i.EpF();i.TgZ(0,"a",22),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(3);return i.KtG(s.checkAll())}),i.TgZ(1,"span",23),i._UZ(2,"span",24),i.qZA(),i._uU(3),i.qZA()}if(2&n){const e=i.oxw(3);i.xp6(2),i.Q6J("ngClass",i.WLB(2,On,"fontawesome"!==e.settings.checkedStyle,"fontawesome"===e.settings.checkedStyle)),i.xp6(1),i.hij(" ",e.texts.checkAll," ")}}const Nn=function(n,t){return{"glyphicon glyphicon-remove":n,"fa fa-times":t}};function Pn(n,t){if(1&n){const e=i.EpF();i.TgZ(0,"a",25),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(3);return i.KtG(s.uncheckAll())}),i.TgZ(1,"span",23),i._UZ(2,"span",24),i.qZA(),i._uU(3),i.qZA()}if(2&n){const e=i.oxw(3);i.xp6(2),i.Q6J("ngClass",i.WLB(2,Nn,"fontawesome"!==e.settings.checkedStyle,"fontawesome"===e.settings.checkedStyle)),i.xp6(1),i.hij(" ",e.texts.uncheckAll," ")}}function En(n,t){1&n&&i._UZ(0,"a",26)}function kn(n,t){if(1&n&&(i.TgZ(0,"a",27),i._uU(1),i.qZA()),2&n){const e=i.oxw(3);i.xp6(1),i.Oqu(e.texts.searchNoRenderText)}}function Rn(n,t){if(1&n&&(i.TgZ(0,"a",27),i._uU(1),i.qZA()),2&n){const e=i.oxw(3);i.xp6(1),i.Oqu(e.texts.searchEmptyResult)}}function Zn(n,t){if(1&n){const e=i.EpF();i.TgZ(0,"input",37),i.NdJ("click",function(s){i.CHM(e);const r=i.oxw(2).$implicit,a=i.oxw(3);return i.KtG(a.preventCheckboxCheck(s,r))}),i.qZA()}if(2&n){const e=i.oxw(2).$implicit,o=i.oxw(3);i.Q6J("checked",o.isSelected(e))("disabled",o.isCheckboxDisabled(e))("ngStyle",o.getItemStyleSelectionDisabled())}}function Qn(n,t){if(1&n&&i._UZ(0,"span",38),2&n){const e=i.oxw(2).$implicit,o=i.oxw(3);i.ekj("glyphicon-ok",o.isSelected(e))("glyphicon-lock",o.isCheckboxDisabled(e))}}function Dn(n,t){1&n&&(i.TgZ(0,"span"),i._UZ(1,"i",41),i.qZA())}function Ln(n,t){1&n&&(i.TgZ(0,"span"),i._UZ(1,"i",42),i.qZA())}function qn(n,t){if(1&n&&(i.TgZ(0,"span",39),i.YNc(1,Dn,2,0,"span",40),i.YNc(2,Ln,2,0,"span",40),i.qZA()),2&n){const e=i.oxw(2).$implicit,o=i.oxw(3);i.xp6(1),i.Q6J("ngIf",o.isSelected(e)),i.xp6(1),i.Q6J("ngIf",o.isCheckboxDisabled(e))}}function $n(n,t){if(1&n&&i._UZ(0,"img",47),2&n){const e=i.oxw(3).$implicit;i.Q6J("src",e.image,i.LSH)}}function Fn(n,t){1&n&&(i.TgZ(0,"div",48)(1,"div",49),i._UZ(2,"span",50),i.qZA()())}const zn=function(n){return{slideron:n}};function Un(n,t){if(1&n&&(i.TgZ(0,"span",43)(1,"div",44),i.YNc(2,$n,1,1,"img",45),i.YNc(3,Fn,3,0,"div",46),i.qZA()()),2&n){const e=i.oxw(2).$implicit,o=i.oxw(3);i.xp6(1),i.Q6J("ngClass",i.VKq(3,zn,o.isSelected(e))),i.xp6(1),i.Q6J("ngIf",null!=e.image),i.xp6(1),i.Q6J("ngIf",null==e.image)}}const Gn=function(n){return{chunkyrow:n}};function Jn(n,t){if(1&n&&(i.TgZ(0,"span",31),i.ynx(1,32),i.YNc(2,Zn,1,3,"input",33),i.YNc(3,Qn,1,4,"span",34),i.YNc(4,qn,3,2,"span",35),i.YNc(5,Un,4,5,"span",36),i.BQk(),i.TgZ(6,"span",24),i._uU(7),i.qZA()()),2&n){const e=i.oxw().$implicit,o=i.oxw(3);i.Udp("padding-left",o.parents.length>0&&o.parents.indexOf(e.id)<0&&"30px"),i.Q6J("ngStyle",o.getItemStyleSelectionDisabled()),i.xp6(1),i.Q6J("ngSwitch",o.settings.checkedStyle),i.xp6(1),i.Q6J("ngSwitchCase","checkboxes"),i.xp6(1),i.Q6J("ngSwitchCase","glyphicon"),i.xp6(1),i.Q6J("ngSwitchCase","fontawesome"),i.xp6(1),i.Q6J("ngSwitchCase","visual"),i.xp6(1),i.Udp("font-weight",o.parents.indexOf(e.id)>=0?"bold":"normal"),i.ekj("disabled",o.isCheckboxDisabled(e)),i.Q6J("ngClass",i.VKq(15,Gn,"visual"==o.settings.checkedStyle))("ngClass",o.settings.itemClasses),i.xp6(1),i.hij(" ",e.name," ")}}function Yn(n,t){if(1&n&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&n){const e=i.oxw().$implicit,o=i.oxw(3);i.ekj("disabled",o.isCheckboxDisabled(e)),i.xp6(1),i.Oqu(e.name)}}function Xn(n,t){if(1&n){const e=i.EpF();i.TgZ(0,"a",28),i.NdJ("click",function(s){const a=i.CHM(e).$implicit,l=i.oxw(3);return i.KtG(l.setSelected(s,a))})("keydown.space",function(s){const a=i.CHM(e).$implicit,l=i.oxw(3);return i.KtG(l.setSelected(s,a))})("keydown.enter",function(s){const a=i.CHM(e).$implicit,l=i.oxw(3);return i.KtG(l.setSelected(s,a))}),i.YNc(1,Jn,8,17,"span",29),i.YNc(2,Yn,2,3,"ng-template",null,30,i.W1O),i.qZA()}if(2&n){const e=t.$implicit,o=i.MAs(3),s=i.oxw(3);i.ekj("active",s.isSelected(e))("dropdown-header",e.isLabel),i.Q6J("ngStyle",s.getItemStyle(e))("ngClass",e.classes)("ssAutofocus",e!==s.focusedItem),i.xp6(1),i.Q6J("ngIf",!e.isLabel)("ngIfElse",o)}}const Hn=function(n){return{"chunkydropdown-menu":n}};function Wn(n,t){if(1&n){const e=i.EpF();i.TgZ(0,"div",5,6),i.NdJ("scroll",function(s){i.CHM(e);const r=i.oxw(2);return i.KtG(r.settings.isLazyLoad?r.checkScrollPosition(s):null)})("wheel",function(s){i.CHM(e);const r=i.MAs(1),a=i.oxw(2);return i.KtG(a.settings.stopScrollPropagation?a.checkScrollPropagation(s,r):null)})("keydown.tab",function(s){i.CHM(e);const r=i.oxw(2);return i.KtG(r.focusItem(1,s))})("keydown.shift.tab",function(s){i.CHM(e);const r=i.oxw(2);return i.KtG(r.focusItem(-1,s))}),i.YNc(2,wn,6,3,"div",7),i.YNc(3,In,4,5,"a",8),i.YNc(4,Pn,4,5,"a",9),i.YNc(5,En,1,0,"a",10),i.YNc(6,kn,2,1,"a",11),i.YNc(7,Rn,2,1,"a",11),i.YNc(8,Xn,4,9,"a",12),i.qZA()}if(2&n){const e=i.oxw(2);i.Udp("max-height",e.settings.maxHeight),i.ekj("pull-right",e.settings.pullRight)("dropdown-menu-right",e.settings.pullRight),i.Q6J("ngClass",i.VKq(15,Hn,"visual"==e.settings.checkedStyle)),i.xp6(2),i.Q6J("ngIf",e.settings.enableSearch&&(e.renderFilteredOptions.length>1||e.filterControl.value.length>0)),i.xp6(1),i.Q6J("ngIf",e.settings.showCheckAll&&!e.disabledSelection&&e.renderFilteredOptions.length>1),i.xp6(1),i.Q6J("ngIf",e.settings.showUncheckAll&&!e.disabledSelection&&e.renderFilteredOptions.length>1),i.xp6(1),i.Q6J("ngIf",e.settings.showCheckAll||e.settings.showUncheckAll),i.xp6(1),i.Q6J("ngIf",!e.renderItems),i.xp6(1),i.Q6J("ngIf",e.renderItems&&!e.renderFilteredOptions.length),i.xp6(1),i.Q6J("ngForOf",e.renderFilteredOptions)("ngForTrackBy",e.trackById)}}function Vn(n,t){if(1&n){const e=i.EpF();i.TgZ(0,"div",1),i.NdJ("offClick",function(){i.CHM(e);const s=i.oxw();return i.KtG(s.clickedOutside())}),i.TgZ(1,"button",2),i.NdJ("click",function(s){i.CHM(e);const r=i.oxw();return i.KtG(r.toggleDropdown(s))}),i._uU(2),i._UZ(3,"span",3),i.qZA(),i.YNc(4,Wn,9,17,"div",4),i.qZA()}if(2&n){const e=i.oxw();i.ekj("open",e.isVisible),i.Q6J("ngClass",e.settings.containerClasses),i.xp6(1),i.Q6J("ngClass",e.settings.buttonClasses)("disabled",e.disabled)("ssAutofocus",!e.focusBack),i.xp6(1),i.hij(" ",e.title," "),i.xp6(2),i.Q6J("ngIf",e.isVisible)}}const Kn={provide:P.JU,useExisting:(0,i.Gpc)(()=>Xe),multi:!0};let Xe=(()=>{class n{constructor(e,o,s,r){this.fb=e,this.searchFilter=o,this.cdRef=r,this.localIsVisible=!1,this.workerDocClicked=!1,this.filterControl=this.fb.control(""),this.disabled=!1,this.disabledSelection=!1,this.searchFunction=this._escapeRegExp,this.selectionLimitReached=new i.vpe,this.dropdownClosed=new i.vpe,this.dropdownOpened=new i.vpe,this.added=new i.vpe,this.removed=new i.vpe,this.lazyLoad=new i.vpe,this.filter=this.filterControl.valueChanges,this.destroyed$=new xn.x,this.filteredOptions=[],this.lazyLoadOptions=[],this.renderFilteredOptions=[],this.model=[],this.prevModel=[],this.numSelected=0,this.renderItems=!0,this.checkAllSearchRegister=new Set,this.checkAllStatus=!1,this.loadedValueIds=[],this._focusBack=!1,this.defaultSettings={closeOnClickOutside:!0,pullRight:!1,enableSearch:!1,searchRenderLimit:0,searchRenderAfter:1,searchMaxLimit:0,searchMaxRenderedItems:0,checkedStyle:"checkboxes",buttonClasses:"btn btn-primary dropdown-toggle",containerClasses:"dropdown-inline",selectionLimit:0,minSelectionLimit:0,closeOnSelect:!1,autoUnselect:!1,showCheckAll:!1,showUncheckAll:!1,fixedTitle:!1,dynamicTitleMaxItems:3,maxHeight:"300px",isLazyLoad:!1,stopScrollPropagation:!1,loadViewDistance:1,selectAddedValues:!1,ignoreLabels:!1,maintainSelectionOrderInTitle:!1,focusBack:!0},this.defaultTexts={checkAll:"Select all",uncheckAll:"Unselect all",checked:"selected",checkedPlural:"selected",searchPlaceholder:"Search...",searchEmptyResult:"Nothing found...",searchNoRenderText:"Type in search box to see results...",defaultTitle:"Select",allSelected:"All selected"},this.onModelChange=a=>{},this.onModelTouched=()=>{},this.differ=s.find([]).create(null),this.settings=this.defaultSettings,this.texts=this.defaultTexts}get focusBack(){return this.settings.focusBack&&this._focusBack}set isVisible(e){this.localIsVisible=e,this.workerDocClicked=!e&&this.workerDocClicked}get isVisible(){return this.localIsVisible}get searchLimit(){return this.settings.searchRenderLimit}get searchRenderAfter(){return this.settings.searchRenderAfter}get searchLimitApplied(){return this.searchLimit>0&&this.options.length>this.searchLimit}clickedOutside(){!this.isVisible||!this.settings.closeOnClickOutside||(this.isVisible=!1,this._focusBack=!0,this.dropdownClosed.emit())}getItemStyle(e){const o={};e.isLabel||(o.cursor="pointer"),e.disabled&&(o.cursor="default")}getItemStyleSelectionDisabled(){if(this.disabledSelection)return{cursor:"default"}}ngOnInit(){this.title=this.texts.defaultTitle||"",this.filterControl.valueChanges.pipe((0,An.R)(this.destroyed$)).subscribe(()=>{this.updateRenderItems(),this.settings.isLazyLoad&&this.load()})}ngOnChanges(e){if(e.options){if(this.options=this.options||[],this.parents=this.options.filter(o=>"number"==typeof o.parentId).map(o=>o.parentId),this.updateRenderItems(),this.settings.isLazyLoad&&this.settings.selectAddedValues&&0===this.loadedValueIds.length&&(this.loadedValueIds=this.loadedValueIds.concat(e.options.currentValue.map(o=>o.id))),this.settings.isLazyLoad&&this.settings.selectAddedValues&&e.options.previousValue){const o=e.options.currentValue.filter(s=>-1===this.loadedValueIds.indexOf(s.id));this.loadedValueIds.concat(o.map(s=>s.id)),this.checkAllStatus?this.addChecks(o):this.checkAllSearchRegister.size>0&&this.checkAllSearchRegister.forEach(s=>this.addChecks(this.applyFilters(o,s)))}this.texts&&this.updateTitle(),this.fireModelChange()}e.settings&&(this.settings={...this.defaultSettings,...this.settings}),e.texts&&(this.texts={...this.defaultTexts,...this.texts},e.texts.isFirstChange()||this.updateTitle())}ngOnDestroy(){this.destroyed$.next(!1)}updateRenderItems(){this.renderItems=!this.searchLimitApplied||this.filterControl.value.length>=this.searchRenderAfter,this.filteredOptions=this.applyFilters(this.options,this.settings.isLazyLoad?"":this.filterControl.value),this.renderFilteredOptions=this.renderItems?this.filteredOptions:[],this.focusedItem=void 0}applyFilters(e,o){return this.searchFilter.transform(e,o,this.settings.searchMaxLimit,this.settings.searchMaxRenderedItems,this.searchFunction)}fireModelChange(){this.model!=this.prevModel&&(this.prevModel=this.model,this.onModelChange(this.model),this.onModelTouched(),this.cdRef.markForCheck())}writeValue(e){null!=e?(this.model=Array.isArray(e)?e:[e],this.ngDoCheck()):this.model=[]}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}ngDoCheck(){this.differ.diff(this.model)&&(this.updateNumSelected(),this.updateTitle())}validate(e){return this.model&&this.model.length?{required:{valid:!1}}:0===this.options.filter(o=>this.model.indexOf(o.id)&&!o.disabled).length?{selection:{valid:!1}}:null}registerOnValidatorChange(e){throw new Error("Method not implemented.")}clearSearch(e){this.maybeStopPropagation(e),this.filterControl.setValue("")}toggleDropdown(e){this.isVisible&&(this._focusBack=!0),this.isVisible=!this.isVisible,this.isVisible?this.dropdownOpened.emit():this.dropdownClosed.emit(),this.focusedItem=void 0}closeDropdown(e){this.isVisible=!0,this.toggleDropdown(e)}isSelected(e){return this.model&&this.model.indexOf(e.id)>-1}setSelected(e,o){o.isLabel||o.disabled||this.disabledSelection||setTimeout(()=>{this.maybeStopPropagation(e),this.maybePreventDefault(e);const s=this.model.indexOf(o.id),r=this.settings.selectionLimit>0&&this.model.length>=this.settings.selectionLimit,a=(l,h)=>{this.model.splice(l,1),this.removed.emit(h),this.settings.isLazyLoad&&this.lazyLoadOptions.some(c=>c.id===h)&&this.lazyLoadOptions.splice(this.lazyLoadOptions.indexOf(this.lazyLoadOptions.find(c=>c.id===h)),1)};if(s>-1){(void 0===this.settings.minSelectionLimit||this.numSelected>this.settings.minSelectionLimit)&&a(s,o.id);const l=o.parentId&&this.model.indexOf(o.parentId);l>-1?a(l,o.parentId):this.parents.indexOf(o.id)>-1&&this.options.filter(h=>this.model.indexOf(h.id)>-1&&h.parentId===o.id).forEach(h=>a(this.model.indexOf(h.id),h.id))}else{if(r&&!this.settings.autoUnselect)return void this.selectionLimitReached.emit(this.model.length);{const l=h=>{this.model.push(h),this.added.emit(h),this.settings.isLazyLoad&&!this.lazyLoadOptions.some(c=>c.id===h)&&this.lazyLoadOptions.push(o)};l(o.id),r?a(0,this.model[0]):o.parentId&&!this.settings.ignoreLabels?this.options.filter(c=>c.id!==o.id&&c.parentId===o.parentId).every(c=>this.model.indexOf(c.id)>-1)&&l(o.parentId):this.parents.indexOf(o.id)>-1&&this.options.filter(c=>this.model.indexOf(c.id)<0&&c.parentId===o.id).forEach(c=>l(c.id))}}this.settings.closeOnSelect&&this.toggleDropdown(),this.model=this.model.slice(),this.fireModelChange()},0)}updateNumSelected(){this.numSelected=this.model.filter(e=>this.parents.indexOf(e)<0).length||0}updateTitle(){let e=this.options.length;if(this.settings.ignoreLabels&&(e=this.options.filter(o=>!o.isLabel).length),0===this.numSelected||this.settings.fixedTitle)this.title=this.texts?this.texts.defaultTitle:"";else if(this.settings.displayAllSelectedText&&this.model.length===e)this.title=this.texts?this.texts.allSelected:"";else if(this.settings.dynamicTitleMaxItems&&this.settings.dynamicTitleMaxItems>=this.numSelected){const o=this.settings.isLazyLoad&&this.lazyLoadOptions.length?this.lazyLoadOptions:this.options;let s;if(this.settings.maintainSelectionOrderInTitle){const r=o.map((a,l)=>a.id);s=this.model.map(a=>r.indexOf(a)).filter(a=>a>-1).map(a=>o[a])}else s=o.filter(r=>this.model.indexOf(r.id)>-1);this.title=s.map(r=>r.name).join(", ")}else this.title=this.numSelected+" "+(1===this.numSelected?this.texts.checked:this.texts.checkedPlural);this.cdRef.markForCheck()}searchFilterApplied(){return this.settings.enableSearch&&this.filterControl.value&&this.filterControl.value.length>0}addChecks(e){const o=e.filter(s=>!(s.disabled||-1!==this.model.indexOf(s.id)||this.settings.ignoreLabels&&s.isLabel||(this.added.emit(s.id),0))).map(s=>s.id);this.model=this.model.concat(o)}checkAll(){this.disabledSelection||(this.addChecks(this.searchFilterApplied()?this.filteredOptions:this.options),this.settings.isLazyLoad&&this.settings.selectAddedValues&&(this.searchFilterApplied()&&!this.checkAllStatus?this.checkAllSearchRegister.add(this.filterControl.value):(this.checkAllSearchRegister.clear(),this.checkAllStatus=!0),this.load()),this.fireModelChange())}uncheckAll(){if(!this.disabledSelection){const e=this.model;let o=this.searchFilterApplied()?this.filteredOptions.map(s=>s.id):this.model;o=e.filter(s=>o.indexOf(s)>-1),this.model=this.model.filter(s=>o.indexOf(s)<0&&void 0===this.settings.minSelectionLimit||o.indexOf(s)<this.settings.minSelectionLimit||(this.removed.emit(s),!1)),this.settings.isLazyLoad&&this.settings.selectAddedValues&&(this.searchFilterApplied()?this.checkAllSearchRegister.has(this.filterControl.value)&&(this.checkAllSearchRegister.delete(this.filterControl.value),this.checkAllSearchRegister.forEach(function(s){const r=this.applyFilters(this.options.filter(a=>o.indexOf(a.id)>-1),s);this.addChecks(r)})):(this.checkAllSearchRegister.clear(),this.checkAllStatus=!1),this.load()),this.fireModelChange()}}preventCheckboxCheck(e,o){(o.disabled||this.settings.selectionLimit&&!this.settings.autoUnselect&&this.model.length>=this.settings.selectionLimit&&-1===this.model.indexOf(o.id)&&this.maybePreventDefault(e))&&this.maybePreventDefault(e)}isCheckboxDisabled(e){return this.disabledSelection||e&&e.disabled}checkScrollPosition(e){e.target.scrollTop>=e.target.scrollHeight-(1+this.settings.loadViewDistance)*e.target.clientHeight-1-1&&this.load()}checkScrollPropagation(e,o){const s=o.scrollTop;(e.deltaY>0&&s+o.clientHeight>=o.scrollHeight||e.deltaY<0&&s<=0)&&(e=e||window.event,this.maybePreventDefault(e),e.returnValue=!1)}trackById(e,o){return o.id}load(){this.lazyLoad.emit({length:this.options.length,filter:this.filterControl.value,checkAllSearches:this.checkAllSearchRegister,checkAllStatus:this.checkAllStatus})}focusItem(e,o){if(!this.isVisible)return;this.maybePreventDefault(o);const s=this.filteredOptions.indexOf(this.focusedItem);if(-1===s)return void(this.focusedItem=this.filteredOptions[0]);const r=s+e;this.focusedItem=this.filteredOptions[r<0?this.filteredOptions.length-1:r%this.filteredOptions.length]}maybePreventDefault(e){e&&e.preventDefault&&e.preventDefault()}maybeStopPropagation(e){e&&e.stopPropagation&&e.stopPropagation()}_escapeRegExp(e){const o=e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");return new RegExp(o,"i")}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(P.QS),i.Y36(le),i.Y36(i.ZZ4),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["ngx-bootstrap-multiselect"]],inputs:{options:"options",settings:"settings",texts:"texts",disabled:"disabled",disabledSelection:"disabledSelection",searchFunction:"searchFunction"},outputs:{selectionLimitReached:"selectionLimitReached",dropdownClosed:"dropdownClosed",dropdownOpened:"dropdownOpened",added:"added",removed:"removed",lazyLoad:"lazyLoad",filter:"filter"},features:[i._Bn([Kn,le]),i.TTD],decls:1,vars:1,consts:[["class","dropdown",3,"ngClass","open","offClick",4,"ngIf"],[1,"dropdown",3,"ngClass","offClick"],["type","button",1,"dropdown-toggle",3,"ngClass","disabled","ssAutofocus","click"],[1,"caret"],["class","dropdown-menu","style","display: block; height: auto; overflow-y: auto;",3,"ngClass","pull-right","dropdown-menu-right","max-height","scroll","wheel","keydown.tab","keydown.shift.tab",4,"ngIf"],[1,"dropdown-menu",2,"display","block","height","auto","overflow-y","auto",3,"ngClass","scroll","wheel","keydown.tab","keydown.shift.tab"],["scroller",""],["class","input-group search-container",4,"ngIf"],["role","menuitem","href","javascript:;","tabindex","-1","class","dropdown-item check-control check-control-check",3,"click",4,"ngIf"],["role","menuitem","href","javascript:;","tabindex","-1","class","dropdown-item check-control check-control-uncheck",3,"click",4,"ngIf"],["href","javascript:;","class","dropdown-divider divider",4,"ngIf"],["href","javascript:;","class","dropdown-item empty",4,"ngIf"],["class","dropdown-item","href","javascript:;","tabindex","-1",3,"active","ngStyle","ngClass","dropdown-header","ssAutofocus","click","keydown.space","keydown.enter",4,"ngFor","ngForOf","ngForTrackBy"],[1,"input-group","search-container"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text"],["aria-hidden","true",1,"fa","fa-search"],["type","text","ssAutofocus","",1,"form-control",3,"formControl","placeholder"],["class","input-group-append",4,"ngIf"],[1,"input-group-append"],["type","button",1,"btn","btn-default","btn-secondary",3,"click"],[1,"fa","fa-times"],["role","menuitem","href","javascript:;","tabindex","-1",1,"dropdown-item","check-control","check-control-check",3,"click"],[2,"width","16px"],[3,"ngClass"],["role","menuitem","href","javascript:;","tabindex","-1",1,"dropdown-item","check-control","check-control-uncheck",3,"click"],["href","javascript:;",1,"dropdown-divider","divider"],["href","javascript:;",1,"dropdown-item","empty"],["href","javascript:;","tabindex","-1",1,"dropdown-item",3,"ngStyle","ngClass","ssAutofocus","click","keydown.space","keydown.enter"],["role","menuitem","tabindex","-1",3,"padding-left","ngStyle",4,"ngIf","ngIfElse"],["label",""],["role","menuitem","tabindex","-1",3,"ngStyle"],[3,"ngSwitch"],["type","checkbox",3,"checked","disabled","ngStyle","click",4,"ngSwitchCase"],["style","width: 16px;","class","glyphicon",3,"glyphicon-ok","glyphicon-lock",4,"ngSwitchCase"],["style","width: 16px;display: inline-block;",4,"ngSwitchCase"],["style","display:block;float:left; border-radius: 0.2em; border: 0.1em solid rgba(44, 44, 44, 0.63);background:rgba(0, 0, 0, 0.1);width: 5.5em;",4,"ngSwitchCase"],["type","checkbox",3,"checked","disabled","ngStyle","click"],[1,"glyphicon",2,"width","16px"],[2,"width","16px","display","inline-block"],[4,"ngIf"],["aria-hidden","true",1,"fa","fa-check"],["aria-hidden","true",1,"fa","fa-lock"],[2,"display","block","float","left","border-radius","0.2em","border","0.1em solid rgba(44, 44, 44, 0.63)","background","rgba(0, 0, 0, 0.1)","width","5.5em"],[1,"slider",3,"ngClass"],["style","height: 100%; width: 100%; object-fit: contain",3,"src",4,"ngIf"],["style","height: 100%; width: 100%;text-align: center; display: table; background-color:rgba(0, 0, 0, 0.74)",4,"ngIf"],[2,"height","100%","width","100%","object-fit","contain",3,"src"],[2,"height","100%","width","100%","text-align","center","display","table","background-color","rgba(0, 0, 0, 0.74)"],[1,"content_wrapper"],[1,"glyphicon","glyphicon-eye-close",2,"font-size","3em","color","white"]],template:function(e,o){1&e&&i.YNc(0,Vn,5,8,"div",0),2&e&&i.Q6J("ngIf",o.options)},dependencies:[T.mk,T.sg,T.O5,T.PC,T.RF,T.n9,P.Fj,P.JJ,P.oH,Je,Ye],styles:["a[_ngcontent-%COMP%]{outline:none!important}.dropdown-inline[_ngcontent-%COMP%]{display:inline-block}.dropdown-toggle[_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%]{margin-left:4px;white-space:nowrap;display:inline-block}.chunkydropdown-menu[_ngcontent-%COMP%]{min-width:20em}.chunkyrow[_ngcontent-%COMP%]{line-height:2;margin-left:1em;font-size:2em}.slider[_ngcontent-%COMP%]{width:3.8em;height:3.8em;display:block;transition:all .125s linear;margin-left:.125em;margin-top:auto}.slideron[_ngcontent-%COMP%]{margin-left:1.35em}.content_wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.search-container[_ngcontent-%COMP%]{padding:0 5px 5px}"],changeDetection:0}),n})();var nt=y(1957);function jn(n,t){if(1&n&&(i._uU(0),i.ALo(1,"number"),i.TgZ(2,"span",28),i._uU(3,"BSQ"),i.qZA()),2&n){const e=i.oxw().$implicit;i.hij(" ",i.xi3(1,1,e.burntFee/100,"1.2-2")," ")}}function to(n,t){if(1&n&&(i._uU(0),i.ALo(1,"number"),i.TgZ(2,"span",28),i._uU(3,"BSQ"),i.qZA()),2&n){const e=i.oxw().$implicit,o=i.oxw(3);i.hij(" ",i.xi3(1,1,o.calculateTotalOutput(e.outputs)/100,"1.2-2")," ")}}const He=function(n,t){return[n,t]},We=function(n){return{data:n}},eo=function(n){return{blockHeight:n}};function io(n,t){if(1&n&&(i.TgZ(0,"tr")(1,"td")(2,"a",21),i.ALo(3,"relativeUrl"),i._uU(4),i.ALo(5,"slice"),i.qZA()(),i.TgZ(6,"td",16),i._UZ(7,"app-bisq-icon",22),i.TgZ(8,"span",23),i._uU(9),i.qZA()(),i.TgZ(10,"td"),i._UZ(11,"app-bisq-icon",24),i.YNc(12,jn,4,4,"ng-template",25),i.YNc(13,to,4,4,"ng-template",null,26,i.W1O),i.qZA(),i.TgZ(15,"td"),i._UZ(16,"app-time",27),i.qZA(),i.TgZ(17,"td",16)(18,"a",21),i.ALo(19,"relativeUrl"),i._uU(20),i.qZA()()()),2&n){const e=t.$implicit,o=i.MAs(14),s=i.oxw(3);i.xp6(2),i.Q6J("routerLink",i.WLB(21,He,i.lcZ(3,13,"/tx/"),e.id))("state",i.VKq(24,We,e)),i.xp6(2),i.Oqu(i.Dn7(5,15,e.id,0,8)),i.xp6(3),i.Q6J("txType",e.txType),i.xp6(2),i.hij(" ",s.getStringByTxType(e.txType),""),i.xp6(2),i.Q6J("txType",e.txType),i.xp6(1),i.Q6J("ngIf","PAY_TRADE_FEE"===e.txType||"ASSET_LISTING_FEE"===e.txType)("ngIfElse",o),i.xp6(4),i.Q6J("time",e.time/1e3)("fastRender",!0),i.xp6(2),i.Q6J("routerLink",i.WLB(26,He,i.lcZ(19,19,"/block/"),e.blockHash))("state",i.VKq(31,We,i.VKq(29,eo,e.blockHeight))),i.xp6(2),i.Oqu(e.blockHeight)}}function no(n,t){if(1&n&&(i.TgZ(0,"tbody"),i.YNc(1,io,21,33,"tr",20),i.qZA()),2&n){const e=i.oxw().ngIf,o=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.value[0])("ngForTrackBy",o.trackByFn)}}function oo(n,t){if(1&n){const e=i.EpF();i.TgZ(0,"ngb-pagination",29),i.NdJ("pageChange",function(s){i.CHM(e);const r=i.oxw(2);return i.KtG(r.page=s)})("pageChange",function(){i.CHM(e);const s=i.oxw(2);return i.KtG(s.pageChange(s.page))}),i.qZA()}if(2&n){const e=i.oxw().ngIf,o=i.oxw();i.Q6J("collectionSize",e.value[1])("rotate",!0)("pageSize",o.itemsPerPage)("page",o.page)("maxSize",o.paginationMaxSize)("boundaryLinks",!0)("ellipses",!1)}}function so(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"table",9)(2,"thead")(3,"th",10),i.SDv(4,11),i.qZA(),i.TgZ(5,"th",12),i.SDv(6,13),i.qZA(),i.TgZ(7,"th",10),i.SDv(8,14),i.qZA(),i.TgZ(9,"th",10),i.SDv(10,15),i.qZA(),i.TgZ(11,"th",16),i.SDv(12,17),i.qZA()(),i.YNc(13,no,2,2,"tbody",18),i.qZA(),i._UZ(14,"br"),i.YNc(15,oo,1,7,"ngb-pagination",19),i.BQk()),2&n){const e=t.ngIf;i.oxw();const o=i.MAs(11);i.xp6(13),i.Q6J("ngIf",e.value)("ngIfElse",o),i.xp6(2),i.Q6J("ngIf",e.value)}}function ro(n,t){1&n&&(i.TgZ(0,"td"),i._UZ(1,"span",31),i.qZA())}const ao=function(){return[1,2,3,4,5]};function lo(n,t){1&n&&(i.TgZ(0,"tr"),i.YNc(1,ro,2,0,"td",30),i.qZA()),2&n&&(i.xp6(1),i.Q6J("ngForOf",i.DdM(1,ao)))}function ho(n,t){if(1&n&&i.YNc(0,lo,2,2,"tr",30),2&n){const e=i.oxw();i.Q6J("ngForOf",e.loadingItems)}}const co=function(n){return{value:n}};let uo=(()=>{class n{constructor(e,o,s,r,a,l,h){this.websocketService=e,this.bisqApiService=o,this.seoService=s,this.formBuilder=r,this.route=a,this.router=l,this.cd=h,this.page=1,this.itemsPerPage=50,this.fiveItemsPxSize=250,this.isLoading=!0,this.types=[],this.txTypeOptions=[{id:1,name:"Gebyr for notering"},{id:2,name:"Blind stemme"},{id:3,name:"Kompensasjonsforesp\xF8rsel"},{id:4,name:"Genesis"},{id:13,name:"Uregelmessig"},{id:5,name:"L\xE5s"},{id:6,name:"Betal handelsavgift"},{id:7,name:"Bevis for forbrenning"},{id:8,name:"Forslag"},{id:9,name:"Refusjonsforesp\xF8rsel"},{id:10,name:"Overf\xF8r BSQ"},{id:11,name:"L\xE5s opp"},{id:12,name:"Stemme avsl\xF8ring"}],this.txTypesDefaultChecked=[1,2,3,4,5,6,7,8,9,10,11,12,13],this.txTypeDropdownSettings={buttonClasses:"btn btn-primary btn-sm",displayAllSelectedText:!0,showCheckAll:!0,showUncheckAll:!0,maxHeight:"500px",fixedTitle:!0},this.txTypeDropdownTexts={defaultTitle:"Filter",checkAll:"Velg alle",uncheckAll:"Avmarker alle"},this.paginationSize="md",this.paginationMaxSize=5,this.txTypes=["ASSET_LISTING_FEE","BLIND_VOTE","COMPENSATION_REQUEST","GENESIS","LOCKUP","PAY_TRADE_FEE","PROOF_OF_BURN","PROPOSAL","REIMBURSEMENT_REQUEST","TRANSFER_BSQ","UNLOCK","VOTE_REVEAL","IRREGULAR"]}ngOnInit(){this.websocketService.want(["blocks"]),this.seoService.setTitle("Transaksjoner"),this.radioGroupForm=this.formBuilder.group({txTypes:[this.txTypesDefaultChecked]}),this.loadingItems=Array(this.itemsPerPage),document.body.clientWidth<670&&(this.paginationSize="sm",this.paginationMaxSize=3),this.transactions$=this.route.queryParams.pipe((0,E.b)(e=>{if(e.page){const o=parseInt(e.page,10);this.page=o}else this.page=1;if(e.types){const o=e.types.split(",").map(s=>parseInt(s,10));this.types=o.map(s=>this.txTypes[s-1]),this.radioGroupForm.get("txTypes").setValue(o,{emitEvent:!1})}else this.types=[],this.radioGroupForm.get("txTypes").setValue([],{emitEvent:!1});this.cd.markForCheck()}),(0,N.w)(()=>this.bisqApiService.listTransactions$((this.page-1)*this.itemsPerPage,this.itemsPerPage,this.types)),(0,I.U)(e=>[e.body,parseInt(e.headers.get("x-total-count"),10)])),this.radioGroupSubscription=this.radioGroupForm.valueChanges.subscribe(e=>{this.types=e.txTypes.map(o=>this.txTypes[o-1]),this.types.length===this.txTypes.length&&(this.types=[]),this.page=1,this.typesChanged(e.txTypes),this.cd.markForCheck()})}pageChange(e){this.router.navigate([],{relativeTo:this.route,queryParams:{page:e},queryParamsHandling:"merge"})}typesChanged(e){this.router.navigate([],{relativeTo:this.route,queryParams:{types:e.join(","),page:1},queryParamsHandling:"merge"})}calculateTotalOutput(e){return e.reduce((o,s)=>o+s.bsqAmount,0)}getStringByTxType(e){const o=this.txTypes.indexOf(e)+1;return this.txTypeOptions.find(s=>o===s.id).name}trackByFn(e){return e}onResize(e){this.paginationMaxSize=e.target.innerWidth<670?3:5}ngOnDestroy(){this.radioGroupSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(J.i),i.Y36(w),i.Y36(Z.v),i.Y36(P.QS),i.Y36(x.gz),i.Y36(x.F0),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-transactions"]],decls:12,vars:9,consts:function(){let t,e,o,s,r,a;return t="BSQ Transaksjoner",e="TXID",o="Type",s="Bel\xF8p",r="Bekreftet",a="H\xF8yde",[[1,"container-xl",3,"resize"],[2,"float","left"],t,["id","filter",1,"d-block","float-right"],[3,"formGroup"],["formControlName","txTypes",3,"options","settings","texts"],[1,"clearfix"],[4,"ngIf"],["loadingTmpl",""],[1,"table","table-borderless","table-striped"],[2,"width","20%"],e,[1,"d-none","d-md-block",2,"width","100%"],o,s,r,[1,"d-none","d-md-block"],a,[4,"ngIf","ngIfElse"],["class","pagination-container",3,"collectionSize","rotate","pageSize","page","maxSize","boundaryLinks","ellipses","pageChange",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink","state"],[1,"mr-1",3,"txType"],[1,"d-none","d-md-inline"],[1,"d-inline","d-md-none","mr-1",3,"txType"],[3,"ngIf","ngIfElse"],["defaultTxType",""],["kind","since",3,"time","fastRender"],[1,"d-none","d-md-inline","symbol"],[1,"pagination-container",3,"collectionSize","rotate","pageSize","page","maxSize","boundaryLinks","ellipses","pageChange"],[4,"ngFor","ngForOf"],[1,"skeleton-loader"]]},template:function(e,o){1&e&&(i.TgZ(0,"div",0),i.NdJ("resize",function(r){return o.onResize(r)},!1,i.Jf7),i.TgZ(1,"h1",1),i.SDv(2,2),i.qZA(),i.TgZ(3,"div",3)(4,"form",4),i._UZ(5,"ngx-bootstrap-multiselect",5),i.qZA()(),i._UZ(6,"br")(7,"div",6),i.YNc(8,so,16,3,"ng-container",7),i.ALo(9,"async"),i.qZA(),i.YNc(10,ho,1,1,"ng-template",null,8,i.W1O)),2&e&&(i.xp6(4),i.Q6J("formGroup",o.radioGroupForm),i.xp6(1),i.Q6J("options",o.txTypeOptions)("settings",o.txTypeDropdownSettings)("texts",o.txTypeDropdownTexts),i.xp6(3),i.Q6J("ngIf",i.VKq(7,co,i.lcZ(9,5,o.transactions$))))},dependencies:[T.sg,T.O5,x.yS,P._Y,P.JJ,P.JL,P.sg,P.u,Ue.N9,Et.G,Ge,Xe,T.Ov,T.OU,T.JJ,nt.w],styles:["label[_ngcontent-%COMP%]{padding:.25rem 1rem;white-space:nowrap}[_nghost-%COMP%]     .dropdown-menu{right:0;left:inherit}.pagination-container[_ngcontent-%COMP%]{float:none}@media (min-width: 400px){.pagination-container[_ngcontent-%COMP%]{float:right}}.container-xl[_ngcontent-%COMP%]{padding-bottom:60px}@media (min-width: 400px){.container-xl[_ngcontent-%COMP%]{padding-bottom:100px}}"],changeDetection:0}),n})();var ct=y(262),$=y(9646),Ve=y(9168),ut=y(6331),he=y(2006),_o=y(3858),po=y(2266),Ke=y(5084);let fo=(()=>{class n{constructor(){}ngOnChanges(){this.totalInput=this.tx.inputs.filter(e=>e.isVerified).reduce((e,o)=>e+o.bsqAmount,0),this.totalOutput=this.tx.outputs.filter(e=>e.isVerified).reduce((e,o)=>e+o.bsqAmount,0),this.totalIssued=this.tx.outputs.filter(e=>e.isVerified&&"ISSUANCE_CANDIDATE_OUTPUT"===e.txOutputType).reduce((e,o)=>e+o.bsqAmount,0)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-transaction-details"]],inputs:{tx:"tx"},features:[i.TTD],decls:43,vars:15,consts:function(){let t,e,o,s,r;return t="Innganger",e="Utganger",o="Bel\xF8p som er utstedt",s="Type",r="Versjon",[[1,"box"],[1,"row"],[1,"col-md"],[1,"table","table-borderless","table-striped"],[1,"td-width"],t,[1,"symbol"],e,o,[1,"mobile-even"],s,[1,"mr-1",3,"txType"],r]},template:function(e,o){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"tbody")(5,"tr")(6,"td",4),i.SDv(7,5),i.qZA(),i.TgZ(8,"td"),i._uU(9),i.ALo(10,"number"),i.TgZ(11,"span",6),i._uU(12,"BSQ"),i.qZA()()(),i.TgZ(13,"tr")(14,"td"),i.SDv(15,7),i.qZA(),i.TgZ(16,"td"),i._uU(17),i.ALo(18,"number"),i.TgZ(19,"span",6),i._uU(20,"BSQ"),i.qZA()()(),i.TgZ(21,"tr")(22,"td"),i.SDv(23,8),i.qZA(),i.TgZ(24,"td"),i._uU(25),i.ALo(26,"number"),i.TgZ(27,"span",6),i._uU(28,"BSQ"),i.qZA()()()()()(),i.TgZ(29,"div",2)(30,"table",3)(31,"tbody",9)(32,"tr")(33,"td",4),i.SDv(34,10),i.qZA(),i.TgZ(35,"td"),i._UZ(36,"app-bisq-icon",11),i._uU(37),i.qZA()(),i.TgZ(38,"tr")(39,"td"),i.SDv(40,12),i.qZA(),i.TgZ(41,"td"),i._uU(42),i.qZA()()()()()()()),2&e&&(i.xp6(9),i.hij("",i.xi3(10,6,o.totalInput/100,"1.2-2")," "),i.xp6(8),i.hij("",i.xi3(18,9,o.totalOutput/100,"1.2-2")," "),i.xp6(8),i.hij("",i.xi3(26,12,o.totalIssued/100,"1.2-2")," "),i.xp6(11),i.Q6J("txType",o.tx.txType),i.xp6(1),i.hij(" ",o.tx.txTypeDisplayString,""),i.xp6(5),i.Oqu(o.tx.txVersion))},dependencies:[Ge,T.JJ],styles:["@media (max-width: 767.98px){.td-width[_ngcontent-%COMP%]{width:150px}.mobile-even[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(even){background-color:#181b2d}.mobile-even[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:inherit}}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}@media (min-width: 768px){.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:left}}"],changeDetection:0}),n})();function go(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"span"),i._uU(2),i.ALo(3,"currency"),i.ALo(4,"async"),i.qZA(),i.BQk()),2&n){const e=t.ngIf,o=i.oxw();i.xp6(1),i.ekj("green-color",o.green),i.xp6(1),i.Oqu(i.gM2(3,3,e.USD*o.bsq/100*i.lcZ(4,8,o.bsqPrice$)/1e8,"USD","symbol","1.2-2"))}}function mo(n,t){if(1&n&&(i._uU(0),i.ALo(1,"number"),i.TgZ(2,"span",2),i._uU(3,"BSQ"),i.qZA()),2&n){const e=i.oxw();i.hij(" ",i.xi3(1,1,e.bsq/100,e.digitsInfo)," ")}}let ce=(()=>{class n{constructor(e){this.stateService=e,this.digitsInfo="1.2-2",this.forceFiat=!1,this.green=!1}ngOnInit(){this.viewFiat$=this.stateService.viewFiat$.asObservable(),this.conversions$=this.stateService.conversions$.asObservable(),this.bsqPrice$=this.stateService.bsqPrice$}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(ut.b))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bsq-amount"]],inputs:{bsq:"bsq",digitsInfo:"digitsInfo",forceFiat:"forceFiat",green:"green"},decls:5,vars:6,consts:[[4,"ngIf","ngIfElse"],["viewFiatVin",""],[1,"symbol"]],template:function(e,o){if(1&e&&(i.YNc(0,go,5,10,"ng-container",0),i.ALo(1,"async"),i.ALo(2,"async"),i.YNc(3,mo,4,4,"ng-template",null,1,i.W1O)),2&e){const s=i.MAs(4);i.Q6J("ngIf",(o.forceFiat||i.lcZ(1,2,o.viewFiat$))&&i.lcZ(2,4,o.conversions$))("ngIfElse",s)}},dependencies:[T.O5,T.Ov,T.JJ,T.H9],styles:[".green-color[_ngcontent-%COMP%]{color:#3bcc49}"],changeDetection:0}),n})();var ue=y(9816);const kt=function(){return["fas","arrow-alt-circle-right"]};function vo(n,t){1&n&&(i.TgZ(0,"span",20),i._UZ(1,"fa-icon",21),i.qZA()),2&n&&(i.xp6(1),i.Q6J("icon",i.DdM(2,kt))("fixedWidth",!0))}const Rt=function(n,t){return[n,t]};function So(n,t){if(1&n&&(i.TgZ(0,"a",22),i.ALo(1,"relativeUrl"),i._UZ(2,"fa-icon",21),i.qZA()),2&n){const e=i.oxw(2).$implicit;i.Q6J("routerLink",i.WLB(5,Rt,i.lcZ(1,3,"/tx/"),e.spendingTxId)),i.xp6(2),i.Q6J("icon",i.DdM(8,kt))("fixedWidth",!0)}}function To(n,t){if(1&n&&(i.TgZ(0,"tr")(1,"td",13),i.YNc(2,vo,2,3,"ng-template",14),i.YNc(3,So,3,9,"ng-template",null,15,i.W1O),i.qZA(),i.TgZ(5,"td")(6,"a",16),i.ALo(7,"relativeUrl"),i.TgZ(8,"span",17),i._uU(9),i.ALo(10,"shortenString"),i.qZA(),i.TgZ(11,"span",18),i._uU(12),i.ALo(13,"shortenString"),i.qZA()()(),i.TgZ(14,"td",19),i._UZ(15,"app-bsq-amount",11),i.qZA()()),2&n){const e=i.MAs(4),o=i.oxw().$implicit;i.xp6(2),i.Q6J("ngIf",null===o.spendingTxId)("ngIfElse",e),i.xp6(4),i.MGl("title","B",o.address,""),i.Q6J("routerLink",i.WLB(15,Rt,i.lcZ(7,7,"/address/"),"B"+o.address)),i.xp6(3),i.hij("B",i.xi3(10,9,o.address,16),""),i.xp6(3),i.hij("B",i.xi3(13,12,o.address,35),""),i.xp6(3),i.Q6J("bsq",o.bsqAmount)}}function yo(n,t){1&n&&i.YNc(0,To,16,18,"tr",9),2&n&&i.Q6J("ngIf",t.$implicit.isVerified)}function Mo(n,t){1&n&&(i.TgZ(0,"span",25),i._UZ(1,"fa-icon",21),i.qZA()),2&n&&(i.xp6(1),i.Q6J("icon",i.DdM(2,kt))("fixedWidth",!0))}function Co(n,t){if(1&n&&(i.TgZ(0,"a",22),i.ALo(1,"relativeUrl"),i._UZ(2,"fa-icon",21),i.qZA()),2&n){const e=i.oxw(2).$implicit;i.Q6J("routerLink",i.WLB(5,Rt,i.lcZ(1,3,"/tx/"),e.spentInfo.txId)),i.xp6(2),i.Q6J("icon",i.DdM(8,kt))("fixedWidth",!0)}}function bo(n,t){if(1&n&&(i.TgZ(0,"tr")(1,"td")(2,"a",16),i.ALo(3,"relativeUrl"),i.TgZ(4,"span",17),i._uU(5),i.ALo(6,"shortenString"),i.qZA(),i.TgZ(7,"span",18),i._uU(8),i.ALo(9,"shortenString"),i.qZA()()(),i.TgZ(10,"td",19),i._UZ(11,"app-bsq-amount",11),i.qZA(),i.TgZ(12,"td",13),i.YNc(13,Mo,2,3,"span",23),i.YNc(14,Co,3,9,"ng-template",null,24,i.W1O),i.qZA()()),2&n){const e=i.MAs(15),o=i.oxw().$implicit;i.xp6(2),i.MGl("title","B",o.address,""),i.Q6J("routerLink",i.WLB(15,Rt,i.lcZ(3,7,"/address/"),"B"+o.address)),i.xp6(3),i.hij("B",i.xi3(6,9,o.address,16),""),i.xp6(3),i.hij("B",i.xi3(9,12,o.address,35),""),i.xp6(3),i.Q6J("bsq",o.bsqAmount),i.xp6(2),i.Q6J("ngIf",!o.spentInfo)("ngIfElse",e)}}function Ao(n,t){if(1&n&&i.YNc(0,bo,16,18,"tr",9),2&n){const e=t.$implicit;i.Q6J("ngIf",e.isVerified&&void 0===e.opReturn)}}function xo(n,t){if(1&n&&(i.TgZ(0,"div",26),i.ynx(1),i.SDv(2,27),i.BQk(),i._uU(3),i.ALo(4,"number"),i.TgZ(5,"span",28),i._uU(6,"BSQ"),i.qZA(),i.TgZ(7,"span",29)(8,"span",30),i._UZ(9,"app-bsq-amount",31),i.qZA()()()),2&n){const e=i.oxw();i.xp6(3),i.hij(": ",i.xi3(4,4,e.tx.burntFee/100,"1.2-2")," "),i.xp6(6),i.Q6J("bsq",e.tx.burntFee)("forceFiat",!0)("green",!0)}}function Bo(n,t){1&n&&i.GkF(0)}function wo(n,t){1&n&&i.SDv(0,36),2&n&&(i.pQV(t.$implicit),i.QtT(0))}function Oo(n,t){1&n&&i.SDv(0,37),2&n&&(i.pQV(t.$implicit),i.QtT(0))}const Io=function(n){return{$implicit:n}};function No(n,t){if(1&n&&(i.TgZ(0,"span")(1,"button",32),i.YNc(2,Bo,1,0,"ng-container",33),i.YNc(3,wo,1,1,"ng-template",null,34,i.W1O),i.YNc(5,Oo,1,1,"ng-template",null,35,i.W1O),i.qZA(),i._uU(7," \xa0 "),i.qZA()),2&n){const e=t.ngIf,o=i.MAs(4),s=i.MAs(6),r=i.oxw();i.xp6(2),i.Q6J("ngTemplateOutlet",e.height-r.tx.blockHeight+1==1?o:s)("ngTemplateOutletContext",i.VKq(2,Io,e.height-r.tx.blockHeight+1))}}let _e=(()=>{class n{constructor(e){this.stateService=e,this.showConfirmations=!1}trackByIndexFn(e){return e}ngOnInit(){this.latestBlock$=this.stateService.blocks$.pipe((0,I.U)(([e])=>e))}ngOnChanges(){this.totalOutput=this.tx.outputs.filter(e=>e.isVerified).reduce((e,o)=>e+o.bsqAmount,0)}switchCurrency(){this.stateService.viewFiat$.next(!this.stateService.viewFiat$.value)}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(ut.b))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-transfers"]],inputs:{tx:"tx",showConfirmations:"showConfirmations"},features:[i.TTD],decls:19,vars:9,consts:function(){let t,e,o;return t="Brent bel\xF8p",e="" + "\ufffd0\ufffd" + " bekreftelse",o="" + "\ufffd0\ufffd" + " bekreftelser",[[1,"header-bg","box"],[1,"row"],[1,"col"],[1,"table","table-borderless","smaller-text","table-xs",2,"margin","0"],["ngFor","",3,"ngForOf","ngForTrackBy"],[1,"w-100","d-block","d-md-none"],[1,"col","mobile-bottomcol"],["class","transaction-fee",4,"ngIf"],[1,"btn-container"],[4,"ngIf"],["type","button",1,"btn","btn-sm","btn-primary","mt-2",3,"click"],[3,"bsq"],[1,"clearfix"],[1,"arrow-td"],[3,"ngIf","ngIfElse"],["hasPreoutput",""],[3,"routerLink","title"],[1,"d-block","d-lg-none"],[1,"d-none","d-lg-block"],[1,"text-right","nowrap"],[1,"grey"],[3,"icon","fixedWidth"],[1,"red",3,"routerLink"],["class","green",4,"ngIf","ngIfElse"],["spent",""],[1,"green"],[1,"transaction-fee"],t,[1,"symbol"],[1,"extra-info"],[1,"fiat"],[3,"bsq","forceFiat","green"],["type","button",1,"btn","btn-sm","btn-success","mt-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["confirmationSingular",""],["confirmationPlural",""],e,o]},template:function(e,o){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"tbody"),i.YNc(5,yo,1,1,"ng-template",4),i.qZA()()(),i._UZ(6,"div",5),i.TgZ(7,"div",6)(8,"table",3)(9,"tbody"),i.YNc(10,Ao,1,1,"ng-template",4),i.qZA()()()(),i.TgZ(11,"div"),i.YNc(12,xo,10,7,"div",7),i.TgZ(13,"div",8),i.YNc(14,No,8,4,"span",9),i.ALo(15,"async"),i.TgZ(16,"button",10),i.NdJ("click",function(){return o.switchCurrency()}),i._UZ(17,"app-bsq-amount",11),i.qZA()(),i._UZ(18,"div",12),i.qZA()()),2&e&&(i.xp6(5),i.Q6J("ngForOf",o.tx.inputs)("ngForTrackBy",o.trackByIndexFn),i.xp6(5),i.Q6J("ngForOf",o.tx.outputs)("ngForTrackBy",o.trackByIndexFn),i.xp6(2),i.Q6J("ngIf",o.showConfirmations&&o.tx.burntFee),i.xp6(2),i.Q6J("ngIf",i.lcZ(15,7,o.showConfirmations&&o.latestBlock$)),i.xp6(3),i.Q6J("bsq",o.totalOutput))},dependencies:[T.sg,T.O5,T.tP,x.yS,ht.BN,ce,T.Ov,T.JJ,nt.w,ue.i],styles:[".arrow-td[_ngcontent-%COMP%]{width:20px}.green[_ngcontent-%COMP%], .grey[_ngcontent-%COMP%], .red[_ngcontent-%COMP%]{font-size:16px;top:-2px;position:relative}@media (min-width: 576px){.green[_ngcontent-%COMP%], .grey[_ngcontent-%COMP%], .red[_ngcontent-%COMP%]{font-size:19px}}.green[_ngcontent-%COMP%]{color:#28a745}.red[_ngcontent-%COMP%]{color:#dc3545}.grey[_ngcontent-%COMP%]{color:#6c757d}@media (max-width: 767.98px){.mobile-bottomcol[_ngcontent-%COMP%]{margin-top:15px}.details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{white-space:pre-wrap}}.details-table[_ngcontent-%COMP%]{margin-top:5px}.details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem}.details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){word-break:break-all;white-space:normal;font-family:Courier New,Courier,monospace;font-size:12px}.smaller-text[_ngcontent-%COMP%]{font-size:12px}@media (min-width: 576px){.smaller-text[_ngcontent-%COMP%]{font-size:14px!important}}.longer[_ngcontent-%COMP%]{max-width:100%!important;width:200px;display:inline-block}.row[_ngcontent-%COMP%]{flex-direction:column}@media (min-width: 992px){.row[_ngcontent-%COMP%]{flex-direction:row}}.extra-info[_ngcontent-%COMP%]{display:inline-table}.extra-info[_ngcontent-%COMP%]   .fiat[_ngcontent-%COMP%]{font-size:14px;display:block;text-align:right}.transaction-fee[_ngcontent-%COMP%]{display:block;margin:0 auto 5px}@media (min-width: 576px){.transaction-fee[_ngcontent-%COMP%]{display:inline-table}}.fiat[_ngcontent-%COMP%]{margin-left:10px;font-size:13px}@media (min-width: 576px){.fiat[_ngcontent-%COMP%]{font-size:14px}}.btn-container[_ngcontent-%COMP%]{text-align:right}@media (min-width: 576px){.btn-container[_ngcontent-%COMP%]{display:inline-table;float:right}}"],changeDetection:0}),n})();var Po=y(9886);function Eo(n,t){1&n&&i.GkF(0)}function ko(n,t){1&n&&i.SDv(0,40),2&n&&(i.pQV(t.$implicit),i.QtT(0))}function Ro(n,t){1&n&&i.SDv(0,41),2&n&&(i.pQV(t.$implicit),i.QtT(0))}const Zo=function(n){return{$implicit:n}};function Qo(n,t){if(1&n&&(i.TgZ(0,"button",36),i.YNc(1,Eo,1,0,"ng-container",37),i.YNc(2,ko,1,1,"ng-template",null,38,i.W1O),i.YNc(4,Ro,1,1,"ng-template",null,39,i.W1O),i.qZA()),2&n){const e=t.ngIf,o=i.MAs(3),s=i.MAs(5),r=i.oxw(2);i.xp6(1),i.Q6J("ngTemplateOutlet",e.height-r.bisqTx.blockHeight+1==1?o:s)("ngTemplateOutletContext",i.VKq(2,Zo,e.height-r.bisqTx.blockHeight+1))}}function Do(n,t){if(1&n&&i._UZ(0,"app-tx-features",34),2&n){const e=i.oxw(2);i.Q6J("tx",e.tx)}}function Lo(n,t){1&n&&i._UZ(0,"span",42)}function qo(n,t){if(1&n&&(i.TgZ(0,"td"),i._uU(1),i.ALo(2,"feeRounding"),i.TgZ(3,"span",19),i._uU(4,"radiowaves/vB"),i.qZA(),i._uU(5," \xa0 "),i._UZ(6,"app-tx-fee-rating",34),i.qZA()),2&n){const e=i.oxw(2);i.xp6(1),i.hij(" ",i.lcZ(2,2,e.tx.fee/(e.tx.weight/4))," "),i.xp6(5),i.Q6J("tx",e.tx)}}function $o(n,t){1&n&&(i.TgZ(0,"td"),i._UZ(1,"span",42),i.qZA())}const je=function(n,t){return[n,t]},Fo=function(n){return{blockHeight:n}},zo=function(n){return{data:n}};function Uo(n,t){if(1&n&&(i.TgZ(0,"div",2)(1,"div",3)(2,"h1"),i.SDv(3,4),i.qZA()(),i.TgZ(4,"span",5)(5,"span",6)(6,"app-truncate",7),i.ALo(7,"relativeUrl"),i._UZ(8,"app-clipboard",8),i.qZA()()(),i._UZ(9,"span",9),i.TgZ(10,"div",10),i.YNc(11,Qo,6,4,"button",11),i.ALo(12,"async"),i.qZA()(),i._UZ(13,"div",12),i.TgZ(14,"div",13)(15,"div",14)(16,"div",15)(17,"table",16)(18,"tbody")(19,"tr")(20,"td"),i.SDv(21,17),i.qZA(),i.TgZ(22,"td"),i._uU(23),i.ALo(24,"date"),i.TgZ(25,"div",18)(26,"i",19),i._uU(27,"("),i._UZ(28,"app-time",20),i._uU(29,")"),i.qZA()()()(),i.TgZ(30,"tr")(31,"td",21),i.SDv(32,22),i.qZA(),i.TgZ(33,"td")(34,"a",23),i.ALo(35,"relativeUrl"),i._uU(36),i.qZA()()(),i.TgZ(37,"tr")(38,"td",21),i.SDv(39,24),i.qZA(),i.TgZ(40,"td"),i.YNc(41,Do,1,1,"app-tx-features",25),i.YNc(42,Lo,1,0,"ng-template",null,26,i.W1O),i.qZA()()()()(),i.TgZ(44,"div",15)(45,"table",16)(46,"tbody")(47,"tr")(48,"td",21),i.SDv(49,27),i.qZA(),i.TgZ(50,"td"),i._uU(51),i.ALo(52,"number"),i.TgZ(53,"span",19),i._uU(54,"BSQ"),i.qZA(),i.TgZ(55,"span",28),i._UZ(56,"app-bsq-amount",29),i.qZA()()(),i.TgZ(57,"tr")(58,"td"),i.SDv(59,30),i.qZA(),i.YNc(60,qo,7,4,"td",31),i.YNc(61,$o,2,0,"ng-template",null,32,i.W1O),i.qZA()()()()()(),i._UZ(63,"br"),i.TgZ(64,"div",3)(65,"h2"),i.SDv(66,33),i.qZA()(),i._UZ(67,"app-bisq-transaction-details",34)(68,"br"),i.TgZ(69,"div",3)(70,"h2"),i.SDv(71,35),i.qZA()(),i._UZ(72,"app-bisq-transfers",34)(73,"br")),2&n){const e=i.MAs(43),o=i.MAs(62),s=i.oxw();i.xp6(6),i.Q6J("text",s.bisqTx.id)("lastChars",12)("link",i.WLB(33,je,i.lcZ(7,21,"/tx/"),s.bisqTx.id)),i.xp6(2),i.Q6J("text",s.bisqTx.id),i.xp6(3),i.Q6J("ngIf",i.lcZ(12,23,s.latestBlock$)),i.xp6(12),i.hij(" \u200e",i.xi3(24,25,s.bisqTx.time,"yyyy-MM-dd HH:mm")," "),i.xp6(5),i.Q6J("time",s.bisqTx.time/1e3)("fastRender",!0),i.xp6(6),i.Q6J("routerLink",i.WLB(36,je,i.lcZ(35,28,"/block/"),s.bisqTx.blockHash))("state",i.VKq(41,zo,i.VKq(39,Fo,s.bisqTx.blockHeight))),i.xp6(2),i.Oqu(s.bisqTx.blockHeight),i.xp6(5),i.Q6J("ngIf",s.tx)("ngIfElse",e),i.xp6(10),i.hij(" ",i.xi3(52,30,s.bisqTx.burntFee/100,"1.2-2")," "),i.xp6(5),i.Q6J("bsq",s.bisqTx.burntFee)("forceFiat",!0)("green",!0),i.xp6(4),i.Q6J("ngIf",!s.isLoadingTx)("ngIfElse",o),i.xp6(7),i.Q6J("tx",s.bisqTx),i.xp6(5),i.Q6J("tx",s.bisqTx)}}function Go(n,t){1&n&&(i._UZ(0,"div",12),i.TgZ(1,"div",2)(2,"div",3)(3,"h1"),i.SDv(4,43),i.qZA()()(),i.TgZ(5,"div",44)(6,"div",14)(7,"div",15)(8,"table",16)(9,"tbody")(10,"tr")(11,"td",21),i._UZ(12,"span",42),i.qZA(),i.TgZ(13,"td"),i._UZ(14,"span",42),i.qZA()(),i.TgZ(15,"tr")(16,"td",21),i._UZ(17,"span",42),i.qZA(),i.TgZ(18,"td"),i._UZ(19,"span",42),i.qZA()(),i.TgZ(20,"tr")(21,"td",21),i._UZ(22,"span",42),i.qZA(),i.TgZ(23,"td"),i._UZ(24,"span",42),i.qZA()()()()(),i.TgZ(25,"div",15)(26,"table",16)(27,"tbody")(28,"tr")(29,"td",21),i._UZ(30,"span",42),i.qZA(),i.TgZ(31,"td"),i._UZ(32,"span",42),i.qZA()(),i.TgZ(33,"tr")(34,"td",21),i._UZ(35,"span",42),i.qZA(),i.TgZ(36,"td"),i._UZ(37,"span",42),i.qZA()()()()()()(),i._UZ(38,"br"),i.TgZ(39,"div",3)(40,"h2"),i.SDv(41,45),i.qZA()(),i.TgZ(42,"div",44)(43,"table",16)(44,"tbody")(45,"tr")(46,"td"),i._UZ(47,"span",42),i.qZA(),i.TgZ(48,"td"),i._UZ(49,"span",42),i.qZA()(),i.TgZ(50,"tr")(51,"td"),i._UZ(52,"span",42),i.qZA(),i.TgZ(53,"td"),i._UZ(54,"span",42),i.qZA()(),i.TgZ(55,"tr")(56,"td"),i._UZ(57,"span",42),i.qZA()()()()(),i._UZ(58,"br"),i.TgZ(59,"div",3)(60,"h2"),i.SDv(61,46),i.qZA()(),i.TgZ(62,"div",44)(63,"div",14)(64,"div",15)(65,"table",16)(66,"tbody")(67,"tr")(68,"td"),i._UZ(69,"span",42),i.qZA()()()()(),i.TgZ(70,"div",15)(71,"table",16)(72,"tbody")(73,"tr")(74,"td"),i._UZ(75,"span",42),i.qZA()()()()()()())}function Jo(n,t){if(1&n&&(i._UZ(0,"div",12),i.TgZ(1,"div",47),i._uU(2," Error loading Bisq transaction "),i._UZ(3,"br")(4,"br"),i.TgZ(5,"i"),i._uU(6),i.qZA()()),2&n){const e=i.oxw();i.xp6(6),i.AsE("",e.error.status,": ",e.error.statusText,"")}}let Yo=(()=>{class n{constructor(e,o,s,r,a,l,h){this.websocketService=e,this.route=o,this.bisqApiService=s,this.electrsApiService=r,this.stateService=a,this.seoService=l,this.router=h,this.isLoading=!0,this.isLoadingTx=!0,this.error=null}ngOnInit(){this.websocketService.want(["blocks"]),this.subscription=this.route.paramMap.pipe((0,N.w)(e=>(this.isLoading=!0,this.isLoadingTx=!0,this.error=null,document.body.scrollTo(0,0),this.txId=e.get("id")||"",this.seoService.setTitle("Transaksjon: " + this.txId + ""),history.state.data?(0,$.of)(history.state.data):this.bisqApiService.getTransaction$(this.txId).pipe((0,ct.K)(o=>404===o.status?this.electrsApiService.getTransaction$(this.txId).pipe((0,I.U)(s=>s.status.confirmed?(this.error={status:200,statusText:"Transaction is confirmed but not available in the Bisq database, please try reloading this page."},null):s),(0,ct.K)(s=>(console.log(s),this.error=s,(0,$.of)(null)))):(this.error=o,(0,$.of)(null)))))),(0,N.w)(e=>e?e.version?("bisq"===this.stateService.env.BASE_MODULE?window.location.replace("https://bitexplorer.io/tx/"+this.txId):this.router.navigate(["/tx/",this.txId],{state:{data:e,bsqTx:!0}}),(0,$.of)(null)):(this.bisqTx=e,this.isLoading=!1,this.electrsApiService.getTransaction$(this.txId)):(0,$.of)(null))).subscribe(e=>{this.isLoadingTx=!1,e&&(this.tx=e)},e=>{this.error=e}),this.latestBlock$=this.stateService.blocks$.pipe((0,I.U)(([e])=>e)),this.stateService.bsqPrice$.subscribe(e=>{this.price=e})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(J.i),i.Y36(x.gz),i.Y36(w),i.Y36(Ve.K),i.Y36(ut.b),i.Y36(Z.v),i.Y36(x.F0))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-transaction"]],decls:4,vars:3,consts:function(){let t,e,o,s,r,a,l,h,c,u,_,f,d;return t="Transaksjon",e="Tidspunkt",o="Inkludert i blokk",s="Funksjoner",r="Brent bel\xF8p",a="Avgift per vByte",l="Detaljer",h="Innganger & Utganger",c="" + "\ufffd0\ufffd" + " bekreftelse",u="" + "\ufffd0\ufffd" + " bekreftelser",_="Transaksjon",f="Detaljer",d="Innganger & Utganger",[[1,"container-xl"],[3,"ngIf"],[1,"title-block"],[1,"title"],t,[1,"tx-link"],[1,"txid"],[3,"text","lastChars","link"],[3,"text"],[1,"grow"],[1,"container-buttons"],["type","button","class","btn btn-sm btn-success float-right",4,"ngIf"],[1,"clearfix"],[1,"box","transaction-container"],[1,"row"],[1,"col-sm"],[1,"table","table-borderless","table-striped"],e,[1,"lg-inline"],[1,"symbol"],["kind","since",3,"time","fastRender"],[1,"td-width"],o,[3,"routerLink","state"],s,[3,"tx",4,"ngIf","ngIfElse"],["loadingTx",""],r,[1,"fiat"],[3,"bsq","forceFiat","green"],a,[4,"ngIf","ngIfElse"],["loadingTxFee",""],l,[3,"tx"],h,["type","button",1,"btn","btn-sm","btn-success","float-right"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["confirmationSingular",""],["confirmationPlural",""],c,u,[1,"skeleton-loader"],_,[1,"box"],f,d,[1,"text-center"]]},template:function(e,o){1&e&&(i.TgZ(0,"div",0),i.YNc(1,Uo,74,43,"ng-template",1),i.YNc(2,Go,76,0,"ng-template",1),i.YNc(3,Jo,7,2,"ng-template",1),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngIf",!o.isLoading&&!o.error),i.xp6(1),i.Q6J("ngIf",o.isLoading&&!o.error),i.xp6(1),i.Q6J("ngIf",o.error))},dependencies:[T.O5,T.tP,x.yS,Et.G,he.c,_o.t,po.K,Ke.J,fo,_e,ce,T.Ov,T.JJ,T.uU,nt.w,Po.D],styles:[".adjust-btn-padding[_ngcontent-%COMP%]{padding:.55rem}.container-buttons[_ngcontent-%COMP%]{align-self:center}.title-block[_ngcontent-%COMP%]{flex-wrap:wrap;align-items:baseline}@media (min-width: 650px){.title-block[_ngcontent-%COMP%]{flex-direction:row}}.title-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0rem;margin-right:15px;line-height:1}.tx-link[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:baseline;width:0;max-width:100%;margin-right:0;margin-bottom:0;margin-top:8px}@media (min-width: 651px){.tx-link[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:0;margin-right:1em;top:1px;position:relative}}@media (max-width: 650px){.tx-link[_ngcontent-%COMP%]{width:100%;order:3}}.tx-link[_ngcontent-%COMP%]   .txid[_ngcontent-%COMP%]{width:200px;min-width:200px;flex-grow:1}.td-width[_ngcontent-%COMP%]{width:150px}@media (max-width: 768px){.td-width[_ngcontent-%COMP%]{width:175px}}.badge[_ngcontent-%COMP%]{position:relative;top:-1px}.btn-small-height[_ngcontent-%COMP%]{line-height:1.1}.arrow-green[_ngcontent-%COMP%]{color:#1a9436}.arrow-red[_ngcontent-%COMP%]{color:#dc3545}.container-xl[_ngcontent-%COMP%]{margin-bottom:40px}.row[_ngcontent-%COMP%]{flex-direction:column}@media (min-width: 850px){.row[_ngcontent-%COMP%]{flex-direction:row}}.box.hidden[_ngcontent-%COMP%]{visibility:hidden;height:0px;padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0}.graph-container[_ngcontent-%COMP%]{position:relative;width:100%;background:#181b2d;padding:10px 0 0}.toggle-wrapper[_ngcontent-%COMP%]{width:100%;text-align:center;margin:1.25em 0 0}.graph-toggle[_ngcontent-%COMP%]{margin:auto}@media (max-width: 767.98px){.mobile-bottomcol[_ngcontent-%COMP%]{margin-top:15px}.details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{white-space:pre-wrap}}.fiat[_ngcontent-%COMP%]{display:block}@media (min-width: 768px){.fiat[_ngcontent-%COMP%]{display:inline-block;margin-left:15px;text-align:left}}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}@media (min-width: 576px){.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem}}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}@media (min-width: 850px){.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:left}}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .effective-fee-container[_ngcontent-%COMP%]{display:block}@media (min-width: 768px){.effective-fee-container[_ngcontent-%COMP%]{display:inline-block}}.title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1;margin:0;padding-bottom:10px}.btn-outline-info[_ngcontent-%COMP%]{margin-top:5px}@media (min-width: 768px){.btn-outline-info[_ngcontent-%COMP%]{margin-top:0}}.details-button[_ngcontent-%COMP%], .flow-toggle[_ngcontent-%COMP%]{margin-top:-5px;margin-left:10px}@media (min-width: 768px){.details-button[_ngcontent-%COMP%], .flow-toggle[_ngcontent-%COMP%]{display:inline-block;margin-top:0;margin-bottom:0}}.subtitle-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline;justify-content:space-between}.subtitle-block[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex-shrink:0}.subtitle-block[_ngcontent-%COMP%]   .title-buttons[_ngcontent-%COMP%]{flex-shrink:1;text-align:right}.subtitle-block[_ngcontent-%COMP%]   .title-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px;margin-left:8px}.cpfp-details[_ngcontent-%COMP%]   .txids[_ngcontent-%COMP%]{width:60%}@media (max-width: 500px){.cpfp-details[_ngcontent-%COMP%]   .txids[_ngcontent-%COMP%]{width:40%}}.tx-list[_ngcontent-%COMP%]   .alert-link[_ngcontent-%COMP%]{display:block}"]}),n})();function Xo(n,t){1&n&&(i.tHW(0,5,1),i.GkF(1),i.N_p())}function Ho(n,t){if(1&n&&(i.tHW(0,5),i.YNc(1,Xo,2,0,"ng-container",6),i.N_p()),2&n){i.oxw();const e=i.MAs(5);i.xp6(1),i.Q6J("ngTemplateOutlet",e)}}const Zt=function(n,t){return[n,t]};function Wo(n,t){if(1&n&&(i.TgZ(0,"a",7),i.ALo(1,"relativeUrl"),i._uU(2),i.qZA()),2&n){const e=i.oxw();i.Q6J("routerLink",i.WLB(4,Zt,i.lcZ(1,2,"/block/"),e.blockHash)),i.xp6(2),i.Oqu(e.blockHeight)}}function Vo(n,t){1&n&&i.GkF(0)}function Ko(n,t){1&n&&i.SDv(0,25),2&n&&(i.pQV(t.$implicit),i.QtT(0))}function jo(n,t){1&n&&i.SDv(0,26),2&n&&(i.pQV(t.$implicit),i.QtT(0))}const ts=function(n){return{data:n}};function es(n,t){if(1&n&&(i.TgZ(0,"div",27)(1,"a",28),i.ALo(2,"relativeUrl"),i.TgZ(3,"span",29),i._uU(4),i.ALo(5,"shortenString"),i.qZA(),i.TgZ(6,"span",30),i._uU(7),i.qZA()(),i.TgZ(8,"div",31),i._uU(9),i.ALo(10,"date"),i.qZA(),i._UZ(11,"div",4),i.qZA(),i._UZ(12,"app-bisq-transfers",32)(13,"br")),2&n){const e=t.$implicit;i.xp6(1),i.Q6J("routerLink",i.WLB(15,Zt,i.lcZ(2,7,"/tx/"),e.id))("state",i.VKq(18,ts,e)),i.xp6(3),i.Oqu(i.xi3(5,9,e.id,16)),i.xp6(3),i.Oqu(e.id),i.xp6(2),i.hij(" \u200e",i.xi3(10,12,e.time,"yyyy-MM-dd HH:mm")," "),i.xp6(3),i.Q6J("tx",e)("showConfirmations",!0)}}const is=function(n){return{$implicit:n}};function ns(n,t){if(1&n&&(i.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"table",11)(4,"tbody")(5,"tr")(6,"td",12),i.SDv(7,13),i.qZA(),i.TgZ(8,"td")(9,"a",14),i.ALo(10,"relativeUrl"),i._uU(11),i.ALo(12,"shortenString"),i.qZA(),i._UZ(13,"app-clipboard",15),i.qZA()(),i.TgZ(14,"tr")(15,"td"),i.SDv(16,16),i.qZA(),i.TgZ(17,"td"),i._uU(18),i.ALo(19,"date"),i.TgZ(20,"div",17)(21,"i",18),i._uU(22,"("),i._UZ(23,"app-time",19),i._uU(24,")"),i.qZA()()()()()()(),i.TgZ(25,"div",10)(26,"table",11)(27,"tbody")(28,"tr")(29,"td",12),i.SDv(30,20),i.qZA(),i.TgZ(31,"td")(32,"a",14),i.ALo(33,"relativeUrl"),i._uU(34),i.ALo(35,"shortenString"),i.qZA(),i._UZ(36,"app-clipboard",15),i.qZA()()()()()()(),i._UZ(37,"div",4)(38,"br"),i.TgZ(39,"h2"),i.YNc(40,Vo,1,0,"ng-container",21),i.ALo(41,"number"),i.YNc(42,Ko,1,1,"ng-template",null,22,i.W1O),i.YNc(44,jo,1,1,"ng-template",null,23,i.W1O),i.qZA(),i.YNc(46,es,14,20,"ng-template",24)),2&n){const e=i.MAs(43),o=i.MAs(45),s=i.oxw();i.xp6(9),i.s9C("title",s.block.hash),i.Q6J("routerLink",i.WLB(29,Zt,i.lcZ(10,14,"/block/"),s.block.hash)),i.xp6(2),i.Oqu(i.xi3(12,16,s.block.hash,13)),i.xp6(2),i.Q6J("text",s.block.hash),i.xp6(5),i.hij(" \u200e",i.xi3(19,19,s.block.time,"yyyy-MM-dd HH:mm")," "),i.xp6(5),i.Q6J("time",s.block.time/1e3)("fastRender",!0),i.xp6(9),i.s9C("title",s.block.hash),i.Q6J("routerLink",i.WLB(32,Zt,i.lcZ(33,22,"/block/"),s.block.previousBlockHash)),i.xp6(2),i.Oqu(i.xi3(35,24,s.block.previousBlockHash,13)),i.xp6(2),i.Q6J("text",s.block.previousBlockHash),i.xp6(4),i.Q6J("ngTemplateOutlet",1===s.block.txs.length?e:o)("ngTemplateOutletContext",i.VKq(35,is,i.lcZ(41,27,s.block.txs.length))),i.xp6(6),i.Q6J("ngForOf",s.block.txs)}}function os(n,t){1&n&&(i.TgZ(0,"div",33)(1,"div",9)(2,"div",10)(3,"table",11)(4,"tbody")(5,"tr")(6,"td",12),i.SDv(7,34),i.qZA(),i.TgZ(8,"td"),i._UZ(9,"span",35),i.qZA()(),i.TgZ(10,"tr")(11,"td"),i.SDv(12,36),i.qZA(),i.TgZ(13,"td"),i._UZ(14,"span",35),i.qZA()()()()(),i.TgZ(15,"div",10)(16,"table",11)(17,"tbody")(18,"tr")(19,"td",12),i.SDv(20,37),i.qZA(),i.TgZ(21,"td"),i._UZ(22,"span",35),i.qZA()()()()()()())}function ss(n,t){if(1&n&&(i._UZ(0,"div",4),i.TgZ(1,"div",38),i._uU(2," Error loading block "),i._UZ(3,"br"),i.TgZ(4,"i"),i._uU(5),i.qZA()()),2&n){const e=i.oxw();i.xp6(5),i.AsE("",e.error.status,": ",e.error.statusText,"")}}let rs=(()=>{class n{constructor(e,o,s,r,a,l,h){this.websocketService=e,this.bisqApiService=o,this.route=s,this.seoService=r,this.electrsApiService=a,this.router=l,this.location=h,this.blockHash="",this.blockHeight=0,this.isLoading=!0}ngOnInit(){this.websocketService.want(["blocks"]),this.subscription=this.route.paramMap.pipe((0,N.w)(e=>{const o=e.get("id")||"";if(document.body.scrollTo(0,0),this.isLoading=!0,this.error=null,history.state.data&&history.state.data.blockHeight&&(this.blockHeight=history.state.data.blockHeight),history.state.data&&history.state.data.block)return this.blockHeight=history.state.data.block.height,(0,$.of)(history.state.data.block);let s=!1;return/^[0-9]+$/.test(o)?s=!0:this.blockHash=o,s?this.electrsApiService.getBlockHashFromHeight$(parseInt(o,10)).pipe((0,N.w)(r=>{if(r)return this.blockHash=r,this.location.replaceState(this.router.createUrlTree(["/bisq/block/",r]).toString()),this.bisqApiService.getBlock$(this.blockHash).pipe((0,ct.K)(this.caughtHttpError.bind(this)))}),(0,ct.K)(this.caughtHttpError.bind(this))):this.bisqApiService.getBlock$(this.blockHash).pipe((0,ct.K)(this.caughtHttpError.bind(this)))})).subscribe(e=>{!e||(this.isLoading=!1,this.blockHeight=e.height,this.seoService.setTitle("Blokk " + e.height + ": " + e.hash + ""),this.block=e)})}ngOnDestroy(){this.subscription.unsubscribe()}caughtHttpError(e){return this.error=e,(0,$.of)(null)}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(J.i),i.Y36(w),i.Y36(x.gz),i.Y36(Z.v),i.Y36(Ve.K),i.Y36(x.F0),i.Y36(T.Ye))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-block"]],decls:10,vars:4,consts:function(){let t,e,o,s,r,a,l,h,c;return t="Blokk " + "\ufffd*1:1\ufffd\ufffd#1:1\ufffd" + " " + "\ufffd/#1:1\ufffd\ufffd/*1:1\ufffd" + "",e="Hash",o="Tidspunkt",s="Forrige hash",r="" + "\ufffd0\ufffd" + " transaksjon",a="" + "\ufffd0\ufffd" + " transaksjoner",l="Hash",h="Tidspunkt",c="Forrige hash",[[1,"container-xl"],[1,"title-block"],[3,"ngIf"],["blockTemplateContent",""],[1,"clearfix"],t,[4,"ngTemplateOutlet"],[3,"routerLink"],[1,"box","block-container"],[1,"row"],[1,"col"],[1,"table","table-borderless","table-striped"],[1,"td-width"],e,[3,"routerLink","title"],[1,"d-none","d-sm-inline-block",3,"text"],o,[1,"lg-inline"],[1,"symbol"],["kind","since",3,"time","fastRender"],s,[4,"ngTemplateOutlet","ngTemplateOutletContext"],["transactionsSingular",""],["transactionsPlural",""],["ngFor","",3,"ngForOf"],r,a,[1,"header-bg","box",2,"padding","10px","margin-bottom","10px"],[3,"routerLink","state"],[1,"d-block","d-md-none",2,"float","left"],[1,"d-none","d-md-block",2,"float","left"],[1,"float-right"],[3,"tx","showConfirmations"],[1,"box"],l,[1,"skeleton-loader"],h,c,[1,"text-center"]]},template:function(e,o){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h1"),i.YNc(3,Ho,2,1,"ng-template",2),i.qZA()(),i.YNc(4,Wo,3,7,"ng-template",null,3,i.W1O),i._UZ(6,"div",4),i.YNc(7,ns,47,37,"ng-template",2),i.YNc(8,os,23,0,"ng-template",2),i.YNc(9,ss,6,2,"ng-template",2),i.qZA()),2&e&&(i.xp6(3),i.Q6J("ngIf",o.blockHeight),i.xp6(4),i.Q6J("ngIf",!o.isLoading&&!o.error),i.xp6(1),i.Q6J("ngIf",o.isLoading&&!o.error),i.xp6(1),i.Q6J("ngIf",o.error))},dependencies:[T.sg,T.O5,T.tP,x.yS,Et.G,he.c,_e,T.JJ,T.uU,nt.w,ue.i],styles:[".td-width[_ngcontent-%COMP%]{width:140px}@media (min-width: 768px){.td-width[_ngcontent-%COMP%]{width:175px}}h1[_ngcontent-%COMP%]{margin:0;padding:0}@media (min-width: 576px){h1[_ngcontent-%COMP%]{float:left;margin-right:10px}}.row[_ngcontent-%COMP%]{flex-direction:column}@media (min-width: 768px){.row[_ngcontent-%COMP%]{flex-direction:row}}.block-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}@media (min-width: 992px){.block-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:left}}.block-container[_ngcontent-%COMP%]   .fiat[_ngcontent-%COMP%]{display:block;font-size:13px}@media (min-width: 992px){.block-container[_ngcontent-%COMP%]   .fiat[_ngcontent-%COMP%]{display:inline-block;font-size:14px;margin-left:10px}}"]}),n})();var as=y(5698),ls=y(5577);const hs=function(n,t){return[n,t]},cs=function(n){return{block:n}},us=function(n){return{data:n}};function _s(n,t){if(1&n&&(i.TgZ(0,"tr")(1,"td")(2,"a",17),i.ALo(3,"relativeUrl"),i._uU(4),i.qZA()(),i.TgZ(5,"td"),i._UZ(6,"app-time",18),i.qZA(),i.TgZ(7,"td"),i._uU(8),i.ALo(9,"number"),i.TgZ(10,"span",19),i._uU(11,"BSQ"),i.qZA()(),i.TgZ(12,"td",20),i._uU(13),i.qZA()()),2&n){const e=t.$implicit,o=i.oxw(3);i.xp6(2),i.Q6J("routerLink",i.WLB(12,hs,i.lcZ(3,7,"/block/"),e.hash))("state",i.VKq(17,us,i.VKq(15,cs,e))),i.xp6(2),i.Oqu(e.height),i.xp6(2),i.Q6J("time",e.time/1e3)("fastRender",!0),i.xp6(2),i.hij("",i.xi3(9,9,o.calculateTotalOutput(e)/100,"1.2-2")," "),i.xp6(5),i.Oqu(e.txs.length)}}function ps(n,t){if(1&n&&(i.TgZ(0,"tbody"),i.YNc(1,_s,14,19,"tr",16),i.qZA()),2&n){const e=i.oxw().ngIf,o=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.value[0])("ngForTrackBy",o.trackByFn)}}function fs(n,t){if(1&n){const e=i.EpF();i.TgZ(0,"ngb-pagination",21),i.NdJ("pageChange",function(s){i.CHM(e);const r=i.oxw(2);return i.KtG(r.page=s)})("pageChange",function(){i.CHM(e);const s=i.oxw(2);return i.KtG(s.pageChange(s.page))}),i.qZA()}if(2&n){const e=i.oxw().ngIf,o=i.oxw();i.Q6J("size",o.paginationSize)("collectionSize",e.value[1])("rotate",!0)("pageSize",o.itemsPerPage)("page",o.page)("maxSize",o.paginationMaxSize)("boundaryLinks",!0)("ellipses",!1)}}function ds(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"div",6)(2,"table",7)(3,"thead")(4,"th",8),i.SDv(5,9),i.qZA(),i.TgZ(6,"th",8),i.SDv(7,10),i.qZA(),i.TgZ(8,"th",8),i.SDv(9,11),i.qZA(),i.TgZ(10,"th",12),i.SDv(11,13),i.qZA()(),i.YNc(12,ps,2,2,"tbody",14),i.qZA()(),i._UZ(13,"br"),i.YNc(14,fs,1,8,"ngb-pagination",15),i._UZ(15,"div",3)(16,"br"),i.BQk()),2&n){const e=t.ngIf;i.oxw();const o=i.MAs(8);i.xp6(12),i.Q6J("ngIf",e.value)("ngIfElse",o),i.xp6(2),i.Q6J("ngIf",e.value)}}function gs(n,t){1&n&&(i.TgZ(0,"td"),i._UZ(1,"span",23),i.qZA())}const ms=function(){return[1,2,3,4]};function vs(n,t){1&n&&(i.TgZ(0,"tr"),i.YNc(1,gs,2,0,"td",22),i.qZA()),2&n&&(i.xp6(1),i.Q6J("ngForOf",i.DdM(1,ms)))}function Ss(n,t){if(1&n&&i.YNc(0,vs,2,2,"tr",22),2&n){const e=i.oxw();i.Q6J("ngForOf",e.loadingItems)}}const Ts=function(n){return{value:n}};let ys=(()=>{class n{constructor(e,o,s,r,a){this.websocketService=e,this.bisqApiService=o,this.seoService=s,this.route=r,this.router=a,this.page=1,this.contentSpace=window.innerHeight-240,this.fiveItemsPxSize=250,this.isLoading=!0,this.paginationSize="md",this.paginationMaxSize=5}ngOnInit(){this.websocketService.want(["blocks"]),this.seoService.setTitle("Blokker"),this.itemsPerPage=Math.max(5*Math.round(this.contentSpace/this.fiveItemsPxSize),10),this.loadingItems=Array(this.itemsPerPage),document.body.clientWidth<670&&(this.paginationSize="sm",this.paginationMaxSize=3),this.blocks$=this.route.queryParams.pipe((0,as.q)(1),(0,E.b)(e=>{e.page&&(this.page=parseInt(e.page,10))}),(0,ls.z)(()=>this.route.queryParams),(0,I.U)(e=>{if(e.page){const o=parseInt(e.page,10);return this.page=o,o}return this.page=1,1}),(0,N.w)(e=>this.bisqApiService.listBlocks$((e-1)*this.itemsPerPage,this.itemsPerPage)),(0,I.U)(e=>[e.body,parseInt(e.headers.get("x-total-count"),10)]))}calculateTotalOutput(e){return e.txs.reduce((o,s)=>o+s.outputs.reduce((r,a)=>r+a.bsqAmount,0),0)}trackByFn(e){return e}pageChange(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}onResize(e){this.paginationMaxSize=e.target.innerWidth<670?3:5}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(J.i),i.Y36(w),i.Y36(Z.v),i.Y36(x.gz),i.Y36(x.F0))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-blocks"]],decls:9,vars:5,consts:function(){let t,e,o,s,r;return t="BSQ-blokker",e="H\xF8yde",o="Bekreftet",s="Totalt sendt",r="Transaksjoner",[[1,"container-xl",3,"resize"],[2,"float","left"],t,[1,"clearfix"],[4,"ngIf"],["loadingTmpl",""],[1,"table-responsive-sm"],[1,"table","table-borderless","table-striped"],[2,"width","25%"],e,o,s,[1,"d-none","d-md-block",2,"width","25%"],r,[4,"ngIf","ngIfElse"],["class","pagination-container",3,"size","collectionSize","rotate","pageSize","page","maxSize","boundaryLinks","ellipses","pageChange",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink","state"],["kind","since",3,"time","fastRender"],[1,"symbol"],[1,"d-none","d-md-block"],[1,"pagination-container",3,"size","collectionSize","rotate","pageSize","page","maxSize","boundaryLinks","ellipses","pageChange"],[4,"ngFor","ngForOf"],[1,"skeleton-loader"]]},template:function(e,o){1&e&&(i.TgZ(0,"div",0),i.NdJ("resize",function(r){return o.onResize(r)},!1,i.Jf7),i.TgZ(1,"h1",1),i.SDv(2,2),i.qZA(),i._UZ(3,"br")(4,"div",3),i.YNc(5,ds,17,3,"ng-container",4),i.ALo(6,"async"),i.qZA(),i.YNc(7,Ss,1,1,"ng-template",null,5,i.W1O)),2&e&&(i.xp6(5),i.Q6J("ngIf",i.VKq(3,Ts,i.lcZ(6,1,o.blocks$))))},dependencies:[T.sg,T.O5,x.yS,Ue.N9,Et.G,T.Ov,T.JJ,nt.w],styles:[".pagination-container[_ngcontent-%COMP%]{float:none;margin-bottom:200px}@media (min-width: 400px){.pagination-container[_ngcontent-%COMP%]{float:right}}.container-xl[_ngcontent-%COMP%]{padding-bottom:110px}"],changeDetection:0}),n})();var Ms=y(9300),Cs=y(7930);function bs(n,t){1&n&&i.GkF(0)}function As(n,t){1&n&&i.SDv(0,25),2&n&&(i.pQV(t.$implicit),i.QtT(0))}function xs(n,t){1&n&&i.SDv(0,26),2&n&&(i.pQV(t.$implicit),i.QtT(0))}const ti=function(n,t){return[n,t]},Bs=function(n){return{data:n}};function ws(n,t){if(1&n&&(i.TgZ(0,"div",27)(1,"a",28),i.ALo(2,"relativeUrl"),i.TgZ(3,"span",29),i._uU(4),i.ALo(5,"shortenString"),i.qZA(),i.TgZ(6,"span",30),i._uU(7),i.qZA()(),i.TgZ(8,"div",31),i._uU(9),i.ALo(10,"date"),i.qZA(),i._UZ(11,"div",5),i.qZA(),i._UZ(12,"app-bisq-transfers",32)(13,"br")),2&n){const e=t.$implicit;i.xp6(1),i.Q6J("routerLink",i.WLB(15,ti,i.lcZ(2,7,"/tx/"),e.id))("state",i.VKq(18,Bs,e)),i.xp6(3),i.Oqu(i.xi3(5,9,e.id,16)),i.xp6(3),i.Oqu(e.id),i.xp6(2),i.hij(" \u200e",i.xi3(10,12,e.time,"yyyy-MM-dd HH:mm")," "),i.xp6(3),i.Q6J("tx",e)("showConfirmations",!0)}}const Os=function(n){return{$implicit:n}};function Is(n,t){if(1&n&&(i.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"table",10)(4,"tbody")(5,"tr")(6,"td"),i.SDv(7,11),i.qZA(),i.TgZ(8,"td"),i._uU(9),i.ALo(10,"number"),i.TgZ(11,"span",12),i._uU(12,"BSQ"),i.qZA()()(),i.TgZ(13,"tr")(14,"td"),i.SDv(15,13),i.qZA(),i.TgZ(16,"td"),i._uU(17),i.ALo(18,"number"),i.TgZ(19,"span",12),i._uU(20,"BSQ"),i.qZA()()(),i.TgZ(21,"tr")(22,"td"),i.SDv(23,14),i.qZA(),i.TgZ(24,"td"),i._uU(25),i.ALo(26,"number"),i.TgZ(27,"span",12),i._uU(28,"BSQ"),i.qZA(),i.TgZ(29,"span",15),i._UZ(30,"app-bsq-amount",16),i.qZA()()()()()(),i._UZ(31,"div",17),i.TgZ(32,"div",18)(33,"div",19),i._UZ(34,"app-qrcode",20),i.qZA()()()(),i._UZ(35,"br"),i.TgZ(36,"h2"),i.YNc(37,bs,1,0,"ng-container",21),i.YNc(38,As,1,1,"ng-template",null,22,i.W1O),i.YNc(40,xs,1,1,"ng-template",null,23,i.W1O),i.qZA(),i.YNc(42,ws,14,20,"ng-template",24)),2&n){const e=i.MAs(39),o=i.MAs(41),s=i.oxw();i.xp6(9),i.hij("",i.xi3(10,10,s.totalReceived/100,"1.2-2")," "),i.xp6(8),i.hij("",i.xi3(18,13,s.totalSent/100,"1.2-2")," "),i.xp6(8),i.hij("",i.xi3(26,16,(s.totalReceived-s.totalSent)/100,"1.2-2")," "),i.xp6(5),i.Q6J("bsq",s.totalReceived-s.totalSent)("forceFiat",!0)("green",!0),i.xp6(4),i.Q6J("data",s.addressString),i.xp6(3),i.Q6J("ngTemplateOutlet",1===s.transactions.length?e:o)("ngTemplateOutletContext",i.VKq(19,Os,s.transactions.length)),i.xp6(5),i.Q6J("ngForOf",s.transactions)}}function Ns(n,t){1&n&&(i.TgZ(0,"div",7)(1,"div",8)(2,"div",33)(3,"table",10)(4,"tbody")(5,"tr")(6,"td",34),i._UZ(7,"span",35),i.qZA()(),i.TgZ(8,"tr")(9,"td",34),i._UZ(10,"span",35),i.qZA()(),i.TgZ(11,"tr")(12,"td",34),i._UZ(13,"span",35),i.qZA()()()()(),i._UZ(14,"div",17)(15,"div",33),i.qZA()())}function Ps(n,t){if(1&n&&(i.TgZ(0,"div",36),i._uU(1," Error loading address data. "),i._UZ(2,"br"),i.TgZ(3,"i"),i._uU(4),i.qZA()()),2&n){const e=i.oxw();i.xp6(4),i.Oqu(e.error.error)}}let Es=(()=>{class n{constructor(e,o,s,r){this.websocketService=e,this.route=o,this.seoService=s,this.bisqApiService=r,this.isLoadingAddress=!0,this.totalReceived=0,this.totalSent=0}ngOnInit(){this.websocketService.want(["blocks"]),this.mainSubscription=this.route.paramMap.pipe((0,N.w)(e=>(this.error=void 0,this.isLoadingAddress=!0,this.transactions=null,document.body.scrollTo(0,0),this.addressString=e.get("id")||"",this.seoService.setTitle("Adresse: " + this.addressString + ""),this.bisqApiService.getAddress$(this.addressString).pipe((0,ct.K)(o=>(this.isLoadingAddress=!1,this.error=o,console.log(o),(0,$.of)(null)))))),(0,Ms.h)(e=>null!==e)).subscribe(e=>{this.transactions=e,this.updateChainStats(),this.isLoadingAddress=!1},e=>{console.log(e),this.error=e,this.isLoadingAddress=!1})}updateChainStats(){const e=this.addressString.substr(1);this.totalSent=this.transactions.reduce((o,s)=>o+s.inputs.filter(r=>r.address===e).reduce((r,a)=>r+a.bsqAmount,0),0),this.totalReceived=this.transactions.reduce((o,s)=>o+s.outputs.filter(r=>r.address===e).reduce((r,a)=>r+a.bsqAmount,0),0)}ngOnDestroy(){this.mainSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(J.i),i.Y36(x.gz),i.Y36(Z.v),i.Y36(w))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-address"]],decls:13,vars:12,consts:function(){let t,e,o,s,r,a;return t="Adresse",e="Totalt mottatt",o="Totalt sendt",s="Balanse",r="" + "\ufffd0\ufffd" + " transaksjon",a="" + "\ufffd0\ufffd" + " transaksjoner",[[1,"container-xl"],t,[1,"address-link"],[3,"text","lastChars","link"],[3,"text"],[1,"clearfix"],[3,"ngIf"],[1,"box"],[1,"row"],[1,"col-md"],[1,"table","table-borderless","table-striped"],e,[1,"symbol"],o,s,[1,"fiat"],[3,"bsq","forceFiat","green"],[1,"w-100","d-block","d-md-none"],[1,"col-md","qrcode-col"],[1,"qr-wrapper"],[3,"data"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["transactionsSingular",""],["transactionsPlural",""],["ngFor","",3,"ngForOf"],r,a,[1,"header-bg","box",2,"padding","10px","margin-bottom","10px"],[3,"routerLink","state"],[1,"d-block","d-md-none",2,"float","left"],[1,"d-none","d-md-block",2,"float","left"],[1,"float-right"],[3,"tx","showConfirmations"],[1,"col"],["colspan","2"],[1,"skeleton-loader"],[1,"text-center"]]},template:function(e,o){1&e&&(i.TgZ(0,"div",0)(1,"h1"),i.SDv(2,1),i.qZA(),i.TgZ(3,"span",2)(4,"app-truncate",3),i.ALo(5,"relativeUrl"),i._UZ(6,"app-clipboard",4),i.qZA()(),i._UZ(7,"br")(8,"div",5),i.YNc(9,Is,43,21,"ng-template",6),i.YNc(10,Ns,16,0,"ng-template",6),i.YNc(11,Ps,5,1,"ng-template",6),i.qZA(),i._UZ(12,"br")),2&e&&(i.xp6(4),i.Q6J("text",o.addressString)("lastChars",8)("link",i.WLB(9,ti,i.lcZ(5,7,"/address/"),o.addressString)),i.xp6(2),i.Q6J("text",o.addressString),i.xp6(3),i.Q6J("ngIf",!o.isLoadingAddress&&!o.error),i.xp6(1),i.Q6J("ngIf",o.isLoadingAddress&&!o.error),i.xp6(1),i.Q6J("ngIf",o.error))},dependencies:[T.sg,T.O5,T.tP,x.yS,he.c,Cs.z,Ke.J,_e,ce,T.JJ,T.uU,nt.w,ue.i],styles:[".qr-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:10px 10px 5px;display:inline-block}.qrcode-col[_ngcontent-%COMP%]{text-align:center}.qrcode-col[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:20px auto 5px}@media (min-width: 768px){.qrcode-col[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center;margin:auto}}.fiat[_ngcontent-%COMP%]{display:block;font-size:13px}@media (min-width: 768px){.fiat[_ngcontent-%COMP%]{display:inline-block;font-size:14px;margin-left:10px}}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}@media (min-width: 768px){.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:left}}h1[_ngcontent-%COMP%]{margin:0;padding:0}@media (min-width: 576px){h1[_ngcontent-%COMP%]{float:left;margin-right:10px}}.address-link[_ngcontent-%COMP%]{line-height:26px;margin-left:0;top:14px;position:relative;display:flex;flex-direction:row}@media (min-width: 768px){.address-link[_ngcontent-%COMP%]{line-height:38px}}.row[_ngcontent-%COMP%]{flex-direction:column}@media (min-width: 576px){.row[_ngcontent-%COMP%]{flex-direction:row}}@media (max-width: 767.98px){.mobile-bottomcol[_ngcontent-%COMP%]{margin-top:15px}.details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{white-space:pre-wrap}}"]}),n})();var pe=y(6824);function ks(n,t){if(1&n&&(i.TgZ(0,"tbody")(1,"tr")(2,"td",9),i.SDv(3,10),i.qZA(),i.TgZ(4,"td"),i._uU(5),i.ALo(6,"number"),i.TgZ(7,"span",11),i._uU(8,"BSQ"),i.qZA()()(),i.TgZ(9,"tr")(10,"td"),i.SDv(11,12),i.qZA(),i.TgZ(12,"td"),i._uU(13),i.ALo(14,"number"),i.TgZ(15,"span",11),i._uU(16,"BSQ"),i.qZA()()(),i.TgZ(17,"tr")(18,"td"),i.SDv(19,13),i.qZA(),i.TgZ(20,"td"),i._uU(21),i.ALo(22,"number"),i.TgZ(23,"span",11),i._uU(24,"BSQ"),i.qZA()()(),i.TgZ(25,"tr")(26,"td"),i.SDv(27,14),i.qZA(),i.TgZ(28,"td"),i._uU(29),i.ALo(30,"number"),i.qZA()(),i.TgZ(31,"tr")(32,"td"),i.SDv(33,15),i.qZA(),i.TgZ(34,"td"),i._uU(35),i.ALo(36,"number"),i.qZA()(),i.TgZ(37,"tr")(38,"td"),i.SDv(39,16),i.qZA(),i.TgZ(40,"td"),i._uU(41),i.ALo(42,"number"),i.qZA()(),i.TgZ(43,"tr")(44,"td"),i.SDv(45,17),i.qZA(),i.TgZ(46,"td"),i._UZ(47,"app-fiat",18),i.qZA()(),i.TgZ(48,"tr")(49,"td"),i.SDv(50,19),i.qZA(),i.TgZ(51,"td"),i._UZ(52,"app-fiat",18),i.qZA()()()),2&n){const e=i.oxw();i.xp6(5),i.hij("",i.xi3(6,8,e.stats.minted-e.stats.burnt,"1.2-2")," "),i.xp6(8),i.hij("",i.xi3(14,11,e.stats.minted,"1.2-2")," "),i.xp6(8),i.hij("",i.xi3(22,14,e.stats.burnt,"1.2-2")," "),i.xp6(8),i.Oqu(i.lcZ(30,17,e.stats.addresses)),i.xp6(6),i.Oqu(i.lcZ(36,19,e.stats.unspent_txos)),i.xp6(6),i.Oqu(i.lcZ(42,21,e.stats.spent_txos)),i.xp6(6),i.Q6J("value",e.price),i.xp6(5),i.Q6J("value",e.price*(e.stats.minted-e.stats.burnt))}}function Rs(n,t){1&n&&(i.TgZ(0,"tbody")(1,"tr")(2,"td",9),i.SDv(3,20),i.qZA(),i.TgZ(4,"td"),i._UZ(5,"span",21),i.qZA()(),i.TgZ(6,"tr")(7,"td"),i.SDv(8,22),i.qZA(),i.TgZ(9,"td"),i._UZ(10,"span",21),i.qZA()(),i.TgZ(11,"tr")(12,"td"),i.SDv(13,23),i.qZA(),i.TgZ(14,"td"),i._UZ(15,"span",21),i.qZA()(),i.TgZ(16,"tr")(17,"td"),i.SDv(18,24),i.qZA(),i.TgZ(19,"td"),i._UZ(20,"span",21),i.qZA()(),i.TgZ(21,"tr")(22,"td"),i.SDv(23,25),i.qZA(),i.TgZ(24,"td"),i._UZ(25,"span",21),i.qZA()(),i.TgZ(26,"tr")(27,"td"),i._uU(28,"Spent TXOs"),i.qZA(),i.TgZ(29,"td"),i._UZ(30,"span",21),i.qZA()(),i.TgZ(31,"tr")(32,"td"),i.SDv(33,26),i.qZA(),i.TgZ(34,"td"),i._UZ(35,"span",21),i.qZA()(),i.TgZ(36,"tr")(37,"td"),i.SDv(38,27),i.qZA(),i.TgZ(39,"td"),i._UZ(40,"span",21),i.qZA()()())}let Zs=(()=>{class n{constructor(e,o,s,r){this.websocketService=e,this.bisqApiService=o,this.seoService=s,this.stateService=r,this.isLoading=!0}ngOnInit(){this.websocketService.want(["blocks"]),this.seoService.setTitle("BSQ statistikk"),this.stateService.bsqPrice$.subscribe(e=>{this.price=e}),this.bisqApiService.getStats$().subscribe(e=>{this.isLoading=!1,this.stats=e})}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(J.i),i.Y36(w),i.Y36(Z.v),i.Y36(ut.b))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-stats"]],decls:12,vars:2,consts:function(){let t,e,o,s,r,a,l,h,c,u,_,f,d,p,m,g;return t="BSQ statistikk",e="Eksisterende bel\xF8p",o="Utstedt bel\xF8p",s="Brent bel\xF8p",r="Adresser",a="Ubrukte TXOer",l="Brukte TXOer",h="Pris",c="Markedsverdi",u="Eksisterende bel\xF8p",_="Utstedt bel\xF8p",f="Brent bel\xF8p",d="Adresser",p="Ubrukte TXOer",m="Pris",g="Markedsverdi",[[1,"container-xl"],[2,"float","left"],t,[1,"clearfix"],[1,"row"],[1,"col-md"],[1,"table","table-borderless","table-striped"],[4,"ngIf","ngIfElse"],["loadingTemplate",""],[1,"td-width"],e,[1,"symbol"],o,s,r,a,l,h,[3,"value"],c,u,[1,"skeleton-loader"],_,f,d,p,m,g]},template:function(e,o){if(1&e&&(i.TgZ(0,"div",0)(1,"h1",1),i.SDv(2,2),i.qZA(),i._UZ(3,"br")(4,"div",3),i.TgZ(5,"div",4)(6,"div",5)(7,"table",6),i.YNc(8,ks,53,23,"tbody",7),i.qZA()(),i._UZ(9,"div",5),i.qZA()(),i.YNc(10,Rs,41,0,"ng-template",null,8,i.W1O)),2&e){const s=i.MAs(11);i.xp6(8),i.Q6J("ngIf",!o.isLoading)("ngIfElse",s)}},dependencies:[T.O5,pe.B,T.JJ],styles:[".td-width[_ngcontent-%COMP%]{width:250px}@media (max-width: 767.98px){.td-width[_ngcontent-%COMP%]{width:175px}}.fiat[_ngcontent-%COMP%]{display:block;font-size:13px}@media (min-width: 768px){.fiat[_ngcontent-%COMP%]{font-size:14px;display:inline-block}}"]}),n})();var ni,oi,n,ei=y(1135),ot=y(9841),ii=y(3099),Qs={allowDownsampling:!0},Ls=function(){function n(t,e){var o=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(s){return o._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=e,this._configureCanvas(),this._installResolutionListener()}return n.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(n.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),n.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(n.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),n.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},n.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter(function(e){return e!=t})},n.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},n.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach(function(e){return e.call(t)})},n.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+t.devicePixelRatio+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},n}();function st(n,t){var e,o=((e={})[0]=[],e[1]=[n.lineWidth,n.lineWidth],e[2]=[2*n.lineWidth,2*n.lineWidth],e[3]=[6*n.lineWidth,6*n.lineWidth],e[4]=[n.lineWidth,4*n.lineWidth],e)[t];n.setLineDash(o)}function si(n,t,e,o){n.beginPath();var s=n.lineWidth%2?.5:0;n.moveTo(e,t+s),n.lineTo(o,t+s),n.stroke()}function _t(n,t){if(!n)throw new Error("Assertion failed"+(t?": "+t:""))}function F(n){if(void 0===n)throw new Error("Value is undefined");return n}function S(n){if(null===n)throw new Error("Value is null");return n}function yt(n){return S(F(n))}(n=ni||(ni={}))[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(oi||(oi={}));var ri={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function z(n){return n<0?0:n>255?255:Math.round(n)||0}function ai(n){return n<=0||n>0?n<0?0:n>1?1:Math.round(1e4*n)/1e4:0}var qs=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,$s=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Fs=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,zs=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function Qt(n){var t;if((n=n.toLowerCase())in ri&&(n=ri[n]),t=zs.exec(n)||Fs.exec(n))return[z(parseInt(t[1],10)),z(parseInt(t[2],10)),z(parseInt(t[3],10)),ai(t.length<5?1:parseFloat(t[4]))];if(t=$s.exec(n))return[z(parseInt(t[1],16)),z(parseInt(t[2],16)),z(parseInt(t[3],16)),1];if(t=qs.exec(n))return[z(17*parseInt(t[1],16)),z(17*parseInt(t[2],16)),z(17*parseInt(t[3],16)),1];throw new Error("Cannot parse color: ".concat(n))}function Dt(n){var t,e=Qt(n);return{t:"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"),i:(t=e,.199*t[0]+.687*t[1]+.114*t[2]>160?"black":"white")}}var fe=function(n,t){return(fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])})(n,t)};function b(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}fe(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var A=function(){return A=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var s in t=arguments[e])Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s]);return n},A.apply(this,arguments)};function li(n,t,e){if(e||2===arguments.length)for(var o,s=0,r=t.length;s<r;s++)!o&&s in t||(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return n.concat(o||Array.prototype.slice.call(t))}var Q=function(){function n(){this.h=[]}return n.prototype.u=function(t,e,o){this.h.push({o:t,l:e,v:!0===o})},n.prototype._=function(t){var e=this.h.findIndex(function(o){return t===o.o});e>-1&&this.h.splice(e,1)},n.prototype.M=function(t){this.h=this.h.filter(function(e){return e.l!==t})},n.prototype.m=function(t,e){var o=li([],this.h,!0);this.h=this.h.filter(function(s){return!s.v}),o.forEach(function(s){return s.o(t,e)})},n.prototype.p=function(){return this.h.length>0},n.prototype.g=function(){this.h=[]},n}();function D(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var o=0,s=t;o<s.length;o++){var r=s[o];for(var a in r)void 0!==r[a]&&("object"!=typeof r[a]||void 0===n[a]?n[a]=r[a]:D(n[a],r[a]))}return n}function H(n){return"number"==typeof n&&isFinite(n)}function Mt(n){return"number"==typeof n&&n%1==0}function de(n){return"string"==typeof n}function ge(n){return"boolean"==typeof n}function q(n){var t,e,o,s=n;if(!s||"object"!=typeof s)return s;for(e in t=Array.isArray(s)?[]:{},s)s.hasOwnProperty(e)&&(t[e]=(o=s[e])&&"object"==typeof o?q(o):o);return t}function Us(n){return null!==n}function Lt(n){return null===n?void 0:n}var me="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function rt(n,t,e){return e=void 0!==e?"".concat(e," "):"",void 0===t&&(t=me),"".concat(e).concat(n,"px ").concat(t)}var Gs=function(){function n(t){this.k={N:1,C:4,S:NaN,T:"",D:"",A:"",B:0,L:0,F:0,O:0,V:0},this.P=t}return n.prototype.W=function(){var t=this.k,e=this.R(),o=this.I();return t.S===e&&t.D===o||(t.S=e,t.D=o,t.T=rt(e,o),t.O=Math.floor(e/3.5),t.B=t.O,t.L=Math.max(Math.ceil(e/2-t.C/2),0),t.F=Math.ceil(e/2+t.C/2),t.V=Math.round(e/10)),t.A=this.j(),this.k},n.prototype.j=function(){return this.P.W().layout.textColor},n.prototype.R=function(){return this.P.W().layout.fontSize},n.prototype.I=function(){return this.P.W().layout.fontFamily},n}(),qt=function(){function n(){this.q=[]}return n.prototype.U=function(t){this.q=t},n.prototype.H=function(t,e,o,s){this.q.forEach(function(r){t.save(),r.H(t,e,o,s),t.restore()})},n}(),Ct=function(){function n(){}return n.prototype.H=function(t,e,o,s){t.save(),t.scale(e,e),this.Y(t,o,s),t.restore()},n.prototype.$=function(t,e,o,s){t.save(),t.scale(e,e),this.K(t,o,s),t.restore()},n.prototype.K=function(t,e,o){},n}(),Js=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.X=null,e}return b(t,n),t.prototype.Z=function(e){this.X=e},t.prototype.Y=function(e){if(null!==this.X&&null!==this.X.J){var o=this.X.J,s=this.X,r=function(a){e.beginPath();for(var l=o.to-1;l>=o.from;--l){var h=s.G[l];e.moveTo(h.tt,h.it),e.arc(h.tt,h.it,a,0,2*Math.PI)}e.fill()};e.fillStyle=s.nt,r(s.st+2),e.fillStyle=s.ht,r(s.st)}},t}(Ct);function Ys(){return{G:[{tt:0,it:0,rt:0,et:0}],ht:"",nt:"",st:0,J:null}}var Xs={from:0,to:1},Hs=function(){function n(t,e){this.ut=new qt,this.ot=[],this.lt=[],this.ft=!0,this.P=t,this.ct=e,this.ut.U(this.ot)}return n.prototype.vt=function(t){var e=this.P._t();e.length!==this.ot.length&&(this.lt=e.map(Ys),this.ot=this.lt.map(function(o){var s=new Js;return s.Z(o),s}),this.ut.U(this.ot)),this.ft=!0},n.prototype.dt=function(t,e,o){return this.ft&&(this.wt(t),this.ft=!1),this.ut},n.prototype.wt=function(t){var e=this,o=this.P._t(),s=this.ct.Mt(),r=this.P.bt();o.forEach(function(a,l){var h,c=e.lt[l],u=a.gt(s);if(null!==u&&a.yt()){var _=S(a.kt());c.ht=u.Nt,c.st=u.st,c.G[0].et=u.et,c.G[0].it=a.Ct().xt(u.et,_.St),c.nt=null!==(h=u.Tt)&&void 0!==h?h:e.P.Dt(c.G[0].it/t),c.G[0].rt=s,c.G[0].tt=r.At(s),c.J=Xs}else c.J=null})},n}(),Ws=function(){function n(t){this.Bt=t}return n.prototype.H=function(t,e,o,s){if(null!==this.Bt){var r=this.Bt.Lt.yt,a=this.Bt.Et.yt;if(r||a){t.save();var l=Math.round(this.Bt.tt*e),h=Math.round(this.Bt.it*e),c=Math.ceil(this.Bt.Ft*e),u=Math.ceil(this.Bt.Ot*e);t.lineCap="butt",r&&l>=0&&(t.lineWidth=Math.floor(this.Bt.Lt.Vt*e),t.strokeStyle=this.Bt.Lt.A,t.fillStyle=this.Bt.Lt.A,st(t,this.Bt.Lt.Pt),function(_,f,d,p){_.beginPath();var m=_.lineWidth%2?.5:0;_.moveTo(f+m,0),_.lineTo(f+m,p),_.stroke()}(t,l,0,u)),a&&h>=0&&(t.lineWidth=Math.floor(this.Bt.Et.Vt*e),t.strokeStyle=this.Bt.Et.A,t.fillStyle=this.Bt.Et.A,st(t,this.Bt.Et.Pt),si(t,h,0,c)),t.restore()}}},n}(),Vs=function(){function n(t){this.ft=!0,this.Wt={Lt:{Vt:1,Pt:0,A:"",yt:!1},Et:{Vt:1,Pt:0,A:"",yt:!1},Ft:0,Ot:0,tt:0,it:0},this.zt=new Ws(this.Wt),this.Rt=t}return n.prototype.vt=function(){this.ft=!0},n.prototype.dt=function(t,e){return this.ft&&(this.wt(),this.ft=!1),this.zt},n.prototype.wt=function(){var t=this.Rt.yt(),e=S(this.Rt.It()),o=e.jt().W().crosshair,s=this.Wt;s.Et.yt=t&&this.Rt.qt(e),s.Lt.yt=t&&this.Rt.Ut(),s.Et.Vt=o.horzLine.width,s.Et.Pt=o.horzLine.style,s.Et.A=o.horzLine.color,s.Lt.Vt=o.vertLine.width,s.Lt.Pt=o.vertLine.style,s.Lt.A=o.vertLine.color,s.Ft=e.Ht(),s.Ot=e.Yt(),s.tt=this.Rt.$t(),s.it=this.Rt.Kt()},n}();function Ks(n,t,e,o,s,r){n.fillRect(t+r,e,o-2*r,r),n.fillRect(t+r,e+s-r,o-2*r,r),n.fillRect(t,e,r,s),n.fillRect(t+o-r,e,r,s)}function W(n,t,e){n.save(),n.scale(t,t),e(),n.restore()}function $t(n,t,e,o,s,r){n.save(),n.globalCompositeOperation="copy",n.fillStyle=r,n.fillRect(t,e,o,s),n.restore()}function hi(n,t,e,o,s,r,a){n.save(),n.globalCompositeOperation="copy";var l=n.createLinearGradient(0,0,0,s);l.addColorStop(0,r),l.addColorStop(1,a),n.fillStyle=l,n.fillRect(t,e,o,s),n.restore()}var Ft,ci=function(){function n(t,e){this.Z(t,e)}return n.prototype.Z=function(t,e){this.Bt=t,this.Xt=e},n.prototype.H=function(t,e,o,s,r,a){if(this.Bt.yt){t.font=e.T;var l=this.Bt.Zt||!this.Bt.Jt?e.C:0,h=e.N,c=e.O,u=e.B,_=e.L,f=e.F,d=this.Bt.Gt,p=Math.ceil(o.Qt(t,d)),m=e.V,g=e.S+c+u,v=Math.ceil(.5*g),C=h+p+_+f+l,M=this.Xt.ti;this.Xt.ii&&(M=this.Xt.ii);var O,k,B=(M=Math.round(M))-v,j=B+g,X="right"===r,tt=X?s:0,Sn=Math.ceil(s*a),$e=tt;if(t.fillStyle=this.Xt.t,t.lineWidth=1,t.lineCap="butt",d){X?(O=tt-l,k=($e=tt-C)+f):($e=tt+C,O=tt+l,k=tt+h+l+_);var Tn=Math.max(1,Math.floor(a)),yn=Math.max(1,Math.floor(h*a)),re=X?Sn:0,Nt=Math.round(B*a),Mn=Math.round($e*a),Fe=Math.round(M*a)-Math.floor(.5*a),ze=Fe+Tn+(Fe-Nt),Sh=Math.round(O*a);t.save(),t.beginPath(),t.moveTo(re,Nt),t.lineTo(Mn,Nt),t.lineTo(Mn,ze),t.lineTo(re,ze),t.fill(),t.fillStyle=this.Bt.Tt,t.fillRect(X?Sn-yn:0,Nt,yn,ze-Nt),this.Bt.Zt&&(t.fillStyle=this.Xt.A,t.fillRect(re,Fe,Sh-re,Tn)),t.textAlign="left",t.fillStyle=this.Xt.A,W(t,a,function(){t.fillText(d,k,j-u-m)}),t.restore()}}},n.prototype.Yt=function(t,e){return this.Bt.yt?t.S+t.O+t.B:0},n}(),ve=function(){function n(t){this.ni={ti:0,A:"#FFF",t:"#000"},this.si={Gt:"",yt:!1,Zt:!0,Jt:!1,Tt:""},this.hi={Gt:"",yt:!1,Zt:!1,Jt:!0,Tt:""},this.ft=!0,this.ri=new(t||ci)(this.si,this.ni),this.ei=new(t||ci)(this.hi,this.ni)}return n.prototype.Gt=function(){return this.ui(),this.si.Gt},n.prototype.ti=function(){return this.ui(),this.ni.ti},n.prototype.vt=function(){this.ft=!0},n.prototype.Yt=function(t,e){return void 0===e&&(e=!1),Math.max(this.ri.Yt(t,e),this.ei.Yt(t,e))},n.prototype.ai=function(){return this.ni.ii||0},n.prototype.oi=function(t){this.ni.ii=t},n.prototype.li=function(){return this.ui(),this.si.yt||this.hi.yt},n.prototype.fi=function(){return this.ui(),this.si.yt},n.prototype.dt=function(t){return this.ui(),this.si.Zt=this.si.Zt&&t.W().drawTicks,this.hi.Zt=this.hi.Zt&&t.W().drawTicks,this.ri.Z(this.si,this.ni),this.ei.Z(this.hi,this.ni),this.ri},n.prototype.ci=function(){return this.ui(),this.ri.Z(this.si,this.ni),this.ei.Z(this.hi,this.ni),this.ei},n.prototype.ui=function(){this.ft&&(this.si.Zt=!0,this.hi.Zt=!1,this.vi(this.si,this.hi,this.ni))},n}(),js=function(n){function t(e,o,s){var r=n.call(this)||this;return r.Rt=e,r._i=o,r.di=s,r}return b(t,n),t.prototype.vi=function(e,o,s){e.yt=!1;var r=this.Rt.W().horzLine;if(r.labelVisible){var a=this._i.kt();if(this.Rt.yt()&&!this._i.wi()&&null!==a){var l=Dt(r.labelBackgroundColor);s.t=l.t,s.A=l.i;var h=this.di(this._i);s.ti=h.ti,e.Gt=this._i.Mi(h.et,a),e.yt=!0}}},t}(ve),tr=/[1-9]/g,er=function(){function n(){this.Bt=null}return n.prototype.Z=function(t){this.Bt=t},n.prototype.H=function(t,e,o){var s=this;if(null!==this.Bt&&!1!==this.Bt.yt&&0!==this.Bt.Gt.length){t.font=e.T;var r=Math.round(e.bi.Qt(t,this.Bt.Gt,tr));if(!(r<=0)){t.save();var a=e.mi,l=r+2*a,h=l/2,c=this.Bt.Ht,u=this.Bt.ti,_=Math.floor(u-h)+.5;_<0?(u+=Math.abs(0-_),_=Math.floor(u-h)+.5):_+l>c&&(u-=Math.abs(c-(_+l)),_=Math.floor(u-h)+.5);var f=_+l,d=0+e.N+e.O+e.S+e.B;t.fillStyle=this.Bt.t;var p=Math.round(_*o),m=Math.round(0*o),g=Math.round(f*o),v=Math.round(d*o);t.fillRect(p,m,g-p,v-m);var C=Math.round(this.Bt.ti*o),M=m,O=Math.round((M+e.N+e.C)*o);t.fillStyle=this.Bt.A;var k=Math.max(1,Math.floor(o)),B=Math.floor(.5*o);t.fillRect(C-B,M,k,O-M);var j=d-e.V-e.B;t.textAlign="left",t.fillStyle=this.Bt.A,W(t,o,function(){t.fillText(S(s.Bt).Gt,_+a,j)}),t.restore()}}},n}(),ir=function(){function n(t,e,o){this.ft=!0,this.zt=new er,this.Wt={yt:!1,t:"#4c525e",A:"white",Gt:"",Ht:0,ti:NaN},this.ct=t,this.pi=e,this.di=o}return n.prototype.vt=function(){this.ft=!0},n.prototype.dt=function(){return this.ft&&(this.wt(),this.ft=!1),this.zt.Z(this.Wt),this.zt},n.prototype.wt=function(){var t=this.Wt;t.yt=!1;var e=this.ct.W().vertLine;if(e.labelVisible){var o=this.pi.bt();if(!o.wi()){var s=o.gi(this.ct.Mt());t.Ht=o.Ht();var r=this.di();if(r.rt){t.ti=r.ti,t.Gt=o.yi(S(s)),t.yt=!0;var a=Dt(e.labelBackgroundColor);t.t=a.t,t.A=a.i}}}},n}(),Se=function(){function n(){this.ki=null,this.Ni=0}return n.prototype.xi=function(){return this.Ni},n.prototype.Ci=function(t){this.Ni=t},n.prototype.Ct=function(){return this.ki},n.prototype.Si=function(t){this.ki=t},n.prototype.Ti=function(){return[]},n.prototype.yt=function(){return!0},n}();!function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet"}(Ft||(Ft={}));var nr=function(n){function t(e,o){var r,a,s=n.call(this)||this;s.Di=null,s.Ai=NaN,s.Bi=0,s.Li=!0,s.Ei=new Map,s.Fi=!1,s.Oi=NaN,s.Vi=NaN,s.Pi=NaN,s.Wi=NaN,s.pi=e,s.zi=o,s.Ri=new Hs(e,s),s.Ii=(r=function(){return s.Ai},a=function(){return s.Vi},function(h){var c=a(),u=r();if(h===S(s.Di).ji())return{et:u,ti:c};var _=S(h.kt());return{et:h.qi(c,_),ti:c}});return s.Ui=new ir(s,e,function(){return{rt:s.pi.bt().gi(s.Bi),ti:s.$t()}}),s.Hi=new Vs(s),s}return b(t,n),t.prototype.W=function(){return this.zi},t.prototype.Yi=function(e,o){this.Pi=e,this.Wi=o},t.prototype.$i=function(){this.Pi=NaN,this.Wi=NaN},t.prototype.Ki=function(){return this.Pi},t.prototype.Xi=function(){return this.Wi},t.prototype.Zi=function(e,o,s){this.Fi||(this.Fi=!0),this.Li=!0,this.Ji(e,o,s)},t.prototype.Mt=function(){return this.Bi},t.prototype.$t=function(){return this.Oi},t.prototype.Kt=function(){return this.Vi},t.prototype.yt=function(){return this.Li},t.prototype.Gi=function(){this.Li=!1,this.Qi(),this.Ai=NaN,this.Oi=NaN,this.Vi=NaN,this.Di=null,this.$i()},t.prototype.tn=function(e){return null!==this.Di?[this.Hi,this.Ri]:[]},t.prototype.qt=function(e){return e===this.Di&&this.zi.horzLine.visible},t.prototype.Ut=function(){return this.zi.vertLine.visible},t.prototype.nn=function(e,o){this.Li&&this.Di===e||this.Ei.clear();var s=[];return this.Di===e&&s.push(this.sn(this.Ei,o,this.Ii)),s},t.prototype.Ti=function(){return this.Li?[this.Ui]:[]},t.prototype.It=function(){return this.Di},t.prototype.hn=function(){this.Hi.vt(),this.Ei.forEach(function(e){return e.vt()}),this.Ui.vt(),this.Ri.vt()},t.prototype.rn=function(e){return e&&!e.ji().wi()?e.ji():null},t.prototype.Ji=function(e,o,s){this.en(e,o,s)&&this.hn()},t.prototype.en=function(e,o,s){var r=this.Oi,a=this.Vi,l=this.Ai,h=this.Bi,c=this.Di,u=this.rn(s);this.Bi=e,this.Oi=isNaN(e)?NaN:this.pi.bt().At(e),this.Di=s;var _=null!==u?u.kt():null;return null!==u&&null!==_?(this.Ai=o,this.Vi=u.xt(o,_)):(this.Ai=NaN,this.Vi=NaN),r!==this.Oi||a!==this.Vi||h!==this.Bi||l!==this.Ai||c!==this.Di},t.prototype.Qi=function(){var e=this.pi._t().map(function(s){return s.an().un()}).filter(Us),o=0===e.length?null:Math.max.apply(Math,e);this.Bi=null!==o?o:NaN},t.prototype.sn=function(e,o,s){var r=e.get(o);return void 0===r&&(r=new js(this,o,s),e.set(o,r)),r},t}(Se);function zt(n){return"left"===n||"right"===n}var U=function(){function n(t){this.on=new Map,this.ln=[],this.fn=t}return n.prototype.cn=function(t,e){var s,r,o=(r=e,void 0===(s=this.on.get(t))?r:{vn:Math.max(s.vn,r.vn),_n:s._n||r._n});this.on.set(t,o)},n.prototype.dn=function(){return this.fn},n.prototype.wn=function(t){var e=this.on.get(t);return void 0===e?{vn:this.fn}:{vn:Math.max(this.fn,e.vn),_n:e._n}},n.prototype.Mn=function(){this.ln=[{bn:0}]},n.prototype.mn=function(t){this.ln=[{bn:1,St:t}]},n.prototype.pn=function(){this.ln=[{bn:4}]},n.prototype.gn=function(t){this.ln.push({bn:2,St:t})},n.prototype.yn=function(t){this.ln.push({bn:3,St:t})},n.prototype.kn=function(){return this.ln},n.prototype.Nn=function(t){for(var e=this,o=0,s=t.ln;o<s.length;o++)this.xn(s[o]);this.fn=Math.max(this.fn,t.fn),t.on.forEach(function(a,l){e.cn(l,a)})},n.prototype.xn=function(t){switch(t.bn){case 0:this.Mn();break;case 1:this.mn(t.St);break;case 2:this.gn(t.St);break;case 3:this.yn(t.St);break;case 4:this.pn()}},n}();function et(n,t){if(!H(n))return"n/a";if(!Mt(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return 0===t?n.toString():("0000000000000000"+n.toString()).slice(-t)}var Ut=function(){function n(t,e){if(e||(e=1),H(t)&&Mt(t)||(t=100),t<0)throw new TypeError("invalid base");this._i=t,this.Cn=e,this.Sn()}return n.prototype.format=function(t){var e=t<0?"\u2212":"";return t=Math.abs(t),e+this.Tn(t)},n.prototype.Sn=function(){if(this.Dn=0,this._i>0&&this.Cn>0)for(var t=this._i;t>1;)t/=10,this.Dn++},n.prototype.Tn=function(t){var e=this._i/this.Cn,o=Math.floor(t),s="",r=void 0!==this.Dn?this.Dn:NaN;if(e>1){var a=+(Math.round(t*e)-o*e).toFixed(this.Dn);a>=e&&(a-=e,o+=1),s="."+et(+a.toFixed(this.Dn)*this.Cn,r)}else o=Math.round(o*e)/e,r>0&&(s="."+et(0,r));return o.toFixed(0)+s},n}(),_i=function(n){function t(e){return void 0===e&&(e=100),n.call(this,e)||this}return b(t,n),t.prototype.format=function(e){return"".concat(n.prototype.format.call(this,e),"%")},t}(Ut),or=function(){function n(t){this.An=t}return n.prototype.format=function(t){var e="";return t<0&&(e="-",t=-t),t<995?e+this.Bn(t):t<999995?e+this.Bn(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.Bn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.Bn(t/1e9)+"B")},n.prototype.Bn=function(t){var e=Math.pow(10,this.An);return((t=Math.round(t*e)/e)>=1e-15&&t<1?t.toFixed(this.An).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,function(o,s){return s})},n}();function pi(n,t,e,o){if(0!==t.length){n.moveTo(t[o.from].tt,t[o.from].it);for(var a=o.from+1;a<o.to;++a){var l=t[a];1===e&&n.lineTo(l.tt,t[a-1].it),n.lineTo(l.tt,l.it)}}}var fi=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.X=null,e}return b(t,n),t.prototype.Z=function(e){this.X=e},t.prototype.Y=function(e){if(null!==this.X&&0!==this.X.G.length&&null!==this.X.J){if(e.lineCap="butt",e.lineJoin="round",e.lineWidth=this.X.Vt,st(e,this.X.Pt),e.lineWidth=1,e.beginPath(),1===this.X.G.length){var o=this.X.G[0],s=this.X.Ln/2;e.moveTo(o.tt-s,this.X.En),e.lineTo(o.tt-s,o.it),e.lineTo(o.tt+s,o.it),e.lineTo(o.tt+s,this.X.En)}else e.moveTo(this.X.G[this.X.J.from].tt,this.X.En),e.lineTo(this.X.G[this.X.J.from].tt,this.X.G[this.X.J.from].it),pi(e,this.X.G,this.X.Fn,this.X.J),this.X.J.to>this.X.J.from&&(e.lineTo(this.X.G[this.X.J.to-1].tt,this.X.En),e.lineTo(this.X.G[this.X.J.from].tt,this.X.En));e.closePath(),e.fillStyle=this.On(e),e.fill()}},t}(Ct),sr=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return b(t,n),t.prototype.On=function(e){var o=this.X,s=e.createLinearGradient(0,0,0,o.Vn);return s.addColorStop(0,o.Pn),s.addColorStop(1,o.Wn),s},t}(fi),di=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.X=null,e}return b(t,n),t.prototype.Z=function(e){this.X=e},t.prototype.Y=function(e){if(null!==this.X&&0!==this.X.G.length&&null!==this.X.J)if(e.lineCap="butt",e.lineWidth=this.X.Vt,st(e,this.X.Pt),e.strokeStyle=this.zn(e),e.lineJoin="round",1===this.X.G.length){e.beginPath();var o=this.X.G[0];e.moveTo(o.tt-this.X.Ln/2,o.it),e.lineTo(o.tt+this.X.Ln/2,o.it),void 0!==o.A&&(e.strokeStyle=o.A),e.stroke()}else this.Rn(e,this.X)},t.prototype.Rn=function(e,o){e.beginPath(),pi(e,o.G,o.Fn,o.J),e.stroke()},t}(Ct),gi=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return b(t,n),t.prototype.Rn=function(e,o){var s,r,a=o.G,l=o.J,h=o.Fn,c=o.ht;if(0!==a.length&&null!==l){e.beginPath();var u=a[l.from];e.moveTo(u.tt,u.it);var _=null!==(s=u.A)&&void 0!==s?s:c;e.strokeStyle=_;for(var f=function(v){e.stroke(),e.beginPath(),e.strokeStyle=v,_=v},d=l.from+1;d<l.to;++d){var p=a[d],m=a[d-1],g=null!==(r=p.A)&&void 0!==r?r:c;1===h&&(e.lineTo(p.tt,m.it),g!==_&&(f(g),e.moveTo(p.tt,m.it))),e.lineTo(p.tt,p.it),1!==h&&g!==_&&(f(g),e.moveTo(p.tt,p.it))}e.stroke()}},t.prototype.zn=function(){return this.X.ht},t}(di);function bt(n,t,e,o,s){void 0===o&&(o=0),void 0===s&&(s=n.length);for(var r=s-o;0<r;){var a=r>>1,l=o+a;e(n[l],t)?(o=l+1,r-=a+1):r=a}return o}function mi(n,t,e,o,s){void 0===o&&(o=0),void 0===s&&(s=n.length);for(var r=s-o;0<r;){var a=r>>1,l=o+a;e(t,n[l])?r=a:(o=l+1,r-=a+1)}return o}function rr(n,t){return n.rt<t}function ar(n,t){return n<t.rt}function Te(n,t,e){var o=t.In(),s=t.jn(),r=bt(n,o,rr),a=mi(n,s,ar);if(!e)return{from:r,to:a};var l=r,h=a;return r>0&&r<n.length&&n[r].rt>=o&&(l=r-1),a>0&&a<n.length&&n[a-1].rt<=s&&(h=a+1),{from:l,to:h}}var ye=function(){function n(t,e,o){this.qn=!0,this.Un=!0,this.Hn=!0,this.Yn=[],this.$n=null,this.Kn=t,this.Xn=e,this.Zn=o}return n.prototype.vt=function(t){this.qn=!0,"data"===t&&(this.Un=!0),"options"===t&&(this.Hn=!0)},n.prototype.Jn=function(){this.Un&&(this.Gn(),this.Un=!1),this.qn&&(this.Qn(),this.qn=!1),this.Hn&&(this.ts(),this.Hn=!1)},n.prototype.ns=function(){this.$n=null},n.prototype.Qn=function(){var t=this.Kn.Ct(),e=this.Xn.bt();if(this.ns(),!e.wi()&&!t.wi()){var o=e.ss();if(null!==o&&0!==this.Kn.an().hs()){var s=this.Kn.kt();null!==s&&(this.$n=Te(this.Yn,o,this.Zn),this.rs(t,e,s.St))}}},n}(),Me=function(n){function t(e,o){return n.call(this,e,o,!0)||this}return b(t,n),t.prototype.rs=function(e,o,s){o.es(this.Yn,Lt(this.$n)),e.us(this.Yn,s,Lt(this.$n))},t.prototype.os=function(e,o){return{rt:e,et:o,tt:NaN,it:NaN}},t.prototype.ts=function(){},t.prototype.Gn=function(){var e=this,o=this.Kn.ls();this.Yn=this.Kn.an().fs().map(function(s){return e.cs(s.vs,s.St[3],o)})},t}(ye),lr=function(n){function t(e,o){var s=n.call(this,e,o)||this;return s.zt=new qt,s._s=new sr,s.ds=new gi,s.zt.U([s._s,s.ds]),s}return b(t,n),t.prototype.dt=function(e,o){if(!this.Kn.yt())return null;var s=this.Kn.W();return this.Jn(),this._s.Z({Fn:s.lineType,G:this.Yn,Pt:s.lineStyle,Vt:s.lineWidth,Pn:s.topColor,Wn:s.bottomColor,En:e,Vn:e,J:this.$n,Ln:this.Xn.bt().ws()}),this.ds.Z({Fn:s.lineType,G:this.Yn,ht:s.lineColor,Pt:s.lineStyle,Vt:s.lineWidth,J:this.$n,Ln:this.Xn.bt().ws()}),this.zt},t.prototype.cs=function(e,o){return this.os(e,o)},t}(Me),hr=function(){function n(){this.Bt=null,this.Ms=0,this.bs=0}return n.prototype.Z=function(t){this.Bt=t},n.prototype.H=function(t,e,o,s){if(null!==this.Bt&&0!==this.Bt.an.length&&null!==this.Bt.J){this.Ms=this.ps(e),this.Ms>=2&&Math.max(1,Math.floor(e))%2!=this.Ms%2&&this.Ms--,this.bs=this.Bt.gs?Math.min(this.Ms,Math.floor(e)):this.Ms;for(var r=null,a=this.bs<=this.Ms&&this.Bt.ws>=Math.floor(1.5*e),l=this.Bt.J.from;l<this.Bt.J.to;++l){var h=this.Bt.an[l];r!==h.A&&(t.fillStyle=h.A,r=h.A);var c=Math.floor(.5*this.bs),u=Math.round(h.tt*e),_=u-c,f=this.bs,d=_+f-1,p=Math.min(h.ys,h.ks),m=Math.max(h.ys,h.ks),g=Math.round(p*e)-c,v=Math.round(m*e)+c,C=Math.max(v-g,this.bs);t.fillRect(_,g,f,C);var M=Math.ceil(1.5*this.Ms);if(a){if(this.Bt.Ns){var O=u-M,k=Math.max(g,Math.round(h.xs*e)-c),B=k+f-1;B>g+C-1&&(k=(B=g+C-1)-f+1),t.fillRect(O,k,_-O,B-k+1)}var j=u+M,X=Math.max(g,Math.round(h.Cs*e)-c),tt=X+f-1;tt>g+C-1&&(X=(tt=g+C-1)-f+1),t.fillRect(d+1,X,j-d,tt-X+1)}}}},n.prototype.ps=function(t){var o,e=Math.floor(t);return Math.max(e,Math.floor((o=S(this.Bt).ws,Math.floor(.3*o*t))))},n}(),vi=function(n){function t(e,o){return n.call(this,e,o,!1)||this}return b(t,n),t.prototype.rs=function(e,o,s){o.es(this.Yn,Lt(this.$n)),e.Ss(this.Yn,s,Lt(this.$n))},t.prototype.Ts=function(e,o,s){return{rt:e,open:o.St[0],high:o.St[1],low:o.St[2],close:o.St[3],tt:NaN,xs:NaN,ys:NaN,ks:NaN,Cs:NaN}},t.prototype.Gn=function(){var e=this,o=this.Kn.ls();this.Yn=this.Kn.an().fs().map(function(s){return e.cs(s.vs,s,o)})},t}(ye),cr=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.zt=new hr,e}return b(t,n),t.prototype.dt=function(e,o){if(!this.Kn.yt())return null;var s=this.Kn.W();this.Jn();var r={an:this.Yn,ws:this.Xn.bt().ws(),Ns:s.openVisible,gs:s.thinBars,J:this.$n};return this.zt.Z(r),this.zt},t.prototype.ts=function(){var e=this;this.Yn.forEach(function(o){o.A=e.Kn.ls().As(o.rt).Ds})},t.prototype.cs=function(e,o,s){return A(A({},this.Ts(e,o,s)),{A:s.As(e).Ds})},t}(vi);function Gt(n,t,e){return Math.min(Math.max(n,t),e)}function Jt(n,t,e){return t-n<=e}function Si(n){return n<=0?NaN:Math.log(n)/Math.log(10)}function Ce(n){var t=Math.ceil(n);return t%2!=0?t-1:t}function Ti(n){var t=Math.ceil(n);return t%2==0?t-1:t}var ur=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return b(t,n),t.prototype.On=function(e){var o=this.X,s=e.createLinearGradient(0,0,0,o.Vn),r=Gt(o.En/o.Vn,0,1);return s.addColorStop(0,o.Bs),s.addColorStop(r,o.Ls),s.addColorStop(r,o.Es),s.addColorStop(1,o.Fs),s},t}(fi),_r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return b(t,n),t.prototype.zn=function(e){var o=this.X,s=e.createLinearGradient(0,0,0,o.Vn),r=Gt(o.En/o.Vn,0,1);return s.addColorStop(0,o.Pn),s.addColorStop(r,o.Pn),s.addColorStop(r,o.Wn),s.addColorStop(1,o.Wn),s},t}(di),pr=function(n){function t(e,o){var s=n.call(this,e,o)||this;return s.Os=new ur,s.Vs=new _r,s.ut=new qt,s.ut.U([s.Os,s.Vs]),s}return b(t,n),t.prototype.dt=function(e,o){if(!this.Kn.yt())return null;var s=this.Kn.kt();if(null===s)return null;var r=this.Kn.W();this.Jn();var a=this.Kn.Ct().xt(r.baseValue.price,s.St),l=this.Xn.bt().ws();return this.Os.Z({G:this.Yn,Bs:r.topFillColor1,Ls:r.topFillColor2,Es:r.bottomFillColor1,Fs:r.bottomFillColor2,Vt:r.lineWidth,Pt:r.lineStyle,Fn:0,En:a,Vn:e,J:this.$n,Ln:l}),this.Vs.Z({G:this.Yn,Pn:r.topLineColor,Wn:r.bottomLineColor,Vt:r.lineWidth,Pt:r.lineStyle,Fn:0,En:a,Vn:e,J:this.$n,Ln:l}),this.ut},t.prototype.cs=function(e,o){return this.os(e,o)},t}(Me),fr=function(){function n(){this.Bt=null,this.Ms=0}return n.prototype.Z=function(t){this.Bt=t},n.prototype.H=function(t,e,o,s){if(null!==this.Bt&&0!==this.Bt.an.length&&null!==this.Bt.J){this.Ms=function(l,h){if(l>=2.5&&l<=4)return Math.floor(3*h);var c=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),u=Math.floor(l*c*h),_=Math.floor(l*h),f=Math.min(u,_);return Math.max(Math.floor(h),f)}(this.Bt.ws,e),this.Ms>=2&&Math.floor(e)%2!=this.Ms%2&&this.Ms--;var r=this.Bt.an;this.Bt.Ps&&this.Ws(t,r,this.Bt.J,e),this.Bt.zs&&this.Rs(t,r,this.Bt.J,this.Bt.ws,e);var a=this.Is(e);(!this.Bt.zs||this.Ms>2*a)&&this.js(t,r,this.Bt.J,e)}},n.prototype.Ws=function(t,e,o,s){if(null!==this.Bt){var r="",a=Math.min(Math.floor(s),Math.floor(this.Bt.ws*s));a=Math.max(Math.floor(s),Math.min(a,this.Ms));for(var l=Math.floor(.5*a),h=null,c=o.from;c<o.to;c++){var u=e[c];u.qs!==r&&(t.fillStyle=u.qs,r=u.qs);var _=Math.round(Math.min(u.xs,u.Cs)*s),f=Math.round(Math.max(u.xs,u.Cs)*s),d=Math.round(u.ys*s),p=Math.round(u.ks*s),m=Math.round(s*u.tt)-l,g=m+a-1;null!==h&&(m=Math.max(h+1,m),m=Math.min(m,g));var v=g-m+1;t.fillRect(m,d,v,_-d),t.fillRect(m,f+1,v,p-f),h=g}}},n.prototype.Is=function(t){var e=Math.floor(1*t);this.Ms<=2*e&&(e=Math.floor(.5*(this.Ms-1)));var o=Math.max(Math.floor(t),e);return this.Ms<=2*o?Math.max(Math.floor(t),Math.floor(1*t)):o},n.prototype.Rs=function(t,e,o,s,r){if(null!==this.Bt)for(var a="",l=this.Is(r),h=null,c=o.from;c<o.to;c++){var u=e[c];u.Tt!==a&&(t.fillStyle=u.Tt,a=u.Tt);var _=Math.round(u.tt*r)-Math.floor(.5*this.Ms),f=_+this.Ms-1,d=Math.round(Math.min(u.xs,u.Cs)*r),p=Math.round(Math.max(u.xs,u.Cs)*r);null!==h&&(_=Math.max(h+1,_),_=Math.min(_,f)),this.Bt.ws*r>2*l?Ks(t,_,d,f-_+1,p-d+1,l):t.fillRect(_,d,f-_+1,p-d+1),h=f}},n.prototype.js=function(t,e,o,s){if(null!==this.Bt)for(var r="",a=this.Is(s),l=o.from;l<o.to;l++){var h=e[l],c=Math.round(Math.min(h.xs,h.Cs)*s),u=Math.round(Math.max(h.xs,h.Cs)*s),_=Math.round(h.tt*s)-Math.floor(.5*this.Ms),f=_+this.Ms-1;if(h.A!==r){var d=h.A;t.fillStyle=d,r=d}this.Bt.zs&&(_+=a,c+=a,f-=a,u-=a),c>u||t.fillRect(_,c,f-_+1,u-c+1)}},n}(),dr=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.zt=new fr,e}return b(t,n),t.prototype.dt=function(e,o){if(!this.Kn.yt())return null;var s=this.Kn.W();this.Jn();var r={an:this.Yn,ws:this.Xn.bt().ws(),Ps:s.wickVisible,zs:s.borderVisible,J:this.$n};return this.zt.Z(r),this.zt},t.prototype.ts=function(){var e=this;this.Yn.forEach(function(o){var s=e.Kn.ls().As(o.rt);o.A=s.Ds,o.qs=s.Us,o.Tt=s.Hs})},t.prototype.cs=function(e,o,s){var r=s.As(e);return A(A({},this.Ts(e,o,s)),{A:r.Ds,qs:r.Us,Tt:r.Hs})},t}(vi),gr=function(){function n(){this.Bt=null,this.Ys=[]}return n.prototype.Z=function(t){this.Bt=t,this.Ys=[]},n.prototype.H=function(t,e,o,s){if(null!==this.Bt&&0!==this.Bt.G.length&&null!==this.Bt.J){this.Ys.length||this.$s(e);for(var r=Math.max(1,Math.floor(e)),a=Math.round(this.Bt.Ks*e)-Math.floor(r/2),l=a+r,h=this.Bt.J.from;h<this.Bt.J.to;h++){var c=this.Bt.G[h],u=this.Ys[h-this.Bt.J.from],_=Math.round(c.it*e);t.fillStyle=c.A;var f=void 0,d=void 0;_<=a?(f=_,d=l):(f=a,d=_-Math.floor(r/2)+r),t.fillRect(u.In,f,u.jn-u.In+1,d-f)}}},n.prototype.$s=function(t){if(null!==this.Bt&&0!==this.Bt.G.length&&null!==this.Bt.J){var e=Math.ceil(this.Bt.ws*t)<=1?0:Math.max(1,Math.floor(t)),o=Math.round(this.Bt.ws*t)-e;this.Ys=new Array(this.Bt.J.to-this.Bt.J.from);for(var s=this.Bt.J.from;s<this.Bt.J.to;s++){var r,a=this.Bt.G[s],l=Math.round(a.tt*t),h=void 0,c=void 0;o%2?(h=l-(r=(o-1)/2),c=l+r):(h=l-(r=o/2),c=l+r-1),this.Ys[s-this.Bt.J.from]={In:h,jn:c,Xs:l,Zs:a.tt*t,rt:a.rt}}for(s=this.Bt.J.from+1;s<this.Bt.J.to;s++){var u=this.Ys[s-this.Bt.J.from],_=this.Ys[s-this.Bt.J.from-1];u.rt===_.rt+1&&u.In-_.jn!==e+1&&(_.Xs>_.Zs?_.jn=u.In-e-1:u.In=_.jn+e+1)}var f=Math.ceil(this.Bt.ws*t);for(s=this.Bt.J.from;s<this.Bt.J.to;s++){(u=this.Ys[s-this.Bt.J.from]).jn<u.In&&(u.jn=u.In);var d=u.jn-u.In+1;f=Math.min(d,f)}if(e>0&&f<4)for(s=this.Bt.J.from;s<this.Bt.J.to;s++)(d=(u=this.Ys[s-this.Bt.J.from]).jn-u.In+1)>f&&(u.Xs>u.Zs?u.jn-=1:u.In+=1)}else this.Ys=[]},n}();function yi(n){return{G:[],ws:n,Ks:NaN,J:null}}function mr(n,t,e){return{rt:n,et:t,tt:NaN,it:NaN,A:e}}var vr=function(n){function t(e,o){var s=n.call(this,e,o,!1)||this;return s.ut=new qt,s.Js=yi(0),s.zt=new gr,s}return b(t,n),t.prototype.dt=function(e,o){return this.Kn.yt()?(this.Jn(),this.ut):null},t.prototype.Gn=function(){var e=this.Xn.bt().ws();this.Js=yi(e);for(var o=0,s=0,r=this.Kn.W().color,a=0,l=this.Kn.an().fs();a<l.length;a++){var h=l[a],_=mr(h.vs,h.St[3],void 0!==h.A?h.A:r);++o<this.Js.G.length?this.Js.G[o]=_:this.Js.G.push(_),this.Yn[s++]={rt:h.vs,tt:0}}this.zt.Z(this.Js),this.ut.U([this.zt])},t.prototype.ts=function(){},t.prototype.ns=function(){n.prototype.ns.call(this),this.Js.J=null},t.prototype.rs=function(e,o,s){if(null!==this.$n){var r=o.ws(),a=S(o.ss()),l=e.xt(this.Kn.W().base,s);o.es(this.Js.G),e.us(this.Js.G,s),this.Js.Ks=l,this.Js.J=Te(this.Js.G,a,!1),this.Js.ws=r,this.zt.Z(this.Js)}},t}(ye),Sr=function(n){function t(e,o){var s=n.call(this,e,o)||this;return s.ds=new gi,s}return b(t,n),t.prototype.dt=function(e,o){if(!this.Kn.yt())return null;var s=this.Kn.W();this.Jn();var r={G:this.Yn,ht:s.color,Pt:s.lineStyle,Fn:s.lineType,Vt:s.lineWidth,J:this.$n,Ln:this.Xn.bt().ws()};return this.ds.Z(r),this.ds},t.prototype.ts=function(){var e=this;this.Yn.forEach(function(o){o.A=e.Kn.ls().As(o.rt).Ds})},t.prototype.cs=function(e,o,s){var r=this.os(e,o);return r.A=s.As(e).Ds,r},t}(Me),Tr=/[2-9]/g,pt=function(){function n(t){void 0===t&&(t=50),this.Gs=new Map,this.Qs=0,this.th=Array.from(new Array(t))}return n.prototype.ih=function(){this.Gs.clear(),this.th.fill(void 0)},n.prototype.Qt=function(t,e,o){var s=o||Tr,r=String(e).replace(s,"0"),a=this.Gs.get(r);if(void 0===a){if(0===(a=t.measureText(r).width)&&0!==e.length)return 0;var l=this.th[this.Qs];void 0!==l&&this.Gs.delete(l),this.th[this.Qs]=r,this.Qs=(this.Qs+1)%this.th.length,this.Gs.set(r,a)}return a},n}(),yr=function(){function n(t){this.nh=null,this.k=null,this.sh="right",this.hh=0,this.rh=t}return n.prototype.eh=function(t,e,o,s){this.nh=t,this.k=e,this.hh=o,this.sh=s},n.prototype.H=function(t,e){null!==this.k&&null!==this.nh&&this.nh.H(t,this.k,this.rh,this.hh,this.sh,e)},n}(),Mi=function(){function n(t,e,o){this.uh=t,this.rh=new pt(50),this.ah=e,this.P=o,this.R=-1,this.zt=new yr(this.rh)}return n.prototype.dt=function(t,e){var o=this.P.oh(this.ah);if(null===o)return null;var s=o.lh(this.ah)?o.fh():this.ah.Ct();if(null===s)return null;var r=o._h(s);if("overlay"===r)return null;var a=this.P.dh();return a.S!==this.R&&(this.R=a.S,this.rh.ih()),this.zt.eh(this.uh.ci(),a,e,r),this.zt},n}(),Mr=function(){function n(){this.Bt=null}return n.prototype.Z=function(t){this.Bt=t},n.prototype.H=function(t,e,o,s){if(null!==this.Bt&&!1!==this.Bt.yt){var r=Math.round(this.Bt.it*e);if(!(r<0||r>Math.ceil(this.Bt.Yt*e))){var a=Math.ceil(this.Bt.Ht*e);t.lineCap="butt",t.strokeStyle=this.Bt.A,t.lineWidth=Math.floor(this.Bt.Vt*e),st(t,this.Bt.Pt),si(t,r,0,a)}}},n}(),be=function(){function n(t){this.wh={Ht:0,Yt:0,it:0,A:"rgba(0, 0, 0, 0)",Vt:1,Pt:0,yt:!1},this.Mh=new Mr,this.ft=!0,this.Kn=t,this.Xn=t.jt(),this.Mh.Z(this.wh)}return n.prototype.vt=function(){this.ft=!0},n.prototype.dt=function(t,e){return this.Kn.yt()?(this.ft&&(this.bh(t,e),this.ft=!1),this.Mh):null},n}(),Cr=function(n){function t(e){return n.call(this,e)||this}return b(t,n),t.prototype.bh=function(e,o){this.wh.yt=!1;var s=this.Kn.Ct(),r=s.mh().mh;if(2===r||3===r){var a=this.Kn.W();if(a.baseLineVisible&&this.Kn.yt()){var l=this.Kn.kt();null!==l&&(this.wh.yt=!0,this.wh.it=s.xt(l.St,l.St),this.wh.Ht=o,this.wh.Yt=e,this.wh.A=a.baseLineColor,this.wh.Vt=a.baseLineWidth,this.wh.Pt=a.baseLineStyle)}}},t}(be),br=function(){function n(){this.Bt=null}return n.prototype.Z=function(t){this.Bt=t},n.prototype.ph=function(){return this.Bt},n.prototype.H=function(t,e,o,s){var r=this.Bt;if(null!==r){t.save();var a=Math.max(1,Math.floor(e)),l=a%2/2,h=Math.round(r.Zs.x*e)+l,c=r.Zs.y*e;t.fillStyle=r.gh,t.beginPath();var u=Math.max(2,1.5*r.yh)*e;t.arc(h,c,u,0,2*Math.PI,!1),t.fill(),t.fillStyle=r.kh,t.beginPath(),t.arc(h,c,r.st*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=a,t.strokeStyle=r.Nh,t.beginPath(),t.arc(h,c,r.st*e+a/2,0,2*Math.PI,!1),t.stroke(),t.restore()}},n}(),Ar=[{xh:0,Ch:.25,Sh:4,Th:10,Dh:.25,Ah:0,Bh:.4,Lh:.8},{xh:.25,Ch:.525,Sh:10,Th:14,Dh:0,Ah:0,Bh:.8,Lh:0},{xh:.525,Ch:1,Sh:14,Th:14,Dh:0,Ah:0,Bh:0,Lh:0}];function Ci(n,t,e,o){return function(s,r){if("transparent"===s)return s;var a=Qt(s),l=a[3];return"rgba(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", ").concat(r*l,")")}(n,e+(o-e)*t)}function bi(n,t){for(var e,o=n%2600/2600,s=0,r=Ar;s<r.length;s++){var a=r[s];if(o>=a.xh&&o<=a.Ch){e=a;break}}_t(void 0!==e,"Last price animation internal logic error");var l,h,c,u=(o-e.xh)/(e.Ch-e.xh);return{kh:Ci(t,u,e.Dh,e.Ah),Nh:Ci(t,u,e.Bh,e.Lh),st:(l=u,h=e.Sh,c=e.Th,h+(c-h)*l)}}var xr=function(){function n(t){this.zt=new br,this.ft=!0,this.Eh=!0,this.Fh=performance.now(),this.Oh=this.Fh-1,this.Vh=t}return n.prototype.Ph=function(){this.Oh=this.Fh-1,this.vt()},n.prototype.Wh=function(){if(this.vt(),2===this.Vh.W().lastPriceAnimation){var t=performance.now(),e=this.Oh-t;if(e>0)return void(e<650&&(this.Oh+=2600));this.Fh=t,this.Oh=t+2600}},n.prototype.vt=function(){this.ft=!0},n.prototype.zh=function(){this.Eh=!0},n.prototype.yt=function(){return 0!==this.Vh.W().lastPriceAnimation},n.prototype.Rh=function(){switch(this.Vh.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Oh}},n.prototype.dt=function(t,e){return this.ft?(this.wt(t,e),this.ft=!1,this.Eh=!1):this.Eh&&(this.Ih(),this.Eh=!1),this.zt},n.prototype.wt=function(t,e){this.zt.Z(null);var o=this.Vh.jt().bt(),s=o.ss(),r=this.Vh.kt();if(null!==s&&null!==r){var a=this.Vh.jh(!0);if(!a.qh&&s.Uh(a.vs)){var l={x:o.At(a.vs),y:this.Vh.Ct().xt(a.et,r.St)},h=a.A,c=this.Vh.W().lineWidth,u=bi(this.Hh(),h);this.zt.Z({gh:h,yh:c,kh:u.kh,Nh:u.Nh,st:u.st,Zs:l})}}},n.prototype.Ih=function(){var t=this.zt.ph();if(null!==t){var e=bi(this.Hh(),t.gh);t.kh=e.kh,t.Nh=e.Nh,t.st=e.st}},n.prototype.Hh=function(){return this.Rh()?performance.now()-this.Fh:2599},n}();function At(n,t){return Ti(Math.min(Math.max(n,12),30)*t)}function xt(n,t){switch(n){case"arrowDown":case"arrowUp":return At(t,1);case"circle":return At(t,.8);case"square":return At(t,.7)}}function Ai(n){return Ce(At(n,1))}function xi(n){return Math.max(At(n,.1),3)}function Bi(n,t,e,o,s){var r=xt("square",e),a=(r-1)/2,l=n-a,h=t-a;return o>=l&&o<=l+r&&s>=h&&s<=h+r}function wi(n,t,e,o,s){var r=(xt("arrowUp",s)-1)/2,a=(Ti(s/2)-1)/2;t.beginPath(),n?(t.moveTo(e-r,o),t.lineTo(e,o-r),t.lineTo(e+r,o),t.lineTo(e+a,o),t.lineTo(e+a,o+r),t.lineTo(e-a,o+r),t.lineTo(e-a,o)):(t.moveTo(e-r,o),t.lineTo(e,o+r),t.lineTo(e+r,o),t.lineTo(e+a,o),t.lineTo(e+a,o-r),t.lineTo(e-a,o-r),t.lineTo(e-a,o)),t.fill()}var wr=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.Bt=null,e.rh=new pt,e.R=-1,e.I="",e.Yh="",e}return b(t,n),t.prototype.Z=function(e){this.Bt=e},t.prototype.eh=function(e,o){this.R===e&&this.I===o||(this.R=e,this.I=o,this.Yh=rt(e,o),this.rh.ih())},t.prototype.$h=function(e,o){if(null===this.Bt||null===this.Bt.J)return null;for(var s=this.Bt.J.from;s<this.Bt.J.to;s++){var r=this.Bt.G[s];if(Ir(r,e,o))return{Kh:r.Xh,Zh:r.Zh}}return null},t.prototype.Y=function(e,o,s){if(null!==this.Bt&&null!==this.Bt.J){e.textBaseline="middle",e.font=this.Yh;for(var r=this.Bt.J.from;r<this.Bt.J.to;r++){var a=this.Bt.G[r];void 0!==a.Gt&&(a.Gt.Ht=this.rh.Qt(e,a.Gt.Jh),a.Gt.Yt=this.R),Or(a,e)}}},t}(Ct);function Or(n,t){t.fillStyle=n.A,void 0!==n.Gt&&t.fillText(n.Gt.Jh,n.tt-n.Gt.Ht/2,n.Gt.it),function(e,o){if(0!==e.hs)switch(e.Gh){case"arrowDown":return void wi(!1,o,e.tt,e.it,e.hs);case"arrowUp":return void wi(!0,o,e.tt,e.it,e.hs);case"circle":return s=o,r=e.tt,a=e.it,h=(xt("circle",e.hs)-1)/2,s.beginPath(),s.arc(r,a,h,0,2*Math.PI,!1),void s.fill();case"square":!function(s,r,a,l){var h=xt("square",l),c=(h-1)/2;s.fillRect(r-c,a-c,h,h)}(o,e.tt,e.it,e.hs)}var s,r,a,h}(n,t)}function Ir(n,t,e){return!(void 0===n.Gt||(o=n.tt,s=n.Gt.it,r=n.Gt.Ht,a=n.Gt.Yt,l=t,h=e,c=a/2,!(l>=o&&l<=o+r&&h>=s-c&&h<=s+c)))||function(o,s,r){if(0===o.hs)return!1;switch(o.Gh){case"arrowDown":case"arrowUp":return function Br(n,t,e,o,s,r){return Bi(t,e,o,s,r)}(0,o.tt,o.it,o.hs,s,r);case"circle":return function(a,l,h,c,u){var _=2+xt("circle",h)/2,f=a-c,d=l-u;return Math.sqrt(f*f+d*d)<=_}(o.tt,o.it,o.hs,s,r);case"square":return Bi(o.tt,o.it,o.hs,s,r)}}(n,t,e);var o,s,r,a,l,h,c}function Nr(n,t,e,o,s,r,a,l,h){var c=H(e)?e:e.close,u=H(e)?e:e.high,_=H(e)?e:e.low,f=H(t.size)?Math.max(t.size,0):1,d=Ai(l.ws())*f,p=d/2;switch(n.hs=d,t.position){case"inBar":return n.it=a.xt(c,h),void(void 0!==n.Gt&&(n.Gt.it=n.it+p+r+.6*s));case"aboveBar":return n.it=a.xt(u,h)-p-o.Qh,void 0!==n.Gt&&(n.Gt.it=n.it-p-.6*s,o.Qh+=1.2*s),void(o.Qh+=d+r);case"belowBar":return n.it=a.xt(_,h)+p+o.tr,void 0!==n.Gt&&(n.Gt.it=n.it+p+r+.6*s,o.tr+=1.2*s),void(o.tr+=d+r)}}var Pr=function(){function n(t,e){this.ft=!0,this.ir=!0,this.nr=!0,this.sr=null,this.zt=new wr,this.Vh=t,this.pi=e,this.Bt={G:[],J:null}}return n.prototype.vt=function(t){this.ft=!0,this.nr=!0,"data"===t&&(this.ir=!0)},n.prototype.dt=function(t,e,o){if(!this.Vh.yt())return null;this.ft&&this.Jn();var s=this.pi.W().layout;return this.zt.eh(s.fontSize,s.fontFamily),this.zt.Z(this.Bt),this.zt},n.prototype.hr=function(){if(this.nr){if(this.Vh.rr().length>0){var t=this.pi.bt().ws(),e=xi(t),o=1.5*Ai(t)+2*e;this.sr={above:o,below:o}}else this.sr=null;this.nr=!1}return this.sr},n.prototype.Jn=function(){var t=this.Vh.Ct(),e=this.pi.bt(),o=this.Vh.rr();this.ir&&(this.Bt.G=o.map(function(p){return{rt:p.time,tt:0,it:0,hs:0,Gh:p.shape,A:p.color,Xh:p.Xh,Zh:p.id,Gt:void 0}}),this.ir=!1);var s=this.pi.W().layout;this.Bt.J=null;var r=e.ss();if(null!==r){var a=this.Vh.kt();if(null!==a&&0!==this.Bt.G.length){var l=NaN,h=xi(e.ws()),c={Qh:h,tr:h};this.Bt.J=Te(this.Bt.G,r,!0);for(var u=this.Bt.J.from;u<this.Bt.J.to;u++){var _=o[u];_.time!==l&&(c.Qh=h,c.tr=h,l=_.time);var f=this.Bt.G[u];f.tt=e.At(_.time),void 0!==_.text&&_.text.length>0&&(f.Gt={Jh:_.text,it:0,Ht:0,Yt:0});var d=this.Vh.er(_.time);null!==d&&Nr(f,_,d,c,s.fontSize,h,t,e,a.St)}this.ft=!1}}},n}(),Er=function(n){function t(e){return n.call(this,e)||this}return b(t,n),t.prototype.bh=function(e,o){var s=this.wh;s.yt=!1;var r=this.Kn.W();if(r.priceLineVisible&&this.Kn.yt()){var a=this.Kn.jh(0===r.priceLineSource);a.qh||(s.yt=!0,s.it=a.ti,s.A=this.Kn.ur(a.A),s.Ht=o,s.Yt=e,s.Vt=r.priceLineWidth,s.Pt=r.priceLineStyle)}},t}(be),kr=function(n){function t(e){var o=n.call(this)||this;return o.Rt=e,o}return b(t,n),t.prototype.vi=function(e,o,s){e.yt=!1,o.yt=!1;var r=this.Rt;if(r.yt()){var a=r.W(),l=a.lastValueVisible,h=""!==r.ar(),c=0===a.seriesLastValueMode,u=r.jh(!1);if(!u.qh){l&&(e.Gt=this.lr(u,l,c),e.yt=0!==e.Gt.length),(h||c)&&(o.Gt=this.cr(u,l,h,c),o.yt=o.Gt.length>0);var _=r.ur(u.A),f=Dt(_);s.t=f.t,s.A=f.i,s.ti=u.ti,o.Tt=r.jt().Dt(u.ti/r.Ct().Yt()),e.Tt=_}}},t.prototype.cr=function(e,o,s,r){var a="",l=this.Rt.ar();return s&&0!==l.length&&(a+="".concat(l," ")),o&&r&&(a+=this.Rt.Ct().vr()?e._r:e.dr),a.trim()},t.prototype.lr=function(e,o,s){return o?s?this.Rt.Ct().vr()?e.dr:e._r:e.Gt:""},t}(ve),it=function(){function n(t,e){this.wr=t,this.Mr=e}return n.prototype.br=function(t){return null!==t&&this.wr===t.wr&&this.Mr===t.Mr},n.prototype.mr=function(){return new n(this.wr,this.Mr)},n.prototype.pr=function(){return this.wr},n.prototype.gr=function(){return this.Mr},n.prototype.yr=function(){return this.Mr-this.wr},n.prototype.wi=function(){return this.Mr===this.wr||Number.isNaN(this.Mr)||Number.isNaN(this.wr)},n.prototype.Nn=function(t){return null===t?this:new n(Math.min(this.pr(),t.pr()),Math.max(this.gr(),t.gr()))},n.prototype.kr=function(t){if(H(t)&&this.Mr-this.wr!=0){var e=.5*(this.Mr+this.wr),o=this.Mr-e,s=this.wr-e;s*=t,this.Mr=e+(o*=t),this.wr=e+s}},n.prototype.Nr=function(t){H(t)&&(this.Mr+=t,this.wr+=t)},n.prototype.Cr=function(){return{minValue:this.wr,maxValue:this.Mr}},n.Sr=function(t){return null===t?null:new n(t.minValue,t.maxValue)},n}(),Oi=function(){function n(t,e){this.Tr=t,this.Dr=e||null}return n.prototype.Ar=function(){return this.Tr},n.prototype.Br=function(){return this.Dr},n.prototype.Cr=function(){return null===this.Tr?null:{priceRange:this.Tr.Cr(),margins:this.Dr||void 0}},n.Sr=function(t){return null===t?null:new n(it.Sr(t.priceRange),t.margins)},n}(),Rr=function(n){function t(e,o){var s=n.call(this,e)||this;return s.Lr=o,s}return b(t,n),t.prototype.bh=function(e,o){var s=this.wh;s.yt=!1;var r=this.Lr.W();if(this.Kn.yt()&&r.lineVisible){var a=this.Lr.Er();null!==a&&(s.yt=!0,s.it=a,s.A=r.color,s.Ht=o,s.Yt=e,s.Vt=r.lineWidth,s.Pt=r.lineStyle)}},t}(be),Zr=function(n){function t(e,o){var s=n.call(this)||this;return s.Vh=e,s.Lr=o,s}return b(t,n),t.prototype.vi=function(e,o,s){e.yt=!1,o.yt=!1;var r=this.Lr.W(),l=""!==r.title,h=this.Vh;if(r.axisLabelVisible&&h.yt()){var c=this.Lr.Er();if(null!==c){l&&(o.Gt=r.title,o.yt=!0),o.Tt=h.jt().Dt(c/h.Ct().Yt()),e.Gt=h.Ct().Fr(r.price),e.yt=!0;var u=Dt(r.color);s.t=u.t,s.A=u.i,s.ti=c}}},t}(ve),Qr=function(){function n(t,e){this.Vh=t,this.zi=e,this.Or=new Rr(t,this),this.uh=new Zr(t,this),this.Vr=new Mi(this.uh,t,t.jt())}return n.prototype.Pr=function(t){D(this.zi,t),this.vt(),this.Vh.jt().Wr()},n.prototype.W=function(){return this.zi},n.prototype.tn=function(){return[this.Or,this.Vr]},n.prototype.zr=function(){return this.uh},n.prototype.vt=function(){this.Or.vt(),this.uh.vt()},n.prototype.Er=function(){var t=this.Vh,e=t.Ct();if(t.jt().bt().wi()||e.wi())return null;var o=t.kt();return null===o?null:e.xt(this.zi.price,o.St)},n}(),Dr=function(n){function t(e){var o=n.call(this)||this;return o.pi=e,o}return b(t,n),t.prototype.jt=function(){return this.pi},t}(Se),ft={Ds:"",Hs:"",Us:""},Lr=function(){function n(t){this.Vh=t}return n.prototype.As=function(t,e){var o=this.Vh.Rr(),s=this.Vh.W();switch(o){case"Line":return this.Ir(s,t,e);case"Area":return this.jr(s);case"Baseline":return this.qr(s,t,e);case"Bar":return this.Ur(s,t,e);case"Candlestick":return this.Hr(s,t,e);case"Histogram":return this.Yr(s,t,e)}throw new Error("Unknown chart style")},n.prototype.Ur=function(t,e,o){var s=A({},ft),r=t.upColor,a=t.downColor,l=r,h=a,c=S(this.$r(e,o)),u=yt(c.St[0])<=yt(c.St[3]);return void 0!==c.A?(s.Ds=c.A,s.Hs=c.A):(s.Ds=u?r:a,s.Hs=u?l:h),s},n.prototype.Hr=function(t,e,o){var s,r,a,l=A({},ft),h=t.upColor,c=t.downColor,u=t.borderUpColor,_=t.borderDownColor,f=t.wickUpColor,d=t.wickDownColor,p=S(this.$r(e,o)),m=yt(p.St[0])<=yt(p.St[3]);return l.Ds=null!==(s=p.A)&&void 0!==s?s:m?h:c,l.Hs=null!==(r=p.Tt)&&void 0!==r?r:m?u:_,l.Us=null!==(a=p.qs)&&void 0!==a?a:m?f:d,l},n.prototype.jr=function(t){return A(A({},ft),{Ds:t.lineColor})},n.prototype.qr=function(t,e,o){var s=S(this.$r(e,o)).St[3]>=t.baseValue.price;return A(A({},ft),{Ds:s?t.topLineColor:t.bottomLineColor})},n.prototype.Ir=function(t,e,o){var s,r=S(this.$r(e,o));return A(A({},ft),{Ds:null!==(s=r.A)&&void 0!==s?s:t.color})},n.prototype.Yr=function(t,e,o){var s=A({},ft),r=S(this.$r(e,o));return s.Ds=void 0!==r.A?r.A:t.color,s},n.prototype.$r=function(t,e){return void 0!==e?e.St:this.Vh.an().Kr(t)},n}(),qr=function(){function n(){this.Xr=[],this.Zr=new Map,this.Jr=new Map}return n.prototype.Gr=function(){return this.hs()>0?this.Xr[this.Xr.length-1]:null},n.prototype.Qr=function(){return this.hs()>0?this.te(0):null},n.prototype.un=function(){return this.hs()>0?this.te(this.Xr.length-1):null},n.prototype.hs=function(){return this.Xr.length},n.prototype.wi=function(){return 0===this.hs()},n.prototype.Uh=function(t){return null!==this.ie(t,0)},n.prototype.Kr=function(t){return this.ne(t)},n.prototype.ne=function(t,e){void 0===e&&(e=0);var o=this.ie(t,e);return null===o?null:A(A({},this.se(o)),{vs:this.te(o)})},n.prototype.fs=function(){return this.Xr},n.prototype.he=function(t,e,o){if(this.wi())return null;for(var s=null,r=0,a=o;r<a.length;r++)s=Yt(s,this.re(t,e,a[r]));return s},n.prototype.Z=function(t){this.Jr.clear(),this.Zr.clear(),this.Xr=t},n.prototype.te=function(t){return this.Xr[t].vs},n.prototype.se=function(t){return this.Xr[t]},n.prototype.ie=function(t,e){var o=this.ee(t);if(null===o&&0!==e)switch(e){case-1:return this.ue(t);case 1:return this.ae(t);default:throw new TypeError("Unknown search mode")}return o},n.prototype.ue=function(t){var e=this.oe(t);return e>0&&(e-=1),e!==this.Xr.length&&this.te(e)<t?e:null},n.prototype.ae=function(t){var e=this.le(t);return e!==this.Xr.length&&t<this.te(e)?e:null},n.prototype.ee=function(t){var e=this.oe(t);return e===this.Xr.length||t<this.Xr[e].vs?null:e},n.prototype.oe=function(t){return bt(this.Xr,t,function(e,o){return e.vs<o})},n.prototype.le=function(t){return mi(this.Xr,t,function(e,o){return o.vs>e})},n.prototype.fe=function(t,e,o){for(var s=null,r=t;r<e;r++){var a=this.Xr[r].St[o];Number.isNaN(a)||(null===s?s={ce:a,ve:a}:(a<s.ce&&(s.ce=a),a>s.ve&&(s.ve=a)))}return s},n.prototype.re=function(t,e,o){if(this.wi())return null;var s=null,r=S(this.Qr()),a=S(this.un()),l=Math.max(t,r),h=Math.min(e,a),c=30*Math.ceil(l/30),u=Math.max(c,30*Math.floor(h/30)),_=this.oe(l),f=this.le(Math.min(h,c,e));s=Yt(s,this.fe(_,f,o));var d=this.Zr.get(o);void 0===d&&this.Zr.set(o,d=new Map);for(var p=Math.max(c+1,l);p<u;p+=30){var m=Math.floor(p/30),g=d.get(m);if(void 0===g){var v=this.oe(30*m),C=this.le(30*(m+1)-1);g=this.fe(v,C,o),d.set(m,g)}s=Yt(s,g)}return _=this.oe(u),f=this.le(h),Yt(s,this.fe(_,f,o))},n}();function Yt(n,t){return null===n?t:null===t?n:{ce:Math.min(n.ce,t.ce),ve:Math.max(n.ve,t.ve)}}var Ae=function(n){function t(e,o,s){var r=n.call(this,e)||this;r.Bt=new qr,r.Or=new Er(r),r._e=[],r.de=new Cr(r),r.we=null,r.Me=null,r.be=[],r.me=[],r.pe=null,r.zi=o,r.ge=s;var a=new kr(r);return r.Ei=[a],r.Vr=new Mi(a,r,e),"Area"!==s&&"Line"!==s&&"Baseline"!==s||(r.we=new xr(r)),r.ye(),r.ke(),r}return b(t,n),t.prototype.g=function(){null!==this.pe&&clearTimeout(this.pe)},t.prototype.ur=function(e){return this.zi.priceLineColor||e},t.prototype.jh=function(e){var o={qh:!0},s=this.Ct();if(this.jt().bt().wi()||s.wi()||this.Bt.wi())return o;var r,a,l=this.jt().bt().ss(),h=this.kt();if(null===l||null===h)return o;if(e){var c=this.Bt.Gr();if(null===c)return o;r=c,a=c.vs}else{var u=this.Bt.ne(l.jn(),-1);if(null===u||null===(r=this.Bt.Kr(u.vs)))return o;a=u.vs}var _=r.St[3],f=this.ls().As(a,{St:r}),d=s.xt(_,h.St);return{qh:!1,et:_,Gt:s.Mi(_,h.St),_r:s.Fr(_),dr:s.Ne(_,h.St),A:f.Ds,ti:d,vs:a}},t.prototype.ls=function(){return null!==this.Me||(this.Me=new Lr(this)),this.Me},t.prototype.W=function(){return this.zi},t.prototype.Pr=function(e){var o=e.priceScaleId;void 0!==o&&o!==this.zi.priceScaleId&&this.jt().xe(this,o),D(this.zi,e),null!==this.ki&&void 0!==e.scaleMargins&&this.ki.Pr({scaleMargins:e.scaleMargins}),void 0!==e.priceFormat&&(this.ye(),this.jt().Ce()),this.jt().Se(this),this.jt().Te(),this.Hi.vt("options")},t.prototype.Z=function(e,o){this.Bt.Z(e),this.De(),this.Hi.vt("data"),this.Ri.vt("data"),null!==this.we&&(o&&o.Ae?this.we.Wh():0===e.length&&this.we.Ph());var s=this.jt().oh(this);this.jt().Be(s),this.jt().Se(this),this.jt().Te(),this.jt().Wr()},t.prototype.Le=function(e){this.be=e.map(function(s){return A({},s)}),this.De();var o=this.jt().oh(this);this.Ri.vt("data"),this.jt().Be(o),this.jt().Se(this),this.jt().Te(),this.jt().Wr()},t.prototype.rr=function(){return this.me},t.prototype.Ee=function(e){var o=new Qr(this,e);return this._e.push(o),this.jt().Se(this),o},t.prototype.Fe=function(e){var o=this._e.indexOf(e);-1!==o&&this._e.splice(o,1),this.jt().Se(this)},t.prototype.Rr=function(){return this.ge},t.prototype.kt=function(){var e=this.Oe();return null===e?null:{St:e.St[3],Ve:e.rt}},t.prototype.Oe=function(){var e=this.jt().bt().ss();if(null===e)return null;var o=e.In();return this.Bt.ne(o,1)},t.prototype.an=function(){return this.Bt},t.prototype.er=function(e){var o=this.Bt.Kr(e);return null===o?null:"Bar"===this.ge||"Candlestick"===this.ge?{open:o.St[0],high:o.St[1],low:o.St[2],close:o.St[3]}:o.St[3]},t.prototype.Pe=function(e){var o=this,s=this.we;return null!==s&&s.yt()?(null===this.pe&&s.Rh()&&(this.pe=setTimeout(function(){o.pe=null,o.jt().We()},0)),s.zh(),[s]):[]},t.prototype.tn=function(){var e=[];this.ze()||e.push(this.de);for(var o=0,s=this._e;o<s.length;o++)e.push.apply(e,s[o].tn());return e.push(this.Hi,this.Or,this.Vr,this.Ri),e},t.prototype.nn=function(e,o){if(o!==this.ki&&!this.ze())return[];for(var s=li([],this.Ei,!0),r=0,a=this._e;r<a.length;r++)s.push(a[r].zr());return s},t.prototype.Re=function(e,o){var s=this;if(void 0!==this.zi.autoscaleInfoProvider){var r=this.zi.autoscaleInfoProvider(function(){var a=s.Ie(e,o);return null===a?null:a.Cr()});return Oi.Sr(r)}return this.Ie(e,o)},t.prototype.je=function(){return this.zi.priceFormat.minMove},t.prototype.qe=function(){return this.Ue},t.prototype.hn=function(){var e;this.Hi.vt(),this.Ri.vt();for(var o=0,s=this.Ei;o<s.length;o++)s[o].vt();for(var r=0,a=this._e;r<a.length;r++)a[r].vt();this.Or.vt(),this.de.vt(),null===(e=this.we)||void 0===e||e.vt()},t.prototype.Ct=function(){return S(n.prototype.Ct.call(this))},t.prototype.gt=function(e){if("Line"!==this.ge&&"Area"!==this.ge&&"Baseline"!==this.ge||!this.zi.crosshairMarkerVisible)return null;var o=this.Bt.Kr(e);return null===o?null:{et:o.St[3],st:this.He(),Tt:this.Ye(),Nt:this.$e(e)}},t.prototype.ar=function(){return this.zi.title},t.prototype.yt=function(){return this.zi.visible},t.prototype.ze=function(){return!zt(this.Ct().Ke())},t.prototype.Ie=function(e,o){if(!Mt(e)||!Mt(o)||this.Bt.wi())return null;var r=this.Bt.he(e,o,"Line"===this.ge||"Area"===this.ge||"Baseline"===this.ge||"Histogram"===this.ge?[3]:[2,1]),a=null!==r?new it(r.ce,r.ve):null;if("Histogram"===this.Rr()){var l=this.zi.base,h=new it(l,l);a=null!==a?a.Nn(h):h}return new Oi(a,this.Ri.hr())},t.prototype.He=function(){switch(this.ge){case"Line":case"Area":case"Baseline":return this.zi.crosshairMarkerRadius}return 0},t.prototype.Ye=function(){switch(this.ge){case"Line":case"Area":case"Baseline":var e=this.zi.crosshairMarkerBorderColor;if(0!==e.length)return e}return null},t.prototype.$e=function(e){switch(this.ge){case"Line":case"Area":case"Baseline":var o=this.zi.crosshairMarkerBackgroundColor;if(0!==o.length)return o}return this.ls().As(e).Ds},t.prototype.ye=function(){switch(this.zi.priceFormat.type){case"custom":this.Ue={format:this.zi.priceFormat.formatter};break;case"volume":this.Ue=new or(this.zi.priceFormat.precision);break;case"percent":this.Ue=new _i(this.zi.priceFormat.precision);break;default:var e=Math.pow(10,this.zi.priceFormat.precision);this.Ue=new Ut(e,this.zi.priceFormat.minMove*e)}null!==this.ki&&this.ki.Xe()},t.prototype.De=function(){var e=this,o=this.jt().bt();if(o.wi()||0===this.Bt.hs())this.me=[];else{var s=S(this.Bt.Qr());this.me=this.be.map(function(r,a){var l=S(o.Ze(r.time,!0));return{time:S(e.Bt.ne(l,l<s?1:-1)).vs,position:r.position,shape:r.shape,color:r.color,id:r.id,Xh:a,text:r.text,size:r.size}})}},t.prototype.ke=function(){switch(this.Ri=new Pr(this,this.jt()),this.ge){case"Bar":this.Hi=new cr(this,this.jt());break;case"Candlestick":this.Hi=new dr(this,this.jt());break;case"Line":this.Hi=new Sr(this,this.jt());break;case"Area":this.Hi=new lr(this,this.jt());break;case"Baseline":this.Hi=new pr(this,this.jt());break;case"Histogram":this.Hi=new vr(this,this.jt());break;default:throw Error("Unknown chart style assigned: "+this.ge)}},t}(Dr),$r=function(){function n(t){this.zi=t}return n.prototype.Je=function(t,e,o){var s=t;if(0===this.zi.mode)return s;var r=o.ji(),a=r.kt();if(null===a)return s;var l=r.xt(t,a),h=o.Ge().filter(function(u){return u instanceof Ae}).reduce(function(u,_){if(o.lh(_)||!_.yt())return u;var f=_.Ct(),d=_.an();if(f.wi()||!d.Uh(e))return u;var p=d.Kr(e);if(null===p)return u;var m=yt(_.kt());return u.concat([f.xt(p.St[3],m.St)])},[]);return 0===h.length?s:(h.sort(function(u,_){return Math.abs(u-l)-Math.abs(_-l)}),r.qi(h[0],a))},n}(),Fr=function(){function n(){this.Bt=null}return n.prototype.Z=function(t){this.Bt=t},n.prototype.H=function(t,e,o,s){var c,r=this;if(null!==this.Bt){var a=Math.max(1,Math.floor(e));t.lineWidth=a;var l=Math.ceil(this.Bt.Ot*e),h=Math.ceil(this.Bt.Ft*e);(c=t).save(),c.lineWidth%2&&c.translate(.5,.5),function(){var c=S(r.Bt);if(c.Qe){t.strokeStyle=c.tu,st(t,c.iu),t.beginPath();for(var u=0,_=c.nu;u<_.length;u++){var d=Math.round(_[u].su*e);t.moveTo(d,-a),t.lineTo(d,l+a)}t.stroke()}if(c.hu){t.strokeStyle=c.ru,st(t,c.eu),t.beginPath();for(var p=0,m=c.uu;p<m.length;p++){var v=Math.round(m[p].su*e);t.moveTo(-a,v),t.lineTo(h+a,v)}t.stroke()}}(),c.restore()}},n}(),zr=function(){function n(t){this.zt=new Fr,this.ft=!0,this.Di=t}return n.prototype.vt=function(){this.ft=!0},n.prototype.dt=function(t,e){if(this.ft){var o=this.Di.jt().W().grid,s={Ot:t,Ft:e,hu:o.horzLines.visible,Qe:o.vertLines.visible,ru:o.horzLines.color,tu:o.vertLines.color,eu:o.horzLines.style,iu:o.vertLines.style,uu:this.Di.ji().au(),nu:this.Di.jt().bt().au()||[]};this.zt.Z(s),this.ft=!1}return this.zt},n}(),Ur=function(){function n(t){this.Hi=new zr(t)}return n.prototype.ou=function(){return this.Hi},n}(),xe={lu:4,fu:1e-4};function dt(n,t){var e=100*(n-t)/t;return t<0?-e:e}function Gr(n,t){var e=dt(n.pr(),t),o=dt(n.gr(),t);return new it(e,o)}function Bt(n,t){var e=100*(n-t)/t+100;return t<0?-e:e}function Jr(n,t){var e=Bt(n.pr(),t),o=Bt(n.gr(),t);return new it(e,o)}function Xt(n,t){var e=Math.abs(n);if(e<1e-15)return 0;var o=Si(e+t.fu)+t.lu;return n<0?-o:o}function wt(n,t){var e=Math.abs(n);if(e<1e-15)return 0;var o=Math.pow(10,e-t.lu)-t.fu;return n<0?-o:o}function Ot(n,t){if(null===n)return null;var e=Xt(n.pr(),t),o=Xt(n.gr(),t);return new it(e,o)}function Ht(n,t){if(null===n)return null;var e=wt(n.pr(),t),o=wt(n.gr(),t);return new it(e,o)}function Be(n){if(null===n)return xe;var t=Math.abs(n.gr()-n.pr());if(t>=1||t<1e-15)return xe;var e=Math.ceil(Math.abs(Math.log10(t))),o=xe.lu+e;return{lu:o,fu:1/Math.pow(10,o)}}var Ii,we=function(){function n(t,e){if(this.cu=t,this.vu=e,function(s){if(s<0)return!1;for(var r=s;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.cu))this._u=[2,2.5,2];else{this._u=[];for(var o=this.cu;1!==o;){if(o%2==0)this._u.push(2),o/=2;else{if(o%5!=0)throw new Error("unexpected base");this._u.push(2,2.5),o/=5}if(this._u.length>100)throw new Error("something wrong with base")}}}return n.prototype.du=function(t,e,o){for(var l=0===this.cu?0:1/this.cu,h=Math.pow(10,Math.max(0,Math.ceil(Si(t-e)))),c=0,u=this.vu[0];;){var _=Jt(h,l,1e-14)&&h>l+1e-14,f=Jt(h,o*u,1e-14),d=Jt(h,1,1e-14);if(!(_&&f&&d))break;h/=u,u=this.vu[++c%this.vu.length]}if(h<=l+1e-14&&(h=l),h=Math.max(1,h),this._u.length>0&&Math.abs(h-1)<1e-14)for(c=0,u=this._u[0];Jt(h,o*u,1e-14)&&h>l+1e-14;)h/=u,u=this._u[++c%this._u.length];return h},n}(),Ni=function(){function n(t,e,o,s){this.wu=[],this._i=t,this.cu=e,this.Mu=o,this.bu=s}return n.prototype.du=function(t,e){if(t<e)throw new Error("high < low");var o=this._i.Yt(),s=(t-e)*this.mu()/o,r=new we(this.cu,[2,2.5,2]),a=new we(this.cu,[2,2,2.5]),l=new we(this.cu,[2.5,2,2]),h=[];return h.push(r.du(t,e,s),a.du(t,e,s),l.du(t,e,s)),function(c){if(c.length<1)throw Error("array is empty");for(var u=c[0],_=1;_<c.length;++_)c[_]<u&&(u=c[_]);return u}(h)},n.prototype.pu=function(){var t=this._i,e=t.kt();if(null!==e){var o=t.Yt(),s=this.Mu(o-1,e),r=this.Mu(0,e),a=this._i.W().entireTextOnly?this.gu()/2:0,l=a,h=o-1-a,c=Math.max(s,r),u=Math.min(s,r);if(c!==u){for(var _=this.du(c,u),f=c%_,d=c>=u?1:-1,p=null,m=0,g=c-(f+=f<0?_:0);g>u;g-=_){var v=this.bu(g,e,!0);null!==p&&Math.abs(v-p)<this.mu()||v<l||v>h||(m<this.wu.length?(this.wu[m].su=v,this.wu[m].yu=t.ku(g)):this.wu.push({su:v,yu:t.ku(g)}),m++,p=v,t.Nu()&&(_=this.du(g*d,u)))}this.wu.length=m}else this.wu=[]}else this.wu=[]},n.prototype.au=function(){return this.wu},n.prototype.gu=function(){return this._i.S()},n.prototype.mu=function(){return Math.ceil(2.5*this.gu())},n}();function Pi(n){return n.slice().sort(function(t,e){return S(t.xi())-S(e.xi())})}!function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"}(Ii||(Ii={}));var Ei=new _i,ki=new Ut(100,1),Yr=function(){function n(t,e,o,s){this.xu=0,this.Cu=null,this.Tr=null,this.Su=null,this.Tu={Du:!1,Au:null},this.Bu=0,this.Lu=0,this.Eu=new Q,this.Fu=new Q,this.Ou=[],this.Vu=null,this.Pu=null,this.Wu=null,this.zu=null,this.Ue=ki,this.Ru=Be(null),this.Iu=t,this.zi=e,this.ju=o,this.qu=s,this.Uu=new Ni(this,100,this.Hu.bind(this),this.Yu.bind(this))}return n.prototype.Ke=function(){return this.Iu},n.prototype.W=function(){return this.zi},n.prototype.Pr=function(t){if(D(this.zi,t),this.Xe(),void 0!==t.mode&&this.$u({mh:t.mode}),void 0!==t.scaleMargins){var e=F(t.scaleMargins.top),o=F(t.scaleMargins.bottom);if(e<0||e>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(e));if(o<0||o>1||e+o>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(o));if(e+o>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(e+o));this.Ku(),this.Pu=null}},n.prototype.Xu=function(){return this.zi.autoScale},n.prototype.Nu=function(){return 1===this.zi.mode},n.prototype.vr=function(){return 2===this.zi.mode},n.prototype.Zu=function(){return 3===this.zi.mode},n.prototype.mh=function(){return{_n:this.zi.autoScale,Ju:this.zi.invertScale,mh:this.zi.mode}},n.prototype.$u=function(t){var e=this.mh(),o=null;void 0!==t._n&&(this.zi.autoScale=t._n),void 0!==t.mh&&(this.zi.mode=t.mh,2!==t.mh&&3!==t.mh||(this.zi.autoScale=!0),this.Tu.Du=!1),1===e.mh&&t.mh!==e.mh&&(function(r,a){if(null===r)return!1;var l=wt(r.pr(),a),h=wt(r.gr(),a);return isFinite(l)&&isFinite(h)}(this.Tr,this.Ru)?null!==(o=Ht(this.Tr,this.Ru))&&this.Gu(o):this.zi.autoScale=!0),1===t.mh&&t.mh!==e.mh&&null!==(o=Ot(this.Tr,this.Ru))&&this.Gu(o);var s=e.mh!==this.zi.mode;s&&(2===e.mh||this.vr())&&this.Xe(),s&&(3===e.mh||this.Zu())&&this.Xe(),void 0!==t.Ju&&e.Ju!==t.Ju&&(this.zi.invertScale=t.Ju,this.Qu()),this.Fu.m(e,this.mh())},n.prototype.ta=function(){return this.Fu},n.prototype.S=function(){return this.ju.fontSize},n.prototype.Yt=function(){return this.xu},n.prototype.ia=function(t){this.xu!==t&&(this.xu=t,this.Ku(),this.Pu=null)},n.prototype.na=function(){if(this.Cu)return this.Cu;var t=this.Yt()-this.sa()-this.ha();return this.Cu=t,t},n.prototype.Ar=function(){return this.ra(),this.Tr},n.prototype.Gu=function(t,e){var o=this.Tr;(e||null===o&&null!==t||null!==o&&!o.br(t))&&(this.Pu=null,this.Tr=t)},n.prototype.wi=function(){return this.ra(),0===this.xu||!this.Tr||this.Tr.wi()},n.prototype.ea=function(t){return this.Ju()?t:this.Yt()-1-t},n.prototype.xt=function(t,e){return this.vr()?t=dt(t,e):this.Zu()&&(t=Bt(t,e)),this.Yu(t,e)},n.prototype.us=function(t,e,o){this.ra();for(var s=this.ha(),r=S(this.Ar()),a=r.pr(),l=r.gr(),h=this.na()-1,c=this.Ju(),u=h/(l-a),_=void 0===o?0:o.from,f=void 0===o?t.length:o.to,d=this.ua(),p=_;p<f;p++){var m=t[p],g=m.et;if(!isNaN(g)){var v=g;null!==d&&(v=d(m.et,e));var C=s+u*(v-a);m.it=c?C:this.xu-1-C}}},n.prototype.Ss=function(t,e,o){this.ra();for(var s=this.ha(),r=S(this.Ar()),a=r.pr(),l=r.gr(),h=this.na()-1,c=this.Ju(),u=h/(l-a),_=void 0===o?0:o.from,f=void 0===o?t.length:o.to,d=this.ua(),p=_;p<f;p++){var m=t[p],g=m.open,v=m.high,C=m.low,M=m.close;null!==d&&(g=d(m.open,e),v=d(m.high,e),C=d(m.low,e),M=d(m.close,e));var O=s+u*(g-a),k=c?O:this.xu-1-O;m.xs=k,O=s+u*(v-a),m.ys=k=c?O:this.xu-1-O,O=s+u*(C-a),m.ks=k=c?O:this.xu-1-O,O=s+u*(M-a),m.Cs=k=c?O:this.xu-1-O}},n.prototype.qi=function(t,e){var o=this.Hu(t,e);return this.aa(o,e)},n.prototype.aa=function(t,e){var s,r,o=t;return this.vr()?(s=o,(r=e)<0&&(s=-s),o=s/100*r+r):this.Zu()&&(o=function(s,r){return s-=100,r<0&&(s=-s),s/100*r+r}(o,e)),o},n.prototype.Ge=function(){return this.Ou},n.prototype.oa=function(){if(this.Vu)return this.Vu;for(var t=[],e=0;e<this.Ou.length;e++){var o=this.Ou[e];null===o.xi()&&o.Ci(e+1),t.push(o)}return t=Pi(t),this.Vu=t,this.Vu},n.prototype.la=function(t){-1===this.Ou.indexOf(t)&&(this.Ou.push(t),this.Xe(),this.fa())},n.prototype.ca=function(t){var e=this.Ou.indexOf(t);if(-1===e)throw new Error("source is not attached to scale");this.Ou.splice(e,1),0===this.Ou.length&&(this.$u({_n:!0}),this.Gu(null)),this.Xe(),this.fa()},n.prototype.kt=function(){for(var t=null,e=0,o=this.Ou;e<o.length;e++){var s=o[e].kt();null!==s&&(null===t||s.Ve<t.Ve)&&(t=s)}return null===t?null:t.St},n.prototype.Ju=function(){return this.zi.invertScale},n.prototype.au=function(){var t=null===this.kt();if(null!==this.Pu&&(t||this.Pu.va===t))return this.Pu.au;this.Uu.pu();var e=this.Uu.au();return this.Pu={au:e,va:t},this.Eu.m(),e},n.prototype._a=function(){return this.Eu},n.prototype.da=function(t){this.vr()||this.Zu()||null===this.Wu&&null===this.Su&&(this.wi()||(this.Wu=this.xu-t,this.Su=S(this.Ar()).mr()))},n.prototype.wa=function(t){if(!this.vr()&&!this.Zu()&&null!==this.Wu){this.$u({_n:!1}),(t=this.xu-t)<0&&(t=0);var e=(this.Wu+.2*(this.xu-1))/(t+.2*(this.xu-1)),o=S(this.Su).mr();e=Math.max(e,.1),o.kr(e),this.Gu(o)}},n.prototype.Ma=function(){this.vr()||this.Zu()||(this.Wu=null,this.Su=null)},n.prototype.ba=function(t){this.Xu()||null===this.zu&&null===this.Su&&(this.wi()||(this.zu=t,this.Su=S(this.Ar()).mr()))},n.prototype.ma=function(t){if(!this.Xu()&&null!==this.zu){var e=S(this.Ar()).yr()/(this.na()-1),o=t-this.zu;this.Ju()&&(o*=-1);var s=o*e,r=S(this.Su).mr();r.Nr(s),this.Gu(r,!0),this.Pu=null}},n.prototype.pa=function(){this.Xu()||null!==this.zu&&(this.zu=null,this.Su=null)},n.prototype.qe=function(){return this.Ue||this.Xe(),this.Ue},n.prototype.Mi=function(t,e){switch(this.zi.mode){case 2:return this.qe().format(dt(t,e));case 3:return this.qe().format(Bt(t,e));default:return this.ga(t)}},n.prototype.ku=function(t){switch(this.zi.mode){case 2:case 3:return this.qe().format(t);default:return this.ga(t)}},n.prototype.Fr=function(t){return this.ga(t,S(this.ya()).qe())},n.prototype.Ne=function(t,e){return t=dt(t,e),Ei.format(t)},n.prototype.ka=function(){return this.Ou},n.prototype.Na=function(t){this.Tu={Au:t,Du:!1}},n.prototype.hn=function(){this.Ou.forEach(function(t){return t.hn()})},n.prototype.Xe=function(){this.Pu=null;var t=this.ya(),e=100;null!==t&&(e=Math.round(1/t.je())),this.Ue=ki,this.vr()?(this.Ue=Ei,e=100):this.Zu()?(this.Ue=new Ut(100,1),e=100):null!==t&&(this.Ue=t.qe()),this.Uu=new Ni(this,e,this.Hu.bind(this),this.Yu.bind(this)),this.Uu.pu()},n.prototype.fa=function(){this.Vu=null},n.prototype.ya=function(){return this.Ou[0]||null},n.prototype.sa=function(){return this.Ju()?this.zi.scaleMargins.bottom*this.Yt()+this.Lu:this.zi.scaleMargins.top*this.Yt()+this.Bu},n.prototype.ha=function(){return this.Ju()?this.zi.scaleMargins.top*this.Yt()+this.Bu:this.zi.scaleMargins.bottom*this.Yt()+this.Lu},n.prototype.ra=function(){this.Tu.Du||(this.Tu.Du=!0,this.xa())},n.prototype.Ku=function(){this.Cu=null},n.prototype.Yu=function(t,e){if(this.ra(),this.wi())return 0;t=this.Nu()&&t?Xt(t,this.Ru):t;var o=S(this.Ar()),s=this.ha()+(this.na()-1)*(t-o.pr())/o.yr();return this.ea(s)},n.prototype.Hu=function(t,e){if(this.ra(),this.wi())return 0;var o=this.ea(t),s=S(this.Ar()),r=s.pr()+s.yr()*((o-this.ha())/(this.na()-1));return this.Nu()?wt(r,this.Ru):r},n.prototype.Qu=function(){this.Pu=null,this.Uu.pu()},n.prototype.xa=function(){var t=this.Tu.Au;if(null!==t){for(var e,o,s=null,r=0,a=0,l=0,h=this.ka();l<h.length;l++){var c=h[l];if(c.yt()){var u=c.kt();if(null!==u){var _=c.Re(t.In(),t.jn()),f=_&&_.Ar();if(null!==f){switch(this.zi.mode){case 1:f=Ot(f,this.Ru);break;case 2:f=Gr(f,u.St);break;case 3:f=Jr(f,u.St)}if(s=null===s?f:s.Nn(S(f)),null!==_){var d=_.Br();null!==d&&(r=Math.max(r,d.above),a=Math.max(r,d.below))}}}}}if(r===this.Bu&&a===this.Lu||(this.Bu=r,this.Lu=a,this.Pu=null,this.Ku()),null!==s){if(s.pr()===s.gr()){var p=this.ya(),m=5*(null===p||this.vr()||this.Zu()?1:p.je());this.Nu()&&(s=Ht(s,this.Ru)),s=new it(s.pr()-m,s.gr()+m),this.Nu()&&(s=Ot(s,this.Ru))}if(this.Nu()){var g=Ht(s,this.Ru),v=Be(g);if((e=v).lu!==(o=this.Ru).lu||e.fu!==o.fu){var C=null!==this.Su?Ht(this.Su,this.Ru):null;this.Ru=v,s=Ot(g,v),null!==C&&(this.Su=Ot(C,v))}}this.Gu(s)}else null===this.Tr&&(this.Gu(new it(-.5,.5)),this.Ru=Be(null));this.Tu.Du=!0}},n.prototype.ua=function(){var t=this;return this.vr()?dt:this.Zu()?Bt:this.Nu()?function(e){return Xt(e,t.Ru)}:null},n.prototype.ga=function(t,e){return void 0===this.qu.priceFormatter?(void 0===e&&(e=this.qe()),e.format(t)):this.qu.priceFormatter(t)},n}(),Xr=function(){function n(t,e){this.Ou=[],this.Ca=new Map,this.xu=0,this.hh=0,this.Sa=1e3,this.Vu=null,this.Ta=new Q,this.Da=t,this.pi=e,this.Aa=new Ur(this);var o=e.W();this.Ba=this.La("left",o.leftPriceScale),this.Ea=this.La("right",o.rightPriceScale),this.Ba.ta().u(this.Fa.bind(this,this.Ba),this),this.Ea.ta().u(this.Fa.bind(this,this.Ba),this),this.Oa(o)}return n.prototype.Oa=function(t){if(t.leftPriceScale&&this.Ba.Pr(t.leftPriceScale),t.rightPriceScale&&this.Ea.Pr(t.rightPriceScale),t.localization&&(this.Ba.Xe(),this.Ea.Xe()),t.overlayPriceScales)for(var e=0,o=Array.from(this.Ca.values());e<o.length;e++){var s=S(o[e][0].Ct());s.Pr(t.overlayPriceScales),t.localization&&s.Xe()}},n.prototype.Va=function(t){switch(t){case"left":return this.Ba;case"right":return this.Ea}return this.Ca.has(t)?F(this.Ca.get(t))[0].Ct():null},n.prototype.g=function(){this.jt().Pa().M(this),this.Ba.ta().M(this),this.Ea.ta().M(this),this.Ou.forEach(function(t){t.g&&t.g()}),this.Ta.m()},n.prototype.Wa=function(){return this.Sa},n.prototype.za=function(t){this.Sa=t},n.prototype.jt=function(){return this.pi},n.prototype.Ht=function(){return this.hh},n.prototype.Yt=function(){return this.xu},n.prototype.Ra=function(t){this.hh=t,this.Ia()},n.prototype.ia=function(t){var e=this;this.xu=t,this.Ba.ia(t),this.Ea.ia(t),this.Ou.forEach(function(o){if(e.lh(o)){var s=o.Ct();null!==s&&s.ia(t)}}),this.Ia()},n.prototype.Ge=function(){return this.Ou},n.prototype.lh=function(t){var e=t.Ct();return null===e||this.Ba!==e&&this.Ea!==e},n.prototype.la=function(t,e,o){var s=void 0!==o?o:this.qa().ja+1;this.Ua(t,e,s)},n.prototype.ca=function(t){var e=this.Ou.indexOf(t);_t(-1!==e,"removeDataSource: invalid data source"),this.Ou.splice(e,1);var o=S(t.Ct()).Ke();if(this.Ca.has(o)){var s=F(this.Ca.get(o)),r=s.indexOf(t);-1!==r&&(s.splice(r,1),0===s.length&&this.Ca.delete(o))}var a=t.Ct();a&&a.Ge().indexOf(t)>=0&&a.ca(t),null!==a&&(a.fa(),this.Ha(a)),this.Vu=null},n.prototype._h=function(t){return t===this.Ba?"left":t===this.Ea?"right":"overlay"},n.prototype.Ya=function(){return this.Ba},n.prototype.$a=function(){return this.Ea},n.prototype.Ka=function(t,e){t.da(e)},n.prototype.Xa=function(t,e){t.wa(e),this.Ia()},n.prototype.Za=function(t){t.Ma()},n.prototype.Ja=function(t,e){t.ba(e)},n.prototype.Ga=function(t,e){t.ma(e),this.Ia()},n.prototype.Qa=function(t){t.pa()},n.prototype.Ia=function(){this.Ou.forEach(function(t){t.hn()})},n.prototype.ji=function(){var t=null;return this.pi.W().rightPriceScale.visible&&0!==this.Ea.Ge().length?t=this.Ea:this.pi.W().leftPriceScale.visible&&0!==this.Ba.Ge().length?t=this.Ba:0!==this.Ou.length&&(t=this.Ou[0].Ct()),null===t&&(t=this.Ea),t},n.prototype.fh=function(){var t=null;return this.pi.W().rightPriceScale.visible?t=this.Ea:this.pi.W().leftPriceScale.visible&&(t=this.Ba),t},n.prototype.Ha=function(t){null!==t&&t.Xu()&&this.io(t)},n.prototype.no=function(t){var e=this.Da.ss();t.$u({_n:!0}),null!==e&&t.Na(e),this.Ia()},n.prototype.so=function(){this.io(this.Ba),this.io(this.Ea)},n.prototype.ho=function(){var t=this;this.Ha(this.Ba),this.Ha(this.Ea),this.Ou.forEach(function(e){t.lh(e)&&t.Ha(e.Ct())}),this.Ia(),this.pi.Wr()},n.prototype.oa=function(){return null===this.Vu&&(this.Vu=Pi(this.Ou)),this.Vu},n.prototype.ro=function(){return this.Ta},n.prototype.eo=function(){return this.Aa},n.prototype.io=function(t){var e=t.ka();if(e&&e.length>0&&!this.Da.wi()){var o=this.Da.ss();null!==o&&t.Na(o)}t.hn()},n.prototype.qa=function(){var t=this.oa();if(0===t.length)return{uo:0,ja:0};for(var e=0,o=0,s=0;s<t.length;s++){var r=t[s].xi();null!==r&&(r<e&&(e=r),r>o&&(o=r))}return{uo:e,ja:o}},n.prototype.Ua=function(t,e,o){var s=this.Va(e);if(null===s&&(s=this.La(e,this.pi.W().overlayPriceScales)),this.Ou.push(t),!zt(e)){var r=this.Ca.get(e)||[];r.push(t),this.Ca.set(e,r)}s.la(t),t.Si(s),t.Ci(o),this.Ha(s),this.Vu=null},n.prototype.Fa=function(t,e,o){e.mh!==o.mh&&this.io(t)},n.prototype.La=function(t,e){var o=A({visible:!0,autoScale:!0},q(e)),s=new Yr(t,o,this.pi.W().layout,this.pi.W().localization);return s.ia(this.Yt()),s},n}(),Ri=function(n){return n.getUTCFullYear()},Zi=function(){function n(t,e){void 0===t&&(t="yyyy-MM-dd"),void 0===e&&(e="default"),this.ao=t,this.oo=e}return n.prototype.lo=function(t){return function Hr(n,t,e){return t.replace(/yyyy/g,(o=n,et(Ri(o),4))).replace(/yy/g,function(o){return et(Ri(o)%100,2)}(n)).replace(/MMMM/g,function(o,s){return new Date(o.getUTCFullYear(),o.getUTCMonth(),1).toLocaleString(s,{month:"long"})}(n,e)).replace(/MMM/g,function(o,s){return new Date(o.getUTCFullYear(),o.getUTCMonth(),1).toLocaleString(s,{month:"short"})}(n,e)).replace(/MM/g,function(o){return et(o.getUTCMonth()+1,2)}(n)).replace(/dd/g,function(o){return et(o.getUTCDate(),2)}(n));var o}(t,this.ao,this.oo)},n}(),Wr=function(){function n(t){this.fo=t||"%h:%m:%s"}return n.prototype.lo=function(t){return this.fo.replace("%h",et(t.getUTCHours(),2)).replace("%m",et(t.getUTCMinutes(),2)).replace("%s",et(t.getUTCSeconds(),2))},n}(),Vr={co:"yyyy-MM-dd",vo:"%h:%m:%s",_o:" ",do:"default"},Kr=function(){function n(t){void 0===t&&(t={});var e=A(A({},Vr),t);this.wo=new Zi(e.co,e.do),this.Mo=new Wr(e.vo),this.bo=e._o}return n.prototype.lo=function(t){return"".concat(this.wo.lo(t)).concat(this.bo).concat(this.Mo.lo(t))},n}(),jr=function(){function n(t,e){void 0===e&&(e=50),this.mo=0,this.po=1,this.yo=1,this.Gs=new Map,this.ko=new Map,this.No=t,this.xo=e}return n.prototype.lo=function(t){var e=void 0===t.Co?new Date(1e3*t.So).getTime():new Date(Date.UTC(t.Co.year,t.Co.month-1,t.Co.day)).getTime(),o=this.Gs.get(e);if(void 0!==o)return o.To;if(this.mo===this.xo){var s=this.ko.get(this.yo);this.ko.delete(this.yo),this.Gs.delete(F(s)),this.yo++,this.mo--}var r=this.No(t);return this.Gs.set(e,{To:r,Do:this.po}),this.ko.set(this.po,e),this.mo++,this.po++,r},n}(),It=function(){function n(t,e){_t(t<=e,"right should be >= left"),this.Ao=t,this.Bo=e}return n.prototype.In=function(){return this.Ao},n.prototype.jn=function(){return this.Bo},n.prototype.Lo=function(){return this.Bo-this.Ao+1},n.prototype.Uh=function(t){return this.Ao<=t&&t<=this.Bo},n.prototype.br=function(t){return this.Ao===t.In()&&this.Bo===t.jn()},n}();function Qi(n,t){return null===n||null===t?n===t:n.br(t)}var Di,ta=function(){function n(){this.Eo=new Map,this.Gs=null}return n.prototype.Fo=function(t,e){this.Oo(e),this.Gs=null;for(var o=e;o<t.length;++o){var s=t[o],r=this.Eo.get(s.Vo);void 0===r&&this.Eo.set(s.Vo,r=[]),r.push({vs:o,rt:s.rt,Po:s.Vo})}},n.prototype.Wo=function(t,e){var o=Math.ceil(e/t);return null!==this.Gs&&this.Gs.zo===o||(this.Gs={au:this.Ro(o),zo:o}),this.Gs.au},n.prototype.Oo=function(t){if(0!==t){var e=[];this.Eo.forEach(function(a,l){t<=a[0].vs?e.push(l):a.splice(bt(a,t,function(h){return h.vs<t}),1/0)});for(var o=0,s=e;o<s.length;o++)this.Eo.delete(s[o])}else this.Eo.clear()},n.prototype.Ro=function(t){for(var e=[],o=0,s=Array.from(this.Eo.keys()).sort(function(C,M){return M-C});o<s.length;o++){var r=s[o];if(this.Eo.get(r)){var a=e;e=[];for(var l=a.length,h=0,c=F(this.Eo.get(r)),u=c.length,_=1/0,f=-1/0,d=0;d<u;d++){for(var p=c[d],m=p.vs;h<l;){var g=a[h],v=g.vs;if(!(v<m)){_=v;break}h++,e.push(g),f=v,_=1/0}_-m>=t&&m-f>=t&&(e.push(p),f=m)}for(;h<l;h++)e.push(a[h])}}return e},n}(),Wt=function(){function n(t){this.Io=t}return n.prototype.jo=function(){return null===this.Io?null:new It(Math.floor(this.Io.In()),Math.ceil(this.Io.jn()))},n.prototype.qo=function(){return this.Io},n.Uo=function(){return new n(null)},n}();!function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(Di||(Di={}));var Li,ea=function(){function n(t,e,o){this.hh=0,this.Ho=null,this.Yo=[],this.zu=null,this.Wu=null,this.$o=new ta,this.Ko=new Map,this.Xo=Wt.Uo(),this.Zo=!0,this.Jo=new Q,this.Go=new Q,this.Qo=new Q,this.tl=null,this.il=null,this.nl=[],this.zi=e,this.qu=o,this.sl=e.rightOffset,this.hl=e.barSpacing,this.pi=t,this.rl()}return n.prototype.W=function(){return this.zi},n.prototype.el=function(t){D(this.qu,t),this.ul(),this.rl()},n.prototype.Pr=function(t,e){var o;D(this.zi,t),this.zi.fixLeftEdge&&this.al(),this.zi.fixRightEdge&&this.ol(),void 0!==t.barSpacing&&this.pi.gn(t.barSpacing),void 0!==t.rightOffset&&this.pi.yn(t.rightOffset),void 0!==t.minBarSpacing&&this.pi.gn(null!==(o=t.barSpacing)&&void 0!==o?o:this.hl),this.ul(),this.rl(),this.Qo.m()},n.prototype.gi=function(t){var e;return(null===(e=this.Yo[t])||void 0===e?void 0:e.rt)||null},n.prototype.Ze=function(t,e){if(this.Yo.length<1)return null;if(t.So>this.Yo[this.Yo.length-1].rt.So)return e?this.Yo.length-1:null;var o=bt(this.Yo,t.So,function(s,r){return s.rt.So<r});return t.So<this.Yo[o].rt.So?e?o:null:o},n.prototype.wi=function(){return 0===this.hh||0===this.Yo.length||null===this.Ho},n.prototype.ss=function(){return this.ll(),this.Xo.jo()},n.prototype.fl=function(){return this.ll(),this.Xo.qo()},n.prototype.cl=function(){var t=this.ss();if(null===t)return null;var e={from:t.In(),to:t.jn()};return this.vl(e)},n.prototype.vl=function(t){var e=Math.round(t.from),o=Math.round(t.to),s=S(this._l()),r=S(this.dl());return{from:S(this.gi(Math.max(s,e))),to:S(this.gi(Math.min(r,o)))}},n.prototype.wl=function(t){return{from:S(this.Ze(t.from,!0)),to:S(this.Ze(t.to,!0))}},n.prototype.Ht=function(){return this.hh},n.prototype.Ra=function(t){if(isFinite(t)&&!(t<=0)&&this.hh!==t){if(this.zi.lockVisibleTimeRangeOnResize&&this.hh&&(this.hl=this.hl*t/this.hh),this.zi.fixLeftEdge){var o=this.ss();null!==o&&o.In()<=0&&(this.sl-=Math.round((this.hh-t)/this.hl)+1)}this.hh=t,this.Zo=!0,this.Ml(),this.bl()}},n.prototype.At=function(t){if(this.wi()||!Mt(t))return 0;var e=this.ml()+this.sl-t;return this.hh-(e+.5)*this.hl-1},n.prototype.es=function(t,e){for(var o=this.ml(),r=void 0===e?t.length:e.to,a=void 0===e?0:e.from;a<r;a++)t[a].tt=this.hh-(o+this.sl-t[a].rt+.5)*this.hl-1},n.prototype.pl=function(t){return Math.ceil(this.gl(t))},n.prototype.yn=function(t){this.Zo=!0,this.sl=t,this.bl(),this.pi.yl(),this.pi.Wr()},n.prototype.ws=function(){return this.hl},n.prototype.gn=function(t){this.kl(t),this.bl(),this.pi.yl(),this.pi.Wr()},n.prototype.Nl=function(){return this.sl},n.prototype.au=function(){if(this.wi())return null;if(null!==this.il)return this.il;for(var t=this.hl,e=5*(this.pi.W().layout.fontSize+4),o=Math.round(e/t),s=S(this.ss()),r=Math.max(s.In(),s.In()-o),a=Math.max(s.jn(),s.jn()-o),l=this.$o.Wo(t,e),h=this._l()+o,c=this.dl()-o,u=this.xl(),_=this.zi.fixLeftEdge||u,f=this.zi.fixRightEdge||u,d=0,p=0,m=l;p<m.length;p++){var g=m[p];if(r<=g.vs&&g.vs<=a){var v=void 0;d<this.nl.length?((v=this.nl[d]).su=this.At(g.vs),v.yu=this.Cl(g.rt,g.Po),v.Po=g.Po):(v={Sl:!1,su:this.At(g.vs),yu:this.Cl(g.rt,g.Po),Po:g.Po},this.nl.push(v)),v.Sl=!(this.hl>e/2&&!u)&&(_&&g.vs<=h||f&&g.vs>=c),d++}}return this.nl.length=d,this.il=this.nl,this.nl},n.prototype.Tl=function(){this.Zo=!0,this.gn(this.zi.barSpacing),this.yn(this.zi.rightOffset)},n.prototype.Dl=function(t){this.Zo=!0,this.Ho=t,this.bl(),this.al()},n.prototype.Al=function(t,e){var o=this.gl(t),s=this.ws();this.gn(s+e*(s/10)),this.zi.rightBarStaysOnScroll||this.yn(this.Nl()+(o-this.gl(t)))},n.prototype.da=function(t){this.zu&&this.pa(),null===this.Wu&&null===this.tl&&(this.wi()||(this.Wu=t,this.Bl()))},n.prototype.wa=function(t){if(null!==this.tl){var e=Gt(this.hh-t,0,this.hh),o=Gt(this.hh-S(this.Wu),0,this.hh);0!==e&&0!==o&&this.gn(this.tl.ws*e/o)}},n.prototype.Ma=function(){null!==this.Wu&&(this.Wu=null,this.Ll())},n.prototype.ba=function(t){null===this.zu&&null===this.tl&&(this.wi()||(this.zu=t,this.Bl()))},n.prototype.ma=function(t){if(null!==this.zu){var e=(this.zu-t)/this.ws();this.sl=S(this.tl).Nl+e,this.Zo=!0,this.bl()}},n.prototype.pa=function(){null!==this.zu&&(this.zu=null,this.Ll())},n.prototype.El=function(){this.Fl(this.zi.rightOffset)},n.prototype.Fl=function(t,e){var o=this;if(void 0===e&&(e=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var s=this.sl,r=performance.now(),a=function(){var l=(performance.now()-r)/e,h=l>=1;o.yn(h?t:s+(t-s)*l),h||setTimeout(a,20)};a()},n.prototype.vt=function(t,e){this.Zo=!0,this.Yo=t,this.$o.Fo(t,e),this.bl()},n.prototype.Ol=function(){return this.Jo},n.prototype.Vl=function(){return this.Go},n.prototype.Pl=function(){return this.Qo},n.prototype.ml=function(){return this.Ho||0},n.prototype.Wl=function(t){var e=t.Lo();this.kl(this.hh/e),this.sl=t.jn()-this.ml(),this.bl(),this.Zo=!0,this.pi.yl(),this.pi.Wr()},n.prototype.zl=function(){var t=this._l(),e=this.dl();null!==t&&null!==e&&this.Wl(new It(t,e+this.zi.rightOffset))},n.prototype.Rl=function(t){var e=new It(t.from,t.to);this.Wl(e)},n.prototype.yi=function(t){return void 0!==this.qu.timeFormatter?this.qu.timeFormatter(t.Co||t.So):this.Il.lo(new Date(1e3*t.So))},n.prototype.xl=function(){var t=this.pi.W(),e=t.handleScroll,o=t.handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||o.axisDoubleClickReset||o.axisPressedMouseMove.time||o.mouseWheel||o.pinch)},n.prototype._l=function(){return 0===this.Yo.length?null:0},n.prototype.dl=function(){return 0===this.Yo.length?null:this.Yo.length-1},n.prototype.jl=function(t){return(this.hh-1-t)/this.hl},n.prototype.gl=function(t){var e=this.jl(t),o=this.ml()+this.sl-e;return Math.round(1e6*o)/1e6},n.prototype.kl=function(t){var e=this.hl;this.hl=t,this.Ml(),e!==this.hl&&(this.Zo=!0,this.ql())},n.prototype.ll=function(){if(this.Zo)if(this.Zo=!1,this.wi())this.Ul(Wt.Uo());else{var t=this.ml(),o=this.sl+t,s=new It(o-this.hh/this.hl+1,o);this.Ul(new Wt(s))}},n.prototype.Ml=function(){var t=this.Hl();if(this.hl<t&&(this.hl=t,this.Zo=!0),0!==this.hh){var e=.5*this.hh;this.hl>e&&(this.hl=e,this.Zo=!0)}},n.prototype.Hl=function(){return this.zi.fixLeftEdge&&this.zi.fixRightEdge&&0!==this.Yo.length?this.hh/this.Yo.length:this.zi.minBarSpacing},n.prototype.bl=function(){var t=this.Yl();this.sl>t&&(this.sl=t,this.Zo=!0);var e=this.$l();null!==e&&this.sl<e&&(this.sl=e,this.Zo=!0)},n.prototype.$l=function(){var t=this._l(),e=this.Ho;return null===t||null===e?null:t-e-1+(this.zi.fixLeftEdge?this.hh/this.hl:Math.min(2,this.Yo.length))},n.prototype.Yl=function(){return this.zi.fixRightEdge?0:this.hh/this.hl-Math.min(2,this.Yo.length)},n.prototype.Bl=function(){this.tl={ws:this.ws(),Nl:this.Nl()}},n.prototype.Ll=function(){this.tl=null},n.prototype.Cl=function(t,e){var o=this,s=this.Ko.get(e);return void 0===s&&(s=new jr(function(r){return o.Kl(r,e)}),this.Ko.set(e,s)),s.lo(t)},n.prototype.Kl=function(t,e){var o,s=function(r,a,l){switch(r){case 0:case 10:return a?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e,this.zi.timeVisible,this.zi.secondsVisible);return void 0!==this.zi.tickMarkFormatter?this.zi.tickMarkFormatter(null!==(o=t.Co)&&void 0!==o?o:t.So,s,this.qu.locale):function(r,a,l){var h={};switch(a){case 0:h.year="numeric";break;case 1:h.month="short";break;case 2:h.day="numeric";break;case 3:h.hour12=!1,h.hour="2-digit",h.minute="2-digit";break;case 4:h.hour12=!1,h.hour="2-digit",h.minute="2-digit",h.second="2-digit"}var c=void 0===r.Co?new Date(1e3*r.So):new Date(Date.UTC(r.Co.year,r.Co.month-1,r.Co.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(l,h)}(t,s,this.qu.locale)},n.prototype.Ul=function(t){var e=this.Xo;this.Xo=t,Qi(e.jo(),this.Xo.jo())||this.Jo.m(),Qi(e.qo(),this.Xo.qo())||this.Go.m(),this.ql()},n.prototype.ql=function(){this.il=null},n.prototype.ul=function(){this.ql(),this.Ko.clear()},n.prototype.rl=function(){var t=this.qu.dateFormat;this.Il=this.zi.timeVisible?new Kr({co:t,vo:this.zi.secondsVisible?"%h:%m:%s":"%h:%m",_o:"   ",do:this.qu.locale}):new Zi(t,this.qu.locale)},n.prototype.al=function(){if(this.zi.fixLeftEdge){var t=this._l();if(null!==t){var e=this.ss();if(null!==e){var o=e.In()-t;o<0&&this.yn(this.sl-o-1),this.Ml()}}}},n.prototype.ol=function(){this.bl(),this.Ml()},n}(),ia=function(n){function t(e){var o=n.call(this)||this;return o.Xl=new Map,o.Bt=e,o}return b(t,n),t.prototype.Y=function(e){},t.prototype.K=function(e){if(this.Bt.yt){e.save();for(var o=0,s=0,r=this.Bt.Zl;s<r.length;s++)if(0!==(u=r[s]).Gt.length){e.font=u.T;var a=this.Jl(e,u.Gt);u.Al=a>this.Bt.Ht?this.Bt.Ht/a:1,o+=u.Gl*u.Al}var l=0;switch(this.Bt.Ql){case"top":l=0;break;case"center":l=Math.max((this.Bt.Yt-o)/2,0);break;case"bottom":l=Math.max(this.Bt.Yt-o,0)}e.fillStyle=this.Bt.A;for(var h=0,c=this.Bt.Zl;h<c.length;h++){var u=c[h];e.save();var _=0;switch(this.Bt.tf){case"left":e.textAlign="left",_=u.Gl/2;break;case"center":e.textAlign="center",_=this.Bt.Ht/2;break;case"right":e.textAlign="right",_=this.Bt.Ht-1-u.Gl/2}e.translate(_,l),e.textBaseline="top",e.font=u.T,e.scale(u.Al,u.Al),e.fillText(u.Gt,0,u.if),e.restore(),l+=u.Gl*u.Al}e.restore()}},t.prototype.Jl=function(e,o){var s=this.nf(e.font),r=s.get(o);return void 0===r&&(r=e.measureText(o).width,s.set(o,r)),r},t.prototype.nf=function(e){var o=this.Xl.get(e);return void 0===o&&this.Xl.set(e,o=new Map),o},t}(Ct),na=function(){function n(t){this.ft=!0,this.Wt={yt:!1,A:"",Yt:0,Ht:0,Zl:[],Ql:"center",tf:"center"},this.zt=new ia(this.Wt),this.Rt=t}return n.prototype.vt=function(){this.ft=!0},n.prototype.dt=function(t,e){return this.ft&&(this.wt(t,e),this.ft=!1),this.zt},n.prototype.wt=function(t,e){var o=this.Rt.W(),s=this.Wt;s.yt=o.visible,s.yt&&(s.A=o.color,s.Ht=e,s.Yt=t,s.tf=o.horzAlign,s.Ql=o.vertAlign,s.Zl=[{Gt:o.text,T:rt(o.fontSize,o.fontFamily,o.fontStyle),Gl:1.2*o.fontSize,if:0,Al:0}])},n}(),oa=function(n){function t(e,o){var s=n.call(this)||this;return s.zi=o,s.Hi=new na(s),s}return b(t,n),t.prototype.nn=function(){return[]},t.prototype.tn=function(){return[this.Hi]},t.prototype.W=function(){return this.zi},t.prototype.hn=function(){this.Hi.vt()},t}(Se);!function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"}(Li||(Li={}));var qi,$i,Fi,sa=function(){function n(t,e){this.sf=[],this.hf=[],this.hh=0,this.rf=null,this.ef=null,this.uf=new Q,this.af=new Q,this.lf=null,this.ff=t,this.zi=e,this.cf=new Gs(this),this.Da=new ea(this,e.timeScale,this.zi.localization),this.ct=new nr(this,e.crosshair),this.vf=new $r(e.crosshair),this._f=new oa(this,e.watermark),this.df(),this.sf[0].za(2e3),this.wf=this.Mf(0),this.bf=this.Mf(1)}return n.prototype.Ce=function(){this.mf(new U(3))},n.prototype.Wr=function(){this.mf(new U(2))},n.prototype.We=function(){this.mf(new U(1))},n.prototype.Se=function(t){var e=this.pf(t);this.mf(e)},n.prototype.gf=function(){return this.ef},n.prototype.yf=function(t){var e=this.ef;this.ef=t,null!==e&&this.Se(e.kf),null!==t&&this.Se(t.kf)},n.prototype.W=function(){return this.zi},n.prototype.Pr=function(t){D(this.zi,t),this.sf.forEach(function(e){return e.Oa(t)}),void 0!==t.timeScale&&this.Da.Pr(t.timeScale),void 0!==t.localization&&this.Da.el(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.uf.m(),this.wf=this.Mf(0),this.bf=this.Mf(1),this.Ce()},n.prototype.Nf=function(t,e){if("left"!==t)if("right"!==t){var o=this.xf(t);null!==o&&(o.Ct.Pr(e),this.uf.m())}else this.Pr({rightPriceScale:e});else this.Pr({leftPriceScale:e})},n.prototype.xf=function(t){for(var e=0,o=this.sf;e<o.length;e++){var s=o[e],r=s.Va(t);if(null!==r)return{It:s,Ct:r}}return null},n.prototype.bt=function(){return this.Da},n.prototype.Cf=function(){return this.sf},n.prototype.Sf=function(){return this._f},n.prototype.Tf=function(){return this.ct},n.prototype.Df=function(){return this.af},n.prototype.Af=function(t,e){t.ia(e),this.yl()},n.prototype.Ra=function(t){this.hh=t,this.Da.Ra(this.hh),this.sf.forEach(function(e){return e.Ra(t)}),this.yl()},n.prototype.df=function(t){var e=new Xr(this.Da,this);void 0!==t?this.sf.splice(t,0,e):this.sf.push(e);var o=void 0===t?this.sf.length-1:t,s=new U(3);return s.cn(o,{vn:0,_n:!0}),this.mf(s),e},n.prototype.Ka=function(t,e,o){t.Ka(e,o)},n.prototype.Xa=function(t,e,o){t.Xa(e,o),this.Te(),this.mf(this.Bf(t,2))},n.prototype.Za=function(t,e){t.Za(e),this.mf(this.Bf(t,2))},n.prototype.Ja=function(t,e,o){e.Xu()||t.Ja(e,o)},n.prototype.Ga=function(t,e,o){e.Xu()||(t.Ga(e,o),this.Te(),this.mf(this.Bf(t,2)))},n.prototype.Qa=function(t,e){e.Xu()||(t.Qa(e),this.mf(this.Bf(t,2)))},n.prototype.no=function(t,e){t.no(e),this.mf(this.Bf(t,2))},n.prototype.Lf=function(t){this.Da.da(t)},n.prototype.Ef=function(t,e){var o=this.bt();if(!o.wi()&&0!==e){var s=o.Ht();t=Math.max(1,Math.min(t,s)),o.Al(t,e),this.yl()}},n.prototype.Ff=function(t){this.Of(0),this.Vf(t),this.Pf()},n.prototype.Wf=function(t){this.Da.wa(t),this.yl()},n.prototype.zf=function(){this.Da.Ma(),this.Wr()},n.prototype.Of=function(t){this.rf=t,this.Da.ba(t)},n.prototype.Vf=function(t){var e=!1;return null!==this.rf&&Math.abs(t-this.rf)>20&&(this.rf=null,e=!0),this.Da.ma(t),this.yl(),e},n.prototype.Pf=function(){this.Da.pa(),this.Wr(),this.rf=null},n.prototype._t=function(){return this.hf},n.prototype.Rf=function(t,e,o){this.ct.Yi(t,e);var s=NaN,r=this.Da.pl(t),a=this.Da.ss();null!==a&&(r=Math.min(Math.max(a.In(),r),a.jn()));var l=o.ji(),h=l.kt();null!==h&&(s=l.qi(e,h)),s=this.vf.Je(s,r,o),this.ct.Zi(r,s,o),this.We(),this.af.m(this.ct.Mt(),{x:t,y:e})},n.prototype.If=function(){this.Tf().Gi(),this.We(),this.af.m(null,null)},n.prototype.Te=function(){var t=this.ct.It();if(null!==t){var e=this.ct.Ki(),o=this.ct.Xi();this.Rf(e,o,t)}this.ct.hn()},n.prototype.jf=function(t,e,o){var s=this.Da.gi(0);void 0!==e&&void 0!==o&&this.Da.vt(e,o);var r=this.Da.gi(0),a=this.Da.ml(),l=this.Da.ss();if(null!==l&&null!==s&&null!==r){var h=l.Uh(a),u=null!==t&&t>a&&!(s.So>r.So),_=h&&this.Da.W().shiftVisibleRangeOnNewBar;if(u&&!_){var f=t-a;this.Da.yn(this.Da.Nl()-f)}}this.Da.Dl(t)},n.prototype.Be=function(t){null!==t&&t.ho()},n.prototype.oh=function(t){var e=this.sf.find(function(o){return o.oa().includes(t)});return void 0===e?null:e},n.prototype.yl=function(){this._f.hn(),this.sf.forEach(function(t){return t.ho()}),this.Te()},n.prototype.g=function(){this.sf.forEach(function(t){return t.g()}),this.sf.length=0,this.zi.localization.priceFormatter=void 0,this.zi.localization.timeFormatter=void 0},n.prototype.qf=function(){return this.cf},n.prototype.dh=function(){return this.cf.W()},n.prototype.Pa=function(){return this.uf},n.prototype.Uf=function(t,e){var s=this.Hf(e,t,this.sf[0]);return this.hf.push(s),1===this.hf.length?this.Ce():this.Wr(),s},n.prototype.Yf=function(t){var e=this.oh(t),o=this.hf.indexOf(t);_t(-1!==o,"Series not found"),this.hf.splice(o,1),S(e).ca(t),t.g&&t.g()},n.prototype.xe=function(t,e){var o=S(this.oh(t));o.ca(t);var s=this.xf(e);if(null===s){var r=t.xi();o.la(t,e,r)}else r=s.It===o?t.xi():void 0,s.It.la(t,e,r)},n.prototype.zl=function(){var t=new U(2);t.Mn(),this.mf(t)},n.prototype.$f=function(t){var e=new U(2);e.mn(t),this.mf(e)},n.prototype.pn=function(){var t=new U(2);t.pn(),this.mf(t)},n.prototype.gn=function(t){var e=new U(2);e.gn(t),this.mf(e)},n.prototype.yn=function(t){var e=new U(2);e.yn(t),this.mf(e)},n.prototype.Kf=function(){return this.zi.rightPriceScale.visible?"right":"left"},n.prototype.Xf=function(){return this.bf},n.prototype.Zf=function(){return this.wf},n.prototype.Dt=function(t){var e=this.bf,o=this.wf;if(e===o)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.lf||this.lf.Pn!==o||this.lf.Wn!==e)this.lf={Pn:o,Wn:e,Jf:new Map};else{var s=this.lf.Jf.get(t);if(void 0!==s)return s}var l,h,c,u,_,f,d,p,g,v,C,M,r=(l=e,h=t/100,u=(c=Qt(o))[0],_=c[1],f=c[2],d=c[3],g=(p=Qt(l))[1],v=p[2],C=p[3],M=[z(u+h*(p[0]-u)),z(_+h*(g-_)),z(f+h*(v-f)),ai(d+h*(C-d))],"rgba(".concat(M[0],", ").concat(M[1],", ").concat(M[2],", ").concat(M[3],")"));return this.lf.Jf.set(t,r),r},n.prototype.Bf=function(t,e){var o=new U(e);if(null!==t){var s=this.sf.indexOf(t);o.cn(s,{vn:e})}return o},n.prototype.pf=function(t,e){return void 0===e&&(e=2),this.Bf(this.oh(t),e)},n.prototype.mf=function(t){this.ff&&this.ff(t),this.sf.forEach(function(e){return e.eo().ou().vt()})},n.prototype.Hf=function(t,e,o){var s=new Ae(this,t,e),r=void 0!==t.priceScaleId?t.priceScaleId:this.Kf();return o.la(s,r),zt(r)||s.Pr(t),s},n.prototype.Mf=function(t){var e=this.zi.layout;return"gradient"===e.background.type?0===t?e.background.topColor:e.background.bottomColor:e.background.color},n}();function zi(n){void 0!==n.borderColor&&(n.borderUpColor=n.borderColor,n.borderDownColor=n.borderColor),void 0!==n.wickColor&&(n.wickUpColor=n.wickColor,n.wickDownColor=n.wickColor)}function Vt(n){return!H(n)&&!de(n)}function Ui(n){return H(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(qi||(qi={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}($i||($i={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(Fi||(Fi={}));var L=function(){function n(t,e){this.Ft=t,this.Ot=e}return n.prototype.br=function(t){return this.Ft===t.Ft&&this.Ot===t.Ot},n}();function Kt(n){return n.ownerDocument&&n.ownerDocument.defaultView&&n.ownerDocument.defaultView.devicePixelRatio||1}function V(n){var t=S(n.getContext("2d"));return t.setTransform(1,0,0,1,0,0),t}function Gi(n,t){var e=n.createElement("canvas"),o=Kt(e);return e.style.width="".concat(t.Ft,"px"),e.style.height="".concat(t.Ot,"px"),e.width=t.Ft*o,e.height=t.Ot*o,e}function at(n,t){var e=S(n.ownerDocument).createElement("canvas");n.appendChild(e);var o=function Ds(n,t){return void 0===t&&(t=Qs),new Ls(n,t)}(e,{allowDownsampling:!1});return o.resizeCanvas({width:t.Ft,height:t.Ot}),o}function Oe(n,t){return n.Gf-t.Gf}function Ie(n,t,e){var o=(n.Gf-t.Gf)/(n.rt-t.rt);return Math.sign(o)*Math.min(Math.abs(o),e)}var ra=function(){function n(t,e,o,s){this.Qf=null,this.tc=null,this.ic=null,this.nc=null,this.sc=null,this.hc=0,this.rc=0,this.ec=!1,this.uc=t,this.ac=e,this.oc=o,this.Cn=s}return n.prototype.lc=function(t,e){if(null!==this.Qf){if(this.Qf.rt===e)return void(this.Qf.Gf=t);if(Math.abs(this.Qf.Gf-t)<this.Cn)return}this.nc=this.ic,this.ic=this.tc,this.tc=this.Qf,this.Qf={rt:e,Gf:t}},n.prototype.xh=function(t,e){if(null!==this.Qf&&null!==this.tc&&!(e-this.Qf.rt>50)){var o=0,s=Ie(this.Qf,this.tc,this.ac),r=Oe(this.Qf,this.tc),a=[s],l=[r];if(o+=r,null!==this.ic){var h=Ie(this.tc,this.ic,this.ac);if(Math.sign(h)===Math.sign(s)){var c=Oe(this.tc,this.ic);if(a.push(h),l.push(c),o+=c,null!==this.nc){var u=Ie(this.ic,this.nc,this.ac);if(Math.sign(u)===Math.sign(s)){var _=Oe(this.ic,this.nc);a.push(u),l.push(_),o+=_}}}}for(var f,p,m=0,g=0;g<a.length;++g)m+=l[g]/o*a[g];Math.abs(m)<this.uc||(this.sc={Gf:t,rt:e},this.rc=m,this.hc=(f=Math.abs(m),p=Math.log(this.oc),Math.log(1*p/-f)/p))}},n.prototype.fc=function(t){var e=S(this.sc);return e.Gf+this.rc*(Math.pow(this.oc,t-e.rt)-1)/Math.log(this.oc)},n.prototype.cc=function(t){return null===this.sc||this.vc(t)===this.hc},n.prototype._c=function(){return this.ec},n.prototype.dc=function(){this.ec=!0},n.prototype.vc=function(t){var e=t-S(this.sc).rt;return Math.min(e,this.hc)},n}(),jt=typeof window<"u";function Ji(){return!!jt&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Ne(){return!!jt&&/iPhone|iPad|iPod/.test(window.navigator.platform)}var Pe=function(){function n(t,e,o){var s=this;this.wc=0,this.Mc=null,this.bc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY},this.mc=0,this.gc=null,this.yc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY},this.kc=null,this.Nc=!1,this.xc=null,this.Cc=null,this.Sc=!1,this.Tc=!1,this.Dc=!1,this.Ac=null,this.Bc=null,this.Lc=null,this.Ec=null,this.Fc=null,this.Oc=null,this.Vc=null,this.Pc=0,this.Wc=!1,this.zc=!1,this.Rc=!1,this.Ic=0,this.jc=null,this.qc=!Ne(),this.Uc=function(r){s.Hc(r)},this.Yc=function(r){if(s.$c(r)){var a=s.Kc(r);++s.mc,s.gc&&s.mc>1&&(s.Zc(K(r),s.yc).Xc<30&&!s.Dc&&s.Jc(a,s.Qc.Gc),s.tv())}else a=s.Kc(r),++s.wc,s.Mc&&s.wc>1&&(s.Zc(K(r),s.bc).Xc<5&&!s.Tc&&s.iv(a,s.Qc.nv),s.sv())},this.hv=t,this.Qc=e,this.zi=o,this.rv()}return n.prototype.g=function(){null!==this.Ac&&(this.Ac(),this.Ac=null),null!==this.Bc&&(this.Bc(),this.Bc=null),null!==this.Ec&&(this.Ec(),this.Ec=null),null!==this.Fc&&(this.Fc(),this.Fc=null),null!==this.Oc&&(this.Oc(),this.Oc=null),null!==this.Lc&&(this.Lc(),this.Lc=null),this.ev(),this.sv()},n.prototype.uv=function(t){var e=this;this.Ec&&this.Ec();var o=this.av.bind(this);if(this.Ec=function(){e.hv.removeEventListener("mousemove",o)},this.hv.addEventListener("mousemove",o),!this.$c(t)){var s=this.Kc(t);this.iv(s,this.Qc.ov),this.qc=!0}},n.prototype.sv=function(){null!==this.Mc&&clearTimeout(this.Mc),this.wc=0,this.Mc=null,this.bc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY}},n.prototype.tv=function(){null!==this.gc&&clearTimeout(this.gc),this.mc=0,this.gc=null,this.yc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY}},n.prototype.av=function(t){if(!this.Rc&&null===this.Cc&&!this.$c(t)){var e=this.Kc(t);this.iv(e,this.Qc.lv),this.qc=!0}},n.prototype.fv=function(t){var e=Ee(t.changedTouches,S(this.jc));if(null!==e&&(this.Ic=te(t),null===this.Vc&&!this.zc)){this.Wc=!0;var o=this.Zc(K(e),S(this.Cc)),r=o.vv;if(this.Sc||!(o.Xc<5)){if(!this.Sc){var l=.5*o.cv,h=r>=l&&!this.zi._v(),c=l>r&&!this.zi.dv();h||c||(this.zc=!0),this.Sc=!0,this.Dc=!0,this.ev(),this.tv()}if(!this.zc){var u=this.Kc(t,e);this.Jc(u,this.Qc.wv),gt(t)}}}},n.prototype.Mv=function(t){if(0===t.button&&(this.Zc(K(t),S(this.xc)).Xc>=5&&(this.Tc=!0,this.sv()),this.Tc)){var e=this.Kc(t);this.iv(e,this.Qc.bv)}},n.prototype.Zc=function(t,e){var o=Math.abs(e.tt-t.tt),s=Math.abs(e.it-t.it);return{cv:o,vv:s,Xc:o+s}},n.prototype.mv=function(t){var e=Ee(t.changedTouches,S(this.jc));if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null!==e){this.jc=null,this.Ic=te(t),this.ev(),this.Cc=null,this.Oc&&(this.Oc(),this.Oc=null);var o=this.Kc(t,e);this.Jc(o,this.Qc.pv),++this.mc,this.gc&&this.mc>1?(this.Zc(K(e),this.yc).Xc<30&&!this.Dc&&this.Jc(o,this.Qc.Gc),this.tv()):this.Dc||(this.Jc(o,this.Qc.gv),this.Qc.gv&&gt(t)),0===this.mc&&gt(t),0===t.touches.length&&this.Nc&&(this.Nc=!1,gt(t))}},n.prototype.Hc=function(t){if(0===t.button){var e=this.Kc(t);this.xc=null,this.Rc=!1,this.Fc&&(this.Fc(),this.Fc=null),Ji()&&this.hv.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uc),this.$c(t)||(this.iv(e,this.Qc.yv),++this.wc,this.Mc&&this.wc>1?(this.Zc(K(t),this.bc).Xc<5&&!this.Tc&&this.iv(e,this.Qc.nv),this.sv()):this.Tc||this.iv(e,this.Qc.kv))}},n.prototype.ev=function(){null!==this.kc&&(clearTimeout(this.kc),this.kc=null)},n.prototype.Nv=function(t){if(null===this.jc){var e=t.changedTouches[0];this.jc=e.identifier,this.Ic=te(t);var o=this.hv.ownerDocument.documentElement;this.Dc=!1,this.Sc=!1,this.zc=!1,this.Cc=K(e),this.Oc&&(this.Oc(),this.Oc=null);var s=this.fv.bind(this),r=this.mv.bind(this);this.Oc=function(){o.removeEventListener("touchmove",s),o.removeEventListener("touchend",r)},o.addEventListener("touchmove",s,{passive:!1}),o.addEventListener("touchend",r,{passive:!1}),this.ev(),this.kc=setTimeout(this.xv.bind(this,t),240);var a=this.Kc(t,e);this.Jc(a,this.Qc.Cv),this.gc||(this.mc=0,this.gc=setTimeout(this.tv.bind(this),500),this.yc=K(e))}},n.prototype.Sv=function(t){if(0===t.button){var e=this.hv.ownerDocument.documentElement;Ji()&&e.addEventListener("mouseleave",this.Uc),this.Tc=!1,this.xc=K(t),this.Fc&&(this.Fc(),this.Fc=null);var o=this.Mv.bind(this),s=this.Hc.bind(this);if(this.Fc=function(){e.removeEventListener("mousemove",o),e.removeEventListener("mouseup",s)},e.addEventListener("mousemove",o),e.addEventListener("mouseup",s),this.Rc=!0,!this.$c(t)){var r=this.Kc(t);this.iv(r,this.Qc.Tv),this.Mc||(this.wc=0,this.Mc=setTimeout(this.sv.bind(this),500),this.bc=K(t))}}},n.prototype.rv=function(){var t=this;this.hv.addEventListener("mouseenter",this.uv.bind(this)),this.hv.addEventListener("touchcancel",this.ev.bind(this));var e=this.hv.ownerDocument,o=function(s){t.Qc.Dv&&(s.target&&t.hv.contains(s.target)||t.Qc.Dv())};this.Bc=function(){e.removeEventListener("touchstart",o)},this.Ac=function(){e.removeEventListener("mousedown",o)},e.addEventListener("mousedown",o),e.addEventListener("touchstart",o,{passive:!0}),Ne()&&(this.Lc=function(){t.hv.removeEventListener("dblclick",t.Yc)},this.hv.addEventListener("dblclick",this.Yc)),this.hv.addEventListener("mouseleave",this.Av.bind(this)),this.hv.addEventListener("touchstart",this.Nv.bind(this),{passive:!0}),function aa(n){jt&&void 0!==window.chrome&&n.addEventListener("mousedown",function(t){if(1===t.button)return t.preventDefault(),!1})}(this.hv),this.hv.addEventListener("mousedown",this.Sv.bind(this)),this.Bv(),this.hv.addEventListener("touchmove",function(){},{passive:!1})},n.prototype.Bv=function(){var t=this;void 0===this.Qc.Lv&&void 0===this.Qc.Ev&&void 0===this.Qc.Fv||(this.hv.addEventListener("touchstart",function(e){return t.Ov(e.touches)},{passive:!0}),this.hv.addEventListener("touchmove",function(e){if(2===e.touches.length&&null!==t.Vc&&void 0!==t.Qc.Ev){var o=Yi(e.touches[0],e.touches[1])/t.Pc;t.Qc.Ev(t.Vc,o),gt(e)}},{passive:!1}),this.hv.addEventListener("touchend",function(e){t.Ov(e.touches)}))},n.prototype.Ov=function(t){1===t.length&&(this.Wc=!1),2!==t.length||this.Wc||this.Nc?this.Vv():this.Pv(t)},n.prototype.Pv=function(t){var e=this.hv.getBoundingClientRect()||{left:0,top:0};this.Vc={tt:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,it:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Pc=Yi(t[0],t[1]),void 0!==this.Qc.Lv&&this.Qc.Lv(),this.ev()},n.prototype.Vv=function(){null!==this.Vc&&(this.Vc=null,void 0!==this.Qc.Fv&&this.Qc.Fv())},n.prototype.Av=function(t){if(this.Ec&&this.Ec(),!this.$c(t)&&this.qc){var e=this.Kc(t);this.iv(e,this.Qc.Wv),this.qc=!Ne()}},n.prototype.xv=function(t){var e=Ee(t.touches,S(this.jc));if(null!==e){var o=this.Kc(t,e);this.Jc(o,this.Qc.zv),this.Dc=!0,this.Nc=!0}},n.prototype.$c=function(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:te(t)<this.Ic+500},n.prototype.Jc=function(t,e){e&&e.call(this.Qc,t)},n.prototype.iv=function(t,e){e&&e.call(this.Qc,t)},n.prototype.Kc=function(t,e){var o=e||t,s=this.hv.getBoundingClientRect()||{left:0,top:0};return{Rv:o.clientX,Iv:o.clientY,jv:o.pageX,qv:o.pageY,Uv:o.screenX,Hv:o.screenY,Yv:o.clientX-s.left,$v:o.clientY-s.top,Kv:t.ctrlKey,Xv:t.altKey,Zv:t.shiftKey,Jv:t.metaKey,Gv:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,Qv:t.type,t_:o.target,i_:t.view,n_:function(){"touchstart"!==t.type&&gt(t)}}},n}();function Yi(n,t){var e=n.clientX-t.clientX,o=n.clientY-t.clientY;return Math.sqrt(e*e+o*o)}function gt(n){n.cancelable&&n.preventDefault()}function K(n){return{tt:n.pageX,it:n.pageY}}function te(n){return n.timeStamp||performance.now()}function Ee(n,t){for(var e=0;e<n.length;++e)if(n[e].identifier===t)return n[e];return null}var Xi=function(){function n(t,e,o,s){this.rh=new pt(200),this.R=0,this.s_="",this.Yh="",this.th=[],this.h_=new Map,this.R=t,this.s_=e,this.Yh=rt(t,o,s)}return n.prototype.g=function(){this.rh.ih(),this.th=[],this.h_.clear()},n.prototype.r_=function(t,e,o,s,r){var a=this.e_(t,e);if("left"!==r){var l=Kt(t.canvas);o-=Math.floor(a.u_*l)}s-=Math.floor(a.Yt/2),t.drawImage(a.a_,o,s,a.Ht,a.Yt)},n.prototype.e_=function(t,e){var o,s=this;if(this.h_.has(e))o=F(this.h_.get(e));else{if(this.th.length>=200){var r=F(this.th.shift());this.h_.delete(r)}var a=Kt(t.canvas),l=Math.ceil(this.R/4.5),h=Math.round(this.R/10),c=Math.ceil(this.rh.Qt(t,e)),u=Ce(Math.round(c+2*l)),_=Ce(this.R+2*l),f=Gi(document,new L(u,_));o={Gt:e,u_:Math.round(Math.max(1,c)),Ht:Math.ceil(u*a),Yt:Math.ceil(_*a),a_:f},0!==c&&(this.th.push(o.Gt),this.h_.set(o.Gt,o)),W(t=V(o.a_),a,function(){t.font=s.Yh,t.fillStyle=s.s_,t.fillText(e,0,_-l-h)})}return o},n}(),Hi=function(){function n(t,e,o,s){var r=this;this._i=null,this.o_=null,this.l_=!1,this.f_=new pt(50),this.c_=new Xi(11,"#000"),this.s_=null,this.Yh=null,this.v_=0,this.__=!1,this.d_=function(){r.w_(r.cf.W()),r.__||r.Di.M_().jt().Wr()},this.b_=function(){r.__||r.Di.M_().jt().Wr()},this.Di=t,this.zi=e,this.cf=o,this.m_="left"===s,this.p_=document.createElement("div"),this.p_.style.height="100%",this.p_.style.overflow="hidden",this.p_.style.width="25px",this.p_.style.left="0",this.p_.style.position="relative",this.g_=at(this.p_,new L(16,16)),this.g_.subscribeCanvasConfigured(this.d_);var a=this.g_.canvas;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.y_=at(this.p_,new L(16,16)),this.y_.subscribeCanvasConfigured(this.b_);var l=this.y_.canvas;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0";var h={Tv:this.k_.bind(this),Cv:this.k_.bind(this),bv:this.N_.bind(this),wv:this.N_.bind(this),Dv:this.x_.bind(this),yv:this.C_.bind(this),pv:this.C_.bind(this),nv:this.S_.bind(this),Gc:this.S_.bind(this),ov:this.T_.bind(this),Wv:this.D_.bind(this)};this.A_=new Pe(this.y_.canvas,h,{_v:function(){return!1},dv:function(){return!0}})}return n.prototype.g=function(){this.A_.g(),this.y_.unsubscribeCanvasConfigured(this.b_),this.y_.destroy(),this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy(),null!==this._i&&this._i._a().M(this),this._i=null,this.c_.g()},n.prototype.B_=function(){return this.p_},n.prototype.ht=function(){return S(this._i).W().borderColor},n.prototype.L_=function(){return this.zi.textColor},n.prototype.S=function(){return this.zi.fontSize},n.prototype.E_=function(){return rt(this.S(),this.zi.fontFamily)},n.prototype.F_=function(){var t=this.cf.W(),o=this.Yh!==t.T;return(this.s_!==t.A||o)&&(this.w_(t),this.s_=t.A),o&&(this.f_.ih(),this.Yh=t.T),t},n.prototype.O_=function(){if(null===this._i)return 0;var t=0,e=this.F_(),o=V(this.g_.canvas),s=this._i.au();o.font=this.E_(),s.length>0&&(t=Math.max(this.f_.Qt(o,s[0].yu),this.f_.Qt(o,s[s.length-1].yu)));for(var r=this.V_(),a=r.length;a--;){var l=this.f_.Qt(o,r[a].Gt());l>t&&(t=l)}var h=this._i.kt();if(null!==h&&null!==this.o_){var c=this._i.qi(1,h),u=this._i.qi(this.o_.Ot-2,h);t=Math.max(t,this.f_.Qt(o,this._i.Mi(Math.floor(Math.min(c,u))+.11111111111111,h)),this.f_.Qt(o,this._i.Mi(Math.ceil(Math.max(c,u))-.11111111111111,h)))}var f=Math.ceil(e.N+e.C+e.L+e.F+(t||34));return f+f%2},n.prototype.P_=function(t){if(t.Ft<0||t.Ot<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.o_&&this.o_.br(t)||(this.o_=t,this.__=!0,this.g_.resizeCanvas({width:t.Ft,height:t.Ot}),this.y_.resizeCanvas({width:t.Ft,height:t.Ot}),this.__=!1,this.p_.style.width=t.Ft+"px",this.p_.style.height=t.Ot+"px",this.p_.style.minWidth=t.Ft+"px")},n.prototype.W_=function(){return S(this.o_).Ft},n.prototype.Si=function(t){this._i!==t&&(null!==this._i&&this._i._a().M(this),this._i=t,t._a().u(this.Eu.bind(this),this))},n.prototype.Ct=function(){return this._i},n.prototype.ih=function(){var t=this.Di.z_();this.Di.M_().jt().no(t,S(this.Ct()))},n.prototype.R_=function(t){if(null!==this.o_){if(1!==t){var e=V(this.g_.canvas);this.I_(),this.j_(e,this.g_.pixelRatio),this.Rs(e,this.g_.pixelRatio),this.q_(e,this.g_.pixelRatio),this.U_(e,this.g_.pixelRatio)}var o=V(this.y_.canvas),s=this.o_.Ft,r=this.o_.Ot;W(o,this.y_.pixelRatio,function(){o.clearRect(0,0,s,r)}),this.H_(o,this.y_.pixelRatio)}},n.prototype.Y_=function(){return this.g_.canvas},n.prototype.vt=function(){var t;null===(t=this._i)||void 0===t||t.au()},n.prototype.k_=function(t){if(null!==this._i&&!this._i.wi()&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var e=this.Di.M_().jt(),o=this.Di.z_();this.l_=!0,e.Ka(o,this._i,t.$v)}},n.prototype.N_=function(t){if(null!==this._i&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var e=this.Di.M_().jt(),o=this.Di.z_();e.Xa(o,this._i,t.$v)}},n.prototype.x_=function(){if(null!==this._i&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var t=this.Di.M_().jt(),e=this.Di.z_(),o=this._i;this.l_&&(this.l_=!1,t.Za(e,o))}},n.prototype.C_=function(t){if(null!==this._i&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var e=this.Di.M_().jt(),o=this.Di.z_();this.l_=!1,e.Za(o,this._i)}},n.prototype.S_=function(t){this.Di.M_().W().handleScale.axisDoubleClickReset&&this.ih()},n.prototype.T_=function(t){null!==this._i&&(!this.Di.M_().jt().W().handleScale.axisPressedMouseMove.price||this._i.vr()||this._i.Zu()||this.K_(1))},n.prototype.D_=function(t){this.K_(0)},n.prototype.V_=function(){var t=this,e=[],o=null===this._i?void 0:this._i;return function(s){for(var r=0;r<s.length;++r)for(var a=s[r].nn(t.Di.z_(),o),l=0;l<a.length;l++)e.push(a[l])}(this.Di.z_().oa()),e},n.prototype.j_=function(t,e){var o=this;if(null!==this.o_){var s=this.o_.Ft,r=this.o_.Ot;W(t,e,function(){var a=o.Di.z_().jt(),l=a.Zf(),h=a.Xf();l===h?$t(t,0,0,s,r,l):hi(t,0,0,s,r,l,h)})}},n.prototype.Rs=function(t,e){if(null!==this.o_&&null!==this._i&&this._i.W().borderVisible){t.save(),t.fillStyle=this.ht();var o,s=Math.max(1,Math.floor(this.F_().N*e));o=this.m_?Math.floor(this.o_.Ft*e)-s:0,t.fillRect(o,0,s,Math.ceil(this.o_.Ot*e)),t.restore()}},n.prototype.q_=function(t,e){if(null!==this.o_&&null!==this._i){var o=this._i.au();t.save(),t.strokeStyle=this.ht(),t.font=this.E_(),t.fillStyle=this.ht();var s=this.F_(),r=this._i.W().borderVisible&&this._i.W().drawTicks,a=this.m_?Math.floor((this.o_.Ft-s.C)*e-s.N*e):Math.floor(s.N*e),l=this.m_?Math.round(a-s.L*e):Math.round(a+s.C*e+s.L*e),h=this.m_?"right":"left",c=Math.max(1,Math.floor(e)),u=Math.floor(.5*e);if(r){var _=Math.round(s.C*e);t.beginPath();for(var f=0,d=o;f<d.length;f++){var p=d[f];t.rect(a,Math.round(p.su*e)-u,_,c)}t.fill()}t.fillStyle=this.L_();for(var m=0,g=o;m<g.length;m++)this.c_.r_(t,(p=g[m]).yu,l,Math.round(p.su*e),h);t.restore()}},n.prototype.I_=function(){if(null!==this.o_&&null!==this._i){var t=this.o_.Ot/2,e=[],o=this._i.oa().slice(),s=this.Di.z_(),r=this.F_();this._i===s.fh()&&this.Di.z_().oa().forEach(function(g){s.lh(g)&&o.push(g)});var a=this._i.Ge()[0],l=this._i;o.forEach(function(g){var v=g.nn(s,l);v.forEach(function(C){C.oi(null),C.li()&&e.push(C)}),a===g&&v.length>0&&(t=v[0].ti())});var h=e.filter(function(g){return g.ti()<=t}),c=e.filter(function(g){return g.ti()>t});if(h.sort(function(g,v){return v.ti()-g.ti()}),h.length&&c.length&&c.push(h[0]),c.sort(function(g,v){return g.ti()-v.ti()}),e.forEach(function(g){return g.oi(g.ti())}),this._i.W().alignLabels){for(var u=1;u<h.length;u++){var _=h[u],f=(p=h[u-1]).Yt(r,!1);_.ti()>(m=p.ai())-f&&_.oi(m-f)}for(var d=1;d<c.length;d++){var p,m;_=c[d],f=(p=c[d-1]).Yt(r,!0),_.ti()<(m=p.ai())+f&&_.oi(m+f)}}}},n.prototype.U_=function(t,e){var o=this;if(null!==this.o_){t.save();var s=this.o_,r=this.V_(),a=this.F_(),l=this.m_?"right":"left";r.forEach(function(h){if(h.fi()){var c=h.dt(S(o._i));t.save(),c.H(t,a,o.f_,s.Ft,l,e),t.restore()}}),t.restore()}},n.prototype.H_=function(t,e){var o=this;if(null!==this.o_&&null!==this._i){t.save();var s=this.o_,r=this.Di.M_().jt(),a=[],l=this.Di.z_(),h=r.Tf().nn(l,this._i);h.length&&a.push(h);var c=this.F_(),u=this.m_?"right":"left";a.forEach(function(_){_.forEach(function(f){t.save(),f.dt(S(o._i)).H(t,c,o.f_,s.Ft,u,e),t.restore()})}),t.restore()}},n.prototype.K_=function(t){this.p_.style.cursor=1===t?"ns-resize":"default"},n.prototype.Eu=function(){var t=this.O_();this.v_<t&&this.Di.M_().jt().Ce(),this.v_=t},n.prototype.w_=function(t){this.c_.g(),this.c_=new Xi(t.S,t.A,t.D)},n}();function Wi(n,t,e,o,s){n.$&&n.$(t,e,o,s)}function ke(n,t,e,o,s){n.H(t,e,o,s)}function ee(n,t){return n.tn(t)}function la(n,t){return void 0!==n.Pe?n.Pe(t):[]}var ha=function(){function n(t,e){var o=this;this.o_=new L(0,0),this.X_=null,this.Z_=null,this.J_=null,this.G_=!1,this.Q_=new Q,this.td=0,this.nd=!1,this.sd=null,this.hd=!1,this.rd=null,this.ed=null,this.__=!1,this.d_=function(){o.__||null===o.ud||o.pi().Wr()},this.b_=function(){o.__||null===o.ud||o.pi().Wr()},this.ad=t,this.ud=e,this.ud.ro().u(this.od.bind(this),this,!0),this.ld=document.createElement("td"),this.ld.style.padding="0",this.ld.style.position="relative";var s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.fd=document.createElement("td"),this.fd.style.padding="0",this.vd=document.createElement("td"),this.vd.style.padding="0",this.ld.appendChild(s),this.g_=at(s,new L(16,16)),this.g_.subscribeCanvasConfigured(this.d_);var r=this.g_.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.y_=at(s,new L(16,16)),this.y_.subscribeCanvasConfigured(this.b_);var a=this.y_.canvas;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this._d=document.createElement("tr"),this._d.appendChild(this.fd),this._d.appendChild(this.ld),this._d.appendChild(this.vd),this.dd(),this.A_=new Pe(this.y_.canvas,this,{_v:function(){return null===o.sd&&!o.ad.W().handleScroll.vertTouchDrag},dv:function(){return null===o.sd&&!o.ad.W().handleScroll.horzTouchDrag}})}return n.prototype.g=function(){null!==this.X_&&this.X_.g(),null!==this.Z_&&this.Z_.g(),this.y_.unsubscribeCanvasConfigured(this.b_),this.y_.destroy(),this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy(),null!==this.ud&&this.ud.ro().M(this),this.A_.g()},n.prototype.z_=function(){return S(this.ud)},n.prototype.wd=function(t){null!==this.ud&&this.ud.ro().M(this),this.ud=t,null!==this.ud&&this.ud.ro().u(n.prototype.od.bind(this),this,!0),this.dd()},n.prototype.M_=function(){return this.ad},n.prototype.B_=function(){return this._d},n.prototype.dd=function(){if(null!==this.ud&&(this.Md(),0!==this.pi()._t().length)){if(null!==this.X_){var t=this.ud.Ya();this.X_.Si(S(t))}if(null!==this.Z_){var e=this.ud.$a();this.Z_.Si(S(e))}}},n.prototype.bd=function(){null!==this.X_&&this.X_.vt(),null!==this.Z_&&this.Z_.vt()},n.prototype.Wa=function(){return null!==this.ud?this.ud.Wa():0},n.prototype.za=function(t){this.ud&&this.ud.za(t)},n.prototype.ov=function(t){this.ud&&(this.md(),this.pd(t.Yv,t.$v))},n.prototype.Tv=function(t){this.md(),this.gd(),this.pd(t.Yv,t.$v)},n.prototype.lv=function(t){if(this.ud){this.md();var e=t.Yv,o=t.$v;this.pd(e,o);var s=this.$h(e,o);this.pi().yf(s&&{kf:s.kf,yd:s.yd})}},n.prototype.kv=function(t){if(null!==this.ud){this.md();var e=t.Yv,o=t.$v;if(this.Q_.p()){var s=this.pi().Tf().Mt();this.Q_.m(s,{x:e,y:o})}}},n.prototype.bv=function(t){this.md(),this.kd(t),this.pd(t.Yv,t.$v)},n.prototype.yv=function(t){null!==this.ud&&(this.md(),this.nd=!1,this.Nd(t))},n.prototype.zv=function(t){if(this.nd=!0,null===this.sd){var e={x:t.Yv,y:t.$v};this.xd(e,e)}},n.prototype.Wv=function(t){null!==this.ud&&(this.md(),this.ud.jt().yf(null),this.Cd())},n.prototype.Sd=function(){return this.Q_},n.prototype.Lv=function(){this.td=1,this.Td()},n.prototype.Ev=function(t,e){if(this.ad.W().handleScale.pinch){var o=5*(e-this.td);this.td=e,this.pi().Ef(t.tt,o)}},n.prototype.Cv=function(t){if(this.nd=!1,this.hd=null!==this.sd,this.gd(),null!==this.sd){var e=this.pi().Tf();this.rd={x:e.$t(),y:e.Kt()},this.sd={x:t.Yv,y:t.$v}}},n.prototype.wv=function(t){if(null!==this.ud){var e=t.Yv,o=t.$v;if(null===this.sd)this.kd(t);else{this.hd=!1;var s=S(this.rd);this.pd(s.x+(e-this.sd.x),s.y+(o-this.sd.y))}}},n.prototype.pv=function(t){0===this.M_().W().trackingMode.exitMode&&(this.hd=!0),this.Dd(),this.Nd(t)},n.prototype.$h=function(t,e){var o=this.ud;if(null===o)return null;for(var s=0,r=o.oa();s<r.length;s++){var a=r[s],l=this.Ad(a.tn(o),t,e);if(null!==l)return{kf:a,i_:l.i_,yd:l.yd}}return null},n.prototype.Bd=function(t,e){S("left"===e?this.X_:this.Z_).P_(new L(t,this.o_.Ot))},n.prototype.Ld=function(){return this.o_},n.prototype.P_=function(t){if(t.Ft<0||t.Ot<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.o_.br(t)||(this.o_=t,this.__=!0,this.g_.resizeCanvas({width:t.Ft,height:t.Ot}),this.y_.resizeCanvas({width:t.Ft,height:t.Ot}),this.__=!1,this.ld.style.width=t.Ft+"px",this.ld.style.height=t.Ot+"px")},n.prototype.Ed=function(){var t=S(this.ud);t.Ha(t.Ya()),t.Ha(t.$a());for(var e=0,o=t.Ge();e<o.length;e++){var s=o[e];if(t.lh(s)){var r=s.Ct();null!==r&&t.Ha(r),s.hn()}}},n.prototype.Y_=function(){return this.g_.canvas},n.prototype.R_=function(t){if(0!==t&&null!==this.ud){if(t>1&&this.Ed(),null!==this.X_&&this.X_.R_(t),null!==this.Z_&&this.Z_.R_(t),1!==t){var e=V(this.g_.canvas);e.save(),this.j_(e,this.g_.pixelRatio),this.ud&&(this.Fd(e,this.g_.pixelRatio),this.Od(e,this.g_.pixelRatio),this.Vd(e,this.g_.pixelRatio,ee)),e.restore()}var o=V(this.y_.canvas);o.clearRect(0,0,Math.ceil(this.o_.Ft*this.y_.pixelRatio),Math.ceil(this.o_.Ot*this.y_.pixelRatio)),this.Vd(o,this.g_.pixelRatio,la),this.Pd(o,this.y_.pixelRatio)}},n.prototype.Wd=function(){return this.X_},n.prototype.zd=function(){return this.Z_},n.prototype.od=function(){null!==this.ud&&this.ud.ro().M(this),this.ud=null},n.prototype.j_=function(t,e){var o=this;W(t,e,function(){var s=o.pi(),r=s.Zf(),a=s.Xf();r===a?$t(t,0,0,o.o_.Ft,o.o_.Ot,a):hi(t,0,0,o.o_.Ft,o.o_.Ot,r,a)})},n.prototype.Fd=function(t,e){var o=S(this.ud),s=o.eo().ou().dt(o.Yt(),o.Ht());null!==s&&(t.save(),s.H(t,e,!1),t.restore())},n.prototype.Od=function(t,e){var o=this.pi().Sf();this.Rd(t,e,ee,Wi,o),this.Rd(t,e,ee,ke,o)},n.prototype.Pd=function(t,e){this.Rd(t,e,ee,ke,this.pi().Tf())},n.prototype.Vd=function(t,e,o){for(var s=S(this.ud).oa(),r=0,a=s;r<a.length;r++){var l=a[r];this.Rd(t,e,o,Wi,l)}for(var h=0,c=s;h<c.length;h++)this.Rd(t,e,o,ke,l=c[h])},n.prototype.Rd=function(t,e,o,s,r){for(var a=S(this.ud),l=o(r,a),h=a.Yt(),c=a.Ht(),u=a.jt().gf(),_=null!==u&&u.kf===r,f=null!==u&&_&&void 0!==u.yd?u.yd.Kh:void 0,d=0,p=l;d<p.length;d++){var m=p[d].dt(h,c);null!==m&&(t.save(),s(m,t,e,_,f),t.restore())}},n.prototype.Ad=function(t,e,o){for(var s=0,r=t;s<r.length;s++){var a=r[s],l=a.dt(this.o_.Ot,this.o_.Ft);if(null!==l&&l.$h){var h=l.$h(e,o);if(null!==h)return{i_:a,yd:h}}}return null},n.prototype.Md=function(){if(null!==this.ud){var t=this.ad,e=this.ud.Ya().W().visible,o=this.ud.$a().W().visible;e||null===this.X_||(this.fd.removeChild(this.X_.B_()),this.X_.g(),this.X_=null),o||null===this.Z_||(this.vd.removeChild(this.Z_.B_()),this.Z_.g(),this.Z_=null);var s=t.jt().qf();e&&null===this.X_&&(this.X_=new Hi(this,t.W().layout,s,"left"),this.fd.appendChild(this.X_.B_())),o&&null===this.Z_&&(this.Z_=new Hi(this,t.W().layout,s,"right"),this.vd.appendChild(this.Z_.B_()))}},n.prototype.Id=function(t){return t.Gv&&this.nd||null!==this.sd},n.prototype.jd=function(t){return Math.max(0,Math.min(t,this.o_.Ft-1))},n.prototype.qd=function(t){return Math.max(0,Math.min(t,this.o_.Ot-1))},n.prototype.pd=function(t,e){this.pi().Rf(this.jd(t),this.qd(e),S(this.ud))},n.prototype.Cd=function(){this.pi().If()},n.prototype.Dd=function(){this.hd&&(this.sd=null,this.Cd())},n.prototype.xd=function(t,e){this.sd=t,this.hd=!1,this.pd(e.x,e.y);var o=this.pi().Tf();this.rd={x:o.$t(),y:o.Kt()}},n.prototype.pi=function(){return this.ad.jt()},n.prototype.Ud=function(){var t=this.pi(),e=this.z_(),o=e.ji();t.Qa(e,o),t.Pf(),this.J_=null,this.G_=!1},n.prototype.Nd=function(t){var e=this;if(this.G_){var o=performance.now();if(null!==this.ed&&this.ed.xh(t.Yv,o),null===this.ed||this.ed.cc(o))this.Ud();else{var s=this.pi(),r=s.bt(),a=this.ed,l=function(){if(!a._c()){var h=performance.now(),c=a.cc(h);if(!a._c()){var u=r.Nl();s.Vf(a.fc(h)),u===r.Nl()&&(c=!0,e.ed=null)}c?e.Ud():requestAnimationFrame(l)}};requestAnimationFrame(l)}}},n.prototype.md=function(){this.sd=null},n.prototype.gd=function(){if(this.ud){if(this.Td(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)S(document.activeElement).blur();else{var t=document.getSelection();null!==t&&t.removeAllRanges()}!this.ud.ji().wi()&&this.pi().bt().wi()}},n.prototype.kd=function(t){if(null!==this.ud){var e=this.pi();if(!e.bt().wi()){var o=this.ad.W(),s=o.handleScroll,r=o.kineticScroll;if(s.pressedMouseMove&&!t.Gv||(s.horzTouchDrag||s.vertTouchDrag)&&t.Gv){var a=this.ud.ji(),l=performance.now();null!==this.J_||this.Id(t)||(this.J_={x:t.Rv,y:t.Iv,So:l,Yv:t.Yv,$v:t.$v}),null!==this.ed&&this.ed.lc(t.Yv,l),null===this.J_||this.G_||this.J_.x===t.Rv&&this.J_.y===t.Iv||(null===this.ed&&(t.Gv&&r.touch||!t.Gv&&r.mouse)&&(this.ed=new ra(.2,7,.997,15),this.ed.lc(this.J_.Yv,this.J_.So),this.ed.lc(t.Yv,l)),a.wi()||e.Ja(this.ud,a,t.$v),e.Of(t.Yv),this.G_=!0),this.G_&&(a.wi()||e.Ga(this.ud,a,t.$v),e.Vf(t.Yv))}}}},n.prototype.Td=function(){var t=performance.now(),e=null===this.ed||this.ed.cc(t);null!==this.ed&&(e||this.Ud()),null!==this.ed&&(this.ed.dc(),this.ed=null)},n}(),Vi=function(){function n(t,e,o,s,r){var a=this;this.ft=!0,this.o_=new L(0,0),this.d_=function(){return a.R_(3)},this.m_="left"===t,this.cf=o.qf,this.zi=e,this.Hd=s,this.Yd=r,this.p_=document.createElement("div"),this.p_.style.width="25px",this.p_.style.height="100%",this.p_.style.overflow="hidden",this.g_=at(this.p_,new L(16,16)),this.g_.subscribeCanvasConfigured(this.d_)}return n.prototype.g=function(){this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy()},n.prototype.B_=function(){return this.p_},n.prototype.Ld=function(){return this.o_},n.prototype.P_=function(t){if(t.Ft<0||t.Ot<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.o_.br(t)||(this.o_=t,this.g_.resizeCanvas({width:t.Ft,height:t.Ot}),this.p_.style.width="".concat(t.Ft,"px"),this.p_.style.minWidth="".concat(t.Ft,"px"),this.p_.style.height="".concat(t.Ot,"px"),this.ft=!0)},n.prototype.R_=function(t){if((!(t<3)||this.ft)&&0!==this.o_.Ft&&0!==this.o_.Ot){this.ft=!1;var e=V(this.g_.canvas);this.j_(e,this.g_.pixelRatio),this.Rs(e,this.g_.pixelRatio)}},n.prototype.Y_=function(){return this.g_.canvas},n.prototype.Rs=function(t,e){if(this.Hd()){var o=this.o_.Ft;t.save(),t.fillStyle=this.zi.timeScale.borderColor;var s=Math.floor(this.cf.W().N*e),r=this.m_?Math.round(o*e)-s:0;t.fillRect(r,0,s,s),t.restore()}},n.prototype.j_=function(t,e){var o=this;W(t,e,function(){$t(t,0,0,o.o_.Ft,o.o_.Ot,o.Yd())})},n}();function ca(n,t){return n.Po>t.Po?n:t}var ua=function(){function n(t){var e=this;this.$d=null,this.Kd=null,this.k=null,this.Xd=!1,this.o_=new L(0,0),this.Zd=new Q,this.f_=new pt(5),this.__=!1,this.d_=function(){e.__||e.ad.jt().Wr()},this.b_=function(){e.__||e.ad.jt().Wr()},this.ad=t,this.zi=t.W().layout,this.Jd=document.createElement("tr"),this.Gd=document.createElement("td"),this.Gd.style.padding="0",this.Qd=document.createElement("td"),this.Qd.style.padding="0",this.p_=document.createElement("td"),this.p_.style.height="25px",this.p_.style.padding="0",this.tw=document.createElement("div"),this.tw.style.width="100%",this.tw.style.height="100%",this.tw.style.position="relative",this.tw.style.overflow="hidden",this.p_.appendChild(this.tw),this.g_=at(this.tw,new L(16,16)),this.g_.subscribeCanvasConfigured(this.d_);var o=this.g_.canvas;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.y_=at(this.tw,new L(16,16)),this.y_.subscribeCanvasConfigured(this.b_);var s=this.y_.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Jd.appendChild(this.Gd),this.Jd.appendChild(this.p_),this.Jd.appendChild(this.Qd),this.iw(),this.ad.jt().Pa().u(this.iw.bind(this),this),this.A_=new Pe(this.y_.canvas,this,{_v:function(){return!0},dv:function(){return!1}})}return n.prototype.g=function(){this.A_.g(),null!==this.$d&&this.$d.g(),null!==this.Kd&&this.Kd.g(),this.y_.unsubscribeCanvasConfigured(this.b_),this.y_.destroy(),this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy()},n.prototype.B_=function(){return this.Jd},n.prototype.nw=function(){return this.$d},n.prototype.sw=function(){return this.Kd},n.prototype.Tv=function(t){if(!this.Xd){this.Xd=!0;var e=this.ad.jt();!e.bt().wi()&&this.ad.W().handleScale.axisPressedMouseMove.time&&e.Lf(t.Yv)}},n.prototype.Cv=function(t){this.Tv(t)},n.prototype.Dv=function(){var t=this.ad.jt();!t.bt().wi()&&this.Xd&&(this.Xd=!1,this.ad.W().handleScale.axisPressedMouseMove.time&&t.zf())},n.prototype.bv=function(t){var e=this.ad.jt();!e.bt().wi()&&this.ad.W().handleScale.axisPressedMouseMove.time&&e.Wf(t.Yv)},n.prototype.wv=function(t){this.bv(t)},n.prototype.yv=function(){this.Xd=!1;var t=this.ad.jt();t.bt().wi()&&!this.ad.W().handleScale.axisPressedMouseMove.time||t.zf()},n.prototype.pv=function(){this.yv()},n.prototype.nv=function(){this.ad.W().handleScale.axisDoubleClickReset&&this.ad.jt().pn()},n.prototype.Gc=function(){this.nv()},n.prototype.ov=function(){this.ad.jt().W().handleScale.axisPressedMouseMove.time&&this.K_(1)},n.prototype.Wv=function(){this.K_(0)},n.prototype.Ld=function(){return this.o_},n.prototype.hw=function(){return this.Zd},n.prototype.rw=function(t,e,o){this.o_&&this.o_.br(t)||(this.o_=t,this.__=!0,this.g_.resizeCanvas({width:t.Ft,height:t.Ot}),this.y_.resizeCanvas({width:t.Ft,height:t.Ot}),this.__=!1,this.p_.style.width=t.Ft+"px",this.p_.style.height=t.Ot+"px",this.Zd.m(t)),null!==this.$d&&this.$d.P_(new L(e,t.Ot)),null!==this.Kd&&this.Kd.P_(new L(o,t.Ot))},n.prototype.ew=function(){var t=this.uw();return Math.ceil(t.N+t.C+t.S+t.O+t.B)},n.prototype.vt=function(){this.ad.jt().bt().au()},n.prototype.Y_=function(){return this.g_.canvas},n.prototype.R_=function(t){if(0!==t){if(1!==t){var e=V(this.g_.canvas);this.j_(e,this.g_.pixelRatio),this.Rs(e,this.g_.pixelRatio),this.q_(e,this.g_.pixelRatio),null!==this.$d&&this.$d.R_(t),null!==this.Kd&&this.Kd.R_(t)}var o=V(this.y_.canvas),s=this.y_.pixelRatio;o.clearRect(0,0,Math.ceil(this.o_.Ft*s),Math.ceil(this.o_.Ot*s)),this.aw([this.ad.jt().Tf()],o,s)}},n.prototype.j_=function(t,e){var o=this;W(t,e,function(){$t(t,0,0,o.o_.Ft,o.o_.Ot,o.ad.jt().Xf())})},n.prototype.Rs=function(t,e){if(this.ad.W().timeScale.borderVisible){t.save(),t.fillStyle=this.ow();var o=Math.max(1,Math.floor(this.uw().N*e));t.fillRect(0,0,Math.ceil(this.o_.Ft*e),o),t.restore()}},n.prototype.q_=function(t,e){var o=this,s=this.ad.jt().bt().au();if(s&&0!==s.length){var r=s.reduce(ca,s[0]).Po;r>30&&r<50&&(r=30),t.save(),t.strokeStyle=this.ow();var a=this.uw(),l=a.N+a.C+a.O+a.S-a.V;t.textAlign="center",t.fillStyle=this.ow();var h=Math.floor(this.uw().N*e),c=Math.max(1,Math.floor(e)),u=Math.floor(.5*e);if(this.ad.jt().bt().W().borderVisible){t.beginPath();for(var _=Math.round(a.C*e),f=s.length;f--;){var d=Math.round(s[f].su*e);t.rect(d-u,h,c,_)}t.fill()}t.fillStyle=this.j(),W(t,e,function(){t.font=o.lw();for(var p=0,m=s;p<m.length;p++)if((M=m[p]).Po<r){var g=M.Sl?o.fw(t,M.su,M.yu):M.su;t.fillText(M.yu,g,l)}t.font=o.cw();for(var v=0,C=s;v<C.length;v++){var M;(M=C[v]).Po>=r&&(g=M.Sl?o.fw(t,M.su,M.yu):M.su,t.fillText(M.yu,g,l))}}),t.restore()}},n.prototype.fw=function(t,e,o){var s=this.f_.Qt(t,o),a=Math.floor(e-s/2)+.5;return a<0?e+=Math.abs(0-a):a+s>this.o_.Ft&&(e-=Math.abs(this.o_.Ft-(a+s))),e},n.prototype.aw=function(t,e,o){for(var s=this.uw(),r=0,a=t;r<a.length;r++)for(var l=0,h=a[r].Ti();l<h.length;l++){var c=h[l];e.save(),c.dt().H(e,s,o),e.restore()}},n.prototype.ow=function(){return this.ad.W().timeScale.borderColor},n.prototype.j=function(){return this.zi.textColor},n.prototype.R=function(){return this.zi.fontSize},n.prototype.lw=function(){return rt(this.R(),this.zi.fontFamily)},n.prototype.cw=function(){return rt(this.R(),this.zi.fontFamily,"bold")},n.prototype.uw=function(){null===this.k&&(this.k={N:1,V:NaN,O:NaN,B:NaN,mi:NaN,C:3,S:NaN,T:"",bi:new pt});var t=this.k,e=this.lw();if(t.T!==e){var o=this.R();t.S=o,t.T=e,t.O=Math.ceil(o/2.5),t.B=t.O,t.mi=Math.ceil(o/2),t.V=Math.round(this.R()/5),t.bi.ih()}return this.k},n.prototype.K_=function(t){this.p_.style.cursor=1===t?"ew-resize":"default"},n.prototype.iw=function(){var t=this.ad.jt(),e=t.W();e.leftPriceScale.visible||null===this.$d||(this.Gd.removeChild(this.$d.B_()),this.$d.g(),this.$d=null),e.rightPriceScale.visible||null===this.Kd||(this.Qd.removeChild(this.Kd.B_()),this.Kd.g(),this.Kd=null);var o={qf:this.ad.jt().qf()},s=function(){return e.leftPriceScale.borderVisible&&t.bt().W().borderVisible},r=function(){return t.Xf()};e.leftPriceScale.visible&&null===this.$d&&(this.$d=new Vi("left",e,o,s,r),this.Gd.appendChild(this.$d.B_())),e.rightPriceScale.visible&&null===this.Kd&&(this.Kd=new Vi("right",e,o,s,r),this.Qd.appendChild(this.Kd.B_()))},n}(),_a=function(){function n(t,e){var o;this._w=[],this.dw=0,this.xu=0,this.hh=0,this.ww=0,this.Mw=0,this.bw=null,this.mw=!1,this.Q_=new Q,this.af=new Q,this.zi=e,this.Jd=document.createElement("div"),this.Jd.classList.add("tv-lightweight-charts"),this.Jd.style.overflow="hidden",this.Jd.style.width="100%",this.Jd.style.height="100%",(o=this.Jd).style.userSelect="none",o.style.webkitUserSelect="none",o.style.msUserSelect="none",o.style.MozUserSelect="none",o.style.webkitTapHighlightColor="transparent",this.pw=document.createElement("table"),this.pw.setAttribute("cellspacing","0"),this.Jd.appendChild(this.pw),this.gw=this.yw.bind(this),this.Jd.addEventListener("wheel",this.gw,{passive:!1}),this.pi=new sa(this.ff.bind(this),this.zi),this.jt().Df().u(this.kw.bind(this),this),this.Nw=new ua(this),this.pw.appendChild(this.Nw.B_());var s=this.zi.width,r=this.zi.height;if(0===s||0===r){var a=t.getBoundingClientRect();0===s&&(s=Math.floor(a.width),s-=s%2),0===r&&(r=Math.floor(a.height),r-=r%2)}this.xw(s,r),this.Cw(),t.appendChild(this.Jd),this.Sw(),this.pi.bt().Pl().u(this.pi.Ce.bind(this.pi),this),this.pi.Pa().u(this.pi.Ce.bind(this.pi),this)}return n.prototype.jt=function(){return this.pi},n.prototype.W=function(){return this.zi},n.prototype.Tw=function(){return this._w},n.prototype.Dw=function(){return this.Nw},n.prototype.g=function(){this.Jd.removeEventListener("wheel",this.gw),0!==this.dw&&window.cancelAnimationFrame(this.dw),this.pi.Df().M(this),this.pi.bt().Pl().M(this),this.pi.Pa().M(this),this.pi.g();for(var t=0,e=this._w;t<e.length;t++){var o=e[t];this.pw.removeChild(o.B_()),o.Sd().M(this),o.g()}this._w=[],S(this.Nw).g(),null!==this.Jd.parentElement&&this.Jd.parentElement.removeChild(this.Jd),this.af.g(),this.Q_.g()},n.prototype.xw=function(t,e,o){if(void 0===o&&(o=!1),this.xu!==e||this.hh!==t){this.xu=e,this.hh=t;var s=e+"px",r=t+"px";S(this.Jd).style.height=s,S(this.Jd).style.width=r,this.pw.style.height=s,this.pw.style.width=r,o?this.Aw(new U(3)):this.pi.Ce()}},n.prototype.R_=function(t){void 0===t&&(t=new U(3));for(var e=0;e<this._w.length;e++)this._w[e].R_(t.wn(e).vn);this.zi.timeScale.visible&&this.Nw.R_(t.dn())},n.prototype.Pr=function(t){this.pi.Pr(t),this.Sw(),this.xw(t.width||this.hh,t.height||this.xu)},n.prototype.Sd=function(){return this.Q_},n.prototype.Df=function(){return this.af},n.prototype.Bw=function(){var t=this;null!==this.bw&&(this.Aw(this.bw),this.bw=null);var e=this._w[0],o=Gi(document,new L(this.hh,this.xu)),s=V(o),r=Kt(o);return W(s,r,function(){var a=0,l=0,h=function(m){for(var g=0;g<t._w.length;g++){var v=t._w[g],C=v.Ld().Ot,M=S("left"===m?v.Wd():v.zd()),O=M.Y_();s.drawImage(O,a,l,M.W_(),C),l+=C}};t.Lw()&&(h("left"),a=S(e.Wd()).W_()),l=0;for(var c=0;c<t._w.length;c++){var u=t._w[c],_=u.Ld(),f=u.Y_();s.drawImage(f,a,l,_.Ft,_.Ot),l+=_.Ot}a+=e.Ld().Ft,t.Ew()&&(l=0,h("right"));var d=function(m){var g=S("left"===m?t.Nw.nw():t.Nw.sw()),v=g.Ld(),C=g.Y_();s.drawImage(C,a,l,v.Ft,v.Ot)};if(t.zi.timeScale.visible){a=0,t.Lw()&&(d("left"),a=S(e.Wd()).W_());var p=t.Nw.Ld();f=t.Nw.Y_(),s.drawImage(f,a,l,p.Ft,p.Ot),t.Ew()&&(a+=e.Ld().Ft,d("right"),s.restore())}}),o},n.prototype.Fw=function(t){return"none"===t||"left"===t&&!this.Lw()||"right"===t&&!this.Ew()||0===this._w.length?0:S("left"===t?this._w[0].Wd():this._w[0].zd()).W_()},n.prototype.Ow=function(){for(var t=0,e=0,o=0,s=0,r=this._w;s<r.length;s++){var a=r[s];this.Lw()&&(e=Math.max(e,S(a.Wd()).O_())),this.Ew()&&(o=Math.max(o,S(a.zd()).O_())),t+=a.Wa()}var h=this.xu,c=Math.max(this.hh-e-o,0),u=this.zi.timeScale.visible,_=u?this.Nw.ew():0;_%2&&(_+=1);for(var f=0+_,d=h<f?0:h-f,p=d/t,m=0,g=0;g<this._w.length;++g){var v,C;(a=this._w[g]).wd(this.pi.Cf()[g]),C=g===this._w.length-1?d-m:Math.round(a.Wa()*p),m+=v=Math.max(C,2),a.P_(new L(c,v)),this.Lw()&&a.Bd(e,"left"),this.Ew()&&a.Bd(o,"right"),a.z_()&&this.pi.Af(a.z_(),v)}this.Nw.rw(new L(u?c:0,_),u?e:0,u?o:0),this.pi.Ra(c),this.ww!==e&&(this.ww=e),this.Mw!==o&&(this.Mw=o)},n.prototype.yw=function(t){var e=t.deltaX/100,o=-t.deltaY/100;if(0!==e&&this.zi.handleScroll.mouseWheel||0!==o&&this.zi.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:e*=120,o*=120;break;case t.DOM_DELTA_LINE:e*=32,o*=32}if(0!==o&&this.zi.handleScale.mouseWheel){var s=Math.sign(o)*Math.min(1,Math.abs(o)),r=t.clientX-this.Jd.getBoundingClientRect().left;this.jt().Ef(r,s)}0!==e&&this.zi.handleScroll.mouseWheel&&this.jt().Ff(-80*e)}},n.prototype.Aw=function(t){var e,o=t.dn();3===o&&this.Vw(),3!==o&&2!==o||(this.Pw(t),this.Ww(t),this.Nw.vt(),this._w.forEach(function(s){s.bd()}),3===(null===(e=this.bw)||void 0===e?void 0:e.dn())&&(this.bw.Nn(t),this.Vw(),this.Pw(this.bw),this.Ww(this.bw),t=this.bw,this.bw=null)),this.R_(t)},n.prototype.Ww=function(t){for(var e=0,o=t.kn();e<o.length;e++)this.xn(o[e])},n.prototype.Pw=function(t){for(var e=this.pi.Cf(),o=0;o<e.length;o++)t.wn(o)._n&&e[o].so()},n.prototype.xn=function(t){var e=this.pi.bt();switch(t.bn){case 0:e.zl();break;case 1:e.Rl(t.St);break;case 2:e.gn(t.St);break;case 3:e.yn(t.St);break;case 4:e.Tl()}},n.prototype.ff=function(t){var e=this;null!==this.bw?this.bw.Nn(t):this.bw=t,this.mw||(this.mw=!0,this.dw=window.requestAnimationFrame(function(){if(e.mw=!1,e.dw=0,null!==e.bw){var o=e.bw;e.bw=null,e.Aw(o)}}))},n.prototype.Vw=function(){this.Cw()},n.prototype.Cw=function(){for(var t=this.pi.Cf(),e=t.length,o=this._w.length,s=e;s<o;s++){var r=F(this._w.pop());this.pw.removeChild(r.B_()),r.Sd().M(this),r.g()}for(s=o;s<e;s++)(r=new ha(this,t[s])).Sd().u(this.zw.bind(this),this),this._w.push(r),this.pw.insertBefore(r.B_(),this.Nw.B_());for(s=0;s<e;s++){var a=t[s];(r=this._w[s]).z_()!==a?r.wd(a):r.dd()}this.Sw(),this.Ow()},n.prototype.Rw=function(t,e){var o,s=new Map;if(null!==t&&this.pi._t().forEach(function(c){var u=c.er(t);null!==u&&s.set(c,u)}),null!==t){var r=this.pi.bt().gi(t);null!==r&&(o=r)}var a=this.jt().gf();return{rt:o,Iw:e||void 0,jw:null!==a&&a.kf instanceof Ae?a.kf:void 0,qw:s,Uw:null!==a&&void 0!==a.yd?a.yd.Zh:void 0}},n.prototype.zw=function(t,e){var o=this;this.Q_.m(function(){return o.Rw(t,e)})},n.prototype.kw=function(t,e){var o=this;this.af.m(function(){return o.Rw(t,e)})},n.prototype.Sw=function(){var t=this.zi.timeScale.visible?"":"none";this.Nw.B_().style.display=t},n.prototype.Lw=function(){return this._w[0].z_().Ya().W().visible},n.prototype.Ew=function(){return this._w[0].z_().$a().W().visible},n}();function Ki(n,t,e){var o=e.value;return{vs:t,rt:n,St:[o,o,o,o]}}function ji(n,t,e){var o=e.value,s={vs:t,rt:n,St:[o,o,o,o]};return"color"in e&&void 0!==e.color&&(s.A=e.color),s}function ie(n){return void 0!==n.St}function mt(n){return function(t,e,o){return void 0===(s=o).open&&void 0===s.value?{rt:t,vs:e}:n(t,e,o);var s}}var pa={Candlestick:mt(function(n,t,e){var o={vs:t,rt:n,St:[e.open,e.high,e.low,e.close]};return"color"in e&&void 0!==e.color&&(o.A=e.color),"borderColor"in e&&void 0!==e.borderColor&&(o.Tt=e.borderColor),"wickColor"in e&&void 0!==e.wickColor&&(o.qs=e.wickColor),o}),Bar:mt(function(n,t,e){var o={vs:t,rt:n,St:[e.open,e.high,e.low,e.close]};return"color"in e&&void 0!==e.color&&(o.A=e.color),o}),Area:mt(Ki),Baseline:mt(Ki),Histogram:mt(ji),Line:mt(ji)};function tn(n){return pa[n]}function ne(n){return 60*n*60*1e3}function Re(n){return 60*n*1e3}var oe=[{Hw:1e3,Po:10},{Hw:Re(1),Po:20},{Hw:Re(5),Po:21},{Hw:Re(30),Po:22},{Hw:ne(1),Po:30},{Hw:ne(3),Po:31},{Hw:ne(6),Po:32},{Hw:ne(12),Po:33}];function nn(n,t){if(n.getUTCFullYear()!==t.getUTCFullYear())return 70;if(n.getUTCMonth()!==t.getUTCMonth())return 60;if(n.getUTCDate()!==t.getUTCDate())return 50;for(var e=oe.length-1;e>=0;--e)if(Math.floor(t.getTime()/oe[e].Hw)!==Math.floor(n.getTime()/oe[e].Hw))return oe[e].Po;return 0}function on(n,t){if(void 0===t&&(t=0),0!==n.length){for(var e=0===t?null:n[t-1].rt.So,o=null!==e?new Date(1e3*e):null,s=0,r=t;r<n.length;++r){var a=n[r],l=new Date(1e3*a.rt.So);null!==o&&(a.Vo=nn(l,o)),s+=a.rt.So-(e||a.rt.So),e=a.rt.So,o=l}if(0===t&&n.length>1){var h=Math.ceil(s/(n.length-1)),c=new Date(1e3*(n[0].rt.So-h));n[0].Vo=nn(new Date(1e3*n[0].rt.So),c)}}}function Ze(n){if(!Vt(n))throw new Error("time must be of type BusinessDay");var t=new Date(Date.UTC(n.year,n.month-1,n.day,0,0,0,0));return{So:Math.round(t.getTime()/1e3),Co:n}}function sn(n){if(!Ui(n))throw new Error("time must be of type isUTCTimestamp");return{So:n}}function rn(n){return 0===n.length?null:Vt(n[0].time)?Ze:sn}function se(n){return Ui(n)?sn(n):Vt(n)?Ze(n):Ze(an(n))}function an(n){var t=new Date(n);if(isNaN(t.getTime()))throw new Error("Invalid date string=".concat(n,", expected format=yyyy-mm-dd"));return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function ln(n){de(n.time)&&(n.time=an(n.time))}function hn(n){return{vs:0,Yw:new Map,Ve:n}}function cn(n){if(void 0!==n&&0!==n.length)return{$w:n[0].rt.So,Kw:n[n.length-1].rt.So}}var fa=function(){function n(){this.Xw=new Map,this.Zw=new Map,this.Jw=new Map,this.Gw=[]}return n.prototype.g=function(){this.Xw.clear(),this.Zw.clear(),this.Jw.clear(),this.Gw=[]},n.prototype.Qw=function(t,e){var o=this,s=0!==this.Xw.size,r=!1,a=this.Zw.get(t);if(void 0!==a)if(1===this.Zw.size)s=!1,r=!0,this.Xw.clear();else for(var l=0,h=this.Gw;l<h.length;l++)h[l].pointData.Yw.delete(t)&&(r=!0);var c=[];if(0!==e.length){e.forEach(ln);var u=S(rn(e)),_=tn(t.Rr());c=e.map(function(p){var m=u(p.time),g=o.Xw.get(m.So);void 0===g&&(g=hn(m),o.Xw.set(m.So,g),r=!0);var v=_(m,g.vs,p);return g.Yw.set(t,v),v})}s&&this.tM(),this.iM(t,c);var f=-1;if(r){var d=[];this.Xw.forEach(function(p){d.push({Vo:0,rt:p.Ve,pointData:p})}),d.sort(function(p,m){return p.rt.So-m.rt.So}),f=this.nM(d)}return this.sM(t,f,function(p,m){var g=cn(p),v=cn(m);if(void 0!==g&&void 0!==v)return{Ae:g.Kw>=v.Kw&&g.$w>=v.$w}}(this.Zw.get(t),a))},n.prototype.Yf=function(t){return this.Qw(t,[])},n.prototype.hM=function(t,e){ln(e);var o=S(rn([e]))(e.time),s=this.Jw.get(t);if(void 0!==s&&o.So<s.So)throw new Error("Cannot update oldest data, last time=".concat(s.So,", new time=").concat(o.So));var r=this.Xw.get(o.So),a=void 0===r;void 0===r&&(r=hn(o),this.Xw.set(o.So,r));var l=tn(t.Rr())(o,r.vs,e);r.Yw.set(t,l),this.rM(t,l);var h={Ae:ie(l)};if(!a)return this.sM(t,-1,h);var c={Vo:0,rt:r.Ve,pointData:r},u=bt(this.Gw,c.rt.So,function(f,d){return f.rt.So<d});this.Gw.splice(u,0,c);for(var _=u;_<this.Gw.length;++_)Qe(this.Gw[_].pointData,_);return on(this.Gw,u),this.sM(t,u,h)},n.prototype.rM=function(t,e){var o=this.Zw.get(t);void 0===o&&this.Zw.set(t,o=[]);var s=0!==o.length?o[o.length-1]:null;null===s||e.rt.So>s.rt.So?ie(e)&&o.push(e):ie(e)?o[o.length-1]=e:o.splice(-1,1),this.Jw.set(t,e.rt)},n.prototype.iM=function(t,e){0!==e.length?(this.Zw.set(t,e.filter(ie)),this.Jw.set(t,e[e.length-1].rt)):(this.Zw.delete(t),this.Jw.delete(t))},n.prototype.tM=function(){for(var t=0,e=this.Gw;t<e.length;t++){var o=e[t];0===o.pointData.Yw.size&&this.Xw.delete(o.rt.So)}},n.prototype.nM=function(t){for(var e=-1,o=0;o<this.Gw.length&&o<t.length;++o){var s=this.Gw[o],r=t[o];if(s.rt.So!==r.rt.So){e=o;break}r.Vo=s.Vo,Qe(r.pointData,o)}if(-1===e&&this.Gw.length!==t.length&&(e=Math.min(this.Gw.length,t.length)),-1===e)return-1;for(o=e;o<t.length;++o)Qe(t[o].pointData,o);return on(t,e),this.Gw=t,e},n.prototype.eM=function(){if(0===this.Zw.size)return null;var t=0;return this.Zw.forEach(function(e){0!==e.length&&(t=Math.max(t,e[e.length-1].vs))}),t},n.prototype.sM=function(t,e,o){var s={uM:new Map,bt:{ml:this.eM()}};if(-1!==e)this.Zw.forEach(function(a,l){s.uM.set(l,{ph:a,aM:l===t?o:void 0})}),this.Zw.has(t)||s.uM.set(t,{ph:[],aM:o}),s.bt.oM=this.Gw,s.bt.lM=e;else{var r=this.Zw.get(t);s.uM.set(t,{ph:r||[],aM:o})}return s},n}();function Qe(n,t){n.vs=t,n.Yw.forEach(function(e){e.vs=t})}var da={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:""},ga=function(){function n(t){this.Lr=t}return n.prototype.applyOptions=function(t){this.Lr.Pr(t)},n.prototype.options=function(){return this.Lr.W()},n.prototype.fM=function(){return this.Lr},n}();function lt(n){var t=n.overlay,e=function(o,s){var r={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&s.indexOf(a)<0&&(r[a]=o[a]);if(null!=o&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(o);l<a.length;l++)s.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(o,a[l])&&(r[a[l]]=o[a[l]])}return r}(n,["overlay"]);return t&&(e.priceScaleId=""),e}var vt=function(){function n(t,e,o){this.Kn=t,this.cM=e,this.vM=o}return n.prototype.priceFormatter=function(){return this.Kn.qe()},n.prototype.priceToCoordinate=function(t){var e=this.Kn.kt();return null===e?null:this.Kn.Ct().xt(t,e.St)},n.prototype.coordinateToPrice=function(t){var e=this.Kn.kt();return null===e?null:this.Kn.Ct().qi(t,e.St)},n.prototype.barsInLogicalRange=function(t){if(null===t)return null;var e=new Wt(new It(t.from,t.to)).jo(),o=this.Kn.an();if(o.wi())return null;var s=o.ne(e.In(),1),r=o.ne(e.jn(),-1),a=S(o.Qr()),l=S(o.un());if(null!==s&&null!==r&&s.vs>r.vs)return{barsBefore:t.from-a,barsAfter:l-t.to};var h={barsBefore:null===s||s.vs===a?t.from-a:s.vs-a,barsAfter:null===r||r.vs===l?l-t.to:l-r.vs};return null!==s&&null!==r&&(h.from=s.rt.Co||s.rt.So,h.to=r.rt.Co||r.rt.So),h},n.prototype.setData=function(t){this.Kn.Rr(),this.cM._M(this.Kn,t)},n.prototype.update=function(t){this.Kn.Rr(),this.cM.dM(this.Kn,t)},n.prototype.setMarkers=function(t){var e=t.map(function(o){return A(A({},o),{time:se(o.time)})});this.Kn.Le(e)},n.prototype.applyOptions=function(t){var e=lt(t);this.Kn.Pr(e)},n.prototype.options=function(){return q(this.Kn.W())},n.prototype.priceScale=function(){return this.vM.priceScale(this.Kn.Ct().Ke())},n.prototype.createPriceLine=function(t){var e=D(q(da),t),o=this.Kn.Ee(e);return new ga(o)},n.prototype.removePriceLine=function(t){this.Kn.Fe(t.fM())},n.prototype.seriesType=function(){return this.Kn.Rr()},n}(),ma=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return b(t,n),t.prototype.applyOptions=function(e){zi(e),n.prototype.applyOptions.call(this,e)},t}(vt),De={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},va={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:me,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},un={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:11,fontFamily:me},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:A({},De),leftPriceScale:A(A({},De),{visible:!1}),rightPriceScale:A(A({},De),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:va,localization:{locale:jt?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},Sa={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Ta={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},ya={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Ma={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Ca={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},ba={color:"#26a69a",base:0},St={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Aa=function(){function n(t,e){this.wM=t,this.MM=e}return n.prototype.applyOptions=function(t){this.wM.jt().Nf(this.MM,t)},n.prototype.options=function(){return this._i().W()},n.prototype.width=function(){return zt(this.MM)?this.wM.Fw("left"===this.MM?"left":"right"):0},n.prototype._i=function(){return S(this.wM.jt().xf(this.MM)).Ct},n}(),xa=function(){function n(t,e){this.bM=new Q,this.Go=new Q,this.Zd=new Q,this.pi=t,this.Da=t.bt(),this.Nw=e,this.Da.Ol().u(this.mM.bind(this)),this.Da.Vl().u(this.pM.bind(this)),this.Nw.hw().u(this.gM.bind(this))}return n.prototype.g=function(){this.Da.Ol().M(this),this.Da.Vl().M(this),this.Nw.hw().M(this),this.bM.g(),this.Go.g(),this.Zd.g()},n.prototype.scrollPosition=function(){return this.Da.Nl()},n.prototype.scrollToPosition=function(t,e){e?this.Da.Fl(t,1e3):this.pi.yn(t)},n.prototype.scrollToRealTime=function(){this.Da.El()},n.prototype.getVisibleRange=function(){var t,e,o=this.Da.cl();return null===o?null:{from:null!==(t=o.from.Co)&&void 0!==t?t:o.from.So,to:null!==(e=o.to.Co)&&void 0!==e?e:o.to.So}},n.prototype.setVisibleRange=function(t){var e={from:se(t.from),to:se(t.to)},o=this.Da.wl(e);this.pi.$f(o)},n.prototype.getVisibleLogicalRange=function(){var t=this.Da.fl();return null===t?null:{from:t.In(),to:t.jn()}},n.prototype.setVisibleLogicalRange=function(t){_t(t.from<=t.to,"The from index cannot be after the to index."),this.pi.$f(t)},n.prototype.resetTimeScale=function(){this.pi.pn()},n.prototype.fitContent=function(){this.pi.zl()},n.prototype.logicalToCoordinate=function(t){var e=this.pi.bt();return e.wi()?null:e.At(t)},n.prototype.coordinateToLogical=function(t){return this.Da.wi()?null:this.Da.pl(t)},n.prototype.timeToCoordinate=function(t){var e=se(t),o=this.Da.Ze(e,!1);return null===o?null:this.Da.At(o)},n.prototype.coordinateToTime=function(t){var e,o=this.pi.bt(),s=o.pl(t),r=o.gi(s);return null===r?null:null!==(e=r.Co)&&void 0!==e?e:r.So},n.prototype.width=function(){return this.Nw.Ld().Ft},n.prototype.height=function(){return this.Nw.Ld().Ot},n.prototype.subscribeVisibleTimeRangeChange=function(t){this.bM.u(t)},n.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.bM._(t)},n.prototype.subscribeVisibleLogicalRangeChange=function(t){this.Go.u(t)},n.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.Go._(t)},n.prototype.subscribeSizeChange=function(t){this.Zd.u(t)},n.prototype.unsubscribeSizeChange=function(t){this.Zd._(t)},n.prototype.applyOptions=function(t){this.Da.Pr(t)},n.prototype.options=function(){return q(this.Da.W())},n.prototype.mM=function(){this.bM.p()&&this.bM.m(this.getVisibleRange())},n.prototype.pM=function(){this.Go.p()&&this.Go.m(this.getVisibleLogicalRange())},n.prototype.gM=function(t){this.Zd.m(t.Ft,t.Ot)},n}();function Tt(n){void 0!==n&&"custom"!==n.type&&void 0!==n.minMove&&void 0===n.precision&&(n.precision=function(e){if(e>=1)return 0;for(var o=0;o<8;o++){var s=Math.round(e);if(Math.abs(s-e)<1e-8)return o;e*=10}return o}(n.minMove))}function _n(n){return function(t){if(ge(t.handleScale)){var e=t.handleScale;t.handleScale={axisDoubleClickReset:e,axisPressedMouseMove:{time:e,price:e},mouseWheel:e,pinch:e}}else if(void 0!==t.handleScale&&ge(t.handleScale.axisPressedMouseMove)){var o=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:o,price:o}}var s=t.handleScroll;ge(s)&&(t.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(n),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var e=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=D(t.leftPriceScale,t.priceScale),t.rightPriceScale=D(t.rightPriceScale,t.priceScale),"left"===e&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===e&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===e&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(n),(t=n).layout&&t.layout.backgroundColor&&!t.layout.background&&(t.layout.background={type:"solid",color:t.layout.backgroundColor}),n;var t}var Ba=function(){function n(t,e){var o=this;this.yM=new fa,this.kM=new Map,this.NM=new Map,this.xM=new Q,this.CM=new Q;var s=void 0===e?q(un):D(q(un),_n(e));this.wM=new _a(t,s),this.wM.Sd().u(function(a){o.xM.p()&&o.xM.m(o.SM(a()))},this),this.wM.Df().u(function(a){o.CM.p()&&o.CM.m(o.SM(a()))},this);var r=this.wM.jt();this.TM=new xa(r,this.wM.Dw())}return n.prototype.remove=function(){this.wM.Sd().M(this),this.wM.Df().M(this),this.TM.g(),this.wM.g(),this.kM.clear(),this.NM.clear(),this.xM.g(),this.CM.g(),this.yM.g()},n.prototype.resize=function(t,e,o){this.wM.xw(t,e,o)},n.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Tt((t=lt(t)).priceFormat);var e=D(q(St),Ma,t),o=this.wM.jt().Uf("Area",e),s=new vt(o,this,this);return this.kM.set(s,o),this.NM.set(o,s),s},n.prototype.addBaselineSeries=function(t){void 0===t&&(t={}),Tt((t=lt(t)).priceFormat);var e=D(q(St),q(Ca),t),o=this.wM.jt().Uf("Baseline",e),s=new vt(o,this,this);return this.kM.set(s,o),this.NM.set(o,s),s},n.prototype.addBarSeries=function(t){void 0===t&&(t={}),Tt((t=lt(t)).priceFormat);var e=D(q(St),Ta,t),o=this.wM.jt().Uf("Bar",e),s=new vt(o,this,this);return this.kM.set(s,o),this.NM.set(o,s),s},n.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),zi(t=lt(t)),Tt(t.priceFormat);var e=D(q(St),Sa,t),o=this.wM.jt().Uf("Candlestick",e),s=new ma(o,this,this);return this.kM.set(s,o),this.NM.set(o,s),s},n.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Tt((t=lt(t)).priceFormat);var e=D(q(St),ba,t),o=this.wM.jt().Uf("Histogram",e),s=new vt(o,this,this);return this.kM.set(s,o),this.NM.set(o,s),s},n.prototype.addLineSeries=function(t){void 0===t&&(t={}),Tt((t=lt(t)).priceFormat);var e=D(q(St),ya,t),o=this.wM.jt().Uf("Line",e),s=new vt(o,this,this);return this.kM.set(s,o),this.NM.set(o,s),s},n.prototype.removeSeries=function(t){var e=F(this.kM.get(t)),o=this.yM.Yf(e);this.wM.jt().Yf(e),this.DM(o),this.kM.delete(t),this.NM.delete(e)},n.prototype._M=function(t,e){this.DM(this.yM.Qw(t,e))},n.prototype.dM=function(t,e){this.DM(this.yM.hM(t,e))},n.prototype.subscribeClick=function(t){this.xM.u(t)},n.prototype.unsubscribeClick=function(t){this.xM._(t)},n.prototype.subscribeCrosshairMove=function(t){this.CM.u(t)},n.prototype.unsubscribeCrosshairMove=function(t){this.CM._(t)},n.prototype.priceScale=function(t){return void 0===t&&(t=this.wM.jt().Kf()),new Aa(this.wM,t)},n.prototype.timeScale=function(){return this.TM},n.prototype.applyOptions=function(t){this.wM.Pr(_n(t))},n.prototype.options=function(){return this.wM.W()},n.prototype.takeScreenshot=function(){return this.wM.Bw()},n.prototype.DM=function(t){var e=this.wM.jt();e.jf(t.bt.ml,t.bt.oM,t.bt.lM),t.uM.forEach(function(o,s){return s.Z(o.ph,o.aM)}),e.yl()},n.prototype.AM=function(t){return F(this.NM.get(t))},n.prototype.SM=function(t){var e=this,o=new Map;t.qw.forEach(function(r,a){o.set(e.AM(a),r)});var s=void 0===t.jw?void 0:this.AM(t.jw);return{time:t.rt&&(t.rt.Co||t.rt.So),point:t.Iw,hoveredSeries:s,hoveredMarkerId:t.Uw,seriesPrices:o}},n}();function pn(n,t){var e;if(de(n)){var o=document.getElementById(n);_t(null!==o,"Cannot find element in DOM with id=".concat(n)),e=o}else e=n;return new Ba(e,t)}let fn=(()=>{class n{constructor(e){this.element=e,this.height=500}resizeCanvas(){this.width=this.element.nativeElement.parentElement.offsetWidth,this.chart.applyOptions({width:this.width,height:this.height})}ngOnInit(){this.width=this.element.nativeElement.parentElement.offsetWidth,this.container=document.createElement("div");const e=this.element.nativeElement.appendChild(this.container);this.chart=pn(e,{width:this.width,height:this.height,crosshair:{mode:Ft.Normal},layout:{backgroundColor:"#000",textColor:"rgba(255, 255, 255, 0.8)"},grid:{vertLines:{color:"rgba(255, 255, 255, 0.1)"},horzLines:{color:"rgba(255, 255, 255, 0.1)"}},rightPriceScale:{borderColor:"rgba(255, 255, 255, 0.2)"},timeScale:{borderColor:"rgba(255, 255, 255, 0.2)"}}),this.lineSeries=this.chart.addLineSeries({color:"rgba(37, 177, 53, 1)",lineColor:"rgba(216, 27, 96, 1)",lineWidth:2}),this.areaSeries=this.chart.addAreaSeries({topColor:"rgba(33, 150, 243, 0.7)",bottomColor:"rgba(33, 150, 243, 0.1)",lineColor:"rgba(33, 150, 243, 0.1)",lineWidth:2});const o=document.createElement("div");o.className="floating-tooltip-2",e.appendChild(o),this.chart.subscribeCrosshairMove(s=>{if(!s.time||s.point.x<0||s.point.x>this.width||s.point.y<0||s.point.y>this.height)return void(o.style.display="none");const r=Vt(s.time)?this.businessDayToString(s.time):new Date(1e3*s.time).toLocaleDateString();o.style.display="block";const a=s.seriesPrices.get(this.areaSeries),l=s.seriesPrices.get(this.lineSeries),h="Handler",c="Volum";o.innerHTML=`<table>\n          <tr><td class="tradesText">${h}:</td><td class="text-right tradesText">${Math.round(100*l)/100}</td></tr>\n          <tr><td class="volumeText">${c}:<td class="text-right volumeText">${Math.round(100*a)/100} BIT</td></tr>\n        </table>\n        <div>${r}</div>`;const u=s.point.y;let p=s.point.x+15;p>this.width-100&&(p=s.point.x-15-100);let m=u+15;m>this.height-80&&(m=u-80-15),o.style.left=p+"px",o.style.top=m+"px"}),this.updateData()}businessDayToString(e){return e.year+"-"+e.month+"-"+e.day}ngOnChanges(e){!e.data||e.data.isFirstChange()||this.updateData()}updateData(){this.areaSeries.setData(this.data),this.lineSeries.setData(this.lineData)}ngOnDestroy(){this.chart.remove()}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(i.SBq))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-lightweight-charts-area"]],hostBindings:function(e,o){1&e&&i.NdJ("resize",function(r){return o.resizeCanvas(r)},!1,i.Jf7)},inputs:{data:"data",lineData:"lineData",precision:"precision",height:"height"},features:[i.TTD],decls:1,vars:0,template:function(e,o){1&e&&i._UZ(0,"ng-component")},dependencies:[x.fw],styles:["[_nghost-%COMP%]     .floating-tooltip-2{width:160px;height:80px;position:absolute;display:none;padding:8px;box-sizing:border-box;font-size:12px;color:#fff;background-color:#131722;text-align:left;z-index:1000;top:12px;left:12px;pointer-events:none;border-radius:2px}[_nghost-%COMP%]     .volumeText{color:#2196f3b3}[_nghost-%COMP%]     .tradesText{color:#25b135}"],changeDetection:0}),n})();function wa(n,t){1&n&&(i.TgZ(0,"th"),i.SDv(1,10),i.qZA())}function Oa(n,t){1&n&&i.GkF(0)}function Ia(n,t){1&n&&i.GkF(0)}const Na=function(n){return{$implicit:n}};function Pa(n,t){if(1&n&&i.YNc(0,Ia,1,0,"ng-container",4),2&n){const e=i.oxw(),o=i.MAs(17);i.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",i.VKq(2,Na,"BIT"===e.market.lsymbol?e.market.rsymbol:e.market.lsymbol))}}function Ea(n,t){1&n&&i.SDv(0,11)}function ka(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"span",17),i._uU(2),i.ALo(3,"currency"),i.qZA(),i.BQk()),2&n){const e=i.oxw(2).$implicit,o=i.oxw(2);i.xp6(2),i.Oqu(i.xi3(3,1,e.price,(e._market||o.market).rsymbol))}}function Ra(n,t){if(1&n&&(i._uU(0),i.ALo(1,"number"),i.TgZ(2,"span",18),i._uU(3),i.qZA()),2&n){const e=i.oxw(2).$implicit,o=i.oxw(2);i.hij("",i.xi3(1,2,e.price,"1.2-"+(e._market||o.market).rprecision)," "),i.xp6(3),i.Oqu((e._market||o.market).rsymbol)}}function Za(n,t){if(1&n&&(i.TgZ(0,"td"),i.YNc(1,ka,4,4,"ng-container",7),i.YNc(2,Ra,4,5,"ng-template",null,16,i.W1O),i.qZA()),2&n){const e=i.MAs(3),o=i.oxw().$implicit,s=i.oxw(2);i.xp6(1),i.Q6J("ngIf","fiat"===(o._market||s.market).rtype)("ngIfElse",e)}}function Qa(n,t){1&n&&i.GkF(0)}function Da(n,t){1&n&&i.GkF(0)}function La(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"span",17),i._uU(2),i.ALo(3,"currency"),i.qZA(),i.BQk()),2&n){const e=i.oxw(2).$implicit,o=i.oxw(2);i.xp6(2),i.Oqu(i.xi3(3,1,e.amount,(e._market||o.market).rsymbol))}}function qa(n,t){if(1&n&&(i._uU(0),i.ALo(1,"number"),i.TgZ(2,"span",18),i._uU(3),i.qZA()),2&n){const e=i.oxw(2).$implicit,o=i.oxw(2);i.hij("",i.xi3(1,2,e.amount,"1.2-"+(e._market||o.market).lprecision)," "),i.xp6(3),i.Oqu((e._market||o.market).lsymbol)}}function $a(n,t){if(1&n&&(i.TgZ(0,"td"),i.YNc(1,La,4,4,"ng-container",7),i.YNc(2,qa,4,5,"ng-template",null,19,i.W1O),i.qZA()),2&n){const e=i.MAs(3),o=i.oxw().$implicit,s=i.oxw(2);i.xp6(1),i.Q6J("ngIf","fiat"===(o._market||s.market).ltype)("ngIfElse",e)}}function Fa(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"span",17),i._uU(2),i.ALo(3,"currency"),i.qZA(),i.BQk()),2&n){const e=i.oxw(2).$implicit,o=i.oxw(2);i.xp6(2),i.Oqu(i.xi3(3,1,e.volume,(e._market||o.market).rsymbol))}}function za(n,t){if(1&n&&(i._uU(0),i.ALo(1,"number"),i.TgZ(2,"span",18),i._uU(3),i.qZA()),2&n){const e=i.oxw(2).$implicit,o=i.oxw(2);i.hij("",i.xi3(1,2,e.volume,"1.2-"+(e._market||o.market).rprecision)," "),i.xp6(3),i.Oqu((e._market||o.market).rsymbol)}}function Ua(n,t){if(1&n&&(i.TgZ(0,"td"),i.YNc(1,Fa,4,4,"ng-container",7),i.YNc(2,za,4,5,"ng-template",null,20,i.W1O),i.qZA()),2&n){const e=i.MAs(3),o=i.oxw().$implicit,s=i.oxw(2);i.xp6(1),i.Q6J("ngIf","fiat"===(o._market||s.market).rtype)("ngIfElse",e)}}function Ga(n,t){if(1&n&&(i.TgZ(0,"tr")(1,"td"),i._uU(2),i.ALo(3,"date"),i.qZA(),i.YNc(4,Za,4,2,"td",3),i.YNc(5,Qa,1,0,"ng-container",13),i.YNc(6,Da,1,0,"ng-container",13),i.YNc(7,$a,4,2,"ng-template",null,14,i.W1O),i.YNc(9,Ua,4,2,"ng-template",null,15,i.W1O),i.qZA()),2&n){const e=t.$implicit,o=i.MAs(8),s=i.MAs(10),r=i.oxw(2);i.xp6(2),i.hij(" \u200e",i.xi3(3,4,e.trade_date,"yyyy-MM-dd HH:mm")," "),i.xp6(2),i.Q6J("ngIf","all"===r.view),i.xp6(1),i.Q6J("ngTemplateOutlet","BIT"===(e._market||r.market).rsymbol?s:o),i.xp6(1),i.Q6J("ngTemplateOutlet","BIT"===(e._market||r.market).rsymbol?o:s)}}function Ja(n,t){if(1&n&&(i.TgZ(0,"tbody"),i.YNc(1,Ga,11,7,"tr",12),i.qZA()),2&n){const e=t.ngIf;i.xp6(1),i.Q6J("ngForOf",e)}}function Ya(n,t){1&n&&(i.TgZ(0,"td"),i._UZ(1,"span",21),i.qZA())}function Xa(n,t){if(1&n&&(i.TgZ(0,"tr"),i.YNc(1,Ya,2,0,"td",12),i.qZA()),2&n){const e=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",e.loadingColumns)}}const Ha=function(){return[1,2,3,4,5,6,7,8,9,10]};function Wa(n,t){1&n&&i.YNc(0,Xa,2,1,"tr",12),2&n&&i.Q6J("ngForOf",i.DdM(1,Ha))}function Va(n,t){1&n&&i.SDv(0,22),2&n&&(i.pQV(t.$implicit),i.QtT(0))}const Ka=function(){return{$implicit:"BIT"}};let Le=(()=>{class n{constructor(){this.view="all",this.loadingColumns=[1,2,3,4]}ngOnChanges(){"small"===this.view&&(this.loadingColumns=[1,2,3])}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-trades"]],inputs:{trades$:"trades$",market:"market",view:"view"},features:[i.TTD],decls:18,vars:10,consts:function(){let t,e,o,s;return t="Dato",e="Pris",o="Bel\xF8p",s="Bel\xF8p (" + "\ufffd0\ufffd" + ")",[[1,"table-container"],[1,"table","table-borderless","table-striped"],t,[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngIf","ngIfElse"],["noMarket",""],[4,"ngIf","ngIfElse"],["loadingTmpl",""],["amount",""],e,o,[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],["tradeAmount",""],["tradeVolume",""],["priceCrypto",""],[1,"green-color"],[1,"symbol"],["amountCrypto",""],["volumeCrypto",""],[1,"skeleton-loader"],s]},template:function(e,o){if(1&e&&(i.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"th"),i.SDv(4,2),i.qZA(),i.YNc(5,wa,2,0,"th",3),i.TgZ(6,"th"),i.YNc(7,Oa,1,0,"ng-container",4),i.qZA(),i.TgZ(8,"th"),i.YNc(9,Pa,1,4,"ng-template",5),i.YNc(10,Ea,1,0,"ng-template",null,6,i.W1O),i.qZA()(),i.YNc(12,Ja,2,1,"tbody",7),i.ALo(13,"async"),i.qZA()(),i.YNc(14,Wa,1,2,"ng-template",null,8,i.W1O),i.YNc(16,Va,1,1,"ng-template",null,9,i.W1O)),2&e){const s=i.MAs(11),r=i.MAs(15),a=i.MAs(17);i.xp6(5),i.Q6J("ngIf","all"===o.view),i.xp6(2),i.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",i.DdM(9,Ka)),i.xp6(2),i.Q6J("ngIf",o.market)("ngIfElse",s),i.xp6(3),i.Q6J("ngIf",i.lcZ(13,7,o.trades$))("ngIfElse",r)}},dependencies:[T.sg,T.O5,T.tP,T.Ov,T.JJ,T.H9,T.uU],styles:[".table-container[_ngcontent-%COMP%]{overflow:scroll;scrollbar-width:none;font-size:13px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media (min-width: 576px){.table-container[_ngcontent-%COMP%]{font-size:16px}}.table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:right}.table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{text-align:left}.table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){display:none}@media (min-width: 1100px){.table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){display:table-cell}}.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right}.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:left}.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){display:none}@media (min-width: 1100px){.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){display:table-cell}}"],changeDetection:0}),n})();function ja(n,t){1&n&&(i.TgZ(0,"div",10),i._UZ(1,"div",11),i.qZA())}function tl(n,t){if(1&n&&(i.ynx(0),i._UZ(1,"app-lightweight-charts-area",12),i.BQk()),2&n){const e=t.ngIf;i.xp6(1),i.Q6J("data",e.data)("lineData",e.linesData)}}function el(n,t){1&n&&i.SDv(0,13)}function il(n,t){1&n&&i.SDv(0,14)}function nl(n,t){if(1&n&&i._UZ(0,"app-fiat",29),2&n){const e=i.oxw().$implicit;i.Q6J("value",1e8*e.last)}}function ol(n,t){if(1&n&&(i.TgZ(0,"span",30),i._uU(1),i.ALo(2,"currency"),i.qZA()),2&n){const e=i.oxw().$implicit;i.xp6(1),i.Oqu(i.xi3(2,1,e.last,e.market.rsymbol))}}const sl=function(n,t){return[n,t]};function rl(n,t){if(1&n&&(i.TgZ(0,"tr")(1,"td")(2,"a",26),i.ALo(3,"relativeUrl"),i._uU(4),i.qZA()(),i.TgZ(5,"td"),i.YNc(6,nl,1,1,"app-fiat",27),i.YNc(7,ol,3,4,"ng-template",null,28,i.W1O),i.qZA(),i.TgZ(9,"td"),i._UZ(10,"app-fiat",29),i.qZA(),i.TgZ(11,"td"),i._uU(12),i.qZA()()),2&n){const e=t.$implicit,o=i.MAs(8);i.xp6(2),i.Q6J("routerLink",i.WLB(8,sl,i.lcZ(3,6,"/market"),e.pair_url)),i.xp6(2),i.hij("",e.name,")"),i.xp6(2),i.Q6J("ngIf","crypto"===e.market.rtype)("ngIfElse",o),i.xp6(4),i.Q6J("value",null==e.volume?null:e.volume.volume),i.xp6(2),i.Oqu(null!=e.volume&&e.volume.num_trades?null==e.volume?null:e.volume.num_trades:0)}}function al(n,t){if(1&n&&(i.TgZ(0,"tbody"),i.YNc(1,rl,13,11,"tr",25),i.qZA()),2&n){const e=i.oxw().ngIf,o=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.value)("ngForTrackBy",o.trackByFn)}}const qe=function(){return["fas","chevron-down"]};function ll(n,t){if(1&n){const e=i.EpF();i.ynx(0),i.TgZ(1,"div",15)(2,"table",16)(3,"thead")(4,"th"),i.ynx(5),i.SDv(6,17),i.BQk(),i.TgZ(7,"button",18),i.NdJ("click",function(){i.CHM(e);const s=i.oxw();return i.KtG(s.sort("name"))}),i.ALo(8,"async"),i._UZ(9,"fa-icon",19),i.qZA()(),i.TgZ(10,"th"),i.SDv(11,20),i.qZA(),i.TgZ(12,"th"),i.ynx(13),i.SDv(14,21),i.BQk(),i.TgZ(15,"button",18),i.NdJ("click",function(){i.CHM(e);const s=i.oxw();return i.KtG(s.sort("volumes"))}),i.ALo(16,"async"),i._UZ(17,"fa-icon",19),i.qZA()(),i.TgZ(18,"th"),i.ynx(19),i.SDv(20,22),i.BQk(),i.TgZ(21,"button",18),i.NdJ("click",function(){i.CHM(e);const s=i.oxw();return i.KtG(s.sort("trades"))}),i.ALo(22,"async"),i._UZ(23,"fa-icon",19),i.qZA()()(),i.YNc(24,al,2,2,"tbody",4),i.qZA()(),i._UZ(25,"br")(26,"br"),i.TgZ(27,"h2"),i.SDv(28,23),i.qZA(),i._UZ(29,"app-bisq-trades",24),i.BQk()}if(2&n){const e=t.ngIf,o=i.oxw(),s=i.MAs(18);i.xp6(7),i.Q6J("disabled","name"===i.lcZ(8,12,o.sort$)),i.xp6(2),i.Q6J("icon",i.DdM(18,qe))("fixedWidth",!0),i.xp6(6),i.Q6J("disabled","volumes"===i.lcZ(16,14,o.sort$)),i.xp6(2),i.Q6J("icon",i.DdM(19,qe))("fixedWidth",!0),i.xp6(4),i.Q6J("disabled","trades"===i.lcZ(22,16,o.sort$)),i.xp6(2),i.Q6J("icon",i.DdM(20,qe))("fixedWidth",!0),i.xp6(1),i.Q6J("ngIf",e.value)("ngIfElse",s),i.xp6(5),i.Q6J("trades$",o.trades$)}}function hl(n,t){1&n&&(i.TgZ(0,"td"),i._UZ(1,"span",32),i.qZA())}const cl=function(){return[1,2,3,4]};function ul(n,t){1&n&&(i.TgZ(0,"tr"),i.YNc(1,hl,2,0,"td",31),i.qZA()),2&n&&(i.xp6(1),i.Q6J("ngForOf",i.DdM(1,cl)))}const _l=function(){return[1,2,3,4,5,6,7,8,9,10]};function pl(n,t){1&n&&i.YNc(0,ul,2,2,"tr",31),2&n&&i.Q6J("ngForOf",i.DdM(1,_l))}const fl=function(n){return{value:n}};let dl=(()=>{class n{constructor(e,o,s,r){this.websocketService=e,this.bisqApiService=o,this.stateService=s,this.seoService=r,this.sort$=new ei.X("trades"),this.allowCryptoCoins=["usdc","l-btc","bsq"]}ngOnInit(){this.seoService.setTitle("Markets"),this.websocketService.want(["blocks"]),this.volumes$=this.bisqApiService.getAllVolumesDay$().pipe((0,I.U)(o=>({data:o.map(a=>({time:a.period_start,value:a.volume})),linesData:o.map(a=>({time:a.period_start,value:a.num_trades}))})));const e=this.bisqApiService.getMarkets$().pipe((0,ii.B)());this.tickers$=(0,ot.a)([this.bisqApiService.getMarketsTicker$(),e,this.bisqApiService.getMarketVolumesByTime$("7d")]).pipe((0,I.U)(([o,s,r])=>{const a=[];for(const l in o){if("bisq"!==this.stateService.env.BASE_MODULE){const c=l.split("_");if("btc"===c[1]&&-1===this.allowCryptoCoins.indexOf(c[0]))continue}const h=o[l];h.pair_url=l,h.pair=l.replace("_","/").toUpperCase(),h.market=s[l],h.volume=r[l],h.name=`${"crypto"===h.market.rtype?h.market.lname:h.market.rname} (${"crypto"===h.market.rtype?h.market.lsymbol:h.market.rsymbol}`,a.push(h)}return a}),(0,N.w)(o=>(0,ot.a)([this.sort$,(0,$.of)(o)])),(0,I.U)(([o,s])=>("trades"===o?s.sort((r,a)=>(a.volume&&a.volume.num_trades||0)-(r.volume&&r.volume.num_trades||0)):"volumes"===o?s.sort((r,a)=>(a.volume&&a.volume.volume||0)-(r.volume&&r.volume.volume||0)):"name"===o&&s.sort((r,a)=>r.name.localeCompare(a.name)),s))),this.trades$=(0,ot.a)([this.bisqApiService.getMarketTrades$("all"),e]).pipe((0,I.U)(([o,s])=>("bisq"!==this.stateService.env.BASE_MODULE&&(o=o.filter(r=>{const a=r.market.split("_");return!("btc"===a[1]&&-1===this.allowCryptoCoins.indexOf(a[0]))})),o.map(r=>(r._market=s[r.market],r)))))}trackByFn(e){return e}sort(e){this.sort$.next(e)}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(J.i),i.Y36(w),i.Y36(ut.b),i.Y36(Z.v))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-dashboard"]],decls:19,vars:11,consts:function(){let t,e,o,s,r,a,l,h;return t="Bisq handelsvolum",e="Markeder",o="Bitnet Markeder",s="Valuta",r="Pris",a="Volum (7d)",l="Handler (7d)",h="Siste handler",[[1,"container-xl"],t,["id","volumeHolder"],["loadingVolumes",""],[4,"ngIf","ngIfElse"],[1,"container-info"],[3,"ngIf","ngIfElse"],["nonOfficialMarkets",""],[4,"ngIf"],["loadingTmpl",""],[1,"text-center","loadingVolumes"],[1,"spinner-border","text-light"],[3,"data","lineData"],e,o,[1,"table-container"],[1,"table","table-borderless","table-striped"],s,[1,"btn","btn-link","btn-sm",3,"disabled","click"],[3,"icon","fixedWidth"],r,a,l,h,[3,"trades$"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink"],[3,"value",4,"ngIf","ngIfElse"],["fiat",""],[3,"value"],[1,"green-color"],[4,"ngFor","ngForOf"],[1,"skeleton-loader"]]},template:function(e,o){if(1&e&&(i.TgZ(0,"div",0)(1,"h1"),i.SDv(2,1),i.qZA(),i.TgZ(3,"div",2),i.YNc(4,ja,2,0,"ng-template",null,3,i.W1O),i.YNc(6,tl,2,2,"ng-container",4),i.ALo(7,"async"),i.qZA(),i._UZ(8,"br")(9,"br"),i.TgZ(10,"div",5)(11,"h1"),i.YNc(12,el,1,0,"ng-template",6),i.YNc(13,il,1,0,"ng-template",null,7,i.W1O),i.qZA(),i.YNc(15,ll,30,21,"ng-container",8),i.ALo(16,"async"),i.qZA()(),i.YNc(17,pl,1,2,"ng-template",null,9,i.W1O)),2&e){const s=i.MAs(5),r=i.MAs(14);i.xp6(6),i.Q6J("ngIf",i.lcZ(7,5,o.volumes$))("ngIfElse",s),i.xp6(6),i.Q6J("ngIf","bisq"===o.stateService.env.BASE_MODULE)("ngIfElse",r),i.xp6(3),i.Q6J("ngIf",i.VKq(9,fl,i.lcZ(16,7,o.tickers$)))}},dependencies:[T.sg,T.O5,x.yS,ht.BN,pe.B,fn,Le,T.Ov,T.H9,nt.w],styles:["#volumeHolder[_ngcontent-%COMP%]{height:500px;background-color:#000;overflow:hidden;display:flex;justify-content:center}.table[_ngcontent-%COMP%]{max-width:100%;overflow:scroll}.loadingVolumes[_ngcontent-%COMP%]{position:relative;top:45%;z-index:100}.container-info[_ngcontent-%COMP%]{overflow-x:scroll}"],changeDetection:0}),n})();var gl=y(6451);let dn=(()=>{class n{constructor(e){this.element=e,this.height=500}resizeCanvas(){this.chart.applyOptions({width:this.element.nativeElement.parentElement.offsetWidth,height:this.height})}ngOnInit(){this.chart=pn(this.element.nativeElement,{width:this.element.nativeElement.parentElement.offsetWidth,height:this.height,layout:{backgroundColor:"#000000",textColor:"#d1d4dc"},crosshair:{mode:Ft.Normal},grid:{vertLines:{visible:!0,color:"rgba(42, 46, 57, 0.5)"},horzLines:{color:"rgba(42, 46, 57, 0.5)"}}}),this.lineSeries=this.chart.addCandlestickSeries(),this.volumeSeries=this.chart.addHistogramSeries({color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:"",scaleMargins:{top:.85,bottom:0}}),this.updateData()}ngOnChanges(e){!e.data||e.data.isFirstChange()||this.updateData()}ngOnDestroy(){this.chart.remove()}updateData(){this.lineSeries.setData(this.data),this.volumeSeries.setData(this.volumeData),this.lineSeries.applyOptions({priceFormat:{type:"price",precision:this.precision,minMove:1e-7}})}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(i.SBq))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-lightweight-charts"]],hostBindings:function(e,o){1&e&&i.NdJ("resize",function(r){return o.resizeCanvas(r)},!1,i.Jf7)},inputs:{data:"data",volumeData:"volumeData",precision:"precision",height:"height"},features:[i.TTD],decls:1,vars:0,template:function(e,o){1&e&&i._UZ(0,"ng-component")},dependencies:[x.fw],changeDetection:0}),n})();function ml(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"span",17),i._uU(2),i.ALo(3,"currency"),i.qZA(),i.BQk()),2&n){const e=i.oxw().ngIf,o=i.oxw().ngIf;i.xp6(2),i.Oqu(i.xi3(3,1,o.hloc[o.hloc.length-1].close,e.market.rsymbol))}}function vl(n,t){if(1&n&&(i._uU(0),i.ALo(1,"number")),2&n){const e=i.oxw().ngIf,o=i.oxw().ngIf;i.AsE("",i.xi3(1,2,o.hloc[o.hloc.length-1].close,"1."+e.market.rprecision+"-"+e.market.rprecision)," ",e.market.rsymbol,"")}}function Sl(n,t){1&n&&i.GkF(0)}function Tl(n,t){1&n&&i.GkF(0)}const yl=function(n,t){return{offers:n,direction:"BUY",market:t}},Ml=function(n,t){return{offers:n,direction:"SELL",market:t}};function Cl(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"div",18),i.YNc(2,Sl,1,0,"ng-container",19),i.YNc(3,Tl,1,0,"ng-container",19),i.qZA(),i.BQk()),2&n){const e=t.ngIf,o=i.oxw().ngIf;i.oxw(2);const s=i.MAs(4);i.xp6(2),i.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",i.WLB(4,yl,e.buys,o.market)),i.xp6(1),i.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",i.WLB(7,Ml,e.sells,o.market))}}function bl(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"h2"),i.SDv(2,20),i.qZA(),i._UZ(3,"app-bisq-trades",21),i.BQk()),2&n){const e=i.oxw().ngIf,o=i.oxw(2);i.xp6(3),i.Q6J("trades$",o.trades$)("market",e.market)}}function Al(n,t){if(1&n){const e=i.EpF();i.ynx(0),i.TgZ(1,"h1"),i._uU(2),i.qZA(),i.TgZ(3,"div",6),i.YNc(4,ml,4,4,"ng-container",1),i.YNc(5,vl,2,5,"ng-template",null,7,i.W1O),i.qZA(),i.TgZ(7,"form",8)(8,"div",9)(9,"label",10)(10,"input",11),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(2);return i.KtG(s.setFragment("half_hour"))}),i.qZA(),i._uU(11," 30M "),i.qZA(),i.TgZ(12,"label",10)(13,"input",11),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(2);return i.KtG(s.setFragment("hour"))}),i.qZA(),i._uU(14," 1H "),i.qZA(),i.TgZ(15,"label",10)(16,"input",11),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(2);return i.KtG(s.setFragment("half_day"))}),i.qZA(),i._uU(17," 12H "),i.qZA(),i.TgZ(18,"label",10)(19,"input",11),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(2);return i.KtG(s.setFragment("day"))}),i.qZA(),i._uU(20," 1D "),i.qZA(),i.TgZ(21,"label",10)(22,"input",11),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(2);return i.KtG(s.setFragment("week"))}),i.qZA(),i._uU(23," 1W "),i.qZA(),i.TgZ(24,"label",10)(25,"input",11),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(2);return i.KtG(s.setFragment("month"))}),i.qZA(),i._uU(26," 1M "),i.qZA(),i.TgZ(27,"label",10)(28,"input",11),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(2);return i.KtG(s.setFragment("year"))}),i.qZA(),i._uU(29," 1Y "),i.qZA()()(),i._UZ(30,"div",12),i.TgZ(31,"div",13)(32,"div",14),i._UZ(33,"div",15),i.qZA(),i._UZ(34,"app-lightweight-charts",16),i.qZA(),i._UZ(35,"br"),i.YNc(36,Cl,4,10,"ng-container",1),i.ALo(37,"async"),i._UZ(38,"br")(39,"br"),i.YNc(40,bl,4,2,"ng-container",1),i.ALo(41,"async"),i.BQk()}if(2&n){const e=t.ngIf,o=i.MAs(6),s=i.oxw().ngIf,r=i.oxw(),a=i.MAs(6);i.xp6(2),i.AsE("","crypto"===e.market.rtype?e.market.lname:e.market.rname," - ",e.pair,""),i.xp6(2),i.Q6J("ngIf","fiat"===e.market.rtype)("ngIfElse",o),i.xp6(3),i.Q6J("formGroup",r.radioGroupForm),i.xp6(2),i.ekj("active","half_hour"===r.radioGroupForm.get("interval").value),i.xp6(1),i.Q6J("value","half_hour"),i.xp6(2),i.ekj("active","hour"===r.radioGroupForm.get("interval").value),i.xp6(1),i.Q6J("value","hour"),i.xp6(2),i.ekj("active","half_day"===r.radioGroupForm.get("interval").value),i.xp6(1),i.Q6J("value","half_day"),i.xp6(2),i.ekj("active","day"===r.radioGroupForm.get("interval").value),i.xp6(1),i.Q6J("value","day"),i.xp6(2),i.ekj("active","week"===r.radioGroupForm.get("interval").value),i.xp6(1),i.Q6J("value","week"),i.xp6(2),i.ekj("active","month"===r.radioGroupForm.get("interval").value),i.xp6(1),i.Q6J("value","month"),i.xp6(2),i.ekj("active","year"===r.radioGroupForm.get("interval").value),i.xp6(1),i.Q6J("value","year"),i.xp6(4),i.Q6J("hidden",!r.isLoadingGraph),i.xp6(2),i.Q6J("data",s.hloc)("volumeData",s.volume)("precision","crypto"===e.market.rtype?e.market.lprecision:e.market.rprecision),i.xp6(2),i.Q6J("ngIf",i.lcZ(37,34,r.offers$))("ngIfElse",a),i.xp6(4),i.Q6J("ngIf",i.lcZ(41,36,r.trades$))("ngIfElse",a)}}function xl(n,t){if(1&n&&(i.ynx(0),i.YNc(1,Al,42,38,"ng-container",1),i.ALo(2,"async"),i.BQk()),2&n){const e=i.oxw(),o=i.MAs(6);i.xp6(1),i.Q6J("ngIf",i.lcZ(2,2,e.currency$))("ngIfElse",o)}}function Bl(n,t){1&n&&i.SDv(0,29)}function wl(n,t){1&n&&i.SDv(0,30)}function Ol(n,t){1&n&&i.GkF(0)}function Il(n,t){1&n&&i.GkF(0)}function Nl(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"span",17),i._uU(2),i.ALo(3,"currency"),i.qZA(),i.BQk()),2&n){const e=i.oxw().$implicit,o=i.oxw().market;i.xp6(2),i.Oqu(i.xi3(3,1,e.price,o.rsymbol))}}function Pl(n,t){if(1&n&&(i._uU(0),i.ALo(1,"number"),i.TgZ(2,"span",34),i._uU(3),i.qZA()),2&n){const e=i.oxw().$implicit,o=i.oxw().market;i.hij("",i.xi3(1,2,e.price,"1.2-"+o.rprecision)," "),i.xp6(3),i.Oqu(o.rsymbol)}}function El(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"span",17),i._uU(2),i.ALo(3,"currency"),i.qZA(),i.BQk()),2&n){const e=i.oxw().$implicit,o=i.oxw().market;i.xp6(2),i.Oqu(i.xi3(3,1,e.amount,o.rsymbol))}}function kl(n,t){if(1&n&&(i._uU(0),i.ALo(1,"number"),i.TgZ(2,"span",34),i._uU(3),i.qZA()),2&n){const e=i.oxw().$implicit,o=i.oxw().market;i.hij("",i.xi3(1,2,e.amount,"1.2-"+o.lprecision)," "),i.xp6(3),i.Oqu(o.lsymbol)}}function Rl(n,t){if(1&n&&(i.ynx(0),i.TgZ(1,"span",17),i._uU(2),i.ALo(3,"currency"),i.qZA(),i.BQk()),2&n){const e=i.oxw().$implicit,o=i.oxw().market;i.xp6(2),i.Oqu(i.xi3(3,1,e.volume,o.rsymbol))}}function Zl(n,t){if(1&n&&(i._uU(0),i.ALo(1,"number"),i.TgZ(2,"span",34),i._uU(3),i.qZA()),2&n){const e=i.oxw().$implicit,o=i.oxw().market;i.hij("",i.xi3(1,2,e.volume,"1.2-"+o.rprecision)," "),i.xp6(3),i.Oqu(o.rsymbol)}}function Ql(n,t){if(1&n&&(i.TgZ(0,"tr")(1,"td"),i.YNc(2,Nl,4,4,"ng-container",1),i.YNc(3,Pl,4,5,"ng-template",null,31,i.W1O),i.qZA(),i.TgZ(5,"td"),i.YNc(6,El,4,4,"ng-container",1),i.YNc(7,kl,4,5,"ng-template",null,32,i.W1O),i.qZA(),i.TgZ(9,"td"),i.YNc(10,Rl,4,4,"ng-container",1),i.YNc(11,Zl,4,5,"ng-template",null,33,i.W1O),i.qZA()()),2&n){const e=i.MAs(4),o=i.MAs(8),s=i.MAs(12),r=i.oxw().market;i.xp6(2),i.Q6J("ngIf","fiat"===r.rtype)("ngIfElse",e),i.xp6(4),i.Q6J("ngIf","fiat"===r.ltype)("ngIfElse",o),i.xp6(4),i.Q6J("ngIf","fiat"===r.rtype)("ngIfElse",s)}}const gn=function(n){return{$implicit:n}};function Dl(n,t){if(1&n&&(i.TgZ(0,"div",22)(1,"h2"),i.YNc(2,Bl,1,0,"ng-template",23),i.YNc(3,wl,1,0,"ng-template",null,24,i.W1O),i.qZA(),i.TgZ(5,"div",25)(6,"table",26)(7,"thead")(8,"th"),i.SDv(9,27),i.qZA(),i.TgZ(10,"th"),i.YNc(11,Ol,1,0,"ng-container",19),i.qZA(),i.TgZ(12,"th"),i.YNc(13,Il,1,0,"ng-container",19),i.qZA()(),i.TgZ(14,"tbody"),i.YNc(15,Ql,13,6,"tr",28),i.qZA()()()()),2&n){const e=t.offers,o=t.direction,s=t.market,r=i.MAs(4);i.oxw();const a=i.MAs(8);i.xp6(2),i.Q6J("ngIf","BUY"===o)("ngIfElse",r),i.xp6(9),i.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",i.VKq(7,gn,s.lsymbol)),i.xp6(2),i.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",i.VKq(9,gn,s.rsymbol)),i.xp6(2),i.Q6J("ngForOf",e)}}function Ll(n,t){1&n&&(i._UZ(0,"br")(1,"br"),i.TgZ(2,"div",35),i._UZ(3,"div",15),i.qZA())}function ql(n,t){1&n&&i.SDv(0,36),2&n&&(i.pQV(t.$implicit),i.QtT(0))}let $l=(()=>{class n{constructor(e,o,s,r,a,l){this.websocketService=e,this.route=o,this.bisqApiService=s,this.formBuilder=r,this.seoService=a,this.router=l,this.defaultInterval="day",this.isLoadingGraph=!1}ngOnInit(){this.radioGroupForm=this.formBuilder.group({interval:[this.defaultInterval]}),["half_hour","hour","half_day","day","week","month","year","auto"].indexOf(this.route.snapshot.fragment)>-1&&this.radioGroupForm.controls.interval.setValue(this.route.snapshot.fragment,{emitEvent:!1}),this.currency$=this.bisqApiService.getMarkets$().pipe((0,N.w)(e=>(0,ot.a)([(0,$.of)(e),this.route.paramMap])),(0,I.U)(([e,o])=>{const s=o.get("pair"),r=s.replace("_","/").toUpperCase();return this.seoService.setTitle(`Bisq market: ${r}`),{pair:r,market:e[s]}})),this.trades$=this.route.paramMap.pipe((0,I.U)(e=>e.get("pair")),(0,N.w)(e=>this.bisqApiService.getMarketTrades$(e))),this.offers$=this.route.paramMap.pipe((0,I.U)(e=>e.get("pair")),(0,N.w)(e=>this.bisqApiService.getMarketOffers$(e)),(0,I.U)(e=>e[Object.keys(e)[0]])),this.hlocData$=(0,ot.a)([this.route.paramMap,(0,gl.T)(this.radioGroupForm.get("interval").valueChanges,(0,$.of)(this.radioGroupForm.get("interval").value))]).pipe((0,N.w)(([e,o])=>{this.isLoadingGraph=!0;const s=e.get("pair");return this.bisqApiService.getMarketsHloc$(s,o)}),(0,I.U)(e=>{this.isLoadingGraph=!1;const o=(e=e.map(s=>(s.time=s.period_start,s))).map(s=>({time:s.time,value:s.volume_right,color:s.close>s.avg?"rgba(0, 41, 74, 0.7)":"rgba(0, 41, 74, 1)"}));if(e.length>1){const s=[];s.push(e[0]);const r=this.getUnixTimestampFromInterval(this.radioGroupForm.get("interval").value);let a=0;const l=e[0].period_start;let h=1;for(;;)if(a++,e[h].period_start>l+r*a)s.push({time:l+r*a});else if(s.push(e[h]),h++,!e[h])break;e=s}return{hloc:e,volume:o}}))}setFragment(e){this.router.navigate([],{relativeTo:this.route,queryParamsHandling:"merge",fragment:e})}ngOnDestroy(){this.websocketService.stopTrackingBisqMarket()}getUnixTimestampFromInterval(e){switch(e){case"minute":return 60;case"half_hour":return 1800;case"hour":return 3600;case"half_day":return 43200;case"day":return 86400;case"week":return 604800;case"month":return 2592e3;case"year":return 31579200}}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(J.i),i.Y36(x.gz),i.Y36(w),i.Y36(P.QS),i.Y36(Z.v),i.Y36(x.F0))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-bisq-market"]],decls:9,vars:4,consts:function(){let t,e,o,s,r;return t="Siste handler",e="Pris",o="Kj\xF8p tilbud",s="Selg tilbud",r="Bel\xF8p (" + "\ufffd0\ufffd" + ")",[[1,"container-xl"],[4,"ngIf","ngIfElse"],[",",""],["offersList",""],["loadingSpinner",""],["amount",""],[1,"priceheader"],["headerPriceCrypto",""],[1,"mb-3","radio-form",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],[1,"btn","btn-primary","btn-sm"],["type","radio","formControlName","interval",3,"value","click"],[1,"clearfix"],["id","graphHolder"],[1,"text-center","loadingChart",3,"hidden"],[1,"spinner-border","text-light"],[3,"data","volumeData","precision"],[1,"green-color"],[1,"row","row-cols-1","row-cols-md-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],t,[3,"trades$","market"],[1,"col"],[3,"ngIf","ngIfElse"],["sellOffers",""],[1,"table-container"],[1,"table","table-borderless","table-striped"],e,[4,"ngFor","ngForOf"],o,s,["priceCrypto",""],["amountCrypto",""],["volumeCrypto",""],[1,"symbol"],[1,"text-center"],r]},template:function(e,o){if(1&e&&(i.TgZ(0,"div",0),i.YNc(1,xl,3,4,"ng-container",1),i.ALo(2,"async"),i.qZA(),i.YNc(3,Dl,16,11,"ng-template",2,3,i.W1O),i.YNc(5,Ll,4,0,"ng-template",null,4,i.W1O),i.YNc(7,ql,1,1,"ng-template",null,5,i.W1O)),2&e){const s=i.MAs(6);i.xp6(1),i.Q6J("ngIf",i.lcZ(2,2,o.hlocData$))("ngIfElse",s)}},dependencies:[T.sg,T.O5,T.tP,P._Y,P.Fj,P._,P.JJ,P.JL,P.sg,P.u,dn,Le,T.Ov,T.JJ,T.H9],styles:[".priceheader[_ngcontent-%COMP%]{font-size:24px}@media (min-width: 576px){.priceheader[_ngcontent-%COMP%]{float:left}}@media (min-width: 576px){.radio-form[_ngcontent-%COMP%]{float:right}}.loadingChart[_ngcontent-%COMP%]{z-index:100;position:absolute;top:50%;left:50%}#graphHolder[_ngcontent-%COMP%]{height:550px;overflow:hidden}.col[_ngcontent-%COMP%]:last-child{margin-top:50px}@media (min-width: 576px){.col[_ngcontent-%COMP%]:last-child{margin-top:0}}.table-container[_ngcontent-%COMP%]{overflow:scroll;-ms-overflow-style:none;scrollbar-width:none;font-size:13px}@media (min-width: 576px){.table-container[_ngcontent-%COMP%]{font-size:16px}}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"],changeDetection:0}),n})();var Fl=y(3019);let zl=(()=>{class n{constructor(e){this.element=e,this.previousValue=null}ngOnChanges(){this.previousValue&&this.appColoredPrice<this.previousValue?this.element.nativeElement.classList.add("red-color"):this.element.nativeElement.classList.remove("red-color"),this.previousValue=this.appColoredPrice}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(i.SBq))},n.\u0275dir=i.lG2({type:n,selectors:[["","appColoredPrice",""]],inputs:{appColoredPrice:"appColoredPrice"},features:[i.TTD]}),n})();function Ul(n,t){if(1&n&&(i.TgZ(0,"span")(1,"span",21),i._uU(2),i.ALo(3,"currency"),i.qZA()()),2&n){const e=t.ngIf;i.xp6(1),i.Q6J("appColoredPrice",e),i.xp6(1),i.Oqu(i.gM2(3,2,e,"USD","symbol","1.2-2"))}}function Gl(n,t){if(1&n&&(i.TgZ(0,"span",22)(1,"span",21),i._uU(2),i.ALo(3,"currency"),i.qZA()()),2&n){const e=i.oxw();i.xp6(1),i.Q6J("appColoredPrice",e.bisqMarketPrice),i.xp6(1),i.Oqu(i.gM2(3,2,e.bisqMarketPrice,"USD","symbol","1.2-2"))}}function Jl(n,t){if(1&n&&(i.ynx(0),i._UZ(1,"app-lightweight-charts",23),i.BQk()),2&n){const e=t.ngIf;i.xp6(1),i.Q6J("height",300)("data",e.hloc)("volumeData",e.volume)("precision",2)}}function Yl(n,t){if(1&n&&(i.ynx(0),i._UZ(1,"app-lightweight-charts-area",24),i.BQk()),2&n){const e=t.ngIf;i.xp6(1),i.Q6J("height",300)("data",e.data)("lineData",e.linesData)}}function Xl(n,t){1&n&&i.SDv(0,42)}function Hl(n,t){1&n&&i.SDv(0,43)}function Wl(n,t){if(1&n&&i._UZ(0,"app-fiat",47),2&n){const e=i.oxw().$implicit;i.Q6J("value",1e8*e.last)}}function Vl(n,t){if(1&n&&(i.TgZ(0,"span",22),i._uU(1),i.ALo(2,"currency"),i.qZA()),2&n){const e=i.oxw().$implicit;i.xp6(1),i.Oqu(i.xi3(2,1,e.last,e.market.rsymbol))}}const Kl=function(n,t){return[n,t]};function jl(n,t){if(1&n&&(i.TgZ(0,"tr")(1,"td")(2,"a",15),i.ALo(3,"relativeUrl"),i._uU(4),i.qZA()(),i.TgZ(5,"td"),i.YNc(6,Wl,1,1,"app-fiat",45),i.YNc(7,Vl,3,4,"ng-template",null,46,i.W1O),i.qZA(),i.TgZ(9,"td"),i._uU(10),i.qZA()()),2&n){const e=t.$implicit,o=i.MAs(8);i.xp6(2),i.Q6J("routerLink",i.WLB(7,Kl,i.lcZ(3,5,"/market"),e.pair_url)),i.xp6(2),i.hij("",e.name,")"),i.xp6(2),i.Q6J("ngIf","crypto"===e.market.rtype)("ngIfElse",o),i.xp6(4),i.Oqu(null!=e.volume&&e.volume.num_trades?null==e.volume?null:e.volume.num_trades:0)}}function th(n,t){if(1&n&&(i.TgZ(0,"tbody"),i.YNc(1,jl,11,10,"tr",44),i.qZA()),2&n){const e=i.oxw().ngIf,o=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.value)("ngForTrackBy",o.trackByFn)}}const mn=function(){return["fas","chevron-down"]},vn=function(n){return[n]};function eh(n,t){if(1&n){const e=i.EpF();i.ynx(0),i.TgZ(1,"div",2)(2,"div",25)(3,"div",4)(4,"h5",26),i.YNc(5,Xl,1,0,"ng-template",27),i.YNc(6,Hl,1,0,"ng-template",null,28,i.W1O),i.qZA(),i.TgZ(8,"div",29)(9,"table",30)(10,"thead")(11,"th"),i.ynx(12),i.SDv(13,31),i.BQk(),i.TgZ(14,"button",32),i.NdJ("click",function(){i.CHM(e);const s=i.oxw();return i.KtG(s.sort("name"))}),i.ALo(15,"async"),i._UZ(16,"fa-icon",33),i.qZA()(),i.TgZ(17,"th"),i.SDv(18,34),i.qZA(),i.TgZ(19,"th"),i.ynx(20),i.SDv(21,35),i.BQk(),i.TgZ(22,"button",32),i.NdJ("click",function(){i.CHM(e);const s=i.oxw();return i.KtG(s.sort("trades"))}),i.ALo(23,"async"),i._UZ(24,"fa-icon",33),i.qZA()()(),i.YNc(25,th,2,2,"tbody",8),i.qZA()(),i.TgZ(26,"div",36)(27,"a",37),i.SDv(28,38),i.ALo(29,"relativeUrl"),i.qZA()()()()(),i.TgZ(30,"div",2)(31,"div",25)(32,"div",4)(33,"h5",26),i.SDv(34,39),i.qZA(),i._UZ(35,"app-bisq-trades",40),i.TgZ(36,"div",36)(37,"a",37),i.SDv(38,41),i.ALo(39,"relativeUrl"),i.qZA()()()()(),i.BQk()}if(2&n){const e=t.ngIf,o=i.MAs(7),s=i.oxw(),r=i.MAs(46);i.xp6(5),i.Q6J("ngIf","bisq"===s.stateService.env.BASE_MODULE)("ngIfElse",o),i.xp6(9),i.Q6J("disabled","name"===i.lcZ(15,13,s.sort$)),i.xp6(2),i.Q6J("icon",i.DdM(21,mn))("fixedWidth",!0),i.xp6(6),i.Q6J("disabled","trades"===i.lcZ(23,15,s.sort$)),i.xp6(2),i.Q6J("icon",i.DdM(22,mn))("fixedWidth",!0),i.xp6(1),i.Q6J("ngIf",e.value)("ngIfElse",r),i.xp6(2),i.Q6J("routerLink",i.VKq(23,vn,i.lcZ(29,17,"/markets"))),i.xp6(8),i.Q6J("trades$",s.trades$),i.xp6(2),i.Q6J("routerLink",i.VKq(25,vn,i.lcZ(39,19,"/markets")))}}function ih(n,t){1&n&&(i.TgZ(0,"td"),i._UZ(1,"span",49),i.qZA())}const nh=function(){return[1,2,3]};function oh(n,t){1&n&&(i.TgZ(0,"tr"),i.YNc(1,ih,2,0,"td",48),i.qZA()),2&n&&(i.xp6(1),i.Q6J("ngForOf",i.DdM(1,nh)))}const sh=function(){return[1,2,3,4,5,6,7,8,9,10]};function rh(n,t){1&n&&i.YNc(0,oh,2,2,"tr",48),2&n&&i.Q6J("ngForOf",i.DdM(1,sh))}function ah(n,t){1&n&&(i.TgZ(0,"div",50),i._UZ(1,"div",51),i.qZA())}function lh(n,t){1&n&&i._UZ(0,"div",52)}const hh=function(n){return{value:n}},ch=function(){return["/terms-of-service"]},uh=function(){return["/privacy-policy"]};let _h=(()=>{class n{constructor(e,o,s,r){this.websocketService=e,this.bisqApiService=o,this.stateService=s,this.seoService=r,this.sort$=new ei.X("trades"),this.isLoadingGraph=!0,this.bisqMarketPrice=0,this.allowCryptoCoins=["usdc","l-btc","bsq"]}ngOnInit(){this.seoService.resetTitle(),this.websocketService.want(["blocks"]),this.usdPrice$=this.stateService.conversions$.asObservable().pipe((0,I.U)(o=>o.USD)),this.volumes$=this.bisqApiService.getAllVolumesDay$().pipe((0,I.U)(o=>({data:o.map(a=>({time:a.period_start,value:a.volume})),linesData:o.map(a=>({time:a.period_start,value:a.num_trades}))})));const e=this.bisqApiService.getMarkets$().pipe((0,ii.B)());this.tickers$=(0,ot.a)([this.bisqApiService.getMarketsTicker$(),e,this.bisqApiService.getMarketVolumesByTime$("7d")]).pipe((0,I.U)(([o,s,r])=>{const a=[];for(const l in o){if("bisq"!==this.stateService.env.BASE_MODULE){const c=l.split("_");if("btc"===c[1]&&-1===this.allowCryptoCoins.indexOf(c[0]))continue}const h=o[l];h.pair_url=l,h.pair=l.replace("_","/").toUpperCase(),h.market=s[l],h.volume=r[l],h.name=`${"crypto"===h.market.rtype?h.market.lname:h.market.rname} (${"crypto"===h.market.rtype?h.market.lsymbol:h.market.rsymbol}`,a.push(h)}return a}),(0,N.w)(o=>(0,ot.a)([this.sort$,(0,$.of)(o)])),(0,I.U)(([o,s])=>("trades"===o?s.sort((r,a)=>(a.volume&&a.volume.num_trades||0)-(r.volume&&r.volume.num_trades||0)):"volumes"===o?s.sort((r,a)=>(a.volume&&a.volume.volume||0)-(r.volume&&r.volume.volume||0)):"name"===o&&s.sort((r,a)=>r.name.localeCompare(a.name)),s.slice(0,10)))),this.trades$=(0,ot.a)([this.bisqApiService.getMarketTrades$("all"),e]).pipe((0,I.U)(([o,s])=>("bisq"!==this.stateService.env.BASE_MODULE&&(o=o.filter(r=>{const a=r.market.split("_");return!("btc"===a[1]&&-1===this.allowCryptoCoins.indexOf(a[0]))})),o.map(r=>(r._market=s[r.market],r)).slice(0,10)))),this.hlocData$=this.bisqApiService.getMarketsHloc$("btc_usd","day").pipe((0,I.U)(o=>{this.isLoadingGraph=!1;const s=(o=o.map(r=>(r.time=r.period_start,r))).map(r=>({time:r.time,value:r.volume_right,color:r.close>r.avg?"rgba(0, 41, 74, 0.7)":"rgba(0, 41, 74, 1)"}));if(o.length>1){const r=[];r.push(o[0]);const a=86400;let l=0;const h=o[0].period_start;let c=1;for(;;)if(l++,o[c].period_start>h+a*l)r.push({time:h+a*l});else if(r.push(o[c]),c++,!o[c])break;o=r}return this.bisqMarketPrice=o[o.length-1].close,{hloc:o,volume:s}}))}trackByFn(e){return e}sort(e){this.sort$.next(e)}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(J.i),i.Y36(w),i.Y36(ut.b),i.Y36(Z.v))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-main-bisq-dashboard"]],decls:51,vars:23,consts:function(){let t,e,o,s,r,a,l,h,c,u,_,f,d;return t="Bisq prisindeks",e="Bisq markedspris",o="Bisq handelsvolum",s="Bruksvilk\xE5r",r="Personvernerkl\xE6ring",a="Valuta",l="Pris",h="Handler (7d)",c="Se mer \xBB",u="Siste handler",_="Se mer \xBB",f="Markeder",d="Bitnet Markeder",[[1,"container-xl"],[1,"row","row-cols-1","row-cols-md-2"],[1,"col","mb-4"],[1,"card","text-center"],[1,"card-body"],[1,"card-title"],t,[1,"big-fiat"],[4,"ngIf","ngIfElse"],e,["class","green-color",4,"ngIf","ngIfElse"],[1,"chart-container"],o,[4,"ngIf"],[1,"text-small","text-center","mt-3"],[3,"routerLink"],s,r,["loadingTmpl",""],["loadingSpinner",""],["loading",""],[3,"appColoredPrice"],[1,"green-color"],[3,"height","data","volumeData","precision"],[3,"height","data","lineData"],[1,"card"],[1,"card-title","text-center"],[3,"ngIf","ngIfElse"],["nonOfficialMarkets",""],[1,"table-container"],[1,"table","table-borderless","table-striped"],a,[1,"btn","btn-link","btn-sm",3,"disabled","click"],[3,"icon","fixedWidth"],l,h,[1,"text-center"],["href","",3,"routerLink"],c,u,["view","small",3,"trades$"],_,f,d,[4,"ngFor","ngForOf","ngForTrackBy"],[3,"value",4,"ngIf","ngIfElse"],["fiat",""],[3,"value"],[4,"ngFor","ngForOf"],[1,"skeleton-loader"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"],[1,"skeleton-loader","shorter"]]},template:function(e,o){if(1&e&&(i.TgZ(0,"div",0),i._UZ(1,"br"),i.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h5",5),i.SDv(7,6),i.qZA(),i.TgZ(8,"div",7),i.YNc(9,Ul,4,7,"span",8),i.ALo(10,"async"),i.qZA()()()(),i.TgZ(11,"div",2)(12,"div",3)(13,"div",4)(14,"h5",5),i.SDv(15,9),i.qZA(),i.TgZ(16,"div",7),i.YNc(17,Gl,4,7,"span",10),i.qZA()()()()(),i.TgZ(18,"div",1)(19,"div",2)(20,"div",3)(21,"div",4)(22,"h5",5),i._uU(23,"US Dollar - BIT/USD"),i.qZA(),i.TgZ(24,"div",11),i.YNc(25,Jl,2,4,"ng-container",8),i.ALo(26,"async"),i.qZA()()()(),i.TgZ(27,"div",2)(28,"div",3)(29,"div",4)(30,"h5",5),i.SDv(31,12),i.qZA(),i.TgZ(32,"div",11),i.YNc(33,Yl,2,3,"ng-container",8),i.ALo(34,"async"),i.qZA()()()()(),i.TgZ(35,"div",1),i.YNc(36,eh,40,27,"ng-container",13),i.ALo(37,"async"),i.qZA(),i._UZ(38,"app-language-selector"),i.TgZ(39,"div",14)(40,"a",15),i.SDv(41,16),i.qZA(),i._uU(42," | "),i.TgZ(43,"a",15),i.SDv(44,17),i.qZA()()(),i.YNc(45,rh,1,2,"ng-template",null,18,i.W1O),i.YNc(47,ah,2,0,"ng-template",null,19,i.W1O),i.YNc(49,lh,1,0,"ng-template",null,20,i.W1O)),2&e){const s=i.MAs(48),r=i.MAs(50);i.xp6(9),i.Q6J("ngIf",i.lcZ(10,11,o.usdPrice$))("ngIfElse",r),i.xp6(8),i.Q6J("ngIf",o.bisqMarketPrice)("ngIfElse",r),i.xp6(8),i.Q6J("ngIf",i.lcZ(26,13,o.hlocData$))("ngIfElse",s),i.xp6(8),i.Q6J("ngIf",i.lcZ(34,15,o.volumes$))("ngIfElse",s),i.xp6(3),i.Q6J("ngIf",i.VKq(19,hh,i.lcZ(37,17,o.tickers$))),i.xp6(4),i.Q6J("routerLink",i.DdM(21,ch)),i.xp6(3),i.Q6J("routerLink",i.DdM(22,uh))}},dependencies:[T.sg,T.O5,x.yS,ht.BN,pe.B,Fl.S,zl,dn,fn,Le,T.Ov,T.H9,nt.w],styles:["#volumeHolder[_ngcontent-%COMP%]{height:500px;background-color:#000;overflow:hidden;display:flex;justify-content:center}.table[_ngcontent-%COMP%]{max-width:100%;overflow:scroll}.loadingGraphs[_ngcontent-%COMP%]{position:relative;top:45%;z-index:100}.table-container[_ngcontent-%COMP%]{overflow:scroll;scrollbar-width:none;font-size:13px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media (min-width: 576px){.table-container[_ngcontent-%COMP%]{font-size:16px}}.table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:right}.table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{text-align:left}.table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){display:none}@media (min-width: 1100px){.table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){display:table-cell}}.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right}.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:left}.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){display:none}@media (min-width: 1100px){.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){display:table-cell}}.chart-container[_ngcontent-%COMP%]{height:300px}.big-fiat[_ngcontent-%COMP%]{color:#3bcc49;font-size:26px}.card[_ngcontent-%COMP%]{background-color:#1d1f31;height:100%}.card-title[_ngcontent-%COMP%]{color:#4a68b9;font-size:1rem}.info-block[_ngcontent-%COMP%]{float:left;width:350px;line-height:25px}.progress[_ngcontent-%COMP%]{display:inline-flex;width:100%;background-color:#2d3348;height:1.1rem}.bg-warning[_ngcontent-%COMP%]{background-color:#b58800!important}.skeleton-loader[_ngcontent-%COMP%]{max-width:100%}.skeleton-loader.shorter[_ngcontent-%COMP%]{max-width:150px}.more-padding[_ngcontent-%COMP%]{padding:1.25rem 2rem}.graph-card[_ngcontent-%COMP%]{height:100%}@media (min-width: 992px){.graph-card[_ngcontent-%COMP%]{height:385px}}"],changeDetection:0}),n})();var ph=y(9553);const dh=[{path:"",component:_h},{path:"markets",data:{networks:["bisq"]},component:dl},{path:"transactions",data:{networks:["bisq"]},component:uo},{path:"market/:pair",data:{networkSpecific:!0},component:$l},{path:"tx/push",component:y(6037).A},{path:"tx/:id",data:{networkSpecific:!0},component:Yo},{path:"blocks",children:[],component:ys},{path:"block/:id",data:{networkSpecific:!0},component:rs},{path:"address/:id",data:{networkSpecific:!0},component:Es},{path:"stats",data:{networks:["bisq"]},component:Zs},{path:"about",component:ae.E},{path:"docs",loadChildren:()=>y.e(131).then(y.bind(y,3131)).then(n=>n.DocsModule)},{path:"api",loadChildren:()=>y.e(131).then(y.bind(y,3131)).then(n=>n.DocsModule)},{path:"terms-of-service",component:ph.n},{path:"**",redirectTo:""}];let gh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[x.Bz.forChild(dh)]}),n})();var mh=y(1596),G=y(2687);let vh=(()=>{class n{constructor(e){e.addIcons(G.Psp),e.addIcons(G.RLE),e.addIcons(G.eHv),e.addIcons(G.tMT),e.addIcons(G.x5v),e.addIcons(G.XEC),e.addIcons(G.cwv),e.addIcons(G.aLp),e.addIcons(G.Mdf),e.addIcons(G.Aq),e.addIcons(G.byT),e.addIcons(G._1N)}}return n.\u0275fac=function(e){return new(e||n)(i.LFG(ht.by))},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({providers:[w,le,Je,Ye],imports:[T.ez,gh,mh.m,ht.uH]}),n})()},3019:(Cn,Pt,y)=>{y.d(Pt,{S:()=>J});var x=y(6895),ae=y(1556),E=y(4650),N=y(4006),I=y(8466);function i(Y,R){if(1&Y&&(E.TgZ(0,"option",3),E._uU(1),E.qZA()),2&Y){const w=R.$implicit;E.Q6J("value",w.code),E.xp6(1),E.Oqu(w.name)}}let J=(()=>{class Y{constructor(w,Z,P){this.document=w,this.formBuilder=Z,this.languageService=P,this.languages=ae.Mj}ngOnInit(){this.languageForm=this.formBuilder.group({language:["en"]}),this.languageForm.get("language").setValue(this.languageService.getLanguage())}changeLanguage(){const w=this.languageForm.get("language").value;this.languageService.setLanguage(w);const Z=this.languageService.stripLanguageFromUrl(null);this.document.location.href=("en"!==w?`/${w}`:"")+Z}}return Y.\u0275fac=function(w){return new(w||Y)(E.Y36(x.K0),E.Y36(N.QS),E.Y36(I.T))},Y.\u0275cmp=E.Xpm({type:Y,selectors:[["app-language-selector"]],decls:3,vars:2,consts:[[1,"text-small","text-center",3,"formGroup"],["formControlName","language",1,"custom-select","custom-select-sm","form-control-secondary","form-control","mx-auto",2,"width","200px",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(w,Z){1&w&&(E.TgZ(0,"div",0)(1,"select",1),E.NdJ("change",function(){return Z.changeLanguage()}),E.YNc(2,i,2,2,"option",2),E.qZA()()),2&w&&(E.Q6J("formGroup",Z.languageForm),E.xp6(2),E.Q6J("ngForOf",Z.languages))},dependencies:[x.sg,N.YN,N.Kr,N.EJ,N.JJ,N.JL,N.sg,N.u],changeDetection:0}),Y})()}}]);