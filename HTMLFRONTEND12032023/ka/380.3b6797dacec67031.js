"use strict";(self.webpackChunkmempool=self.webpackChunkmempool||[]).push([[380],{2764:(Ze,te,D)=>{D.d(te,{V:()=>V});var B=D(1556),St=D(4650),n=D(4006),_t=D(6331),mt=D(10),gt=D(6895);function yt(k,X){if(1&k&&(St.TgZ(0,"option",3),St._uU(1),St.qZA()),2&k){const q=X.$implicit;St.Q6J("value",q[1].code),St.xp6(1),St.Oqu(q[1].name+" ("+q[1].code+")")}}let V=(()=>{class k{constructor(q,N,et){this.formBuilder=q,this.stateService=N,this.storageService=et,this.currencies=Object.entries(B.AT).sort(($,st)=>$[1].name<st[1].name?-1:$[1].name>st[1].name?1:0)}ngOnInit(){this.fiatForm=this.formBuilder.group({fiat:["USD"]}),this.stateService.fiatCurrency$.subscribe(q=>{this.fiatForm.get("fiat")?.setValue(q)})}changeFiat(){const q=this.fiatForm.get("fiat")?.value;this.storageService.setValue("fiat-preference",q),this.stateService.fiatCurrency$.next(q)}}return k.\u0275fac=function(q){return new(q||k)(St.Y36(n.QS),St.Y36(_t.b),St.Y36(mt.V))},k.\u0275cmp=St.Xpm({type:k,selectors:[["app-fiat-selector"]],decls:3,vars:2,consts:[[1,"text-small","text-center",3,"formGroup"],["formControlName","fiat",1,"custom-select","custom-select-sm","form-control-secondary","form-control","mx-auto",2,"width","200px",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(q,N){1&q&&(St.TgZ(0,"div",0)(1,"select",1),St.NdJ("change",function(){return N.changeFiat()}),St.YNc(2,yt,2,2,"option",2),St.qZA()()),2&q&&(St.Q6J("formGroup",N.fiatForm),St.xp6(2),St.Q6J("ngForOf",N.currencies))},dependencies:[gt.sg,n.YN,n.Kr,n.EJ,n.JJ,n.JL,n.sg,n.u],changeDetection:0}),k})()},3019:(Ze,te,D)=>{D.d(te,{S:()=>yt});var B=D(6895),St=D(1556),n=D(4650),_t=D(4006),mt=D(8466);function gt(V,k){if(1&V&&(n.TgZ(0,"option",3),n._uU(1),n.qZA()),2&V){const X=k.$implicit;n.Q6J("value",X.code),n.xp6(1),n.Oqu(X.name)}}let yt=(()=>{class V{constructor(X,q,N){this.document=X,this.formBuilder=q,this.languageService=N,this.languages=St.Mj}ngOnInit(){this.languageForm=this.formBuilder.group({language:["en"]}),this.languageForm.get("language").setValue(this.languageService.getLanguage())}changeLanguage(){const X=this.languageForm.get("language").value;this.languageService.setLanguage(X);const q=this.languageService.stripLanguageFromUrl(null);this.document.location.href=("en"!==X?`/${X}`:"")+q}}return V.\u0275fac=function(X){return new(X||V)(n.Y36(B.K0),n.Y36(_t.QS),n.Y36(mt.T))},V.\u0275cmp=n.Xpm({type:V,selectors:[["app-language-selector"]],decls:3,vars:2,consts:[[1,"text-small","text-center",3,"formGroup"],["formControlName","language",1,"custom-select","custom-select-sm","form-control-secondary","form-control","mx-auto",2,"width","200px",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(X,q){1&X&&(n.TgZ(0,"div",0)(1,"select",1),n.NdJ("change",function(){return q.changeLanguage()}),n.YNc(2,gt,2,2,"option",2),n.qZA()()),2&X&&(n.Q6J("formGroup",q.languageForm),n.xp6(2),n.Q6J("ngForOf",q.languages))},dependencies:[B.sg,_t.YN,_t.Kr,_t.EJ,_t.JJ,_t.JL,_t.sg,_t.u],changeDetection:0}),V})()},5380:(Ze,te,D)=>{D.r(te),D.d(te,{GraphsModule:()=>Lh});var B=D(4984),St=D(3091),n=D(4650),_t=D(8675),mt=D(3900),gt=D(8505),yt=D(4004),V=D(3099),k=D(6895),X=D(1044),q=D(1957),N=D(5568),et=D(3734),$=D(4006),st=D(10),K=D(6331),_=D(2216),j=D(4227);const it=function(H){return[H]};function z(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",13),n.ALo(2,"relativeUrl"),n._uU(3," 24h "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","24h"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","24h")("routerLink",n.VKq(6,it,n.lcZ(2,4,"/graphs/mining/block-prediction")))}}function tt(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",14),n.ALo(2,"relativeUrl"),n._uU(3," 3D "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3d"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3d")("routerLink",n.VKq(6,it,n.lcZ(2,4,"/graphs/mining/block-prediction")))}}function J(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",15),n.ALo(2,"relativeUrl"),n._uU(3," 1W "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1w"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1w")("routerLink",n.VKq(6,it,n.lcZ(2,4,"/graphs/mining/block-prediction")))}}function Y(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",16),n.ALo(2,"relativeUrl"),n._uU(3," 1M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1m")("routerLink",n.VKq(6,it,n.lcZ(2,4,"/graphs/mining/block-prediction")))}}function nt(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",17),n.ALo(2,"relativeUrl"),n._uU(3," 3M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3m")("routerLink",n.VKq(6,it,n.lcZ(2,4,"/graphs/mining/block-prediction")))}}function U(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",18),n.ALo(2,"relativeUrl"),n._uU(3," 6M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","6m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","6m")("routerLink",n.VKq(6,it,n.lcZ(2,4,"/graphs/mining/block-prediction")))}}function w(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",19),n.ALo(2,"relativeUrl"),n._uU(3," 1Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1y")("routerLink",n.VKq(6,it,n.lcZ(2,4,"/graphs/mining/block-prediction")))}}function C(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",20),n.ALo(2,"relativeUrl"),n._uU(3," 2Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","2y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","2y")("routerLink",n.VKq(6,it,n.lcZ(2,4,"/graphs/mining/block-prediction")))}}function I(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",21),n.ALo(2,"relativeUrl"),n._uU(3," 3Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3y")("routerLink",n.VKq(6,it,n.lcZ(2,4,"/graphs/mining/block-prediction")))}}function P(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",22),n.ALo(2,"relativeUrl"),n._uU(3," ALL "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","all"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","all")("routerLink",n.VKq(6,it,n.lcZ(2,4,"/graphs/mining/block-prediction")))}}const M=function(H){return{disabled:H}};function A(H,Lt){if(1&H&&(n.TgZ(0,"form",9)(1,"div",10),n.YNc(2,z,4,8,"label",11),n.YNc(3,tt,4,8,"label",11),n.YNc(4,J,4,8,"label",11),n.YNc(5,Y,4,8,"label",11),n.YNc(6,nt,4,8,"label",11),n.YNc(7,U,4,8,"label",11),n.YNc(8,w,4,8,"label",11),n.YNc(9,C,4,8,"label",11),n.YNc(10,I,4,8,"label",11),n.YNc(11,P,4,8,"label",11),n.qZA()()),2&H){const E=Lt.ngIf,pt=n.oxw();n.Q6J("formGroup",pt.radioGroupForm),n.xp6(1),n.Tol(n.VKq(13,M,pt.isLoading)),n.xp6(1),n.Q6J("ngIf",E.blockCount>=144),n.xp6(1),n.Q6J("ngIf",E.blockCount>=432),n.xp6(1),n.Q6J("ngIf",E.blockCount>=1008),n.xp6(1),n.Q6J("ngIf",E.blockCount>=4320),n.xp6(1),n.Q6J("ngIf",E.blockCount>=12960),n.xp6(1),n.Q6J("ngIf",E.blockCount>=25920),n.xp6(1),n.Q6J("ngIf",E.blockCount>=52560),n.xp6(1),n.Q6J("ngIf",E.blockCount>=105120),n.xp6(1),n.Q6J("ngIf",E.blockCount>=157680),n.xp6(1),n.Q6J("ngIf",E.blockCount>157680)}}function R(H,Lt){1&H&&(n.TgZ(0,"div",23),n._UZ(1,"div",24),n.qZA())}const Z=function(){return["fas","download"]};let rt=(()=>{class H{constructor(E,pt,Bt,Qt,_e,Ee,Xe,je,hr){this.locale=E,this.seoService=pt,this.apiService=Bt,this.formBuilder=Qt,this.storageService=_e,this.zone=Ee,this.route=Xe,this.stateService=je,this.router=hr,this.right=45,this.left=75,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.isLoading=!0,this.formatNumber=k.uf,this.timespan="",this.chartInstance=void 0,this.radioGroupForm=this.formBuilder.group({dateSpan:"1y"}),this.radioGroupForm.controls.dateSpan.setValue("1y")}ngOnInit(){this.seoService.setTitle("\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10EC\u10D8\u10DC\u10D0\u10E1\u10EC\u10D0\u10E0\u10DB\u10D4\u10E2\u10E7\u10D5\u10D4\u10DA\u10D4\u10D1\u10D8\u10E1 \u10E1\u10D8\u10D6\u10E3\u10E1\u10E2\u10D4"),this.miningWindowPreference="24h",this.radioGroupForm=this.formBuilder.group({dateSpan:this.miningWindowPreference}),this.radioGroupForm.controls.dateSpan.setValue(this.miningWindowPreference),this.route.fragment.subscribe(E=>{["24h","3d","1w","1m","3m","6m","1y","2y","3y","all"].indexOf(E)>-1&&this.radioGroupForm.controls.dateSpan.setValue(E,{emitEvent:!1})}),this.statsObservable$=this.radioGroupForm.get("dateSpan").valueChanges.pipe((0,_t.O)(this.radioGroupForm.controls.dateSpan.value),(0,mt.w)(E=>(this.storageService.setValue("miningWindowPreference",E),this.timespan=E,this.isLoading=!0,this.apiService.getHistoricalBlockPrediction$(E).pipe((0,gt.b)(pt=>{this.prepareChartOptions(pt.body),this.isLoading=!1}),(0,yt.U)(pt=>({blockCount:parseInt(pt.headers.get("x-total-count"),10)}))))),(0,V.B)())}prepareChartOptions(E){let pt;0===E.length&&(pt={textStyle:{color:"grey",fontSize:15},text:"\u10DB\u10DD\u10DC\u10D0\u10EA\u10D4\u10DB\u10D4\u10D1\u10D8\u10E1 \u10E9\u10D5\u10D4\u10DC\u10D4\u10D1\u10D0 \u10EF\u10D4\u10E0 \u10D0\u10E0 \u10D0\u10E0\u10D8\u10E1 \u10E8\u10D4\u10E1\u10D0\u10EB\u10DA\u10D4\u10D1\u10D4\u10DA\u10D8. \u1C9B\u10DD\u10D2\u10D5\u10D8\u10D0\u10DC\u10D4\u10D1\u10D8\u10D7 \u10E1\u10EA\u10D0\u10D3\u10D4\u10D7.",left:"center",top:"center"}),this.chartOptions={title:0===E.length?pt:void 0,animation:!1,grid:{top:30,bottom:80,right:this.right,left:this.left},tooltip:{show:!this.isMobile(),trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:Bt=>{let Qt=`<b style="color: white; margin-left: 2px">${(0,X.Pw)(this.locale,this.timespan,1e3*parseInt(Bt[0].axisValue,10))}</b><br>`;return Qt+=`${Bt[0].marker} ${Bt[0].seriesName}: ${(0,k.uf)(Bt[0].data.value,this.locale,"1.2-2")}%<br>`,["24h","3d"].includes(this.timespan)?Qt+="<small>"+"\u10D1\u10DA\u10DD\u10D9\u10E8\u10D8: " + Bt[0].data.block + ""+"</small>":Qt+="<small>"+"\u10D1\u10DA\u10DD\u10D9\u10E8\u10D8: " + Bt[0].data.block + ""+"</small>",Qt}},xAxis:0===E.length?void 0:{name:(0,X.ZI)(this.locale,this.timespan),nameLocation:"middle",nameTextStyle:{padding:[10,0,0,0]},type:"category",axisLine:{onZero:!0},axisLabel:{formatter:Bt=>(0,X.n7)(this.locale,this.timespan,1e3*parseInt(Bt,10)),align:"center",fontSize:11,lineHeight:12,hideOverlap:!0,padding:[0,5]},data:E.map(Bt=>Bt[0])},yAxis:0===E.length?void 0:[{type:"value",axisLabel:{color:"rgb(110, 112, 121)",formatter:Bt=>`${Bt}%`},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}}}],series:0===E.length?void 0:[{zlevel:0,name:"\u10D3\u10D0\u10DB\u10D7\u10EE\u10D5\u10D4\u10D5\u10D8\u10E1 \u10DB\u10D0\u10E9\u10D5\u10D4\u10DC\u10D4\u10D1\u10D4\u10DA\u10D8",data:E.map(Bt=>({value:Bt[2],block:Bt[1],itemStyle:{color:this.getPredictionColor(Bt[2])}})),type:"bar",barWidth:"90%",barMaxWidth:50}],dataZoom:0===E.length?void 0:[{type:"inside",realtime:!0,zoomLock:!0,maxSpan:100,minSpan:5,moveOnMouseMove:!1},{showDetail:!1,show:!0,type:"slider",brushSelect:!1,realtime:!0,left:20,right:15,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}]}}colorGradient(E,pt,Bt,Qt){let _e=pt,Ee=Bt,Xe=E;Qt&&(Xe*=2,Xe>=1&&(Xe-=1,_e=Bt,Ee=Qt));const hr=Ee.green-_e.green,jr=Ee.blue-_e.blue;return"rgb("+Math.floor(_e.red+(Ee.red-_e.red)*Xe)+","+Math.floor(_e.green+hr*Xe)+","+Math.floor(_e.blue+jr*Xe)+")"}getPredictionColor(E){return this.colorGradient(Math.pow((100-E)/100,.5),{red:67,green:171,blue:71},{red:253,green:216,blue:53},{red:244,green:0,blue:0})}onChartInit(E){this.chartInstance=E,this.chartInstance.on("click",pt=>{this.zone.run(()=>{if(["24h","3d"].includes(this.timespan)){const Bt=new q.w(this.stateService).transform(`/block/${pt.data.block}`);this.router.navigate([Bt])}})})}isMobile(){return window.innerWidth<=767.98}onSaveChart(){const E=this.chartOptions.grid.bottom,pt=new Date;this.chartOptions.grid.bottom=40,this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`block-fees-${this.timespan}-${Math.round(pt.getTime()/1e3)}.svg`),this.chartOptions.grid.bottom=E,this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36(N.v),n.Y36(et.s),n.Y36($.QS),n.Y36(st.V),n.Y36(n.R0b),n.Y36(St.gz),n.Y36(K.b),n.Y36(St.F0))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-block-prediction-graph"]],inputs:{right:"right",left:"left"},decls:12,vars:9,consts:function(){let Lt;return Lt="\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10EC\u10D8\u10DC\u10D0\u10E1\u10EC\u10D0\u10E0\u10DB\u10D4\u10E2\u10E7\u10D5\u10D4\u10DA\u10D4\u10D1\u10D8\u10E1 \u10E1\u10D8\u10D6\u10E3\u10E1\u10E2\u10D4",[[1,"full-container"],[1,"card-header","mb-0","mb-md-4"],[1,"d-flex","d-md-block","align-items-baseline"],Lt,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],["class","formRadioGroup",3,"formGroup",4,"ngIf"],["echarts","",1,"chart",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],[1,"formRadioGroup",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],["class","btn btn-primary btn-sm",3,"active",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","24h","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3d","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1w","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","all","formControlName","dateSpan",3,"value","routerLink"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"]]},template:function(E,pt){1&E&&(n._UZ(0,"app-indexing-progress"),n.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"span"),n.SDv(5,3),n.qZA(),n.TgZ(6,"button",4),n.NdJ("click",function(){return pt.onSaveChart()}),n._UZ(7,"fa-icon",5),n.qZA()(),n.YNc(8,A,12,15,"form",6),n.ALo(9,"async"),n.qZA(),n.TgZ(10,"div",7),n.NdJ("chartInit",function(Qt){return pt.onChartInit(Qt)}),n.qZA(),n.YNc(11,R,2,0,"div",8),n.qZA()),2&E&&(n.xp6(7),n.Q6J("icon",n.DdM(8,Z))("fixedWidth",!0),n.xp6(1),n.Q6J("ngIf",n.lcZ(9,6,pt.statsObservable$)),n.xp6(2),n.Q6J("initOpts",pt.chartInitOptions)("options",pt.chartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.O5,St.rH,$._Y,$.Fj,$._,$.JJ,$.JL,$.sg,$.u,_.BN,j.G,B._w,k.Ov,q.w],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:500px;height:calc(100% - 150px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{padding-bottom:100px}}.chart[_ngcontent-%COMP%]{width:100%;height:100%;padding-bottom:20px;padding-right:10px}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 629px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}@media (max-width: 567px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:100%;max-height:270px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}",".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}"],changeDetection:0}),H})();var ot=D(9516),at=D(4529);const lt=function(H){return[H]};function ht(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",14),n.ALo(2,"relativeUrl"),n._uU(3," 24h "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","24h"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","24h")("routerLink",n.VKq(6,lt,n.lcZ(2,4,"/graphs/mining/block-fee-rates")))}}function vt(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",15),n.ALo(2,"relativeUrl"),n._uU(3," 3D "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3d"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3d")("routerLink",n.VKq(6,lt,n.lcZ(2,4,"/graphs/mining/block-fee-rates")))}}function ct(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",16),n.ALo(2,"relativeUrl"),n._uU(3," 1W "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1w"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1w")("routerLink",n.VKq(6,lt,n.lcZ(2,4,"/graphs/mining/block-fee-rates")))}}function dt(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",17),n.ALo(2,"relativeUrl"),n._uU(3," 1M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1m")("routerLink",n.VKq(6,lt,n.lcZ(2,4,"/graphs/mining/block-fee-rates")))}}function Mt(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",18),n.ALo(2,"relativeUrl"),n._uU(3," 3M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3m")("routerLink",n.VKq(6,lt,n.lcZ(2,4,"/graphs/mining/block-fee-rates")))}}function Pt(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",19),n.ALo(2,"relativeUrl"),n._uU(3," 6M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","6m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","6m")("routerLink",n.VKq(6,lt,n.lcZ(2,4,"/graphs/mining/block-fee-rates")))}}function wt(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",20),n.ALo(2,"relativeUrl"),n._uU(3," 1Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1y")("routerLink",n.VKq(6,lt,n.lcZ(2,4,"/graphs/mining/block-fee-rates")))}}function Ot(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",21),n.ALo(2,"relativeUrl"),n._uU(3," 2Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","2y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","2y")("routerLink",n.VKq(6,lt,n.lcZ(2,4,"/graphs/mining/block-fee-rates")))}}function Ft(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",22),n.ALo(2,"relativeUrl"),n._uU(3," 3Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3y")("routerLink",n.VKq(6,lt,n.lcZ(2,4,"/graphs/mining/block-fee-rates")))}}const Ut=function(H){return{disabled:H}};function kt(H,Lt){if(1&H&&(n.TgZ(0,"form",9)(1,"div",10),n.YNc(2,ht,4,8,"label",11),n.YNc(3,vt,4,8,"label",11),n.YNc(4,ct,4,8,"label",11),n.YNc(5,dt,4,8,"label",11),n.YNc(6,Mt,4,8,"label",11),n.YNc(7,Pt,4,8,"label",11),n.YNc(8,wt,4,8,"label",11),n.YNc(9,Ot,4,8,"label",11),n.YNc(10,Ft,4,8,"label",11),n.TgZ(11,"label",12),n._UZ(12,"input",13),n.ALo(13,"relativeUrl"),n._uU(14," ALL "),n.qZA()()()),2&H){const E=Lt.ngIf,pt=n.oxw();n.Q6J("formGroup",pt.radioGroupForm),n.xp6(1),n.Tol(n.VKq(18,Ut,pt.isLoading)),n.xp6(1),n.Q6J("ngIf",E.blockCount>=144),n.xp6(1),n.Q6J("ngIf",E.blockCount>=432),n.xp6(1),n.Q6J("ngIf",E.blockCount>=1008),n.xp6(1),n.Q6J("ngIf",E.blockCount>=4320),n.xp6(1),n.Q6J("ngIf",E.blockCount>=12960),n.xp6(1),n.Q6J("ngIf",E.blockCount>=25920),n.xp6(1),n.Q6J("ngIf",E.blockCount>=52560),n.xp6(1),n.Q6J("ngIf",E.blockCount>=105120),n.xp6(1),n.Q6J("ngIf",E.blockCount>=157680),n.xp6(1),n.ekj("active","all"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","all")("routerLink",n.VKq(20,lt,n.lcZ(13,16,"/graphs/mining/block-fee-rates")))}}function ie(H,Lt){1&H&&(n.TgZ(0,"div",23),n._UZ(1,"div",24),n.qZA())}const ue=function(){return["fas","download"]};let Pe=(()=>{class H{constructor(E,pt,Bt,Qt,_e,Ee,Xe,je,hr,jr){this.locale=E,this.seoService=pt,this.apiService=Bt,this.formBuilder=Qt,this.storageService=_e,this.miningService=Ee,this.stateService=Xe,this.router=je,this.zone=hr,this.route=jr,this.right=45,this.left=75,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.isLoading=!0,this.formatNumber=k.uf,this.timespan="",this.chartInstance=void 0,this.radioGroupForm=this.formBuilder.group({dateSpan:"1y"}),this.radioGroupForm.controls.dateSpan.setValue("1y")}ngOnInit(){this.seoService.setTitle("\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD\u10E1 \u10DB\u10D0\u10E9\u10D5\u10D4\u10DC\u10D4\u10D1\u10D4\u10DA\u10D8"),this.miningWindowPreference=this.miningService.getDefaultTimespan("24h"),this.radioGroupForm=this.formBuilder.group({dateSpan:this.miningWindowPreference}),this.radioGroupForm.controls.dateSpan.setValue(this.miningWindowPreference),this.route.fragment.subscribe(E=>{["24h","3d","1w","1m","3m","6m","1y","2y","3y","all"].indexOf(E)>-1&&this.radioGroupForm.controls.dateSpan.setValue(E,{emitEvent:!1})}),this.statsObservable$=this.radioGroupForm.get("dateSpan").valueChanges.pipe((0,_t.O)(this.radioGroupForm.controls.dateSpan.value),(0,mt.w)(E=>(this.storageService.setValue("miningWindowPreference",E),this.timespan=E,this.isLoading=!0,this.apiService.getHistoricalBlockFeeRates$(E).pipe((0,gt.b)(pt=>{const Bt={Min:[],"10th":[],"25th":[],Median:[],"75th":[],"90th":[],Max:[]};for(const Ee of pt.body){const Xe=1e3*Ee.timestamp;Bt.Min.push([Xe,Ee.avgFee_0,Ee.avgHeight]),Bt["10th"].push([Xe,Ee.avgFee_10,Ee.avgHeight]),Bt["25th"].push([Xe,Ee.avgFee_25,Ee.avgHeight]),Bt.Median.push([Xe,Ee.avgFee_50,Ee.avgHeight]),Bt["75th"].push([Xe,Ee.avgFee_75,Ee.avgHeight]),Bt["90th"].push([Xe,Ee.avgFee_90,Ee.avgHeight]),Bt.Max.push([Xe,Ee.avgFee_100,Ee.avgHeight])}const Qt=[],_e=[];for(const Ee in Bt)Qt.push({zlevel:0,stack:"Total",name:Ee,data:Bt[Ee],type:"bar",barWidth:"100%",large:!0}),_e.push({name:Ee,inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect",enabled:!1,selected:!1});this.prepareChartOptions({legends:_e,series:Qt}),this.isLoading=!1}),(0,yt.U)(pt=>({blockCount:parseInt(pt.headers.get("x-total-count"),10)}))))),(0,V.B)())}prepareChartOptions(E){this.chartOptions={color:["#D81B60","#8E24AA","#1E88E5","#7CB342","#FDD835","#6D4C41","#546E7A"],animation:!1,grid:{right:this.right,left:this.left,bottom:80,top:this.isMobile()?10:50},tooltip:{show:!this.isMobile(),trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:function(pt){if(pt.length<=0)return"";let Bt=`<b style="color: white; margin-left: 2px">${(0,X.Pw)(this.locale,this.timespan,parseInt(pt[0].axisValue,10))}</b><br>`;for(const Qt of pt.reverse())Bt+=`${Qt.marker} ${Qt.seriesName}: ${Qt.data[1]} radiowavess/vByte<br>`;return["24h","3d"].includes(this.timespan)?Bt+="<small>"+"\u10D1\u10DA\u10DD\u10D9\u10E8\u10D8: " + pt[0].data[2] + ""+"</small>":Bt+="<small>"+"\u10D1\u10DA\u10DD\u10D9\u10E8\u10D8: " + pt[0].data[2] + ""+"</small>",Bt}.bind(this)},xAxis:0===E.series.length?void 0:{name:(0,X.ZI)(this.locale,this.timespan),nameLocation:"middle",nameTextStyle:{padding:[10,0,0,0]},type:"category",boundaryGap:!1,axisLine:{onZero:!0},axisLabel:{formatter:pt=>(0,X.n7)(this.locale,this.timespan,parseInt(pt,10)),align:"center",fontSize:11,lineHeight:12,hideOverlap:!0,padding:[0,5]}},legend:0===E.series.length?void 0:{padding:[10,75],data:E.legends,selected:JSON.parse(this.storageService.getValue("fee_rates_legend"))??{Min:!0,"10th":!0,"25th":!0,Median:!0,"75th":!0,"90th":!0,Max:!1},id:4242},yAxis:0===E.series.length?void 0:{position:"left",axisLabel:{color:"rgb(110, 112, 121)",formatter:pt=>{const Bt=(0,ot.hD)(pt);return`${Math.round(pt/Bt.divider)}${Bt.unit} s/vB`}},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}},type:"value",max:pt=>"all"===this.timespan?Math.min(pt.max,5e3):void 0},series:E.series,dataZoom:[{type:"inside",realtime:!0,zoomLock:!0,maxSpan:100,minSpan:5,moveOnMouseMove:!1},{showDetail:!1,show:!0,type:"slider",brushSelect:!1,realtime:!0,left:20,right:15,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}]}}onChartInit(E){void 0===this.chartInstance&&(this.chartInstance=E,this.chartInstance.on("click",pt=>{this.zone.run(()=>{if(["24h","3d"].includes(this.timespan)){const Bt=new q.w(this.stateService).transform(`/block/${pt.data[2]}`);this.router.navigate([Bt])}})}),this.chartInstance.on("legendselectchanged",pt=>{this.storageService.setValue("fee_rates_legend",JSON.stringify(pt.selected))}))}isMobile(){return window.innerWidth<=767.98}onSaveChart(){const E=this.chartOptions.grid.bottom,pt=new Date;this.chartOptions.grid.bottom=40,this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`block-fee-rates-${this.timespan}-${Math.round(pt.getTime()/1e3)}.svg`),this.chartOptions.grid.bottom=E,this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36(N.v),n.Y36(et.s),n.Y36($.QS),n.Y36(st.V),n.Y36(at.J),n.Y36(K.b),n.Y36(St.F0),n.Y36(n.R0b),n.Y36(St.gz))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-block-fee-rates-graph"]],inputs:{right:"right",left:"left"},decls:12,vars:9,consts:function(){let Lt;return Lt="\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD\u10E1 \u10DB\u10D0\u10E9\u10D5\u10D4\u10DC\u10D4\u10D1\u10D4\u10DA\u10D8",[[1,"full-container"],[1,"card-header","mb-0","mb-md-4"],[1,"d-flex","d-md-block","align-items-baseline"],Lt,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],["class","formRadioGroup",3,"formGroup",4,"ngIf"],["echarts","",1,"chart",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],[1,"formRadioGroup",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],["class","btn btn-primary btn-sm",3,"active",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","all","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","24h","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3d","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1w","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"]]},template:function(E,pt){1&E&&(n._UZ(0,"app-indexing-progress"),n.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"span"),n.SDv(5,3),n.qZA(),n.TgZ(6,"button",4),n.NdJ("click",function(){return pt.onSaveChart()}),n._UZ(7,"fa-icon",5),n.qZA()(),n.YNc(8,kt,15,22,"form",6),n.ALo(9,"async"),n.qZA(),n.TgZ(10,"div",7),n.NdJ("chartInit",function(Qt){return pt.onChartInit(Qt)}),n.qZA(),n.YNc(11,ie,2,0,"div",8),n.qZA()),2&E&&(n.xp6(7),n.Q6J("icon",n.DdM(8,ue))("fixedWidth",!0),n.xp6(1),n.Q6J("ngIf",n.lcZ(9,6,pt.statsObservable$)),n.xp6(2),n.Q6J("initOpts",pt.chartInitOptions)("options",pt.chartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.O5,St.rH,$._Y,$.Fj,$._,$.JJ,$.JL,$.sg,$.u,_.BN,j.G,B._w,k.Ov,q.w],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:500px;height:calc(100% - 150px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{padding-bottom:100px}}.chart[_ngcontent-%COMP%]{width:100%;height:100%;padding-bottom:20px;padding-right:10px}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 629px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}@media (max-width: 567px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:100%;max-height:270px}.formRadioGroup[_ngcontent-%COMP%]{margin-top:6px;display:flex;flex-direction:column}@media (min-width: 991px){.formRadioGroup[_ngcontent-%COMP%]{position:relative;top:-100px}}@media (min-width: 830px) and (max-width: 991px){.formRadioGroup[_ngcontent-%COMP%]{position:relative;top:0}}@media (min-width: 830px){.formRadioGroup[_ngcontent-%COMP%]{flex-direction:row;float:right;margin-top:0}}.formRadioGroup[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{font-size:9px}@media (min-width: 830px){.formRadioGroup[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{font-size:14px}}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}",".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}"],changeDetection:0}),H})();var Se=D(1420),De=D(7807),Fe=D(5963);const Ye=function(H){return[H]};function tr(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",14),n.ALo(2,"relativeUrl"),n._uU(3," 1M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1m")("routerLink",n.VKq(6,Ye,n.lcZ(2,4,"/graphs/mining/block-fees")))}}function or(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",15),n.ALo(2,"relativeUrl"),n._uU(3," 3M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3m")("routerLink",n.VKq(6,Ye,n.lcZ(2,4,"/graphs/mining/block-fees")))}}function Hr(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",16),n.ALo(2,"relativeUrl"),n._uU(3," 6M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","6m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","6m")("routerLink",n.VKq(6,Ye,n.lcZ(2,4,"/graphs/mining/block-fees")))}}function Rr(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",17),n.ALo(2,"relativeUrl"),n._uU(3," 1Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1y")("routerLink",n.VKq(6,Ye,n.lcZ(2,4,"/graphs/mining/block-fees")))}}function qr(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",18),n.ALo(2,"relativeUrl"),n._uU(3," 2Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","2y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","2y")("routerLink",n.VKq(6,Ye,n.lcZ(2,4,"/graphs/mining/block-fees")))}}function Vr(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",19),n.ALo(2,"relativeUrl"),n._uU(3," 3Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3y")("routerLink",n.VKq(6,Ye,n.lcZ(2,4,"/graphs/mining/block-fees")))}}const Ve=function(H){return{disabled:H}};function er(H,Lt){if(1&H&&(n.TgZ(0,"form",9)(1,"div",10),n.YNc(2,tr,4,8,"label",11),n.YNc(3,or,4,8,"label",11),n.YNc(4,Hr,4,8,"label",11),n.YNc(5,Rr,4,8,"label",11),n.YNc(6,qr,4,8,"label",11),n.YNc(7,Vr,4,8,"label",11),n.TgZ(8,"label",12),n._UZ(9,"input",13),n.ALo(10,"relativeUrl"),n._uU(11," ALL "),n.qZA()()()),2&H){const E=Lt.ngIf,pt=n.oxw();n.Q6J("formGroup",pt.radioGroupForm),n.xp6(1),n.Tol(n.VKq(15,Ve,pt.isLoading)),n.xp6(1),n.Q6J("ngIf",E.blockCount>=4320),n.xp6(1),n.Q6J("ngIf",E.blockCount>=12960),n.xp6(1),n.Q6J("ngIf",E.blockCount>=25920),n.xp6(1),n.Q6J("ngIf",E.blockCount>=52560),n.xp6(1),n.Q6J("ngIf",E.blockCount>=105120),n.xp6(1),n.Q6J("ngIf",E.blockCount>=157680),n.xp6(1),n.ekj("active","all"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","all")("routerLink",n.VKq(17,Ye,n.lcZ(10,13,"/graphs/mining/block-fees")))}}function Ar(H,Lt){1&H&&(n.TgZ(0,"div",20),n._UZ(1,"div",21),n.qZA())}const Lr=function(){return["fas","download"]};let Cr=(()=>{class H{constructor(E,pt,Bt,Qt,_e,Ee,Xe,je,hr){this.locale=E,this.seoService=pt,this.apiService=Bt,this.formBuilder=Qt,this.storageService=_e,this.miningService=Ee,this.route=Xe,this.fiatShortenerPipe=je,this.fiatCurrencyPipe=hr,this.right=45,this.left=75,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.isLoading=!0,this.formatNumber=k.uf,this.timespan="",this.chartInstance=void 0,this.radioGroupForm=this.formBuilder.group({dateSpan:"1y"}),this.radioGroupForm.controls.dateSpan.setValue("1y"),this.currency="USD"}ngOnInit(){this.seoService.setTitle("\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD\u10D4\u10D1\u10D8"),this.miningWindowPreference=this.miningService.getDefaultTimespan("1m"),this.radioGroupForm=this.formBuilder.group({dateSpan:this.miningWindowPreference}),this.radioGroupForm.controls.dateSpan.setValue(this.miningWindowPreference),this.route.fragment.subscribe(E=>{["1m","3m","6m","1y","2y","3y","all"].indexOf(E)>-1&&this.radioGroupForm.controls.dateSpan.setValue(E,{emitEvent:!1})}),this.statsObservable$=this.radioGroupForm.get("dateSpan").valueChanges.pipe((0,_t.O)(this.radioGroupForm.controls.dateSpan.value),(0,mt.w)(E=>(this.isLoading=!0,this.storageService.setValue("miningWindowPreference",E),this.timespan=E,this.isLoading=!0,this.apiService.getHistoricalBlockFees$(E).pipe((0,gt.b)(pt=>{this.prepareChartOptions({blockFees:pt.body.map(Bt=>[1e3*Bt.timestamp,Bt.avgFees/1e8,Bt.avgHeight]),blockFeesFiat:pt.body.filter(Bt=>Bt[this.currency]>0).map(Bt=>[1e3*Bt.timestamp,Bt.avgFees/1e8*Bt[this.currency],Bt.avgHeight])}),this.isLoading=!1}),(0,yt.U)(pt=>({blockCount:parseInt(pt.headers.get("x-total-count"),10)}))))),(0,V.B)())}prepareChartOptions(E){let pt;0===E.blockFees.length&&(pt={textStyle:{color:"grey",fontSize:15},text:"\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D8\u10DC\u10D3\u10D4\u10E5\u10E1\u10D8\u10E0\u10D4\u10D1\u10D0",left:"center",top:"center"}),this.chartOptions={title:pt,color:[new Se.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#FDD835"},{offset:1,color:"#FB8C00"}]),new Se.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#C0CA33"},{offset:1,color:"#1B5E20"}])],animation:!1,grid:{top:30,bottom:80,right:this.right,left:this.left},tooltip:{show:!this.isMobile(),trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:function(Bt){if(Bt.length<=0)return"";let Qt=`<b style="color: white; margin-left: 2px">\n            ${(0,X.Pw)(this.locale,this.timespan,parseInt(Bt[0].axisValue,10))}</b><br>`;for(const _e of Bt)0===_e.seriesIndex?Qt+=`${_e.marker} ${_e.seriesName}: ${(0,k.uf)(_e.data[1],this.locale,"1.3-3")} BIT<br>`:1===_e.seriesIndex&&(Qt+=`${_e.marker} ${_e.seriesName}: ${this.fiatCurrencyPipe.transform(_e.data[1],null,this.currency)}<br>`);return Qt+=`<small>* On average around block ${Bt[0].data[2]}</small>`,Qt}.bind(this)},xAxis:0===E.blockFees.length?void 0:{type:"time",splitNumber:this.isMobile()?5:10,axisLabel:{hideOverlap:!0}},legend:0===E.blockFees.length?void 0:{data:[{name:"Fees BIT",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"},{name:"Fees "+this.currency,inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"}]},yAxis:0===E.blockFees.length?void 0:[{type:"value",axisLabel:{color:"rgb(110, 112, 121)",formatter:Bt=>`${Bt} BIT`},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}}},{type:"value",position:"right",axisLabel:{color:"rgb(110, 112, 121)",formatter:function(Bt){return this.fiatShortenerPipe.transform(Bt,null,this.currency)}.bind(this)},splitLine:{show:!1}}],series:0===E.blockFees.length?void 0:[{legendHoverLink:!1,zlevel:0,yAxisIndex:0,name:"Fees BIT",data:E.blockFees,type:"line",smooth:.25,symbol:"none",lineStyle:{width:1,opacity:1}},{legendHoverLink:!1,zlevel:1,yAxisIndex:1,name:"Fees "+this.currency,data:E.blockFeesFiat,type:"line",smooth:.25,symbol:"none",lineStyle:{width:2,opacity:1}}],dataZoom:0===E.blockFees.length?void 0:[{type:"inside",realtime:!0,zoomLock:!0,maxSpan:100,minSpan:5,moveOnMouseMove:!1},{showDetail:!1,show:!0,type:"slider",brushSelect:!1,realtime:!0,left:20,right:15,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}]}}onChartInit(E){this.chartInstance=E}isMobile(){return window.innerWidth<=767.98}onSaveChart(){const E=this.chartOptions.grid.bottom,pt=new Date;this.chartOptions.grid.bottom=40,this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`block-fees-${this.timespan}-${Math.round(pt.getTime()/1e3)}.svg`),this.chartOptions.grid.bottom=E,this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36(N.v),n.Y36(et.s),n.Y36($.QS),n.Y36(st.V),n.Y36(at.J),n.Y36(St.gz),n.Y36(De.z),n.Y36(Fe.y))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-block-fees-graph"]],inputs:{right:"right",left:"left"},decls:12,vars:9,consts:function(){let Lt;return Lt="\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD\u10D4\u10D1\u10D8",[[1,"full-container"],[1,"card-header","mb-0","mb-md-4"],[1,"d-flex","d-md-block","align-items-baseline"],Lt,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],["class","formRadioGroup",3,"formGroup",4,"ngIf"],["echarts","",1,"chart",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],[1,"formRadioGroup",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],["class","btn btn-primary btn-sm",3,"active",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","all","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"]]},template:function(E,pt){1&E&&(n._UZ(0,"app-indexing-progress"),n.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"span"),n.SDv(5,3),n.qZA(),n.TgZ(6,"button",4),n.NdJ("click",function(){return pt.onSaveChart()}),n._UZ(7,"fa-icon",5),n.qZA()(),n.YNc(8,er,12,19,"form",6),n.ALo(9,"async"),n.qZA(),n.TgZ(10,"div",7),n.NdJ("chartInit",function(Qt){return pt.onChartInit(Qt)}),n.qZA(),n.YNc(11,Ar,2,0,"div",8),n.qZA()),2&E&&(n.xp6(7),n.Q6J("icon",n.DdM(8,Lr))("fixedWidth",!0),n.xp6(1),n.Q6J("ngIf",n.lcZ(9,6,pt.statsObservable$)),n.xp6(2),n.Q6J("initOpts",pt.chartInitOptions)("options",pt.chartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.O5,St.rH,$._Y,$.Fj,$._,$.JJ,$.JL,$.sg,$.u,_.BN,j.G,B._w,k.Ov,q.w],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:500px;height:calc(100% - 150px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{padding-bottom:100px}}.chart[_ngcontent-%COMP%]{width:100%;height:100%;padding-bottom:20px;padding-right:10px}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 629px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}@media (max-width: 567px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:100%;max-height:270px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}",".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}"],changeDetection:0}),H})();const Zr=function(H){return[H]};function Nr(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",14),n.ALo(2,"relativeUrl"),n._uU(3," 1M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1m")("routerLink",n.VKq(6,Zr,n.lcZ(2,4,"/graphs/mining/block-rewards")))}}function re(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",15),n.ALo(2,"relativeUrl"),n._uU(3," 3M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3m")("routerLink",n.VKq(6,Zr,n.lcZ(2,4,"/graphs/mining/block-rewards")))}}function pe(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",16),n.ALo(2,"relativeUrl"),n._uU(3," 6M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","6m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","6m")("routerLink",n.VKq(6,Zr,n.lcZ(2,4,"/graphs/mining/block-rewards")))}}function we(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",17),n.ALo(2,"relativeUrl"),n._uU(3," 1Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1y")("routerLink",n.VKq(6,Zr,n.lcZ(2,4,"/graphs/mining/block-rewards")))}}function Le(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",18),n.ALo(2,"relativeUrl"),n._uU(3," 2Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","2y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","2y")("routerLink",n.VKq(6,Zr,n.lcZ(2,4,"/graphs/mining/block-rewards")))}}function Kt(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",19),n.ALo(2,"relativeUrl"),n._uU(3," 3Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3y")("routerLink",n.VKq(6,Zr,n.lcZ(2,4,"/graphs/mining/block-rewards")))}}const ne=function(H){return{disabled:H}};function le(H,Lt){if(1&H&&(n.TgZ(0,"form",9)(1,"div",10),n.YNc(2,Nr,4,8,"label",11),n.YNc(3,re,4,8,"label",11),n.YNc(4,pe,4,8,"label",11),n.YNc(5,we,4,8,"label",11),n.YNc(6,Le,4,8,"label",11),n.YNc(7,Kt,4,8,"label",11),n.TgZ(8,"label",12),n._UZ(9,"input",13),n.ALo(10,"relativeUrl"),n._uU(11," ALL "),n.qZA()()()),2&H){const E=Lt.ngIf,pt=n.oxw();n.Q6J("formGroup",pt.radioGroupForm),n.xp6(1),n.Tol(n.VKq(15,ne,pt.isLoading)),n.xp6(1),n.Q6J("ngIf",E.blockCount>=4320),n.xp6(1),n.Q6J("ngIf",E.blockCount>=12960),n.xp6(1),n.Q6J("ngIf",E.blockCount>=25920),n.xp6(1),n.Q6J("ngIf",E.blockCount>=52560),n.xp6(1),n.Q6J("ngIf",E.blockCount>=105120),n.xp6(1),n.Q6J("ngIf",E.blockCount>=157680),n.xp6(1),n.ekj("active","all"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","all")("routerLink",n.VKq(17,Zr,n.lcZ(10,13,"/graphs/mining/block-rewards")))}}function Xt(H,Lt){1&H&&(n.TgZ(0,"div",20),n._UZ(1,"div",21),n.qZA())}const Te=function(){return["fas","download"]};let ye=(()=>{class H{constructor(E,pt,Bt,Qt,_e,Ee,Xe,je,hr){this.locale=E,this.seoService=pt,this.apiService=Bt,this.formBuilder=Qt,this.miningService=_e,this.storageService=Ee,this.route=Xe,this.fiatShortenerPipe=je,this.fiatCurrencyPipe=hr,this.right=45,this.left=75,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.isLoading=!0,this.formatNumber=k.uf,this.timespan="",this.chartInstance=void 0,this.currency="USD"}ngOnInit(){this.seoService.setTitle("\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0"),this.miningWindowPreference=this.miningService.getDefaultTimespan("3m"),this.radioGroupForm=this.formBuilder.group({dateSpan:this.miningWindowPreference}),this.radioGroupForm.controls.dateSpan.setValue(this.miningWindowPreference),this.route.fragment.subscribe(E=>{["1m","3m","6m","1y","2y","3y","all"].indexOf(E)>-1&&this.radioGroupForm.controls.dateSpan.setValue(E,{emitEvent:!1})}),this.statsObservable$=this.radioGroupForm.get("dateSpan").valueChanges.pipe((0,_t.O)(this.radioGroupForm.controls.dateSpan.value),(0,mt.w)(E=>(this.storageService.setValue("miningWindowPreference",E),this.timespan=E,this.isLoading=!0,this.apiService.getHistoricalBlockRewards$(E).pipe((0,gt.b)(pt=>{this.prepareChartOptions({blockRewards:pt.body.map(Bt=>[1e3*Bt.timestamp,Bt.avgRewards/1e8,Bt.avgHeight]),blockRewardsFiat:pt.body.filter(Bt=>Bt[this.currency]>0).map(Bt=>[1e3*Bt.timestamp,Bt.avgRewards/1e8*Bt[this.currency],Bt.avgHeight])}),this.isLoading=!1}),(0,yt.U)(pt=>({blockCount:parseInt(pt.headers.get("x-total-count"),10)}))))),(0,V.B)())}prepareChartOptions(E){let pt;0===E.blockRewards.length&&(pt={textStyle:{color:"grey",fontSize:15},text:"\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D8\u10DC\u10D3\u10D4\u10E5\u10E1\u10D8\u10E0\u10D4\u10D1\u10D0",left:"center",top:"center"}),this.chartOptions={title:pt,animation:!1,color:[new Se.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#FDD835"},{offset:1,color:"#FB8C00"}]),new Se.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#C0CA33"},{offset:1,color:"#1B5E20"}])],grid:{top:20,bottom:80,right:this.right,left:this.left},tooltip:{show:!this.isMobile(),trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:function(Qt){if(Qt.length<=0)return"";let _e=`<b style="color: white; margin-left: 2px">\n            ${(0,X.Pw)(this.locale,this.timespan,parseInt(Qt[0].axisValue,10))}</b><br>`;for(const Ee of Qt)0===Ee.seriesIndex?_e+=`${Ee.marker} ${Ee.seriesName}: ${(0,k.uf)(Ee.data[1],this.locale,"1.3-3")} BIT<br>`:1===Ee.seriesIndex&&(_e+=`${Ee.marker} ${Ee.seriesName}: ${this.fiatCurrencyPipe.transform(Ee.data[1],null,this.currency)}<br>`);return _e+=`<small>* On average around block ${Qt[0].data[2]}</small>`,_e}.bind(this)},xAxis:0===E.blockRewards.length?void 0:{type:"time",splitNumber:this.isMobile()?5:10,axisLabel:{hideOverlap:!0}},legend:0===E.blockRewards.length?void 0:{data:[{name:"Rewards BIT",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"},{name:"Rewards "+this.currency,inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"}]},yAxis:0===E.blockRewards.length?void 0:[{type:"value",axisLabel:{color:"rgb(110, 112, 121)",formatter:Qt=>`${Qt} BIT`},min:Qt=>Math.round(.9*Qt.min*10)/10,max:Qt=>Math.round(1.1*Qt.max*10)/10,splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}}},{min:Qt=>Math.round(.9*Qt.min*10)/10,max:Qt=>Math.round(1.1*Qt.max*10)/10,type:"value",position:"right",axisLabel:{color:"rgb(110, 112, 121)",formatter:function(Qt){return this.fiatShortenerPipe.transform(Qt,null,this.currency)}.bind(this)},splitLine:{show:!1}}],series:0===E.blockRewards.length?void 0:[{legendHoverLink:!1,zlevel:0,yAxisIndex:0,name:"Rewards BIT",data:E.blockRewards,type:"line",smooth:.25,symbol:"none"},{legendHoverLink:!1,zlevel:1,yAxisIndex:1,name:"Rewards "+this.currency,data:E.blockRewardsFiat,type:"line",smooth:.25,symbol:"none",lineStyle:{width:2,opacity:.75},areaStyle:{opacity:.05}}],dataZoom:0===E.blockRewards.length?void 0:[{type:"inside",realtime:!0,zoomLock:!0,maxSpan:100,minSpan:5,moveOnMouseMove:!1},{showDetail:!1,show:!0,type:"slider",brushSelect:!1,realtime:!0,left:20,right:15,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}]}}onChartInit(E){this.chartInstance=E}isMobile(){return window.innerWidth<=767.98}onSaveChart(){const E=this.chartOptions.grid.bottom,pt=new Date;this.chartOptions.grid.bottom=40,this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`block-rewards-${this.timespan}-${Math.round(pt.getTime()/1e3)}.svg`),this.chartOptions.grid.bottom=E,this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36(N.v),n.Y36(et.s),n.Y36($.QS),n.Y36(at.J),n.Y36(st.V),n.Y36(St.gz),n.Y36(De.z),n.Y36(Fe.y))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-block-rewards-graph"]],inputs:{right:"right",left:"left"},decls:12,vars:9,consts:function(){let Lt;return Lt="\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",[[1,"full-container"],[1,"card-header","mb-0","mb-md-4"],[1,"d-flex","d-md-block","align-items-baseline"],Lt,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],["class","formRadioGroup",3,"formGroup",4,"ngIf"],["echarts","",1,"chart",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],[1,"formRadioGroup",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],["class","btn btn-primary btn-sm",3,"active",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","all","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"]]},template:function(E,pt){1&E&&(n._UZ(0,"app-indexing-progress"),n.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"span"),n.SDv(5,3),n.qZA(),n.TgZ(6,"button",4),n.NdJ("click",function(){return pt.onSaveChart()}),n._UZ(7,"fa-icon",5),n.qZA()(),n.YNc(8,le,12,19,"form",6),n.ALo(9,"async"),n.qZA(),n.TgZ(10,"div",7),n.NdJ("chartInit",function(Qt){return pt.onChartInit(Qt)}),n.qZA(),n.YNc(11,Xt,2,0,"div",8),n.qZA()),2&E&&(n.xp6(7),n.Q6J("icon",n.DdM(8,Te))("fixedWidth",!0),n.xp6(1),n.Q6J("ngIf",n.lcZ(9,6,pt.statsObservable$)),n.xp6(2),n.Q6J("initOpts",pt.chartInitOptions)("options",pt.chartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.O5,St.rH,$._Y,$.Fj,$._,$.JJ,$.JL,$.sg,$.u,_.BN,j.G,B._w,k.Ov,q.w],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:500px;height:calc(100% - 150px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{padding-bottom:100px}}.chart[_ngcontent-%COMP%]{width:100%;height:100%;padding-bottom:20px;padding-right:10px}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 629px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}@media (max-width: 567px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:100%;max-height:270px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}",".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}"],changeDetection:0}),H})();const Ne=function(H){return[H]};function Qe(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",14),n.ALo(2,"relativeUrl"),n._uU(3," 24h "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","24h"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","24h")("routerLink",n.VKq(6,Ne,n.lcZ(2,4,"/graphs/mining/block-sizes-weights")))}}function Pr(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",15),n.ALo(2,"relativeUrl"),n._uU(3," 3D "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3d"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3d")("routerLink",n.VKq(6,Ne,n.lcZ(2,4,"/graphs/mining/block-sizes-weights")))}}function Ir(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",16),n.ALo(2,"relativeUrl"),n._uU(3," 1W "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1w"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1w")("routerLink",n.VKq(6,Ne,n.lcZ(2,4,"/graphs/mining/block-sizes-weights")))}}function Xr(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",17),n.ALo(2,"relativeUrl"),n._uU(3," 1M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1m")("routerLink",n.VKq(6,Ne,n.lcZ(2,4,"/graphs/mining/block-sizes-weights")))}}function An(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",18),n.ALo(2,"relativeUrl"),n._uU(3," 3M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3m")("routerLink",n.VKq(6,Ne,n.lcZ(2,4,"/graphs/mining/block-sizes-weights")))}}function $r(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",19),n.ALo(2,"relativeUrl"),n._uU(3," 6M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","6m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","6m")("routerLink",n.VKq(6,Ne,n.lcZ(2,4,"/graphs/mining/block-sizes-weights")))}}function $n(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",20),n.ALo(2,"relativeUrl"),n._uU(3," 1Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1y")("routerLink",n.VKq(6,Ne,n.lcZ(2,4,"/graphs/mining/block-sizes-weights")))}}function ai(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",21),n.ALo(2,"relativeUrl"),n._uU(3," 2Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","2y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","2y")("routerLink",n.VKq(6,Ne,n.lcZ(2,4,"/graphs/mining/block-sizes-weights")))}}function ro(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",22),n.ALo(2,"relativeUrl"),n._uU(3," 3Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3y")("routerLink",n.VKq(6,Ne,n.lcZ(2,4,"/graphs/mining/block-sizes-weights")))}}const qi=function(H){return{disabled:H}};function fa(H,Lt){if(1&H&&(n.TgZ(0,"form",9)(1,"div",10),n.YNc(2,Qe,4,8,"label",11),n.YNc(3,Pr,4,8,"label",11),n.YNc(4,Ir,4,8,"label",11),n.YNc(5,Xr,4,8,"label",11),n.YNc(6,An,4,8,"label",11),n.YNc(7,$r,4,8,"label",11),n.YNc(8,$n,4,8,"label",11),n.YNc(9,ai,4,8,"label",11),n.YNc(10,ro,4,8,"label",11),n.TgZ(11,"label",12),n._UZ(12,"input",13),n.ALo(13,"relativeUrl"),n._uU(14," ALL "),n.qZA()()()),2&H){const E=Lt.ngIf,pt=n.oxw();n.Q6J("formGroup",pt.radioGroupForm),n.xp6(1),n.Tol(n.VKq(18,qi,pt.isLoading)),n.xp6(1),n.Q6J("ngIf",E.blockCount>=144),n.xp6(1),n.Q6J("ngIf",E.blockCount>=432),n.xp6(1),n.Q6J("ngIf",E.blockCount>=1008),n.xp6(1),n.Q6J("ngIf",E.blockCount>=4320),n.xp6(1),n.Q6J("ngIf",E.blockCount>=12960),n.xp6(1),n.Q6J("ngIf",E.blockCount>=25920),n.xp6(1),n.Q6J("ngIf",E.blockCount>=52560),n.xp6(1),n.Q6J("ngIf",E.blockCount>=105120),n.xp6(1),n.Q6J("ngIf",E.blockCount>=157680),n.xp6(1),n.ekj("active","all"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","all")("routerLink",n.VKq(20,Ne,n.lcZ(13,16,"/graphs/mining/block-sizes-weights")))}}function Mi(H,Lt){1&H&&(n.TgZ(0,"div",23),n._UZ(1,"div",24),n.qZA())}const Wo=function(){return["fas","download"]};let To=(()=>{class H{constructor(E,pt,Bt,Qt,_e,Ee,Xe){this.locale=E,this.seoService=pt,this.apiService=Bt,this.formBuilder=Qt,this.storageService=_e,this.miningService=Ee,this.route=Xe,this.right=45,this.left=75,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.dir="ltr",this.isLoading=!0,this.formatNumber=k.uf,this.timespan="",this.chartInstance=void 0}ngOnInit(){let E=!0;this.seoService.setTitle("\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D6\u10DD\u10DB\u10D4\u10D1\u10D8"),this.miningWindowPreference=this.miningService.getDefaultTimespan("24h"),this.radioGroupForm=this.formBuilder.group({dateSpan:this.miningWindowPreference}),this.radioGroupForm.controls.dateSpan.setValue(this.miningWindowPreference),this.route.fragment.subscribe(pt=>{["24h","3d","1w","1m","3m","6m","1y","2y","3y","all"].indexOf(pt)>-1&&this.radioGroupForm.controls.dateSpan.setValue(pt,{emitEvent:!1})}),this.blockSizesWeightsObservable$=this.radioGroupForm.get("dateSpan").valueChanges.pipe((0,_t.O)(this.radioGroupForm.controls.dateSpan.value),(0,mt.w)(pt=>(this.timespan=pt,E||this.storageService.setValue("miningWindowPreference",pt),E=!1,this.miningWindowPreference=pt,this.isLoading=!0,this.apiService.getHistoricalBlockSizesAndWeights$(pt).pipe((0,gt.b)(Bt=>{const Qt=Bt.body;this.prepareChartOptions({sizes:Qt.sizes.map(_e=>[1e3*_e.timestamp,_e.avgSize/1e6,_e.avgHeight]),weights:Qt.weights.map(_e=>[1e3*_e.timestamp,_e.avgWeight/1e6,_e.avgHeight]),sizePerWeight:Qt.weights.map((_e,Ee)=>[1e3*_e.timestamp,Qt.sizes[Ee].avgSize/(_e.avgWeight/4),_e.avgHeight])}),this.isLoading=!1}),(0,yt.U)(Bt=>({blockCount:parseInt(Bt.headers.get("x-total-count"),10)}))))),(0,V.B)())}prepareChartOptions(E){let pt;0===E.sizes.length&&(pt={textStyle:{color:"grey",fontSize:15},text:"\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D8\u10DC\u10D3\u10D4\u10E5\u10E1\u10D8\u10E0\u10D4\u10D1\u10D0",left:"center",top:"center"}),this.chartOptions={title:pt,animation:!1,color:["#FDD835","#D81B60","#039BE5"],grid:{top:30,bottom:70,right:this.right,left:this.left},tooltip:{show:!this.isMobile(),trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:Bt=>{let Qt=`<b style="color: white; margin-left: 2px">${(0,X.Pw)(this.locale,this.timespan,parseInt(Bt[0].axisValue,10))}</b><br>`;for(const _e of Bt)0===_e.seriesIndex?Qt+=`${_e.marker} ${_e.seriesName}: ${(0,k.uf)(_e.data[1],this.locale,"1.2-2")} MB`:1===_e.seriesIndex?Qt+=`${_e.marker} ${_e.seriesName}: ${(0,k.uf)(_e.data[1],this.locale,"1.2-2")} MWU`:2===_e.seriesIndex&&(Qt+=`${_e.marker} ${_e.seriesName}: ${(0,k.uf)(_e.data[1],this.locale,"1.2-2")} B/vB`),Qt+="<br>";return["24h","3d"].includes(this.timespan)?Qt+="<small>"+"\u10D1\u10DA\u10DD\u10D9\u10E8\u10D8: " + Bt[0].data[2] + ""+"</small>":Qt+="<small>"+"\u10D1\u10DA\u10DD\u10D9\u10E8\u10D8: " + Bt[0].data[2] + ""+"</small>",Qt}},xAxis:0===E.sizes.length?void 0:{type:"time",splitNumber:this.isMobile()?5:10,axisLabel:{hideOverlap:!0}},legend:0===E.sizes.length?void 0:{padding:10,data:[{name:"\u10D6\u10DD\u10DB\u10D0",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"},{name:"\u10EC\u10DD\u10DC\u10D0",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"},{name:"\u10D6\u10DD\u10DB\u10D0 \u10DB\u10DD\u10EA\u10D4\u10DB\u10E3\u10DA \u10E0\u10D0\u10DD\u10D3\u10D4\u10DC\u10DD\u10D1\u10D0\u10D6\u10D4",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"}],selected:JSON.parse(this.storageService.getValue("sizes_weights_legend"))??{Size:!0,Weight:!0,"Size per weight":!0}},yAxis:0===E.sizes.length?void 0:[{type:"value",position:"left",min:Bt=>.9*Bt.min,axisLabel:{color:"rgb(110, 112, 121)",formatter:Bt=>Math.round(100*Bt)/100+" MWU"},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}}}],series:0===E.sizes.length?[]:[{zlevel:1,name:"\u10D6\u10DD\u10DB\u10D0",showSymbol:!1,symbol:"none",data:E.sizes,type:"line",lineStyle:{width:2},markLine:{silent:!0,symbol:"none",lineStyle:{type:"solid",color:"#ffffff66",opacity:1,width:1},data:[{yAxis:1,label:{position:"end",show:!0,color:"#ffffff",formatter:"1 MB"}}]}},{zlevel:1,yAxisIndex:0,name:"\u10EC\u10DD\u10DC\u10D0",showSymbol:!1,symbol:"none",data:E.weights,type:"line",lineStyle:{width:2}},{zlevel:1,yAxisIndex:0,name:"\u10D6\u10DD\u10DB\u10D0 \u10DB\u10DD\u10EA\u10D4\u10DB\u10E3\u10DA \u10E0\u10D0\u10DD\u10D3\u10D4\u10DC\u10DD\u10D1\u10D0\u10D6\u10D4",showSymbol:!1,symbol:"none",data:E.sizePerWeight,type:"line",lineStyle:{width:2}}],dataZoom:[{type:"inside",realtime:!0,zoomLock:!0,maxSpan:100,minSpan:5,moveOnMouseMove:!1},{showDetail:!1,show:!0,type:"slider",brushSelect:!1,realtime:!0,left:20,right:15,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}]}}onChartInit(E){void 0===this.chartInstance&&(this.chartInstance=E,this.chartInstance.on("legendselectchanged",pt=>{this.storageService.setValue("sizes_weights_legend",JSON.stringify(pt.selected))}))}isMobile(){return window.innerWidth<=767.98}onSaveChart(){const E=this.chartOptions.grid.bottom,pt=new Date;this.chartOptions.grid.bottom=40,this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`block-sizes-weights-${this.timespan}-${Math.round(pt.getTime()/1e3)}.svg`),this.chartOptions.grid.bottom=E,this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36(N.v),n.Y36(et.s),n.Y36($.QS),n.Y36(st.V),n.Y36(at.J),n.Y36(St.gz))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-block-sizes-weights-graph"]],hostVars:1,hostBindings:function(E,pt){2&E&&n.uIk("dir",pt.dir)},inputs:{right:"right",left:"left"},decls:11,vars:9,consts:function(){let Lt;return Lt="\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D6\u10DD\u10DB\u10D4\u10D1\u10D8",[[1,"full-container"],[1,"card-header","mb-0","mb-md-4"],[1,"d-flex","d-md-block","align-items-baseline"],Lt,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],["class","formRadioGroup",3,"formGroup",4,"ngIf"],["echarts","",1,"chart",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],[1,"formRadioGroup",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],["class","btn btn-primary btn-sm",3,"active",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","all","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","24h","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3d","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1w","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"]]},template:function(E,pt){1&E&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),n.SDv(4,3),n.qZA(),n.TgZ(5,"button",4),n.NdJ("click",function(){return pt.onSaveChart()}),n._UZ(6,"fa-icon",5),n.qZA()(),n.YNc(7,fa,15,22,"form",6),n.ALo(8,"async"),n.qZA(),n.TgZ(9,"div",7),n.NdJ("chartInit",function(Qt){return pt.onChartInit(Qt)}),n.qZA(),n.YNc(10,Mi,2,0,"div",8),n.qZA()),2&E&&(n.xp6(6),n.Q6J("icon",n.DdM(8,Wo))("fixedWidth",!0),n.xp6(1),n.Q6J("ngIf",n.lcZ(8,6,pt.blockSizesWeightsObservable$)),n.xp6(2),n.Q6J("initOpts",pt.chartInitOptions)("options",pt.chartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.O5,St.rH,$._Y,$.Fj,$._,$.JJ,$.JL,$.sg,$.u,_.BN,B._w,k.Ov,q.w],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:500px;height:calc(100% - 150px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{padding-bottom:100px}}.chart[_ngcontent-%COMP%]{width:100%;height:100%;padding-bottom:20px;padding-right:10px}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 629px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}@media (max-width: 567px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:100%;max-height:270px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}",".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}"],changeDetection:0}),H})();var ya=D(641),ti=D(6585);const yi=function(H){return[H]};function vo(H,Lt){1&H&&(n.TgZ(0,"a",8),n.SDv(1,17),n.ALo(2,"relativeUrl"),n.qZA()),2&H&&n.Q6J("routerLink",n.VKq(3,yi,n.lcZ(2,1,"/graphs/mining/block-prediction")))}function $l(H,Lt){if(1&H&&(n.TgZ(0,"div",4)(1,"button",5),n.SDv(2,6),n.qZA(),n.TgZ(3,"div",7)(4,"a",8),n.SDv(5,9),n.ALo(6,"relativeUrl"),n.qZA(),n.TgZ(7,"a",8),n.SDv(8,10),n.ALo(9,"relativeUrl"),n.qZA(),n.TgZ(10,"a",8),n.SDv(11,11),n.ALo(12,"relativeUrl"),n.qZA(),n.TgZ(13,"a",8),n.SDv(14,12),n.ALo(15,"relativeUrl"),n.qZA(),n.TgZ(16,"a",8),n.SDv(17,13),n.ALo(18,"relativeUrl"),n.qZA(),n.TgZ(19,"a",8),n.SDv(20,14),n.ALo(21,"relativeUrl"),n.qZA(),n.TgZ(22,"a",8),n.SDv(23,15),n.ALo(24,"relativeUrl"),n.qZA(),n.YNc(25,vo,3,5,"a",16),n.qZA()()),2&H){const E=n.oxw(2);n.Tol(E.padding),n.xp6(4),n.Q6J("routerLink",n.VKq(24,yi,n.lcZ(6,10,"/graphs/mining/pools"))),n.xp6(3),n.Q6J("routerLink",n.VKq(26,yi,n.lcZ(9,12,"/graphs/mining/pools-dominance"))),n.xp6(3),n.Q6J("routerLink",n.VKq(28,yi,n.lcZ(12,14,"/graphs/mining/hashrate-difficulty"))),n.xp6(3),n.Q6J("routerLink",n.VKq(30,yi,n.lcZ(15,16,"/graphs/mining/block-fee-rates"))),n.xp6(3),n.Q6J("routerLink",n.VKq(32,yi,n.lcZ(18,18,"/graphs/mining/block-fees"))),n.xp6(3),n.Q6J("routerLink",n.VKq(34,yi,n.lcZ(21,20,"/graphs/mining/block-rewards"))),n.xp6(3),n.Q6J("routerLink",n.VKq(36,yi,n.lcZ(24,22,"/graphs/mining/block-sizes-weights"))),n.xp6(3),n.Q6J("ngIf",E.stateService.env.AUDIT)}}function go(H,Lt){if(1&H&&(n.TgZ(0,"div",4)(1,"button",5),n.SDv(2,18),n.qZA(),n.TgZ(3,"div",7)(4,"a",8),n.SDv(5,19),n.ALo(6,"relativeUrl"),n.qZA(),n.TgZ(7,"a",8),n.SDv(8,20),n.ALo(9,"relativeUrl"),n.qZA(),n.TgZ(10,"a",8),n.SDv(11,21),n.ALo(12,"relativeUrl"),n.qZA(),n.TgZ(13,"a",8),n.SDv(14,22),n.ALo(15,"relativeUrl"),n.qZA(),n.TgZ(16,"a",8),n.SDv(17,23),n.ALo(18,"relativeUrl"),n.qZA(),n.TgZ(19,"a",8),n.SDv(20,24),n.ALo(21,"relativeUrl"),n.qZA()()()),2&H){const E=n.oxw(2);n.Tol(E.padding),n.xp6(4),n.Q6J("routerLink",n.VKq(20,yi,n.lcZ(6,8,"/graphs/lightning/nodes-networks"))),n.xp6(3),n.Q6J("routerLink",n.VKq(22,yi,n.lcZ(9,10,"/graphs/lightning/capacity"))),n.xp6(3),n.Q6J("routerLink",n.VKq(24,yi,n.lcZ(12,12,"/graphs/lightning/nodes-per-isp"))),n.xp6(3),n.Q6J("routerLink",n.VKq(26,yi,n.lcZ(15,14,"/graphs/lightning/nodes-per-country"))),n.xp6(3),n.Q6J("routerLink",n.VKq(28,yi,n.lcZ(18,16,"/graphs/lightning/nodes-map"))),n.xp6(3),n.Q6J("routerLink",n.VKq(30,yi,n.lcZ(21,18,"/graphs/lightning/nodes-channels-map")))}}function Fu(H,Lt){if(1&H&&(n.TgZ(0,"div",1)(1,"a",2),n.ALo(2,"relativeUrl"),n._uU(3,"Bitexplorer"),n.qZA(),n.YNc(4,$l,26,38,"div",3),n.YNc(5,go,22,32,"div",3),n.qZA()),2&H){const E=n.oxw();n.xp6(1),n.Tol(E.padding),n.Q6J("routerLink",n.VKq(7,yi,n.lcZ(2,5,"/graphs/mempool"))),n.xp6(3),n.Q6J("ngIf",E.stateService.env.MINING_DASHBOARD),n.xp6(1),n.Q6J("ngIf",E.stateService.env.LIGHTNING)}}let Cs=(()=>{class H{constructor(E,pt){this.stateService=E,this.websocketService=pt,this.padding="w-50"}ngOnInit(){this.websocketService.want(["blocks"]),!0===this.stateService.env.MINING_DASHBOARD&&!0===this.stateService.env.LIGHTNING&&(this.padding="w-33")}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(K.b),n.Y36(ya.i))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-graphs"]],decls:2,vars:1,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe,je,hr,jr,fn,ei,_i,hn,Wi;return Lt="\u10DB\u10D0\u10D8\u10DC\u10D8\u10DC\u10D2\u10D8",E="Pools \u10D8\u10E1 \u10E0\u10D4\u10D8\u10E2\u10D8\u10DC\u10D2\u10D8",pt="Pools \u10D8\u10E1 \u10D3\u10DD\u10DB\u10D8\u10DC\u10E3\u10E0\u10DD\u10D1\u10D0",Bt="\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8 \u10D3\u10D0 \u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4",Qt="\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD\u10E1 \u10DB\u10D0\u10E9\u10D5\u10D4\u10DC\u10D4\u10D1\u10D4\u10DA\u10D8",_e="\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD\u10D4\u10D1\u10D8",Ee="\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",Xe="\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D6\u10DD\u10DB\u10D4\u10D1\u10D8",je="\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10EC\u10D8\u10DC\u10D0\u10E1\u10EC\u10D0\u10E0\u10DB\u10D4\u10E2\u10E7\u10D5\u10D4\u10DA\u10D4\u10D1\u10D8\u10E1 \u10E1\u10D8\u10D6\u10E3\u10E1\u10E2\u10D4",hr="Lightning",jr="Lightning \u10DC\u10DD\u10D3\u10D0 \u10E7\u10DD\u10D5\u10D4\u10DA \u10DC\u10D4\u10D7\u10D5\u10DD\u10E0\u10E5\u10D6\u10D4",fn="Lightning \u10D8\u10E1 \u10E8\u10D4\u10E1\u10D0\u10EB\u10DA\u10D4\u10D1\u10DA\u10DD\u10D1\u10D0",ei="Lightning Nodes Per ISP",_i="Lightning \u10D8\u10E1 \u10DC\u10DD\u10D3\u10D0 \u10E5\u10D5\u10D4\u10E7\u10DC\u10D4\u10D1\u10D8\u10E1 \u10DB\u10D8\u10EE\u10D4\u10D3\u10D5\u10D8\u10D7",hn="Lightning \u10D8\u10E1 \u10DC\u10DD\u10D3\u10D4\u10D1\u10D8 \u10DB\u10E1\u10DD\u10E4\u10DA\u10D8\u10DD\u10E1 \u10E0\u10E3\u10E5\u10D0\u10D6\u10D4",Wi="Lightning \u10DC\u10DD\u10D3\u10D4\u10D1\u10D8\u10E1 \u10E9\u10D0\u10DC\u10D4\u10DA\u10D4\u10D1\u10D8 \u10DB\u10E1\u10DD\u10E4\u10DA\u10D8\u10DD \u10E0\u10E3\u10E5\u10D0\u10D6\u10D4",[["class","mb-3 d-flex menu",4,"ngIf"],[1,"mb-3","d-flex","menu"],["routerLinkActive","active",1,"btn","btn-primary",3,"routerLink"],["ngbDropdown","",3,"class",4,"ngIf"],["ngbDropdown",""],["id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-primary","w-100"],Lt,["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["routerLinkActive","active",1,"dropdown-item",3,"routerLink"],E,pt,Bt,Qt,_e,Ee,Xe,["class","dropdown-item","routerLinkActive","active",3,"routerLink",4,"ngIf"],je,hr,jr,fn,ei,_i,hn,Wi]},template:function(E,pt){1&E&&(n.YNc(0,Fu,6,9,"div",0),n._UZ(1,"router-outlet")),2&E&&n.Q6J("ngIf",pt.stateService.env.MINING_DASHBOARD||pt.stateService.env.LIGHTNING)},dependencies:[k.O5,St.lC,St.yS,St.Od,ti.jt,ti.iD,ti.Vi,q.w],styles:[".menu[_ngcontent-%COMP%]{flex-grow:1;padding:0 35px}@media (min-width: 576px){.menu[_ngcontent-%COMP%]{max-width:400px}}.menu[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0;-webkit-margin-end:.25rem;margin-inline-end:.25rem}.menu[_ngcontent-%COMP%] > *.last-child[_ngcontent-%COMP%]{-webkit-margin-end:0;margin-inline-end:0}"]}),H})();var no=D(6451),$o=D(9160),Za=D(3951);function Co(H,Lt){1&H&&n._UZ(0,"app-indexing-progress")}function Xl(H,Lt){if(1&H&&(n.TgZ(0,"p",15),n._uU(1),n.ALo(2,"amountShortener"),n.qZA()),2&H){const E=n.oxw().ngIf;n.xp6(1),n.hij(" ",n.xi3(2,1,E.currentDifficulty,5)," ")}}function si(H,Lt){if(1&H&&(n.TgZ(0,"p",15),n._uU(1),n.ALo(2,"amountShortener"),n.qZA()),2&H){const E=n.oxw().ngIf;n.xp6(1),n.hij(" ",n.xi3(2,1,E.currentDifficulty,2)," ")}}function Re(H,Lt){if(1&H&&(n.TgZ(0,"div",11)(1,"div",12)(2,"h5",13),n.SDv(3,14),n.qZA(),n.TgZ(4,"p",15),n._uU(5),n.ALo(6,"amountShortener"),n.qZA()(),n.TgZ(7,"div",12)(8,"h5",13),n.SDv(9,16),n.qZA(),n.YNc(10,Xl,3,4,"p",17),n.YNc(11,si,3,4,"p",17),n.qZA()()),2&H){const E=Lt.ngIf,pt=n.oxw(2);n.xp6(5),n.hij(" ",n.Dn7(6,3,E.currentHashrate,1,"H/s")," "),n.xp6(5),n.Q6J("ngIf","signet"===pt.network),n.xp6(1),n.Q6J("ngIf","signet"!==pt.network)}}function Fa(H,Lt){if(1&H&&(n.TgZ(0,"div"),n.YNc(1,Re,12,7,"div",10),n.ALo(2,"async"),n.qZA()),2&H){const E=n.oxw(),pt=n.MAs(14);n.xp6(1),n.Q6J("ngIf",n.lcZ(2,2,E.hashrateObservable$))("ngIfElse",pt)}}const rr=function(H){return[H]};function Tn(H,Lt){if(1&H&&(n.TgZ(0,"label",21),n._UZ(1,"input",23),n.ALo(2,"relativeUrl"),n._uU(3," 3M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3m")("routerLink",n.VKq(7,rr,n.lcZ(2,5,"/graphs/mining/hashrate-difficulty"))),n.uIk("data-cy","3m")}}function pr(H,Lt){if(1&H&&(n.TgZ(0,"label",21),n._UZ(1,"input",24),n.ALo(2,"relativeUrl"),n._uU(3," 6M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","6m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","6m")("routerLink",n.VKq(7,rr,n.lcZ(2,5,"/graphs/mining/hashrate-difficulty"))),n.uIk("data-cy","6m")}}function gr(H,Lt){if(1&H&&(n.TgZ(0,"label",21),n._UZ(1,"input",25),n.ALo(2,"relativeUrl"),n._uU(3," 1Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1y")("routerLink",n.VKq(7,rr,n.lcZ(2,5,"/graphs/mining/hashrate-difficulty"))),n.uIk("data-cy","1y")}}function Yr(H,Lt){if(1&H&&(n.TgZ(0,"label",21),n._UZ(1,"input",26),n.ALo(2,"relativeUrl"),n._uU(3," 2Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","2y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","2y")("routerLink",n.VKq(7,rr,n.lcZ(2,5,"/graphs/mining/hashrate-difficulty"))),n.uIk("data-cy","2y")}}function he(H,Lt){if(1&H&&(n.TgZ(0,"label",21),n._UZ(1,"input",27),n.ALo(2,"relativeUrl"),n._uU(3," 3Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3y")("routerLink",n.VKq(7,rr,n.lcZ(2,5,"/graphs/mining/hashrate-difficulty"))),n.uIk("data-cy","3y")}}const ur=function(H){return{disabled:H}};function Fr(H,Lt){if(1&H&&(n.TgZ(0,"form",18)(1,"div",19),n.YNc(2,Tn,4,9,"label",20),n.YNc(3,pr,4,9,"label",20),n.YNc(4,gr,4,9,"label",20),n.YNc(5,Yr,4,9,"label",20),n.YNc(6,he,4,9,"label",20),n.TgZ(7,"label",21),n._UZ(8,"input",22),n.ALo(9,"relativeUrl"),n._uU(10," ALL "),n.qZA()()()),2&H){const E=Lt.ngIf,pt=n.oxw();n.Q6J("formGroup",pt.radioGroupForm),n.xp6(1),n.Tol(n.VKq(15,ur,pt.isLoading)),n.xp6(1),n.Q6J("ngIf",E.blockCount>=12960),n.xp6(1),n.Q6J("ngIf",E.blockCount>=25920),n.xp6(1),n.Q6J("ngIf",E.blockCount>=52560),n.xp6(1),n.Q6J("ngIf",E.blockCount>=105120),n.xp6(1),n.Q6J("ngIf",E.blockCount>=157680),n.xp6(1),n.ekj("active","all"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","all")("routerLink",n.VKq(17,rr,n.lcZ(9,13,"/graphs/mining/hashrate-difficulty"))),n.uIk("data-cy","all")}}function sr(H,Lt){1&H&&(n.TgZ(0,"div",28),n._UZ(1,"div",29),n.qZA())}function Xo(H,Lt){1&H&&(n.TgZ(0,"div",11)(1,"div",12)(2,"h5",13),n.SDv(3,30),n.qZA(),n.TgZ(4,"p",15),n._UZ(5,"span",31),n.qZA()(),n.TgZ(6,"div",12)(7,"h5",13),n.SDv(8,32),n.qZA(),n.TgZ(9,"p",15),n._UZ(10,"span",31),n.qZA()()())}const _o=function(){return["fas","download"]};let Ms=(()=>{class H{constructor(E,pt,Bt,Qt,_e,Ee,Xe,je){this.locale=E,this.seoService=pt,this.apiService=Bt,this.formBuilder=Qt,this.storageService=_e,this.miningService=Ee,this.route=Xe,this.stateService=je,this.tableOnly=!1,this.widget=!1,this.right=45,this.left=75,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.dir="ltr",this.isLoading=!0,this.formatNumber=k.uf,this.timespan="",this.chartInstance=void 0,this.network=""}ngOnInit(){this.stateService.networkChanged$.subscribe(pt=>this.network=pt);let E=!0;this.widget?this.miningWindowPreference="1y":(this.seoService.setTitle("\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8 \u10D3\u10D0 \u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4"),this.miningWindowPreference=this.miningService.getDefaultTimespan("3m")),this.radioGroupForm=this.formBuilder.group({dateSpan:this.miningWindowPreference}),this.radioGroupForm.controls.dateSpan.setValue(this.miningWindowPreference),this.route.fragment.subscribe(pt=>{["1m","3m","6m","1y","2y","3y","all"].indexOf(pt)>-1&&this.radioGroupForm.controls.dateSpan.setValue(pt,{emitEvent:!1})}),this.hashrateObservable$=(0,no.T)(this.radioGroupForm.get("dateSpan").valueChanges.pipe((0,_t.O)(this.radioGroupForm.controls.dateSpan.value),(0,mt.w)(pt=>(!this.widget&&!E&&this.storageService.setValue("miningWindowPreference",pt),this.timespan=pt,E=!1,this.miningWindowPreference=pt,this.isLoading=!0,this.apiService.getHistoricalHashrate$(this.timespan)))),this.stateService.chainTip$.pipe((0,mt.w)(()=>this.apiService.getHistoricalHashrate$(this.timespan)))).pipe((0,gt.b)(pt=>{const Bt=pt.body,Qt=[];let _e=1,Ee=0;for(;Ee<Bt.hashrates.length;){if(_e>=Bt.difficulty.length){for(;Ee<Bt.hashrates.length;)Qt.push({timestamp:Bt.hashrates[Ee].timestamp,difficulty:Bt.difficulty.length>0?Bt.difficulty[Bt.difficulty.length-1].difficulty:null}),++Ee;break}for(;Ee<Bt.hashrates.length&&_e<Bt.difficulty.length&&Bt.hashrates[Ee].timestamp<=Bt.difficulty[_e].time;)Qt.push({timestamp:Bt.hashrates[Ee].timestamp,difficulty:Bt.difficulty[_e-1].difficulty}),++Ee;++_e}const je=[];for(let hr=14;hr<Bt.hashrates.length;++hr){let jr=0;for(let fn=14;fn>=0;--fn)jr+=Bt.hashrates[hr-fn].avgHashrate;jr/=15,je.push([1e3*Bt.hashrates[hr].timestamp,jr])}this.prepareChartOptions({hashrates:Bt.hashrates.map(hr=>[1e3*hr.timestamp,hr.avgHashrate]),difficulty:Qt.map(hr=>[1e3*hr.timestamp,hr.difficulty]),hashrateMa:je}),this.isLoading=!1}),(0,yt.U)(pt=>{const Bt=pt.body;return{blockCount:parseInt(pt.headers.get("x-total-count"),10),currentDifficulty:Bt.currentDifficulty,currentHashrate:Bt.currentHashrate}}),(0,V.B)())}prepareChartOptions(E){let pt;0===E.hashrates.length&&(pt={textStyle:{color:"grey",fontSize:15},text:"\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D8\u10DC\u10D3\u10D4\u10E5\u10E1\u10D8\u10E0\u10D4\u10D1\u10D0",left:"center",top:"center"}),this.chartOptions={title:pt,animation:!1,color:[new Se.graphic.LinearGradient(0,0,0,.65,[{offset:0,color:"#F4511E99"},{offset:.25,color:"#FB8C0099"},{offset:.5,color:"#FFB30099"},{offset:.75,color:"#FDD83599"},{offset:1,color:"#7CB34299"}]),"#D81B60",new Se.graphic.LinearGradient(0,0,0,.65,[{offset:0,color:"#F4511E"},{offset:.25,color:"#FB8C00"},{offset:.5,color:"#FFB300"},{offset:.75,color:"#FDD835"},{offset:1,color:"#7CB342"}])],grid:{top:this.widget?20:40,bottom:this.widget?30:70,right:this.right,left:this.left},tooltip:{show:!this.isMobile()||!this.widget,trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:Bt=>{let Qt="",_e="",Ee="",Xe=(0,ot.hD)(1);for(const hr of Bt)if(0===hr.seriesIndex){let jr=hr.data[1];this.isMobile()&&(Xe=(0,ot.hD)(hr.data[1]),jr=Math.round(hr.data[1]/Xe.divider)),Qt=`${hr.marker} ${hr.seriesName}: ${(0,k.uf)(jr,this.locale,"1.0-0")} ${Xe.unit}H/s<br>`}else if(1===hr.seriesIndex){let jr=Xe,fn=hr.data[1];null===fn?_e=`${hr.marker} ${hr.seriesName}: No data<br>`:(this.isMobile()&&(jr=(0,ot.hD)(hr.data[1]),fn=Math.round(hr.data[1]/jr.divider)),_e=`${hr.marker} ${hr.seriesName}: ${(0,k.uf)(fn,this.locale,"1.2-2")} ${jr.unit}<br>`)}else if(2===hr.seriesIndex){let jr=hr.data[1];this.isMobile()&&(Xe=(0,ot.hD)(hr.data[1]),jr=Math.round(hr.data[1]/Xe.divider)),Ee=`${hr.marker} ${hr.seriesName}: ${(0,k.uf)(jr,this.locale,"1.0-0")} ${Xe.unit}H/s`}return`\n            <b style="color: white; margin-left: 2px">${new Date(Bt[0].data[0]).toLocaleDateString(this.locale,{year:"numeric",month:"short",day:"numeric"})}</b><br>\n            <span>${_e}</span>\n            <span>${Qt}</span>\n            <span>${Ee}</span>\n          `}},xAxis:0===E.hashrates.length?void 0:{type:"time",splitNumber:this.isMobile()||this.widget?5:10,axisLabel:{hideOverlap:!0}},legend:this.widget||0===E.hashrates.length?void 0:{data:[{name:"\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect",itemStyle:{color:"#FFB300"}},{name:"\u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"},{name:"\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect",itemStyle:{color:"#FFB300"}}],selected:JSON.parse(this.storageService.getValue("hashrate_difficulty_legend"))??{"$localize`:@@79a9dc5b1caca3cbeb1733a19515edacc5fc7920:Hashrate`":!0,"$localize`::Difficulty`":""===this.network,"$localize`Hashrate (MA)`":!0}},yAxis:0===E.hashrates.length?void 0:[{min:Bt=>{const Qt=(0,ot.hD)(Bt.min);return Math.floor(Bt.min/Qt.divider/10)*Qt.divider*10},type:"value",axisLabel:{color:"rgb(110, 112, 121)",formatter:Bt=>{const Qt=(0,ot.hD)(Bt);return`${Math.round(Bt/Qt.divider)} ${Qt.unit}H/s`}},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}}},{min:Bt=>.9*Bt.min,type:"value",position:"right",axisLabel:{color:"rgb(110, 112, 121)",formatter:Bt=>{if("signet"===this.stateService.network)return Bt;const Qt=(0,ot.hD)(Bt);return`${Math.round(Bt/Qt.divider)} ${Qt.unit}`}},splitLine:{show:!1}}],series:0===E.hashrates.length?[]:[{zlevel:0,yAxisIndex:0,name:"\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8",showSymbol:!1,symbol:"none",data:E.hashrates,type:"line",lineStyle:{width:1}},{zlevel:1,yAxisIndex:1,name:"\u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4",showSymbol:!1,symbol:"none",data:E.difficulty,type:"line",lineStyle:{width:3}},{zlevel:2,name:"\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8",showSymbol:!1,symbol:"none",data:E.hashrateMa,type:"line",smooth:!0,lineStyle:{width:3}}],dataZoom:this.widget?null:[{type:"inside",realtime:!0,zoomLock:!0,maxSpan:100,minSpan:5,moveOnMouseMove:!1},{showDetail:!1,show:!0,type:"slider",brushSelect:!1,realtime:!0,left:20,right:15,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}]}}onChartInit(E){this.chartInstance=E,this.chartInstance.on("legendselectchanged",pt=>{this.storageService.setValue("hashrate_difficulty_legend",JSON.stringify(pt.selected))})}isMobile(){return window.innerWidth<=767.98}onSaveChart(){const E=this.chartOptions.grid.bottom,pt=new Date;this.chartOptions.grid.bottom=30,this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`hashrate-difficulty-${this.timespan}-${Math.round(pt.getTime()/1e3)}.svg`),this.chartOptions.grid.bottom=E,this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36(N.v),n.Y36(et.s),n.Y36($.QS),n.Y36(st.V),n.Y36(at.J),n.Y36(St.gz),n.Y36(K.b))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-hashrate-chart"]],hostVars:1,hostBindings:function(E,pt){2&E&&n.uIk("dir",pt.dir)},inputs:{tableOnly:"tableOnly",widget:"widget",right:"right",left:"left"},decls:15,vars:17,consts:function(){let Lt,E,pt,Bt,Qt;return Lt="\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8 \u10D3\u10D0 \u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4",E="\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8",pt="\u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4",Bt="\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8",Qt="\u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4",[[4,"ngIf"],[1,"card-header","mb-0","mb-md-4"],[1,"d-flex","d-md-block","align-items-baseline"],Lt,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],["class","formRadioGroup",3,"formGroup",4,"ngIf"],["echarts","",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],["loadingStats",""],["class","pool-distribution",4,"ngIf","ngIfElse"],[1,"pool-distribution"],[1,"item"],[1,"card-title"],E,[1,"card-text"],pt,["class","card-text",4,"ngIf"],[1,"formRadioGroup",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],["class","btn btn-primary btn-sm",3,"active",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","all","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"],Bt,[1,"skeleton-loader","skeleton-loader-big"],Qt]},template:function(E,pt){1&E&&(n.YNc(0,Co,1,0,"app-indexing-progress",0),n.TgZ(1,"div"),n.YNc(2,Fa,3,4,"div",0),n.TgZ(3,"div",1)(4,"div",2)(5,"span"),n.SDv(6,3),n.qZA(),n.TgZ(7,"button",4),n.NdJ("click",function(){return pt.onSaveChart()}),n._UZ(8,"fa-icon",5),n.qZA()(),n.YNc(9,Fr,11,19,"form",6),n.ALo(10,"async"),n.qZA(),n.TgZ(11,"div",7),n.NdJ("chartInit",function(Qt){return pt.onChartInit(Qt)}),n.qZA(),n.YNc(12,sr,2,0,"div",8),n.qZA(),n.YNc(13,Xo,11,0,"ng-template",null,9,n.W1O)),2&E&&(n.Q6J("ngIf",!pt.widget),n.xp6(1),n.Tol(!1===pt.widget?"full-container":""),n.xp6(1),n.Q6J("ngIf",pt.widget),n.xp6(1),n.Akn(pt.widget?"display:none":""),n.xp6(5),n.Q6J("icon",n.DdM(16,_o))("fixedWidth",!0),n.xp6(1),n.Q6J("ngIf",n.lcZ(10,14,pt.hashrateObservable$)),n.xp6(2),n.Tol(pt.widget?"chart-widget":"chart"),n.Q6J("initOpts",pt.chartInitOptions)("options",pt.chartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.O5,St.rH,$._Y,$.Fj,$._,$.JJ,$.JL,$.sg,$.u,_.BN,$o.P,j.G,B._w,k.Ov,q.w,Za.j],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:500px;height:calc(100% - 150px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{padding-bottom:100px}}.chart[_ngcontent-%COMP%]{width:100%;height:100%;padding-bottom:20px;padding-right:10px}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 629px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}@media (max-width: 567px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:100%;height:240px}.pool-distribution[_ngcontent-%COMP%]{min-height:56px;display:block}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]{display:flex;flex-direction:row}}.pool-distribution[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:10px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:50%;display:inline-block;margin:0 auto 20px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:2}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:3}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){order:3}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){order:2;display:block}}@media (min-width: 768px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:none}}@media (min-width: 992px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:block}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1rem;color:#4a68b9}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:18px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff6;font-size:12px}.skeleton-loader[_ngcontent-%COMP%]{width:100%;display:block;max-width:80px;margin:15px auto 3px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}",".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}"],changeDetection:0}),H})();var Or=D(5535),bs=D(4326),En=D(1556);const xa=function(H){return[H]};function Sa(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",14),n.ALo(2,"relativeUrl"),n._uU(3," 6M "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","6m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","6m")("routerLink",n.VKq(7,xa,n.lcZ(2,5,"/graphs/mining/pools-dominance"))),n.uIk("data-cy","6m")}}function zn(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",15),n.ALo(2,"relativeUrl"),n._uU(3," 1Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","1y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1y")("routerLink",n.VKq(7,xa,n.lcZ(2,5,"/graphs/mining/pools-dominance"))),n.uIk("data-cy","1y")}}function Mo(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",16),n.ALo(2,"relativeUrl"),n._uU(3," 2Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","2y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","2y")("routerLink",n.VKq(7,xa,n.lcZ(2,5,"/graphs/mining/pools-dominance"))),n.uIk("data-cy","2y")}}function Kr(H,Lt){if(1&H&&(n.TgZ(0,"label",12),n._UZ(1,"input",17),n.ALo(2,"relativeUrl"),n._uU(3," 3Y "),n.qZA()),2&H){const E=n.oxw(2);n.ekj("active","3y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3y")("routerLink",n.VKq(7,xa,n.lcZ(2,5,"/graphs/mining/pools-dominance"))),n.uIk("data-cy","3y")}}const ka=function(H){return{disabled:H}};function za(H,Lt){if(1&H&&(n.TgZ(0,"form",9)(1,"div",10),n.YNc(2,Sa,4,9,"label",11),n.YNc(3,zn,4,9,"label",11),n.YNc(4,Mo,4,9,"label",11),n.YNc(5,Kr,4,9,"label",11),n.TgZ(6,"label",12),n._UZ(7,"input",13),n.ALo(8,"relativeUrl"),n._uU(9," ALL "),n.qZA()()()),2&H){const E=Lt.ngIf,pt=n.oxw();n.Q6J("formGroup",pt.radioGroupForm),n.xp6(1),n.Tol(n.VKq(14,ka,pt.isLoading)),n.xp6(1),n.Q6J("ngIf",E.blockCount>=25920),n.xp6(1),n.Q6J("ngIf",E.blockCount>=52560),n.xp6(1),n.Q6J("ngIf",E.blockCount>=105120),n.xp6(1),n.Q6J("ngIf",E.blockCount>=157680),n.xp6(1),n.ekj("active","all"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","all")("routerLink",n.VKq(16,xa,n.lcZ(8,12,"/graphs/mining/pools-dominance"))),n.uIk("data-cy","all")}}function ta(H,Lt){1&H&&(n.TgZ(0,"div",18),n._UZ(1,"div",19),n.qZA())}const On=function(){return["fas","download"]};let Ni=(()=>{class H{constructor(E,pt,Bt,Qt,_e,Ee,Xe,je){this.locale=E,this.seoService=pt,this.apiService=Bt,this.formBuilder=Qt,this.cd=_e,this.storageService=Ee,this.miningService=Xe,this.route=je,this.right=45,this.left=25,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.dir="ltr",this.isLoading=!0,this.timespan="",this.chartInstance=void 0,this.radioGroupForm=this.formBuilder.group({dateSpan:"1y"}),this.radioGroupForm.controls.dateSpan.setValue("1y")}ngOnInit(){let E=!0;this.seoService.setTitle("Pools \u10D8\u10E1 \u10D8\u10E1\u10E2\u10DD\u10E0\u10D8\u10E3\u10DA\u10D8 \u10D3\u10DD\u10DB\u10D8\u10DC\u10E3\u10E0\u10DD\u10D1\u10D0"),this.miningWindowPreference=this.miningService.getDefaultTimespan("6m"),this.radioGroupForm=this.formBuilder.group({dateSpan:this.miningWindowPreference}),this.radioGroupForm.controls.dateSpan.setValue(this.miningWindowPreference),this.route.fragment.subscribe(pt=>{["6m","1y","2y","3y","all"].indexOf(pt)>-1&&this.radioGroupForm.controls.dateSpan.setValue(pt,{emitEvent:!1})}),this.hashrateObservable$=this.radioGroupForm.get("dateSpan").valueChanges.pipe((0,_t.O)(this.radioGroupForm.controls.dateSpan.value),(0,mt.w)(pt=>(E||this.storageService.setValue("miningWindowPreference",pt),this.timespan=pt,E=!1,this.isLoading=!0,this.apiService.getHistoricalPoolsHashrate$(pt).pipe((0,gt.b)(Bt=>{const Qt=Bt.body,_e={};for(const je of Qt)_e.hasOwnProperty(je.poolName)||(_e[je.poolName]=[]),_e[je.poolName].push(je);const Ee=[],Xe=[];for(const je in _e)Ee.push({zlevel:0,stack:"Total",name:je,showSymbol:!1,symbol:"none",data:_e[je].map(hr=>[1e3*hr.timestamp,100*hr.share]),type:"line",lineStyle:{width:0},areaStyle:{opacity:1},smooth:!0,color:En.IA[je.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()],emphasis:{disabled:!0,scale:!1}}),Xe.push({name:je,inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect",itemStyle:{color:En.IA[je.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()]}});if(this.prepareChartOptions({legends:Xe,series:Ee}),this.isLoading=!1,0===Ee.length)throw this.cd.markForCheck(),new Error}),(0,yt.U)(Bt=>({blockCount:parseInt(Bt.headers.get("x-total-count"),10)})),(0,Or.a)(Bt=>Bt.pipe((0,bs.g)(6e4)))))),(0,V.B)())}prepareChartOptions(E){let pt;0===E.series.length&&(pt={textStyle:{color:"grey",fontSize:15},text:"\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D8\u10DC\u10D3\u10D4\u10E5\u10E1\u10D8\u10E0\u10D4\u10D1\u10D0",left:"center",top:"center"}),this.chartOptions={title:pt,animation:!1,color:En.vK.filter(Bt=>"#FDD835"!==Bt),grid:{right:this.right,left:this.left,bottom:70,top:this.isMobile()?10:50},tooltip:{show:!this.isMobile(),trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:function(Bt){let _e=`<b style="color: white; margin-left: 2px">${new Date(Bt[0].data[0]).toLocaleDateString(this.locale,{year:"numeric",month:"short",day:"numeric"})}</b><br>`;Bt.sort((Ee,Xe)=>Xe.data[1]-Ee.data[1]);for(const Ee of Bt)Ee.data[1]>0&&(_e+=`${Ee.marker} ${Ee.seriesName}: ${Ee.data[1].toFixed(2)}%<br>`);return _e}.bind(this)},xAxis:0===E.series.length?void 0:{type:"time",splitNumber:this.isMobile()?5:10,axisLabel:{hideOverlap:!0}},legend:this.isMobile()||0===E.series.length?void 0:{data:E.legends},yAxis:0===E.series.length?void 0:{position:"right",axisLabel:{color:"rgb(110, 112, 121)",formatter:Bt=>`${Bt}%`},splitLine:{show:!1},type:"value",max:100,min:0},series:E.series,dataZoom:[{type:"inside",realtime:!0,zoomLock:!0,maxSpan:100,minSpan:10,moveOnMouseMove:!1},{showDetail:!1,show:!0,type:"slider",brushSelect:!1,realtime:!0,left:20,right:15,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}]}}onChartInit(E){this.chartInstance=E}isMobile(){return window.innerWidth<=767.98}onSaveChart(){const E=this.chartOptions.grid.bottom,pt=new Date;this.chartOptions.grid.bottom=30,this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`pools-dominance-${this.timespan}-${Math.round(pt.getTime()/1e3)}.svg`),this.chartOptions.grid.bottom=E,this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36(N.v),n.Y36(et.s),n.Y36($.QS),n.Y36(n.sBO),n.Y36(st.V),n.Y36(at.J),n.Y36(St.gz))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-hashrate-chart-pools"]],hostVars:1,hostBindings:function(E,pt){2&E&&n.uIk("dir",pt.dir)},inputs:{right:"right",left:"left"},decls:12,vars:9,consts:function(){let Lt;return Lt="Pools \u10D8\u10E1 \u10D3\u10DD\u10DB\u10D8\u10DC\u10E3\u10E0\u10DD\u10D1\u10D0",[[1,"full-container"],[1,"card-header","mb-0","mb-md-4"],[1,"d-flex","d-md-block","align-items-baseline"],Lt,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],["class","formRadioGroup",3,"formGroup",4,"ngIf"],["echarts","",1,"chart",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],[1,"formRadioGroup",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],["class","btn btn-primary btn-sm",3,"active",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","all","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"]]},template:function(E,pt){1&E&&(n._UZ(0,"app-indexing-progress"),n.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"span"),n.SDv(5,3),n.qZA(),n.TgZ(6,"button",4),n.NdJ("click",function(){return pt.onSaveChart()}),n._UZ(7,"fa-icon",5),n.qZA()(),n.YNc(8,za,10,18,"form",6),n.ALo(9,"async"),n.qZA(),n.TgZ(10,"div",7),n.NdJ("chartInit",function(Qt){return pt.onChartInit(Qt)}),n.qZA(),n.YNc(11,ta,2,0,"div",8),n.qZA()),2&E&&(n.xp6(7),n.Q6J("icon",n.DdM(8,On))("fixedWidth",!0),n.xp6(1),n.Q6J("ngIf",n.lcZ(9,6,pt.hashrateObservable$)),n.xp6(2),n.Q6J("initOpts",pt.chartInitOptions)("options",pt.chartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.O5,St.rH,$._Y,$.Fj,$._,$.JJ,$.JL,$.sg,$.u,_.BN,$o.P,j.G,B._w,k.Ov,q.w],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:500px;height:calc(100% - 150px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{padding-bottom:100px}}.chart[_ngcontent-%COMP%]{width:100%;height:100%;padding-bottom:20px;padding-right:10px}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:100%;max-height:293px}.loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}.loadingGraphs.widget[_ngcontent-%COMP%]{top:75%}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}",".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}"],changeDetection:0}),H})();var ea=D(5858),mr=D(6496),Yo=D(9300),xi=D(1135),dr=D(6824),kr=D(8138);function Mr(H,Lt){if(1&H&&(n.TgZ(0,"div",2),n._UZ(1,"div",3),n.qZA()),2&H){const E=n.oxw();n.xp6(1),n.Q6J("initOpts",E.mempoolVsizeFeesInitOptions)("options",E.mempoolVsizeFeesOptions)}}function Un(H,Lt){1&H&&(n.TgZ(0,"div",4),n._UZ(1,"div",5),n.qZA())}let un=(()=>{class H{constructor(){this.height=210,this.top=20,this.right=22,this.left=30,this.mempoolVsizeFeesInitOptions={renderer:"svg"}}ngOnInit(){this.mountChart()}ngOnChanges(){this.mountChart()}mountChart(){this.mempoolVsizeFeesOptions={grid:{height:"210",right:"20",top:"22",left:"30"},xAxis:{type:"category",boundaryGap:!1},yAxis:{type:"value",splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}}},series:[{data:this.data,type:"line",label:{show:!0,position:"top",color:"#ffffff",textShadowBlur:0,formatter:E=>Math.floor(E.data)},smooth:!0,lineStyle:{color:"#D81B60",width:4},itemStyle:{color:"#b71c1c",borderWidth:10,borderMiterLimit:10,opacity:1},areaStyle:{color:"#D81B60",opacity:1}}]}}}return H.\u0275fac=function(E){return new(E||H)},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-fee-distribution-graph"]],inputs:{data:"data",height:"height",top:"top",right:"right",left:"left"},features:[n.TTD],decls:3,vars:2,consts:[["class","fee-distribution-chart",4,"ngIf","ngIfElse"],["loadingFees",""],[1,"fee-distribution-chart"],["echarts","",3,"initOpts","options"],[1,"text-center"],[1,"spinner-border","text-light"]],template:function(E,pt){if(1&E&&(n.YNc(0,Mr,2,2,"div",0),n.YNc(1,Un,2,0,"ng-template",null,1,n.W1O)),2&E){const Bt=n.MAs(2);n.Q6J("ngIf",pt.mempoolVsizeFeesOptions)("ngIfElse",Bt)}},dependencies:[k.O5,B._w],encapsulation:2,changeDetection:0}),H})();var dn=D(9646),tn=D(9611);const Hn=["blockGraph"];let Ps=(()=>{class H{constructor(E,pt,Bt,Qt){this.stateService=E,this.websocketService=pt,this.router=Bt,this.cd=Qt,this.txPreviewEvent=new n.vpe,this.isLoading$=new xi.X(!0),this.chainDirection="right",this.poolDirection="left"}ngOnInit(){this.timeLtrSubscription=this.stateService.timeLtr.subscribe(E=>{this.timeLtr=!!E,this.chainDirection=E?"left":"right",this.poolDirection=E?"right":"left",this.cd.markForCheck()})}ngAfterViewInit(){this.blockSub=(0,no.T)((0,dn.of)(!0),this.stateService.connectionState$.pipe((0,Yo.h)(E=>2===E))).pipe((0,mt.w)(()=>this.stateService.mempoolBlockTransactions$)).subscribe(E=>{this.replaceBlock(E)}),this.deltaSub=this.stateService.mempoolBlockDelta$.subscribe(E=>{this.updateBlock(E)})}ngOnChanges(E){E.index&&(this.blockGraph&&this.blockGraph.clear(E.index.currentValue>E.index.previousValue?this.chainDirection:this.poolDirection),this.isLoading$.next(!0),this.websocketService.startTrackBitexplorerBlock(E.index.currentValue))}ngOnDestroy(){this.blockSub.unsubscribe(),this.deltaSub.unsubscribe(),this.timeLtrSubscription.unsubscribe(),this.websocketService.stopTrackBitexplorerBlock()}replaceBlock(E){const pt=this.stateService.latestBlockHeight>this.lastBlockHeight;this.blockIndex!==this.index?this.blockGraph.enter(E,null==this.blockIndex||this.index<this.blockIndex?this.poolDirection:this.chainDirection):this.blockGraph.replace(E,pt?this.chainDirection:this.poolDirection),this.lastBlockHeight=this.stateService.latestBlockHeight,this.blockIndex=this.index,this.isLoading$.next(!1)}updateBlock(E){const pt=this.stateService.latestBlockHeight>this.lastBlockHeight;this.blockIndex!==this.index?this.blockGraph.replace(E.added,null==this.blockIndex||this.index<this.blockIndex?this.poolDirection:this.chainDirection):this.blockGraph.update(E.added,E.removed,pt?this.chainDirection:this.poolDirection,pt),this.lastBlockHeight=this.stateService.latestBlockHeight,this.blockIndex=this.index,this.isLoading$.next(!1)}onTxClick(E){const pt=new q.w(this.stateService).transform(`/tx/${E.txid}`);this.router.navigate([pt])}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(K.b),n.Y36(ya.i),n.Y36(St.F0),n.Y36(n.sBO))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-mempool-block-overview"]],viewQuery:function(E,pt){if(1&E&&n.Gf(Hn,5),2&E){let Bt;n.iGM(Bt=n.CRH())&&(pt.blockGraph=Bt.first)}},inputs:{index:"index"},outputs:{txPreviewEvent:"txPreviewEvent"},features:[n.TTD],decls:3,vars:7,consts:[[3,"isLoading","resolution","blockLimit","orientation","flip","txClickEvent"],["blockGraph",""]],template:function(E,pt){1&E&&(n.TgZ(0,"app-block-overview-graph",0,1),n.NdJ("txClickEvent",function(Qt){return pt.onTxClick(Qt)}),n.ALo(2,"async"),n.qZA()),2&E&&n.Q6J("isLoading",n.lcZ(2,5,pt.isLoading$))("resolution",75)("blockLimit",pt.stateService.blockVSize)("orientation",pt.timeLtr?"right":"left")("flip",!0)},dependencies:[tn.b,k.Ov],encapsulation:2,changeDetection:0}),H})();var bo=D(3534);function _r(H,Lt){if(1&H&&n._UZ(0,"app-fee-distribution-graph",28),2&H){const E=n.oxw().ngIf;n.Q6J("data",E.feeRange)}}function Br(H,Lt){if(1&H){const E=n.EpF();n.TgZ(0,"app-mempool-block-overview",29),n.NdJ("txPreviewEvent",function(Bt){n.CHM(E);const Qt=n.oxw(2);return n.KtG(Qt.setTxPreview(Bt))}),n.qZA()}if(2&H){const E=n.oxw(2);n.Q6J("index",E.mempoolBlockIndex)}}function bi(H,Lt){if(1&H&&n._UZ(0,"app-fee-distribution-graph",28),2&H){const E=n.oxw().ngIf;n.Q6J("data",E.feeRange)}}const Be=function(H){return[H]},nl=function(H){return{width:H}};function da(H,Lt){if(1&H&&(n.TgZ(0,"div",1)(1,"div",2)(2,"h1"),n._uU(3),n.ALo(4,"async"),n.qZA(),n.TgZ(5,"button",3),n.ALo(6,"relativeUrl"),n._uU(7,"\u2715"),n.qZA()(),n._UZ(8,"div",4),n.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"table",8)(13,"tbody")(14,"tr")(15,"td"),n.SDv(16,9),n.qZA(),n.TgZ(17,"td"),n._uU(18),n.ALo(19,"number"),n.TgZ(20,"span",10),n.SDv(21,11),n.qZA(),n.TgZ(22,"span",12),n._UZ(23,"app-fiat",13),n.qZA()()(),n.TgZ(24,"tr")(25,"td"),n.SDv(26,14),n.qZA(),n.TgZ(27,"td")(28,"span",15),n._uU(29),n.ALo(30,"number"),n.ALo(31,"number"),n.TgZ(32,"span",10),n.SDv(33,16),n.qZA()()()(),n.TgZ(34,"tr")(35,"td"),n.SDv(36,17),n.qZA(),n.TgZ(37,"td"),n._UZ(38,"app-amount",18),n.TgZ(39,"span",12),n._UZ(40,"app-fiat",19),n.qZA()()(),n.TgZ(41,"tr")(42,"td"),n.SDv(43,20),n.qZA(),n.TgZ(44,"td"),n._uU(45),n.qZA()(),n.TgZ(46,"tr")(47,"td"),n.SDv(48,21),n.qZA(),n.TgZ(49,"td")(50,"div",22),n._UZ(51,"div",23),n.ALo(52,"async"),n._UZ(53,"div",24),n.ALo(54,"bytes"),n.qZA()()()()(),n.YNc(55,_r,1,1,"app-fee-distribution-graph",25),n.qZA(),n.TgZ(56,"div",26),n.YNc(57,Br,1,1,"app-mempool-block-overview",27),n.YNc(58,bi,1,1,"app-fee-distribution-graph",25),n.qZA()()(),n._UZ(59,"br"),n.qZA()),2&H){const E=Lt.ngIf,pt=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,19,pt.ordinal$)),n.xp6(2),n.Q6J("routerLink",n.VKq(37,Be,n.lcZ(6,21,"/"))),n.xp6(13),n.hij("~",n.xi3(19,23,E.medianFee,"1.0-0")," "),n.xp6(5),n.Q6J("value",140*E.medianFee),n.xp6(6),n.AsE("",n.xi3(30,26,E.feeRange[0],"1.0-0")," - ",n.xi3(31,29,E.feeRange[E.feeRange.length-1],"1.0-0")," "),n.xp6(9),n.Q6J("radiowavesoshis",E.totalFees)("digitsInfo","1.2-2")("noFiat",!0),n.xp6(2),n.Q6J("value",E.totalFees),n.xp6(5),n.Oqu(E.nTx),n.xp6(6),n.Gre("progress-bar progress-mempool ",n.lcZ(52,32,pt.network$),""),n.Q6J("ngStyle",n.VKq(39,nl,E.blockVSize/pt.stateService.blockVSize*100+"%")),n.xp6(2),n.Q6J("innerHTML",n.xi3(54,34,E.blockSize,2),n.oJD),n.xp6(2),n.Q6J("ngIf",pt.webGlEnabled),n.xp6(2),n.Q6J("ngIf",pt.webGlEnabled),n.xp6(1),n.Q6J("ngIf",!pt.webGlEnabled)}}let mo=(()=>{class H{constructor(E,pt,Bt,Qt){this.route=E,this.stateService=pt,this.seoService=Bt,this.websocketService=Qt,this.ordinal$=new xi.X(""),this.webGlEnabled=function Oa(){const H=document.createElement("canvas"),Lt=H.getContext("webgl")||H.getContext("experimental-webgl");return Lt&&Lt instanceof WebGLRenderingContext}()}ngOnInit(){this.websocketService.want(["blocks","mempool-blocks"]),this.mempoolBlock$=this.route.paramMap.pipe((0,mt.w)(E=>(this.mempoolBlockIndex=parseInt(E.get("id"),10)||0,this.stateService.mempoolBlocks$.pipe((0,yt.U)(pt=>pt.length?pt:[{index:0,blockSize:0,blockVSize:0,feeRange:[0,0],medianFee:0,nTx:0,totalFees:0}]),(0,Yo.h)(pt=>pt.length>0),(0,yt.U)(pt=>{for(;!pt[this.mempoolBlockIndex];)this.mempoolBlockIndex--;const Bt=this.getOrdinal(pt[this.mempoolBlockIndex]);return this.ordinal$.next(Bt),this.seoService.setTitle(Bt),pt[this.mempoolBlockIndex]})))),(0,gt.b)(()=>{this.stateService.markBlock$.next({mempoolBlockIndex:this.mempoolBlockIndex})})),this.network$=this.stateService.networkChanged$}ngOnDestroy(){this.stateService.markBlock$.next({})}getOrdinal(E){const pt=Math.ceil(E.blockVSize/this.stateService.blockVSize);return 0===this.mempoolBlockIndex?"\u10E8\u10D4\u10DB\u10D3\u10D4\u10D2\u10D8 \u10D1\u10DA\u10DD\u10D9\u10D8":this.mempoolBlockIndex===this.stateService.env.KEEP_BLOCKS_AMOUNT-1&&pt>1?"mempool " + pt + " \u10D8\u10E1 \u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10D8\u10E1 \u10D9\u10E0\u10D4\u10D1\u10D0 ":"\u10DB\u10D4\u10DB\u10DE\u10E3\u10DA\u10D8\u10E1 \u10D1\u10DA\u10DD\u10D9\u10D8 " + (this.mempoolBlockIndex + 1) + ""}setTxPreview(E){this.previewTx=E}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(St.gz),n.Y36(K.b),n.Y36(N.v),n.Y36(ya.i))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-mempool-block"]],decls:2,vars:3,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe;return Lt="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD",E="\u10E1\u10D0\u10E2/vB",pt="\u10D2\u10D0\u10DB\u10DD\u10DB\u10D3\u10D8\u10DC\u10D0\u10E0\u10D4 \u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD native segwit 140 vByte \u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D8\u10D3\u10D0\u10DC",Bt="\u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD\u10E1 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",Qt="\u10E1\u10D0\u10E2/vB",_e="\u10EF\u10D0\u10DB\u10E8\u10D8 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD",Ee="\u10E2\u10E0\u10D0\u10DC\u10D6\u10D0\u10E5\u10EA\u10D8\u10D0",Xe="\u10D6\u10DD\u10DB\u10D0",[["class","container-xl",4,"ngIf"],[1,"container-xl"],[1,"title-block"],[1,"btn","btn-sm","float-right",3,"routerLink"],[1,"clearfix"],[1,"box"],[1,"row"],[1,"col-md"],[1,"table","table-borderless","table-striped"],Lt,[1,"symbol"],E,[1,"fiat"],["digitsInfo","1.2-2","ngbTooltip",pt,"placement","bottom",3,"value"],Bt,[1,"yellow-color"],Qt,_e,[3,"radiowavesoshis","digitsInfo","noFiat"],["digitsInfo","1.0-0",3,"value"],Ee,Xe,[1,"progress"],["role","progressbar",3,"ngStyle"],[1,"progress-text",3,"innerHTML"],[3,"data",4,"ngIf"],[1,"col-md","chart-container"],[3,"index","txPreviewEvent",4,"ngIf"],[3,"data"],[3,"index","txPreviewEvent"]]},template:function(E,pt){1&E&&(n.YNc(0,da,60,41,"div",0),n.ALo(1,"async")),2&E&&n.Q6J("ngIf",n.lcZ(1,1,pt.mempoolBlock$))},dependencies:[k.O5,k.PC,St.rH,ti._L,dr.B,kr.G,un,Ps,k.Ov,k.JJ,q.w,bo.$],styles:[".progress[_ngcontent-%COMP%]{background-color:#2d3348;position:relative;top:5px}.fiat[_ngcontent-%COMP%]{font-size:13px;display:inline-block;margin-left:10px}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}@media (min-width: 992px){.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:left}}h1[_ngcontent-%COMP%]{margin:0;padding:0;line-height:1}@media (min-width: 576px){h1[_ngcontent-%COMP%]{float:left}}.chart-container[_ngcontent-%COMP%]{margin:20px auto}@media (min-width: 768px){.chart-container[_ngcontent-%COMP%]{margin:auto}}"],changeDetection:0}),H})();var Mn=D(3019),oi=D(2764),Ko=D(9841),Ln=D(7310);let Fn=(()=>{class H{transform(E){return Math.abs(E)}}return H.\u0275fac=function(E){return new(E||H)},H.\u0275pipe=n.Yjl({name:"absolute",type:H,pure:!0}),H})();function Po(H,Lt){1&H&&(n.TgZ(0,"div",6),n.SDv(1,7),n.qZA())}function As(H,Lt){1&H&&n.GkF(0)}function Ea(H,Lt){if(1&H&&(n.tHW(0,26),n._UZ(1,"span",27),n.N_p()),2&H){const E=Lt.$implicit;n.xp6(1),n.pQV(E),n.QtT(0)}}function Ao(H,Lt){if(1&H&&(n.tHW(0,28),n._UZ(1,"span",27),n.N_p()),2&H){const E=Lt.$implicit;n.xp6(1),n.pQV(E),n.QtT(0)}}const jo=function(){return["fas","caret-up"]};function il(H,Lt){1&H&&(n.TgZ(0,"span"),n._UZ(1,"fa-icon",31),n.qZA()),2&H&&(n.xp6(1),n.Q6J("icon",n.DdM(2,jo))("fixedWidth",!0))}const vn=function(){return["fas","caret-down"]};function zr(H,Lt){1&H&&n._UZ(0,"fa-icon",31),2&H&&n.Q6J("icon",n.DdM(2,vn))("fixedWidth",!0)}const zi=function(H){return{color:H}};function Ua(H,Lt){if(1&H&&(n.TgZ(0,"div",29),n.YNc(1,il,2,3,"span",23),n.YNc(2,zr,1,3,"ng-template",null,30,n.W1O),n._uU(4),n.ALo(5,"number"),n.ALo(6,"absolute"),n.TgZ(7,"span",16),n._uU(8,"%"),n.qZA()()),2&H){const E=n.MAs(3),pt=n.oxw().ngIf;n.Q6J("ngStyle",n.VKq(9,zi,pt.colorAdjustments)),n.xp6(1),n.Q6J("ngIf",pt.change>0)("ngIfElse",E),n.xp6(3),n.hij(" ",n.xi3(5,4,n.lcZ(6,7,pt.change),"1.2-2")," ")}}function Jo(H,Lt){1&H&&(n.TgZ(0,"div",12),n._uU(1,"\u2014"),n.qZA())}function io(H,Lt){1&H&&(n.TgZ(0,"span"),n._UZ(1,"fa-icon",32),n.qZA()),2&H&&(n.xp6(1),n.Q6J("icon",n.DdM(2,jo))("fixedWidth",!0))}function Oo(H,Lt){1&H&&n._UZ(0,"fa-icon",32),2&H&&n.Q6J("icon",n.DdM(2,vn))("fixedWidth",!0)}const Qo=function(H){return{width:H}};function ao(H,Lt){if(1&H&&(n.TgZ(0,"div",9)(1,"h5",10),n.SDv(2,33),n.qZA(),n.TgZ(3,"div",12),n._uU(4),n.ALo(5,"number"),n.TgZ(6,"span",16),n._uU(7,"%"),n.qZA()(),n.TgZ(8,"div",34)(9,"div",35),n._uU(10,"\xa0"),n.qZA()()()),2&H){const E=n.oxw().ngIf;n.xp6(4),n.hij("",n.xi3(5,2,E.progress,"1.2-2")," "),n.xp6(5),n.Q6J("ngStyle",n.VKq(5,Qo,E.base))}}function qo(H,Lt){1&H&&n.GkF(0)}function an(H,Lt){if(1&H&&(n.tHW(0,39),n._UZ(1,"span",27),n.N_p()),2&H){const E=Lt.$implicit;n.xp6(1),n.pQV(E),n.QtT(0)}}function oo(H,Lt){if(1&H&&(n.tHW(0,40),n._UZ(1,"span",27),n.N_p()),2&H){const E=Lt.$implicit;n.xp6(1),n.pQV(E),n.QtT(0)}}const so=function(H){return{$implicit:H}};function wa(H,Lt){if(1&H&&(n.TgZ(0,"div",9)(1,"h5",36,37),n.SDv(3,38),n.qZA(),n.TgZ(4,"div",12),n.YNc(5,qo,1,0,"ng-container",13),n.YNc(6,an,2,1,"ng-template",null,14,n.W1O),n.YNc(8,oo,2,1,"ng-template",null,15,n.W1O),n.qZA(),n.TgZ(10,"div",16),n._UZ(11,"app-time",17),n.qZA()()),2&H){const E=n.MAs(2),pt=n.MAs(7),Bt=n.MAs(9),Qt=n.oxw().ngIf,_e=n.oxw();n.xp6(1),n.Q6J("disableTooltip",!_e.isEllipsisActive(E)),n.xp6(4),n.Q6J("ngTemplateOutlet",1===Qt.blocksUntilHalving?Bt:pt)("ngTemplateOutletContext",n.VKq(5,so,Qt.blocksUntilHalving)),n.xp6(6),n.Q6J("time",Qt.timeUntilHalving)("fastRender",!0)}}function Os(H,Lt){if(1&H&&(n.TgZ(0,"div",8)(1,"div",9)(2,"h5",10),n.SDv(3,11),n.qZA(),n.TgZ(4,"div",12),n.YNc(5,As,1,0,"ng-container",13),n.YNc(6,Ea,2,1,"ng-template",null,14,n.W1O),n.YNc(8,Ao,2,1,"ng-template",null,15,n.W1O),n.qZA(),n.TgZ(10,"div",16),n._UZ(11,"app-time",17),n.qZA()(),n.TgZ(12,"div",9)(13,"h5",10),n.SDv(14,18),n.qZA(),n.YNc(15,Ua,9,11,"div",19),n.YNc(16,Jo,2,0,"ng-template",null,20,n.W1O),n.TgZ(18,"div",16)(19,"span"),n.SDv(20,21),n.qZA(),n._uU(21,": "),n.TgZ(22,"span",22),n.YNc(23,io,2,3,"span",23),n.YNc(24,Oo,1,3,"ng-template",null,24,n.W1O),n._uU(26),n.ALo(27,"number"),n.ALo(28,"absolute"),n.qZA(),n._uU(29," % "),n.qZA()(),n.YNc(30,ao,11,7,"div",25),n.YNc(31,wa,12,7,"div",25),n.qZA()),2&H){const E=Lt.ngIf,pt=n.MAs(7),Bt=n.MAs(9),Qt=n.MAs(17),_e=n.MAs(25),Ee=n.oxw();n.xp6(5),n.Q6J("ngTemplateOutlet",1===E.remainingBlocks?Bt:pt)("ngTemplateOutletContext",n.VKq(17,so,E.remainingBlocks)),n.xp6(6),n.Q6J("time",E.estimatedRetargetDate)("fastRender",!0),n.xp6(4),n.Q6J("ngIf",E.remainingBlocks<1870)("ngIfElse",Qt),n.xp6(7),n.Q6J("ngStyle",n.VKq(19,zi,E.colorPreviousAdjustments)),n.xp6(1),n.Q6J("ngIf",E.previousRetarget>0)("ngIfElse",_e),n.xp6(3),n.hij(" ",n.xi3(27,12,n.lcZ(28,15,E.previousRetarget),"1.2-2")," "),n.xp6(4),n.Q6J("ngIf",Ee.showProgress),n.xp6(1),n.Q6J("ngIf",Ee.showHalving)}}function al(H,Lt){1&H&&(n.TgZ(0,"div",41)(1,"div",9)(2,"h5",10),n.SDv(3,42),n.qZA(),n.TgZ(4,"div",12),n._UZ(5,"div",43)(6,"div",43),n.qZA()(),n.TgZ(7,"div",9)(8,"h5",10),n.SDv(9,44),n.qZA(),n.TgZ(10,"div",12),n._UZ(11,"div",43)(12,"div",43),n.qZA()(),n.TgZ(13,"div",9)(14,"h5",10),n.SDv(15,45),n.qZA(),n.TgZ(16,"div",12),n._UZ(17,"div",43)(18,"div",43),n.qZA()()())}let Ui=(()=>{class H{constructor(E){this.stateService=E,this.showProgress=!0,this.showHalving=!1,this.showTitle=!0}ngOnInit(){this.isLoadingWebSocket$=this.stateService.isLoadingWebSocket$,this.difficultyEpoch$=(0,Ko.a)([this.stateService.blocks$.pipe((0,yt.U)(([E])=>E)),this.stateService.difficultyAdjustment$]).pipe((0,yt.U)(([E,pt])=>{let Bt="#ffffff66";pt.difficultyChange>0&&(Bt="#3bcc49"),pt.difficultyChange<0&&(Bt="#dc3545");let Qt="#dc3545";pt.previousRetarget?(pt.previousRetarget>=0&&(Qt="#3bcc49"),0===pt.previousRetarget&&(Qt="#ffffff66")):Qt="#ffffff66";const _e=21e4-E.height%21e4,Ee=(new Date).getTime()+6e5*_e;return{base:`${pt.progressPercent.toFixed(2)}%`,change:pt.difficultyChange,progress:pt.progressPercent,remainingBlocks:pt.remainingBlocks-1,colorAdjustments:Bt,colorPreviousAdjustments:Qt,newDifficultyHeight:pt.nextRetargetHeight,estimatedRetargetDate:pt.estimatedRetargetDate,previousRetarget:pt.previousRetarget,blocksUntilHalving:_e,timeUntilHalving:Ee}}))}isEllipsisActive(E){return E.offsetWidth<E.scrollWidth}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(K.b))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-difficulty-mining"]],inputs:{showProgress:"showProgress",showHalving:"showHalving",showTitle:"showTitle"},decls:9,vars:7,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe,je,hr,jr,fn,ei,_i;return Lt="\u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4",E="\u10D3\u10D0\u10E0\u10E9\u10D0",pt="\u10D3\u10D0\u10D0\u10EE\u10DA\u10DD\u10D4\u10D1\u10D8\u10D7",Bt="\u10EC\u10D8\u10DC\u10D0",Qt="" + "\ufffd0\ufffd" + " " + "\ufffd#1\ufffd" + "\u10D1\u10DA\u10DD\u10D9\u10D8" + "\ufffd/#1\ufffd" + "",_e="" + "\ufffd0\ufffd" + " " + "\ufffd#1\ufffd" + "\u10D1\u10DA\u10DD\u10D9\u10D8" + "\ufffd/#1\ufffd" + "",Ee="\u10D4\u10E1 \u10DE\u10D4\u10E0\u10D8\u10DD\u10D3\u10D8",Xe="\u10E8\u10D4\u10DB\u10D3\u10D4\u10D2\u10D8 \u10F0\u10D0\u10DA\u10D5\u10D8\u10DC\u10D2\u10D8",je="\u10E8\u10D4\u10DB\u10D3\u10D4\u10D2\u10D8 \u10F0\u10D0\u10DA\u10D5\u10D8\u10DC\u10D2\u10D8",hr="" + "\ufffd0\ufffd" + " " + "\ufffd#1\ufffd" + "\u10D1\u10DA\u10DD\u10D9\u10D8" + "\ufffd/#1\ufffd" + "",jr="" + "\ufffd0\ufffd" + " " + "\ufffd#1\ufffd" + "\u10D1\u10DA\u10DD\u10D9\u10D8" + "\ufffd/#1\ufffd" + "",fn="\u10D3\u10D0\u10E0\u10E9\u10D0",ei="\u10D3\u10D0\u10D0\u10EE\u10DA\u10DD\u10D4\u10D1\u10D8\u10D7",_i="\u10E8\u10D4\u10DB\u10D3\u10D4\u10D2\u10D8 \u10F0\u10D0\u10DA\u10D5\u10D8\u10DC\u10D2\u10D8",[["class","main-title",4,"ngIf"],[1,"card-wrapper"],[1,"card"],[1,"card-body","more-padding"],["class","difficulty-adjustment-container",4,"ngIf","ngIfElse"],["loadingDifficulty",""],[1,"main-title"],Lt,[1,"difficulty-adjustment-container"],[1,"item"],[1,"card-title"],E,[1,"card-text"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["blocksPlural",""],["blocksSingular",""],[1,"symbol"],["kind","until",3,"time","fastRender"],pt,["class","card-text",3,"ngStyle",4,"ngIf","ngIfElse"],["recentlyAdjusted",""],Bt,[3,"ngStyle"],[4,"ngIf","ngIfElse"],["arrowDownPreviousDifficulty",""],["class","item",4,"ngIf"],Qt,[1,"shared-block"],_e,[1,"card-text",3,"ngStyle"],["arrowDownDifficulty",""],[1,"retarget-sign",3,"icon","fixedWidth"],[1,"previous-retarget-sign",3,"icon","fixedWidth"],Ee,[1,"progress","small-bar"],["role","progressbar",1,"progress-bar",2,"width","15%","background-color","#105fb0",3,"ngStyle"],["ngbTooltip",Xe,"placement","bottom",1,"card-title",3,"disableTooltip"],["averagefee",""],je,hr,jr,[1,"difficulty-skeleton","loading-container"],fn,[1,"skeleton-loader"],ei,_i]},template:function(E,pt){if(1&E&&(n.YNc(0,Po,2,0,"div",0),n.TgZ(1,"div",1)(2,"div",2)(3,"div",3),n.YNc(4,Os,32,21,"div",4),n.ALo(5,"async"),n.ALo(6,"async"),n.qZA()()(),n.YNc(7,al,19,0,"ng-template",null,5,n.W1O)),2&E){const Bt=n.MAs(8);n.Q6J("ngIf",pt.showTitle),n.xp6(4),n.Q6J("ngIf",!1===n.lcZ(5,3,pt.isLoadingWebSocket$)&&n.lcZ(6,5,pt.difficultyEpoch$))("ngIfElse",Bt)}},dependencies:[k.O5,k.tP,k.PC,ti._L,_.BN,Ln.G,k.Ov,k.JJ,Fn],styles:[".difficulty-adjustment-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;height:76px}.difficulty-adjustment-container[_ngcontent-%COMP%]   .shared-block[_ngcontent-%COMP%]{color:#fff6;font-size:12px}.difficulty-adjustment-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:0 5px;width:100%;max-width:150px}.difficulty-adjustment-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(1){display:none}@media (min-width: 485px){.difficulty-adjustment-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(1){display:table-cell}}@media (min-width: 768px){.difficulty-adjustment-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(1){display:none}}@media (min-width: 992px){.difficulty-adjustment-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(1){display:table-cell}}.difficulty-adjustment-container[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:22px;margin-top:-9px;position:relative}.difficulty-skeleton[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (min-width: 376px){.difficulty-skeleton[_ngcontent-%COMP%]{flex-direction:row}}.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{min-width:120px;max-width:150px;margin:0;width:-webkit-fill-available}@media (min-width: 376px){.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0 auto}}.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:none}@media (min-width: 485px){.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:block}}@media (min-width: 768px){.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:none}}@media (min-width: 992px){.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:block}}.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.difficulty-skeleton[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]{width:100%;display:block}.difficulty-skeleton[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]:first-child{margin:14px auto 0;max-width:80px}.difficulty-skeleton[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]:last-child{margin:10px auto 0;max-width:120px}.card[_ngcontent-%COMP%]{background-color:#1d1f31;height:100%}.card-title[_ngcontent-%COMP%]{color:#4a68b9;font-size:1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.progress[_ngcontent-%COMP%]{display:inline-flex;width:100%;background-color:#2d3348;height:1.1rem;max-width:180px}.skeleton-loader[_ngcontent-%COMP%]{max-width:100%}.more-padding[_ngcontent-%COMP%]{padding:18px}.small-bar[_ngcontent-%COMP%]{height:8px;top:-4px;max-width:120px}.loading-container[_ngcontent-%COMP%]{min-height:76px}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto!important}.card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;flex:inherit;text-align:center;flex-direction:column;justify-content:space-around;padding:24px 20px}.retarget-sign[_ngcontent-%COMP%]{margin-right:-3px;font-size:14px;top:-2px;position:relative}.previous-retarget-sign[_ngcontent-%COMP%]{margin-right:-2px;font-size:10px}.symbol[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}"],changeDetection:0}),H})();const Ha=function(H,Lt){return[H,Lt]};function li(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",2)(2,"a",11),n.ALo(3,"relativeUrl"),n._uU(4),n.qZA()(),n.TgZ(5,"td",4),n._UZ(6,"app-time",12),n.qZA(),n.TgZ(7,"td",6),n._uU(8),n.qZA(),n.TgZ(9,"td",6),n._uU(10),n.ALo(11,"amountShortener"),n.qZA()()),2&H){const E=Lt.$implicit;n.xp6(2),n.Q6J("routerLink",n.WLB(14,Ha,n.lcZ(3,9,"/block"),E.height)),n.xp6(2),n.Oqu(E.height),n.xp6(2),n.Q6J("time",E.timestamp)("fastRender",!0),n.xp6(2),n.Oqu(E.difficultyShorten),n.xp6(1),n.Akn(E.change>=0?"color: #42B747":"color: #B74242"),n.xp6(1),n.AsE(" ",E.change>=0?"+":"","",n.xi3(11,11,E.change,2),"% ")}}function Ii(H,Lt){if(1&H&&(n.TgZ(0,"tbody"),n.YNc(1,li,12,17,"tr",10),n.qZA()),2&H){const E=Lt.ngIf;n.xp6(1),n.Q6J("ngForOf",E)}}function lo(H,Lt){1&H&&(n.TgZ(0,"tr")(1,"td",2),n._UZ(2,"span",13),n.qZA(),n.TgZ(3,"td",4),n._UZ(4,"span",14),n.qZA(),n.TgZ(5,"td",6),n._UZ(6,"span",14),n.qZA(),n.TgZ(7,"td",6),n._UZ(8,"span",14),n.qZA()())}const ui=function(){return[1,2,3,4,5,6]};function Si(H,Lt){1&H&&(n.TgZ(0,"tbody"),n.YNc(1,lo,9,0,"tr",10),n.qZA()),2&H&&(n.xp6(1),n.Q6J("ngForOf",n.DdM(1,ui)))}let gn=(()=>{class H{constructor(E,pt,Bt){this.locale=E,this.apiService=pt,this.stateService=Bt,this.isLoading=!0,this.formatNumber=k.uf}ngOnInit(){let E=2;"signet"===this.stateService.network&&(E=5),this.hashrateObservable$=this.apiService.getDifficultyAdjustments$("3m").pipe((0,yt.U)(pt=>{const Bt=pt.body,Qt=[];for(const _e of Bt){const Ee=(0,ot.hD)(_e[2]);Qt.push({height:_e[1],timestamp:_e[0],change:100*(_e[3]-1),difficultyShorten:(0,k.uf)(_e[2]/Ee.divider,this.locale,`1.${E}-${E}`)+Ee.unit})}return this.isLoading=!1,Qt.slice(0,6)}))}isMobile(){return window.innerWidth<=767.98}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36(et.s),n.Y36(K.b))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-difficulty-adjustments-table"]],decls:15,vars:4,consts:function(){let Lt,E,pt,Bt;return Lt="\u10E1\u10D8\u10DB\u10D0\u10E6\u10DA\u10D4",E="\u10E8\u10D4\u10E1\u10EC\u10DD\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8",pt="\u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4",Bt="\u10EA\u10D5\u10DA\u10D8\u10DA\u10D4\u10D1\u10D0",[[2,"min-height","335px"],[1,"table","latest-adjustments"],[1,""],Lt,[1,"date","text-left"],E,[1,"text-right"],pt,Bt,[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"routerLink"],["kind","since",3,"time","fastRender"],[1,"skeleton-loader"],[1,"skeleton-loader","w-75"]]},template:function(E,pt){1&E&&(n.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),n.SDv(5,3),n.qZA(),n.TgZ(6,"th",4),n.SDv(7,5),n.qZA(),n.TgZ(8,"th",6),n.SDv(9,7),n.qZA(),n.TgZ(10,"th",6),n.SDv(11,8),n.qZA()()(),n.YNc(12,Ii,2,1,"tbody",9),n.ALo(13,"async"),n.YNc(14,Si,2,2,"tbody",9),n.qZA()()),2&E&&(n.xp6(12),n.Q6J("ngIf",n.lcZ(13,2,pt.hashrateObservable$)),n.xp6(2),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.sg,k.O5,St.yS,Ln.G,k.Ov,q.w,Za.j],styles:[".latest-adjustments[_ngcontent-%COMP%]{width:100%;text-align:left;table-layout:fixed}.latest-adjustments[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .latest-adjustments[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:0px;padding-top:.65rem!important;padding-bottom:.7rem!important}.latest-adjustments[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:0px;padding-top:.71rem!important;padding-bottom:.75rem!important;width:25%}@media (max-width: 376px){.latest-adjustments[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.85rem}}@media (min-width: 767px) and (max-width: 991px){.date[_ngcontent-%COMP%]{display:none}}@media (max-width: 500px){.date[_ngcontent-%COMP%]{display:none}}",".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}"]}),H})();var ol=D(8884),ji=D(7272);function Es(H,Lt){if(1&H&&(n.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h5",5,6),n.SDv(5,7),n.qZA(),n.TgZ(6,"div",8)(7,"div",9),n._UZ(8,"app-amount",10),n.qZA(),n.TgZ(9,"span",11),n._UZ(10,"app-fiat",12),n.qZA()()(),n.TgZ(11,"div",4)(12,"h5",13,14),n.SDv(14,15),n.qZA(),n.TgZ(15,"div",16)(16,"div",9),n._uU(17),n.ALo(18,"amountShortener"),n.TgZ(19,"span"),n.SDv(20,17),n.qZA()(),n.TgZ(21,"span",11),n._UZ(22,"app-fiat",18),n.qZA()()(),n.TgZ(23,"div",4)(24,"h5",19,20),n.SDv(26,21),n.qZA(),n.TgZ(27,"div",22)(28,"div",9),n._uU(29),n.ALo(30,"amountShortener"),n.TgZ(31,"span"),n.SDv(32,23),n.qZA()(),n.TgZ(33,"span",11),n._UZ(34,"app-fiat",18),n.qZA()()()()()),2&H){const E=Lt.ngIf,pt=n.MAs(4),Bt=n.MAs(13),Qt=n.MAs(25),_e=n.oxw();n.xp6(3),n.Q6J("disableTooltip",!_e.isEllipsisActive(pt)),n.xp6(5),n.Q6J("radiowavesoshis",E.totalReward)("noFiat",!0),n.xp6(2),n.Q6J("value",E.totalReward),n.xp6(2),n.Q6J("disableTooltip",!_e.isEllipsisActive(Bt)),n.xp6(5),n.hij(" ",n.xi3(18,10,E.feePerBlock/1e8,4)," "),n.xp6(5),n.Q6J("value",E.feePerBlock),n.xp6(2),n.Q6J("disableTooltip",!_e.isEllipsisActive(Qt)),n.xp6(5),n.hij("",n.xi3(30,13,E.feePerTx,2)," "),n.xp6(5),n.Q6J("value",E.feePerTx)}}function Va(H,Lt){1&H&&(n.TgZ(0,"div",24)(1,"div",4)(2,"h5",25),n.SDv(3,26),n.qZA(),n.TgZ(4,"div",27),n._UZ(5,"div",28)(6,"div",28),n.qZA()(),n.TgZ(7,"div",4)(8,"h5",25),n.SDv(9,29),n.qZA(),n.TgZ(10,"div",27),n._UZ(11,"div",28)(12,"div",28),n.qZA()(),n.TgZ(13,"div",4)(14,"h5",25),n.SDv(15,30),n.qZA(),n.TgZ(16,"div",27),n._UZ(17,"div",28)(18,"div",28),n.qZA()()())}let ra=(()=>{class H{constructor(E,pt){this.apiService=E,this.stateService=pt}ngOnInit(){this.$rewardStats=(0,ji.z)(this.apiService.getRewardStats$().pipe((0,gt.b)(E=>{this.lastBlockHeight=E.endBlock})),this.stateService.blocks$.pipe((0,mt.w)(E=>E[0].height<=this.lastBlockHeight?[]:(this.lastBlockHeight=E[0].height,this.apiService.getRewardStats$())))).pipe((0,yt.U)(E=>({totalReward:E.totalReward,feePerTx:E.totalFee/E.totalTx,feePerBlock:E.totalFee/144})))}isEllipsisActive(E){return E.offsetWidth<E.scrollWidth}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(et.s),n.Y36(K.b))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-reward-stats"]],decls:4,vars:4,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe,je,hr,jr,fn,ei,_i;return Lt="\u10DB\u10D0\u10D8\u10DC\u10D4\u10E0\u10D4\u10D1\u10D8\u10E1 \u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",E="\u10DB\u10D0\u10D8\u10DC\u10D4\u10E0\u10D4\u10D1\u10D8\u10E1 \u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",pt="\u10DB\u10D0\u10D8\u10DC\u10D4\u10E0\u10D4\u10D1\u10D8\u10E1 \u10EF\u10D0\u10DB\u10E3\u10E0\u10D8 \u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0 144 \u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E8\u10D4\u10D3\u10D4\u10D2\u10D0\u10D3",Bt="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD",Qt="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD",_e="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD \u10D1\u10DD\u10DA\u10DD 144 \u10D1\u10DA\u10DD\u10D9\u10D6\u10D4",Ee="BIT/block",Xe="\u10E1\u10D0\u10E8. \u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D8\u10E1 \u10E1\u10D0\u10D9.",je="\u10E1\u10D0\u10E8. \u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D8\u10E1 \u10E1\u10D0\u10D9.",hr="\u10E1\u10E3\u10DA \u10D2\u10D0\u10D3\u10D0\u10EE\u10D3\u10D8\u10DA\u10D8 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD\u10D4\u10D1\u10D8 144 \u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E8\u10D4\u10D3\u10D4\u10D2\u10D0\u10D3",jr="radiowavess/tx",fn="\u10DB\u10D0\u10D8\u10DC\u10D4\u10E0\u10D4\u10D1\u10D8\u10E1 \u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",ei="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD",_i="\u10E1\u10D0\u10E8. \u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D8\u10E1 \u10E1\u10D0\u10D9.",[["class","fee-estimation-wrapper",4,"ngIf","ngIfElse"],["loadingReward",""],[1,"fee-estimation-wrapper"],[1,"fee-estimation-container"],[1,"item"],["ngbTooltip",Lt,"placement","bottom",1,"card-title",3,"disableTooltip"],["minersreward",""],E,["ngbTooltip",pt,"placement","bottom",1,"card-text"],[1,"fee-text"],["digitsInfo","1.2-2",3,"radiowavesoshis","noFiat"],[1,"fiat"],["digitsInfo","1.0-0",3,"value"],["ngbTooltip",Bt,"placement","bottom",1,"card-title",3,"disableTooltip"],["rewardsperblock",""],Qt,["ngbTooltip",_e,"placement","bottom",1,"card-text"],Ee,[3,"value"],["ngbTooltip",Xe,"placement","bottom",1,"card-title",3,"disableTooltip"],["averagefee",""],je,["ngbTooltip",hr,"placement","bottom",1,"card-text"],jr,[1,"fee-estimation-container","loading-container"],[1,"card-title"],fn,[1,"card-text"],[1,"skeleton-loader"],ei,_i]},template:function(E,pt){if(1&E&&(n.YNc(0,Es,35,16,"div",0),n.ALo(1,"async"),n.YNc(2,Va,19,0,"ng-template",null,1,n.W1O)),2&E){const Bt=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,pt.$rewardStats))("ngIfElse",Bt)}},dependencies:[k.O5,ti._L,dr.B,kr.G,k.Ov,Za.j],styles:[".card-title[_ngcontent-%COMP%]{color:#4a68b9;font-size:10px;margin-bottom:4px;font-size:1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.card-text[_ngcontent-%COMP%]{font-size:22px}.card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;position:relative;top:-2px;display:inline-flex}.card-text[_ngcontent-%COMP%]   .green-color[_ngcontent-%COMP%]{display:block}.fee-estimation-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (min-width: 376px){.fee-estimation-container[_ngcontent-%COMP%]{flex-direction:row}}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{max-width:150px;margin:0;width:-webkit-fill-available}@media (min-width: 376px){.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0 auto}}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:none}@media (min-width: 485px){.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:block}}@media (min-width: 768px){.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:none}}@media (min-width: 992px){.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:block}}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff6;font-size:12px;top:0}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .fee-text[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.1098039216);width:-moz-fit-content;width:fit-content;margin:auto;line-height:1.45;padding:0 2px}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .fiat[_ngcontent-%COMP%]{display:block;font-size:14px!important}.loading-container[_ngcontent-%COMP%]{min-height:76px}.card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]{width:100%;display:block}.card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]:first-child{max-width:90px;margin:15px auto 3px}.card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]:last-child{margin:10px auto 3px;max-width:55px}"],changeDetection:0}),H})();var Nn=D(9292);function ts(H,Lt){1&H&&n._UZ(0,"app-indexing-progress")}function Eo(H,Lt){if(1&H&&(n.TgZ(0,"div",8)(1,"div",9)(2,"h5",10,11),n.SDv(4,12),n.qZA(),n.TgZ(5,"p",13),n._uU(6),n.qZA()(),n.TgZ(7,"div",9)(8,"h5",14,15),n.SDv(10,16),n.qZA(),n.TgZ(11,"p",17),n._uU(12),n.qZA()(),n.TgZ(13,"div",9)(14,"h5",18,19),n.SDv(16,20),n.qZA(),n.TgZ(17,"p",21),n._uU(18),n.qZA()()()),2&H){const E=Lt.ngIf,pt=n.MAs(3),Bt=n.MAs(9),Qt=n.MAs(15),_e=n.oxw(2);n.xp6(2),n.Q6J("disableTooltip",!_e.isEllipsisActive(pt)),n.xp6(4),n.hij(" ",E.minersLuck,"% "),n.xp6(2),n.Q6J("disableTooltip",!_e.isEllipsisActive(Bt)),n.xp6(4),n.hij(" ",E.pools.length," "),n.xp6(2),n.Q6J("disableTooltip",!_e.isEllipsisActive(Qt)),n.xp6(4),n.hij(" ",E.blockCount," ")}}function pa(H,Lt){if(1&H&&(n.TgZ(0,"div"),n.YNc(1,Eo,19,6,"div",7),n.ALo(2,"async"),n.qZA()),2&H){const E=n.oxw(),pt=n.MAs(9);n.xp6(1),n.Q6J("ngIf",n.lcZ(2,2,E.miningStatsObservable$))("ngIfElse",pt)}}const Ri=function(H){return[H]};function Wa(H,Lt){if(1&H&&(n.TgZ(0,"label",31),n._UZ(1,"input",34),n.ALo(2,"relativeUrl"),n._uU(3," 24h "),n.qZA()),2&H){const E=n.oxw(3);n.ekj("active","24h"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","24h")("routerLink",n.VKq(7,Ri,n.lcZ(2,5,"/graphs/mining/pools"))),n.uIk("data-cy","24h")}}function Xn(H,Lt){if(1&H&&(n.TgZ(0,"label",31),n._UZ(1,"input",35),n.ALo(2,"relativeUrl"),n._uU(3," 3D "),n.qZA()),2&H){const E=n.oxw(3);n.ekj("active","3d"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3d")("routerLink",n.VKq(7,Ri,n.lcZ(2,5,"/graphs/mining/pools"))),n.uIk("data-cy","3d")}}function Yl(H,Lt){if(1&H&&(n.TgZ(0,"label",31),n._UZ(1,"input",36),n.ALo(2,"relativeUrl"),n._uU(3," 1W "),n.qZA()),2&H){const E=n.oxw(3);n.ekj("active","1w"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1w")("routerLink",n.VKq(7,Ri,n.lcZ(2,5,"/graphs/mining/pools"))),n.uIk("data-cy","1w")}}function sl(H,Lt){if(1&H&&(n.TgZ(0,"label",31),n._UZ(1,"input",37),n.ALo(2,"relativeUrl"),n._uU(3," 1M "),n.qZA()),2&H){const E=n.oxw(3);n.ekj("active","1m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1m")("routerLink",n.VKq(7,Ri,n.lcZ(2,5,"/graphs/mining/pools"))),n.uIk("data-cy","1m")}}function wo(H,Lt){if(1&H&&(n.TgZ(0,"label",31),n._UZ(1,"input",38),n.ALo(2,"relativeUrl"),n._uU(3," 3M "),n.qZA()),2&H){const E=n.oxw(3);n.ekj("active","3m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3m")("routerLink",n.VKq(7,Ri,n.lcZ(2,5,"/graphs/mining/pools"))),n.uIk("data-cy","3m")}}function ll(H,Lt){if(1&H&&(n.TgZ(0,"label",31),n._UZ(1,"input",39),n.ALo(2,"relativeUrl"),n._uU(3," 6M "),n.qZA()),2&H){const E=n.oxw(3);n.ekj("active","6m"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","6m")("routerLink",n.VKq(7,Ri,n.lcZ(2,5,"/graphs/mining/pools"))),n.uIk("data-cy","6m")}}function Kl(H,Lt){if(1&H&&(n.TgZ(0,"label",31),n._UZ(1,"input",40),n.ALo(2,"relativeUrl"),n._uU(3," 1Y "),n.qZA()),2&H){const E=n.oxw(3);n.ekj("active","1y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1y")("routerLink",n.VKq(7,Ri,n.lcZ(2,5,"/graphs/mining/pools"))),n.uIk("data-cy","1y")}}function es(H,Lt){if(1&H&&(n.TgZ(0,"label",31),n._UZ(1,"input",41),n.ALo(2,"relativeUrl"),n._uU(3," 2Y "),n.qZA()),2&H){const E=n.oxw(3);n.ekj("active","2y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","2y")("routerLink",n.VKq(7,Ri,n.lcZ(2,5,"/graphs/mining/pools"))),n.uIk("data-cy","2y")}}function ws(H,Lt){if(1&H&&(n.TgZ(0,"label",31),n._UZ(1,"input",42),n.ALo(2,"relativeUrl"),n._uU(3," 3Y "),n.qZA()),2&H){const E=n.oxw(3);n.ekj("active","3y"===E.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3y")("routerLink",n.VKq(7,Ri,n.lcZ(2,5,"/graphs/mining/pools"))),n.uIk("data-cy","3y")}}const Do=function(H){return{disabled:H}};function Ds(H,Lt){if(1&H&&(n.TgZ(0,"form",28)(1,"div",29),n.YNc(2,Wa,4,9,"label",30),n.YNc(3,Xn,4,9,"label",30),n.YNc(4,Yl,4,9,"label",30),n.YNc(5,sl,4,9,"label",30),n.YNc(6,wo,4,9,"label",30),n.YNc(7,ll,4,9,"label",30),n.YNc(8,Kl,4,9,"label",30),n.YNc(9,es,4,9,"label",30),n.YNc(10,ws,4,9,"label",30),n.TgZ(11,"label",31),n._UZ(12,"input",32),n.ALo(13,"relativeUrl"),n.TgZ(14,"span"),n.SDv(15,33),n.qZA()()()()),2&H){const E=Lt.ngIf,pt=n.oxw(2);n.Q6J("formGroup",pt.radioGroupForm),n.xp6(1),n.Tol(n.VKq(19,Do,pt.isLoading)),n.xp6(1),n.Q6J("ngIf",E.totalBlockCount>=144),n.xp6(1),n.Q6J("ngIf",E.totalBlockCount>=432),n.xp6(1),n.Q6J("ngIf",E.totalBlockCount>=1008),n.xp6(1),n.Q6J("ngIf",E.totalBlockCount>=4320),n.xp6(1),n.Q6J("ngIf",E.totalBlockCount>=12960),n.xp6(1),n.Q6J("ngIf",E.totalBlockCount>=25920),n.xp6(1),n.Q6J("ngIf",E.totalBlockCount>=52560),n.xp6(1),n.Q6J("ngIf",E.totalBlockCount>=105120),n.xp6(1),n.Q6J("ngIf",E.totalBlockCount>=157680),n.xp6(1),n.ekj("active","all"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","all")("routerLink",n.VKq(21,Ri,n.lcZ(13,17,"/graphs/mining/pools"))),n.uIk("data-cy","all")}}const ul=function(){return["fas","download"]};function rs(H,Lt){if(1&H){const E=n.EpF();n.TgZ(0,"div",22)(1,"div",23)(2,"span"),n.SDv(3,24),n.qZA(),n.TgZ(4,"button",25),n.NdJ("click",function(){n.CHM(E);const Bt=n.oxw();return n.KtG(Bt.onSaveChart())}),n._UZ(5,"fa-icon",26),n.qZA()(),n.YNc(6,Ds,16,23,"form",27),n.ALo(7,"async"),n.qZA()}if(2&H){const E=n.oxw();n.xp6(5),n.Q6J("icon",n.DdM(5,ul))("fixedWidth",!0),n.xp6(1),n.Q6J("ngIf",!E.widget&&n.lcZ(7,3,E.miningStatsObservable$))}}function jl(H,Lt){1&H&&(n.TgZ(0,"div",43),n._UZ(1,"div",44),n.qZA())}function Lo(H,Lt){1&H&&(n.TgZ(0,"th",48),n.SDv(1,54),n.qZA())}function Jl(H,Lt){if(1&H&&(n.TgZ(0,"th",55,56),n.SDv(2,57),n.qZA()),2&H){const E=n.MAs(1),pt=n.oxw(2);n.Q6J("disableTooltip",!pt.isEllipsisActive(E))}}function Ql(H,Lt){if(1&H&&(n.TgZ(0,"td",48),n._uU(1),n.qZA()),2&H){const E=n.oxw().$implicit,pt=n.oxw().ngIf;n.xp6(1),n.AsE("",E.lastEstimatedHashrate," ",pt.miningUnits.hashrateUnit,"")}}function Da(H,Lt){if(1&H&&(n.TgZ(0,"a",69),n._uU(1),n.qZA()),2&H){const E=n.oxw(2).$implicit;n.ekj("badge-success",E.avgMatchRate>=99)("badge-warning",E.avgMatchRate>=75&&E.avgMatchRate<99)("badge-danger",E.avgMatchRate<75),n.xp6(1),n.hij("",E.avgMatchRate,"%")}}function yo(H,Lt){1&H&&(n.TgZ(0,"span",70),n.SDv(1,71),n.qZA())}const Ls=function(H,Lt){return{widget:H,legacy:Lt}};function ku(H,Lt){if(1&H&&(n.TgZ(0,"td",66),n.YNc(1,Da,2,7,"a",67),n.YNc(2,yo,2,0,"ng-template",null,68,n.W1O),n.qZA()),2&H){const E=n.MAs(3),pt=n.oxw().$implicit,Bt=n.oxw(3);n.Q6J("ngClass",n.WLB(3,Ls,Bt.widget,!Bt.indexingAvailable)),n.xp6(1),n.Q6J("ngIf",null!=pt.avgMatchRate)("ngIfElse",E)}}function cl(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",46),n._uU(2),n.qZA(),n.TgZ(3,"td",60),n._UZ(4,"img",62),n.qZA(),n.TgZ(5,"td",48)(6,"a",63),n.ALo(7,"relativeUrl"),n._uU(8),n.qZA()(),n.YNc(9,Ql,2,2,"td",50),n.TgZ(10,"td",64),n._uU(11),n.TgZ(12,"span",46),n._uU(13),n.qZA()(),n.YNc(14,ku,4,6,"td",65),n.TgZ(15,"td",46),n._uU(16),n.qZA()()),2&H){const E=Lt.$implicit,pt=n.oxw(3);n.xp6(2),n.Oqu(E.rank),n.xp6(2),n.s9C("src",E.logo,n.LSH),n.Q6J("alt",E.name+" mining pool logo"),n.xp6(2),n.Q6J("routerLink",n.VKq(13,Ri,n.lcZ(7,11,"/mining/pool/"+E.slug))),n.xp6(2),n.Oqu(E.name),n.xp6(1),n.Q6J("ngIf","24h"===pt.miningWindowPreference),n.xp6(2),n.hij(" ",E.blockCount,""),n.xp6(2),n.hij("\xa0(",E.share,"%)"),n.xp6(1),n.Q6J("ngIf",pt.auditAvailable),n.xp6(2),n.AsE("",E.emptyBlocks," (",E.emptyBlockRatio,"%)")}}function na(H,Lt){if(1&H&&(n.TgZ(0,"td",48)(1,"b"),n._uU(2),n.qZA()()),2&H){const E=n.oxw().ngIf;n.xp6(2),n.AsE("",E.lastEstimatedHashrate," ",E.miningUnits.hashrateUnit,"")}}function sn(H,Lt){if(1&H&&(n.TgZ(0,"tbody"),n.YNc(1,cl,17,15,"tr",58),n.TgZ(2,"tr",59),n._UZ(3,"td",46)(4,"td",60),n.TgZ(5,"td",48)(6,"b"),n.SDv(7,61),n.qZA()(),n.YNc(8,na,3,2,"td",50),n.TgZ(9,"td",48)(10,"b"),n._uU(11),n.qZA()(),n.TgZ(12,"td",46)(13,"b"),n._uU(14),n.qZA()()()()),2&H){const E=Lt.ngIf,pt=n.oxw(2);n.uIk("data-cy","pools-table"),n.xp6(1),n.Q6J("ngForOf",E.pools),n.xp6(7),n.Q6J("ngIf","24h"===pt.miningWindowPreference),n.xp6(3),n.Oqu(E.blockCount),n.xp6(3),n.AsE("",E.totalEmptyBlock," (",E.totalEmptyBlockRatio,"%)")}}function No(H,Lt){if(1&H&&(n.TgZ(0,"table",45)(1,"thead")(2,"tr")(3,"th",46),n.SDv(4,47),n.qZA(),n._UZ(5,"th",48),n.TgZ(6,"th",48),n.SDv(7,49),n.qZA(),n.YNc(8,Lo,2,0,"th",50),n.TgZ(9,"th",48),n.SDv(10,51),n.qZA(),n.YNc(11,Jl,3,1,"th",52),n.TgZ(12,"th",46),n.SDv(13,53),n.qZA()()(),n.YNc(14,sn,15,6,"tbody",0),n.ALo(15,"async"),n.qZA()),2&H){const E=n.oxw();n.xp6(8),n.Q6J("ngIf","24h"===E.miningWindowPreference),n.xp6(3),n.Q6J("ngIf",E.auditAvailable),n.xp6(3),n.Q6J("ngIf",n.lcZ(15,3,E.miningStatsObservable$))}}function ci(H,Lt){1&H&&(n.TgZ(0,"div",8)(1,"div",9)(2,"h5",72),n.SDv(3,73),n.qZA(),n.TgZ(4,"p",74),n._UZ(5,"span",75),n.qZA()(),n.TgZ(6,"div",9)(7,"h5",72),n.SDv(8,76),n.qZA(),n.TgZ(9,"p",74),n._UZ(10,"span",75),n.qZA()(),n.TgZ(11,"div",9)(12,"h5",72),n.SDv(13,77),n.qZA(),n.TgZ(14,"p",74),n._UZ(15,"span",75),n.qZA()()())}let Io=(()=>{class H{constructor(E,pt,Bt,Qt,_e,Ee,Xe,je){this.stateService=E,this.storageService=pt,this.formBuilder=Bt,this.miningService=Qt,this.seoService=_e,this.router=Ee,this.zone=Xe,this.route=je,this.widget=!1,this.auditAvailable=!1,this.indexingAvailable=!1,this.isLoading=!0,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.timespan="",this.chartInstance=void 0,this.dir="ltr"}ngOnInit(){this.widget?this.miningWindowPreference="1w":(this.seoService.setTitle("\u10DB\u10D0\u10D8\u10DC\u10D8\u10DC\u10D2 pool \u10D4\u10D1\u10D8"),this.miningWindowPreference=this.miningService.getDefaultTimespan("24h")),this.radioGroupForm=this.formBuilder.group({dateSpan:this.miningWindowPreference}),this.radioGroupForm.controls.dateSpan.setValue(this.miningWindowPreference),this.indexingAvailable="mempool"===this.stateService.env.BASE_MODULE&&!0===this.stateService.env.MINING_DASHBOARD,this.auditAvailable=this.indexingAvailable&&this.stateService.env.AUDIT,this.route.fragment.subscribe(E=>{["24h","3d","1w","1m","3m","6m","1y","2y","3y","all"].indexOf(E)>-1&&this.radioGroupForm.controls.dateSpan.setValue(E,{emitEvent:!1})}),this.miningStatsObservable$=(0,no.T)(this.radioGroupForm.get("dateSpan").valueChanges.pipe((0,_t.O)(this.radioGroupForm.controls.dateSpan.value),(0,gt.b)(E=>{this.isLoading=!0,this.timespan=E,this.widget||this.storageService.setValue("miningWindowPreference",E),this.miningWindowPreference=E}),(0,mt.w)(()=>this.miningService.getMiningStats(this.miningWindowPreference))),this.stateService.chainTip$.pipe((0,mt.w)(()=>this.miningService.getMiningStats(this.miningWindowPreference)))).pipe((0,yt.U)(E=>(E.minersLuck=(E.blockCount/1008*100).toFixed(2),E)),(0,gt.b)(E=>{this.isLoading=!1,this.prepareChartOptions(E)}),(0,V.B)())}generatePoolsChartSerieData(E){let pt=.5;(0,Nn.tq)()?pt=2:this.widget&&(pt=1);const Bt=[];let Qt=0,_e=0,Ee=0,Xe="20%";return(0,Nn.tq)()&&this.widget?Xe=0:((0,Nn.tq)()&&!this.widget||this.widget)&&(Xe=10),E.pools.forEach(je=>{if(parseFloat(je.share)<pt)return Qt+=parseFloat(je.share),_e+=je.blockCount,void(Ee+=je.lastEstimatedHashrate);Bt.push({itemStyle:{color:En.IA[je.name.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()]},value:je.share,name:je.name+((0,Nn.tq)()||this.widget?"":` (${je.share}%)`),label:{overflow:"none",color:"#b1b1b1",alignTo:"edge",edgeDistance:Xe},tooltip:{show:!(0,Nn.tq)()||!this.widget,backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1"},borderColor:"#000",formatter:()=>{const hr=je.blockCount.toString();return"24h"===this.miningWindowPreference?`<b style="color: white">${je.name} (${je.share}%)</b><br>`+je.lastEstimatedHashrate.toString()+" PH/s<br>"+"" + hr + " blocks":`<b style="color: white">${je.name} (${je.share}%)</b><br>`+"" + hr + " blocks"}},data:je.slug})}),Bt.push({itemStyle:{color:"#6b6b6b"},value:Qt,name:"Other"+((0,Nn.tq)()?"":` (${Qt.toFixed(2)}%)`),label:{overflow:"none",color:"#b1b1b1",alignTo:"edge",edgeDistance:Xe},tooltip:{backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1"},borderColor:"#000",formatter:()=>{const je=Qt.toFixed(2)+"%",hr=_e.toString();return"24h"===this.miningWindowPreference?'<b style="color: white">'+"Other (" + je + ")"+"</b><br>"+Ee.toString()+" PH/s<br>"+"" + hr + " blocks":'<b style="color: white">'+"Other (" + je + ")"+"</b><br>"+"" + hr + " blocks"}},data:9999}),Bt}prepareChartOptions(E){let pt=["20%","80%"];(0,Nn.tq)()&&!this.widget&&(pt=["15%","60%"]),this.chartOptions={animation:!1,color:En.vK.filter(Bt=>"#FDD835"!==Bt),tooltip:{trigger:"item",textStyle:{align:"left"}},series:[{zlevel:0,minShowLabelAngle:1.8,name:"Mining pool",type:"pie",radius:pt,data:this.generatePoolsChartSerieData(E),labelLine:{lineStyle:{width:2}},label:{fontSize:14,formatter:Bt=>`${"Binance Pool"===Bt.name?"Binance\nPool":Bt.name}`},itemStyle:{borderRadius:1,borderWidth:1,borderColor:"#000"},emphasis:{itemStyle:{shadowBlur:40,shadowColor:"rgba(0, 0, 0, 0.75)"},labelLine:{lineStyle:{width:3}}}}]}}onChartInit(E){void 0===this.chartInstance&&(this.chartInstance=E,this.chartInstance.on("click",pt=>{9999!==pt.data.data&&this.zone.run(()=>{const Bt=new q.w(this.stateService).transform(`/mining/pool/${pt.data.data}`);this.router.navigate([Bt])})}))}getEmptyMiningStat(){return{lastEstimatedHashrate:"Error",blockCount:0,totalEmptyBlock:0,totalEmptyBlockRatio:"",pools:[],totalBlockCount:0,miningUnits:{hashrateDivider:1,hashrateUnit:""}}}onSaveChart(){const E=new Date;this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`pools-ranking-${this.timespan}-${Math.round(E.getTime()/1e3)}.svg`),this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}isEllipsisActive(E){return E.offsetWidth<E.scrollWidth}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(K.b),n.Y36(st.V),n.Y36($.QS),n.Y36(at.J),n.Y36(N.v),n.Y36(St.F0),n.Y36(n.R0b),n.Y36(St.gz))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-pool-ranking"]],hostVars:1,hostBindings:function(E,pt){2&E&&n.uIk("dir",pt.dir)},inputs:{widget:"widget"},decls:10,vars:13,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe,je,hr,jr,fn,ei,_i,hn,Wi,Sn,sa,la,ba,Bn,Ra,ho;return Lt="pool \u10D8\u10E1 \u10D8\u10E6\u10D1\u10D0\u10DA\u10D8 (1\u10D9\u10D5.)",E="pool \u10D8\u10E1 \u10D8\u10E6\u10D1\u10D0\u10DA\u10D8",pt="\u10E7\u10D5\u10D4\u10DA\u10D0 \u10DB\u10D0\u10D8\u10DC\u10D8\u10DC\u10D2 Pool-\u10D8\u10E1 \u10E1\u10D0\u10D4\u10E0\u10D7\u10DD \u10D8\u10E6\u10D1\u10D0\u10DA\u10D8 \u10D2\u10D0\u10E1\u10E3\u10DA\u10D8 \u10D9\u10D5\u10D8\u10E0\u10D8\u10E1 \u10D2\u10D0\u10DC\u10DB\u10D0\u10D5\u10DA\u10DD\u10D1\u10D0\u10E8\u10D8. 100%-\u10D6\u10D4 \u10DB\u10D4\u10E2\u10D8 \u10DB\u10D0\u10E9\u10D5\u10D4\u10DC\u10D4\u10D1\u10D4\u10DA\u10D8 \u10DC\u10D8\u10E8\u10DC\u10D0\u10D5\u10E1, \u10E0\u10DD\u10DB \u10DB\u10D8\u10DB\u10D3\u10D8\u10DC\u10D0\u10E0\u10D4 \u10D4\u10DE\u10DD\u10E5\u10D8\u10E1\u10D7\u10D5\u10D8\u10E1 \u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10D8\u10E1 \u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10D3\u10E0\u10DD 10 \u10EC\u10E3\u10D7\u10D6\u10D4 \u10DC\u10D0\u10D9\u10DA\u10D4\u10D1\u10D8 \u10D8\u10E7\u10DD.",Bt="pool \u10D8\u10E1 \u10E0\u10D0\u10DD\u10D3\u10D4\u10DC\u10DD\u10D1\u10D0 (1\u10D9\u10D5.)",Qt="pool \u10D8\u10E1 \u10E0\u10D0\u10DD\u10D3\u10D4\u10DC\u10DD\u10D1\u10D0",_e="\u10E0\u10D0\u10DB\u10D3\u10D4\u10DC\u10DB\u10D0 \u10E3\u10DC\u10D8\u10D9\u10D0\u10DA\u10E3\u10E0\u10DB\u10D0 Pool-\u10DB\u10D0 \u10DB\u10DD\u10D8\u10DE\u10DD\u10D5\u10D0 \u10DB\u10D8\u10DC\u10D8\u10DB\u10E3\u10DB \u10D4\u10E0\u10D7\u10D8 \u10D1\u10DA\u10DD\u10D9\u10D8 \u10D2\u10D0\u10E1\u10E3\u10DA\u10D8 \u10D9\u10D5\u10D8\u10E0\u10D8\u10E1 \u10D2\u10D0\u10DC\u10DB\u10D0\u10D5\u10DA\u10DD\u10D1\u10D0\u10E8\u10D8.",Ee="\u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10D8 (1\u10D9\u10D5)",Xe="\u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10D8 (1\u10D9\u10D5)",je="\u10D2\u10D0\u10E1\u10E3\u10DA\u10D8 \u10D9\u10D5\u10D8\u10E0\u10D8\u10E1 \u10D2\u10D0\u10DC\u10DB\u10D0\u10D5\u10DA\u10DD\u10D1\u10D0\u10E8\u10D8 \u10DB\u10DD\u10DE\u10DD\u10D5\u10D4\u10D1\u10E3\u10DA\u10D8 \u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10D8\u10E1 \u10E0\u10D0\u10DD\u10D3\u10D4\u10DC\u10DD\u10D1\u10D0.",hr="Pools \u10D8\u10E1 \u10E0\u10D4\u10D8\u10E2\u10D8\u10DC\u10D2\u10D8",jr="\u10E7\u10D5\u10D4\u10DA\u10D0",fn="\u10E0\u10D4\u10D8\u10E2\u10D8\u10DC\u10D2\u10D8",ei="Pool",_i="\u10D1\u10DA\u10DD\u10D9\u10D8",hn="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10EF\u10D0\u10DC\u10DB\u10E0\u10D7\u10D4\u10DA\u10DD\u10D1\u10D0",Wi="\u10EA\u10D0\u10E0\u10D8\u10D4\u10DA\u10D8 \u10D1\u10DA\u10DD\u10D9\u10D8",Sn="\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8",sa="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10EF\u10D0\u10DC\u10DB\u10E0\u10D7\u10D4\u10DA\u10DD\u10D1\u10D0",la="\u10E7\u10D5\u10D4\u10DA\u10D0 \u10DB\u10D0\u10D8\u10DC\u10D4\u10E0\u10D8",ba="\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8",Bn="pool \u10D8\u10E1 \u10D2\u10D0\u10DB\u10D0\u10E0\u10D7\u10DA\u10D4\u10D1\u10D0 (1\u10D9\u10D5)",Ra="\u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10D8 (1\u10D9\u10D5)",ho="pool \u10D8\u10E1 \u10E0\u10D0\u10DD\u10D3\u10D4\u10DC\u10DD\u10D1\u10D0 (1\u10D9\u10D5)",[[4,"ngIf"],["class","card-header",4,"ngIf"],[1,"container","pb-lg-0"],["echarts","",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],["class","table table-borderless text-center pools-table",4,"ngIf"],["loadingReward",""],["class","pool-distribution",4,"ngIf","ngIfElse"],[1,"pool-distribution"],[1,"item"],["ngbTooltip",Lt,"placement","bottom",1,"card-title","d-inline-block",3,"disableTooltip"],["minersluck",""],E,["ngbTooltip",pt,"placement","bottom",1,"card-text"],["ngbTooltip",Bt,"placement","bottom",1,"card-title","d-inline-block",3,"disableTooltip"],["poolscount",""],Qt,["ngbTooltip",_e,"placement","bottom",1,"card-text"],["ngbTooltip",Ee,"placement","bottom",1,"card-title","d-inline-block",3,"disableTooltip"],["blockscount",""],Xe,["ngbTooltip",je,"placement","bottom",1,"card-text"],[1,"card-header"],[1,"d-flex","d-md-table-cell","align-items-baseline"],hr,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],["class","formRadioGroup",3,"formGroup",4,"ngIf"],[1,"formRadioGroup",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],["class","btn btn-primary btn-sm",3,"active",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","all","formControlName","dateSpan",3,"value","routerLink"],jr,["type","radio","fragment","24h","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3d","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1w","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"],[1,"table","table-borderless","text-center","pools-table"],[1,"d-none","d-md-table-cell"],fn,[1,""],ei,["class","",4,"ngIf"],_i,["class","health text-right widget","ngbTooltip",hn,"placement","bottom",3,"disableTooltip",4,"ngIf"],Wi,Sn,["ngbTooltip",hn,"placement","bottom",1,"health","text-right","widget",3,"disableTooltip"],["health",""],sa,[4,"ngFor","ngForOf"],[2,"border-top","1px solid #555"],[1,"text-right"],la,["width","25","height","25","onError","this.src = '/resources/mining-pools/default.svg'",3,"src","alt"],[3,"routerLink"],[1,"d-flex","justify-content-center"],["class","health text-right",3,"ngClass",4,"ngIf"],[1,"health","text-right",3,"ngClass"],["class","health-badge badge",3,"badge-success","badge-warning","badge-danger",4,"ngIf","ngIfElse"],["nullHealth",""],[1,"health-badge","badge"],[1,"health-badge","badge","badge-secondary"],ba,[1,"card-title"],Bn,[1,"card-text"],[1,"skeleton-loader","skeleton-loader-big"],Ra,ho]},template:function(E,pt){1&E&&(n.YNc(0,ts,1,0,"app-indexing-progress",0),n.TgZ(1,"div"),n.YNc(2,pa,3,4,"div",0),n.YNc(3,rs,8,6,"div",1),n.TgZ(4,"div",2)(5,"div",3),n.NdJ("chartInit",function(Qt){return pt.onChartInit(Qt)}),n.qZA(),n.YNc(6,jl,2,0,"div",4),n.YNc(7,No,16,5,"table",5),n.qZA()(),n.YNc(8,ci,16,0,"ng-template",null,6,n.W1O)),2&E&&(n.Q6J("ngIf",!pt.widget),n.xp6(1),n.Tol(!1===pt.widget?"full-container":""),n.xp6(1),n.Q6J("ngIf",pt.widget),n.xp6(1),n.Q6J("ngIf",!pt.widget),n.xp6(1),n.Tol(pt.widget?"pb-0":"bottom-padding"),n.xp6(1),n.Tol(pt.widget?"chart-widget":"chart"),n.Q6J("initOpts",pt.chartInitOptions)("options",pt.chartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading),n.xp6(1),n.Q6J("ngIf",!1===pt.widget))},dependencies:[k.mk,k.sg,k.O5,St.rH,St.yS,$._Y,$.Fj,$._,$.JJ,$.JL,$.sg,$.u,ti._L,_.BN,$o.P,j.G,B._w,k.Ov,q.w],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;height:calc(100% - 140px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{height:calc(100% - 190px)}}@media (max-width: 575px){.full-container[_ngcontent-%COMP%]{height:calc(100% - 230px)}}.chart[_ngcontent-%COMP%]{max-height:400px}@media (max-width: 767.98px){.chart[_ngcontent-%COMP%]{max-height:230px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:100%;height:240px}@media (max-width: 485px){.chart-widget[_ngcontent-%COMP%]{max-height:200px}}@media (max-width: 992px){.bottom-padding[_ngcontent-%COMP%]{padding-bottom:65px}}@media (max-width: 576px){.bottom-padding[_ngcontent-%COMP%]{padding-bottom:65px}}@media (max-width: 767.98px){.pools-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .pools-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.3em!important}}.loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}.pool-distribution[_ngcontent-%COMP%]{min-height:56px;display:block}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]{display:flex;flex-direction:row}}.pool-distribution[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:5px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{max-width:160px;width:50%;display:inline-block;margin:0 auto 20px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:2}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:3}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){width:50%;order:3}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){order:2;display:block}}@media (min-width: 768px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:none}}@media (min-width: 992px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:block}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1rem;color:#4a68b9;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:18px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff6;font-size:12px}.skeleton-loader[_ngcontent-%COMP%]{width:100%;display:block;max-width:80px;margin:15px auto 3px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"],changeDetection:0}),H})();const Ji=function(H){return[H]},hl=function(){return["fas","external-link-alt"]},Ro=function(){return["/terms-of-service"]},ia=function(){return["/privacy-policy"]};let Zt=(()=>{class H{constructor(E,pt){this.seoService=E,this.websocketService=pt,this.seoService.setTitle("\u10DB\u10D0\u10D8\u10DC\u10D8\u10DC\u10D2 \u10DB\u10DD\u10DC\u10D0\u10EA\u10D4\u10DB\u10D4\u10D1\u10D8")}ngOnInit(){this.websocketService.want(["blocks","mempool-blocks","stats"])}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(N.v),n.Y36(ya.i))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-mining-dashboard"]],decls:72,vars:48,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe,je,hr;return Lt="\u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D8\u10E1 \u10E1\u10E2\u10D0\u10E2\u10D8\u10E1\u10E2\u10D8\u10D9\u10D0",E="(144 \u10D1\u10DA\u10DD\u10D9\u10D8)",pt="\u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4",Bt="\u10DB\u10D4\u10E2\u10D8\u10E1 \u10DC\u10D0\u10EE\u10D5\u10D0 \xBB",Qt="\u10DB\u10D4\u10E2\u10D8\u10E1 \u10DC\u10D0\u10EE\u10D5\u10D0 \xBB",_e="\u10D1\u10DD\u10DA\u10DD \u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10D8",Ee="\u10EA\u10D5\u10DA\u10D8\u10DA\u10D4\u10D1\u10D4\u10D1\u10D8",Xe="\u1C9B\u10DD\u10DB\u10E1\u10D0\u10EE\u10E3\u10E0\u10D4\u10D1\u10D8\u10E1 \u10DE\u10D8\u10E0\u10DD\u10D1\u10D4\u10D1\u10D8",je="\u1C99\u10DD\u10DC\u10E4\u10D8\u10D3\u10D4\u10DC\u10EA\u10D8\u10D0\u10DA\u10E3\u10E0\u10DD\u10D1\u10D8\u10E1 \u10DE\u10DD\u10DA\u10D8\u10E2\u10D8\u10D9\u10D0",hr="Broadcast Transaction",[[1,"container-xl","dashboard-container"],[1,"row","row-cols-1","row-cols-md-2"],[1,"col"],[1,"main-title"],Lt,[2,"font-size","xx-small"],E,[1,"card-wrapper"],[1,"card"],[1,"card-body","more-padding"],pt,[3,"showTitle","showProgress","showHalving"],[1,"col",2,"margin-bottom","1.47rem"],[1,"card","graph-card"],[1,"card-body","pl-2","pr-2"],[3,"widget"],[1,"mt-1"],[3,"routerLink"],Bt,[1,"card-body","pl-lg-3","pr-lg-3","pl-2","pr-2"],["fragment","1y",3,"routerLink"],Qt,[1,"card-body"],["href","",1,"title-link",3,"routerLink"],[1,"card-title","d-inline"],_e,[2,"vertical-align","text-top","font-size","13px","color","#4a68b9",3,"icon","fixedWidth"],Ee,[1,"pref-selectors"],[1,"selector"],[1,"terms-of-service"],Xe,je,hr]},template:function(E,pt){1&E&&(n._UZ(0,"app-indexing-progress"),n.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"span"),n.SDv(6,4),n.qZA(),n._uU(7,"\xa0 "),n.TgZ(8,"span",5),n.SDv(9,6),n.qZA()(),n.TgZ(10,"div",7)(11,"div",8)(12,"div",9),n._UZ(13,"app-reward-stats"),n.qZA()()()(),n.TgZ(14,"div",2)(15,"div",3),n.SDv(16,10),n.qZA(),n._UZ(17,"app-difficulty-mining",11),n.qZA(),n.TgZ(18,"div",12)(19,"div",13)(20,"div",14),n._UZ(21,"app-pool-ranking",15),n.TgZ(22,"div",16)(23,"a",17),n.SDv(24,18),n.ALo(25,"relativeUrl"),n.qZA()()()()(),n.TgZ(26,"div",12)(27,"div",8)(28,"div",19),n._UZ(29,"app-hashrate-chart",15),n.TgZ(30,"div",16)(31,"a",20),n.SDv(32,21),n.ALo(33,"relativeUrl"),n.qZA()()()()(),n.TgZ(34,"div",2)(35,"div",8)(36,"div",22)(37,"a",23),n.ALo(38,"relativeUrl"),n.TgZ(39,"h5",24),n.SDv(40,25),n.qZA(),n.TgZ(41,"span"),n._uU(42,"\xa0"),n.qZA(),n._UZ(43,"fa-icon",26),n.qZA(),n._UZ(44,"app-blocks-list",15),n.qZA()()(),n.TgZ(45,"div",2)(46,"div",8)(47,"div",22)(48,"a",23),n.ALo(49,"relativeUrl"),n.TgZ(50,"h5",24),n.SDv(51,27),n.qZA(),n.TgZ(52,"span"),n._uU(53,"\xa0"),n.qZA(),n._UZ(54,"fa-icon",26),n.qZA(),n._UZ(55,"app-difficulty-adjustments-table"),n.qZA()()()(),n.TgZ(56,"div",28)(57,"div",29),n._UZ(58,"app-language-selector"),n.qZA(),n.TgZ(59,"div",29),n._UZ(60,"app-fiat-selector"),n.qZA()(),n.TgZ(61,"div",30)(62,"a",17),n.SDv(63,31),n.qZA(),n._uU(64," | "),n.TgZ(65,"a",17),n.SDv(66,32),n.qZA(),n._uU(67," | "),n.TgZ(68,"a",17),n.SDv(69,33),n.ALo(70,"relativeUrl"),n.qZA()(),n._UZ(71,"br"),n.qZA()),2&E&&(n.xp6(5),n.uIk("data-cy","reward-stats"),n.xp6(12),n.Q6J("showTitle",!1)("showProgress",!1)("showHalving",!0),n.uIk("data-cy","difficulty-adjustment"),n.xp6(4),n.Q6J("widget",!0),n.uIk("data-cy","pool-distribution"),n.xp6(2),n.Q6J("routerLink",n.VKq(34,Ji,n.lcZ(25,24,"/graphs/mining/pools"))),n.uIk("data-cy","pool-distribution-view-more"),n.xp6(6),n.Q6J("widget",!0),n.uIk("data-cy","hashrate-graph"),n.xp6(2),n.Q6J("routerLink",n.VKq(36,Ji,n.lcZ(33,26,"/graphs/mining/hashrate-difficulty"))),n.xp6(6),n.Q6J("routerLink",n.VKq(38,Ji,n.lcZ(38,28,"/blocks"))),n.xp6(6),n.Q6J("icon",n.DdM(40,hl))("fixedWidth",!0),n.xp6(1),n.Q6J("widget",!0),n.uIk("data-cy","latest-blocks"),n.xp6(4),n.Q6J("routerLink",n.VKq(41,Ji,n.lcZ(49,30,"/graphs/mining/hashrate-difficulty"))),n.xp6(6),n.Q6J("icon",n.DdM(43,hl))("fixedWidth",!0),n.xp6(1),n.uIk("data-cy","difficulty-adjustments-table"),n.xp6(7),n.Q6J("routerLink",n.DdM(44,Ro)),n.xp6(3),n.Q6J("routerLink",n.DdM(45,ia)),n.xp6(3),n.Q6J("routerLink",n.VKq(46,Ji,n.lcZ(70,32,"/tx/push"))))},dependencies:[St.yS,_.BN,Mn.S,oi.V,Ui,gn,ol.A,$o.P,ra,j.G,Io,Ms,q.w],styles:[".dashboard-container[_ngcontent-%COMP%]{padding-bottom:60px;text-align:center;margin-top:.5rem}@media (min-width: 992px){.dashboard-container[_ngcontent-%COMP%]{padding-bottom:0}}.dashboard-container[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{margin-bottom:1.5rem}.card[_ngcontent-%COMP%]{background-color:#1d1f31}.graph-card[_ngcontent-%COMP%]{height:100%}@media (min-width: 992px){.graph-card[_ngcontent-%COMP%]{height:385px}}.card-title[_ngcontent-%COMP%]{font-size:1rem;color:#4a68b9}.card-title[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#4a68b9}.card-body.pool-ranking[_ngcontent-%COMP%]{padding:1.25rem .25rem .75rem}#blockchain-container[_ngcontent-%COMP%]{position:relative;overflow-x:scroll;overflow-y:hidden;scrollbar-width:none;-ms-overflow-style:none}#blockchain-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.fade-border[_ngcontent-%COMP%]{-webkit-mask-image:linear-gradient(to right,transparent 0%,black 10%,black 80%,transparent 100%)}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.more-padding[_ngcontent-%COMP%]{padding:24px 20px!important}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto!important}.card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;flex:inherit;text-align:center;flex-direction:column;justify-content:space-around;padding:22px 20px}.skeleton-loader[_ngcontent-%COMP%]{width:100%;display:block}.skeleton-loader[_ngcontent-%COMP%]:first-child{max-width:90px;margin:15px auto 3px}.skeleton-loader[_ngcontent-%COMP%]:last-child{margin:10px auto 3px;max-width:55px}.card-text[_ngcontent-%COMP%]{font-size:22px}.title-link[_ngcontent-%COMP%], .title-link[_ngcontent-%COMP%]:hover, .title-link[_ngcontent-%COMP%]:focus, .title-link[_ngcontent-%COMP%]:active{display:block;margin-bottom:10px;text-decoration:none;color:inherit}.terms-of-service[_ngcontent-%COMP%]{margin-top:1rem}.pref-selectors[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}.pref-selectors[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]{margin-left:.5em;margin-bottom:.5em}.pref-selectors[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]:first{margin-left:0}"],changeDetection:0}),H})();var Ht=D(1884),Rt=D(8493),Vt=D(8454),Yt=D(9816);function se(H,Lt){if(1&H&&(n.TgZ(0,"td",24)(1,"div",25),n._uU(2),n.qZA()()),2&H){const E=n.oxw(2).ngIf;n.xp6(2),n.Oqu(E.pool.regexes)}}function ve(H,Lt){if(1&H&&(n.TgZ(0,"tr",20)(1,"td",21),n.SDv(2,22),n.qZA(),n.YNc(3,se,3,1,"td",23),n.qZA()),2&H){const E=n.oxw().ngIf;n.oxw();const pt=n.MAs(5);n.xp6(3),n.Q6J("ngIf",E.pool.regexes.length)("ngIfElse",pt)}}function He(H,Lt){if(1&H&&(n.TgZ(0,"div",29),n._uU(1),n.qZA()),2&H){const E=n.oxw(2).ngIf;n.xp6(1),n.hij(" ",E.pool.regexes," ")}}function ze(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",26)(2,"span",21),n.SDv(3,27),n.qZA(),n.YNc(4,He,2,1,"div",28),n.qZA()()),2&H){const E=n.oxw().ngIf;n.oxw();const pt=n.MAs(7);n.xp6(4),n.Q6J("ngIf",E.pool.regexes.length)("ngIfElse",pt)}}const qe=function(H,Lt){return[H,Lt]};function yr(H,Lt){if(1&H&&(n.TgZ(0,"a",34),n.ALo(1,"relativeUrl"),n._uU(2),n._UZ(3,"br"),n.qZA()),2&H){const E=Lt.$implicit;n.Q6J("routerLink",n.WLB(4,qe,n.lcZ(1,2,"/address"),E)),n.xp6(2),n.Oqu(E)}}function fe(H,Lt){if(1&H&&(n.TgZ(0,"div")(1,"span"),n.SDv(2,40),n.qZA(),n._uU(3),n.qZA()),2&H){const E=n.oxw(4).ngIf;n.xp6(3),n.hij(" (",E.pool.addresses.length,") ")}}function Me(H,Lt){1&H&&(n.TgZ(0,"span"),n.SDv(1,41),n.qZA())}function Ce(H,Lt){if(1&H){const E=n.EpF();n.TgZ(0,"button",39),n.NdJ("click",function(){n.CHM(E),n.oxw();const Bt=n.MAs(6);return n.KtG(Bt.toggle())}),n.YNc(1,fe,4,1,"div",18),n.YNc(2,Me,2,0,"span",18),n.qZA()}if(2&H){const E=n.oxw(4);n.uIk("aria-expanded",!E.gfg),n.xp6(1),n.Q6J("ngIf",E.gfg),n.xp6(1),n.Q6J("ngIf",!E.gfg)}}function Ie(H,Lt){if(1&H){const E=n.EpF();n.TgZ(0,"td",33)(1,"a",34),n.ALo(2,"relativeUrl"),n._uU(3),n.qZA(),n.TgZ(4,"div")(5,"div",35,36),n.NdJ("ngbCollapseChange",function(Bt){n.CHM(E);const Qt=n.oxw(3);return n.KtG(Qt.gfg=Bt)}),n.YNc(7,yr,4,7,"a",37),n.ALo(8,"slice"),n.qZA(),n.YNc(9,Ce,3,3,"button",38),n.qZA()()}if(2&H){const E=n.oxw(2).ngIf,pt=n.oxw();n.xp6(1),n.Q6J("routerLink",n.WLB(10,qe,n.lcZ(2,5,"/address"),E.pool.addresses[0])),n.xp6(2),n.hij(" ",E.pool.addresses[0]," "),n.xp6(2),n.Q6J("ngbCollapse",pt.gfg),n.xp6(2),n.Q6J("ngForOf",n.xi3(8,7,E.pool.addresses,1)),n.xp6(2),n.Q6J("ngIf",E.pool.addresses.length>=2)}}function Ue(H,Lt){if(1&H&&(n.TgZ(0,"tr",20)(1,"td",30),n.SDv(2,31),n.qZA(),n.YNc(3,Ie,10,13,"td",32),n.qZA()),2&H){const E=n.oxw().ngIf;n.oxw();const pt=n.MAs(5);n.xp6(3),n.Q6J("ngIf",E.pool.addresses.length)("ngIfElse",pt)}}function ir(H,Lt){if(1&H){const E=n.EpF();n.TgZ(0,"button",45),n.NdJ("click",function(){n.CHM(E),n.oxw();const Bt=n.MAs(7);return n.KtG(Bt.toggle())}),n.TgZ(1,"span"),n.SDv(2,46),n.qZA(),n._uU(3),n.qZA()}if(2&H){const E=n.oxw(3).ngIf,pt=n.oxw();n.uIk("aria-expanded",!pt.gfg),n.xp6(3),n.hij(" (",E.pool.addresses.length,") ")}}function cr(H,Lt){if(1&H&&(n.TgZ(0,"a",34),n.ALo(1,"relativeUrl"),n._uU(2),n.ALo(3,"shortenString"),n._UZ(4,"br"),n.qZA()),2&H){const E=Lt.$implicit;n.Q6J("routerLink",n.WLB(7,qe,n.lcZ(1,2,"/address"),E)),n.xp6(2),n.Oqu(n.xi3(3,4,E,30))}}function xr(H,Lt){if(1&H){const E=n.EpF();n.TgZ(0,"div"),n.YNc(1,ir,4,2,"button",43),n.TgZ(2,"a",34),n.ALo(3,"relativeUrl"),n._uU(4),n.ALo(5,"shortenString"),n.qZA(),n.TgZ(6,"div",44,36),n.NdJ("ngbCollapseChange",function(Bt){n.CHM(E);const Qt=n.oxw(3);return n.KtG(Qt.gfg=Bt)}),n.YNc(8,cr,5,10,"a",37),n.ALo(9,"slice"),n.qZA()()}if(2&H){const E=n.oxw(2).ngIf,pt=n.oxw();n.xp6(1),n.Q6J("ngIf",E.pool.addresses.length>=2),n.xp6(1),n.Q6J("routerLink",n.WLB(13,qe,n.lcZ(3,5,"/address"),E.pool.addresses[0])),n.xp6(2),n.hij(" ",n.xi3(5,7,E.pool.addresses[0],30)," "),n.xp6(2),n.Q6J("ngbCollapse",pt.gfg),n.xp6(2),n.Q6J("ngForOf",n.xi3(9,10,E.pool.addresses,1))}}function br(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",26)(2,"span",21),n.SDv(3,42),n.qZA(),n.YNc(4,xr,10,16,"div",1),n.qZA()()),2&H){const E=n.oxw().ngIf;n.oxw();const pt=n.MAs(7);n.xp6(4),n.Q6J("ngIf",E.pool.addresses.length)("ngIfElse",pt)}}function Jr(H,Lt){1&H&&(n.TgZ(0,"th",49),n.SDv(1,56),n.qZA())}function _n(H,Lt){if(1&H&&(n.TgZ(0,"span",59),n._uU(1),n.qZA()),2&H){const E=n.oxw(3).ngIf;n.ekj("badge-success",E.avgBlockHealth>=99)("badge-warning",E.avgBlockHealth>=75&&E.avgBlockHealth<99)("badge-danger",E.avgBlockHealth<75),n.xp6(1),n.hij("",E.avgBlockHealth,"%")}}function on(H,Lt){1&H&&(n.TgZ(0,"span",60),n.SDv(1,61),n.qZA())}function Gn(H,Lt){if(1&H&&(n.TgZ(0,"td",53),n.YNc(1,_n,2,7,"span",57),n.YNc(2,on,2,0,"ng-template",null,58,n.W1O),n.qZA()),2&H){const E=n.MAs(3),pt=n.oxw(2).ngIf;n.xp6(1),n.Q6J("ngIf",null!=pt.avgBlockHealth)("ngIfElse",E)}}function Hi(H,Lt){if(1&H&&(n.TgZ(0,"tr",20)(1,"td",47)(2,"table",48)(3,"thead")(4,"tr")(5,"th",49),n.SDv(6,50),n.qZA(),n.TgZ(7,"th",49),n.SDv(8,51),n.qZA(),n.YNc(9,Jr,2,0,"th",52),n.qZA()(),n.TgZ(10,"tbody")(11,"td",53),n._UZ(12,"app-amount",54),n.qZA(),n.TgZ(13,"td",53),n._uU(14),n.ALo(15,"amountShortener"),n.qZA(),n.YNc(16,Gn,4,2,"td",55),n.qZA()()()()),2&H){const E=n.oxw().ngIf,pt=n.oxw(),Bt=n.MAs(18);n.xp6(9),n.Q6J("ngIf",pt.auditAvailable),n.xp6(3),n.Q6J("radiowavesoshis",E.totalReward)("noFiat",!0),n.xp6(2),n.Oqu(n.Dn7(15,6,E.estimatedHashrate,1,"H/s")),n.xp6(2),n.Q6J("ngIf",pt.auditAvailable)("ngIfElse",Bt)}}function jn(H,Lt){1&H&&(n.TgZ(0,"th",49),n.SDv(1,64),n.qZA())}function bn(H,Lt){if(1&H&&(n.TgZ(0,"span",59),n._uU(1),n.qZA()),2&H){const E=n.oxw(3).ngIf;n.ekj("badge-success",E.avgBlockHealth>=99)("badge-warning",E.avgBlockHealth>=75&&E.avgBlockHealth<99)("badge-danger",E.avgBlockHealth<75),n.xp6(1),n.hij("",E.avgBlockHealth,"%")}}function $a(H,Lt){1&H&&(n.TgZ(0,"span",60),n.SDv(1,65),n.qZA())}function ql(H,Lt){if(1&H&&(n.TgZ(0,"td",53),n.YNc(1,bn,2,7,"span",57),n.YNc(2,$a,2,0,"ng-template",null,58,n.W1O),n.qZA()),2&H){const E=n.MAs(3),pt=n.oxw(2).ngIf;n.xp6(1),n.Q6J("ngIf",null!=pt.avgBlockHealth)("ngIfElse",E)}}function Ns(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",26)(2,"table",48)(3,"thead")(4,"tr")(5,"th",49),n.SDv(6,62),n.qZA(),n.TgZ(7,"th",49),n.SDv(8,63),n.qZA(),n.YNc(9,jn,2,0,"th",52),n.qZA()(),n.TgZ(10,"tbody")(11,"td",53),n._UZ(12,"app-amount",54),n.qZA(),n.TgZ(13,"td",53),n._uU(14),n.ALo(15,"amountShortener"),n.qZA(),n.YNc(16,ql,4,2,"td",55),n.qZA()()()()),2&H){const E=n.oxw().ngIf,pt=n.oxw(),Bt=n.MAs(18);n.xp6(9),n.Q6J("ngIf",pt.auditAvailable),n.xp6(3),n.Q6J("radiowavesoshis",E.totalReward)("noFiat",!0),n.xp6(2),n.Oqu(n.Dn7(15,6,E.estimatedHashrate,1,"H/s")),n.xp6(2),n.Q6J("ngIf",pt.auditAvailable)("ngIfElse",Bt)}}function Ta(H,Lt){if(1&H&&(n.TgZ(0,"tr",20)(1,"td",47)(2,"table",48)(3,"thead")(4,"tr")(5,"th",49),n.SDv(6,66),n.qZA(),n.TgZ(7,"th",49),n.SDv(8,67),n.qZA(),n.TgZ(9,"th",49),n.SDv(10,68),n.qZA()()(),n.TgZ(11,"tbody")(12,"td",53),n._uU(13),n.qZA(),n.TgZ(14,"td",53),n._uU(15),n.qZA(),n.TgZ(16,"td",53),n._uU(17),n.qZA()()()()()),2&H){const E=n.oxw().ngIf,pt=n.oxw();n.xp6(13),n.AsE("",pt.formatNumber(E.blockCount["24h"],pt.locale,"1.0-0")," (",pt.formatNumber(100*E.blockShare["24h"],pt.locale,"1.0-0"),"%)"),n.xp6(2),n.AsE("",pt.formatNumber(E.blockCount["1w"],pt.locale,"1.0-0")," (",pt.formatNumber(100*E.blockShare["1w"],pt.locale,"1.0-0"),"%)"),n.xp6(2),n.AsE("",pt.formatNumber(E.blockCount.all,pt.locale,"1.0-0")," (",pt.formatNumber(100*E.blockShare.all,pt.locale,"1.0-0"),"%)")}}function zu(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",26)(2,"table",48)(3,"thead")(4,"tr")(5,"th",49),n.SDv(6,69),n.qZA(),n.TgZ(7,"th",49),n.SDv(8,70),n.qZA(),n.TgZ(9,"th",49),n.SDv(10,71),n.qZA()()(),n.TgZ(11,"tbody")(12,"td",53),n._uU(13),n.qZA(),n.TgZ(14,"td",53),n._uU(15),n.qZA(),n.TgZ(16,"td",53),n._uU(17),n.qZA()()()()()),2&H){const E=n.oxw().ngIf,pt=n.oxw();n.xp6(13),n.AsE("",pt.formatNumber(E.blockCount["24h"],pt.locale,"1.0-0")," (",pt.formatNumber(100*E.blockShare["24h"],pt.locale,"1.0-0"),"%)"),n.xp6(2),n.AsE("",pt.formatNumber(E.blockCount["1w"],pt.locale,"1.0-0")," (",pt.formatNumber(100*E.blockShare["1w"],pt.locale,"1.0-0"),"%)"),n.xp6(2),n.AsE("",pt.formatNumber(E.blockCount.all,pt.locale,"1.0-0")," (",pt.formatNumber(100*E.blockShare.all,pt.locale,"1.0-0"),"%)")}}function Uu(H,Lt){if(1&H&&(n.TgZ(0,"div")(1,"div",10),n._UZ(2,"img",11),n.TgZ(3,"h1",12),n._uU(4),n.qZA()(),n.TgZ(5,"div",13)(6,"div",14)(7,"div",15)(8,"table",16)(9,"tbody"),n.YNc(10,ve,4,2,"tr",17),n.YNc(11,ze,5,2,"tr",18),n.YNc(12,Ue,4,2,"tr",17),n.YNc(13,br,5,2,"tr",18),n.qZA()()(),n.TgZ(14,"div",15)(15,"table",19)(16,"tbody"),n.YNc(17,Hi,17,10,"tr",17),n.YNc(18,Ns,17,10,"tr",18),n.YNc(19,Ta,18,6,"tr",17),n.YNc(20,zu,18,6,"tr",18),n.qZA()()()()()()),2&H){const E=Lt.ngIf,pt=n.oxw();n.xp6(2),n.s9C("src",E.logo,n.LSH),n.Q6J("alt",E.pool.name+" mining pool logo"),n.xp6(2),n.Oqu(E.pool.name),n.xp6(6),n.Q6J("ngIf",!pt.isMobile()),n.xp6(1),n.Q6J("ngIf",pt.isMobile()),n.xp6(1),n.Q6J("ngIf",!pt.isMobile()),n.xp6(1),n.Q6J("ngIf",pt.isMobile()),n.xp6(4),n.Q6J("ngIf",!pt.isMobile()),n.xp6(1),n.Q6J("ngIf",pt.isMobile()),n.xp6(1),n.Q6J("ngIf",!pt.isMobile()),n.xp6(1),n.Q6J("ngIf",pt.isMobile())}}function eh(H,Lt){1&H&&(n.TgZ(0,"td",72),n._uU(1,"~"),n.qZA())}function Ti(H,Lt){1&H&&(n.TgZ(0,"div"),n._uU(1,"~"),n.qZA())}function Pi(H,Lt){1&H&&(n.TgZ(0,"div",73),n._UZ(1,"div",74),n.qZA())}function Ep(H,Lt){1&H&&(n.TgZ(0,"th",92),n.SDv(1,93),n.qZA())}function wp(H,Lt){1&H&&(n.TgZ(0,"th",94),n.SDv(1,95),n.qZA())}function tu(H,Lt){if(1&H&&(n.TgZ(0,"thead")(1,"th",76),n.SDv(2,77),n.qZA(),n.TgZ(3,"th",78),n.SDv(4,79),n.qZA(),n.TgZ(5,"th",80),n.SDv(6,81),n.qZA(),n.TgZ(7,"th",82),n.SDv(8,83),n.qZA(),n.YNc(9,Ep,2,0,"th",84),n.TgZ(10,"th",85),n.SDv(11,86),n.qZA(),n.YNc(12,wp,2,0,"th",87),n.TgZ(13,"th",88),n.SDv(14,89),n.qZA(),n.TgZ(15,"th",90),n.SDv(16,91),n.qZA()()),2&H){const E=n.oxw(2);n.xp6(9),n.Q6J("ngIf",E.auditAvailable),n.xp6(3),n.Q6J("ngIf",!E.auditAvailable)}}const rh=function(H){return{block:H}},vg=function(H){return{data:H}};function bf(H,Lt){if(1&H&&(n.TgZ(0,"a",105),n.ALo(1,"relativeUrl"),n._uU(2),n.qZA()),2&H){const E=n.oxw(2).$implicit;n.ekj("badge-success",E.extras.matchRate>=99)("badge-warning",E.extras.matchRate>=75&&E.extras.matchRate<99)("badge-danger",E.extras.matchRate<75),n.Q6J("routerLink",null!=E.extras.matchRate?n.WLB(11,qe,n.lcZ(1,9,"/block/"),E.id):null)("state",n.VKq(16,vg,n.VKq(14,rh,E))),n.xp6(2),n.hij("",E.extras.matchRate,"%")}}function Pf(H,Lt){1&H&&(n.TgZ(0,"span",60),n.SDv(1,106),n.qZA())}function nh(H,Lt){if(1&H&&(n.TgZ(0,"td",92),n.YNc(1,bf,3,18,"a",104),n.YNc(2,Pf,2,0,"ng-template",null,58,n.W1O),n.qZA()),2&H){const E=n.MAs(3),pt=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf",null!=pt.extras.matchRate)("ngIfElse",E)}}function Dp(H,Lt){if(1&H&&(n.TgZ(0,"td",94),n._UZ(1,"app-amount",100),n.qZA()),2&H){const E=n.oxw().$implicit;n.xp6(1),n.Q6J("radiowavesoshis",E.extras.totalFees)("noFiat",!0)}}const Lp=function(H){return{width:H}};function eu(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",76)(2,"a",96),n.ALo(3,"relativeUrl"),n._uU(4),n.qZA()(),n.TgZ(5,"td",78),n._uU(6),n.ALo(7,"date"),n.qZA(),n.TgZ(8,"td",80),n._UZ(9,"app-time",97),n.qZA(),n.TgZ(10,"td",98)(11,"span",99),n._uU(12),n.ALo(13,"hex2ascii"),n.qZA()(),n.YNc(14,nh,4,2,"td",84),n.TgZ(15,"td",85),n._UZ(16,"app-amount",100),n.qZA(),n.YNc(17,Dp,2,2,"td",87),n.TgZ(18,"td",88),n._uU(19),n.ALo(20,"number"),n.qZA(),n.TgZ(21,"td",90)(22,"div",101),n._UZ(23,"div",102)(24,"div",103),n.ALo(25,"bytes"),n.qZA()()()),2&H){const E=Lt.$implicit,pt=n.oxw(2);n.xp6(2),n.Q6J("routerLink",n.WLB(25,qe,n.lcZ(3,13,"/block"),E.id)),n.xp6(2),n.Oqu(E.height),n.xp6(2),n.hij(" \u200e",n.xi3(7,15,1e3*E.timestamp,"yyyy-MM-dd HH:mm")," "),n.xp6(3),n.Q6J("time",E.timestamp)("fastRender",!0),n.xp6(3),n.hij(" ",n.lcZ(13,18,E.extras.coinbaseRaw)," "),n.xp6(2),n.Q6J("ngIf",pt.auditAvailable),n.xp6(2),n.Q6J("radiowavesoshis",E.extras.reward)("noFiat",!0),n.xp6(1),n.Q6J("ngIf",!pt.auditAvailable),n.xp6(2),n.hij(" ",n.lcZ(20,20,E.tx_count)," "),n.xp6(4),n.Q6J("ngStyle",n.VKq(28,Lp,E.weight/pt.stateService.env.BLOCK_WEIGHT_UNITS*100+"%")),n.xp6(1),n.Q6J("innerHTML",n.xi3(25,22,E.size,2),n.oJD)}}function Np(H,Lt){if(1&H&&(n.ynx(0),n.YNc(1,tu,17,2,"thead",18),n.TgZ(2,"tbody"),n.YNc(3,eu,26,30,"tr",75),n.qZA(),n.BQk()),2&H){const E=Lt.ngIf,pt=n.oxw();n.xp6(1),n.Q6J("ngIf",E.length>0),n.xp6(1),n.Akn(pt.isLoading?"opacity: 0.75":""),n.xp6(1),n.Q6J("ngForOf",E)("ngForTrackBy",pt.trackByBlock)}}function Af(H,Lt){1&H&&(n.TgZ(0,"tr")(1,"td",76),n._UZ(2,"span",116),n.qZA(),n.TgZ(3,"td",78),n._UZ(4,"span",116),n.qZA(),n.TgZ(5,"td",80),n._UZ(6,"span",116),n.qZA(),n.TgZ(7,"td",98),n._UZ(8,"span",116),n.qZA(),n.TgZ(9,"td",85),n._UZ(10,"span",116),n.qZA(),n.TgZ(11,"td",94),n._UZ(12,"span",116),n.qZA(),n.TgZ(13,"td",88),n._UZ(14,"span",116),n.qZA(),n.TgZ(15,"td",117),n._UZ(16,"span",116),n.qZA()())}const Is=function(){return[1,2,3,4,5]};function ih(H,Lt){1&H&&(n.TgZ(0,"thead")(1,"th",76),n.SDv(2,107),n.qZA(),n.TgZ(3,"th",78),n.SDv(4,108),n.qZA(),n.TgZ(5,"th",80),n.SDv(6,109),n.qZA(),n.TgZ(7,"th",82),n.SDv(8,110),n.qZA(),n.TgZ(9,"th",85),n.SDv(10,111),n.qZA(),n.TgZ(11,"th",94),n.SDv(12,112),n.qZA(),n.TgZ(13,"th",88),n.SDv(14,113),n.qZA(),n.TgZ(15,"th",90),n.SDv(16,114),n.qZA()(),n.TgZ(17,"tbody"),n.YNc(18,Af,17,0,"tr",115),n.qZA()),2&H&&(n.xp6(18),n.Q6J("ngForOf",n.DdM(1,Is)))}function Ai(H,Lt){1&H&&(n.TgZ(0,"tr",20)(1,"td",21),n.SDv(2,121),n.qZA(),n.TgZ(3,"td",24),n._UZ(4,"div",116),n.qZA()())}function Of(H,Lt){1&H&&(n.TgZ(0,"tr")(1,"td",26)(2,"span",21),n.SDv(3,122),n.qZA(),n.TgZ(4,"div",29),n._UZ(5,"div",116),n.qZA()()())}function In(H,Lt){if(1&H){const E=n.EpF();n.TgZ(0,"tr",20)(1,"td",21),n.SDv(2,123),n.qZA(),n.TgZ(3,"td",24),n._UZ(4,"div",116),n.TgZ(5,"div",35,36),n.NdJ("ngbCollapseChange",function(Bt){n.CHM(E);const Qt=n.oxw(2);return n.KtG(Qt.gfg=Bt)}),n._UZ(7,"div",116),n.qZA()()()}if(2&H){const E=n.oxw(2);n.xp6(5),n.Q6J("ngbCollapse",E.gfg)}}function Ur(H,Lt){if(1&H){const E=n.EpF();n.TgZ(0,"tr")(1,"td",26)(2,"span",21),n.SDv(3,124),n.qZA(),n.TgZ(4,"div"),n._UZ(5,"div",116),n.TgZ(6,"div",44,36),n.NdJ("ngbCollapseChange",function(Bt){n.CHM(E);const Qt=n.oxw(2);return n.KtG(Qt.gfg=Bt)}),n._UZ(8,"div",116),n.qZA()()()()}if(2&H){const E=n.oxw(2);n.xp6(6),n.Q6J("ngbCollapse",E.gfg)}}function Hu(H,Lt){1&H&&(n.TgZ(0,"th",49),n.SDv(1,130),n.qZA())}function ah(H,Lt){1&H&&(n.TgZ(0,"td",53),n._UZ(1,"div",128),n.qZA())}function Ef(H,Lt){if(1&H&&(n.TgZ(0,"tr",20)(1,"td",47)(2,"table",125)(3,"thead")(4,"tr")(5,"th",49),n.SDv(6,126),n.qZA(),n.TgZ(7,"th",49),n.SDv(8,127),n.qZA(),n.YNc(9,Hu,2,0,"th",52),n.qZA()(),n.TgZ(10,"tbody")(11,"td",53),n._UZ(12,"div",128),n.qZA(),n.TgZ(13,"td",53),n._UZ(14,"div",128),n.qZA(),n.YNc(15,ah,2,0,"td",129),n.qZA()()()()),2&H){const E=n.oxw(2);n.xp6(9),n.Q6J("ngIf",E.auditAvailable),n.xp6(6),n.Q6J("ngIf",E.auditAvailable)}}function wf(H,Lt){1&H&&(n.TgZ(0,"th",49),n.SDv(1,133),n.qZA())}function Xa(H,Lt){1&H&&(n.TgZ(0,"td",53),n._UZ(1,"div",128),n.qZA())}function Ip(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",26)(2,"table",125)(3,"thead")(4,"tr")(5,"th",49),n.SDv(6,131),n.qZA(),n.TgZ(7,"th",49),n.SDv(8,132),n.qZA(),n.YNc(9,wf,2,0,"th",52),n.qZA()(),n.TgZ(10,"tbody")(11,"td",53),n._UZ(12,"div",128),n.qZA(),n.TgZ(13,"td",53),n._UZ(14,"div",128),n.qZA(),n.YNc(15,Xa,2,0,"td",129),n.qZA()()()()),2&H){const E=n.oxw(2);n.xp6(9),n.Q6J("ngIf",E.auditAvailable),n.xp6(6),n.Q6J("ngIf",E.auditAvailable)}}function Df(H,Lt){1&H&&(n.TgZ(0,"tr",20)(1,"td",47)(2,"table",125)(3,"thead")(4,"tr")(5,"th",49),n.SDv(6,134),n.qZA(),n.TgZ(7,"th",49),n.SDv(8,135),n.qZA(),n.TgZ(9,"th",49),n.SDv(10,136),n.qZA()()(),n.TgZ(11,"tbody")(12,"td",53),n._UZ(13,"div",128),n.qZA(),n.TgZ(14,"td",53),n._UZ(15,"div",128),n.qZA(),n.TgZ(16,"td",53),n._UZ(17,"div",128),n.qZA()()()()())}function oh(H,Lt){1&H&&(n.TgZ(0,"tr")(1,"td",26)(2,"table",125)(3,"thead")(4,"tr")(5,"th",49),n.SDv(6,137),n.qZA(),n.TgZ(7,"th",49),n.SDv(8,138),n.qZA(),n.TgZ(9,"th",49),n.SDv(10,139),n.qZA()()(),n.TgZ(11,"tbody")(12,"td",53),n._UZ(13,"div",128),n.qZA(),n.TgZ(14,"td",53),n._UZ(15,"div",128),n.qZA(),n.TgZ(16,"td",53),n._UZ(17,"div",128),n.qZA()()()()())}function Lf(H,Lt){if(1&H&&(n.TgZ(0,"div")(1,"div",118),n._UZ(2,"div",119),n.TgZ(3,"h1",12),n._UZ(4,"div",120),n.qZA()(),n.TgZ(5,"div",13)(6,"div",14)(7,"div",15)(8,"table",16)(9,"tbody"),n.YNc(10,Ai,5,0,"tr",17),n.YNc(11,Of,6,0,"tr",18),n.YNc(12,In,8,1,"tr",17),n.YNc(13,Ur,9,1,"tr",18),n.qZA()()(),n.TgZ(14,"div",15)(15,"table",19)(16,"tbody"),n.YNc(17,Ef,16,2,"tr",17),n.YNc(18,Ip,16,2,"tr",18),n.YNc(19,Df,18,0,"tr",17),n.YNc(20,oh,18,0,"tr",18),n.qZA()()()()()()),2&H){const E=n.oxw();n.xp6(10),n.Q6J("ngIf",!E.isMobile()),n.xp6(1),n.Q6J("ngIf",E.isMobile()),n.xp6(1),n.Q6J("ngIf",!E.isMobile()),n.xp6(1),n.Q6J("ngIf",E.isMobile()),n.xp6(4),n.Q6J("ngIf",!E.isMobile()),n.xp6(1),n.Q6J("ngIf",E.isMobile()),n.xp6(1),n.Q6J("ngIf",!E.isMobile()),n.xp6(1),n.Q6J("ngIf",E.isMobile())}}function sh(H,Lt){1&H&&n._UZ(0,"td",53)}let Rs=(()=>{class H{constructor(E,pt,Bt,Qt,_e){this.locale=E,this.apiService=pt,this.route=Bt,this.stateService=Qt,this.seoService=_e,this.right=45,this.left=75,this.gfg=!0,this.formatNumber=k.uf,this.isLoading=!0,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.blocks=[],this.slug=void 0,this.auditAvailable=!1,this.loadMoreSubject=new xi.X(this.blocks[this.blocks.length-1]?.height),this.auditAvailable=this.stateService.env.AUDIT}ngOnInit(){this.poolStats$=this.route.params.pipe((0,yt.U)(E=>E.slug)).pipe((0,mt.w)(E=>(this.isLoading=!0,this.slug=E,this.apiService.getPoolHashrate$(this.slug).pipe((0,mt.w)(pt=>(this.isLoading=!1,this.prepareChartOptions(pt.map(Bt=>[1e3*Bt.timestamp,Bt.avgHashrate])),[E]))))),(0,mt.w)(E=>this.apiService.getPoolStats$(E)),(0,gt.b)(()=>{this.loadMoreSubject.next(this.blocks[this.blocks.length-1]?.height)}),(0,yt.U)(E=>{this.seoService.setTitle(E.pool.name);let pt='"';for(const Bt of E.pool.regexes)pt+=Bt+'", "';return E.pool.regexes=pt.slice(0,-3),Object.assign({logo:"/resources/mining-pools/"+E.pool.name.toLowerCase().replace(" ","").replace(".","")+".svg"},E)})),this.blocks$=this.loadMoreSubject.pipe((0,Ht.x)(),(0,mt.w)(E=>void 0===this.slug?[]:this.apiService.getPoolBlocks$(this.slug,this.blocks[this.blocks.length-1]?.height)),(0,gt.b)(E=>{this.blocks=this.blocks.concat(E)}),(0,yt.U)(()=>this.blocks),(0,V.B)())}prepareChartOptions(E){let pt;0===E.length&&(pt={textStyle:{color:"grey",fontSize:15},text:"\u10D1\u10DA\u10DD\u10D9\u10D8\u10E1 \u10D8\u10DC\u10D3\u10D4\u10E5\u10E1\u10D8\u10E0\u10D4\u10D1\u10D0",left:"center",top:"center"}),this.chartOptions={title:pt,animation:!1,color:[new Se.graphic.LinearGradient(0,0,0,.65,[{offset:0,color:"#F4511E"},{offset:.25,color:"#FB8C00"},{offset:.5,color:"#FFB300"},{offset:.75,color:"#FDD835"},{offset:1,color:"#7CB342"}]),"#D81B60"],grid:{right:this.right,left:this.left,bottom:60},tooltip:{show:!this.isMobile(),trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:function(Bt){let Qt=(0,ot.hD)(1),_e=Bt[0].data[1];return this.isMobile()&&(Qt=(0,ot.hD)(Bt[0].data[1]),_e=Math.round(Bt[0].data[1]/Qt.divider)),`\n            <b style="color: white; margin-left: 18px">${Bt[0].axisValueLabel}</b><br>\n            <span>${Bt[0].marker} ${Bt[0].seriesName}: ${(0,k.uf)(_e,this.locale,"1.0-0")} ${Qt.unit}H/s</span><br>\n          `}.bind(this)},xAxis:0===E.length?void 0:{type:"time",splitNumber:this.isMobile()?5:10,axisLabel:{hideOverlap:!0}},yAxis:0===E.length?void 0:[{min:Bt=>.9*Bt.min,type:"value",axisLabel:{color:"rgb(110, 112, 121)",formatter:Bt=>{const Qt=(0,ot.hD)(Bt);return`${Math.round(Bt/Qt.divider)} ${Qt.unit}H/s`}},splitLine:{show:!1}}],series:0===E.length?void 0:[{zlevel:0,name:"Hashrate",showSymbol:!1,symbol:"none",data:E,type:"line",lineStyle:{width:2}}],dataZoom:0===E.length?void 0:[{type:"inside",realtime:!0,zoomLock:!0,maxSpan:100,minSpan:10,moveOnMouseMove:!1},{fillerColor:"#aaaaff15",borderColor:"#ffffff88",showDetail:!1,show:!0,type:"slider",brushSelect:!1,realtime:!0,bottom:0,left:20,right:15,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}]}}isMobile(){return window.innerWidth<=767.98}loadMore(){this.loadMoreSubject.next(this.blocks[this.blocks.length-1]?.height)}trackByBlock(E,pt){return pt.height}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36(et.s),n.Y36(St.gz),n.Y36(K.b),n.Y36(N.v))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-pool"]],inputs:{right:"right",left:"left"},decls:19,vars:15,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe,je,hr,jr,fn,ei,_i,hn,Wi,Sn,sa,la,ba,Bn,Ra,ho,Yn,zs,gs,Zn,Cl,mc,Nh,yc,gu,Ih,xc,Rh,Bh,Gh,Sc,Fo,Zh,Fh,kh,Ml,Tc,zh,Uh,_s,bl,Cc,Mc,Hh,ja,bc,Vh,Ja;return Lt="\u10D7\u10D4\u10D2\u10D4\u10D1\u10D8",E="\u10D7\u10D4\u10D2\u10D4\u10D1\u10D8",pt="\u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D4\u10D1\u10D8",Bt="\u10E7\u10D5\u10D4\u10DA\u10D0\u10E1 \u10DC\u10D0\u10EE\u10D5\u10D0",Qt="\u10D3\u10D0\u10DB\u10D0\u10DA\u10D5\u10D0",_e="\u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D4\u10D1\u10D8",Ee="\u10E7\u10D5\u10D4\u10DA\u10D0\u10E1 \u10DC\u10D0\u10EE\u10D5\u10D0",Xe="\u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",je="\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8 (24\u10E1\u10D7)",hr="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10EF\u10D0\u10DC\u10DB\u10E0\u10D7\u10D4\u10DA\u10DD\u10D1\u10D0",jr="\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8",fn="\u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",ei="\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8 (24\u10E1\u10D7)",_i="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10EF\u10D0\u10DC\u10DB\u10E0\u10D7\u10D4\u10DA\u10DD\u10D1\u10D0",hn="\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8",Wi="Blocks 24h",Sn="1\u10D9\u10D5",sa="\u10E7\u10D5\u10D4\u10DA\u10D0",la="Blocks 24h",ba="1\u10D9\u10D5",Bn="\u10E7\u10D5\u10D4\u10DA\u10D0",Ra="\u10E1\u10D8\u10DB\u10D0\u10E6\u10DA\u10D4",ho="\u10D3\u10E0\u10DD\u10D8\u10E1 \u10DC\u10D8\u10E8\u10DC\u10E3\u10DA\u10D8",Yn="\u10DB\u10DD\u10DE\u10DD\u10D5\u10D4\u10D1\u10E3\u10DA\u10D8",zs="Coinbase tag",gs="\u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",Zn="\u10E2\u10E0\u10D0\u10DC\u10D6\u10D0\u10E5\u10EA\u10D8\u10D0",Cl="\u10D6\u10DD\u10DB\u10D0",mc="\u10EF\u10D0\u10DC\u10DB\u10E0\u10D7\u10D4\u10DA\u10DD\u10D1\u10D0",Nh="\u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD\u10D4\u10D1\u10D8",yc="\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8",gu="\u10E1\u10D8\u10DB\u10D0\u10E6\u10DA\u10D4",Ih="\u10D3\u10E0\u10DD\u10D8\u10E1 \u10DC\u10D8\u10E8\u10DC\u10E3\u10DA\u10D8",xc="\u10DB\u10DD\u10DE\u10DD\u10D5\u10D4\u10D1\u10E3\u10DA\u10D8",Rh="Coinbase tag",Bh="\u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",Gh="\u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD\u10D4\u10D1\u10D8",Sc="\u10E2\u10E0\u10D0\u10DC\u10D6\u10D0\u10E5\u10EA\u10D8\u10D0",Fo="\u10D6\u10DD\u10DB\u10D0",Zh="\u10D7\u10D4\u10D2\u10D4\u10D1\u10D8",Fh="\u10D7\u10D4\u10D2\u10D4\u10D1\u10D8",kh="\u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D4\u10D1\u10D8",Ml="\u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D4\u10D1\u10D8",Tc="\u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",zh="\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8 (24\u10E1\u10D7)",Uh="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10EF\u10D0\u10DC\u10DB\u10E0\u10D7\u10D4\u10DA\u10DD\u10D1\u10D0",_s="\u10D0\u10DC\u10D0\u10D6\u10E6\u10D0\u10E3\u10E0\u10D4\u10D1\u10D0",bl="\u10F0\u10D0\u10E8\u10E0\u10D4\u10D8\u10E2\u10D8 (24\u10E1\u10D7)",Cc="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD \u10EF\u10D0\u10DC\u10DB\u10E0\u10D7\u10D4\u10DA\u10DD\u10D1\u10D0",Mc="Blocks 24h",Hh="1\u10D9\u10D5",ja="\u10E7\u10D5\u10D4\u10DA\u10D0",bc="Blocks 24h",Vh="1\u10D9\u10D5",Ja="\u10E7\u10D5\u10D4\u10DA\u10D0",[[1,"container-xl"],[4,"ngIf","ngIfElse"],["nodata",""],["nodatamobile",""],["echarts","",1,"chart",3,"initOpts","options"],["class","text-center loadingGraphs",4,"ngIf"],["infiniteScroll","",1,"table","table-borderless",3,"alwaysCallback","infiniteScrollDistance","infiniteScrollUpDistance","infiniteScrollThrottle","scrolled"],["skeleton",""],["loadingMain",""],["emptyTd",""],[1,"mb-3",2,"display","flex"],["width","50","height","50","onError","this.src = '/resources/mining-pools/default.svg'",1,"mr-3",3,"src","alt"],[1,"m-0","pt-1","pt-md-0"],[1,"box"],[1,"row"],[1,"col-lg-6"],[1,"table","table-borderless","table-striped","taller",2,"table-layout","fixed"],["class","taller-row",4,"ngIf"],[4,"ngIf"],[1,"table","table-borderless","table-striped"],[1,"taller-row"],[1,"label"],Lt,["style","vertical-align: middle",4,"ngIf","ngIfElse"],[2,"vertical-align","middle"],[1,"scrollable"],["colspan","2"],E,["class","overflow-auto",4,"ngIf","ngIfElse"],[1,"overflow-auto"],[1,"label","addresses"],pt,["style","padding-top: 25px",4,"ngIf","ngIfElse"],[2,"padding-top","25px"],[1,"addresses-data",3,"routerLink"],[3,"ngbCollapse","ngbCollapseChange"],["collapse","ngbCollapse"],["class","addresses-data",3,"routerLink",4,"ngFor","ngForOf"],["type","button","class","btn btn-sm btn-primary small-button","aria-controls","collapseExample",3,"click",4,"ngIf"],["type","button","aria-controls","collapseExample",1,"btn","btn-sm","btn-primary","small-button",3,"click"],Bt,Qt,_e,["type","button","class","btn btn-sm btn-primary float-right small-button mobile","aria-controls","collapseExample",3,"click",4,"ngIf"],[2,"width","100%",3,"ngbCollapse","ngbCollapseChange"],["type","button","aria-controls","collapseExample",1,"btn","btn-sm","btn-primary","float-right","small-button","mobile",3,"click"],Ee,[1,"data"],[1,"table","table-xs","table-data"],["scope","col",1,"block-count-title","text-center",2,"width","33%"],Xe,je,["scope","col","class","block-count-title text-center","style","width: 33%",4,"ngIf"],[1,"text-center"],["digitsInfo","1.0-0",3,"radiowavesoshis","noFiat"],["class","text-center",4,"ngIf","ngIfElse"],hr,["class","health-badge badge",3,"badge-success","badge-warning","badge-danger",4,"ngIf","ngIfElse"],["nullHealth",""],[1,"health-badge","badge"],[1,"health-badge","badge","badge-secondary"],jr,fn,ei,_i,hn,Wi,Sn,sa,la,ba,Bn,[1,"taller-row",2,"vertical-align","middle"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"height"],Ra,[1,"timestamp"],ho,[1,"mined"],Yn,[1,"coinbase","text-left"],zs,["class","health text-right",4,"ngIf"],[1,"reward","text-right"],gs,["class","fees text-right",4,"ngIf"],[1,"txs","text-right"],Zn,[1,"size"],Cl,[1,"health","text-right"],mc,[1,"fees","text-right"],Nh,[3,"routerLink"],["kind","since",3,"time","fastRender"],[1,"coinbase"],[1,"badge","badge-secondary","scriptmessage","longer"],["digitsInfo","1.2-2",3,"radiowavesoshis","noFiat"],[1,"progress"],["role","progressbar",1,"progress-bar","progress-mempool",3,"ngStyle"],[1,"progress-text",3,"innerHTML"],["class","health-badge badge",3,"badge-success","badge-warning","badge-danger","routerLink","state",4,"ngIf","ngIfElse"],[1,"health-badge","badge",3,"routerLink","state"],yc,gu,Ih,xc,Rh,Bh,Gh,Sc,Fo,[4,"ngFor","ngForOf"],[1,"skeleton-loader"],[1,"size","text-right"],[1,"mb-3",2,"display","flex","position","relative"],[1,"skeleton-loader","mr-3",2,"width","50px","height","50px"],[1,"skeleton-loader",2,"position","absolute","top","32%","width","150px","height","20px"],Zh,Fh,kh,Ml,[1,"table","table-xs","table-data","text-center"],Tc,zh,[1,"skeleton-loader","data"],["class","text-center",4,"ngIf"],Uh,_s,bl,Cc,Mc,Hh,ja,bc,Vh,Ja]},template:function(E,pt){if(1&E&&(n._UZ(0,"app-indexing-progress"),n.TgZ(1,"div",0),n.YNc(2,Uu,21,11,"div",1),n.ALo(3,"async"),n.YNc(4,eh,2,0,"ng-template",null,2,n.W1O),n.YNc(6,Ti,2,0,"ng-template",null,3,n.W1O),n._UZ(8,"div",4),n.YNc(9,Pi,2,0,"div",5),n.TgZ(10,"table",6),n.NdJ("scrolled",function(){return pt.loadMore()}),n.YNc(11,Np,4,5,"ng-container",1),n.ALo(12,"async"),n.YNc(13,ih,19,2,"ng-template",null,7,n.W1O),n.qZA()(),n.YNc(15,Lf,21,8,"ng-template",null,8,n.W1O),n.YNc(17,sh,1,0,"ng-template",null,9,n.W1O)),2&E){const Bt=n.MAs(14),Qt=n.MAs(16);n.xp6(2),n.Q6J("ngIf",n.lcZ(3,11,pt.poolStats$))("ngIfElse",Qt),n.xp6(6),n.Q6J("initOpts",pt.chartInitOptions)("options",pt.chartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading),n.xp6(1),n.Q6J("alwaysCallback",!0)("infiniteScrollDistance",1.5)("infiniteScrollUpDistance",1.5)("infiniteScrollThrottle",50),n.xp6(1),n.Q6J("ngIf",n.lcZ(12,13,pt.blocks$))("ngIfElse",Bt)}},dependencies:[k.sg,k.O5,k.PC,St.yS,ti._D,Rt.Ry,Ln.G,kr.G,j.G,B._w,k.Ov,k.OU,k.JJ,k.uU,q.w,Vt.O,bo.$,Yt.i,Za.j],styles:[".container-xl[_ngcontent-%COMP%]{max-width:1400px;padding-bottom:100px}@media (min-width: 768px){.d-md-block[_ngcontent-%COMP%]{display:table-cell!important}}@media (min-width: 992px){.d-lg-block[_ngcontent-%COMP%]{display:table-cell!important}}.formRadioGroup[_ngcontent-%COMP%]{margin-top:6px;display:flex;flex-direction:column}@media (min-width: 830px){.formRadioGroup[_ngcontent-%COMP%]{flex-direction:row;float:right;margin-top:0}}.formRadioGroup[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{font-size:9px}@media (min-width: 830px){.formRadioGroup[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{font-size:14px}}.chart[_ngcontent-%COMP%]{margin-bottom:20px;height:400px}@media (max-width: 768px){.chart[_ngcontent-%COMP%]{margin-bottom:10px}}div.scrollable[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:auto;max-height:75px}.box[_ngcontent-%COMP%]{padding-bottom:5px}@media (min-width: 767.98px){.box[_ngcontent-%COMP%]{min-height:187px}}.label[_ngcontent-%COMP%]{width:25%}@media (min-width: 767.98px){.label[_ngcontent-%COMP%]{vertical-align:middle}}@media (max-width: 767.98px){.label[_ngcontent-%COMP%]{font-weight:700}}.label.addresses[_ngcontent-%COMP%]{vertical-align:top;padding-top:25px}.addresses-data[_ngcontent-%COMP%]{vertical-align:top;font-family:monospace;font-size:14px}.data[_ngcontent-%COMP%]{text-align:right;padding-left:5%}@media (max-width: 992px){.data[_ngcontent-%COMP%]{text-align:left;padding-left:12px}}@media (max-width: 450px){.data[_ngcontent-%COMP%]{text-align:right}}.progress[_ngcontent-%COMP%]{background-color:#2d3348}.coinbase[_ngcontent-%COMP%]{width:20%}@media (max-width: 875px){.coinbase[_ngcontent-%COMP%]{display:none}}.height[_ngcontent-%COMP%]{width:10%}@media (max-width: 875px){.timestamp[_ngcontent-%COMP%]{padding-left:50px}}@media (max-width: 685px){.timestamp[_ngcontent-%COMP%]{display:none}}.mined[_ngcontent-%COMP%]{width:13%}@media (max-width: 1100px){.mined[_ngcontent-%COMP%]{display:none}}.txs[_ngcontent-%COMP%]{padding-right:40px}@media (max-width: 1100px){.txs[_ngcontent-%COMP%]{padding-right:10px}}@media (max-width: 875px){.txs[_ngcontent-%COMP%]{padding-right:20px}}@media (max-width: 567px){.txs[_ngcontent-%COMP%]{padding-right:10px}}.size[_ngcontent-%COMP%]{width:12%}@media (max-width: 1000px){.size[_ngcontent-%COMP%]{width:15%}}@media (max-width: 875px){.size[_ngcontent-%COMP%]{width:20%}}@media (max-width: 650px){.size[_ngcontent-%COMP%]{width:20%}}@media (max-width: 450px){.size[_ngcontent-%COMP%]{display:none}}.scriptmessage[_ngcontent-%COMP%]{overflow:hidden;display:inline-block;text-overflow:ellipsis;vertical-align:middle;width:auto;text-align:left}.skeleton-loader[_ngcontent-%COMP%]{max-width:200px}.skeleton-loader.data[_ngcontent-%COMP%]{max-width:70px}.loadingGraphs[_ngcontent-%COMP%]{position:absolute;left:calc(50% - 15px);z-index:100;top:475px}@media (max-width: 992px){.loadingGraphs[_ngcontent-%COMP%]{top:600px}}.small-button[_ngcontent-%COMP%]{height:20px;font-size:10px;padding-top:0;padding-bottom:0;outline:none;box-shadow:none}.small-button.mobile[_ngcontent-%COMP%]{transform:translateY(-20px)}@media (min-width: 767.98px){.small-button.mobile[_ngcontent-%COMP%]{transform:translateY(-17px)}}.block-count-title[_ngcontent-%COMP%]{color:#4a68b9;font-size:14px}.table-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:transparent}.table-data[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}@media (max-width: 767.98px){.table-data[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}}.taller-row[_ngcontent-%COMP%]{height:75px}"],changeDetection:0}),H})();var xo=D(4797);function Vu(H,Lt){1&H&&(n.TgZ(0,"div",2),n._UZ(1,"div",3),n.qZA())}let Wu=(()=>{class H{constructor(E,pt){this.locale=E,this.storageService=pt,this.height="200",this.right="10",this.top="20",this.left="0",this.template="widget",this.isLoading=!0,this.mempoolStatsChartOption={},this.mempoolStatsChartInitOption={renderer:"svg"},this.chartInstance=void 0}ngOnInit(){this.isLoading=!0}ngOnChanges(){!this.data||(this.windowPreference=this.windowPreferenceOverride?this.windowPreferenceOverride:this.storageService.getValue("graphWindowPreference"),this.mountChart())}rendered(){!this.data||(this.isLoading=!1)}mountChart(){this.mempoolStatsChartOption={grid:{height:this.height,right:this.right,top:this.top,left:this.left},animation:!1,dataZoom:"widget"===this.template&&this.isMobile()?null:[{type:"inside",realtime:!0,zoomLock:"widget"===this.template,zoomOnMouseWheel:"advanced"===this.template,moveOnMouseMove:"widget"===this.template,maxSpan:100,minSpan:10},{showDetail:!1,show:"advanced"===this.template,type:"slider",brushSelect:!1,realtime:!0,bottom:0,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}],tooltip:{show:!this.isMobile(),trigger:"axis",position:(E,pt,Bt,Qt,_e)=>{const Ee={top:-20};return Ee[["left","right"][+(E[0]<_e.viewSize[0]/2)]]=80,Ee},extraCssText:`width: ${["2h","24h"].includes(this.windowPreference)||"widget"===this.template?"125px":"135px"};\n                      background: transparent;\n                      border: none;\n                      box-shadow: none;`,axisPointer:{type:"line"},formatter:E=>{let Qt='<div class="title">'+(0,X.Pw)(this.locale,this.windowPreference,E[0].axisValue)+"</div>";return E.map((_e,Ee)=>{Ee<26&&(Qt+=`<div class="item">\n                <div class="indicator-container">${(_e=>'<span class="indicator" style="background-color: '+_e+'"></span>')(_e.color)}</div>\n                <div class="grow"></div>\n                <div class="value">${(0,k.uf)(_e.value[1],this.locale,"1.0-0")}<span class="symbol">vB/s</span></div>\n              </div>`)}),`<div class="tx-wrapper-tooltip-chart ${"advanced"===this.template?"tx-wrapper-tooltip-chart-advanced":""}">${Qt}</div>`}},xAxis:[{name:"widget"===this.template?"":(0,X.ZI)(this.locale,this.windowPreference),nameLocation:"middle",nameTextStyle:{padding:[20,0,0,0]},type:"time",axisLabel:{margin:20,align:"center",fontSize:11,lineHeight:12,hideOverlap:!0,padding:[0,5]}}],yAxis:{type:"value",axisLabel:{fontSize:11},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}}},series:[{zlevel:0,data:this.data.series[0],type:"line",smooth:!1,showSymbol:!1,symbol:"none",lineStyle:{width:3},markLine:{silent:!0,symbol:"none",lineStyle:{color:"#fff",opacity:1,width:2},data:[{yAxis:1667,label:{show:!1,color:"#ffffff"}}]}}],visualMap:{show:!1,top:50,right:10,pieces:[{gt:0,lte:1667,color:"#7CB342"},{gt:1667,lte:2e3,color:"#FDD835"},{gt:2e3,lte:2500,color:"#FFB300"},{gt:2500,lte:3e3,color:"#FB8C00"},{gt:3e3,lte:3500,color:"#F4511E"},{gt:3500,color:"#D81B60"}],outOfRange:{color:"#999"}}}}onChartInit(E){this.chartInstance=E}isMobile(){return window.innerWidth<=767.98}onSaveChart(E){const pt=this.mempoolStatsChartOption.grid.height,Bt=new Date;this.mempoolStatsChartOption.grid.height=pt+20,this.mempoolStatsChartOption.backgroundColor="#11131f",this.chartInstance.setOption(this.mempoolStatsChartOption),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`incoming-vbytes-${E}-${Math.round(Bt.getTime()/1e3)}.svg`),this.mempoolStatsChartOption.grid.height=pt,this.mempoolStatsChartOption.backgroundColor="none",this.chartInstance.setOption(this.mempoolStatsChartOption)}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36(st.V))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-incoming-transactions-graph"]],inputs:{data:"data",theme:"theme",height:"height",right:"right",top:"top",left:"left",template:"template",windowPreferenceOverride:"windowPreferenceOverride"},features:[n.TTD],decls:2,vars:3,consts:[["echarts","",1,"echarts",3,"initOpts","options","chartRendered","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"]],template:function(E,pt){1&E&&(n.TgZ(0,"div",0),n.NdJ("chartRendered",function(){return pt.rendered()})("chartInit",function(Qt){return pt.onChartInit(Qt)}),n.qZA(),n.YNc(1,Vu,2,0,"div",1)),2&E&&(n.Q6J("initOpts",pt.mempoolStatsChartInitOption)("options",pt.mempoolStatsChartOption),n.xp6(1),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.O5,B._w],styles:[".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 16px);z-index:100}"],changeDetection:0}),H})();var Nf=D(7226);function $u(H,Lt){1&H&&(n.TgZ(0,"div",2),n._UZ(1,"div",3),n.qZA())}let ru=(()=>{class H{constructor(E,pt,Bt,Qt){this.vbytesPipe=E,this.stateService=pt,this.storageService=Bt,this.locale=Qt,this.limitFee=350,this.limitFilterFee=1,this.height=200,this.top=20,this.right=10,this.left=75,this.template="widget",this.showZoom=!0,this.isLoading=!0,this.mempoolVsizeFeesInitOptions={renderer:"svg"},this.hoverIndexSerie=0,this.feeLevelsOrdered=[],this.chartColorsOrdered=En.vK,this.chartInstance=void 0,this.getTotalValues=_e=>{let Ee=0;const Xe=[],je=this.inverted?_e:[..._e].reverse();for(const hr of je)Ee+=hr.value[1],Xe.push(Ee);return{totalValue:Ee,totalValueArray:Xe.reverse()}}}ngOnInit(){this.isLoading=!0,this.inverted="true"===this.storageService.getValue("inverted-graph")}ngOnChanges(){!this.data||(this.windowPreference=this.windowPreferenceOverride?this.windowPreferenceOverride:this.storageService.getValue("graphWindowPreference"),this.mempoolVsizeFeesData=this.handleNewBitexplorerData(this.data.concat([])),this.mountFeeChart())}rendered(){!this.data||(this.isLoading=!1)}onChartReady(E){E.getZr().on("mousemove",pt=>{void 0!==pt.target&&void 0!==pt.target.parent&&null!==pt.target.parent.parent&&void 0!==pt.target.parent.parent.__ecComponentInfo&&(this.hoverIndexSerie=pt.target.parent.parent.__ecComponentInfo.index)}),this.chartInstance=E}handleNewBitexplorerData(E){return E.reverse(),{labels:E.map(Qt=>Qt.added),series:this.generateArray(E)}}generateArray(E){const pt=[];let Bt=[];for(let _e="advanced"===this.template?26:20;_e>-1;_e--)Bt=[],E.forEach(Ee=>{Bt.push([1e3*Ee.added,Ee.vsizes[_e]?Ee.vsizes[_e]:0])}),pt.push(Bt);return pt.reverse(),pt}mountFeeChart(){this.orderLevels();const{series:E}=this.mempoolVsizeFeesData,pt=[],Bt=[];for(let Qt=0;Qt<E.length;Qt++){const _e=E[Qt];Qt>=this.feeLimitIndex&&(Bt.push(this.chartColorsOrdered[Qt]),pt.push({zlevel:0,name:this.feeLevelsOrdered[Qt],type:"line",stack:"fees",smooth:!1,markPoint:{symbol:"rect"},lineStyle:{width:0,opacity:0},symbol:"none",emphasis:{focus:"none",areaStyle:{opacity:.85}},markLine:{silent:!0,symbol:"none",lineStyle:{color:"#fff",opacity:1,width:this.inverted?2:0},data:[{yAxis:"1000000",label:{show:!1,color:"#ffffff"}}]},areaStyle:{color:this.chartColorsOrdered[Qt],opacity:1},data:_e}))}this.mempoolVsizeFeesOptions={series:this.inverted?[...pt].reverse():pt,hover:!0,color:this.inverted?[...Bt].reverse():Bt,tooltip:{show:!this.isMobile(),trigger:"axis",alwaysShowContent:!1,position:(Qt,_e,Ee,Xe,je)=>{const hr={top:"advanced"===this.template?0:-30};return hr[["left","right"][+(Qt[0]<je.viewSize[0]/2)]]=60,hr},extraCssText:`width: ${"advanced"===this.template?"275px":"200px"};\n                      background: transparent;\n                      border: none;\n                      box-shadow: none;`,axisPointer:{type:"line"},formatter:Qt=>{const _e=(0,X.Pw)(this.locale,this.windowPreference,Qt[0].axisValue),{totalValue:Ee,totalValueArray:Xe}=this.getTotalValues(Qt),je=[];let hr=0,jr="";(this.inverted?[...Qt].reverse():Qt).map((Sn,sa)=>{hr+=Sn.value[1];const la=Sn.value[1]/Ee*100,ba=Xe[sa]/Ee*100;let Bn="",Ra=0;Ra=this.inverted?Math.abs(this.feeLevelsOrdered.length-Sn.seriesIndex-this.feeLevelsOrdered.length):Sn.seriesIndex,this.hoverIndexSerie===Ra&&(jr=`<div class="total-parcial-active">\n                <span class="progress-percentage">\n                  ${(0,k.uf)(la,this.locale,"1.2-2")}\n                  <span class="symbol">%</span>\n                </span>\n                <span class="total-parcial-vbytes">\n                  ${this.vbytesPipe.transform(hr,2,"vB","MvB",!1)}\n                </span>\n                <div class="total-percentage-bar">\n                  <span class="total-percentage-bar-background">\n                    <span style="\n                      width: ${la}%;\n                      background: ${Sn.color}\n                    "></span>\n                  </span>\n                </div>\n              </div>`,Bn="active"),je.push(`<tr class="item ${Bn}">\n              <td class="indicator-container">\n                <span class="indicator" style="\n                  background-color: ${Sn.color}\n                "></span>\n                <span>\n                  ${Sn.seriesName}\n                </span>\n              </td>\n              <td class="total-progress-sum">\n                <span>\n                  ${this.vbytesPipe.transform(Sn.value[1],2,"vB","MvB",!1)}\n                </span>\n              </td>\n              <td class="total-progress-sum">\n                <span>\n                  ${this.vbytesPipe.transform(Xe[sa],2,"vB","MvB",!1)}\n                </span>\n              </td>\n              <td class="total-progress-sum-bar">\n                <span class="total-percentage-bar-background">\n                  <span style="\n                    width: ${ba.toFixed(2)}%;\n                    background-color: ${this.chartColorsOrdered[3]}\n                  "></span>\n                </span>\n              </td>\n            </tr>`)});const _i="\u10D6\u10E6\u10D5\u10D0\u10E0\u10D8",hn="\u10D6\u10DD\u10DB\u10D0",Wi="\u10EF\u10D0\u10DB\u10D8";return`<div class="fees-wrapper-tooltip-chart ${"advanced"===this.template?"fees-wrapper-tooltip-chart-advanced":""}">\n            <div class="title">\n              ${_e}\n              <span class="total-value">\n                ${this.vbytesPipe.transform(Ee,2,"vB","MvB",!1)}\n              </span>\n            </div>\n            <table>\n              <thead>\n                <tr>\n                  <th>${_i}</th>\n                  <th>${hn}</th>\n                  <th>${Wi}</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                ${this.inverted?je.join(""):je.reverse().join("")}\n              </tbody>\n            </table>\n            <span class="total-value">\n              ${jr}\n            </span>\n          </div>`}},dataZoom:"widget"===this.template&&this.isMobile()?null:[{type:"inside",realtime:!0,zoomLock:"widget"===this.template,zoomOnMouseWheel:"advanced"===this.template,moveOnMouseMove:"widget"===this.template,maxSpan:100,minSpan:10},{showDetail:!1,show:!("advanced"!==this.template||!this.showZoom),type:"slider",brushSelect:!1,realtime:!0,bottom:0,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}],animation:!1,grid:{height:this.height,right:this.right,top:this.top,left:this.left},xAxis:[{name:"widget"===this.template?"":(0,X.ZI)(this.locale,this.windowPreference),nameLocation:"middle",nameTextStyle:{padding:[20,0,0,0]},type:"time",boundaryGap:!1,axisLine:{onZero:!0},axisLabel:{margin:20,align:"center",fontSize:11,lineHeight:12,hideOverlap:!0,padding:[0,5]}}],yAxis:{type:"value",axisLine:{onZero:!1},axisLabel:{fontSize:11,formatter:Qt=>`${this.vbytesPipe.transform(Qt,2,"vB","MvB",!0)}`},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}}}}}orderLevels(){this.feeLevelsOrdered=[];for(let E=0;E<En.FX.length;E++)En.FX[E]===this.limitFilterFee&&(this.feeLimitIndex=E),En.FX[E]<=this.limitFee&&this.feeLevelsOrdered.push("liquid"===this.stateService.network||"liquidtestnet"===this.stateService.network?`${(En.FX[E]/10).toFixed(1)} - ${(En.FX[E+1]/10).toFixed(1)}`:`${En.FX[E]} - ${En.FX[E+1]}`);this.chartColorsOrdered=En.vK.slice(0,this.feeLevelsOrdered.length)}isMobile(){return window.innerWidth<=767.98}onSaveChart(E){const pt=this.mempoolVsizeFeesOptions.grid.height,Bt=new Date;this.mempoolVsizeFeesOptions.grid.height=pt+20,this.mempoolVsizeFeesOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.mempoolVsizeFeesOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`mempool-graph-${E}-${Math.round(Bt.getTime()/1e3)}.svg`),this.mempoolVsizeFeesOptions.grid.height=pt,this.mempoolVsizeFeesOptions.backgroundColor="none",this.chartInstance.setOption(this.mempoolVsizeFeesOptions)}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(Nf.h),n.Y36(K.b),n.Y36(st.V),n.Y36(n.soG))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-mempool-graph"]],inputs:{data:"data",limitFee:"limitFee",limitFilterFee:"limitFilterFee",height:"height",top:"top",right:"right",left:"left",template:"template",showZoom:"showZoom",windowPreferenceOverride:"windowPreferenceOverride"},features:[n.TTD],decls:2,vars:3,consts:[["echarts","",1,"echarts",3,"initOpts","options","chartInit","chartRendered"],["class","text-center loadingGraphs",4,"ngIf"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"]],template:function(E,pt){1&E&&(n.TgZ(0,"div",0),n.NdJ("chartInit",function(Qt){return pt.onChartReady(Qt)})("chartRendered",function(){return pt.rendered()}),n.qZA(),n.YNc(1,$u,2,0,"div",1)),2&E&&(n.Q6J("initOpts",pt.mempoolVsizeFeesInitOptions)("options",pt.mempoolVsizeFeesOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.O5,B._w],styles:[".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 16px);z-index:100}"],changeDetection:0}),H})();const Xu=["mempoolgraph"],If=["incominggraph"],Ya=function(H){return[H]},aa=function(){return["fas","tv"]};function hi(H,Lt){1&H&&(n.TgZ(0,"div",38)(1,"label",39)(2,"a",40),n.ALo(3,"relativeUrl"),n._UZ(4,"fa-icon",41),n.qZA()()()),2&H&&(n.xp6(2),n.Q6J("routerLink",n.VKq(5,Ya,n.lcZ(3,3,"/tv"))),n.xp6(2),n.Q6J("icon",n.DdM(7,aa))("fixedWidth",!0))}const va=function(H){return{backgroundColor:H}};function So(H,Lt){if(1&H){const E=n.EpF();n.TgZ(0,"li",43),n.NdJ("click",function(){n.CHM(E);const Bt=n.oxw().$implicit,Qt=n.oxw();return n.KtG(Qt.filterFeeIndex=Bt.fee)}),n._UZ(1,"span",44),n.TgZ(2,"span",45),n._uU(3),n.qZA()()}if(2&H){const E=n.oxw().$implicit,pt=n.oxw();n.Tol(pt.filterFeeIndex>E.fee?"inactive":""),n.xp6(1),n.Q6J("ngStyle",n.VKq(4,va,E.color)),n.xp6(2),n.Oqu(E.range)}}function nu(H,Lt){1&H&&n.YNc(0,So,4,6,"ng-template",42),2&H&&n.Q6J("ngIf",Lt.$implicit.fee<=400)}function Yu(H,Lt){1&H&&n._UZ(0,"div",46)}const lh=function(){return["fas","download"]},La=function(){return["fas","filter"]},ns=function(){return["fas","exchange-alt"]};let uh=(()=>{class H{constructor(E,pt,Bt,Qt,_e,Ee,Xe,je){this.locale=E,this.formBuilder=pt,this.route=Bt,this.websocketService=Qt,this.apiService=_e,this.stateService=Ee,this.seoService=Xe,this.storageService=je,this.network="",this.loading=!0,this.spinnerLoading=!1,this.feeLevels=En.FX,this.chartColors=En.vK,this.filterFeeIndex=1,this.dropDownOpen=!1,this.mempoolStats=[],this.feeLevelDropdownData=[],this.timespan=""}ngOnInit(){this.inverted="true"===this.storageService.getValue("inverted-graph"),this.setFeeLevelDropdownData(),this.seoService.setTitle("\u10D3\u10D8\u10D0\u10D2\u10E0\u10D0\u10DB\u10D4\u10D1\u10D8"),this.stateService.networkChanged$.subscribe(E=>this.network=E),this.graphWindowPreference=this.storageService.getValue("graphWindowPreference")?this.storageService.getValue("graphWindowPreference").trim():"2h",this.radioGroupForm=this.formBuilder.group({dateSpan:this.graphWindowPreference}),this.route.fragment.subscribe(E=>{["2h","24h","1w","1m","3m","6m","1y","2y","3y","4y"].indexOf(E)>-1&&this.radioGroupForm.controls.dateSpan.setValue(E,{emitEvent:!1})}),(0,no.T)((0,dn.of)(""),this.radioGroupForm.controls.dateSpan.valueChanges).pipe((0,mt.w)(()=>(this.timespan=this.radioGroupForm.controls.dateSpan.value,this.spinnerLoading=!0,"2h"===this.radioGroupForm.controls.dateSpan.value?(this.websocketService.want(["blocks","live-2h-chart"]),this.apiService.list2HStatistics$()):(this.websocketService.want(["blocks"]),"24h"===this.radioGroupForm.controls.dateSpan.value?this.apiService.list24HStatistics$():"1w"===this.radioGroupForm.controls.dateSpan.value?this.apiService.list1WStatistics$():"1m"===this.radioGroupForm.controls.dateSpan.value?this.apiService.list1MStatistics$():"3m"===this.radioGroupForm.controls.dateSpan.value?this.apiService.list3MStatistics$():"6m"===this.radioGroupForm.controls.dateSpan.value?this.apiService.list6MStatistics$():"1y"===this.radioGroupForm.controls.dateSpan.value?this.apiService.list1YStatistics$():"2y"===this.radioGroupForm.controls.dateSpan.value?this.apiService.list2YStatistics$():"3y"===this.radioGroupForm.controls.dateSpan.value?this.apiService.list3YStatistics$():this.apiService.list4YStatistics$())))).subscribe(E=>{this.mempoolStats=E,this.handleNewBitexplorerData(this.mempoolStats.concat([])),this.loading=!1,this.spinnerLoading=!1}),this.stateService.live2Chart$.subscribe(E=>{this.mempoolStats.unshift(E),this.mempoolStats=this.mempoolStats.slice(0,this.mempoolStats.length-1),this.handleNewBitexplorerData(this.mempoolStats.concat([]))})}handleNewBitexplorerData(E){E.reverse();const pt=E.map(Bt=>Bt.added);this.capExtremeVbytesValues(),this.mempoolTransactionsWeightPerSecondData={labels:pt,series:[E.map(Bt=>[1e3*Bt.added,Bt.vbytes_per_second])]}}saveGraphPreference(){this.storageService.setValue("graphWindowPreference",this.radioGroupForm.controls.dateSpan.value)}invertGraph(){this.storageService.setValue("inverted-graph",!this.inverted),document.location.reload()}setFeeLevelDropdownData(){let E=En.FX,pt=En.vK;this.inverted||(E=[...En.FX].reverse(),pt=[...En.vK].reverse()),E.forEach((Bt,Qt)=>{this.feeLevelDropdownData.push(this.inverted?{fee:Bt,range:this.stateService.isLiquid()?`${(E[Qt]/10).toFixed(1)} - ${(E[Qt+1]/10).toFixed(1)}`:`${E[Qt]} - ${E[Qt+1]}`,color:pt[Qt]}:{fee:Bt,range:this.stateService.isLiquid()?`${(E[Qt]/10).toFixed(1)} - ${(E[Qt-1]/10).toFixed(1)}`:`${E[Qt]} - ${E[Qt-1]}`,color:pt[Qt-1]})})}capExtremeVbytesValues(){if(0!==this.stateService.network.length)return;let E=10;["1m","3m","6m","1y","2y","3y","4y"].includes(this.graphWindowPreference)&&(E=4);const pt=[];for(const Ee of this.mempoolStats)pt.push(Ee.vbytes_per_second);const Bt=pt.slice().sort((Ee,Xe)=>Ee-Xe),Qt=Math.floor(Bt.length/2);let _e=Bt[Qt];Bt.length%2==0&&(_e=(Bt[Qt-1]+Bt[Qt])/2);for(const Ee of this.mempoolStats)Ee.vbytes_per_second=Math.min(_e*E,Ee.vbytes_per_second)}onSaveChart(E){"mempool"===E?this.mempoolGraph.onSaveChart(this.timespan):"incoming"===E&&this.incomingGraph.onSaveChart(this.timespan)}isMobile(){return window.innerWidth<=767.98}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG),n.Y36($.QS),n.Y36(St.gz),n.Y36(ya.i),n.Y36(et.s),n.Y36(K.b),n.Y36(N.v),n.Y36(st.V))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-statistics"]],viewQuery:function(E,pt){if(1&E&&(n.Gf(Xu,5),n.Gf(If,5)),2&E){let Bt;n.iGM(Bt=n.CRH())&&(pt.mempoolGraph=Bt.first),n.iGM(Bt=n.CRH())&&(pt.incomingGraph=Bt.first)}},decls:80,vars:110,consts:function(){let Lt,E,pt,Bt,Qt;return Lt="\u10DB\u10D4\u10DB\u10DE\u10E3\u10DA\u10D8 vBytes (\u10E1\u10D0\u10E2/vByte) \u10DB\u10D8\u10EE\u10D4\u10D3\u10D5\u10D8\u10D7",E="\u10D2\u10D0\u10E4\u10D8\u10DA\u10E2\u10D5\u10E0\u10D0",pt="\u10E8\u10D4\u10D1\u10E0\u10E3\u10DC\u10D4\u10D1\u10D0",Bt="\u10E2\u10E0\u10D0\u10DC\u10D6\u10D0\u10E5\u10EA\u10D8\u10D0 vBytes \u10EC\u10D0\u10DB\u10E8\u10D8 (vB/s)",Qt="\u10E1\u10D0\u10E2\u10D4\u10DA\u10D4\u10D5\u10D8\u10D6\u10D8\u10DD \u10EE\u10D4\u10D3\u10D5\u10D0",[[1,"container-graph"],[1,"card","mb-3"],[1,"card-header"],[1,"d-flex","d-md-block","align-items-baseline"],Lt,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],[1,"formRadioGroup",3,"formGroup","click"],["class","btn-group btn-group-toggle",4,"ngIf"],["name","radioBasic",1,"btn-group","btn-group-toggle"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","2h","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","24h","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1w","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","4y","formControlName","dateSpan",3,"value","routerLink"],[1,"small-buttons"],["ngbDropdown",""],["myDrop","ngbDropdown"],["id","dropdownFees","ngbDropdownAnchor","",1,"btn","btn","btn-primary","btn-sm",3,"click"],["title",E,3,"icon","fixedWidth"],["ngbDropdownMenu","","aria-labelledby","dropdownFees",1,"dropdown-fees"],["ngFor","",3,"ngForOf"],[1,"btn","btn","btn-primary","btn-sm",3,"click"],["title",pt,3,"icon","rotate","fixedWidth"],["class","spinner-border text-light bootstrap-spinner",4,"ngIf"],[1,"card-body"],[1,"incoming-transactions-graph"],["dir","ltr",3,"template","limitFee","limitFilterFee","height","left","right","data"],["mempoolgraph",""],Bt,[3,"height","left","template","data"],["incominggraph",""],[1,"btn-group","btn-group-toggle"],[1,"btn","btn-primary","btn-sm","mr-2"],["id","btn-tv",2,"color","white",3,"routerLink"],["title",Qt,3,"icon","fixedWidth"],[3,"ngIf"],[3,"click"],[1,"square",3,"ngStyle"],[1,"fee-text"],[1,"spinner-border","text-light","bootstrap-spinner"]]},template:function(E,pt){if(1&E){const Bt=n.EpF();n.TgZ(0,"div",0)(1,"div")(2,"div")(3,"div",1)(4,"div",2)(5,"div",3)(6,"span"),n.SDv(7,4),n.qZA(),n.TgZ(8,"button",5),n.NdJ("click",function(){return pt.onSaveChart("mempool")}),n._UZ(9,"fa-icon",6),n.qZA()(),n.TgZ(10,"form",7),n.NdJ("click",function(){return pt.saveGraphPreference()}),n.YNc(11,hi,5,8,"div",8),n.TgZ(12,"div",9)(13,"label",10),n._UZ(14,"input",11),n.ALo(15,"relativeUrl"),n._uU(16," 2H (LIVE) "),n.qZA(),n.TgZ(17,"label",10),n._UZ(18,"input",12),n.ALo(19,"relativeUrl"),n._uU(20," 24H "),n.qZA(),n.TgZ(21,"label",10),n._UZ(22,"input",13),n.ALo(23,"relativeUrl"),n._uU(24," 1W "),n.qZA(),n.TgZ(25,"label",10),n._UZ(26,"input",14),n.ALo(27,"relativeUrl"),n._uU(28," 1M "),n.qZA(),n.TgZ(29,"label",10),n._UZ(30,"input",15),n.ALo(31,"relativeUrl"),n._uU(32," 3M "),n.qZA(),n.TgZ(33,"label",10),n._UZ(34,"input",16),n.ALo(35,"relativeUrl"),n._uU(36," 6M "),n.qZA(),n.TgZ(37,"label",10),n._UZ(38,"input",17),n.ALo(39,"relativeUrl"),n._uU(40," 1Y "),n.qZA(),n.TgZ(41,"label",10),n._UZ(42,"input",18),n.ALo(43,"relativeUrl"),n._uU(44," 2Y "),n.qZA(),n.TgZ(45,"label",10),n._UZ(46,"input",19),n.ALo(47,"relativeUrl"),n._uU(48," 3Y "),n.qZA(),n.TgZ(49,"label",10),n._UZ(50,"input",20),n.ALo(51,"relativeUrl"),n._uU(52," 4Y "),n.qZA()(),n.TgZ(53,"div",21)(54,"div",22,23)(56,"button",24),n.NdJ("click",function(){n.CHM(Bt);const _e=n.MAs(55);return n.KtG(_e.toggle())}),n._UZ(57,"fa-icon",25),n.qZA(),n.TgZ(58,"div",26)(59,"ul"),n.YNc(60,nu,1,1,"ng-template",27),n.qZA()()(),n.TgZ(61,"button",28),n.NdJ("click",function(){return pt.invertGraph()}),n._UZ(62,"fa-icon",29),n.qZA()()(),n.YNc(63,Yu,1,0,"div",30),n.qZA(),n.TgZ(64,"div",31)(65,"div",32),n._UZ(66,"app-mempool-graph",33,34),n.qZA()()()(),n.TgZ(68,"div")(69,"div",1)(70,"div",2)(71,"div",3)(72,"span"),n.SDv(73,35),n.qZA(),n.TgZ(74,"button",5),n.NdJ("click",function(){return pt.onSaveChart("incoming")}),n._UZ(75,"fa-icon",6),n.qZA()()(),n.TgZ(76,"div",31)(77,"div",32),n._UZ(78,"app-incoming-transactions-graph",36,37),n.qZA()()()()()()}2&E&&(n.xp6(9),n.Q6J("icon",n.DdM(86,lh))("fixedWidth",!0),n.xp6(1),n.Tol(pt.stateService.env.MINING_DASHBOARD||pt.stateService.env.LIGHTNING?"mining":"no-menu"),n.Q6J("formGroup",pt.radioGroupForm),n.xp6(1),n.Q6J("ngIf",!pt.isMobile()),n.xp6(2),n.ekj("active","2h"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","2h")("routerLink",n.VKq(87,Ya,n.lcZ(15,66,"/graphs"))),n.xp6(3),n.ekj("active","24h"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","24h")("routerLink",n.VKq(89,Ya,n.lcZ(19,68,"/graphs"))),n.xp6(3),n.ekj("active","1w"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1w")("routerLink",n.VKq(91,Ya,n.lcZ(23,70,"/graphs"))),n.xp6(3),n.ekj("active","1m"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1m")("routerLink",n.VKq(93,Ya,n.lcZ(27,72,"/graphs"))),n.xp6(3),n.ekj("active","3m"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3m")("routerLink",n.VKq(95,Ya,n.lcZ(31,74,"/graphs"))),n.xp6(3),n.ekj("active","6m"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","6m")("routerLink",n.VKq(97,Ya,n.lcZ(35,76,"/graphs"))),n.xp6(3),n.ekj("active","1y"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","1y")("routerLink",n.VKq(99,Ya,n.lcZ(39,78,"/graphs"))),n.xp6(3),n.ekj("active","2y"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","2y")("routerLink",n.VKq(101,Ya,n.lcZ(43,80,"/graphs"))),n.xp6(3),n.ekj("active","3y"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","3y")("routerLink",n.VKq(103,Ya,n.lcZ(47,82,"/graphs"))),n.xp6(3),n.ekj("active","4y"===pt.radioGroupForm.get("dateSpan").value),n.xp6(1),n.Q6J("value","4y")("routerLink",n.VKq(105,Ya,n.lcZ(51,84,"/graphs"))),n.xp6(7),n.Q6J("icon",n.DdM(107,La))("fixedWidth",!0),n.xp6(3),n.Q6J("ngForOf",pt.feeLevelDropdownData),n.xp6(2),n.Q6J("icon",n.DdM(108,ns))("rotate",90)("fixedWidth",!0),n.xp6(1),n.Q6J("ngIf",pt.spinnerLoading&&pt.mempoolStats.length),n.xp6(3),n.Q6J("template","advanced")("limitFee",500)("limitFilterFee",pt.filterFeeIndex)("height",500)("left",65)("right",10)("data",pt.mempoolStats&&pt.mempoolStats.length?pt.mempoolStats:null),n.xp6(9),n.Q6J("icon",n.DdM(109,lh))("fixedWidth",!0),n.xp6(3),n.Q6J("height",500)("left",65)("template","advanced")("data",pt.mempoolTransactionsWeightPerSecondData))},dependencies:[k.sg,k.O5,k.PC,St.rH,St.yS,$._Y,$.Fj,$._,$.JJ,$.JL,$.sg,$.u,ti.jt,ti.YE,ti.Vi,_.BN,Wu,ru,q.w],styles:['@charset "UTF-8";.container-graph[_ngcontent-%COMP%]{padding:0 15px 60px}.card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.card[_ngcontent-%COMP%]{background-color:transparent;border:0}.bootstrap-spinner[_ngcontent-%COMP%]{width:22px;height:22px;margin-left:10px;position:absolute;top:17px;right:25px}@media (min-width: 830px){.bootstrap-spinner[_ngcontent-%COMP%]{position:relative;top:0;right:0}}@media (max-width: 767.98px){.card-body[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}.formRadioGroup[_ngcontent-%COMP%]{margin-top:6px;display:flex;flex-direction:column}@media (min-width: 830px){.formRadioGroup[_ngcontent-%COMP%]{flex-direction:row;float:right;margin-top:0}}.formRadioGroup[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{font-size:9px}@media (min-width: 830px){.formRadioGroup[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{font-size:14px}}@media (min-width: 991px){.formRadioGroup.mining[_ngcontent-%COMP%]{position:relative;top:-100px}}@media (min-width: 830px) and (max-width: 991px){.formRadioGroup.mining[_ngcontent-%COMP%]{position:relative;top:0}}@media (min-width: 991px){.formRadioGroup.no-menu[_ngcontent-%COMP%]{position:relative;top:-33px}}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;height:80vh;justify-content:center}.incoming-transactions-graph[_ngcontent-%COMP%]{height:600px}.dropdown-fees[_ngcontent-%COMP%]{padding:10px 0;min-width:130px;padding:2px \\200b 20px 0px;left:-38px!important;position:absolute!important}.dropdown-fees[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin-bottom:0}.dropdown-fees[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;font-size:14px;padding:0 0 0 20px;transition:.2s all ease-in-out}.dropdown-fees[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#10121e;cursor:pointer}.dropdown-fees[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{transition:.2s all ease-in-out;height:12px;width:12px;margin-right:10px;border-radius:1px;display:inline-block;position:relative;top:1px}.dropdown-fees[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{background-color:#fff6!important}.dropdown-fees[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]   .fee-text[_ngcontent-%COMP%]{text-decoration:line-through;color:#777}.btn-group-toggle[_ngcontent-%COMP%]{display:inline-flex}@media (min-width: 830px){.btn-group-toggle[_ngcontent-%COMP%]{display:block}}.small-buttons[_ngcontent-%COMP%]{width:100%;display:flex;font-size:14px;margin:7px 0;justify-content:space-between;flex-direction:row-reverse}@media (min-width: 830px){.small-buttons[_ngcontent-%COMP%]{margin:2px 0;width:auto;flex-direction:row}}@media (min-width: 830px){.small-buttons[_ngcontent-%COMP%]{margin:0}}.small-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:49.25%}@media (min-width: 830px){.small-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:auto}}.small-buttons[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:49.25%;display:flex}@media (min-width: 830px){.small-buttons[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:auto;margin:0 5px}}.small-buttons[_ngcontent-%COMP%]   #dropdownFees[_ngcontent-%COMP%]{width:100%}@media (min-width: 830px){.small-buttons[_ngcontent-%COMP%]   #dropdownFees[_ngcontent-%COMP%]{width:auto}}']}),H})();var fl=D(5026),ch=D(4049),Rf=D(7403),Vn=D(6078),Gf=D(5090);let Zf=(()=>{class H{constructor(E,pt,Bt,Qt,_e){this.websocketService=E,this.apiService=pt,this.stateService=Bt,this.seoService=Qt,this.route=_e,this.mempoolStats=[],this.timeLtr=this.stateService.timeLtr.value}refreshStats(E,pt){return function Bf(H=0,Lt=ch.z){return H<0&&(H=0),(0,Rf.H)(H,H,Lt)}(E).pipe((0,_t.O)(0),(0,mt.w)(()=>pt))}ngOnInit(){this.seoService.setTitle("\u10E1\u10D0\u10E2\u10D4\u10DA\u10D4\u10D5\u10D8\u10D6\u10D8\u10DD \u10EE\u10D4\u10D3\u10D5\u10D0"),this.websocketService.want(["blocks","live-2h-chart","mempool-blocks"]),this.timeLtrSubscription=this.stateService.timeLtr.subscribe(E=>{this.timeLtr=!!E}),this.statsSubscription$=(0,no.T)(this.stateService.live2Chart$.pipe((0,yt.U)(E=>[E])),this.route.fragment.pipe((0,gt.b)(E=>{this.fragment=E??"2h"}),(0,mt.w)(E=>{switch(E){case"24h":return this.apiService.list24HStatistics$();case"1w":return this.refreshStats(3e5,this.apiService.list1WStatistics$());case"1m":return this.refreshStats(18e5,this.apiService.list1MStatistics$());case"3m":return this.refreshStats(72e5,this.apiService.list3MStatistics$());case"6m":return this.refreshStats(108e5,this.apiService.list6MStatistics$());case"1y":return this.refreshStats(288e5,this.apiService.list1YStatistics$());case"2y":return this.refreshStats(288e5,this.apiService.list2YStatistics$());case"3y":return this.refreshStats(432e5,this.apiService.list3YStatistics$());default:return this.apiService.list2HStatistics$()}}))).pipe((0,fl.R)((E,pt)=>(pt.length>1?E=pt:["2h","24h"].includes(this.fragment)&&(E.unshift(pt[0]),E=E.slice(0,E.length-1)),E)))}ngOnDestroy(){this.timeLtrSubscription.unsubscribe()}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(ya.i),n.Y36(et.s),n.Y36(K.b),n.Y36(N.v),n.Y36(St.gz))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-television"]],decls:12,vars:12,consts:[["id","tv-wrapper"],[1,"tv-container"],[1,"chart-holder"],[3,"template","limitFee","height","left","right","data","showZoom"],[1,"blockchain-wrapper",3,"dir"],[1,"position-container"],[1,"blocks-wrapper"],["id","divider"]],template:function(E,pt){1&E&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._UZ(3,"app-mempool-graph",3),n.ALo(4,"async"),n.qZA(),n.TgZ(5,"div",4)(6,"div",5)(7,"span")(8,"div",6),n._UZ(9,"app-mempool-blocks")(10,"app-blockchain-blocks"),n.qZA(),n._UZ(11,"div",7),n.qZA()()()()()),2&E&&(n.xp6(3),n.Q6J("template","advanced")("limitFee",500)("height",600)("left",60)("right",10)("data",n.lcZ(4,10,pt.statsSubscription$))("showZoom",!1),n.xp6(2),n.ekj("time-ltr",pt.timeLtr),n.Q6J("dir",pt.timeLtr?"rtl":"ltr"))},dependencies:[Vn.k,Gf.C,ru,k.Ov],styles:[".loading[_ngcontent-%COMP%]{margin:auto;width:100%;display:flex;text-align:center;justify-content:center;height:100vh;align-items:center}#tv-wrapper[_ngcontent-%COMP%]{height:100vh;overflow:hidden;position:relative}.chart-holder[_ngcontent-%COMP%]{position:relative;height:655px;width:100%;margin:30px auto 0}.blockchain-wrapper[_ngcontent-%COMP%]{display:block;height:100%;min-height:240px;position:relative;top:30px}.blockchain-wrapper[_ngcontent-%COMP%]   .position-container[_ngcontent-%COMP%]{position:absolute;left:0;bottom:170px;transform:translate(50vw)}.blockchain-wrapper[_ngcontent-%COMP%]   #divider[_ngcontent-%COMP%]{width:2px;height:175px;left:0;top:-40px;position:absolute}.blockchain-wrapper[_ngcontent-%COMP%]   #divider[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:-100px;top:-28px}.blockchain-wrapper.time-ltr[_ngcontent-%COMP%]   .blocks-wrapper[_ngcontent-%COMP%]{transform:scaleX(-1)}.ltr-layout[_nghost-%COMP%]   .blockchain-wrapper.time-ltr[_ngcontent-%COMP%]   .blocks-wrapper[_ngcontent-%COMP%], .ltr-layout   [_nghost-%COMP%]   .blockchain-wrapper.time-ltr[_ngcontent-%COMP%]   .blocks-wrapper[_ngcontent-%COMP%], .ltr-layout[_nghost-%COMP%]   .blockchain-wrapper[_ngcontent-%COMP%]   .blocks-wrapper[_ngcontent-%COMP%], .ltr-layout   [_nghost-%COMP%]   .blockchain-wrapper[_ngcontent-%COMP%]   .blocks-wrapper[_ngcontent-%COMP%]{direction:ltr}.rtl-layout[_nghost-%COMP%]   .blockchain-wrapper.time-ltr[_ngcontent-%COMP%]   .blocks-wrapper[_ngcontent-%COMP%], .rtl-layout   [_nghost-%COMP%]   .blockchain-wrapper.time-ltr[_ngcontent-%COMP%]   .blocks-wrapper[_ngcontent-%COMP%], .rtl-layout[_nghost-%COMP%]   .blockchain-wrapper[_ngcontent-%COMP%]   .blocks-wrapper[_ngcontent-%COMP%], .rtl-layout   [_nghost-%COMP%]   .blockchain-wrapper[_ngcontent-%COMP%]   .blocks-wrapper[_ngcontent-%COMP%]{direction:rtl}.tv-container[_ngcontent-%COMP%]{display:flex;margin-top:0;flex-direction:column}"],changeDetection:0}),H})();function is(H,Lt){if(1&H&&(n.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"span",5),n.SDv(4,6),n.qZA()(),n._UZ(5,"div",7),n.TgZ(6,"div",8)(7,"span",9),n.SDv(8,10),n.qZA(),n.TgZ(9,"span",11),n.SDv(10,12),n.qZA(),n.TgZ(11,"span",13),n.SDv(12,14),n.qZA()()(),n.TgZ(13,"div",15)(14,"div",16)(15,"div",17)(16,"div",18),n._uU(17),n.TgZ(18,"span"),n.SDv(19,19),n.qZA()(),n.TgZ(20,"span",20),n._UZ(21,"app-fiat",21),n.qZA()()(),n._UZ(22,"div",22),n.TgZ(23,"div",16)(24,"div",17)(25,"div",18),n._uU(26),n.TgZ(27,"span"),n.SDv(28,23),n.qZA()(),n.TgZ(29,"span",20),n._UZ(30,"app-fiat",24),n.qZA()()(),n.TgZ(31,"div",16)(32,"div",17)(33,"div",18),n._uU(34),n.TgZ(35,"span"),n.SDv(36,25),n.qZA()(),n.TgZ(37,"span",20),n._UZ(38,"app-fiat",26),n.qZA()()(),n.TgZ(39,"div",16)(40,"div",17)(41,"div",18),n._uU(42),n.TgZ(43,"span"),n.SDv(44,27),n.qZA()(),n.TgZ(45,"span",20),n._UZ(46,"app-fiat",28),n.qZA()()()()()),2&H){const E=Lt.ngIf,pt=n.oxw();n.xp6(2),n.Udp("background",pt.noPriority),n.xp6(4),n.Udp("background",pt.gradient),n.xp6(11),n.hij("",E.economyFee," "),n.xp6(4),n.Q6J("value",140*E.economyFee),n.xp6(5),n.hij("",E.hourFee," "),n.xp6(4),n.Q6J("value",140*E.hourFee),n.xp6(4),n.hij("",E.halfHourFee," "),n.xp6(4),n.Q6J("value",140*E.halfHourFee),n.xp6(4),n.hij("",E.fastestFee," "),n.xp6(4),n.Q6J("value",140*E.fastestFee)}}function Ku(H,Lt){if(1&H&&(n.TgZ(0,"div",3)(1,"div",4)(2,"span",29),n.SDv(3,30),n.qZA()(),n._UZ(4,"div",7),n.TgZ(5,"div",8)(6,"span",31),n.SDv(7,32),n.qZA(),n.TgZ(8,"span",31),n.SDv(9,33),n.qZA(),n.TgZ(10,"span",31),n.SDv(11,34),n.qZA()()(),n.TgZ(12,"div",35)(13,"div",16)(14,"div",17),n._UZ(15,"div",36)(16,"div",36),n.qZA()(),n._UZ(17,"div",22),n.TgZ(18,"div",16)(19,"div",17),n._UZ(20,"div",36)(21,"div",36),n.qZA()(),n.TgZ(22,"div",16)(23,"div",17),n._UZ(24,"div",36)(25,"div",36),n.qZA()(),n.TgZ(26,"div",16)(27,"div",17),n._UZ(28,"div",36)(29,"div",36),n.qZA()()()),2&H){const E=n.oxw();n.xp6(1),n.Udp("background",E.noPriority),n.xp6(4),n.Udp("background",E.gradient)}}let iu=(()=>{class H{constructor(E){this.stateService=E,this.gradient="linear-gradient(to right, #2e324e, #2e324e)",this.noPriority="#2e324e"}ngOnInit(){this.isLoadingWebSocket$=this.stateService.isLoadingWebSocket$,this.recommendedFees$=this.stateService.recommendedFees$.pipe((0,gt.b)(E=>{let pt=En.FX.slice().reverse().findIndex(_e=>E.minimumFee>=_e);pt=pt>=0?En.FX.length-pt:pt;const Bt="#"+(En.B5[pt-1]||En.B5[En.B5.length-1]);pt=En.FX.slice().reverse().findIndex(_e=>E.fastestFee>=_e),pt=pt>=0?En.FX.length-pt:pt,this.gradient=`linear-gradient(to right, ${Bt}, ${"#"+(En.B5[pt-1]||En.B5[En.B5.length-1])})`,this.noPriority=Bt}))}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(K.b))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-fees-box"]],decls:5,vars:6,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe,je,hr,jr,fn,ei,_i,hn,Wi,Sn,sa,la,ba;return Lt="\u10D0\u10DC \u10DB\u10D8\u10DC\u10D8\u10DB\u10E3\u10DB\u10D8\u10E1 2x \u10D0\u10DC \u10D3\u10D0\u10D1\u10D0\u10DA \u10DE\u10E0\u10D8\u10DD\u10E0\u10D8\u10E2\u10D4\u10E2\u10E3\u10DA\u10D8 \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD (\u10E0\u10DD\u10DB\u10D4\u10DA\u10D8\u10EA \u10E3\u10E4\u10E0\u10DD \u10D3\u10D0\u10D1\u10D0\u10DA\u10D8\u10D0)",E="\u10D0\u10E0\u10D0 \u10DE\u10E0\u10D8\u10DD\u10E0\u10D8\u10E2\u10D4\u10E2\u10E3\u10DA\u10D8",pt="\u10D7\u10E5\u10D5\u10D4\u10DC\u10D8 \u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D0 \u10EC\u10D4\u10E1\u10D8\u10D7 \u10EE\u10D5\u10D3\u10D4\u10D1\u10D0 \u10DB\u10D4\u10DD\u10E0\u10D4 \u10D3\u10D0 \u10DB\u10D4\u10E1\u10D0\u10DB\u10D4 mempool \u10D8\u10E1 \u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10E1 \u10E8\u10DD\u10E0\u10D8\u10E1",Bt="\u10D3\u10D0\u10D1\u10D0\u10DA\u10D8",Qt="\u10D7\u10E5\u10D5\u10D4\u10DC\u10D8 \u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D0 \u10EC\u10D4\u10E1\u10D8\u10D7 \u10EE\u10D5\u10D3\u10D4\u10D1\u10D0 \u10DE\u10D8\u10E0\u10D5\u10D4\u10DA \u10D3\u10D0 \u10DB\u10D4\u10DB\u10DD\u10E0\u10D4 mempool \u10D8\u10E1 \u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10E1 \u10E8\u10DD\u10E0\u10D8\u10E1",_e="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10D8",Ee="\u10D7\u10E5\u10D5\u10D4\u10DC\u10D8 \u10E2\u10E0\u10D0\u10DC\u10D6\u10D0\u10EA\u10D8\u10D0 \u10DB\u10DD\u10EE\u10D5\u10D3\u10D4\u10D1\u10D0 \u10DE\u10D8\u10E0\u10D5\u10D4\u10DA \u10D3\u10D0 \u10DB\u10D4\u10E1\u10D0\u10DB\u10D4 \u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10E1 \u10E8\u10DD\u10E0\u10D8\u10E1",Xe="\u10DB\u10D0\u10E6\u10D0\u10DA\u10D8",je="\u10E1\u10D0\u10E2/vB",hr="\u10D2\u10D0\u10DB\u10DD\u10DB\u10D3\u10D8\u10DC\u10D0\u10E0\u10D4 \u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD native segwit 140 vByte \u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D8\u10D3\u10D0\u10DC",jr="\u10E1\u10D0\u10E2/vB",fn="\u10D2\u10D0\u10DB\u10DD\u10DB\u10D3\u10D8\u10DC\u10D0\u10E0\u10D4 \u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD native segwit 140 vByte \u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D8\u10D3\u10D0\u10DC",ei="\u10E1\u10D0\u10E2/vB",_i="\u10D2\u10D0\u10DB\u10DD\u10DB\u10D3\u10D8\u10DC\u10D0\u10E0\u10D4 \u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD native segwit 140 vByte \u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D8\u10D3\u10D0\u10DC",hn="\u10E1\u10D0\u10E2/vB",Wi="\u10D2\u10D0\u10DB\u10DD\u10DB\u10D3\u10D8\u10DC\u10D0\u10E0\u10D4 \u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD native segwit 140 vByte \u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D8\u10D3\u10D0\u10DC",Sn="\u10D0\u10E0\u10D0 \u10DE\u10E0\u10D8\u10DD\u10E0\u10D8\u10E2\u10D4\u10E2\u10E3\u10DA\u10D8",sa="\u10D3\u10D0\u10D1\u10D0\u10DA\u10D8",la="\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10D8",ba="\u10DB\u10D0\u10E6\u10D0\u10DA\u10D8",[["class","fee-estimation-wrapper",4,"ngIf","ngIfElse"],["loadingFees",""],[1,"fee-estimation-wrapper"],[1,"d-flex"],[1,"fee-progress-bar"],["ngbTooltip",Lt,"placement","top",1,"fee-label"],E,[1,"band-separator","fill"],[1,"fee-progress-bar","priority"],["ngbTooltip",pt,"placement","top",1,"fee-label","prority"],Bt,["ngbTooltip",Qt,"placement","top",1,"fee-label","prority"],_e,["ngbTooltip",Ee,"placement","top",1,"fee-label","prority"],Xe,[1,"fee-estimation-container"],[1,"item"],[1,"card-text"],[1,"fee-text"],je,[1,"fiat"],["ngbTooltip",hr,"placement","bottom",3,"value"],[1,"band-separator"],jr,["ngbTooltip",fn,"placement","bottom",3,"value"],ei,["ngbTooltip",_i,"placement","bottom",3,"value"],hn,["ngbTooltip",Wi,"placement","bottom",3,"value"],[1,"fee-label"],Sn,[1,"fee-label","prority"],sa,la,ba,[1,"fee-estimation-container","loading-container"],[1,"skeleton-loader"]]},template:function(E,pt){if(1&E&&(n.YNc(0,is,47,12,"div",0),n.ALo(1,"async"),n.ALo(2,"async"),n.YNc(3,Ku,30,4,"ng-template",null,1,n.W1O)),2&E){const Bt=n.MAs(4);n.Q6J("ngIf",!1===n.lcZ(1,2,pt.isLoadingWebSocket$)&&n.lcZ(2,4,pt.recommendedFees$))("ngIfElse",Bt)}},dependencies:[k.O5,ti._L,dr.B,k.Ov],styles:[".card-title[_ngcontent-%COMP%]{color:#4a68b9;font-size:10px;margin-bottom:4px;font-size:1rem}.card-text[_ngcontent-%COMP%]{font-size:22px}.card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;position:relative;top:-2px;display:inline-flex}.card-text[_ngcontent-%COMP%]   .green-color[_ngcontent-%COMP%]{display:block}.fee-estimation-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:row}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:100px;width:-webkit-fill-available;margin:0 auto}@media (min-width: 768px) and (max-width: 991px),(max-width: 575px){.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:none}}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff6;font-size:12px;top:0}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .fee-text[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.1098039216);width:-moz-fit-content;width:fit-content;margin:auto;font-size:20px}.fee-estimation-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .fiat[_ngcontent-%COMP%]{display:block;font-size:13px!important}.loading-container[_ngcontent-%COMP%]{height:50px}.card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]{width:100%;display:block}.card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]:first-child{max-width:70px;margin:10px auto 3px}.card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]:last-child{margin:10px auto 3px;max-width:55px}.fee-progress-bar[_ngcontent-%COMP%]{width:25%;height:22px;margin-bottom:12px;display:flex;flex-direction:row;transition:background-color 1s}.fee-progress-bar.priority[_ngcontent-%COMP%]{width:75%;border-radius:0 10px 10px 0}@media (min-width: 768px) and (max-width: 991px),(max-width: 575px){.fee-progress-bar.priority[_ngcontent-%COMP%]{width:100%}}@media (min-width: 768px) and (max-width: 991px),(max-width: 575px){.fee-progress-bar[_ngcontent-%COMP%]:first-child{display:none}}.band-separator[_ngcontent-%COMP%]{width:5%}@media (min-width: 768px) and (max-width: 991px),(max-width: 575px){.band-separator[_ngcontent-%COMP%]{display:none}}.band-separator.fill[_ngcontent-%COMP%]{height:22px;background:repeating-linear-gradient(90deg,rgb(45,51,72),rgb(45,51,72) 2px,rgb(29,31,49) 2px,rgb(29,31,49) 4px)}.fee-label[_ngcontent-%COMP%]{padding-top:2px;font-size:12px;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-left:5px;padding-right:5px}@media (min-width: 768px) and (max-width: 991px),(max-width: 575px){.fee-label[_ngcontent-%COMP%]{width:33%}}.fee-label.prority[_ngcontent-%COMP%]{width:33%}"],changeDetection:0}),H})();const ju=["tooltip"];function Ff(H,Lt){1&H&&n.GkF(0)}function Ju(H,Lt){1&H&&n.SDv(0,9),2&H&&(n.pQV(Lt.$implicit),n.QtT(0))}function kf(H,Lt){1&H&&n.SDv(0,10),2&H&&(n.pQV(Lt.$implicit),n.QtT(0))}const Bo=function(H){return{$implicit:H}};function Ka(H,Lt){if(1&H&&(n.ynx(0),n.YNc(1,Ff,1,0,"ng-container",6),n.YNc(2,Ju,1,1,"ng-template",null,7,n.W1O),n.YNc(4,kf,1,1,"ng-template",null,8,n.W1O),n.BQk()),2&H){const E=n.MAs(3),pt=n.MAs(5),Bt=n.oxw(3);n.xp6(1),n.Q6J("ngTemplateOutlet",1===Bt.expected?pt:E)("ngTemplateOutletContext",n.VKq(2,Bo,Bt.expected))}}function zf(H,Lt){1&H&&n.GkF(0)}function Uf(H,Lt){1&H&&n.SDv(0,11),2&H&&(n.pQV(Lt.$implicit),n.QtT(0))}function as(H,Lt){1&H&&n.SDv(0,12),2&H&&(n.pQV(Lt.$implicit),n.QtT(0))}function Qu(H,Lt){if(1&H&&(n.ynx(0),n.YNc(1,zf,1,0,"ng-container",6),n.YNc(2,Uf,1,1,"ng-template",null,7,n.W1O),n.YNc(4,as,1,1,"ng-template",null,8,n.W1O),n.BQk()),2&H){const E=n.MAs(3),pt=n.MAs(5),Bt=n.oxw(3);n.xp6(1),n.Q6J("ngTemplateOutlet",1===Bt.mined?pt:E)("ngTemplateOutletContext",n.VKq(2,Bo,Bt.mined))}}function hh(H,Lt){if(1&H&&(n.ynx(0),n.YNc(1,Ka,6,4,"ng-container",5),n.YNc(2,Qu,6,4,"ng-container",5),n.BQk()),2&H){const E=n.oxw(2);n.xp6(1),n.Q6J("ngIf",E.isAhead),n.xp6(1),n.Q6J("ngIf",!E.isAhead)}}function fh(H,Lt){1&H&&n.GkF(0)}function pn(H,Lt){1&H&&n.SDv(0,13),2&H&&(n.pQV(Lt.$implicit),n.QtT(0))}function Hf(H,Lt){1&H&&n.SDv(0,14),2&H&&(n.pQV(Lt.$implicit),n.QtT(0))}function dh(H,Lt){if(1&H&&(n.ynx(0),n.YNc(1,fh,1,0,"ng-container",6),n.YNc(2,pn,1,1,"ng-template",null,7,n.W1O),n.YNc(4,Hf,1,1,"ng-template",null,8,n.W1O),n.BQk()),2&H){const E=n.MAs(3),pt=n.MAs(5),Bt=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",1===Bt.remaining?pt:E)("ngTemplateOutletContext",n.VKq(2,Bo,Bt.remaining))}}function Vf(H,Lt){1&H&&n.GkF(0)}function ph(H,Lt){1&H&&n.SDv(0,15),2&H&&(n.pQV(Lt.$implicit),n.QtT(0))}function Wf(H,Lt){1&H&&n.SDv(0,16),2&H&&(n.pQV(Lt.$implicit),n.QtT(0))}function Rp(H,Lt){if(1&H&&(n.ynx(0),n.YNc(1,Vf,1,0,"ng-container",6),n.YNc(2,ph,1,1,"ng-template",null,7,n.W1O),n.YNc(4,Wf,1,1,"ng-template",null,8,n.W1O),n.BQk()),2&H){const E=n.MAs(3),pt=n.MAs(5),Bt=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",1===Bt.ahead?pt:E)("ngTemplateOutletContext",n.VKq(2,Bo,Bt.ahead))}}function $f(H,Lt){1&H&&n.GkF(0)}function vh(H,Lt){1&H&&n.SDv(0,17),2&H&&(n.pQV(Lt.$implicit),n.QtT(0))}function gh(H,Lt){1&H&&n.SDv(0,18),2&H&&(n.pQV(Lt.$implicit),n.QtT(0))}function Xf(H,Lt){if(1&H&&(n.ynx(0),n.YNc(1,$f,1,0,"ng-container",6),n.YNc(2,vh,1,1,"ng-template",null,7,n.W1O),n.YNc(4,gh,1,1,"ng-template",null,8,n.W1O),n.BQk()),2&H){const E=n.MAs(3),pt=n.MAs(5),Bt=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",1===Bt.behind?pt:E)("ngTemplateOutletContext",n.VKq(2,Bo,Bt.behind))}}function mn(H,Lt){1&H&&(n.ynx(0),n.TgZ(1,"span",19),n.SDv(2,20),n.qZA(),n.BQk())}function Bs(H,Lt){if(1&H&&(n.TgZ(0,"div",1,2),n.ynx(2,3),n.YNc(3,hh,3,2,"ng-container",4),n.YNc(4,dh,6,4,"ng-container",4),n.YNc(5,Rp,6,4,"ng-container",4),n.YNc(6,Xf,6,4,"ng-container",4),n.YNc(7,mn,3,0,"ng-container",4),n.BQk(),n.qZA()),2&H){const E=n.oxw();n.Udp("visibility",E.status?"visible":"hidden")("left",E.tooltipPosition.x+"px")("top",E.tooltipPosition.y+"px"),n.xp6(2),n.Q6J("ngSwitch",E.status),n.xp6(1),n.Q6J("ngSwitchCase","mined"),n.xp6(1),n.Q6J("ngSwitchCase","remaining"),n.xp6(1),n.Q6J("ngSwitchCase","ahead"),n.xp6(1),n.Q6J("ngSwitchCase","behind"),n.xp6(1),n.Q6J("ngSwitchCase","next")}}let Yf=(()=>{class H{constructor(){this.progress=null,this.tooltipPosition={x:0,y:0}}ngOnChanges(E){if(E.cursorPosition&&E.cursorPosition.currentValue){let pt=E.cursorPosition.currentValue.x,Bt=E.cursorPosition.currentValue.y-50;if(this.tooltipElement){const Qt=this.tooltipElement.nativeElement.getBoundingClientRect();pt-=Qt.width/2,pt=Math.min(Math.max(pt,20),window.innerWidth-20-Qt.width)}this.tooltipPosition={x:pt,y:Bt}}(E.progress||E.status)&&this.progress&&this.status&&(this.remaining=this.progress.remainingBlocks,this.expected=this.progress.expectedBlocks,this.mined=this.progress.minedBlocks,this.ahead=Math.max(0,this.mined-this.expected),this.behind=Math.max(0,this.expected-this.mined),this.isAhead=this.ahead>0,this.isBehind=this.behind>0)}}return H.\u0275fac=function(E){return new(E||H)},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-difficulty-tooltip"]],viewQuery:function(E,pt){if(1&E&&n.Gf(ju,5),2&E){let Bt;n.iGM(Bt=n.CRH())&&(pt.tooltipElement=Bt.first)}},inputs:{status:"status",progress:"progress",cursorPosition:"cursorPosition"},features:[n.TTD],decls:1,vars:1,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe,je,hr,jr;return Lt="" + "\ufffd0\ufffd" + " blocks expected",E="" + "\ufffd0\ufffd" + " block expected",pt="" + "\ufffd0\ufffd" + " blocks mined",Bt="" + "\ufffd0\ufffd" + " block mined",Qt="" + "\ufffd0\ufffd" + " blocks remaining",_e="" + "\ufffd0\ufffd" + " block remaining",Ee="" + "\ufffd0\ufffd" + " blocks ahead",Xe="" + "\ufffd0\ufffd" + " block ahead",je="" + "\ufffd0\ufffd" + " blocks behind",hr="" + "\ufffd0\ufffd" + " block behind",jr="\u10E8\u10D4\u10DB\u10D3\u10D4\u10D2\u10D8 \u10D1\u10DA\u10DD\u10D9\u10D8",[["class","difficulty-tooltip",3,"visibility","left","top",4,"ngIf"],[1,"difficulty-tooltip"],["tooltip",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["blocksPlural",""],["blocksSingular",""],Lt,E,pt,Bt,Qt,_e,Ee,Xe,je,hr,[1,"next-block"],jr]},template:function(E,pt){1&E&&n.YNc(0,Bs,8,12,"div",0),2&E&&n.Q6J("ngIf",pt.status)},dependencies:[k.O5,k.tP,k.RF,k.n9],styles:[".difficulty-tooltip[_ngcontent-%COMP%]{position:fixed;background:rgba(17,19,31,.95);border-radius:4px;box-shadow:1px 1px 10px #00000080;color:#b1b1b1;padding:10px 15px;text-align:left;pointer-events:none;max-width:300px;min-width:200px;text-align:center}.difficulty-tooltip[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;white-space:nowrap}.next-block[_ngcontent-%COMP%]{text-transform:lowercase}"]}),H})();function Jn(H,Lt){1&H&&(n.TgZ(0,"div",7),n.SDv(1,8),n.qZA())}function fi(H,Lt){if(1&H&&(n.O4$(),n._UZ(0,"animate",34)),2&H){const E=n.oxw().$implicit;n.uIk("values","#fff;"+(E.expected?"#D81B60":"#2d3348")+";#fff")}}function oa(H,Lt){if(1&H){const E=n.EpF();n.O4$(),n.TgZ(0,"rect",32),n.NdJ("pointerover",function(Bt){const _e=n.CHM(E).$implicit,Ee=n.oxw(2);return n.KtG(Ee.onHover(Bt,_e))})("pointerout",function(Bt){n.CHM(E);const Qt=n.oxw(2);return n.KtG(Qt.onBlur(Bt))}),n.YNc(1,fi,1,1,"animate",33),n.qZA()}if(2&H){const E=Lt.$implicit,pt=n.oxw(2);n.Gre("rect ",E.status,""),n.ekj("hover",pt.hoverSection&&E.status===pt.hoverSection.status),n.uIk("x",E.x)("y",E.y)("width",E.w)("height",E.h),n.xp6(1),n.Q6J("ngIf","next"===E.status)}}const ii=function(){return["fas","caret-up"]};function ga(H,Lt){1&H&&(n.TgZ(0,"span"),n._UZ(1,"fa-icon",37),n.qZA()),2&H&&(n.xp6(1),n.Q6J("icon",n.DdM(2,ii))("fixedWidth",!0))}const vi=function(){return["fas","caret-down"]};function Bi(H,Lt){1&H&&n._UZ(0,"fa-icon",37),2&H&&n.Q6J("icon",n.DdM(2,vi))("fixedWidth",!0)}const dl=function(H){return{color:H}};function Oi(H,Lt){if(1&H&&(n.TgZ(0,"div",35),n.YNc(1,ga,2,3,"span",29),n.YNc(2,Bi,1,3,"ng-template",null,36,n.W1O),n._uU(4),n.ALo(5,"number"),n.ALo(6,"absolute"),n.TgZ(7,"span",23),n._uU(8,"%"),n.qZA()()),2&H){const E=n.MAs(3),pt=n.oxw().ngIf;n.Q6J("ngStyle",n.VKq(9,dl,pt.colorAdjustments)),n.xp6(1),n.Q6J("ngIf",pt.change>0)("ngIfElse",E),n.xp6(3),n.hij(" ",n.xi3(5,4,n.lcZ(6,7,pt.change),"1.2-2")," ")}}function Kf(H,Lt){1&H&&(n.TgZ(0,"div",21),n._uU(1,"\u2014"),n.qZA())}function os(H,Lt){1&H&&(n.TgZ(0,"span"),n._UZ(1,"fa-icon",38),n.qZA()),2&H&&(n.xp6(1),n.Q6J("icon",n.DdM(2,ii))("fixedWidth",!0))}function _h(H,Lt){1&H&&n._UZ(0,"fa-icon",38),2&H&&n.Q6J("icon",n.DdM(2,vi))("fixedWidth",!0)}const jf=function(){return["minute"]};function mh(H,Lt){if(1&H&&(n.TgZ(0,"div",9)(1,"div",10),n.O4$(),n.TgZ(2,"svg",11)(3,"defs")(4,"linearGradient",12),n._UZ(5,"stop",13)(6,"stop",14),n.qZA(),n.TgZ(7,"linearGradient",15),n._UZ(8,"stop",16)(9,"stop",17),n.qZA()(),n.YNc(10,oa,2,10,"rect",18),n.qZA()(),n.kcU(),n.TgZ(11,"div",19)(12,"div",20)(13,"div",21),n._uU(14," ~"),n._UZ(15,"app-time",22),n.qZA(),n.TgZ(16,"div",23),n.SDv(17,24),n.qZA()(),n.TgZ(18,"div",20),n.YNc(19,Oi,9,11,"div",25),n.YNc(20,Kf,2,0,"ng-template",null,26,n.W1O),n.TgZ(22,"div",23)(23,"span"),n.SDv(24,27),n.qZA(),n._uU(25,": "),n.TgZ(26,"span",28),n.YNc(27,os,2,3,"span",29),n.YNc(28,_h,1,3,"ng-template",null,30,n.W1O),n._uU(30),n.ALo(31,"number"),n.ALo(32,"absolute"),n.qZA(),n._uU(33," % "),n.qZA()(),n.TgZ(34,"div",20)(35,"div",21),n._UZ(36,"app-time",31),n.qZA(),n.TgZ(37,"div",23),n._uU(38),n.qZA()()()()),2&H){const E=Lt.ngIf,pt=n.MAs(21),Bt=n.MAs(29),Qt=n.oxw();n.xp6(10),n.Q6J("ngForOf",Qt.shapes),n.xp6(5),n.Q6J("time",E.timeAvg/1e3)("forceFloorOnTimeIntervals",n.DdM(18,jf))("fractionDigits",1),n.xp6(4),n.Q6J("ngIf",E.remainingBlocks<1870)("ngIfElse",pt),n.xp6(7),n.Q6J("ngStyle",n.VKq(19,dl,E.colorPreviousAdjustments)),n.xp6(1),n.Q6J("ngIf",E.previousRetarget>0)("ngIfElse",Bt),n.xp6(3),n.hij(" ",n.xi3(31,13,n.lcZ(32,16,E.previousRetarget),"1.2-2")," "),n.xp6(6),n.Q6J("time",E.estimatedRetargetDate)("fastRender",!0),n.xp6(2),n.hij(" ",E.retargetDateString," ")}}function Jf(H,Lt){1&H&&(n.TgZ(0,"div",10),n._UZ(1,"div",39),n.qZA(),n.TgZ(2,"div",40)(3,"div",20)(4,"div",21),n._UZ(5,"div",39)(6,"div",39),n.qZA()(),n.TgZ(7,"div",20)(8,"div",21),n._UZ(9,"div",39)(10,"div",39),n.qZA()(),n.TgZ(11,"div",20)(12,"div",21),n._UZ(13,"div",39)(14,"div",39),n.qZA()()())}function Qf(H,Lt){if(1&H&&n._UZ(0,"app-difficulty-tooltip",41),2&H){const E=Lt.ngIf,pt=n.oxw();n.Q6J("cursorPosition",pt.tooltipPosition)("status",pt.hoverSection.status)("progress",E)}}let qf=(()=>{class H{constructor(E,pt){this.stateService=E,this.locale=pt,this.showProgress=!0,this.showHalving=!1,this.showTitle=!0,this.tooltipPosition={x:0,y:0}}ngOnInit(){this.isLoadingWebSocket$=this.stateService.isLoadingWebSocket$,this.difficultyEpoch$=(0,Ko.a)([this.stateService.blocks$.pipe((0,yt.U)(([E])=>E)),this.stateService.difficultyAdjustment$]).pipe((0,yt.U)(([E,pt])=>{let Bt="#ffffff66";pt.difficultyChange>0&&(Bt="#3bcc49"),pt.difficultyChange<0&&(Bt="#dc3545");let Qt="#dc3545";pt.previousRetarget?(pt.previousRetarget>=0&&(Qt="#3bcc49"),0===pt.previousRetarget&&(Qt="#ffffff66")):Qt="#ffffff66";const _e=21e4-E.height%21e4,Ee=(new Date).getTime()+6e5*_e,Xe=2016*Math.floor(this.stateService.latestBlockHeight/2016),je=Math.floor(Xe+pt.expectedBlocks);let hr;return(Xe!==this.epochStart||je!==this.expectedHeight||this.currentHeight!==this.stateService.latestBlockHeight)&&(this.epochStart=Xe,this.expectedHeight=je,this.currentHeight=this.stateService.latestBlockHeight,this.currentIndex=this.currentHeight-this.epochStart,this.expectedIndex=Math.min(this.expectedHeight-this.epochStart,2016)-1,this.difference=this.currentIndex-this.expectedIndex,this.shapes=[],this.shapes=this.shapes.concat(this.blocksToShapes(0,Math.min(this.currentIndex,this.expectedIndex),"mined",!0)),this.shapes=this.shapes.concat(this.blocksToShapes(this.currentIndex+1,this.expectedIndex,"behind",!0)),this.shapes=this.shapes.concat(this.blocksToShapes(this.expectedIndex+1,this.currentIndex,"ahead",!1)),this.currentIndex<2015&&(this.shapes=this.shapes.concat(this.blocksToShapes(this.currentIndex+1,this.currentIndex+1,"next",this.expectedIndex>this.currentIndex))),this.shapes=this.shapes.concat(this.blocksToShapes(Math.max(this.currentIndex+2,this.expectedIndex+1),2105,"remaining",!1))),hr=pt.remainingBlocks>1870?new Date(pt.estimatedRetargetDate).toLocaleDateString(this.locale,{month:"long",day:"numeric"}):new Date(pt.estimatedRetargetDate).toLocaleTimeString(this.locale,{month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),{base:`${pt.progressPercent.toFixed(2)}%`,change:pt.difficultyChange,progress:pt.progressPercent,minedBlocks:this.currentIndex+1,remainingBlocks:pt.remainingBlocks-1,expectedBlocks:Math.floor(pt.expectedBlocks),colorAdjustments:Bt,colorPreviousAdjustments:Qt,newDifficultyHeight:pt.nextRetargetHeight,estimatedRetargetDate:pt.estimatedRetargetDate,retargetDateString:hr,previousRetarget:pt.previousRetarget,blocksUntilHalving:_e,timeUntilHalving:Ee,timeAvg:pt.timeAvg}}))}blocksToShapes(E,pt,Bt,Qt=!1){const _e=E%9,Ee=Math.floor(E/9),Xe=pt%9,je=Math.floor(pt/9);if(Ee>je)return[];if(Ee===je)return[{x:Ee,y:_e,w:1,h:1+Xe-_e,status:Bt,expected:Qt}];const hr=[];return hr.push({x:Ee,y:_e,w:1,h:9-_e,status:Bt,expected:Qt}),hr.push({x:je,y:0,w:1,h:Xe+1,status:Bt,expected:Qt}),Ee<je-1&&hr.push({x:Ee+1,y:0,w:je-Ee-1,h:9,status:Bt,expected:Qt}),hr}onPointerMove(E){this.tooltipPosition={x:E.clientX,y:E.clientY}}onHover(E,pt){this.hoverSection=pt}onBlur(E){this.hoverSection=null}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(K.b),n.Y36(n.soG))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-difficulty"]],hostBindings:function(E,pt){1&E&&n.NdJ("pointermove",function(Qt){return pt.onPointerMove(Qt)})},inputs:{showProgress:"showProgress",showHalving:"showHalving",showTitle:"showTitle"},decls:12,vars:12,consts:function(){let Lt,E,pt;return Lt="\u10E1\u10D8\u10E0\u10D7\u10E3\u10DA\u10D4",E="Average block time",pt="\u10EC\u10D8\u10DC\u10D0",[["class","main-title",4,"ngIf"],[1,"card-wrapper"],[1,"card"],[1,"card-body","more-padding"],["class","difficulty-adjustment-container",4,"ngIf","ngIfElse"],["loadingDifficulty",""],[3,"cursorPosition","status","progress",4,"ngIf"],[1,"main-title"],Lt,[1,"difficulty-adjustment-container"],[1,"epoch-progress"],["height","22px","width","100%","viewBox","0 0 224 9","shape-rendering","crispEdges","preserveAspectRatio","none",1,"epoch-blocks"],["id","diff-gradient","x1","0%","y1","0%","x2","100%","y2","0%","gradientUnits","userSpaceOnUse"],["offset","0%","stop-color","#105fb0"],["offset","100%","stop-color","#9339f4"],["id","diff-hover-gradient","x1","0%","y1","0%","x2","100%","y2","0%","gradientUnits","userSpaceOnUse"],["offset","0%","stop-color","#2486eb"],["offset","100%","stop-color","#ae6af7"],[3,"class","hover","pointerover","pointerout",4,"ngFor","ngForOf"],[1,"difficulty-stats"],[1,"item"],[1,"card-text"],[3,"time","forceFloorOnTimeIntervals","fractionDigits"],[1,"symbol"],E,["class","card-text bigger",3,"ngStyle",4,"ngIf","ngIfElse"],["recentlyAdjusted",""],pt,[3,"ngStyle"],[4,"ngIf","ngIfElse"],["arrowDownPreviousDifficulty",""],["kind","until",3,"time","fastRender"],[3,"pointerover","pointerout"],["attributeType","XML","attributeName","fill","dur","2s","repeatCount","indefinite",4,"ngIf"],["attributeType","XML","attributeName","fill","dur","2s","repeatCount","indefinite"],[1,"card-text","bigger",3,"ngStyle"],["arrowDownDifficulty",""],[1,"retarget-sign",3,"icon","fixedWidth"],[1,"previous-retarget-sign",3,"icon","fixedWidth"],[1,"skeleton-loader"],[1,"difficulty-skeleton","loading-container"],[3,"cursorPosition","status","progress"]]},template:function(E,pt){if(1&E&&(n.YNc(0,Jn,2,0,"div",0),n.TgZ(1,"div",1)(2,"div",2)(3,"div",3),n.YNc(4,mh,39,21,"div",4),n.ALo(5,"async"),n.ALo(6,"async"),n.qZA()()(),n.YNc(7,Jf,15,0,"ng-template",null,5,n.W1O),n.YNc(9,Qf,1,3,"app-difficulty-tooltip",6),n.ALo(10,"async"),n.ALo(11,"async")),2&E){const Bt=n.MAs(8);n.Q6J("ngIf",pt.showTitle),n.xp6(4),n.Q6J("ngIf",!1===n.lcZ(5,4,pt.isLoadingWebSocket$)&&n.lcZ(6,6,pt.difficultyEpoch$))("ngIfElse",Bt),n.xp6(5),n.Q6J("ngIf",pt.hoverSection&&!1===n.lcZ(10,8,pt.isLoadingWebSocket$)&&n.lcZ(11,10,pt.difficultyEpoch$))}},dependencies:[k.sg,k.O5,k.PC,_.BN,Ln.G,Yf,k.Ov,k.JJ,Fn],styles:[".difficulty-adjustment-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.difficulty-stats[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;height:50.5px}.difficulty-stats[_ngcontent-%COMP%]   .shared-block[_ngcontent-%COMP%]{color:#fff6;font-size:12px}.difficulty-stats[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:0 5px;width:100%}.difficulty-stats[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(1){display:none}@media (min-width: 485px){.difficulty-stats[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(1){display:table-cell}}@media (min-width: 768px){.difficulty-stats[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(1){display:none}}@media (min-width: 992px){.difficulty-stats[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(1){display:table-cell}}.difficulty-stats[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:18px;margin:auto;position:relative;margin-bottom:.2rem}.difficulty-stats[_ngcontent-%COMP%]   .card-text.bigger[_ngcontent-%COMP%]{font-size:20px;margin-bottom:0}.difficulty-skeleton[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;height:50.5px}@media (min-width: 376px){.difficulty-skeleton[_ngcontent-%COMP%]{flex-direction:row}}.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{min-width:120px;max-width:150px;margin:0;width:-webkit-fill-available}@media (min-width: 376px){.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0 auto}}.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:none}@media (min-width: 485px){.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:block}}@media (min-width: 768px){.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:none}}@media (min-width: 992px){.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:first-child{display:block}}.difficulty-skeleton[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.difficulty-skeleton[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]{width:100%;display:block}.difficulty-skeleton[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]:first-child{margin:10px auto 4px;max-width:80px}.difficulty-skeleton[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]:last-child{margin:10px auto 0;max-width:120px}.card[_ngcontent-%COMP%]{background-color:#1d1f31;height:100%}.card-title[_ngcontent-%COMP%]{color:#4a68b9;font-size:1rem}.progress[_ngcontent-%COMP%]{display:inline-flex;width:100%;background-color:#2d3348;height:1.1rem;max-width:180px}.skeleton-loader[_ngcontent-%COMP%]{max-width:100%}.more-padding[_ngcontent-%COMP%]{padding:18px}.small-bar[_ngcontent-%COMP%]{height:8px;top:-4px;max-width:120px}.loading-container[_ngcontent-%COMP%]{min-height:50.5px}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto!important}.card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;flex:inherit;text-align:center;flex-direction:column;justify-content:space-around;padding:20px}.retarget-sign[_ngcontent-%COMP%]{margin-right:-3px;font-size:14px;top:-2px;position:relative}.previous-retarget-sign[_ngcontent-%COMP%]{margin-right:-2px;font-size:10px}.symbol[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}.epoch-progress[_ngcontent-%COMP%]{width:100%;height:22px;margin-bottom:12px}.epoch-blocks[_ngcontent-%COMP%]{display:block;width:100%;background:#2d3348}.epoch-blocks[_ngcontent-%COMP%]   .rect[_ngcontent-%COMP%]{fill:#2d3348}.epoch-blocks[_ngcontent-%COMP%]   .rect.behind[_ngcontent-%COMP%]{fill:#d81b60}.epoch-blocks[_ngcontent-%COMP%]   .rect.mined[_ngcontent-%COMP%]{fill:url(#diff-gradient)}.epoch-blocks[_ngcontent-%COMP%]   .rect.ahead[_ngcontent-%COMP%]{fill:#1a9436}.epoch-blocks[_ngcontent-%COMP%]   .rect.hover[_ngcontent-%COMP%]{fill:#535e84}.epoch-blocks[_ngcontent-%COMP%]   .rect.hover.behind[_ngcontent-%COMP%]{fill:#e94d86}.epoch-blocks[_ngcontent-%COMP%]   .rect.hover.mined[_ngcontent-%COMP%]{fill:url(#diff-hover-gradient)}.epoch-blocks[_ngcontent-%COMP%]   .rect.hover.ahead[_ngcontent-%COMP%]{fill:#29d951}.blocks-ahead[_ngcontent-%COMP%]{color:#3bcc49}.blocks-behind[_ngcontent-%COMP%]{color:#d81b60}"],changeDetection:0}),H})();var td=D(4766),ed=D(9168),rd=D(7787);function qu(H,Lt){1&H&&n.SDv(0,3)}function Ca(H,Lt){if(1&H&&(n.TgZ(0,"span",4),n._uU(1),n.ALo(2,"amountShortener"),n.qZA(),n.TgZ(3,"span",5),n._uU(4),n.ALo(5,"number"),n.qZA(),n._uU(6,"\xa0"),n.TgZ(7,"span",6),n._uU(8),n.qZA()),2&H){const E=n.oxw().ngIf;n.xp6(1),n.Oqu(n.lcZ(2,3,E.amount)),n.xp6(3),n.Oqu(n.xi3(5,5,E.amount,"1.2-2")),n.xp6(4),n.Oqu(E.ticker)}}function ou(H,Lt){if(1&H&&(n.ynx(0),n.YNc(1,qu,1,0,"ng-template",1),n.YNc(2,Ca,9,8,"ng-template",null,2,n.W1O),n.BQk()),2&H){const E=Lt.ngIf,pt=n.MAs(3);n.xp6(1),n.Q6J("ngIf",-1===E.amount)("ngIfElse",pt)}}let xh=(()=>{class H{constructor(E,pt,Bt){this.electrsApiService=E,this.assetsService=pt,this.locale=Bt}ngOnInit(){this.circulatingAmount$=(0,Ko.a)([this.electrsApiService.getAsset$(this.assetId),this.assetsService.getAssetsMinimalJson$]).pipe((0,yt.U)(([E,pt])=>{const Bt=pt[E.asset_id];return E.chain_stats.has_blinded_issuances?{amount:-1,ticker:""}:E.asset_id===td.N.nativeAssetId?{amount:this.formatAmount(E.chain_stats.peg_in_amount-E.chain_stats.burned_amount-E.chain_stats.peg_out_amount,Bt[3]),ticker:Bt[1]}:{amount:this.formatAmount(E.chain_stats.issued_amount-E.chain_stats.burned_amount,Bt[3]),ticker:Bt[1]}}))}formatAmount(E,pt=0){return parseFloat((0,ot.h6)(E,-pt))}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(ed.K),n.Y36(rd.z),n.Y36(n.soG))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-asset-circulation"]],inputs:{assetId:"assetId"},decls:2,vars:3,consts:function(){let Lt;return Lt="\u10D9\u10DD\u10DC\u10E4\u10D8\u10D3\u10D4\u10DC\u10EA\u10D8\u10D0\u10DA\u10E3\u10E0\u10D8",[[4,"ngIf"],[3,"ngIf","ngIfElse"],["default",""],Lt,[1,"d-inline-block","d-md-none"],[1,"d-none","d-md-inline-block"],[1,"ticker"]]},template:function(E,pt){1&E&&(n.YNc(0,ou,4,2,"ng-container",0),n.ALo(1,"async")),2&E&&n.Q6J("ngIf",n.lcZ(1,1,pt.circulatingAmount$))},dependencies:[k.O5,k.Ov,k.JJ,Za.j],styles:[".ticker[_ngcontent-%COMP%]{color:gray}"],changeDetection:0}),H})();var en=D(5084);function su(H,Lt){1&H&&(n.TgZ(0,"div",2),n._UZ(1,"div",3),n.qZA())}let Sh=(()=>{class H{constructor(E){this.locale=E,this.height="200",this.right="10",this.top="20",this.left="50",this.template="widget",this.isLoading=!0,this.pegsChartOption={},this.pegsChartInitOption={renderer:"svg"}}ngOnInit(){this.isLoading=!0}ngOnChanges(){!this.data||(this.pegsChartOptions=this.createChartOptions(this.data.series,this.data.labels))}rendered(){!this.data||(this.isLoading=!1)}createChartOptions(E,pt){return{grid:{height:this.height,right:this.right,top:this.top,left:this.left},animation:!1,dataZoom:[{type:"inside",realtime:!0,zoomOnMouseWheel:"advanced"===this.template,maxSpan:100,minSpan:10},{show:"advanced"===this.template,type:"slider",brushSelect:!1,realtime:!0,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}],tooltip:{trigger:"axis",position:(Bt,Qt,_e,Ee,Xe)=>{const je={top:-20};return je[["left","right"][+(Bt[0]<Xe.viewSize[0]/2)]]=80,je},extraCssText:`width: ${"widget"===this.template?"125px":"135px"};\n                      background: transparent;\n                      border: none;\n                      box-shadow: none;`,axisPointer:{type:"line"},formatter:Bt=>{let _e='<div class="title">'+Bt[0].axisValue+"</div>";return Bt.map((Ee,Xe)=>{Xe<26&&(_e+=`<div class="item">\n                <div class="indicator-container"><span class="indicator" style="background-color: #116761;"></span></div>\n                <div class="grow"></div>\n                <div class="value">${(0,k.uf)(Ee.value,this.locale,"1.2-2")} <span class="symbol">L-BIT</span></div>\n              </div>`)}),`<div class="tx-wrapper-tooltip-chart ${"advanced"===this.template?"tx-wrapper-tooltip-chart-advanced":""}">${_e}</div>`}},xAxis:{type:"category",axisLabel:{align:"center",fontSize:11,lineHeight:12},boundaryGap:!1,data:pt.map(Bt=>`${(0,k.p6)(Bt,"MMM\ny",this.locale)}`)},yAxis:{type:"value",axisLabel:{fontSize:11},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}}},series:[{data:E,type:"line",stack:"total",smooth:!1,showSymbol:!1,areaStyle:{opacity:.2,color:"#116761"},lineStyle:{width:3,color:"#116761"}}]}}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(n.soG))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-lbtc-pegs-graph"]],inputs:{data:"data"},features:[n.TTD],decls:2,vars:3,consts:[["echarts","",1,"echarts",3,"initOpts","options","chartRendered"],["class","text-center loadingGraphs",4,"ngIf"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"]],template:function(E,pt){1&E&&(n.TgZ(0,"div",0),n.NdJ("chartRendered",function(){return pt.rendered()}),n.qZA(),n.YNc(1,su,2,0,"div",1)),2&E&&(n.Q6J("initOpts",pt.pegsChartInitOption)("options",pt.pegsChartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading))},dependencies:[k.O5,B._w],styles:[".tx-wrapper-tooltip-chart{width:135px}.loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 16px);z-index:100}"],changeDetection:0}),H})();var lu=D(2665),Th=D(9886);function ce(H,Lt){1&H&&(n.ynx(0),n.TgZ(1,"div",57)(2,"div",58),n.SDv(3,59),n.qZA(),n.TgZ(4,"div",30)(5,"div",60),n._UZ(6,"app-fees-box",61),n.qZA()()(),n.TgZ(7,"div",19),n._UZ(8,"app-difficulty"),n.qZA(),n.BQk())}function uu(H,Lt){1&H&&n.GkF(0)}function Rn(H,Lt){if(1&H&&(n.ynx(0),n.TgZ(1,"div",62),n._UZ(2,"app-mempool-graph",63),n.qZA(),n.BQk()),2&H){const E=Lt.ngIf;n.xp6(2),n.Q6J("template","widget")("limitFee",150)("limitFilterFee",1)("data",null==E.value?null:E.value.mempool)("windowPreferenceOverride","2h")}}const Go=function(H){return{value:H}};function tc(H,Lt){if(1&H&&(n.YNc(0,Rn,3,5,"ng-container",18),n.ALo(1,"async")),2&H){const E=n.oxw(2);n.Q6J("ngIf",n.VKq(3,Go,n.lcZ(1,1,E.mempoolStats$)))}}function Gs(H,Lt){if(1&H&&(n._UZ(0,"app-lbtc-pegs-graph",64),n.ALo(1,"async")),2&H){const E=n.oxw(2);n.Q6J("data",n.lcZ(1,1,E.liquidPegsMonth$))}}function cu(H,Lt){1&H&&n.GkF(0)}const uo=function(H,Lt){return[H,Lt]};function nd(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",67)(2,"a",5),n.ALo(3,"relativeUrl"),n._UZ(4,"img",68),n.qZA()(),n.TgZ(5,"td",69)(6,"a",5),n.ALo(7,"relativeUrl"),n._uU(8),n.qZA()(),n.TgZ(9,"td",70),n._UZ(10,"app-asset-circulation",71),n.qZA()()),2&H){const E=Lt.$implicit;n.xp6(2),n.Q6J("routerLink",n.WLB(9,uo,n.lcZ(3,5,"/assets/asset/"),E.asset)),n.xp6(2),n.Q6J("src","/api/v1/asset/"+E.asset+"/icon",n.LSH),n.xp6(2),n.Q6J("routerLink",n.WLB(12,uo,n.lcZ(7,7,"/assets/asset/"),E.asset)),n.xp6(2),n.Oqu(E.name),n.xp6(2),n.Q6J("assetId",E.asset)}}function pl(H,Lt){if(1&H&&(n.TgZ(0,"table",66)(1,"tbody"),n.YNc(2,nd,11,15,"tr",55),n.qZA()()),2&H){const E=Lt.ngIf;n.xp6(2),n.Q6J("ngForOf",E)}}function id(H,Lt){if(1&H&&(n.TgZ(0,"div",62),n.YNc(1,pl,3,1,"table",65),n.ALo(2,"async"),n.qZA()),2&H){const E=n.oxw(2),pt=n.MAs(20);n.xp6(1),n.Q6J("ngIf",n.lcZ(2,2,E.featuredAssets$))("ngIfElse",pt)}}function Zs(H,Lt){if(1&H&&(n.TgZ(0,"div",62),n._UZ(1,"app-incoming-transactions-graph",73),n.qZA()),2&H){const E=Lt.ngIf;n.xp6(1),n.Q6J("left",50)("data",null==E.value?null:E.value.weightPerSecond)("windowPreferenceOverride","2h")}}function ec(H,Lt){if(1&H&&(n.YNc(0,Zs,2,3,"div",72),n.ALo(1,"async")),2&H){const E=n.oxw(2);n.Q6J("ngIf",n.VKq(3,Go,n.lcZ(1,1,E.mempoolStats$)))}}function ss(H,Lt){1&H&&(n.TgZ(0,"th",74),n.SDv(1,75),n.qZA())}function Ch(H,Lt){1&H&&(n.TgZ(0,"th",76),n.SDv(1,77),n.qZA())}function vl(H,Lt){if(1&H&&(n.TgZ(0,"td",74),n._UZ(1,"app-time",82),n.qZA()),2&H){const E=n.oxw().$implicit;n.xp6(1),n.Q6J("time",E.timestamp)("fastRender",!0)}}const rc=function(H){return[H]};function hu(H,Lt){if(1&H&&(n.TgZ(0,"td",76)(1,"a",83),n.ALo(2,"relativeUrl"),n._UZ(3,"img",84),n.TgZ(4,"span",85),n._uU(5),n.qZA()()()),2&H){const E=n.oxw().$implicit;n.xp6(1),n.Q6J("routerLink",n.VKq(5,rc,n.lcZ(2,3,"/mining/pool/"+E.extras.pool.slug))),n.xp6(2),n.s9C("src",E.extras.pool.logo,n.LSH),n.xp6(2),n.Oqu(E.extras.pool.name)}}const ls=function(H){return{block:H}},us=function(H){return{data:H}},cs=function(H){return{width:H}};function Na(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",36)(2,"a",78),n.ALo(3,"relativeUrl"),n._uU(4),n.qZA()(),n.YNc(5,vl,2,2,"td",38),n.YNc(6,hu,6,7,"td",39),n.TgZ(7,"td",40),n._uU(8),n.ALo(9,"number"),n.qZA(),n.TgZ(10,"td",42)(11,"div",79)(12,"div",80),n.ALo(13,"async"),n._uU(14,"\xa0"),n.qZA(),n._UZ(15,"div",81),n.ALo(16,"bytes"),n.qZA()()()),2&H){const E=Lt.$implicit,pt=n.oxw(2);n.xp6(2),n.Q6J("routerLink",n.WLB(20,uo,n.lcZ(3,11,"/block"),E.id))("state",n.VKq(25,us,n.VKq(23,ls,E))),n.xp6(2),n.Oqu(E.height),n.xp6(1),n.Q6J("ngIf",!pt.stateService.env.MINING_DASHBOARD),n.xp6(1),n.Q6J("ngIf",pt.stateService.env.MINING_DASHBOARD),n.xp6(2),n.Oqu(n.lcZ(9,13,E.tx_count)),n.xp6(4),n.Gre("progress-bar progress-mempool ",n.lcZ(13,15,pt.network$),""),n.Q6J("ngStyle",n.VKq(27,cs,E.weight/pt.stateService.env.BLOCK_WEIGHT_UNITS*100+"%")),n.xp6(3),n.Q6J("innerHTML",n.xi3(16,17,E.size,2),n.oJD)}}function gl(H,Lt){if(1&H&&(n.TgZ(0,"th",86),n._uU(1),n.qZA()),2&H){const E=n.oxw(2);n.xp6(1),n.Oqu(E.currency)}}function Vi(H,Lt){if(1&H&&n._UZ(0,"app-amount",92),2&H){const E=n.oxw().$implicit;n.Q6J("radiowavesoshis",E.value)("noFiat",!0)}}function Mh(H,Lt){1&H&&n.SDv(0,93)}function bh(H,Lt){if(1&H&&(n.TgZ(0,"td",86),n._UZ(1,"app-fiat",94),n.qZA()),2&H){const E=n.oxw().$implicit;n.xp6(1),n.Q6J("value",E.value)}}function nc(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",48)(2,"a",5),n.ALo(3,"relativeUrl"),n._UZ(4,"app-truncate",87),n.qZA()(),n.TgZ(5,"td",50),n.YNc(6,Vi,1,2,"app-amount",88),n.ALo(7,"async"),n.ALo(8,"async"),n.YNc(9,Mh,1,0,"ng-template",null,89,n.W1O),n.qZA(),n.YNc(11,bh,2,1,"td",52),n.ALo(12,"async"),n.TgZ(13,"td",53),n._uU(14),n.ALo(15,"feeRounding"),n.TgZ(16,"span",90),n.SDv(17,91),n.qZA()()()),2&H){const E=Lt.$implicit,pt=n.MAs(10),Bt=n.oxw(2);n.xp6(2),n.Q6J("routerLink",n.WLB(17,uo,n.lcZ(3,7,"/tx"),E.txid)),n.xp6(2),n.Q6J("text",E.txid)("lastChars",5),n.xp6(2),n.Q6J("ngIf","liquid"!==n.lcZ(7,9,Bt.network$)&&"liquidtestnet"!==n.lcZ(8,11,Bt.network$))("ngIfElse",pt),n.xp6(5),n.Q6J("ngIf",""===n.lcZ(12,13,Bt.network$)),n.xp6(3),n.hij("",n.lcZ(15,15,E.fee/E.vsize)," ")}}const _l=function(H){return{$implicit:H}},ml=function(){return["fas","external-link-alt"]};function ic(H,Lt){if(1&H&&(n.TgZ(0,"div",17),n.YNc(1,ce,9,0,"ng-container",18),n.ALo(2,"async"),n.ALo(3,"async"),n.TgZ(4,"div",19)(5,"div",20)(6,"div",21)(7,"div",22),n.YNc(8,uu,1,0,"ng-container",23),n._UZ(9,"hr"),n.qZA(),n.YNc(10,tc,2,5,"ng-template",24),n.ALo(11,"async"),n.YNc(12,Gs,2,3,"ng-template",null,25,n.W1O),n.qZA()()(),n.TgZ(14,"div",19)(15,"div",20)(16,"div",26),n.YNc(17,cu,1,0,"ng-container",23),n._UZ(18,"hr"),n.YNc(19,id,3,4,"div",27),n.YNc(20,ec,2,5,"ng-template",null,28,n.W1O),n.qZA()()(),n.TgZ(22,"div",29)(23,"div",30)(24,"div",26)(25,"a",31),n.ALo(26,"relativeUrl"),n.TgZ(27,"h5",32),n.SDv(28,33),n.qZA(),n.TgZ(29,"span"),n._uU(30,"\xa0"),n.qZA(),n._UZ(31,"fa-icon",34),n.qZA(),n.TgZ(32,"table",35)(33,"thead")(34,"th",36),n.SDv(35,37),n.qZA(),n.YNc(36,ss,2,0,"th",38),n.YNc(37,Ch,2,0,"th",39),n.TgZ(38,"th",40),n.SDv(39,41),n.qZA(),n.TgZ(40,"th",42),n.SDv(41,43),n.qZA()(),n.TgZ(42,"tbody"),n.YNc(43,Na,17,29,"tr",44),n.ALo(44,"async"),n.qZA()()()()(),n.TgZ(45,"div",29)(46,"div",30)(47,"div",26)(48,"h5",45),n.SDv(49,46),n.qZA(),n.TgZ(50,"table",47)(51,"thead")(52,"th",48),n.SDv(53,49),n.qZA(),n.TgZ(54,"th",50),n.SDv(55,51),n.qZA(),n.YNc(56,gl,2,1,"th",52),n.ALo(57,"async"),n.TgZ(58,"th",53),n.SDv(59,54),n.qZA()(),n.TgZ(60,"tbody"),n.YNc(61,nc,18,20,"tr",55),n.ALo(62,"async"),n.qZA()(),n.TgZ(63,"div",56),n._uU(64,"\xa0"),n.qZA()()()()()),2&H){const E=Lt.ngIf,pt=n.MAs(13),Bt=n.MAs(21),Qt=n.oxw(),_e=n.MAs(32),Ee=n.MAs(30),Xe=n.MAs(34);n.xp6(1),n.Q6J("ngIf","liquid"!==n.lcZ(2,18,Qt.network$)&&"liquidtestnet"!==n.lcZ(3,20,Qt.network$)),n.xp6(7),n.Q6J("ngTemplateOutlet","liquid"===Qt.stateService.network?_e:Ee)("ngTemplateOutletContext",n.VKq(32,_l,E)),n.xp6(2),n.Q6J("ngIf","liquid"!==n.lcZ(11,22,Qt.network$))("ngIfElse",pt),n.xp6(7),n.Q6J("ngTemplateOutlet","liquid"===Qt.stateService.network?Ee:Xe)("ngTemplateOutletContext",n.VKq(34,_l,E)),n.xp6(2),n.Q6J("ngIf","liquid"===Qt.stateService.network)("ngIfElse",Bt),n.xp6(6),n.Q6J("routerLink",n.VKq(36,rc,n.lcZ(26,24,"/blocks"))),n.xp6(6),n.Q6J("icon",n.DdM(38,ml))("fixedWidth",!0),n.xp6(5),n.Q6J("ngIf",!Qt.stateService.env.MINING_DASHBOARD),n.xp6(1),n.Q6J("ngIf",Qt.stateService.env.MINING_DASHBOARD),n.xp6(6),n.Q6J("ngForOf",n.lcZ(44,26,Qt.blocks$))("ngForTrackBy",Qt.trackByBlock),n.xp6(13),n.Q6J("ngIf",""===n.lcZ(57,28,Qt.network$)),n.xp6(5),n.Q6J("ngForOf",n.lcZ(62,30,Qt.transactions$))}}function gi(H,Lt){1&H&&(n.TgZ(0,"tr")(1,"td",67),n._UZ(2,"div",96),n.qZA(),n.TgZ(3,"td",69),n._UZ(4,"div",96),n.qZA(),n.TgZ(5,"td",97),n._UZ(6,"div",96),n.qZA(),n.TgZ(7,"td",69),n._UZ(8,"div",96),n.qZA()())}const yl=function(){return[1,2,3,4]};function Ph(H,Lt){1&H&&(n.TgZ(0,"table",95)(1,"tbody"),n.YNc(2,gi,9,0,"tr",55),n.qZA()()),2&H&&(n.xp6(2),n.Q6J("ngForOf",n.DdM(1,yl)))}function ac(H,Lt){1&H&&n._UZ(0,"div",96)}function Zo(H,Lt){1&H&&n._UZ(0,"div",98)}function fu(H,Lt){1&H&&n._UZ(0,"span",99)}function oc(H,Lt){1&H&&n._UZ(0,"div",19)}function sc(H,Lt){1&H&&(n.TgZ(0,"h5",45),n.SDv(1,108),n.qZA())}function du(H,Lt){1&H&&(n.TgZ(0,"h5",45),n.SDv(1,109),n.qZA())}function Fs(H,Lt){1&H&&n._uU(0,"< ")}function hs(H,Lt){if(1&H&&(n.TgZ(0,"p",110),n.YNc(1,Fs,1,0,"ng-template",111),n._uU(2),n.ALo(3,"feeRounding"),n.TgZ(4,"span"),n.ynx(5),n.SDv(6,112),n.BQk(),n.qZA()()),2&H){const E=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf",E.value.memPoolInfo.mempoolminfee>1e-5),n.xp6(1),n.hij("",n.lcZ(3,2,1e5*E.value.memPoolInfo.mempoolminfee)," ")}}function Ah(H,Lt){if(1&H&&(n.TgZ(0,"p",110),n._uU(1),n.ALo(2,"number"),n.TgZ(3,"span"),n.SDv(4,113),n.qZA()()),2&H){const E=n.oxw().$implicit;n.xp6(1),n.hij(" ",n.lcZ(2,1,E.value.memPoolInfo.size)," ")}}function ad(H,Lt){if(1&H&&(n.TgZ(0,"div",110)(1,"div",79)(2,"div",80),n._uU(3,"\xa0"),n.qZA(),n.TgZ(4,"div",114),n._uU(5,"\u200e"),n._UZ(6,"span",115),n.ALo(7,"bytes"),n._uU(8," / "),n._UZ(9,"span",115),n.ALo(10,"bytes"),n.qZA()()()),2&H){const E=n.oxw().$implicit;n.xp6(2),n.Gre("progress-bar ",E.value.mempoolSizeProgress,""),n.Q6J("ngStyle",n.VKq(10,cs,E.value.memPoolInfo.usage/E.value.memPoolInfo.maxmempool*100+"%")),n.xp6(4),n.Q6J("innerHTML",n.lcZ(7,6,E.value.memPoolInfo.usage),n.oJD),n.xp6(3),n.Q6J("innerHTML",n.lcZ(10,8,E.value.memPoolInfo.maxmempool),n.oJD)}}function lc(H,Lt){if(1&H&&(n.TgZ(0,"div",100)(1,"div",101),n.YNc(2,sc,2,0,"h5",102),n.YNc(3,du,2,0,"ng-template",null,103,n.W1O),n.YNc(5,hs,7,4,"p",104),n.ALo(6,"async"),n.qZA(),n.TgZ(7,"div",101)(8,"h5",45),n.SDv(9,105),n.qZA(),n.YNc(10,Ah,5,3,"p",104),n.ALo(11,"async"),n.qZA(),n.TgZ(12,"div",106)(13,"h5",45),n.SDv(14,107),n.qZA(),n.YNc(15,ad,11,12,"div",104),n.ALo(16,"async"),n.qZA()()),2&H){const E=Lt.$implicit,pt=n.MAs(4),Bt=n.oxw(),Qt=n.MAs(24),_e=n.MAs(26);n.xp6(2),n.Q6J("ngIf",!E.value||1e-5===E.value.memPoolInfo.mempoolminfee||"liquid"===Bt.stateService.env.BASE_MODULE&&1e-6===E.value.memPoolInfo.mempoolminfee)("ngIfElse",pt),n.xp6(3),n.Q6J("ngIf",!1===n.lcZ(6,8,Bt.isLoadingWebSocket$)&&E.value)("ngIfElse",Qt),n.xp6(5),n.Q6J("ngIf",!1===n.lcZ(11,10,Bt.isLoadingWebSocket$)&&E.value)("ngIfElse",Qt),n.xp6(5),n.Q6J("ngIf",!1===n.lcZ(16,12,Bt.isLoadingWebSocket$)&&E.value)("ngIfElse",_e)}}function uc(H,Lt){if(1&H&&(n.ynx(0),n.TgZ(1,"p",110),n._uU(2),n.ALo(3,"number"),n.TgZ(4,"span"),n._uU(5,"L-BIT"),n.qZA()(),n.BQk()),2&H){const E=Lt.ngIf;n.xp6(2),n.hij("",n.xi3(3,1,E.series.slice(-1)[0],"1.2-2")," ")}}function Oh(H,Lt){if(1&H&&(n.TgZ(0,"div",100)(1,"div",101)(2,"h5",45),n.SDv(3,116),n.qZA(),n.YNc(4,uc,6,4,"ng-container",117),n.ALo(5,"async"),n.qZA()()),2&H){const E=n.oxw(),pt=n.MAs(22);n.xp6(4),n.Q6J("ngIf",n.lcZ(5,2,E.liquidPegsMonth$))("ngIfElse",pt)}}function co(H,Lt){if(1&H&&(n.TgZ(0,"span"),n._uU(1," \xa0"),n.TgZ(2,"span",120),n.ynx(3),n.SDv(4,121),n.BQk(),n._uU(5),n.ALo(6,"async"),n.qZA()()),2&H){const E=n.oxw(3);n.xp6(5),n.hij(" (",n.lcZ(6,1,E.mempoolLoadingStatus$),"%)")}}function fs(H,Lt){if(1&H&&(n.TgZ(0,"div",122)(1,"div",80),n._uU(2,"\xa0"),n.qZA(),n.TgZ(3,"div",114),n._uU(4),n.ALo(5,"number"),n.ALo(6,"ceil"),n.ynx(7),n.SDv(8,123),n.BQk(),n.qZA()()),2&H){const E=n.oxw(2).$implicit;n.xp6(1),n.Gre("progress-bar ",E.value.progressColor,""),n.Q6J("ngStyle",n.VKq(9,cs,E.value.progressWidth)),n.xp6(3),n.hij("\u200e",n.lcZ(5,5,n.lcZ(6,7,E.value.vBytesPerSecond))," ")}}function ds(H,Lt){if(1&H&&(n.YNc(0,co,7,3,"span",117),n.ALo(1,"async"),n.YNc(2,fs,9,11,"ng-template",null,119,n.W1O)),2&H){const E=n.MAs(3),pt=n.oxw(2);n.Q6J("ngIf",100!==n.lcZ(1,2,pt.mempoolLoadingStatus$))("ngIfElse",E)}}function Eh(H,Lt){if(1&H&&(n.TgZ(0,"h5",45),n.SDv(1,118),n.qZA(),n.YNc(2,ds,4,4,"ng-template",24),n.ALo(3,"async")),2&H){const E=Lt.$implicit,pt=n.oxw(),Bt=n.MAs(22);n.xp6(2),n.Q6J("ngIf",!1===n.lcZ(3,2,pt.isLoadingWebSocket$)&&E.value)("ngIfElse",Bt)}}const od=function(){return["/terms-of-service"]},sd=function(){return["/privacy-policy"]};let cc=(()=>{class H{constructor(E,pt,Bt,Qt){this.stateService=E,this.apiService=pt,this.websocketService=Bt,this.seoService=Qt,this.vBytesPerSecondLimit=1667}ngOnDestroy(){this.currencySubscription.unsubscribe()}ngOnInit(){this.isLoadingWebSocket$=this.stateService.isLoadingWebSocket$,this.seoService.resetTitle(),this.websocketService.want(["blocks","stats","mempool-blocks","live-2h-chart"]),this.network$=(0,no.T)((0,dn.of)(""),this.stateService.networkChanged$),this.mempoolLoadingStatus$=this.stateService.loadingIndicators$.pipe((0,yt.U)(E=>void 0!==E.mempool?E.mempool:100)),this.mempoolInfoData$=(0,Ko.a)([this.stateService.mempoolInfo$,this.stateService.vbytesPerSecond$]).pipe((0,yt.U)(([E,pt])=>{const Bt=Math.round(Math.min(pt,this.vBytesPerSecondLimit)/this.vBytesPerSecondLimit*100);let Qt="bg-success";pt>1667&&(Qt="bg-warning"),pt>3e3&&(Qt="bg-danger");const _e=E.usage/E.maxmempool*100;let Ee="bg-danger";return _e<=50?Ee="bg-success":_e<=75&&(Ee="bg-warning"),{memPoolInfo:E,vBytesPerSecond:pt,progressWidth:Bt+"%",progressColor:Qt,mempoolSizeProgress:Ee}})),this.mempoolBlocksData$=this.stateService.mempoolBlocks$.pipe((0,yt.U)(E=>{const pt=E.map(Qt=>Qt.blockSize).reduce((Qt,_e)=>Qt+_e,0),Bt=E.map(Qt=>Qt.blockVSize).reduce((Qt,_e)=>Qt+_e,0);return{size:pt,blocks:Math.ceil(Bt/this.stateService.blockVSize)}})),this.featuredAssets$=this.apiService.listFeaturedAssets$().pipe((0,yt.U)(E=>{const pt=[];for(const Bt of E)"L-BIT"!==Bt.ticker&&Bt.asset&&pt.push(Bt);return pt.slice(0,4)})),this.blocks$=this.stateService.blocks$.pipe((0,gt.b)(([E])=>{this.latestBlockHeight=E.height}),(0,fl.R)((E,[pt])=>{if(E.find(Bt=>Bt.height==pt.height))return E;if(E.unshift(pt),E=E.slice(0,6),!0===this.stateService.env.MINING_DASHBOARD)for(const Bt of E)Bt.extras.pool.logo="/resources/mining-pools/"+Bt.extras.pool.name.toLowerCase().replace(" ","").replace(".","")+".svg";return E},[])),this.transactions$=this.stateService.transactions$.pipe((0,fl.R)((E,pt)=>(E.find(Bt=>Bt.txid==pt.txid)||(E.unshift(pt),E=E.slice(0,6)),E),[])),this.mempoolStats$=this.stateService.connectionState$.pipe((0,Yo.h)(E=>2===E),(0,mt.w)(()=>this.apiService.list2HStatistics$()),(0,mt.w)(E=>(0,no.T)(this.stateService.live2Chart$.pipe((0,fl.R)((pt,Bt)=>(pt.unshift(Bt),pt.slice(0,120)),E)),(0,dn.of)(E))),(0,yt.U)(E=>({mempool:E,weightPerSecond:this.handleNewBitexplorerData(E.concat([]))})),(0,V.B)()),("liquid"===this.stateService.network||"liquidtestnet"===this.stateService.network)&&(this.liquidPegsMonth$=this.apiService.listLiquidPegsMonth$().pipe((0,yt.U)(E=>{const pt=E.map(Qt=>Qt.date),Bt=E.map(Qt=>parseFloat(Qt.amount)/1e8);return Bt.reduce((Qt,_e,Ee)=>Bt[Ee]=Qt+_e,0),{series:Bt,labels:pt}}),(0,V.B)())),this.currencySubscription=this.stateService.fiatCurrency$.subscribe(E=>{this.currency=E})}handleNewBitexplorerData(E){return E.reverse(),{labels:E.map(Bt=>Bt.added),series:[E.map(Bt=>[1e3*Bt.added,Bt.vbytes_per_second])]}}trackByBlock(E,pt){return pt.height}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(K.b),n.Y36(et.s),n.Y36(ya.i),n.Y36(N.v))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-dashboard"]],decls:35,vars:14,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe,je,hr,jr,fn,ei,_i,hn,Wi,Sn,sa,la,ba,Bn,Ra,ho,Yn,zs,gs;return Lt="\u1C9B\u10DD\u10DB\u10E1\u10D0\u10EE\u10E3\u10E0\u10D4\u10D1\u10D8\u10E1 \u10DE\u10D8\u10E0\u10DD\u10D1\u10D4\u10D1\u10D8",E="\u1C99\u10DD\u10DC\u10E4\u10D8\u10D3\u10D4\u10DC\u10EA\u10D8\u10D0\u10DA\u10E3\u10E0\u10DD\u10D1\u10D8\u10E1 \u10DE\u10DD\u10DA\u10D8\u10E2\u10D8\u10D9\u10D0",pt="Broadcast Transaction",Bt="\u10D1\u10DD\u10DA\u10DD \u10D1\u10DA\u10DD\u10D9\u10D4\u10D1\u10D8",Qt="\u10E1\u10D8\u10DB\u10D0\u10E6\u10DA\u10D4",_e="\u10E2\u10E0\u10D0\u10DC\u10D6\u10D0\u10E5\u10EA\u10D8\u10D0",Ee="\u10D6\u10DD\u10DB\u10D0",Xe="\u10D1\u10DD\u10DA\u10DD \u10E2\u10E0\u10D0\u10DC\u10D6\u10D0\u10E5\u10EA\u10D8\u10D4\u10D1\u10D8",je="\u10E2\u10E0\u10D0\u10DC\u10E1\u10D0\u10E5\u10EA\u10D8\u10D8\u10E1 ID",hr="\u10D7\u10D0\u10DC\u10EE\u10D0",jr="\u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD",fn="\u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD",ei="\u10DB\u10DD\u10DE\u10DD\u10D5\u10D4\u10D1\u10E3\u10DA\u10D8",_i="Pool",hn="\u10E1\u10D0\u10E2/vB",Wi="\u10D9\u10DD\u10DC\u10E4\u10D8\u10D3\u10D4\u10DC\u10EA\u10D8\u10D0\u10DA\u10E3\u10E0\u10D8",Sn="\u10D3\u10D0\u10E3\u10D3\u10D0\u10E1\u10E2\u10E3\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8",sa="\u10DB\u10D4\u10EE\u10E1\u10D8\u10D4\u10E0\u10D4\u10D1\u10D0",la="\u10DB\u10D8\u10DC. \u10E1\u10D0\u10D9\u10DD\u10DB\u10D8\u10E1\u10D8\u10DD",ba="\u10EC\u10D0\u10E8\u10DA\u10D0",Bn="\u10E1\u10D0\u10E2/vB",Ra="\u10E2\u10E0\u10D0\u10DC\u10D6\u10D0\u10E5\u10EA\u10D8\u10D0",ho="L-BIT \u10D1\u10E0\u10E3\u10DC\u10D5\u10D0\u10E8\u10D8",Yn="\u10DB\u10D8\u10DB\u10D3\u10D8\u10DC\u10D0\u10E0\u10D4 \u10E2\u10E0\u10D0\u10DC\u10D6\u10D0\u10E5\u10EA\u10D8\u10D4\u10D1\u10D8",zs="Backend \u10E1\u10D8\u10DC\u10E5\u10E0\u10DD\u10DC\u10D3\u10D4\u10D1\u10D0",gs="vB/s",[[1,"container-xl","dashboard-container"],["class","row row-cols-1 row-cols-md-2",4,"ngIf"],[1,"pref-selectors"],[1,"selector"],[1,"terms-of-service"],[3,"routerLink"],Lt,E,pt,["loadingAssetsTable",""],["loadingTransactions",""],["loading",""],["loadingbig",""],["emptyBlock",""],["mempoolTable",""],["lbtcPegs",""],["txPerSecond",""],[1,"row","row-cols-1","row-cols-md-2"],[4,"ngIf"],[1,"col"],[1,"card","graph-card"],[1,"card-body","pl-0"],[2,"padding-left","1.25rem"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngIf","ngIfElse"],["liquidPegs",""],[1,"card-body"],["class","mempool-graph",4,"ngIf","ngIfElse"],["mempoolGraph",""],[1,"col",2,"max-height","410px"],[1,"card"],["href","",1,"title-link",3,"routerLink"],[1,"card-title","d-inline"],Bt,[2,"vertical-align","text-top","font-size","13px","color","#4a68b9",3,"icon","fixedWidth"],[1,"table","lastest-blocks-table"],[1,"table-cell-height"],Qt,["class","table-cell-mined",4,"ngIf"],["class","table-cell-mined pl-lg-4",4,"ngIf"],[1,"table-cell-transaction-count"],_e,[1,"table-cell-size"],Ee,[4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-title"],Xe,[1,"table","latest-transactions"],[1,"table-cell-txid"],je,[1,"table-cell-radiowavesoshis"],hr,["class","table-cell-fiat",4,"ngIf"],[1,"table-cell-fees"],jr,[4,"ngFor","ngForOf"],[1,""],[1,"col","card-wrapper"],[1,"main-title"],fn,[1,"card-body","less-padding"],[1,"d-block"],[1,"mempool-graph"],[3,"template","limitFee","limitFilterFee","data","windowPreferenceOverride"],[3,"data"],["class","table table-borderless table-striped",4,"ngIf","ngIfElse"],[1,"table","table-borderless","table-striped"],[1,"asset-icon"],[1,"assetIcon",3,"src"],[1,"asset-title"],[1,"circulating-amount"],[3,"assetId"],["class","mempool-graph",4,"ngIf"],[3,"left","data","windowPreferenceOverride"],[1,"table-cell-mined"],ei,[1,"table-cell-mined","pl-lg-4"],_i,[3,"routerLink","state"],[1,"progress"],["role","progressbar",3,"ngStyle"],[1,"progress-text",3,"innerHTML"],["kind","since",3,"time","fastRender"],[1,"clear-link",3,"routerLink"],["width","22","height","22","onError","this.src = '/resources/mining-pools/default.svg'",3,"src"],[1,"pool-name"],[1,"table-cell-fiat"],[3,"text","lastChars"],["digitsInfo","1.2-4",3,"radiowavesoshis","noFiat",4,"ngIf","ngIfElse"],["liquidAmount",""],[1,"symbol"],hn,["digitsInfo","1.2-4",3,"radiowavesoshis","noFiat"],Wi,["digitsInfo","1.0-0",3,"value"],[1,"table","table-borderless","table-striped","asset-table"],[1,"skeleton-loader","skeleton-loader-transactions"],[1,"asset-title","d-none","d-md-table-cell"],[1,"skeleton-loader"],[1,"skeleton-loader","skeleton-loader-big"],[1,"mempool-info-data"],[1,"item"],["class","card-title",4,"ngIf","ngIfElse"],["purgingText",""],["class","card-text",4,"ngIf","ngIfElse"],Sn,[1,"item","bar"],sa,la,ba,[1,"card-text"],[3,"ngIf"],Bn,Ra,[1,"progress-text"],[3,"innerHTML"],ho,[4,"ngIf","ngIfElse"],Yn,["inSync",""],[1,"badge","badge-pill","badge-warning"],zs,[1,"progress","inc-tx-progress-bar"],gs]},template:function(E,pt){1&E&&(n.TgZ(0,"div",0),n.YNc(1,ic,65,39,"div",1),n.ALo(2,"async"),n.TgZ(3,"div",2)(4,"div",3),n._UZ(5,"app-language-selector"),n.qZA(),n.TgZ(6,"div",3),n._UZ(7,"app-fiat-selector"),n.qZA()(),n.TgZ(8,"div",4)(9,"a",5),n.SDv(10,6),n.qZA(),n._uU(11," | "),n.TgZ(12,"a",5),n.SDv(13,7),n.qZA(),n._uU(14," | "),n.TgZ(15,"a",5),n.SDv(16,8),n.ALo(17,"relativeUrl"),n.qZA()(),n._UZ(18,"br"),n.qZA(),n.YNc(19,Ph,3,2,"ng-template",null,9,n.W1O),n.YNc(21,ac,1,0,"ng-template",null,10,n.W1O),n.YNc(23,Zo,1,0,"ng-template",null,11,n.W1O),n.YNc(25,fu,1,0,"ng-template",null,12,n.W1O),n.YNc(27,oc,1,0,"ng-template",null,13,n.W1O),n.YNc(29,lc,17,14,"ng-template",null,14,n.W1O),n.YNc(31,Oh,6,4,"ng-template",null,15,n.W1O),n.YNc(33,Eh,4,4,"ng-template",null,16,n.W1O)),2&E&&(n.xp6(1),n.Q6J("ngIf",n.VKq(8,Go,n.lcZ(2,4,pt.mempoolInfoData$))),n.xp6(8),n.Q6J("routerLink",n.DdM(10,od)),n.xp6(3),n.Q6J("routerLink",n.DdM(11,sd)),n.xp6(3),n.Q6J("routerLink",n.VKq(12,rc,n.lcZ(17,6,"/tx/push"))))},dependencies:[k.sg,k.O5,k.tP,k.PC,St.yS,_.BN,Ln.G,dr.B,Mn.S,oi.V,kr.G,iu,qf,xh,en.J,Wu,ru,Sh,k.Ov,k.JJ,q.w,bo.$,lu.K,Th.D],styles:[".dashboard-container[_ngcontent-%COMP%]{padding-bottom:60px;text-align:center;margin-top:.5rem}@media (min-width: 992px){.dashboard-container[_ngcontent-%COMP%]{padding-bottom:0}}.dashboard-container[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{margin-bottom:1.5rem}.card[_ngcontent-%COMP%]{background-color:#1d1f31;height:100%}.card-title[_ngcontent-%COMP%]{color:#4a68b9;font-size:1rem}.info-block[_ngcontent-%COMP%]{float:left;width:350px;line-height:25px}.progress[_ngcontent-%COMP%]{display:inline-flex;width:100%;background-color:#2d3348;height:1.1rem;max-width:180px}.bg-warning[_ngcontent-%COMP%]{background-color:#b58800!important}.skeleton-loader[_ngcontent-%COMP%]{max-width:100%}.more-padding[_ngcontent-%COMP%]{padding:18px}.graph-card[_ngcontent-%COMP%]{height:100%}@media (min-width: 992px){.graph-card[_ngcontent-%COMP%]{height:385px}}.mempool-info-data[_ngcontent-%COMP%]{min-height:56px;display:block}@media (min-width: 485px){.mempool-info-data[_ngcontent-%COMP%]{display:flex;flex-direction:row}}.mempool-info-data[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:10px}.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:50%;margin:0 auto 20px;display:inline-block}@media (min-width: 485px){.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0 auto 10px}}@media (min-width: 785px){.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0 auto}}.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:last-child{margin:0 auto}.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:2}@media (min-width: 485px){.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:3}}.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){order:3}@media (min-width: 485px){.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){order:2;display:block}}@media (min-width: 768px){.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:none}}@media (min-width: 992px){.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:block}}.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:18px}.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff6;font-size:12px}.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{width:90%}@media (min-width: 768px){.mempool-info-data[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{width:100%}}.mempool-info-data[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:93%;margin:0 5px 20px}@media (min-width: 485px){.mempool-info-data[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{max-width:200px;margin:0 auto}}.mempool-info-data[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]{width:100%;max-width:100px;display:block;margin:18px auto 0}.mempool-info-data[_ngcontent-%COMP%]   .skeleton-loader-big[_ngcontent-%COMP%]{max-width:180px}.latest-transactions[_ngcontent-%COMP%]{width:100%;text-align:left;table-layout:fixed}.latest-transactions[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .latest-transactions[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .latest-transactions[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:0px;padding-top:.71rem!important;padding-bottom:.75rem!important}.latest-transactions[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{overflow:hidden;width:25%}.latest-transactions[_ngcontent-%COMP%]   .table-cell-radiowavesoshis[_ngcontent-%COMP%]{display:none;text-align:right}@media (min-width: 576px){.latest-transactions[_ngcontent-%COMP%]   .table-cell-radiowavesoshis[_ngcontent-%COMP%]{display:table-cell}}@media (min-width: 768px){.latest-transactions[_ngcontent-%COMP%]   .table-cell-radiowavesoshis[_ngcontent-%COMP%]{display:none}}@media (min-width: 1100px){.latest-transactions[_ngcontent-%COMP%]   .table-cell-radiowavesoshis[_ngcontent-%COMP%]{display:table-cell}}.latest-transactions[_ngcontent-%COMP%]   .table-cell-fiat[_ngcontent-%COMP%]{display:none;text-align:right}@media (min-width: 485px){.latest-transactions[_ngcontent-%COMP%]   .table-cell-fiat[_ngcontent-%COMP%]{display:table-cell}}@media (min-width: 768px){.latest-transactions[_ngcontent-%COMP%]   .table-cell-fiat[_ngcontent-%COMP%]{display:none}}@media (min-width: 992px){.latest-transactions[_ngcontent-%COMP%]   .table-cell-fiat[_ngcontent-%COMP%]{display:table-cell}}.latest-transactions[_ngcontent-%COMP%]   .table-cell-fees[_ngcontent-%COMP%]{text-align:right}.skeleton-loader-transactions[_ngcontent-%COMP%]{max-width:250px;position:relative;top:2px;margin-bottom:-3px;height:18px}.lastest-blocks-table[_ngcontent-%COMP%]{width:100%;text-align:left}.lastest-blocks-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .lastest-blocks-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .lastest-blocks-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:0px;padding-top:.65rem!important;padding-bottom:.7rem!important}.lastest-blocks-table[_ngcontent-%COMP%]   .table-cell-height[_ngcontent-%COMP%]{width:15%}.lastest-blocks-table[_ngcontent-%COMP%]   .table-cell-mined[_ngcontent-%COMP%]{width:35%;text-align:left}.lastest-blocks-table[_ngcontent-%COMP%]   .table-cell-transaction-count[_ngcontent-%COMP%]{display:none;text-align:right;width:20%;display:table-cell}.lastest-blocks-table[_ngcontent-%COMP%]   .table-cell-size[_ngcontent-%COMP%]{display:none;text-align:center;width:30%}@media (min-width: 485px){.lastest-blocks-table[_ngcontent-%COMP%]   .table-cell-size[_ngcontent-%COMP%]{display:table-cell}}@media (min-width: 768px){.lastest-blocks-table[_ngcontent-%COMP%]   .table-cell-size[_ngcontent-%COMP%]{display:none}}@media (min-width: 992px){.lastest-blocks-table[_ngcontent-%COMP%]   .table-cell-size[_ngcontent-%COMP%]{display:table-cell}}.mempool-graph[_ngcontent-%COMP%]{height:255px}.loadingGraphs[_ngcontent-%COMP%]{height:250px;display:grid;place-items:center}.inc-tx-progress-bar[_ngcontent-%COMP%]{max-width:250px}.inc-tx-progress-bar[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{padding:4px}.terms-of-service[_ngcontent-%COMP%]{margin-top:1rem}.small-bar[_ngcontent-%COMP%]{height:8px;top:-4px;max-width:120px}.loading-container[_ngcontent-%COMP%]{min-height:76px}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto!important}.card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;flex:inherit;text-align:center;flex-direction:column;justify-content:space-around;padding:22px 20px}.card-wrapper[_ngcontent-%COMP%]   .less-padding[_ngcontent-%COMP%]{padding:20px}.retarget-sign[_ngcontent-%COMP%]{margin-right:-3px;font-size:14px;top:-2px;position:relative}.previous-retarget-sign[_ngcontent-%COMP%]{margin-right:-2px;font-size:10px}.assetIcon[_ngcontent-%COMP%]{width:40px;height:40px}.asset-title[_ngcontent-%COMP%]{text-align:left;vertical-align:middle}.asset-icon[_ngcontent-%COMP%]{width:65px;height:65px;vertical-align:middle}.circulating-amount[_ngcontent-%COMP%]{text-align:right;width:100%;vertical-align:middle}.clear-link[_ngcontent-%COMP%]{color:#fff}.pool-name[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-top;padding-left:10px}.title-link[_ngcontent-%COMP%], .title-link[_ngcontent-%COMP%]:hover, .title-link[_ngcontent-%COMP%]:focus, .title-link[_ngcontent-%COMP%]:active{display:block;margin-bottom:10px;text-decoration:none;color:inherit}.pref-selectors[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}.pref-selectors[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]{margin-left:.5em;margin-bottom:.5em}.pref-selectors[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]:first{margin-left:0}"],changeDetection:0}),H})();var ps=D(7319),vs=D(504),hc=D(9304);function fc(H,Lt){1&H&&(n.TgZ(0,"div",24),n._UZ(1,"div",25),n.qZA())}function xl(H,Lt){if(1&H&&n._UZ(0,"app-amount",33),2&H){const E=n.oxw().$implicit;n.Q6J("radiowavesoshis",E.capacity)("digitsInfo","1.2-2")("noFiat",!0)}}function Ia(H,Lt){if(1&H&&(n._uU(0),n.ALo(1,"amountShortener"),n.TgZ(2,"span",34),n.SDv(3,35),n.qZA()),2&H){const E=n.oxw().$implicit;let pt;n.hij(" ",n.xi3(1,1,null!==(pt=E.capacity)&&void 0!==pt?pt:0,1)," ")}}const Sl=function(H,Lt){return[H,Lt]};function Ma(H,Lt){if(1&H&&(n.TgZ(0,"tr")(1,"td",13),n._uU(2),n.qZA(),n.TgZ(3,"td",27)(4,"a",28),n.ALo(5,"relativeUrl"),n.TgZ(6,"span",29),n._uU(7),n.qZA(),n._uU(8," \xa0 "),n.TgZ(9,"span",30),n._uU(10),n.qZA()()(),n.TgZ(11,"td",17),n._uU(12),n.qZA(),n.TgZ(13,"td",19),n._uU(14),n.qZA(),n.TgZ(15,"td",21),n.YNc(16,xl,1,3,"app-amount",31),n.YNc(17,Ia,4,4,"ng-template",null,32,n.W1O),n.qZA()()),2&H){const E=Lt.$implicit,pt=n.MAs(18);n.xp6(2),n.Oqu(E.rank),n.xp6(2),n.Q6J("routerLink",n.WLB(10,Sl,n.lcZ(5,8,"/lightning/nodes/country"),E.iso)),n.xp6(3),n.Oqu(E.flag),n.xp6(3),n.Oqu(E.name.en),n.xp6(2),n.hij("",E.share,"%"),n.xp6(2),n.Oqu(E.count),n.xp6(2),n.Q6J("ngIf",E.capacity>1e8)("ngIfElse",pt)}}function dc(H,Lt){if(1&H&&(n.TgZ(0,"tbody"),n.YNc(1,Ma,19,13,"tr",26),n.qZA()),2&H){const E=Lt.ngIf;n.uIk("data-cy","pools-table"),n.xp6(1),n.Q6J("ngForOf",E)}}const wh=function(){return["fas","download"]};let pu=(()=>{class H{constructor(E,pt,Bt,Qt,_e,Ee){this.apiService=E,this.seoService=pt,this.amountShortenerPipe=Bt,this.zone=Qt,this.stateService=_e,this.router=Ee,this.isLoading=!0,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.timespan="",this.chartInstance=void 0,this.dir="ltr"}ngOnInit(){this.seoService.setTitle("Lightning \u10D8\u10E1 \u10DC\u10DD\u10D3\u10D0 \u10E5\u10D5\u10D4\u10E7\u10DC\u10D4\u10D1\u10D8\u10E1 \u10DB\u10D8\u10EE\u10D4\u10D3\u10D5\u10D8\u10D7"),this.nodesPerCountryObservable$=this.apiService.getNodesPerCountry$().pipe((0,yt.U)(E=>{for(let pt=0;pt<E.length;++pt)E[pt].rank=pt+1,E[pt].iso=E[pt].iso.toLowerCase(),E[pt].flag=(0,Nn.bK)(E[pt].iso);return E.slice(0,100)}),(0,gt.b)(E=>{this.isLoading=!1,this.prepareChartOptions(E)}),(0,V.B)())}generateChartSerieData(E){const pt=this.isMobile()?2:1,Bt=[];let Qt=0,_e=0,Ee="10%";return this.isMobile()&&(Ee=0),E.forEach(Xe=>{if(Xe.share<pt)return Qt+=Xe.share,void(_e+=Xe.count);Bt.push({value:Xe.share,name:Xe.name.en+(this.isMobile()?"":` (${Xe.share}%)`),label:{overflow:"truncate",color:"#b1b1b1",alignTo:"edge",edgeDistance:Ee},tooltip:{show:!this.isMobile(),backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1"},borderColor:"#000",formatter:()=>{const je=Xe.count.toString();return`<b style="color: white">${Xe.name.en} (${Xe.share}%)</b><br>`+"" + je + " nodes"+"<br>"+"" + this.amountShortenerPipe.transform(Xe.capacity / 1e8, 2) + " BIT \u10E1\u10D8\u10DB\u10EB\u10DA\u10D0\u10D5\u10E0\u10D4"}},data:Xe.iso})}),Bt.push({itemStyle:{color:"grey"},value:Qt,name:"Other (" + (Qt.toFixed(2) + "%") + ")",label:{overflow:"truncate",color:"#b1b1b1",alignTo:"edge",edgeDistance:Ee},tooltip:{backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1"},borderColor:"#000",formatter:()=>{const Xe=_e.toString();return'<b style="color: white">'+"Other (" + (Qt.toFixed(2) + "%") + ")"+"</b><br>"+"" + Xe + " nodes"}},data:9999}),Bt}prepareChartOptions(E){let pt=["20%","80%"];this.isMobile()&&(pt=["15%","60%"]),this.chartOptions={animation:!1,color:En.vK,tooltip:{trigger:"item",textStyle:{align:"left"}},series:[{zlevel:0,minShowLabelAngle:3.6,name:"Mining pool",type:"pie",radius:pt,data:this.generateChartSerieData(E),labelLine:{lineStyle:{width:2},length:this.isMobile()?1:20,length2:this.isMobile()?1:void 0},label:{fontSize:14},itemStyle:{borderRadius:1,borderWidth:1,borderColor:"#000"},emphasis:{itemStyle:{shadowBlur:40,shadowColor:"rgba(0, 0, 0, 0.75)"},labelLine:{lineStyle:{width:4}}}}]}}isMobile(){return window.innerWidth<=767.98}onChartInit(E){void 0===this.chartInstance&&(this.chartInstance=E,this.chartInstance.on("click",pt=>{9999!==pt.data.data&&this.zone.run(()=>{const Bt=new q.w(this.stateService).transform(`/lightning/nodes/country/${pt.data.data}`);this.router.navigate([Bt])})}))}onSaveChart(){const E=new Date;this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`lightning-nodes-per-country-${Math.round(E.getTime()/1e3)}.svg`),this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}isEllipsisActive(E){return E.offsetWidth<E.scrollWidth}}return H.\u0275fac=function(E){return new(E||H)(n.Y36(et.s),n.Y36(N.v),n.Y36(Za.j),n.Y36(n.R0b),n.Y36(K.b),n.Y36(St.F0))},H.\u0275cmp=n.Xpm({type:H,selectors:[["app-nodes-per-country-chart"]],hostVars:1,hostBindings:function(E,pt){2&E&&n.uIk("dir",pt.dir)},decls:28,vars:9,consts:function(){let Lt,E,pt,Bt,Qt,_e,Ee,Xe;return Lt="Lightning \u10D8\u10E1 \u10DC\u10DD\u10D3\u10D0 \u10E5\u10D5\u10D4\u10E7\u10DC\u10D4\u10D1\u10D8\u10E1 \u10DB\u10D8\u10EE\u10D4\u10D3\u10D5\u10D8\u10D7",E="(Tor nodes excluded)",pt="\u10E0\u10D4\u10D8\u10E2\u10D8\u10DC\u10D2\u10D8",Bt="\u10E1\u10D0\u10EE\u10D4\u10DA\u10D8",Qt="\u10D2\u10D0\u10D6\u10D8\u10D0\u10E0\u10D4\u10D1\u10D0",_e="\u10DC\u10DD\u10D3\u10D0",Ee="\u10E2\u10D4\u10D5\u10D0\u10D3\u10DD\u10D1\u10D0",Xe="radiowavess",[[1,"full-container","h-100"],[1,"card-header"],[1,"d-flex","d-md-block","align-items-baseline",2,"margin-bottom","-5px"],Lt,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],[2,"color","#ffffff66"],E,[1,"container","pb-lg-0","bottom-padding"],[1,"pb-lg-5"],["echarts","",1,"chart","w-100",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],[1,"table","table-borderless","table-fixed","text-center","m-auto",2,"max-width","900px"],[1,"text-left","rank"],pt,[1,"text-left","name"],Bt,[1,"text-right","share"],Qt,[1,"text-right","nodes"],_e,[1,"text-right","capacity"],Ee,[4,"ngIf"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"],[4,"ngFor","ngForOf"],[1,"text-left","text-truncate","name"],[1,"d-flex","align-items-center",3,"routerLink"],[1,"flag"],[1,"link"],[3,"radiowavesoshis","digitsInfo","noFiat",4,"ngIf","ngIfElse"],["smallchannel",""],[3,"radiowavesoshis","digitsInfo","noFiat"],[1,"radiowavess"],Xe]},template:function(E,pt){1&E&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),n.SDv(4,3),n.qZA(),n.TgZ(5,"button",4),n.NdJ("click",function(){return pt.onSaveChart()}),n._UZ(6,"fa-icon",5),n.qZA()(),n.TgZ(7,"small",6),n.SDv(8,7),n.qZA()(),n.TgZ(9,"div",8)(10,"div",9)(11,"div",10),n.NdJ("chartInit",function(Qt){return pt.onChartInit(Qt)}),n.qZA()(),n.YNc(12,fc,2,0,"div",11),n.TgZ(13,"table",12)(14,"thead")(15,"tr")(16,"th",13),n.SDv(17,14),n.qZA(),n.TgZ(18,"th",15),n.SDv(19,16),n.qZA(),n.TgZ(20,"th",17),n.SDv(21,18),n.qZA(),n.TgZ(22,"th",19),n.SDv(23,20),n.qZA(),n.TgZ(24,"th",21),n.SDv(25,22),n.qZA()()(),n.YNc(26,dc,2,2,"tbody",23),n.ALo(27,"async"),n.qZA()()()),2&E&&(n.xp6(6),n.Q6J("icon",n.DdM(8,wh))("fixedWidth",!0),n.xp6(5),n.Q6J("initOpts",pt.chartInitOptions)("options",pt.chartOptions),n.xp6(1),n.Q6J("ngIf",pt.isLoading),n.xp6(14),n.Q6J("ngIf",n.lcZ(27,6,pt.nodesPerCountryObservable$)))},dependencies:[k.sg,k.O5,St.yS,_.BN,kr.G,$o.P,B._w,k.Ov,q.w,Za.j],styles:[".radiowavess[_ngcontent-%COMP%]{color:#fff6;font-size:12px;top:0}.card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;height:calc(100% - 140px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{height:calc(100% - 190px)}}@media (max-width: 575px){.full-container[_ngcontent-%COMP%]{height:calc(100% - 230px)}}.chart[_ngcontent-%COMP%]{max-height:400px}@media (max-width: 767.98px){.chart[_ngcontent-%COMP%]{max-height:230px;margin-top:-35px}}@media (max-width: 992px){.bottom-padding[_ngcontent-%COMP%]{padding-bottom:65px}}@media (max-width: 576px){.bottom-padding[_ngcontent-%COMP%]{padding-bottom:65px}}.rank[_ngcontent-%COMP%]{width:8%}@media (max-width: 576px){.rank[_ngcontent-%COMP%]{display:none}}.name[_ngcontent-%COMP%]{width:36%}@media (max-width: 576px){.name[_ngcontent-%COMP%]{width:80%;max-width:150px;padding-left:0;padding-right:0}}.share[_ngcontent-%COMP%]{width:15%}@media (max-width: 576px){.share[_ngcontent-%COMP%]{display:none}}.nodes[_ngcontent-%COMP%]{width:15%}@media (max-width: 576px){.nodes[_ngcontent-%COMP%]{width:10%}}.capacity[_ngcontent-%COMP%]{width:26%}@media (max-width: 576px){.capacity[_ngcontent-%COMP%]{width:10%;max-width:100px}}a[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%]:hover   .link[_ngcontent-%COMP%]{text-decoration:underline}.flag[_ngcontent-%COMP%]{font-size:20px}.text-truncate[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),H})();var Dh=D(9290),Tl=D(9520);const ks=(window||{}).__env||{},gc=[{path:"",component:ks&&"liquid"===ks.BASE_MODULE?ea.r:mr.S,children:[{path:"mining/pool/:slug",data:{networks:["bitcoin"]},component:Rs},{path:"mining",data:{networks:["bitcoin"]},component:xo.y,children:[{path:"",component:Zt}]},{path:"mempool-block/:id",data:{networks:["bitcoin","liquid"]},component:xo.y,children:[{path:"",component:mo}]},{path:"graphs",data:{networks:["bitcoin","liquid"]},component:Cs,children:[{path:"mempool",data:{networks:["bitcoin","liquid"]},component:uh},{path:"mining/hashrate-difficulty",data:{networks:["bitcoin"]},component:Ms},{path:"mining/pools-dominance",data:{networks:["bitcoin"]},component:Ni},{path:"mining/pools",data:{networks:["bitcoin"]},component:Io},{path:"mining/block-fees",data:{networks:["bitcoin"]},component:Cr},{path:"mining/block-rewards",data:{networks:["bitcoin"]},component:ye},{path:"mining/block-fee-rates",data:{networks:["bitcoin"]},component:Pe},{path:"mining/block-sizes-weights",data:{networks:["bitcoin"]},component:To},{path:"lightning/nodes-networks",data:{networks:["bitcoin"]},component:ps.a},{path:"lightning/capacity",data:{networks:["bitcoin"]},component:vs.z},{path:"lightning/nodes-per-isp",data:{networks:["bitcoin"]},component:hc.J},{path:"lightning/nodes-per-country",data:{networks:["bitcoin"]},component:pu},{path:"lightning/nodes-map",data:{networks:["bitcoin"]},component:Dh.n},{path:"lightning/nodes-channels-map",data:{networks:["bitcoin"]},component:Tl.v},{path:"",pathMatch:"full",redirectTo:"mempool"},{path:"mining/block-prediction",data:{networks:["bitcoin"]},component:rt}]},{path:"",component:xo.y,children:[{path:"",component:cc}]}]},{path:"tv",data:{networks:["bitcoin","liquid"]},component:Zf}];let vu=(()=>{class H{}return H.\u0275fac=function(E){return new(E||H)},H.\u0275mod=n.oAB({type:H}),H.\u0275inj=n.cJS({imports:[St.Bz.forChild(gc)]}),H})();var _c=D(1596);let Lh=(()=>{class H{}return H.\u0275fac=function(E){return new(E||H)},H.\u0275mod=n.oAB({type:H}),H.\u0275inj=n.cJS({imports:[k.ez,_c.m,vu,B.Ns.forRoot({echarts:()=>Promise.resolve().then(D.bind(D,1420))}),B.Ns]}),H})()},7530:(Ze,te,D)=>{D.d(te,{Q:()=>_t});var B=D(529),St=D(4650),n=D(6331);let _t=(()=>{class mt{constructor(yt,V){this.httpClient=yt,this.stateService=V,this.apiBasePath="",this.apiBasePath="",this.stateService.networkChanged$.subscribe(k=>{"bisq"===k&&!this.stateService.env.BISQ_SEPARATE_BACKEND&&(k=""),this.apiBasePath=k?"/"+k:""})}getNode$(yt){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/nodes/"+yt)}getNodGroupNodes$(yt){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/nodes/group/"+yt)}getChannel$(yt){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/channels/"+yt)}getChannelsByNodeId$(yt,V=0,k="open"){const X=(new B.LE).set("public_key",yt).set("index",V).set("status",k);return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/channels",{params:X,observe:"response"})}getLatestStatistics$(){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/statistics/latest")}listNodeStats$(yt){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/nodes/"+yt+"/statistics")}getNodeFeeHistogram$(yt){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/nodes/"+yt+"/fees/histogram")}getNodesRanking$(){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/nodes/rankings")}listChannelStats$(yt){return this.httpClient.get(this.apiBasePath+"/channels/"+yt+"/statistics")}listStatistics$(yt){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/statistics"+(void 0!==yt?`/${yt}`:""),{observe:"response"})}getTopNodesByCapacity$(){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/nodes/rankings/liquidity")}getTopNodesByChannels$(){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/nodes/rankings/connectivity")}getOldestNodes$(){return this.httpClient.get(this.apiBasePath+"/api/v1/lightning/nodes/rankings/age")}}return mt.\u0275fac=function(yt){return new(yt||mt)(St.LFG(B.eN),St.LFG(n.b))},mt.\u0275prov=St.Yz7({token:mt,factory:mt.\u0275fac,providedIn:"root"}),mt})()},9520:(Ze,te,D)=>{D.d(te,{v:()=>f0});var B=D(4650),St=D(4326),n=D(3900),_t=D(2557),mt=D(8505),gt=D(1957),yt=D(1420),V=D(3915),k=D(8458),q=(D(89),D(5770)),N=D(3808),et=D(8130);function st(t,a,u){"object"==typeof a&&(u=a,a=null);var d,h=this;if(!(t instanceof Function))for(var g in d=[],t)t.hasOwnProperty(g)&&d.push(g);var y=function(b){if(h.apply(this,arguments),t instanceof Function?K(this,t.call(this,b)):_(this,t,d),this.constructor===y)for(var L=y.__initializers__,W=0;W<L.length;W++)L[W].apply(this,arguments)};y.__super__=h,y.__initializers__=h.__initializers__?h.__initializers__.slice():[],a&&y.__initializers__.push(a);var S=function(){};return S.prototype=h.prototype,y.prototype=new S,y.prototype.constructor=y,K(y.prototype,u),y.extend=h.extend,y.derive=h.extend,y}function K(t,a){if(a)for(var u in a)a.hasOwnProperty(u)&&(t[u]=a[u])}function _(t,a,u){for(var h=0;h<u.length;h++){var d=u[h];t[d]=a[d]}}(0,k.D)([q.N,N.N]),(0,k.D)(et.T);const j={extend:st,derive:st};function it(t,a){this.action=t,this.context=a}var z={trigger:function(t){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(t)){var a=this.__handlers__[t],u=a.length,h=-1,d=arguments;switch(d.length){case 1:for(;++h<u;)a[h].action.call(a[h].context);return;case 2:for(;++h<u;)a[h].action.call(a[h].context,d[1]);return;case 3:for(;++h<u;)a[h].action.call(a[h].context,d[1],d[2]);return;case 4:for(;++h<u;)a[h].action.call(a[h].context,d[1],d[2],d[3]);return;case 5:for(;++h<u;)a[h].action.call(a[h].context,d[1],d[2],d[3],d[4]);return;default:for(;++h<u;)a[h].action.apply(a[h].context,Array.prototype.slice.call(d,1));return}}},on:function(t,a,u){if(t&&a){var h=this.__handlers__||(this.__handlers__={});if(h[t]){if(this.has(t,a))return}else h[t]=[];var d=new it(a,u||this);return h[t].push(d),this}},once:function(t,a,u){if(t&&a){var h=this;return this.on(t,function d(){h.off(t,d),a.apply(this,arguments)},u)}},before:function(t,a,u){if(t&&a)return this.on(t="before"+t,a,u)},after:function(t,a,u){if(t&&a)return this.on(t="after"+t,a,u)},success:function(t,a){return this.once("success",t,a)},error:function(t,a){return this.once("error",t,a)},off:function(t,a){var u=this.__handlers__||(this.__handlers__={});if(a){if(u[t]){for(var h=u[t],d=[],g=0;g<h.length;g++)a&&h[g].action!==a&&d.push(h[g]);u[t]=d}return this}u[t]=[]},has:function(t,a){var u=this.__handlers__;if(!u||!u[t])return!1;for(var h=u[t],d=0;d<h.length;d++)if(h[d].action===a)return!0}};const tt=z;var J=0,nt=Array.prototype.forEach,U={genGUID:function(){return++J},relative2absolute:function(t,a){if(!a||t.match(/^\//))return t;for(var u=t.split("/"),h=a.split("/"),d=u[0];"."===d||".."===d;)".."===d&&h.pop(),u.shift(),d=u[0];return h.join("/")+"/"+u.join("/")},extend:function(t,a){if(a)for(var u in a)a.hasOwnProperty(u)&&(t[u]=a[u]);return t},defaults:function(t,a){if(a)for(var u in a)void 0===t[u]&&(t[u]=a[u]);return t},extendWithPropList:function(t,a,u){if(a)for(var h=0;h<u.length;h++){var d=u[h];t[d]=a[d]}return t},defaultsWithPropList:function(t,a,u){if(a)for(var h=0;h<u.length;h++){var d=u[h];null==t[d]&&(t[d]=a[d])}return t},each:function(t,a,u){if(t&&a)if(t.forEach&&t.forEach===nt)t.forEach(a,u);else if(t.length===+t.length)for(var h=0,d=t.length;h<d;h++)a.call(u,t[h],h,t);else for(var g in t)t.hasOwnProperty(g)&&a.call(u,t[g],g,t)},isObject:function(t){return t===Object(t)},isArray:function(t){return Array.isArray(t)},isArrayLike:function(t){return!!t&&t.length===+t.length},clone:function(t){if(U.isObject(t)){if(U.isArray(t))return t.slice();if(U.isArrayLike(t)){for(var a=new t.constructor(t.length),u=0;u<t.length;u++)a[u]=t[u];return a}return U.extend({},t)}return t}};const w=U;var C=function(){this.__uid__=w.genGUID()};C.__initializers__=[function(t){w.extend(this,t)}],w.extend(C,j),w.extend(C.prototype,tt);const I=C;var P=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],M=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];const R=function A(t){for(var a={},u={},h=0;h<P.length;h++)y(P[h]);for(h=0;h<M.length;h++){var g=M[h];u[g]=t.getParameter(t[g])}function y(S){if(t.getExtension){var b=t.getExtension(S);b||(b=t.getExtension("MOZ_"+S)),b||(b=t.getExtension("WEBKIT_"+S)),a[S]=b}}this.getExtension=function(S){return S in a||y(S),a[S]},this.getParameter=function(S){return u[S]}},ot={get:function rt(t){var a=new XMLHttpRequest;a.open("get",t.url),a.responseType=t.responseType||"text",t.onprogress&&(a.onprogress=function(u){u.lengthComputable?t.onprogress(u.loaded/u.total,u.loaded,u.total):t.onprogress(null)}),a.onload=function(u){a.status>=400?t.onerror&&t.onerror():t.onload&&t.onload(a.response)},t.onerror&&(a.onerror=t.onerror),a.send(null)}};var at,lt={supportWebGL:function(){if(null==at)try{var t=document.createElement("canvas");if(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))throw new Error}catch{at=!1}return at}};lt.Int8Array=typeof Int8Array>"u"?Array:Int8Array,lt.Uint8Array=typeof Uint8Array>"u"?Array:Uint8Array,lt.Uint16Array=typeof Uint16Array>"u"?Array:Uint16Array,lt.Uint32Array=typeof Uint32Array>"u"?Array:Uint32Array,lt.Int16Array=typeof Int16Array>"u"?Array:Int16Array,lt.Float32Array=typeof Float32Array>"u"?Array:Float32Array,lt.Float64Array=typeof Float64Array>"u"?Array:Float64Array;var ht={};typeof window<"u"?ht=window:typeof global<"u"&&(ht=global),lt.requestAnimationFrame=ht.requestAnimationFrame||ht.msRequestAnimationFrame||ht.mozRequestAnimationFrame||ht.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},lt.createCanvas=function(){return document.createElement("canvas")},lt.createImage=function(){return new ht.Image},lt.request={get:ot.get},lt.addEventListener=function(t,a,u,h){t.addEventListener(a,u,h)},lt.removeEventListener=function(t,a,u){t.removeEventListener(a,u)};const vt=lt;var ct=function(){this.head=null,this.tail=null,this._length=0};ct.prototype.insert=function(t){var a=new ct.Entry(t);return this.insertEntry(a),a},ct.prototype.insertAt=function(t,a){if(!(t<0)){for(var u=this.head,h=0;u&&h!=t;)u=u.next,h++;if(u){var d=new ct.Entry(a),g=u.prev;g?(g.next=d,d.prev=g):this.head=d,d.next=u,u.prev=d}else this.insert(a)}},ct.prototype.insertBeforeEntry=function(t,a){var u=new ct.Entry(t),h=a.prev;h?(h.next=u,u.prev=h):this.head=u,u.next=a,a.prev=u,this._length++},ct.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,this.tail=t):this.head=this.tail=t,this._length++},ct.prototype.remove=function(t){var a=t.prev,u=t.next;a?a.next=u:this.head=u,u?u.prev=a:this.tail=a,t.next=t.prev=null,this._length--},ct.prototype.removeAt=function(t){if(!(t<0)){for(var a=this.head,u=0;a&&u!=t;)a=a.next,u++;if(a)return this.remove(a),a.value}},ct.prototype.getHead=function(){if(this.head)return this.head.value},ct.prototype.getTail=function(){if(this.tail)return this.tail.value},ct.prototype.getAt=function(t){if(!(t<0)){for(var a=this.head,u=0;a&&u!=t;)a=a.next,u++;return a.value}},ct.prototype.indexOf=function(t){for(var a=this.head,u=0;a;){if(a.value===t)return u;a=a.next,u++}},ct.prototype.length=function(){return this._length},ct.prototype.isEmpty=function(){return 0===this._length},ct.prototype.forEach=function(t,a){for(var u=this.head,h=0,d=typeof a<"u";u;)d?t.call(a,u.value,h):t(u.value,h),u=u.next,h++},ct.prototype.clear=function(){this.tail=this.head=null,this._length=0},ct.Entry=function(t){this.value=t,this.next=null,this.prev=null};const dt=ct;var Mt=function(t){this._list=new dt,this._map={},this._maxSize=t||10};Mt.prototype.setMaxSize=function(t){this._maxSize=t},Mt.prototype.put=function(t,a){if(!this._map.hasOwnProperty(t)){var u=this._list.length();if(u>=this._maxSize&&u>0){var h=this._list.head;this._list.remove(h),delete this._map[h.key]}var d=this._list.insert(a);d.key=t,this._map[t]=d}},Mt.prototype.get=function(t){var a=this._map[t];if(this._map.hasOwnProperty(t))return a!==this._list.tail&&(this._list.remove(a),this._list.insertEntry(a)),a.value},Mt.prototype.remove=function(t){var a=this._map[t];typeof a<"u"&&(delete this._map[t],this._list.remove(a))},Mt.prototype.clear=function(){this._list.clear(),this._map={}};const Pt=Mt;var wt={},Ot={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ft(t){return(t=Math.round(t))<0?0:t>255?255:t}function kt(t){return t<0?0:t>1?1:t}function ie(t){return t.length&&"%"===t.charAt(t.length-1)?Ft(parseFloat(t)/100*255):Ft(parseInt(t,10))}function ue(t){return t.length&&"%"===t.charAt(t.length-1)?kt(parseFloat(t)/100):kt(parseFloat(t))}function Pe(t,a,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?t+(a-t)*u*6:2*u<1?a:3*u<2?t+(a-t)*(2/3-u)*6:t}function Se(t,a,u){return t+(a-t)*u}function De(t,a,u,h,d){return t[0]=a,t[1]=u,t[2]=h,t[3]=d,t}function Fe(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t}var Ye=new Pt(20),tr=null;function or(t,a){tr&&Fe(tr,a),tr=Ye.put(t,tr||a.slice())}function Hr(t,a){var u=(parseFloat(t[0])%360+360)%360/360,h=ue(t[1]),d=ue(t[2]),g=d<=.5?d*(h+1):d+h-d*h,y=2*d-g;return De(a=a||[],Ft(255*Pe(y,g,u+1/3)),Ft(255*Pe(y,g,u)),Ft(255*Pe(y,g,u-1/3)),1),4===t.length&&(a[3]=t[3]),a}wt.parse=function(t,a){if(t){a=a||[];var u=Ye.get(t);if(u)return Fe(a,u);var d,h=(t+="").replace(/ /g,"").toLowerCase();if(h in Ot)return Fe(a,Ot[h]),or(t,a),a;if("#"===h.charAt(0))return 4===h.length?(d=parseInt(h.substr(1),16))>=0&&d<=4095?(De(a,(3840&d)>>4|(3840&d)>>8,240&d|(240&d)>>4,15&d|(15&d)<<4,1),or(t,a),a):void De(a,0,0,0,1):7===h.length?(d=parseInt(h.substr(1),16))>=0&&d<=16777215?(De(a,(16711680&d)>>16,(65280&d)>>8,255&d,1),or(t,a),a):void De(a,0,0,0,1):void 0;var g=h.indexOf("("),y=h.indexOf(")");if(-1!==g&&y+1===h.length){var S=h.substr(0,g),b=h.substr(g+1,y-(g+1)).split(","),L=1;switch(S){case"rgba":if(4!==b.length)return void De(a,0,0,0,1);L=ue(b.pop());case"rgb":return 3!==b.length?void De(a,0,0,0,1):(De(a,ie(b[0]),ie(b[1]),ie(b[2]),L),or(t,a),a);case"hsla":return 4!==b.length?void De(a,0,0,0,1):(b[3]=ue(b[3]),Hr(b,a),or(t,a),a);case"hsl":return 3!==b.length?void De(a,0,0,0,1):(Hr(b,a),or(t,a),a);default:return}}De(a,0,0,0,1)}},wt.parseToFloat=function(t,a){if(a=wt.parse(t,a))return a[0]/=255,a[1]/=255,a[2]/=255,a},wt.lift=function(t,a){var u=wt.parse(t);if(u){for(var h=0;h<3;h++)u[h]=a<0?u[h]*(1-a)|0:(255-u[h])*a+u[h]|0;return wt.stringify(u,4===u.length?"rgba":"rgb")}},wt.toHex=function(t){var a=wt.parse(t);if(a)return((1<<24)+(a[0]<<16)+(a[1]<<8)+ +a[2]).toString(16).slice(1)},wt.fastLerp=function(t,a,u){if(a&&a.length&&t>=0&&t<=1){u=u||[];var h=t*(a.length-1),d=Math.floor(h),g=Math.ceil(h),y=a[d],S=a[g],b=h-d;return u[0]=Ft(Se(y[0],S[0],b)),u[1]=Ft(Se(y[1],S[1],b)),u[2]=Ft(Se(y[2],S[2],b)),u[3]=kt(Se(y[3],S[3],b)),u}},wt.fastMapToColor=wt.fastLerp,wt.lerp=function(t,a,u){if(a&&a.length&&t>=0&&t<=1){var h=t*(a.length-1),d=Math.floor(h),g=Math.ceil(h),y=wt.parse(a[d]),S=wt.parse(a[g]),b=h-d,L=wt.stringify([Ft(Se(y[0],S[0],b)),Ft(Se(y[1],S[1],b)),Ft(Se(y[2],S[2],b)),kt(Se(y[3],S[3],b))],"rgba");return u?{color:L,leftIndex:d,rightIndex:g,value:h}:L}},wt.mapToColor=wt.lerp,wt.modifyHSL=function(t,a,u,h){if(t=wt.parse(t))return t=function Rr(t){if(t){var b,L,a=t[0]/255,u=t[1]/255,h=t[2]/255,d=Math.min(a,u,h),g=Math.max(a,u,h),y=g-d,S=(g+d)/2;if(0===y)b=0,L=0;else{L=S<.5?y/(g+d):y/(2-g-d);var W=((g-a)/6+y/2)/y,ut=((g-u)/6+y/2)/y,bt=((g-h)/6+y/2)/y;a===g?b=bt-ut:u===g?b=1/3+W-bt:h===g&&(b=2/3+ut-W),b<0&&(b+=1),b>1&&(b-=1)}var Ct=[360*b,L,S];return null!=t[3]&&Ct.push(t[3]),Ct}}(t),null!=a&&(t[0]=function Ut(t){return(t=Math.round(t))<0?0:t>360?360:t}(a)),null!=u&&(t[1]=ue(u)),null!=h&&(t[2]=ue(h)),wt.stringify(Hr(t),"rgba")},wt.modifyAlpha=function(t,a){if((t=wt.parse(t))&&null!=a)return t[3]=kt(a),wt.stringify(t,"rgba")},wt.stringify=function(t,a){if(t&&t.length){var u=t[0]+","+t[1]+","+t[2];return("rgba"===a||"hsva"===a||"hsla"===a)&&(u+=","+t[3]),a+"("+u+")"}};var Vr=wt.parseToFloat,Ve={};function er(t){var a=Object.keys(t);a.sort();for(var u=[],h=0;h<a.length;h++){var d=a[h],g=t[d];u.push(null===g?d:d+" "+g.toString())}return u.join("\n")}var Lr=I.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(t,a){void 0===a&&console.warn('Uniform value "'+t+'" is undefined');var u=this.uniforms[t];u&&("string"==typeof a&&(a=Vr(a)||a),u.value=a,this.autoUpdateTextureStatus&&"t"===u.type&&(a?this.enableTexture(t):this.disableTexture(t)))},setUniforms:function(t){for(var a in t)this.setUniform(a,t[a])},isUniformEnabled:function(t){return this._enabledUniforms.indexOf(t)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(t,a){if("object"==typeof t)for(var u in t)this.setUniform(u,t[u]);else this.setUniform(t,a)},get:function(t){var a=this.uniforms[t];if(a)return a.value},attachShader:function(t,a){var u=this.uniforms;this.uniforms=t.createUniforms(),this.shader=t;var h=this.uniforms;this._enabledUniforms=Object.keys(h),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(L){var W=this.uniforms[L].type;return"t"===W||"tv"===W},this);var d=this.vertexDefines,g=this.fragmentDefines;if(this.vertexDefines=w.clone(t.vertexDefines),this.fragmentDefines=w.clone(t.fragmentDefines),a){for(var y in u)h[y]&&(h[y].value=u[y].value);w.defaults(this.vertexDefines,d),w.defaults(this.fragmentDefines,g)}var S={};for(var b in t.textures)S[b]={shaderType:t.textures[b].shaderType,type:t.textures[b].type,enabled:!(!a||!this._textureStatus[b])&&this._textureStatus[b].enabled};this._textureStatus=S,this._programKey=""},clone:function(){var t=new this.constructor({name:this.name,shader:this.shader});for(var a in this.uniforms)t.uniforms[a].value=this.uniforms[a].value;return t.depthTest=this.depthTest,t.depthMask=this.depthMask,t.transparent=this.transparent,t.blend=this.blend,t.vertexDefines=w.clone(this.vertexDefines),t.fragmentDefines=w.clone(this.fragmentDefines),t.enableTexture(this.getEnabledTextures()),t.precision=this.precision,t},define:function(t,a,u){var h=this.vertexDefines,d=this.fragmentDefines;"vertex"!==t&&"fragment"!==t&&"both"!==t&&arguments.length<3&&(u=a,a=t,t="both"),u=u??null,("vertex"===t||"both"===t)&&h[a]!==u&&(h[a]=u,this._programKey=""),("fragment"===t||"both"===t)&&d[a]!==u&&(d[a]=u,"both"!==t&&(this._programKey=""))},undefine:function(t,a){"vertex"!==t&&"fragment"!==t&&"both"!==t&&arguments.length<2&&(a=t,t="both"),("vertex"===t||"both"===t)&&this.isDefined("vertex",a)&&(delete this.vertexDefines[a],this._programKey=""),("fragment"===t||"both"===t)&&this.isDefined("fragment",a)&&(delete this.fragmentDefines[a],"both"!==t&&(this._programKey=""))},isDefined:function(t,a){switch(t){case"vertex":return void 0!==this.vertexDefines[a];case"fragment":return void 0!==this.fragmentDefines[a]}},getDefine:function(t,a){switch(t){case"vertex":return this.vertexDefines[a];case"fragment":return this.fragmentDefines[a]}},enableTexture:function(t){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.enableTexture(t[a]);else{var u=this._textureStatus[t];u&&(u.enabled||(u.enabled=!0,this._programKey=""))}},enableTexturesAll:function(){var t=this._textureStatus;for(var a in t)t[a].enabled=!0;this._programKey=""},disableTexture:function(t){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.disableTexture(t[a]);else{var u=this._textureStatus[t];u&&(!u.enabled||(u.enabled=!1,this._programKey=""))}},disableTexturesAll:function(){var t=this._textureStatus;for(var a in t)t[a].enabled=!1;this._programKey=""},isTextureEnabled:function(t){var a=this._textureStatus;return!!a[t]&&a[t].enabled},getEnabledTextures:function(){var t=[],a=this._textureStatus;for(var u in a)a[u].enabled&&t.push(u);return t},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=function Ar(t,a,u){u.sort();for(var h=[],d=0;d<u.length;d++)h.push(u[d]);var y=er(t)+"\n"+er(a)+"\n"+h.join("\n");if(Ve[y])return Ve[y];var S=w.genGUID();return Ve[y]=S,S}(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}});const Cr=Lr;var t,Zr=1e-6,Nr=Array,re=Math.random,pe={create:function(){var t=new Nr(2);return t[0]=0,t[1]=0,t},clone:function(t){var a=new Nr(2);return a[0]=t[0],a[1]=t[1],a},fromValues:function(t,a){var u=new Nr(2);return u[0]=t,u[1]=a,u},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t},set:function(t,a,u){return t[0]=a,t[1]=u,t},add:function(t,a,u){return t[0]=a[0]+u[0],t[1]=a[1]+u[1],t},subtract:function(t,a,u){return t[0]=a[0]-u[0],t[1]=a[1]-u[1],t}};pe.sub=pe.subtract,pe.multiply=function(t,a,u){return t[0]=a[0]*u[0],t[1]=a[1]*u[1],t},pe.mul=pe.multiply,pe.divide=function(t,a,u){return t[0]=a[0]/u[0],t[1]=a[1]/u[1],t},pe.div=pe.divide,pe.min=function(t,a,u){return t[0]=Math.min(a[0],u[0]),t[1]=Math.min(a[1],u[1]),t},pe.max=function(t,a,u){return t[0]=Math.max(a[0],u[0]),t[1]=Math.max(a[1],u[1]),t},pe.scale=function(t,a,u){return t[0]=a[0]*u,t[1]=a[1]*u,t},pe.scaleAndAdd=function(t,a,u,h){return t[0]=a[0]+u[0]*h,t[1]=a[1]+u[1]*h,t},pe.distance=function(t,a){var u=a[0]-t[0],h=a[1]-t[1];return Math.sqrt(u*u+h*h)},pe.dist=pe.distance,pe.squaredDistance=function(t,a){var u=a[0]-t[0],h=a[1]-t[1];return u*u+h*h},pe.sqrDist=pe.squaredDistance,pe.length=function(t){var a=t[0],u=t[1];return Math.sqrt(a*a+u*u)},pe.len=pe.length,pe.squaredLength=function(t){var a=t[0],u=t[1];return a*a+u*u},pe.sqrLen=pe.squaredLength,pe.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},pe.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},pe.normalize=function(t,a){var u=a[0],h=a[1],d=u*u+h*h;return d>0&&(d=1/Math.sqrt(d),t[0]=a[0]*d,t[1]=a[1]*d),t},pe.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},pe.cross=function(t,a,u){var h=a[0]*u[1]-a[1]*u[0];return t[0]=t[1]=0,t[2]=h,t},pe.lerp=function(t,a,u,h){var d=a[0],g=a[1];return t[0]=d+h*(u[0]-d),t[1]=g+h*(u[1]-g),t},pe.random=function(t,a){a=a||1;var u=2*GLMAT_RANDOM()*Math.PI;return t[0]=Math.cos(u)*a,t[1]=Math.sin(u)*a,t},pe.transformMat2=function(t,a,u){var h=a[0],d=a[1];return t[0]=u[0]*h+u[2]*d,t[1]=u[1]*h+u[3]*d,t},pe.transformMat2d=function(t,a,u){var h=a[0],d=a[1];return t[0]=u[0]*h+u[2]*d+u[4],t[1]=u[1]*h+u[3]*d+u[5],t},pe.transformMat3=function(t,a,u){var h=a[0],d=a[1];return t[0]=u[0]*h+u[3]*d+u[6],t[1]=u[1]*h+u[4]*d+u[7],t},pe.transformMat4=function(t,a,u){var h=a[0],d=a[1];return t[0]=u[0]*h+u[4]*d+u[12],t[1]=u[1]*h+u[5]*d+u[13],t},pe.forEach=(t=pe.create(),function(a,u,h,d,g,y){var S,b;for(u||(u=2),h||(h=0),b=d?Math.min(d*u+h,a.length):a.length,S=h;S<b;S+=u)t[0]=a[S],t[1]=a[S+1],g(t,t,y),a[S]=t[0],a[S+1]=t[1];return a});const we=pe;var Le=function(t,a){this.array=we.fromValues(t=t||0,a=a||0),this._dirty=!0};if(Le.prototype={constructor:Le,add:function(t){return we.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,a){return this.array[0]=t,this.array[1]=a,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this._dirty=!0,this},clone:function(){return new Le(this.x,this.y)},copy:function(t){return we.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,a){return we.cross(t.array,this.array,a.array),t._dirty=!0,this},dist:function(t){return we.dist(this.array,t.array)},distance:function(t){return we.distance(this.array,t.array)},div:function(t){return we.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return we.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return we.dot(this.array,t.array)},len:function(){return we.len(this.array)},length:function(){return we.length(this.array)},lerp:function(t,a,u){return we.lerp(this.array,t.array,a.array,u),this._dirty=!0,this},min:function(t){return we.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return we.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return we.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return we.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return we.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return we.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return we.random(this.array,t),this._dirty=!0,this},scale:function(t){return we.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,a){return we.scaleAndAdd(this.array,this.array,t.array,a),this._dirty=!0,this},sqrDist:function(t){return we.sqrDist(this.array,t.array)},squaredDistance:function(t){return we.squaredDistance(this.array,t.array)},sqrLen:function(){return we.sqrLen(this.array)},squaredLength:function(){return we.squaredLength(this.array)},sub:function(t){return we.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return we.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat2:function(t){return we.transformMat2(this.array,this.array,t.array),this._dirty=!0,this},transformMat2d:function(t){return we.transformMat2d(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return we.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return we.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var Kt=Le.prototype;Object.defineProperty(Kt,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Object.defineProperty(Kt,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}})}Le.add=function(t,a,u){return we.add(t.array,a.array,u.array),t._dirty=!0,t},Le.set=function(t,a,u){return we.set(t.array,a,u),t._dirty=!0,t},Le.copy=function(t,a){return we.copy(t.array,a.array),t._dirty=!0,t},Le.cross=function(t,a,u){return we.cross(t.array,a.array,u.array),t._dirty=!0,t},Le.distance=Le.dist=function(t,a){return we.distance(t.array,a.array)},Le.divide=Le.div=function(t,a,u){return we.divide(t.array,a.array,u.array),t._dirty=!0,t},Le.dot=function(t,a){return we.dot(t.array,a.array)},Le.len=function(t){return we.length(t.array)},Le.lerp=function(t,a,u,h){return we.lerp(t.array,a.array,u.array,h),t._dirty=!0,t},Le.min=function(t,a,u){return we.min(t.array,a.array,u.array),t._dirty=!0,t},Le.max=function(t,a,u){return we.max(t.array,a.array,u.array),t._dirty=!0,t},Le.multiply=Le.mul=function(t,a,u){return we.multiply(t.array,a.array,u.array),t._dirty=!0,t},Le.negate=function(t,a){return we.negate(t.array,a.array),t._dirty=!0,t},Le.normalize=function(t,a){return we.normalize(t.array,a.array),t._dirty=!0,t},Le.random=function(t,a){return we.random(t.array,a),t._dirty=!0,t},Le.scale=function(t,a,u){return we.scale(t.array,a.array,u),t._dirty=!0,t},Le.scaleAndAdd=function(t,a,u,h){return we.scaleAndAdd(t.array,a.array,u.array,h),t._dirty=!0,t},Le.squaredDistance=Le.sqrDist=function(t,a){return we.sqrDist(t.array,a.array)},Le.squaredLength=Le.sqrLen=function(t){return we.sqrLen(t.array)},Le.subtract=Le.sub=function(t,a,u){return we.subtract(t.array,a.array,u.array),t._dirty=!0,t},Le.transformMat2=function(t,a,u){return we.transformMat2(t.array,a.array,u.array),t._dirty=!0,t},Le.transformMat2d=function(t,a,u){return we.transformMat2d(t.array,a.array,u.array),t._dirty=!0,t},Le.transformMat3=function(t,a,u){return we.transformMat3(t.array,a.array,u.array),t._dirty=!0,t},Le.transformMat4=function(t,a,u){return we.transformMat4(t.array,a.array,u.array),t._dirty=!0,t};const ne=Le;var ye={};function Ne(t){for(var a=t.split("\n"),u=0,h=a.length;u<h;u++)a[u]=u+1+": "+a[u];return a.join("\n")}function Qe(t,a,u){if(!t.getShaderParameter(a,t.COMPILE_STATUS))return[t.getShaderInfoLog(a),Ne(u)].join("\n")}var Pr=new vt.Float32Array(16),Ir=I.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(t){this._textureSlot=0,t.gl.useProgram(this._program)},hasUniform:function(t){return null!=this._locations[t]},useTextureSlot:function(t,a,u){a&&(t.gl.activeTexture(t.gl.TEXTURE0+u),a.isRenderable()?a.bind(t):a.unbind(t))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(t){this._textureSlot=t||0},takeCurrentTextureSlot:function(t,a){var u=this._textureSlot;return this.useTextureSlot(t,a,u),this._textureSlot++,u},setUniform:function(t,a,u,h){var g=this._locations[u];if(null==g)return!1;switch(a){case"m4":if(!(h instanceof Float32Array)){for(var y=0;y<h.length;y++)Pr[y]=h[y];h=Pr}t.uniformMatrix4fv(g,!1,h);break;case"2i":t.uniform2i(g,h[0],h[1]);break;case"2f":t.uniform2f(g,h[0],h[1]);break;case"3i":t.uniform3i(g,h[0],h[1],h[2]);break;case"3f":t.uniform3f(g,h[0],h[1],h[2]);break;case"4i":t.uniform4i(g,h[0],h[1],h[2],h[3]);break;case"4f":t.uniform4f(g,h[0],h[1],h[2],h[3]);break;case"1i":t.uniform1i(g,h);break;case"1f":t.uniform1f(g,h);break;case"1fv":t.uniform1fv(g,h);break;case"1iv":t.uniform1iv(g,h);break;case"2iv":t.uniform2iv(g,h);break;case"2fv":t.uniform2fv(g,h);break;case"3iv":t.uniform3iv(g,h);break;case"3fv":t.uniform3fv(g,h);break;case"4iv":t.uniform4iv(g,h);break;case"4fv":t.uniform4fv(g,h);break;case"m2":case"m2v":t.uniformMatrix2fv(g,!1,h);break;case"m3":case"m3v":t.uniformMatrix3fv(g,!1,h);break;case"m4v":if(Array.isArray(h)&&Array.isArray(h[0])){var S=new vt.Float32Array(16*h.length),b=0;for(y=0;y<h.length;y++)for(var L=h[y],W=0;W<16;W++)S[b++]=L[W];t.uniformMatrix4fv(g,!1,S)}else t.uniformMatrix4fv(g,!1,h)}return!0},setUniformOfSemantic:function(t,a,u){var h=this.uniformSemantics[a];return!!h&&this.setUniform(t,h.type,h.symbol,u)},enableAttributes:function(t,a,u){var y,h=t.gl,d=this._program,g=this._locations;(y=u?u.__enabledAttributeList:ye[t.__uid__])||(y=u?u.__enabledAttributeList=[]:ye[t.__uid__]=[]);for(var S=[],b=0;b<a.length;b++){var L=a[b];if(this.attributes[L]){var W=g[L];if(null==W){if(-1===(W=h.getAttribLocation(d,L))){S[b]=-1;continue}g[L]=W}S[b]=W,y[W]=y[W]?2:1}else S[b]=-1}for(b=0;b<y.length;b++)switch(y[b]){case 1:h.enableVertexAttribArray(b),y[b]=3;break;case 2:y[b]=3;break;case 3:h.disableVertexAttribArray(b),y[b]=0}return S},getAttribLocation:function(t,a){var u=this._locations,h=u[a];return null==h&&(h=t.getAttribLocation(this._program,a),u[a]=h),h},buildProgram:function(t,a,u,h){var d=t.createShader(t.VERTEX_SHADER),g=t.createProgram();t.shaderSource(d,u),t.compileShader(d);var y=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(y,h),t.compileShader(y);var S=Qe(t,d,u);if(S||(S=Qe(t,y,h)))return S;if(t.attachShader(g,d),t.attachShader(g,y),a.attributeSemantics.POSITION)t.bindAttribLocation(g,0,a.attributeSemantics.POSITION.symbol);else{var b=Object.keys(this.attributes);t.bindAttribLocation(g,0,b[0])}if(t.linkProgram(g),t.deleteShader(d),t.deleteShader(y),this._program=g,this.vertexCode=u,this.fragmentCode=h,!t.getProgramParameter(g,t.LINK_STATUS))return"Could not link program\n"+t.getProgramInfoLog(g);for(var L=0;L<a.uniforms.length;L++){var W=a.uniforms[L];this._locations[W]=t.getUniformLocation(g,W)}}});const Xr=Ir;var An=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function $r(t,a,u){var d={};for(var g in u)d[g+"_COUNT"]=u[g];return t.replace(An,function h(y,S,b,L){var W="";isNaN(S)&&(S=S in a?a[S]:d[S]),isNaN(b)&&(b=b in a?a[b]:d[b]);for(var ut=parseInt(S);ut<parseInt(b);ut++)W+="{"+L.replace(/float\s*\(\s*_idx_\s*\)/g,ut.toFixed(1)).replace(/_idx_/g,ut)+"}";return W})}function $n(t,a,u){var h=[];if(a)for(var d in a){var g=a[d];g>0&&h.push("#define "+d.toUpperCase()+"_COUNT "+g)}if(u)for(var y=0;y<u.length;y++)h.push("#define "+(S=u[y]).toUpperCase()+"_ENABLED");for(var S in t){var b=t[S];h.push(null===b?"#define "+S:"#define "+S+" "+b.toString())}return h.join("\n")}function qi(t){this._renderer=t,this._cache={}}qi.prototype.getProgram=function(t,a,u){var h=this._cache,d=t.isSkinnedMesh&&t.isSkinnedMesh(),g=t.isInstancedMesh&&t.isInstancedMesh(),y="s"+a.shader.shaderID+"m"+a.getProgramKey();if(u&&(y+="se"+u.getProgramKey(t.lightGroup)),d&&(y+=",sk"+t.joints.length),g&&(y+=",is"),qt=h[y])return qt;var S=u?u.getLightsNumbers(t.lightGroup):{},b=this._renderer,L=b.gl,W=a.getEnabledTextures(),ut="";if(d){var bt={SKINNING:null,JOINT_COUNT:t.joints.length};t.joints.length>b.getMaxJointNumber()&&(bt.USE_SKIN_MATRICES_TEXTURE=null),ut+="\n"+$n(bt)+"\n"}g&&(ut+="\n#define INSTANCING\n");var Ct=ut+$n(a.vertexDefines,S,W),Et=ut+$n(a.fragmentDefines,S,W),Dt=Ct+"\n"+a.shader.vertex,zt=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(ge){return null!=b.getGLExtension(ge)});zt.indexOf("EXT_shader_texture_lod")>=0&&(Et+="\n#define SUPPORT_TEXTURE_LOD"),zt.indexOf("OES_standard_derivatives")>=0&&(Et+="\n#define SUPPORT_STANDARD_DERIVATIVES");var qt,$t=function ai(t){for(var a=[],u=0;u<t.length;u++)a.push("#extension GL_"+t[u]+" : enable");return a.join("\n")}(zt)+"\n"+function ro(t){return["precision",t,"float"].join(" ")+";\n"+["precision",t,"int"].join(" ")+";\n"+["precision",t,"sampler2D"].join(" ")+";\n"}(a.precision)+"\n"+Et+"\n"+a.shader.fragment,ae=$r(Dt,a.vertexDefines,S),Jt=$r($t,a.fragmentDefines,S);(qt=new Xr).uniformSemantics=a.shader.uniformSemantics,qt.attributes=a.shader.attributes;var me=qt.buildProgram(L,a.shader,ae,Jt);return qt.__error=me,h[y]=qt,qt};const fa=qi;var Mi=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,Wo=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,To=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,ya={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function ti(t){for(var a=[],u=0;u<t;u++)a[u]=0;return a}var yi={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return ti(2)},vec3:function(){return ti(3)},vec4:function(){return ti(4)},ivec2:function(){return ti(2)},ivec3:function(){return ti(3)},ivec4:function(){return ti(4)},mat2:function(){return ti(4)},mat3:function(){return ti(9)},mat4:function(){return ti(16)},array:function(){return[]}},vo=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],$l=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],go=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],Fu={vec4:4,vec3:3,vec2:2,float:1},Cs={},no={};function Za(t){return t.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function Co(){console.error("Wrong uniform/attributes syntax")}function Xl(t,a){for(var u=/[,=\(\):]/,h=a.replace(/:\s*\[\s*(.*)\s*\]/g,"="+t+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),d=[],g=0;g<h.length;g++)h[g].match(u)?d.push(h[g].charAt(0),h[g].slice(1)):d.push(h[g]);var Dt,bt=0,Ct={},Et=null;function zt(Jt){Jt||Co();var qt=Jt.match(/\[(.*?)\]/);Dt=Jt.replace(/\[(.*?)\]/,""),Ct[Dt]={},qt&&(Ct[Dt].isArray=!0,Ct[Dt].arraySize=qt[1])}for(zt((h=d)[0]),g=1;g<h.length;g++){var $t=h[g];if($t){if("="===$t){if(0!==bt&&3!==bt){Co();break}bt=1;continue}if(":"===$t){bt=4;continue}if(","===$t){if(2===bt){if(!(Et instanceof Array)){Co();break}Et.push(+h[++g])}else bt=5;continue}if(")"===$t){Ct[Dt].value=new vt.Float32Array(Et),Et=null,bt=5;continue}if("("===$t){if(2!==bt){Co();break}if(!(Et instanceof Array)){Co();break}Et.push(+h[++g]);continue}if($t.indexOf("vec")>=0){if(1!==bt&&4!==bt){Co();break}bt=2,Et=[];continue}if(1===bt){Ct[Dt].value="bool"===t?"true"===$t:parseFloat($t),Et=null;continue}if(4===bt){var ae=$t;vo.indexOf(ae)>=0||$l.indexOf(ae)>=0||go.indexOf(ae)>=0?Ct[Dt].semantic=ae:"ignore"===ae||"unconfigurable"===ae?Ct[Dt].ignore=!0:Ct[Dt].value="bool"===t?"true"===ae:parseFloat(ae);continue}zt($t),bt=0}}return Ct}function si(t,a){"object"==typeof t&&(a=t.fragment,t=t.vertex),t=Za(t),a=Za(a),this._shaderID=function $o(t,a){var u="vertex:"+t+"fragment:"+a;if(Cs[u])return Cs[u];var h=w.genGUID();return Cs[u]=h,no[h]={vertex:t,fragment:a},h}(t,a),this._vertexCode=si.parseImport(t),this._fragmentCode=si.parseImport(a),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}si.prototype={constructor:si,createUniforms:function(){var t={};for(var a in this.uniformTemplates){var u=this.uniformTemplates[a];t[a]={type:u.type,value:u.value()}}return t},_parseImport:function(){this._vertexCode=si.parseImport(this.vertex),this._fragmentCode=si.parseImport(this.fragment)},_addSemanticUniform:function(t,a,u){if(vo.indexOf(u)>=0)this.attributeSemantics[u]={symbol:t,type:a};else if(go.indexOf(u)>=0){var h=!1,d=u;u.match(/TRANSPOSE$/)&&(h=!0,d=u.slice(0,-9)),this.matrixSemantics[u]={symbol:t,type:a,isTranspose:h,semanticNoTranspose:d}}else $l.indexOf(u)>=0&&(this.uniformSemantics[u]={symbol:t,type:a})},_addMaterialUniform:function(t,a,u,h,d,g){g[t]={type:u,value:d?yi.array:h||yi[a],semantic:null}},_parseUniforms:function(){var t={},a=this;function h(g){return null!=g?function(){return g}:null}function d(g,y,S){var b=Xl(y,S),L=[];for(var W in b){var ut=b[W],bt=ut.semantic,Ct=W,Et=ya[y],Dt=h(b[W].value);b[W].isArray&&(Ct+="["+b[W].arraySize+"]",Et+="v"),L.push(Ct),a._uniformList.push(W),ut.ignore||(("sampler2D"===y||"samplerCube"===y)&&(a.textures[W]={shaderType:"fragment",type:y}),bt?a._addSemanticUniform(W,Et,bt):a._addMaterialUniform(W,y,Et,Dt,b[W].isArray,t))}return L.length>0?"uniform "+y+" "+L.join(",")+";\n":""}this._uniformList=[],this._vertexCode=this._vertexCode.replace(Mi,d),this._fragmentCode=this._fragmentCode.replace(Mi,d),a.matrixSemanticKeys=Object.keys(this.matrixSemantics),this.uniformTemplates=t},_parseAttributes:function(){var t={},a=this;this._vertexCode=this._vertexCode.replace(Wo,function u(h,d,g){var y=Xl(d,g),S=Fu[d]||1,b=[];for(var L in y){var W=y[L].semantic;if(t[L]={type:"float",size:S,semantic:W||null},W){if(vo.indexOf(W)<0)throw new Error('Unkown semantic "'+W+'"');a.attributeSemantics[W]={symbol:L,type:d}}b.push(L)}return"attribute "+d+" "+b.join(",")+";\n"}),this.attributes=t},_parseDefines:function(){var t=this;function u(h,d,g){var y=t.fragmentDefines;return y[d]||(y[d]="false"!==g&&("true"===g||(g?isNaN(parseFloat(g))?g.trim():parseFloat(g):null))),""}this._vertexCode=this._vertexCode.replace(To,u),this._fragmentCode=this._fragmentCode.replace(To,u)},clone:function(){var t=no[this._shaderID];return new si(t.vertex,t.fragment)}},Object.defineProperty&&(Object.defineProperty(si.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(si.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(si.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(si.prototype,"uniforms",{get:function(){return this._uniformList}}));var Re=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;si.parseImport=function(t){return t.replace(Re,function(d,u,h){return(d=si.source(h))?si.parseImport(d):(console.error('Shader chunk "'+h+'" not existed in library'),"")})};var Fa=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;si.import=function(t){t.replace(Fa,function(a,u,h,g){if(g=g.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"")){for(var L,y=h.split("."),S=si.codes,b=0;b<y.length-1;)S[L=y[b++]]||(S[L]={}),S=S[L];S[L=y[b]]=g}return g})},si.codes={},si.source=function(t){for(var a=t.split("."),u=si.codes,h=0;u&&h<a.length;)u=u[a[h++]];return"string"!=typeof u?(console.error('Shader "'+t+'" not existed in library'),""):u};const rr=si,Tn="@export clay.prez.vertex\nuniform mat4 WVP : WORLDVIEWPROJECTION;\nattribute vec3 pos : POSITION;\nattribute vec2 uv : TEXCOORD_0;\nuniform vec2 uvRepeat : [1.0, 1.0];\nuniform vec2 uvOffset : [0.0, 0.0];\n@import clay.chunk.skinning_header\n@import clay.chunk.instancing_header\nvarying vec2 v_Texcoord;\nvoid main()\n{\n vec4 P = vec4(pos, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n gl_Position = WVP * P;\n v_Texcoord = uv * uvRepeat + uvOffset;\n}\n@end\n@export clay.prez.fragment\nuniform sampler2D alphaMap;\nuniform float alphaCutoff: 0.0;\nvarying vec2 v_Texcoord;\nvoid main()\n{\n if (alphaCutoff > 0.0) {\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\n discard;\n }\n }\n gl_FragColor = vec4(0.0,0.0,0.0,1.0);\n}\n@end";var pr={create:function(){var t=new Nr(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:function(t){var a=new Nr(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose:function(t,a){if(t===a){var u=a[1],h=a[2],d=a[3],g=a[6],y=a[7],S=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=u,t[6]=a[9],t[7]=a[13],t[8]=h,t[9]=g,t[11]=a[14],t[12]=d,t[13]=y,t[14]=S}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},invert:function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=a[4],S=a[5],b=a[6],L=a[7],W=a[8],ut=a[9],bt=a[10],Ct=a[11],Et=a[12],Dt=a[13],zt=a[14],$t=a[15],ae=u*S-h*y,Jt=u*b-d*y,qt=u*L-g*y,me=h*b-d*S,ge=h*L-g*S,Ge=d*L-g*b,Oe=W*Dt-ut*Et,We=W*zt-bt*Et,ar=W*$t-Ct*Et,Ke=ut*zt-bt*Dt,lr=ut*$t-Ct*Dt,vr=bt*$t-Ct*zt,nr=ae*vr-Jt*lr+qt*Ke+me*ar-ge*We+Ge*Oe;return nr?(t[0]=(S*vr-b*lr+L*Ke)*(nr=1/nr),t[1]=(d*lr-h*vr-g*Ke)*nr,t[2]=(Dt*Ge-zt*ge+$t*me)*nr,t[3]=(bt*ge-ut*Ge-Ct*me)*nr,t[4]=(b*ar-y*vr-L*We)*nr,t[5]=(u*vr-d*ar+g*We)*nr,t[6]=(zt*qt-Et*Ge-$t*Jt)*nr,t[7]=(W*Ge-bt*qt+Ct*Jt)*nr,t[8]=(y*lr-S*ar+L*Oe)*nr,t[9]=(h*ar-u*lr-g*Oe)*nr,t[10]=(Et*ge-Dt*qt+$t*ae)*nr,t[11]=(ut*qt-W*ge-Ct*ae)*nr,t[12]=(S*We-y*Ke-b*Oe)*nr,t[13]=(u*Ke-h*We+d*Oe)*nr,t[14]=(Dt*Jt-Et*me-zt*ae)*nr,t[15]=(W*me-ut*Jt+bt*ae)*nr,t):null},adjoint:function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=a[4],S=a[5],b=a[6],L=a[7],W=a[8],ut=a[9],bt=a[10],Ct=a[11],Et=a[12],Dt=a[13],zt=a[14],$t=a[15];return t[0]=S*(bt*$t-Ct*zt)-ut*(b*$t-L*zt)+Dt*(b*Ct-L*bt),t[1]=-(h*(bt*$t-Ct*zt)-ut*(d*$t-g*zt)+Dt*(d*Ct-g*bt)),t[2]=h*(b*$t-L*zt)-S*(d*$t-g*zt)+Dt*(d*L-g*b),t[3]=-(h*(b*Ct-L*bt)-S*(d*Ct-g*bt)+ut*(d*L-g*b)),t[4]=-(y*(bt*$t-Ct*zt)-W*(b*$t-L*zt)+Et*(b*Ct-L*bt)),t[5]=u*(bt*$t-Ct*zt)-W*(d*$t-g*zt)+Et*(d*Ct-g*bt),t[6]=-(u*(b*$t-L*zt)-y*(d*$t-g*zt)+Et*(d*L-g*b)),t[7]=u*(b*Ct-L*bt)-y*(d*Ct-g*bt)+W*(d*L-g*b),t[8]=y*(ut*$t-Ct*Dt)-W*(S*$t-L*Dt)+Et*(S*Ct-L*ut),t[9]=-(u*(ut*$t-Ct*Dt)-W*(h*$t-g*Dt)+Et*(h*Ct-g*ut)),t[10]=u*(S*$t-L*Dt)-y*(h*$t-g*Dt)+Et*(h*L-g*S),t[11]=-(u*(S*Ct-L*ut)-y*(h*Ct-g*ut)+W*(h*L-g*S)),t[12]=-(y*(ut*zt-bt*Dt)-W*(S*zt-b*Dt)+Et*(S*bt-b*ut)),t[13]=u*(ut*zt-bt*Dt)-W*(h*zt-d*Dt)+Et*(h*bt-d*ut),t[14]=-(u*(S*zt-b*Dt)-y*(h*zt-d*Dt)+Et*(h*b-d*S)),t[15]=u*(S*bt-b*ut)-y*(h*bt-d*ut)+W*(h*b-d*S),t},determinant:function(t){var a=t[0],u=t[1],h=t[2],d=t[3],g=t[4],y=t[5],S=t[6],b=t[7],L=t[8],W=t[9],ut=t[10],bt=t[11],Ct=t[12],Et=t[13],Dt=t[14],zt=t[15];return(a*y-u*g)*(ut*zt-bt*Dt)-(a*S-h*g)*(W*zt-bt*Et)+(a*b-d*g)*(W*Dt-ut*Et)+(u*S-h*y)*(L*zt-bt*Ct)-(u*b-d*y)*(L*Dt-ut*Ct)+(h*b-d*S)*(L*Et-W*Ct)},multiply:function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=a[4],b=a[5],L=a[6],W=a[7],ut=a[8],bt=a[9],Ct=a[10],Et=a[11],Dt=a[12],zt=a[13],$t=a[14],ae=a[15],Jt=u[0],qt=u[1],me=u[2],ge=u[3];return t[0]=Jt*h+qt*S+me*ut+ge*Dt,t[1]=Jt*d+qt*b+me*bt+ge*zt,t[2]=Jt*g+qt*L+me*Ct+ge*$t,t[3]=Jt*y+qt*W+me*Et+ge*ae,t[4]=(Jt=u[4])*h+(qt=u[5])*S+(me=u[6])*ut+(ge=u[7])*Dt,t[5]=Jt*d+qt*b+me*bt+ge*zt,t[6]=Jt*g+qt*L+me*Ct+ge*$t,t[7]=Jt*y+qt*W+me*Et+ge*ae,t[8]=(Jt=u[8])*h+(qt=u[9])*S+(me=u[10])*ut+(ge=u[11])*Dt,t[9]=Jt*d+qt*b+me*bt+ge*zt,t[10]=Jt*g+qt*L+me*Ct+ge*$t,t[11]=Jt*y+qt*W+me*Et+ge*ae,t[12]=(Jt=u[12])*h+(qt=u[13])*S+(me=u[14])*ut+(ge=u[15])*Dt,t[13]=Jt*d+qt*b+me*bt+ge*zt,t[14]=Jt*g+qt*L+me*Ct+ge*$t,t[15]=Jt*y+qt*W+me*Et+ge*ae,t},multiplyAffine:function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[4],S=a[5],b=a[6],L=a[8],W=a[9],ut=a[10],bt=a[12],Ct=a[13],Et=a[14],Dt=u[0],zt=u[1],$t=u[2];return t[0]=Dt*h+zt*y+$t*L,t[1]=Dt*d+zt*S+$t*W,t[2]=Dt*g+zt*b+$t*ut,t[4]=(Dt=u[4])*h+(zt=u[5])*y+($t=u[6])*L,t[5]=Dt*d+zt*S+$t*W,t[6]=Dt*g+zt*b+$t*ut,t[8]=(Dt=u[8])*h+(zt=u[9])*y+($t=u[10])*L,t[9]=Dt*d+zt*S+$t*W,t[10]=Dt*g+zt*b+$t*ut,t[12]=(Dt=u[12])*h+(zt=u[13])*y+($t=u[14])*L+bt,t[13]=Dt*d+zt*S+$t*W+Ct,t[14]=Dt*g+zt*b+$t*ut+Et,t}};pr.mul=pr.multiply,pr.mulAffine=pr.multiplyAffine,pr.translate=function(t,a,u){var y,S,b,L,W,ut,bt,Ct,Et,Dt,zt,$t,h=u[0],d=u[1],g=u[2];return a===t?(t[12]=a[0]*h+a[4]*d+a[8]*g+a[12],t[13]=a[1]*h+a[5]*d+a[9]*g+a[13],t[14]=a[2]*h+a[6]*d+a[10]*g+a[14],t[15]=a[3]*h+a[7]*d+a[11]*g+a[15]):(S=a[1],b=a[2],L=a[3],W=a[4],ut=a[5],bt=a[6],Ct=a[7],Et=a[8],Dt=a[9],zt=a[10],$t=a[11],t[0]=y=a[0],t[1]=S,t[2]=b,t[3]=L,t[4]=W,t[5]=ut,t[6]=bt,t[7]=Ct,t[8]=Et,t[9]=Dt,t[10]=zt,t[11]=$t,t[12]=y*h+W*d+Et*g+a[12],t[13]=S*h+ut*d+Dt*g+a[13],t[14]=b*h+bt*d+zt*g+a[14],t[15]=L*h+Ct*d+$t*g+a[15]),t},pr.scale=function(t,a,u){var h=u[0],d=u[1],g=u[2];return t[0]=a[0]*h,t[1]=a[1]*h,t[2]=a[2]*h,t[3]=a[3]*h,t[4]=a[4]*d,t[5]=a[5]*d,t[6]=a[6]*d,t[7]=a[7]*d,t[8]=a[8]*g,t[9]=a[9]*g,t[10]=a[10]*g,t[11]=a[11]*g,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},pr.rotate=function(t,a,u,h){var b,L,W,ut,bt,Ct,Et,Dt,zt,$t,ae,Jt,qt,me,ge,Ge,Oe,We,ar,Ke,lr,vr,nr,Sr,d=h[0],g=h[1],y=h[2],S=Math.sqrt(d*d+g*g+y*y);return Math.abs(S)<Zr?null:(d*=S=1/S,g*=S,y*=S,b=Math.sin(u),L=Math.cos(u),bt=a[1],Ct=a[2],Et=a[3],zt=a[5],$t=a[6],ae=a[7],qt=a[9],me=a[10],ge=a[11],ar=d*g*(W=1-L)-y*b,Ke=g*g*W+L,lr=y*g*W+d*b,vr=d*y*W+g*b,nr=g*y*W-d*b,Sr=y*y*W+L,t[0]=(ut=a[0])*(Ge=d*d*W+L)+(Dt=a[4])*(Oe=g*d*W+y*b)+(Jt=a[8])*(We=y*d*W-g*b),t[1]=bt*Ge+zt*Oe+qt*We,t[2]=Ct*Ge+$t*Oe+me*We,t[3]=Et*Ge+ae*Oe+ge*We,t[4]=ut*ar+Dt*Ke+Jt*lr,t[5]=bt*ar+zt*Ke+qt*lr,t[6]=Ct*ar+$t*Ke+me*lr,t[7]=Et*ar+ae*Ke+ge*lr,t[8]=ut*vr+Dt*nr+Jt*Sr,t[9]=bt*vr+zt*nr+qt*Sr,t[10]=Ct*vr+$t*nr+me*Sr,t[11]=Et*vr+ae*nr+ge*Sr,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},pr.rotateX=function(t,a,u){var h=Math.sin(u),d=Math.cos(u),g=a[4],y=a[5],S=a[6],b=a[7],L=a[8],W=a[9],ut=a[10],bt=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=g*d+L*h,t[5]=y*d+W*h,t[6]=S*d+ut*h,t[7]=b*d+bt*h,t[8]=L*d-g*h,t[9]=W*d-y*h,t[10]=ut*d-S*h,t[11]=bt*d-b*h,t},pr.rotateY=function(t,a,u){var h=Math.sin(u),d=Math.cos(u),g=a[0],y=a[1],S=a[2],b=a[3],L=a[8],W=a[9],ut=a[10],bt=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=g*d-L*h,t[1]=y*d-W*h,t[2]=S*d-ut*h,t[3]=b*d-bt*h,t[8]=g*h+L*d,t[9]=y*h+W*d,t[10]=S*h+ut*d,t[11]=b*h+bt*d,t},pr.rotateZ=function(t,a,u){var h=Math.sin(u),d=Math.cos(u),g=a[0],y=a[1],S=a[2],b=a[3],L=a[4],W=a[5],ut=a[6],bt=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=g*d+L*h,t[1]=y*d+W*h,t[2]=S*d+ut*h,t[3]=b*d+bt*h,t[4]=L*d-g*h,t[5]=W*d-y*h,t[6]=ut*d-S*h,t[7]=bt*d-b*h,t},pr.fromRotationTranslation=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=h+h,b=d+d,L=g+g,W=h*S,ut=h*b,bt=h*L,Ct=d*b,Et=d*L,Dt=g*L,zt=y*S,$t=y*b,ae=y*L;return t[0]=1-(Ct+Dt),t[1]=ut+ae,t[2]=bt-$t,t[3]=0,t[4]=ut-ae,t[5]=1-(W+Dt),t[6]=Et+zt,t[7]=0,t[8]=bt+$t,t[9]=Et-zt,t[10]=1-(W+Ct),t[11]=0,t[12]=u[0],t[13]=u[1],t[14]=u[2],t[15]=1,t},pr.fromQuat=function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=u+u,S=h+h,b=d+d,L=u*y,W=h*y,ut=h*S,bt=d*y,Ct=d*S,Et=d*b,Dt=g*y,zt=g*S,$t=g*b;return t[0]=1-ut-Et,t[1]=W+$t,t[2]=bt-zt,t[3]=0,t[4]=W-$t,t[5]=1-L-Et,t[6]=Ct+Dt,t[7]=0,t[8]=bt+zt,t[9]=Ct-Dt,t[10]=1-L-ut,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},pr.frustum=function(t,a,u,h,d,g,y){var S=1/(u-a),b=1/(d-h),L=1/(g-y);return t[0]=2*g*S,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*g*b,t[6]=0,t[7]=0,t[8]=(u+a)*S,t[9]=(d+h)*b,t[10]=(y+g)*L,t[11]=-1,t[12]=0,t[13]=0,t[14]=y*g*2*L,t[15]=0,t},pr.perspective=function(t,a,u,h,d){var g=1/Math.tan(a/2),y=1/(h-d);return t[0]=g/u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=g,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(d+h)*y,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*d*h*y,t[15]=0,t},pr.ortho=function(t,a,u,h,d,g,y){var S=1/(a-u),b=1/(h-d),L=1/(g-y);return t[0]=-2*S,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*b,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*L,t[11]=0,t[12]=(a+u)*S,t[13]=(d+h)*b,t[14]=(y+g)*L,t[15]=1,t},pr.lookAt=function(t,a,u,h){var d,g,y,S,b,L,W,ut,bt,Ct,Et=a[0],Dt=a[1],zt=a[2],$t=h[0],ae=h[1],Jt=h[2],qt=u[0],me=u[1],ge=u[2];return Math.abs(Et-qt)<Zr&&Math.abs(Dt-me)<Zr&&Math.abs(zt-ge)<Zr?pr.identity(t):(W=Et-qt,ut=Dt-me,bt=zt-ge,d=ae*(bt*=Ct=1/Math.sqrt(W*W+ut*ut+bt*bt))-Jt*(ut*=Ct),g=Jt*(W*=Ct)-$t*bt,y=$t*ut-ae*W,(Ct=Math.sqrt(d*d+g*g+y*y))?(d*=Ct=1/Ct,g*=Ct,y*=Ct):(d=0,g=0,y=0),S=ut*y-bt*g,b=bt*d-W*y,L=W*g-ut*d,(Ct=Math.sqrt(S*S+b*b+L*L))?(S*=Ct=1/Ct,b*=Ct,L*=Ct):(S=0,b=0,L=0),t[0]=d,t[1]=S,t[2]=W,t[3]=0,t[4]=g,t[5]=b,t[6]=ut,t[7]=0,t[8]=y,t[9]=L,t[10]=bt,t[11]=0,t[12]=-(d*Et+g*Dt+y*zt),t[13]=-(S*Et+b*Dt+L*zt),t[14]=-(W*Et+ut*Dt+bt*zt),t[15]=1,t)},pr.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))};const gr=pr;var Yr={create:function(){var t=new Nr(3);return t[0]=0,t[1]=0,t[2]=0,t},clone:function(t){var a=new Nr(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},fromValues:function(t,a,u){var h=new Nr(3);return h[0]=t,h[1]=a,h[2]=u,h},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},set:function(t,a,u,h){return t[0]=a,t[1]=u,t[2]=h,t},add:function(t,a,u){return t[0]=a[0]+u[0],t[1]=a[1]+u[1],t[2]=a[2]+u[2],t},subtract:function(t,a,u){return t[0]=a[0]-u[0],t[1]=a[1]-u[1],t[2]=a[2]-u[2],t}};Yr.sub=Yr.subtract,Yr.multiply=function(t,a,u){return t[0]=a[0]*u[0],t[1]=a[1]*u[1],t[2]=a[2]*u[2],t},Yr.mul=Yr.multiply,Yr.divide=function(t,a,u){return t[0]=a[0]/u[0],t[1]=a[1]/u[1],t[2]=a[2]/u[2],t},Yr.div=Yr.divide,Yr.min=function(t,a,u){return t[0]=Math.min(a[0],u[0]),t[1]=Math.min(a[1],u[1]),t[2]=Math.min(a[2],u[2]),t},Yr.max=function(t,a,u){return t[0]=Math.max(a[0],u[0]),t[1]=Math.max(a[1],u[1]),t[2]=Math.max(a[2],u[2]),t},Yr.scale=function(t,a,u){return t[0]=a[0]*u,t[1]=a[1]*u,t[2]=a[2]*u,t},Yr.scaleAndAdd=function(t,a,u,h){return t[0]=a[0]+u[0]*h,t[1]=a[1]+u[1]*h,t[2]=a[2]+u[2]*h,t},Yr.distance=function(t,a){var u=a[0]-t[0],h=a[1]-t[1],d=a[2]-t[2];return Math.sqrt(u*u+h*h+d*d)},Yr.dist=Yr.distance,Yr.squaredDistance=function(t,a){var u=a[0]-t[0],h=a[1]-t[1],d=a[2]-t[2];return u*u+h*h+d*d},Yr.sqrDist=Yr.squaredDistance,Yr.length=function(t){var a=t[0],u=t[1],h=t[2];return Math.sqrt(a*a+u*u+h*h)},Yr.len=Yr.length,Yr.squaredLength=function(t){var a=t[0],u=t[1],h=t[2];return a*a+u*u+h*h},Yr.sqrLen=Yr.squaredLength,Yr.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},Yr.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},Yr.normalize=function(t,a){var u=a[0],h=a[1],d=a[2],g=u*u+h*h+d*d;return g>0&&(g=1/Math.sqrt(g),t[0]=a[0]*g,t[1]=a[1]*g,t[2]=a[2]*g),t},Yr.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},Yr.cross=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=u[0],S=u[1],b=u[2];return t[0]=d*b-g*S,t[1]=g*y-h*b,t[2]=h*S-d*y,t},Yr.lerp=function(t,a,u,h){var d=a[0],g=a[1],y=a[2];return t[0]=d+h*(u[0]-d),t[1]=g+h*(u[1]-g),t[2]=y+h*(u[2]-y),t},Yr.random=function(t,a){a=a||1;var u=2*re()*Math.PI,h=2*re()-1,d=Math.sqrt(1-h*h)*a;return t[0]=Math.cos(u)*d,t[1]=Math.sin(u)*d,t[2]=h*a,t},Yr.transformMat4=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=u[3]*h+u[7]*d+u[11]*g+u[15];return t[0]=(u[0]*h+u[4]*d+u[8]*g+u[12])/(y=y||1),t[1]=(u[1]*h+u[5]*d+u[9]*g+u[13])/y,t[2]=(u[2]*h+u[6]*d+u[10]*g+u[14])/y,t},Yr.transformMat3=function(t,a,u){var h=a[0],d=a[1],g=a[2];return t[0]=h*u[0]+d*u[3]+g*u[6],t[1]=h*u[1]+d*u[4]+g*u[7],t[2]=h*u[2]+d*u[5]+g*u[8],t},Yr.transformQuat=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=u[0],S=u[1],b=u[2],L=u[3],W=L*h+S*g-b*d,ut=L*d+b*h-y*g,bt=L*g+y*d-S*h,Ct=-y*h-S*d-b*g;return t[0]=W*L+Ct*-y+ut*-b-bt*-S,t[1]=ut*L+Ct*-S+bt*-y-W*-b,t[2]=bt*L+Ct*-b+W*-S-ut*-y,t},Yr.rotateX=function(t,a,u,h){var d=[],g=[];return d[0]=a[0]-u[0],d[1]=a[1]-u[1],d[2]=a[2]-u[2],g[0]=d[0],g[1]=d[1]*Math.cos(h)-d[2]*Math.sin(h),g[2]=d[1]*Math.sin(h)+d[2]*Math.cos(h),t[0]=g[0]+u[0],t[1]=g[1]+u[1],t[2]=g[2]+u[2],t},Yr.rotateY=function(t,a,u,h){var d=[],g=[];return d[0]=a[0]-u[0],d[1]=a[1]-u[1],d[2]=a[2]-u[2],g[0]=d[2]*Math.sin(h)+d[0]*Math.cos(h),g[1]=d[1],g[2]=d[2]*Math.cos(h)-d[0]*Math.sin(h),t[0]=g[0]+u[0],t[1]=g[1]+u[1],t[2]=g[2]+u[2],t},Yr.rotateZ=function(t,a,u,h){var d=[],g=[];return d[0]=a[0]-u[0],d[1]=a[1]-u[1],d[2]=a[2]-u[2],g[0]=d[0]*Math.cos(h)-d[1]*Math.sin(h),g[1]=d[0]*Math.sin(h)+d[1]*Math.cos(h),g[2]=d[2],t[0]=g[0]+u[0],t[1]=g[1]+u[1],t[2]=g[2]+u[2],t},Yr.forEach=function(){var t=Yr.create();return function(a,u,h,d,g,y){var S,b;for(u||(u=3),h||(h=0),b=d?Math.min(d*u+h,a.length):a.length,S=h;S<b;S+=u)t[0]=a[S],t[1]=a[S+1],t[2]=a[S+2],g(t,t,y),a[S]=t[0],a[S+1]=t[1],a[S+2]=t[2];return a}}(),Yr.angle=function(t,a){var u=Yr.fromValues(t[0],t[1],t[2]),h=Yr.fromValues(a[0],a[1],a[2]);Yr.normalize(u,u),Yr.normalize(h,h);var d=Yr.dot(u,h);return d>1?0:Math.acos(d)};const he=Yr;rr.import(Tn);var ur=gr.create,Fr={};function sr(t){return t.material}function Xo(t,a,u){return a.uniforms[u].value}function _o(t,a,u,h){return u!==h}function Ms(t){return!0}function Or(){}var bs={float:5126,byte:5120,ubyte:5121,short:5122,ushort:5123};function En(t,a,u){this.availableAttributes=t,this.availableAttributeSymbols=a,this.indicesBuffer=u,this.vao=null}function xa(t){var a,u;this.bind=function(h){a||((a=vt.createCanvas()).width=a.height=1,a.getContext("2d"));var d=h.gl,g=!u;g&&(u=d.createTexture()),d.bindTexture(d.TEXTURE_2D,u),g&&d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,a)},this.unbind=function(h){h.gl.bindTexture(h.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var Sa=I.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window<"u"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=vt.createCanvas());var t=this.canvas;try{var a={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=t.getContext("webgl",a)||t.getContext("experimental-webgl",a),!this.gl)throw new Error;this._glinfo=new R(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(u){throw"Error creating WebGL Context "+u}this._programMgr=new fa(this),this._placeholderTexture=new xa(this)},{resize:function(t,a){var u=this.canvas,h=this.devicePixelRatio;null!=t?(u.style&&(u.style.width=t+"px",u.style.height=a+"px"),u.width=t*h,u.height=a*h,this._width=t,this._height=a):(this._width=u.width/h,this._height=u.height/h),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var t=this.viewport;return t.width/t.height},setDevicePixelRatio:function(t){this.devicePixelRatio=t,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(t){return this._glinfo.getExtension(t)},getGLParameter:function(t){return this._glinfo.getParameter(t)},setViewport:function(t,a,u,h,d){if("object"==typeof t){var g=t;t=g.x,a=g.y,u=g.width,h=g.height,d=g.devicePixelRatio}this.gl.viewport(t*(d=d||this.devicePixelRatio),a*d,u*d,h*d),this.viewport={x:t,y:a,width:u,height:h,devicePixelRatio:d}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var t=this._clearStack.pop();this.clearColor=t.clearColor,this.clearBit=t.clearBit}},bindSceneRendering:function(t){this._sceneRendering=t},render:function(t,a,u,h){var d=this.gl,g=this.clearColor;if(this.clearBit){d.colorMask(!0,!0,!0,!0),d.depthMask(!0);var y=this.viewport,S=!1,b=y.devicePixelRatio;(y.width!==this._width||y.height!==this._height||b&&b!==this.devicePixelRatio||y.x||y.y)&&(S=!0,d.enable(d.SCISSOR_TEST),d.scissor(y.x*b,y.y*b,y.width*b,y.height*b)),d.clearColor(g[0],g[1],g[2],g[3]),d.clear(this.clearBit),S&&d.disable(d.SCISSOR_TEST)}if(u||t.update(!1),t.updateLights(),a=a||t.getMainCamera()){a.update();var L=t.updateRenderList(a,!0);this._sceneRendering=t;var W=L.opaque,ut=L.transparent,bt=t.material;t.trigger("beforerender",this,t,a,L),h?(this.renderPreZ(W,t,a),d.depthFunc(d.LEQUAL)):d.depthFunc(d.LESS);for(var Ct=ur(),Et=he.create(),Dt=0;Dt<ut.length;Dt++){var zt=ut[Dt];gr.multiplyAffine(Ct,a.viewMatrix.array,zt.worldTransform.array),he.transformMat4(Et,zt.position.array,Ct),zt.__depth=Et[2]}this.renderPass(W,a,{getMaterial:function($t){return bt||$t.material},sortCompare:this.opaqueSortCompare}),this.renderPass(ut,a,{getMaterial:function($t){return bt||$t.material},sortCompare:this.transparentSortCompare}),t.trigger("afterrender",this,t,a,L),this._sceneRendering=null}else console.error("Can't find camera in the scene.")},getProgram:function(t,a,u){return this._programMgr.getProgram(t,a=a||t.material,u)},validateProgram:function(t){if(t.__error){var a=t.__error;if(Fr[t.__uid__])return;if(Fr[t.__uid__]=!0,this.throwError)throw new Error(a);this.trigger("error",a)}},updatePrograms:function(t,a,u){var h=u&&u.getMaterial||sr;a=a||null;for(var d=0;d<t.length;d++){var g=t[d],y=h.call(this,g);if(d>0){var S=t[d-1];if((g.joints?g.joints.length:0)===(S.joints?S.joints.length:0)&&g.material===S.material&&g.lightGroup===S.lightGroup){g.__program=S.__program;continue}}var W=this._programMgr.getProgram(g,y,a);this.validateProgram(W),g.__program=W}},renderPass:function(t,a,u){this.trigger("beforerenderpass",this,t,a,u),(u=u||{}).getMaterial=u.getMaterial||sr,u.getUniform=u.getUniform||Xo,u.isMaterialChanged=u.isMaterialChanged||_o,u.beforeRender=u.beforeRender||Or,u.afterRender=u.afterRender||Or;var h=u.ifRender||Ms;this.updatePrograms(t,this._sceneRendering,u),u.sortCompare&&t.sort(u.sortCompare);var d=this.viewport,g=d.devicePixelRatio,y=[d.x*g,d.y*g,d.width*g,d.height*g],S=this.devicePixelRatio,b=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*S,this._height*S],L=[y[2],y[3]],W=Date.now();a?(gr.copy(zn.VIEW,a.viewMatrix.array),gr.copy(zn.PROJECTION,a.projectionMatrix.array),gr.copy(zn.VIEWINVERSE,a.worldTransform.array)):(gr.identity(zn.VIEW),gr.identity(zn.PROJECTION),gr.identity(zn.VIEWINVERSE)),gr.multiply(zn.VIEWPROJECTION,zn.PROJECTION,zn.VIEW),gr.invert(zn.PROJECTIONINVERSE,zn.PROJECTION),gr.invert(zn.VIEWPROJECTIONINVERSE,zn.VIEWPROJECTION);for(var Ct,Et,Dt,zt,$t,ae,Jt,qt,me,ge,Ge,Oe,ut=this.gl,bt=this._sceneRendering,ar=0;ar<t.length;ar++){var vr,Ke=t[ar],lr=null!=Ke.worldTransform;if(h(Ke)){lr&&(vr=Ke.isSkinnedMesh&&Ke.isSkinnedMesh()?Ke.offsetMatrix?Ke.offsetMatrix.array:zn.IDENTITY:Ke.worldTransform.array);var nr=Ke.geometry,Sr=u.getMaterial.call(this,Ke),Er=Ke.__program,Wr=Sr.shader,Tr=nr.__uid__+"-"+Er.__uid__,wn=Tr!==ge;ge=Tr,lr&&(gr.copy(zn.WORLD,vr),gr.multiply(zn.WORLDVIEWPROJECTION,zn.VIEWPROJECTION,vr),gr.multiplyAffine(zn.WORLDVIEW,zn.VIEW,vr),(Wr.matrixSemantics.WORLDINVERSE||Wr.matrixSemantics.WORLDINVERSETRANSPOSE)&&gr.invert(zn.WORLDINVERSE,vr),(Wr.matrixSemantics.WORLDVIEWINVERSE||Wr.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&gr.invert(zn.WORLDVIEWINVERSE,zn.WORLDVIEW),(Wr.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||Wr.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&gr.invert(zn.WORLDVIEWPROJECTIONINVERSE,zn.WORLDVIEWPROJECTION)),Ke.beforeRender&&Ke.beforeRender(this),u.beforeRender.call(this,Ke,Sr,Ct);var Gr=Er!==Et;Gr?(Er.bind(this),Er.setUniformOfSemantic(ut,"VIEWPORT",y),Er.setUniformOfSemantic(ut,"WINDOW_SIZE",b),a&&(Er.setUniformOfSemantic(ut,"NEAR",a.near),Er.setUniformOfSemantic(ut,"FAR",a.far)),Er.setUniformOfSemantic(ut,"DEVICEPIXELRATIO",g),Er.setUniformOfSemantic(ut,"TIME",W),Er.setUniformOfSemantic(ut,"VIEWPORT_SIZE",L),bt&&bt.setLightUniforms(Er,Ke.lightGroup,this)):Er=Et,(Gr||u.isMaterialChanged(Ke,Dt,Sr,Ct))&&(Sr.depthTest!==zt&&(Sr.depthTest?ut.enable(ut.DEPTH_TEST):ut.disable(ut.DEPTH_TEST),zt=Sr.depthTest),Sr.depthMask!==$t&&(ut.depthMask(Sr.depthMask),$t=Sr.depthMask),Sr.transparent!==me&&(Sr.transparent?ut.enable(ut.BLEND):ut.disable(ut.BLEND),me=Sr.transparent),Sr.transparent&&(Sr.blend?Sr.blend(ut):(ut.blendEquationSeparate(ut.FUNC_ADD,ut.FUNC_ADD),ut.blendFuncSeparate(ut.SRC_ALPHA,ut.ONE_MINUS_SRC_ALPHA,ut.ONE,ut.ONE_MINUS_SRC_ALPHA))),Oe=this._bindMaterial(Ke,Sr,Er,Dt||null,Ct||null,Et||null,u.getUniform),Ct=Sr);var Kn=Wr.matrixSemanticKeys;if(lr)for(var Dn=0;Dn<Kn.length;Dn++){var ri=Kn[Dn],ni=Wr.matrixSemantics[ri],xn=zn[ri];ni.isTranspose&&gr.transpose(xn,zn[ni.semanticNoTranspose]),Er.setUniform(ut,ni.type,ni.symbol,xn)}Ke.cullFace!==Jt&&ut.cullFace(Jt=Ke.cullFace),Ke.frontFace!==qt&&ut.frontFace(qt=Ke.frontFace),Ke.culling!==ae&&((ae=Ke.culling)?ut.enable(ut.CULL_FACE):ut.disable(ut.CULL_FACE)),this._updateSkeleton(Ke,Er,Oe),wn&&(Ge=this._bindVAO(null,Wr,nr,Er)),this._renderObject(Ke,Ge,Er),u.afterRender(this,Ke),Ke.afterRender&&Ke.afterRender(this),Et=Er,Dt=Ke}}this.trigger("afterrenderpass",this,t,a,u)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(t,a,u){var h=this.gl,d=t.skeleton;if(d)if(d.update(),t.joints.length>this.getMaxJointNumber()){var g=d.getSubSkinMatricesTexture(t.__uid__,t.joints);a.useTextureSlot(this,g,u),a.setUniform(h,"1i","skinMatricesTexture",u),a.setUniform(h,"1f","skinMatricesTextureSize",g.width)}else{var y=d.getSubSkinMatrices(t.__uid__,t.joints);a.setUniformOfSemantic(h,"SKIN_MATRIX",y)}},_renderObject:function(t,a,u){var h=this.gl,d=t.geometry,g=t.mode;null==g&&(g=4);var y=null,S=t.isInstancedMesh&&t.isInstancedMesh();if(!S||(y=this.getGLExtension("ANGLE_instanced_arrays"))){var b;if(S&&(b=this._bindInstancedAttributes(t,u,y)),a.indicesBuffer){var ut=this.getGLExtension("OES_element_index_uint")&&d.indices instanceof Uint32Array?h.UNSIGNED_INT:h.UNSIGNED_SHORT;S?y.drawElementsInstancedANGLE(g,a.indicesBuffer.count,ut,0,t.getInstanceCount()):h.drawElements(g,a.indicesBuffer.count,ut,0)}else S?y.drawArraysInstancedANGLE(g,0,d.vertexCount,t.getInstanceCount()):h.drawArrays(g,0,d.vertexCount);if(S)for(var bt=0;bt<b.length;bt++)h.disableVertexAttribArray(b[bt])}else console.warn("Device not support ANGLE_instanced_arrays extension")},_bindInstancedAttributes:function(t,a,u){for(var h=this.gl,d=t.getInstancedAttributesBuffers(this),g=[],y=0;y<d.length;y++){var S=d[y],b=a.getAttribLocation(h,S.symbol);if(!(b<0)){var L=bs[S.type]||h.FLOAT;h.enableVertexAttribArray(b),h.bindBuffer(h.ARRAY_BUFFER,S.buffer),h.vertexAttribPointer(b,S.size,L,!1,0,0),u.vertexAttribDivisorANGLE(b,S.divisor),g.push(b)}}return g},_bindMaterial:function(t,a,u,h,d,g,y){for(var S=this.gl,b=g===u,L=u.currentTextureSlot(),W=a.getEnabledUniforms(),ut=a.getTextureUniforms(),bt=this._placeholderTexture,Ct=0;Ct<ut.length;Ct++){var Dt=y(t,a,Et=ut[Ct]);if("t"===(zt=a.uniforms[Et].type)&&Dt)Dt.__slot=-1;else if("tv"===zt)for(var $t=0;$t<Dt.length;$t++)Dt[$t]&&(Dt[$t].__slot=-1)}for(bt.__slot=-1,Ct=0;Ct<W.length;Ct++){var Et,zt,ae=a.uniforms[Et=W[Ct]],Jt=(Dt=y(t,a,Et),"t"===(zt=ae.type));if(Jt&&(!Dt||!Dt.isRenderable())&&(Dt=bt),d&&b){var qt=y(h,d,Et);if(Jt&&(!qt||!qt.isRenderable())&&(qt=bt),qt===Dt){if(Jt)u.takeCurrentTextureSlot(this,null);else if("tv"===zt&&Dt)for($t=0;$t<Dt.length;$t++)u.takeCurrentTextureSlot(this,null);continue}}if(null!=Dt)if(Jt)if(Dt.__slot<0){var me=u.currentTextureSlot();u.setUniform(S,"1i",Et,me)&&(u.takeCurrentTextureSlot(this,Dt),Dt.__slot=me)}else u.setUniform(S,"1i",Et,Dt.__slot);else if(Array.isArray(Dt)){if(0===Dt.length)continue;if("tv"===zt){if(!u.hasUniform(Et))continue;var Ge=[];for($t=0;$t<Dt.length;$t++){var Oe=Dt[$t];Oe.__slot<0?(me=u.currentTextureSlot(),Ge.push(me),u.takeCurrentTextureSlot(this,Oe),Oe.__slot=me):Ge.push(Oe.__slot)}u.setUniform(S,"1iv",Et,Ge)}else u.setUniform(S,ae.type,Et,Dt)}else u.setUniform(S,ae.type,Et,Dt)}var We=u.currentTextureSlot();return u.resetTextureSlot(L),We},_bindVAO:function(t,a,u,h){var d=!u.dynamic,g=this.gl,y=this.__uid__+"-"+h.__uid__,S=u.__vaoCache[y];if(!S){var b=u.getBufferChunks(this);if(!b||!b.length)return;for(var L=b[0],W=L.attributeBuffers,qt=L.indicesBuffer,Jt=[],ut=[],bt=0;bt<W.length;bt++){var zt,Dt=(Ct=W[bt]).semantic;if(Dt){var $t=a.attributeSemantics[Dt];zt=$t&&$t.symbol}else zt=Ct.name;zt&&h.attributes[zt]&&(Jt.push(Ct),ut.push(zt))}S=new En(Jt,ut,qt),d&&(u.__vaoCache[y]=S)}var ae=!0;if(t&&d&&(null==S.vao?S.vao=t.createVertexArrayOES():ae=!1,t.bindVertexArrayOES(S.vao)),Jt=S.availableAttributes,qt=S.indicesBuffer,ae){var me=h.enableAttributes(this,S.availableAttributeSymbols,t&&d&&S);for(bt=0;bt<Jt.length;bt++){var ge=me[bt];if(-1!==ge){var Ct,Oe=(Ct=Jt[bt]).size,We=bs[Ct.type]||g.FLOAT;g.bindBuffer(g.ARRAY_BUFFER,Ct.buffer),g.vertexAttribPointer(ge,Oe,We,!1,0,0)}}u.isUseIndices()&&g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,qt.buffer)}return S},renderPreZ:function(t,a,u){var h=this.gl,d=this._prezMaterial||new Cr({shader:new rr(rr.source("clay.prez.vertex"),rr.source("clay.prez.fragment"))});this._prezMaterial=d,h.colorMask(!1,!1,!1,!1),h.depthMask(!0),this.renderPass(t,u,{ifRender:function(g){return!g.ignorePreZ},isMaterialChanged:function(g,y){var S=g.material,b=y.material;return S.get("diffuseMap")!==b.get("diffuseMap")||(S.get("alphaCutoff")||0)!==(b.get("alphaCutoff")||0)},getUniform:function(g,y,S){return"alphaMap"===S?g.material.get("diffuseMap"):"alphaCutoff"===S?g.material.isDefined("fragment","ALPHA_TEST")&&g.material.get("diffuseMap")&&g.material.get("alphaCutoff")||0:"uvRepeat"===S?g.material.get("uvRepeat"):"uvOffset"===S?g.material.get("uvOffset"):y.get(S)},getMaterial:function(){return d},sort:this.opaqueSortCompare}),h.colorMask(!0,!0,!0,!0),h.depthMask(!0)},disposeScene:function(t){this.disposeNode(t,!0,!0),t.dispose()},disposeNode:function(t,a,u){t.getParent()&&t.getParent().remove(t);var h={};t.traverse(function(d){var g=d.material;if(d.geometry&&a&&d.geometry.dispose(this),u&&g&&!h[g.__uid__]){for(var y=g.getTextureUniforms(),S=0;S<y.length;S++){var b=y[S],L=g.uniforms[b].value,W=g.uniforms[b].type;if(L)if("t"===W)L.dispose&&L.dispose(this);else if("tv"===W)for(var ut=0;ut<L.length;ut++)L[ut]&&L[ut].dispose&&L[ut].dispose(this)}h[g.__uid__]=!0}d.dispose&&d.dispose(this)},this)},disposeGeometry:function(t){t.dispose(this)},disposeTexture:function(t){t.dispose(this)},disposeFrameBuffer:function(t){t.dispose(this)},dispose:function(){},screenToNDC:function(t,a,u){u||(u=new ne),a=this._height-a;var h=this.viewport,d=u.array;return d[0]=(t-h.x)/h.width,d[0]=2*d[0]-1,d[1]=(a-h.y)/h.height,d[1]=2*d[1]-1,u}});Sa.opaqueSortCompare=Sa.prototype.opaqueSortCompare=function(t,a){return t.renderOrder===a.renderOrder?t.__program===a.__program?t.material===a.material?t.geometry.__uid__-a.geometry.__uid__:t.material.__uid__-a.material.__uid__:t.__program&&a.__program?t.__program.__uid__-a.__program.__uid__:0:t.renderOrder-a.renderOrder},Sa.transparentSortCompare=Sa.prototype.transparentSortCompare=function(t,a){return t.renderOrder===a.renderOrder?t.__depth===a.__depth?t.__program===a.__program?t.material===a.material?t.geometry.__uid__-a.geometry.__uid__:t.material.__uid__-a.material.__uid__:t.__program&&a.__program?t.__program.__uid__-a.__program.__uid__:0:t.__depth-a.__depth:t.renderOrder-a.renderOrder};var zn={IDENTITY:ur(),WORLD:ur(),VIEW:ur(),PROJECTION:ur(),WORLDVIEW:ur(),VIEWPROJECTION:ur(),WORLDVIEWPROJECTION:ur(),WORLDINVERSE:ur(),VIEWINVERSE:ur(),PROJECTIONINVERSE:ur(),WORLDVIEWINVERSE:ur(),VIEWPROJECTIONINVERSE:ur(),WORLDVIEWPROJECTIONINVERSE:ur(),WORLDTRANSPOSE:ur(),VIEWTRANSPOSE:ur(),PROJECTIONTRANSPOSE:ur(),WORLDVIEWTRANSPOSE:ur(),VIEWPROJECTIONTRANSPOSE:ur(),WORLDVIEWPROJECTIONTRANSPOSE:ur(),WORLDINVERSETRANSPOSE:ur(),VIEWINVERSETRANSPOSE:ur(),PROJECTIONINVERSETRANSPOSE:ur(),WORLDVIEWINVERSETRANSPOSE:ur(),VIEWPROJECTIONINVERSETRANSPOSE:ur(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:ur()};Sa.COLOR_BUFFER_BIT=16384,Sa.DEPTH_BUFFER_BIT=256,Sa.STENCIL_BUFFER_BIT=1024;const Mo=Sa;var Kr=function(t,a,u){this.array=he.fromValues(t=t||0,a=a||0,u=u||0),this._dirty=!0};Kr.prototype={constructor:Kr,add:function(t){return he.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,a,u){return this.array[0]=t,this.array[1]=a,this.array[2]=u,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this._dirty=!0,this},clone:function(){return new Kr(this.x,this.y,this.z)},copy:function(t){return he.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,a){return he.cross(this.array,t.array,a.array),this._dirty=!0,this},dist:function(t){return he.dist(this.array,t.array)},distance:function(t){return he.distance(this.array,t.array)},div:function(t){return he.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return he.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return he.dot(this.array,t.array)},len:function(){return he.len(this.array)},length:function(){return he.length(this.array)},lerp:function(t,a,u){return he.lerp(this.array,t.array,a.array,u),this._dirty=!0,this},min:function(t){return he.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return he.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return he.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return he.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return he.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return he.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return he.random(this.array,t),this._dirty=!0,this},scale:function(t){return he.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,a){return he.scaleAndAdd(this.array,this.array,t.array,a),this._dirty=!0,this},sqrDist:function(t){return he.sqrDist(this.array,t.array)},squaredDistance:function(t){return he.squaredDistance(this.array,t.array)},sqrLen:function(){return he.sqrLen(this.array)},squaredLength:function(){return he.squaredLength(this.array)},sub:function(t){return he.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return he.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return he.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return he.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return he.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},applyProjection:function(t){var a=this.array;if(0===(t=t.array)[15]){var u=-1/a[2];a[0]=t[0]*a[0]*u,a[1]=t[5]*a[1]*u,a[2]=(t[10]*a[2]+t[14])*u}else a[0]=t[0]*a[0]+t[12],a[1]=t[5]*a[1]+t[13],a[2]=t[10]*a[2]+t[14];return this._dirty=!0,this},eulerFromQuat:function(t,a){Kr.eulerFromQuat(this,t,a)},eulerFromMat3:function(t,a){Kr.eulerFromMat3(this,t,a)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var ka=Object.defineProperty;if(ka){var za=Kr.prototype;ka(za,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),ka(za,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),ka(za,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}})}function ta(t,a,u){return t<a?a:t>u?u:t}Kr.add=function(t,a,u){return he.add(t.array,a.array,u.array),t._dirty=!0,t},Kr.set=function(t,a,u,h){he.set(t.array,a,u,h),t._dirty=!0},Kr.copy=function(t,a){return he.copy(t.array,a.array),t._dirty=!0,t},Kr.cross=function(t,a,u){return he.cross(t.array,a.array,u.array),t._dirty=!0,t},Kr.distance=Kr.dist=function(t,a){return he.distance(t.array,a.array)},Kr.divide=Kr.div=function(t,a,u){return he.divide(t.array,a.array,u.array),t._dirty=!0,t},Kr.dot=function(t,a){return he.dot(t.array,a.array)},Kr.len=function(t){return he.length(t.array)},Kr.lerp=function(t,a,u,h){return he.lerp(t.array,a.array,u.array,h),t._dirty=!0,t},Kr.min=function(t,a,u){return he.min(t.array,a.array,u.array),t._dirty=!0,t},Kr.max=function(t,a,u){return he.max(t.array,a.array,u.array),t._dirty=!0,t},Kr.multiply=Kr.mul=function(t,a,u){return he.multiply(t.array,a.array,u.array),t._dirty=!0,t},Kr.negate=function(t,a){return he.negate(t.array,a.array),t._dirty=!0,t},Kr.normalize=function(t,a){return he.normalize(t.array,a.array),t._dirty=!0,t},Kr.random=function(t,a){return he.random(t.array,a),t._dirty=!0,t},Kr.scale=function(t,a,u){return he.scale(t.array,a.array,u),t._dirty=!0,t},Kr.scaleAndAdd=function(t,a,u,h){return he.scaleAndAdd(t.array,a.array,u.array,h),t._dirty=!0,t},Kr.squaredDistance=Kr.sqrDist=function(t,a){return he.sqrDist(t.array,a.array)},Kr.squaredLength=Kr.sqrLen=function(t){return he.sqrLen(t.array)},Kr.subtract=Kr.sub=function(t,a,u){return he.subtract(t.array,a.array,u.array),t._dirty=!0,t},Kr.transformMat3=function(t,a,u){return he.transformMat3(t.array,a.array,u.array),t._dirty=!0,t},Kr.transformMat4=function(t,a,u){return he.transformMat4(t.array,a.array,u.array),t._dirty=!0,t},Kr.transformQuat=function(t,a,u){return he.transformQuat(t.array,a.array,u.array),t._dirty=!0,t};var On=Math.atan2,Ni=Math.asin,ea=Math.abs;Kr.eulerFromQuat=function(t,a,bt){t._dirty=!0;var h=t.array,d=(a=a.array)[0],g=a[1],y=a[2],S=a[3],b=d*d,L=g*g,W=y*y,ut=S*S;switch(bt=(bt||"XYZ").toUpperCase()){case"XYZ":h[0]=On(2*(d*S-g*y),ut-b-L+W),h[1]=Ni(ta(2*(d*y+g*S),-1,1)),h[2]=On(2*(y*S-d*g),ut+b-L-W);break;case"YXZ":h[0]=Ni(ta(2*(d*S-g*y),-1,1)),h[1]=On(2*(d*y+g*S),ut-b-L+W),h[2]=On(2*(d*g+y*S),ut-b+L-W);break;case"ZXY":h[0]=Ni(ta(2*(d*S+g*y),-1,1)),h[1]=On(2*(g*S-y*d),ut-b-L+W),h[2]=On(2*(y*S-d*g),ut-b+L-W);break;case"ZYX":h[0]=On(2*(d*S+y*g),ut-b-L+W),h[1]=Ni(ta(2*(g*S-d*y),-1,1)),h[2]=On(2*(d*g+y*S),ut+b-L-W);break;case"YZX":h[0]=On(2*(d*S-y*g),ut-b+L-W),h[1]=On(2*(g*S-d*y),ut+b-L-W),h[2]=Ni(ta(2*(d*g+y*S),-1,1));break;case"XZY":h[0]=On(2*(d*S+g*y),ut-b+L-W),h[1]=On(2*(d*y+g*S),ut+b-L-W),h[2]=Ni(ta(2*(y*S-d*g),-1,1));break;default:console.warn("Unkown order: "+bt)}return t},Kr.eulerFromMat3=function(t,a,Et){var h=a.array,d=h[0],g=h[3],y=h[6],S=h[1],b=h[4],L=h[7],W=h[2],ut=h[5],bt=h[8],Ct=t.array;switch(Et=(Et||"XYZ").toUpperCase()){case"XYZ":Ct[1]=Ni(ta(y,-1,1)),ea(y)<.99999?(Ct[0]=On(-L,bt),Ct[2]=On(-g,d)):(Ct[0]=On(ut,b),Ct[2]=0);break;case"YXZ":Ct[0]=Ni(-ta(L,-1,1)),ea(L)<.99999?(Ct[1]=On(y,bt),Ct[2]=On(S,b)):(Ct[1]=On(-W,d),Ct[2]=0);break;case"ZXY":Ct[0]=Ni(ta(ut,-1,1)),ea(ut)<.99999?(Ct[1]=On(-W,bt),Ct[2]=On(-g,b)):(Ct[1]=0,Ct[2]=On(S,d));break;case"ZYX":Ct[1]=Ni(-ta(W,-1,1)),ea(W)<.99999?(Ct[0]=On(ut,bt),Ct[2]=On(S,d)):(Ct[0]=0,Ct[2]=On(-g,b));break;case"YZX":Ct[2]=Ni(ta(S,-1,1)),ea(S)<.99999?(Ct[0]=On(-L,b),Ct[1]=On(-W,d)):(Ct[0]=0,Ct[1]=On(y,bt));break;case"XZY":Ct[2]=Ni(-ta(g,-1,1)),ea(g)<.99999?(Ct[0]=On(ut,b),Ct[1]=On(y,d)):(Ct[0]=On(-L,bt),Ct[1]=0);break;default:console.warn("Unkown order: "+Et)}return t._dirty=!0,t},Object.defineProperties(Kr,{POSITIVE_X:{get:function(){return new Kr(1,0,0)}},NEGATIVE_X:{get:function(){return new Kr(-1,0,0)}},POSITIVE_Y:{get:function(){return new Kr(0,1,0)}},NEGATIVE_Y:{get:function(){return new Kr(0,-1,0)}},POSITIVE_Z:{get:function(){return new Kr(0,0,1)}},NEGATIVE_Z:{get:function(){return new Kr(0,0,-1)}},UP:{get:function(){return new Kr(0,1,0)}},ZERO:{get:function(){return new Kr}}});const mr=Kr;var Yo=1e-5,xi=function(t,a){this.origin=t||new mr,this.direction=a||new mr};xi.prototype={constructor:xi,intersectPlane:function(t,a){var u=t.normal.array,h=t.distance,d=this.origin.array,g=this.direction.array,y=he.dot(u,g);if(0===y)return null;a||(a=new mr);var S=(he.dot(u,d)-h)/y;return he.scaleAndAdd(a.array,d,g,-S),a._dirty=!0,a},mirrorAgainstPlane:function(t){var a=he.dot(t.normal.array,this.direction.array);he.scaleAndAdd(this.direction.array,this.direction.array,t.normal.array,2*-a),this.direction._dirty=!0},distanceToPoint:function(){var t=he.create();return function(a){he.sub(t,a,this.origin.array);var u=he.dot(t,this.direction.array);if(u<0)return he.distance(this.origin.array,a);var h=he.lenSquared(t);return Math.sqrt(h-u*u)}}(),intersectSphere:function(){var t=he.create();return function(a,u,h){var d=this.origin.array,g=this.direction.array;he.sub(t,a=a.array,d);var y=he.dot(t,g),b=he.squaredLength(t)-y*y,L=u*u;if(!(b>L)){var W=Math.sqrt(L-b),ut=y-W,bt=y+W;return h||(h=new mr),ut<0?bt<0?null:(he.scaleAndAdd(h.array,d,g,bt),h):(he.scaleAndAdd(h.array,d,g,ut),h)}}}(),intersectBoundingBox:function(t,a){var L,W,ut,bt,Ct,Et,u=this.direction.array,h=this.origin.array,d=t.min.array,g=t.max.array,y=1/u[0],S=1/u[1],b=1/u[2];if(y>=0?(L=(d[0]-h[0])*y,W=(g[0]-h[0])*y):(W=(d[0]-h[0])*y,L=(g[0]-h[0])*y),S>=0?(ut=(d[1]-h[1])*S,bt=(g[1]-h[1])*S):(bt=(d[1]-h[1])*S,ut=(g[1]-h[1])*S),L>bt||ut>W||((ut>L||L!=L)&&(L=ut),(bt<W||W!=W)&&(W=bt),b>=0?(Ct=(d[2]-h[2])*b,Et=(g[2]-h[2])*b):(Et=(d[2]-h[2])*b,Ct=(g[2]-h[2])*b),L>Et||Ct>W)||((Ct>L||L!=L)&&(L=Ct),(Et<W||W!=W)&&(W=Et),W<0))return null;var Dt=L>=0?L:W;return a||(a=new mr),he.scaleAndAdd(a.array,h,u,Dt),a},intersectTriangle:function(){var t=he.create(),a=he.create(),u=he.create(),h=he.create();return function(d,g,y,S,b,L){var W=this.direction.array,ut=this.origin.array;y=y.array,he.sub(t,g=g.array,d=d.array),he.sub(a,y,d),he.cross(h,a,W);var bt=he.dot(t,h);if(S){if(bt>-Yo)return null}else if(bt>-Yo&&bt<Yo)return null;he.sub(u,ut,d);var Ct=he.dot(h,u)/bt;if(Ct<0||Ct>1)return null;he.cross(h,t,u);var Et=he.dot(W,h)/bt;if(Et<0||Et>1||Ct+Et>1)return null;he.cross(h,t,a);var Dt=-he.dot(u,h)/bt;return Dt<0?null:(b||(b=new mr),L&&mr.set(L,1-Ct-Et,Ct,Et),he.scaleAndAdd(b.array,ut,W,Dt),b)}}(),applyTransform:function(t){mr.add(this.direction,this.direction,this.origin),mr.transformMat4(this.origin,this.origin,t),mr.transformMat4(this.direction,this.direction,t),mr.sub(this.direction,this.direction,this.origin),mr.normalize(this.direction,this.direction)},copy:function(t){mr.copy(this.origin,t.origin),mr.copy(this.direction,t.direction)},clone:function(){var t=new xi;return t.copy(this),t}};const dr=xi;var kr={create:function(){var t=new Nr(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},clone:function(t){var a=new Nr(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},fromValues:function(t,a,u,h){var d=new Nr(4);return d[0]=t,d[1]=a,d[2]=u,d[3]=h,d},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},set:function(t,a,u,h,d){return t[0]=a,t[1]=u,t[2]=h,t[3]=d,t},add:function(t,a,u){return t[0]=a[0]+u[0],t[1]=a[1]+u[1],t[2]=a[2]+u[2],t[3]=a[3]+u[3],t},subtract:function(t,a,u){return t[0]=a[0]-u[0],t[1]=a[1]-u[1],t[2]=a[2]-u[2],t[3]=a[3]-u[3],t}};kr.sub=kr.subtract,kr.multiply=function(t,a,u){return t[0]=a[0]*u[0],t[1]=a[1]*u[1],t[2]=a[2]*u[2],t[3]=a[3]*u[3],t},kr.mul=kr.multiply,kr.divide=function(t,a,u){return t[0]=a[0]/u[0],t[1]=a[1]/u[1],t[2]=a[2]/u[2],t[3]=a[3]/u[3],t},kr.div=kr.divide,kr.min=function(t,a,u){return t[0]=Math.min(a[0],u[0]),t[1]=Math.min(a[1],u[1]),t[2]=Math.min(a[2],u[2]),t[3]=Math.min(a[3],u[3]),t},kr.max=function(t,a,u){return t[0]=Math.max(a[0],u[0]),t[1]=Math.max(a[1],u[1]),t[2]=Math.max(a[2],u[2]),t[3]=Math.max(a[3],u[3]),t},kr.scale=function(t,a,u){return t[0]=a[0]*u,t[1]=a[1]*u,t[2]=a[2]*u,t[3]=a[3]*u,t},kr.scaleAndAdd=function(t,a,u,h){return t[0]=a[0]+u[0]*h,t[1]=a[1]+u[1]*h,t[2]=a[2]+u[2]*h,t[3]=a[3]+u[3]*h,t},kr.distance=function(t,a){var u=a[0]-t[0],h=a[1]-t[1],d=a[2]-t[2],g=a[3]-t[3];return Math.sqrt(u*u+h*h+d*d+g*g)},kr.dist=kr.distance,kr.squaredDistance=function(t,a){var u=a[0]-t[0],h=a[1]-t[1],d=a[2]-t[2],g=a[3]-t[3];return u*u+h*h+d*d+g*g},kr.sqrDist=kr.squaredDistance,kr.length=function(t){var a=t[0],u=t[1],h=t[2],d=t[3];return Math.sqrt(a*a+u*u+h*h+d*d)},kr.len=kr.length,kr.squaredLength=function(t){var a=t[0],u=t[1],h=t[2],d=t[3];return a*a+u*u+h*h+d*d},kr.sqrLen=kr.squaredLength,kr.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},kr.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},kr.normalize=function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=u*u+h*h+d*d+g*g;return y>0&&(y=1/Math.sqrt(y),t[0]=a[0]*y,t[1]=a[1]*y,t[2]=a[2]*y,t[3]=a[3]*y),t},kr.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},kr.lerp=function(t,a,u,h){var d=a[0],g=a[1],y=a[2],S=a[3];return t[0]=d+h*(u[0]-d),t[1]=g+h*(u[1]-g),t[2]=y+h*(u[2]-y),t[3]=S+h*(u[3]-S),t},kr.random=function(t,a){return a=a||1,t[0]=re(),t[1]=re(),t[2]=re(),t[3]=re(),kr.normalize(t,t),kr.scale(t,t,a),t},kr.transformMat4=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3];return t[0]=u[0]*h+u[4]*d+u[8]*g+u[12]*y,t[1]=u[1]*h+u[5]*d+u[9]*g+u[13]*y,t[2]=u[2]*h+u[6]*d+u[10]*g+u[14]*y,t[3]=u[3]*h+u[7]*d+u[11]*g+u[15]*y,t},kr.transformQuat=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=u[0],S=u[1],b=u[2],L=u[3],W=L*h+S*g-b*d,ut=L*d+b*h-y*g,bt=L*g+y*d-S*h,Ct=-y*h-S*d-b*g;return t[0]=W*L+Ct*-y+ut*-b-bt*-S,t[1]=ut*L+Ct*-S+bt*-y-W*-b,t[2]=bt*L+Ct*-b+W*-S-ut*-y,t},kr.forEach=function(){var t=kr.create();return function(a,u,h,d,g,y){var S,b;for(u||(u=4),h||(h=0),b=d?Math.min(d*u+h,a.length):a.length,S=h;S<b;S+=u)t[0]=a[S],t[1]=a[S+1],t[2]=a[S+2],t[3]=a[S+3],g(t,t,y),a[S]=t[0],a[S+1]=t[1],a[S+2]=t[2],a[S+3]=t[3];return a}}();const Mr=kr;var Un={create:function(){var t=new Nr(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat4:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},clone:function(t){var a=new Nr(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,a){if(t===a){var u=a[1],h=a[2],d=a[5];t[1]=a[3],t[2]=a[6],t[3]=u,t[5]=a[7],t[6]=h,t[7]=d}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},invert:function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=a[4],S=a[5],b=a[6],L=a[7],W=a[8],ut=W*y-S*L,bt=-W*g+S*b,Ct=L*g-y*b,Et=u*ut+h*bt+d*Ct;return Et?(t[0]=ut*(Et=1/Et),t[1]=(-W*h+d*L)*Et,t[2]=(S*h-d*y)*Et,t[3]=bt*Et,t[4]=(W*u-d*b)*Et,t[5]=(-S*u+d*g)*Et,t[6]=Ct*Et,t[7]=(-L*u+h*b)*Et,t[8]=(y*u-h*g)*Et,t):null},adjoint:function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=a[4],S=a[5],b=a[6],L=a[7],W=a[8];return t[0]=y*W-S*L,t[1]=d*L-h*W,t[2]=h*S-d*y,t[3]=S*b-g*W,t[4]=u*W-d*b,t[5]=d*g-u*S,t[6]=g*L-y*b,t[7]=h*b-u*L,t[8]=u*y-h*g,t},determinant:function(t){var d=t[3],g=t[4],y=t[5],S=t[6],b=t[7],L=t[8];return t[0]*(L*g-y*b)+t[1]*(-L*d+y*S)+t[2]*(b*d-g*S)},multiply:function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=a[4],b=a[5],L=a[6],W=a[7],ut=a[8],bt=u[0],Ct=u[1],Et=u[2],Dt=u[3],zt=u[4],$t=u[5],ae=u[6],Jt=u[7],qt=u[8];return t[0]=bt*h+Ct*y+Et*L,t[1]=bt*d+Ct*S+Et*W,t[2]=bt*g+Ct*b+Et*ut,t[3]=Dt*h+zt*y+$t*L,t[4]=Dt*d+zt*S+$t*W,t[5]=Dt*g+zt*b+$t*ut,t[6]=ae*h+Jt*y+qt*L,t[7]=ae*d+Jt*S+qt*W,t[8]=ae*g+Jt*b+qt*ut,t}};Un.mul=Un.multiply,Un.translate=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=a[4],b=a[5],L=a[6],W=a[7],ut=a[8],bt=u[0],Ct=u[1];return t[0]=h,t[1]=d,t[2]=g,t[3]=y,t[4]=S,t[5]=b,t[6]=bt*h+Ct*y+L,t[7]=bt*d+Ct*S+W,t[8]=bt*g+Ct*b+ut,t},Un.rotate=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=a[4],b=a[5],L=a[6],W=a[7],ut=a[8],bt=Math.sin(u),Ct=Math.cos(u);return t[0]=Ct*h+bt*y,t[1]=Ct*d+bt*S,t[2]=Ct*g+bt*b,t[3]=Ct*y-bt*h,t[4]=Ct*S-bt*d,t[5]=Ct*b-bt*g,t[6]=L,t[7]=W,t[8]=ut,t},Un.scale=function(t,a,u){var h=u[0],d=u[1];return t[0]=h*a[0],t[1]=h*a[1],t[2]=h*a[2],t[3]=d*a[3],t[4]=d*a[4],t[5]=d*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},Un.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},Un.fromQuat=function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=u+u,S=h+h,b=d+d,L=u*y,W=h*y,ut=h*S,bt=d*y,Ct=d*S,Et=d*b,Dt=g*y,zt=g*S,$t=g*b;return t[0]=1-ut-Et,t[3]=W-$t,t[6]=bt+zt,t[1]=W+$t,t[4]=1-L-Et,t[7]=Ct-Dt,t[2]=bt-zt,t[5]=Ct+Dt,t[8]=1-L-ut,t},Un.normalFromMat4=function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=a[4],S=a[5],b=a[6],L=a[7],W=a[8],ut=a[9],bt=a[10],Ct=a[11],Et=a[12],Dt=a[13],zt=a[14],$t=a[15],ae=u*S-h*y,Jt=u*b-d*y,qt=u*L-g*y,me=h*b-d*S,ge=h*L-g*S,Ge=d*L-g*b,Oe=W*Dt-ut*Et,We=W*zt-bt*Et,ar=W*$t-Ct*Et,Ke=ut*zt-bt*Dt,lr=ut*$t-Ct*Dt,vr=bt*$t-Ct*zt,nr=ae*vr-Jt*lr+qt*Ke+me*ar-ge*We+Ge*Oe;return nr?(t[0]=(S*vr-b*lr+L*Ke)*(nr=1/nr),t[1]=(b*ar-y*vr-L*We)*nr,t[2]=(y*lr-S*ar+L*Oe)*nr,t[3]=(d*lr-h*vr-g*Ke)*nr,t[4]=(u*vr-d*ar+g*We)*nr,t[5]=(h*ar-u*lr-g*Oe)*nr,t[6]=(Dt*Ge-zt*ge+$t*me)*nr,t[7]=(zt*qt-Et*Ge-$t*Jt)*nr,t[8]=(Et*ge-Dt*qt+$t*ae)*nr,t):null},Un.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))};const un=Un;var dn={create:function(){var t=new Nr(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}};dn.rotationTo=function(){var t=he.create(),a=he.fromValues(1,0,0),u=he.fromValues(0,1,0);return function(h,d,g){var y=he.dot(d,g);return y<-.999999?(he.cross(t,a,d),he.length(t)<1e-6&&he.cross(t,u,d),he.normalize(t,t),dn.setAxisAngle(h,t,Math.PI),h):y>.999999?(h[0]=0,h[1]=0,h[2]=0,h[3]=1,h):(he.cross(t,d,g),h[0]=t[0],h[1]=t[1],h[2]=t[2],h[3]=1+y,dn.normalize(h,h))}}(),dn.setAxes=function(){var t=un.create();return function(a,u,h,d){return t[0]=h[0],t[3]=h[1],t[6]=h[2],t[1]=d[0],t[4]=d[1],t[7]=d[2],t[2]=-u[0],t[5]=-u[1],t[8]=-u[2],dn.normalize(a,dn.fromMat3(a,t))}}(),dn.clone=Mr.clone,dn.fromValues=Mr.fromValues,dn.copy=Mr.copy,dn.set=Mr.set,dn.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},dn.setAxisAngle=function(t,a,u){u*=.5;var h=Math.sin(u);return t[0]=h*a[0],t[1]=h*a[1],t[2]=h*a[2],t[3]=Math.cos(u),t},dn.add=Mr.add,dn.multiply=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=u[0],b=u[1],L=u[2],W=u[3];return t[0]=h*W+y*S+d*L-g*b,t[1]=d*W+y*b+g*S-h*L,t[2]=g*W+y*L+h*b-d*S,t[3]=y*W-h*S-d*b-g*L,t},dn.mul=dn.multiply,dn.scale=Mr.scale,dn.rotateX=function(t,a,u){u*=.5;var h=a[0],d=a[1],g=a[2],y=a[3],S=Math.sin(u),b=Math.cos(u);return t[0]=h*b+y*S,t[1]=d*b+g*S,t[2]=g*b-d*S,t[3]=y*b-h*S,t},dn.rotateY=function(t,a,u){u*=.5;var h=a[0],d=a[1],g=a[2],y=a[3],S=Math.sin(u),b=Math.cos(u);return t[0]=h*b-g*S,t[1]=d*b+y*S,t[2]=g*b+h*S,t[3]=y*b-d*S,t},dn.rotateZ=function(t,a,u){u*=.5;var h=a[0],d=a[1],g=a[2],y=a[3],S=Math.sin(u),b=Math.cos(u);return t[0]=h*b+d*S,t[1]=d*b-h*S,t[2]=g*b+y*S,t[3]=y*b-g*S,t},dn.calculateW=function(t,a){var u=a[0],h=a[1],d=a[2];return t[0]=u,t[1]=h,t[2]=d,t[3]=Math.sqrt(Math.abs(1-u*u-h*h-d*d)),t},dn.dot=Mr.dot,dn.lerp=Mr.lerp,dn.slerp=function(t,a,u,h){var bt,Ct,Et,Dt,zt,d=a[0],g=a[1],y=a[2],S=a[3],b=u[0],L=u[1],W=u[2],ut=u[3];return(Ct=d*b+g*L+y*W+S*ut)<0&&(Ct=-Ct,b=-b,L=-L,W=-W,ut=-ut),1-Ct>1e-6?(bt=Math.acos(Ct),Et=Math.sin(bt),Dt=Math.sin((1-h)*bt)/Et,zt=Math.sin(h*bt)/Et):(Dt=1-h,zt=h),t[0]=Dt*d+zt*b,t[1]=Dt*g+zt*L,t[2]=Dt*y+zt*W,t[3]=Dt*S+zt*ut,t},dn.invert=function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=u*u+h*h+d*d+g*g,S=y?1/y:0;return t[0]=-u*S,t[1]=-h*S,t[2]=-d*S,t[3]=g*S,t},dn.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},dn.length=Mr.length,dn.len=dn.length,dn.squaredLength=Mr.squaredLength,dn.sqrLen=dn.squaredLength,dn.normalize=Mr.normalize,dn.fromMat3=function(t,a){var h,u=a[0]+a[4]+a[8];if(u>0)h=Math.sqrt(u+1),t[3]=.5*h,t[0]=(a[5]-a[7])*(h=.5/h),t[1]=(a[6]-a[2])*h,t[2]=(a[1]-a[3])*h;else{var d=0;a[4]>a[0]&&(d=1),a[8]>a[3*d+d]&&(d=2);var g=(d+1)%3,y=(d+2)%3;h=Math.sqrt(a[3*d+d]-a[3*g+g]-a[3*y+y]+1),t[d]=.5*h,t[3]=(a[3*g+y]-a[3*y+g])*(h=.5/h),t[g]=(a[3*g+d]+a[3*d+g])*h,t[y]=(a[3*y+d]+a[3*d+y])*h}return t};const tn=dn;var Hn=function(){this._axisX=new mr,this._axisY=new mr,this._axisZ=new mr,this.array=gr.create(),this._dirty=!0};Hn.prototype={constructor:Hn,setArray:function(t){for(var a=0;a<this.array.length;a++)this.array[a]=t[a];return this._dirty=!0,this},adjoint:function(){return gr.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new Hn).copy(this)},copy:function(t){return gr.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return gr.determinant(this.array)},fromQuat:function(t){return gr.fromQuat(this.array,t.array),this._dirty=!0,this},fromRotationTranslation:function(t,a){return gr.fromRotationTranslation(this.array,t.array,a.array),this._dirty=!0,this},fromMat2d:function(t){return Hn.fromMat2d(this,t),this},frustum:function(t,a,u,h,d,g){return gr.frustum(this.array,t,a,u,h,d,g),this._dirty=!0,this},identity:function(){return gr.identity(this.array),this._dirty=!0,this},invert:function(){return gr.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(t,a,u){return gr.lookAt(this.array,t.array,a.array,u.array),this._dirty=!0,this},mul:function(t){return gr.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return gr.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return gr.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return gr.multiply(this.array,t.array,this.array),this._dirty=!0,this},ortho:function(t,a,u,h,d,g){return gr.ortho(this.array,t,a,u,h,d,g),this._dirty=!0,this},perspective:function(t,a,u,h){return gr.perspective(this.array,t,a,u,h),this._dirty=!0,this},rotate:function(t,a){return gr.rotate(this.array,this.array,t,a.array),this._dirty=!0,this},rotateX:function(t){return gr.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return gr.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return gr.rotateZ(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return gr.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return gr.translate(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return gr.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var t=he.create(),a=he.create(),u=he.create(),h=un.create();return function(d,g,y){var S=this.array;he.set(t,S[0],S[1],S[2]),he.set(a,S[4],S[5],S[6]),he.set(u,S[8],S[9],S[10]);var b=he.length(t),L=he.length(a),W=he.length(u);this.determinant()<0&&(b=-b),d&&d.set(b,L,W),y.set(S[12],S[13],S[14]),un.fromMat4(h,S),h[0]/=b,h[1]/=b,h[2]/=b,h[3]/=L,h[4]/=L,h[5]/=L,h[6]/=W,h[7]/=W,h[8]/=W,tn.fromMat3(g.array,h),tn.normalize(g.array,g.array),g._dirty=!0,y._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Ps=Object.defineProperty;if(Ps){var bo=Hn.prototype;Ps(bo,"z",{get:function(){var t=this.array;return this._axisZ.set(t[8],t[9],t[10]),this._axisZ},set:function(t){var a=this.array;a[8]=(t=t.array)[0],a[9]=t[1],a[10]=t[2],this._dirty=!0}}),Ps(bo,"y",{get:function(){var t=this.array;return this._axisY.set(t[4],t[5],t[6]),this._axisY},set:function(t){var a=this.array;a[4]=(t=t.array)[0],a[5]=t[1],a[6]=t[2],this._dirty=!0}}),Ps(bo,"x",{get:function(){var t=this.array;return this._axisX.set(t[0],t[1],t[2]),this._axisX},set:function(t){var a=this.array;a[0]=(t=t.array)[0],a[1]=t[1],a[2]=t[2],this._dirty=!0}})}Hn.adjoint=function(t,a){return gr.adjoint(t.array,a.array),t._dirty=!0,t},Hn.copy=function(t,a){return gr.copy(t.array,a.array),t._dirty=!0,t},Hn.determinant=function(t){return gr.determinant(t.array)},Hn.identity=function(t){return gr.identity(t.array),t._dirty=!0,t},Hn.ortho=function(t,a,u,h,d,g,y){return gr.ortho(t.array,a,u,h,d,g,y),t._dirty=!0,t},Hn.perspective=function(t,a,u,h,d){return gr.perspective(t.array,a,u,h,d),t._dirty=!0,t},Hn.lookAt=function(t,a,u,h){return gr.lookAt(t.array,a.array,u.array,h.array),t._dirty=!0,t},Hn.invert=function(t,a){return gr.invert(t.array,a.array),t._dirty=!0,t},Hn.multiply=Hn.mul=function(t,a,u){return gr.mul(t.array,a.array,u.array),t._dirty=!0,t},Hn.fromQuat=function(t,a){return gr.fromQuat(t.array,a.array),t._dirty=!0,t},Hn.fromRotationTranslation=function(t,a,u){return gr.fromRotationTranslation(t.array,a.array,u.array),t._dirty=!0,t},Hn.fromMat2d=function(h,u){return h._dirty=!0,(h=h.array)[0]=(u=u.array)[0],h[4]=u[2],h[12]=u[4],h[1]=u[1],h[5]=u[3],h[13]=u[5],h},Hn.rotate=function(t,a,u,h){return gr.rotate(t.array,a.array,u,h.array),t._dirty=!0,t},Hn.rotateX=function(t,a,u){return gr.rotateX(t.array,a.array,u),t._dirty=!0,t},Hn.rotateY=function(t,a,u){return gr.rotateY(t.array,a.array,u),t._dirty=!0,t},Hn.rotateZ=function(t,a,u){return gr.rotateZ(t.array,a.array,u),t._dirty=!0,t},Hn.scale=function(t,a,u){return gr.scale(t.array,a.array,u.array),t._dirty=!0,t},Hn.transpose=function(t,a){return gr.transpose(t.array,a.array),t._dirty=!0,t},Hn.translate=function(t,a,u){return gr.translate(t.array,a.array,u.array),t._dirty=!0,t};const _r=Hn;var Br=function(t,a,u,h){this.array=tn.fromValues(t=t||0,a=a||0,u=u||0,h=void 0===h?1:h),this._dirty=!0};Br.prototype={constructor:Br,add:function(t){return tn.add(this.array,this.array,t.array),this._dirty=!0,this},calculateW:function(){return tn.calculateW(this.array,this.array),this._dirty=!0,this},set:function(t,a,u,h){return this.array[0]=t,this.array[1]=a,this.array[2]=u,this.array[3]=h,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new Br(this.x,this.y,this.z,this.w)},conjugate:function(){return tn.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(t){return tn.copy(this.array,t.array),this._dirty=!0,this},dot:function(t){return tn.dot(this.array,t.array)},fromMat3:function(t){return tn.fromMat3(this.array,t.array),this._dirty=!0,this},fromMat4:function(){var t=un.create();return function(a){return un.fromMat4(t,a.array),un.transpose(t,t),tn.fromMat3(this.array,t),this._dirty=!0,this}}(),identity:function(){return tn.identity(this.array),this._dirty=!0,this},invert:function(){return tn.invert(this.array,this.array),this._dirty=!0,this},len:function(){return tn.len(this.array)},length:function(){return tn.length(this.array)},lerp:function(t,a,u){return tn.lerp(this.array,t.array,a.array,u),this._dirty=!0,this},mul:function(t){return tn.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return tn.multiply(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return tn.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return tn.multiply(this.array,t.array,this.array),this._dirty=!0,this},normalize:function(){return tn.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(t){return tn.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return tn.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return tn.rotateZ(this.array,this.array,t),this._dirty=!0,this},rotationTo:function(t,a){return tn.rotationTo(this.array,t.array,a.array),this._dirty=!0,this},setAxes:function(t,a,u){return tn.setAxes(this.array,t.array,a.array,u.array),this._dirty=!0,this},setAxisAngle:function(t,a){return tn.setAxisAngle(this.array,t.array,a),this._dirty=!0,this},slerp:function(t,a,u){return tn.slerp(this.array,t.array,a.array,u),this._dirty=!0,this},sqrLen:function(){return tn.sqrLen(this.array)},squaredLength:function(){return tn.squaredLength(this.array)},fromEuler:function(t,a){return Br.fromEuler(this,t,a)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var bi=Object.defineProperty;if(bi){var Be=Br.prototype;bi(Be,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),bi(Be,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),bi(Be,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),bi(Be,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}Br.add=function(t,a,u){return tn.add(t.array,a.array,u.array),t._dirty=!0,t},Br.set=function(t,a,u,h,d){tn.set(t.array,a,u,h,d),t._dirty=!0},Br.copy=function(t,a){return tn.copy(t.array,a.array),t._dirty=!0,t},Br.calculateW=function(t,a){return tn.calculateW(t.array,a.array),t._dirty=!0,t},Br.conjugate=function(t,a){return tn.conjugate(t.array,a.array),t._dirty=!0,t},Br.identity=function(t){return tn.identity(t.array),t._dirty=!0,t},Br.invert=function(t,a){return tn.invert(t.array,a.array),t._dirty=!0,t},Br.dot=function(t,a){return tn.dot(t.array,a.array)},Br.len=function(t){return tn.length(t.array)},Br.lerp=function(t,a,u,h){return tn.lerp(t.array,a.array,u.array,h),t._dirty=!0,t},Br.slerp=function(t,a,u,h){return tn.slerp(t.array,a.array,u.array,h),t._dirty=!0,t},Br.multiply=Br.mul=function(t,a,u){return tn.multiply(t.array,a.array,u.array),t._dirty=!0,t},Br.rotateX=function(t,a,u){return tn.rotateX(t.array,a.array,u),t._dirty=!0,t},Br.rotateY=function(t,a,u){return tn.rotateY(t.array,a.array,u),t._dirty=!0,t},Br.rotateZ=function(t,a,u){return tn.rotateZ(t.array,a.array,u),t._dirty=!0,t},Br.setAxisAngle=function(t,a,u){return tn.setAxisAngle(t.array,a.array,u),t._dirty=!0,t},Br.normalize=function(t,a){return tn.normalize(t.array,a.array),t._dirty=!0,t},Br.squaredLength=Br.sqrLen=function(t){return tn.sqrLen(t.array)},Br.fromMat3=function(t,a){return tn.fromMat3(t.array,a.array),t._dirty=!0,t},Br.setAxes=function(t,a,u,h){return tn.setAxes(t.array,a.array,u.array,h.array),t._dirty=!0,t},Br.rotationTo=function(t,a,u){return tn.rotationTo(t.array,a.array,u.array),t._dirty=!0,t},Br.fromEuler=function(t,a,W){t._dirty=!0,a=a.array;var h=t.array,d=Math.cos(a[0]/2),g=Math.cos(a[1]/2),y=Math.cos(a[2]/2),S=Math.sin(a[0]/2),b=Math.sin(a[1]/2),L=Math.sin(a[2]/2);switch(W=(W||"XYZ").toUpperCase()){case"XYZ":h[0]=S*g*y+d*b*L,h[1]=d*b*y-S*g*L,h[2]=d*g*L+S*b*y,h[3]=d*g*y-S*b*L;break;case"YXZ":h[0]=S*g*y+d*b*L,h[1]=d*b*y-S*g*L,h[2]=d*g*L-S*b*y,h[3]=d*g*y+S*b*L;break;case"ZXY":h[0]=S*g*y-d*b*L,h[1]=d*b*y+S*g*L,h[2]=d*g*L+S*b*y,h[3]=d*g*y-S*b*L;break;case"ZYX":h[0]=S*g*y-d*b*L,h[1]=d*b*y+S*g*L,h[2]=d*g*L-S*b*y,h[3]=d*g*y+S*b*L;break;case"YZX":h[0]=S*g*y+d*b*L,h[1]=d*b*y+S*g*L,h[2]=d*g*L-S*b*y,h[3]=d*g*y-S*b*L;break;case"XZY":h[0]=S*g*y-d*b*L,h[1]=d*b*y-S*g*L,h[2]=d*g*L+S*b*y,h[3]=d*g*y+S*b*L}};const nl=Br;var da=he.set,mo=he.copy,Oa=function(t,a){this.min=t||new mr(1/0,1/0,1/0),this.max=a||new mr(-1/0,-1/0,-1/0),this.vertices=null};Oa.prototype={constructor:Oa,updateFromVertices:function(t){if(t.length>0){var a=this.min,u=this.max,h=a.array,d=u.array;mo(h,t[0]),mo(d,t[0]);for(var g=1;g<t.length;g++){var y=t[g];y[0]<h[0]&&(h[0]=y[0]),y[1]<h[1]&&(h[1]=y[1]),y[2]<h[2]&&(h[2]=y[2]),y[0]>d[0]&&(d[0]=y[0]),y[1]>d[1]&&(d[1]=y[1]),y[2]>d[2]&&(d[2]=y[2])}a._dirty=!0,u._dirty=!0}},union:function(t){var a=this.min,u=this.max;return he.min(a.array,a.array,t.min.array),he.max(u.array,u.array,t.max.array),a._dirty=!0,u._dirty=!0,this},intersection:function(t){var a=this.min,u=this.max;return he.max(a.array,a.array,t.min.array),he.min(u.array,u.array,t.max.array),a._dirty=!0,u._dirty=!0,this},intersectBoundingBox:function(t){var a=this.min.array,u=this.max.array,h=t.min.array,d=t.max.array;return!(a[0]>d[0]||a[1]>d[1]||a[2]>d[2]||u[0]<h[0]||u[1]<h[1]||u[2]<h[2])},containBoundingBox:function(t){var a=this.min.array,u=this.max.array,h=t.min.array,d=t.max.array;return a[0]<=h[0]&&a[1]<=h[1]&&a[2]<=h[2]&&u[0]>=d[0]&&u[1]>=d[1]&&u[2]>=d[2]},containPoint:function(t){var a=this.min.array,u=this.max.array,h=t.array;return a[0]<=h[0]&&a[1]<=h[1]&&a[2]<=h[2]&&u[0]>=h[0]&&u[1]>=h[1]&&u[2]>=h[2]},isFinite:function(){var t=this.min.array,a=this.max.array;return isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(a[2])},applyTransform:function(t){this.transformFrom(this,t)},transformFrom:function(){var t=he.create(),a=he.create(),u=he.create(),h=he.create(),d=he.create(),g=he.create();return function(y,S){var b=y.min.array,L=y.max.array,W=S.array;return t[0]=W[0]*b[0],t[1]=W[1]*b[0],t[2]=W[2]*b[0],a[0]=W[0]*L[0],a[1]=W[1]*L[0],a[2]=W[2]*L[0],u[0]=W[4]*b[1],u[1]=W[5]*b[1],u[2]=W[6]*b[1],h[0]=W[4]*L[1],h[1]=W[5]*L[1],h[2]=W[6]*L[1],d[0]=W[8]*b[2],d[1]=W[9]*b[2],d[2]=W[10]*b[2],g[0]=W[8]*L[2],g[1]=W[9]*L[2],g[2]=W[10]*L[2],L=this.max.array,(b=this.min.array)[0]=Math.min(t[0],a[0])+Math.min(u[0],h[0])+Math.min(d[0],g[0])+W[12],b[1]=Math.min(t[1],a[1])+Math.min(u[1],h[1])+Math.min(d[1],g[1])+W[13],b[2]=Math.min(t[2],a[2])+Math.min(u[2],h[2])+Math.min(d[2],g[2])+W[14],L[0]=Math.max(t[0],a[0])+Math.max(u[0],h[0])+Math.max(d[0],g[0])+W[12],L[1]=Math.max(t[1],a[1])+Math.max(u[1],h[1])+Math.max(d[1],g[1])+W[13],L[2]=Math.max(t[2],a[2])+Math.max(u[2],h[2])+Math.max(d[2],g[2])+W[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(t){var a=this.min.array,u=this.max.array,h=t.array,d=a[0],g=a[1],y=a[2],S=u[0],b=u[1],L=a[2],W=u[0],ut=u[1],bt=u[2];if(1===h[15])a[0]=h[0]*d+h[12],a[1]=h[5]*g+h[13],u[2]=h[10]*y+h[14],u[0]=h[0]*W+h[12],u[1]=h[5]*ut+h[13],a[2]=h[10]*bt+h[14];else{var Ct=-1/y;a[0]=h[0]*d*Ct,a[1]=h[5]*g*Ct,u[2]=(h[10]*y+h[14])*Ct,u[0]=h[0]*S*(Ct=-1/L),u[1]=h[5]*b*Ct,a[2]=(h[10]*bt+h[14])*(Ct=-1/bt)}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var t=this.vertices;if(!t){t=[];for(var a=0;a<8;a++)t[a]=he.fromValues(0,0,0);this.vertices=t}var u=this.min.array,h=this.max.array;return da(t[0],u[0],u[1],u[2]),da(t[1],u[0],h[1],u[2]),da(t[2],h[0],u[1],u[2]),da(t[3],h[0],h[1],u[2]),da(t[4],u[0],u[1],h[2]),da(t[5],u[0],h[1],h[2]),da(t[6],h[0],u[1],h[2]),da(t[7],h[0],h[1],h[2]),this},copy:function(t){var a=this.min,u=this.max;return mo(a.array,t.min.array),mo(u.array,t.max.array),a._dirty=!0,u._dirty=!0,this},clone:function(){var t=new Oa;return t.copy(this),t}};const Mn=Oa;var oi=0,Ko=I.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+oi++),this.position||(this.position=new mr),this.rotation||(this.rotation=new nl),this.scale||(this.scale=new mr(1,1,1)),this.worldTransform=new _r,this.localTransform=new _r,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(t){var a=this._scene;if(a){var u=a._nodeRepository;delete u[this.name],u[t]=this}this.name=t},add:function(t){var a=t._parent;if(a!==this){a&&a.remove(t),t._parent=this,this._children.push(t);var u=this._scene;u&&u!==t.scene&&t.traverse(this._addSelfToScene,this),t._needsUpdateWorldTransform=!0}},remove:function(t){var a=this._children,u=a.indexOf(t);u<0||(a.splice(u,1),t._parent=null,this._scene&&t.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var t=this._children,a=0;a<t.length;a++)t[a]._parent=null,this._scene&&t[a].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(t){t._scene.removeFromScene(t),t._scene=null},_addSelfToScene:function(t){this._scene.addToScene(t),t._scene=this._scene},isAncestor:function(t){for(var a=t._parent;a;){if(a===this)return!0;a=a._parent}return!1},children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},getChildByName:function(t){for(var a=this._children,u=0;u<a.length;u++)if(a[u].name===t)return a[u]},getDescendantByName:function(t){for(var a=this._children,u=0;u<a.length;u++){var h=a[u];if(h.name===t)return h;var d=h.getDescendantByName(t);if(d)return d}},queryNode:function(t){if(t){for(var a=t.split("/"),u=this,h=0;h<a.length;h++){var d=a[h];if(d){for(var g=!1,y=u._children,S=0;S<y.length;S++){var b=y[S];if(b.name===d){u=b,g=!0;break}}if(!g)return}}return u}},getPath:function(t){if(!this._parent)return"/";for(var a=this._parent,u=this.name;a._parent&&(u=a.name+"/"+u,a._parent!=t);)a=a._parent;return!a._parent&&t?null:u},traverse:function(t,a){t.call(a,this);for(var u=this._children,h=0,d=u.length;h<d;h++)u[h].traverse(t,a)},eachChild:function(t,a){for(var u=this._children,h=0,d=u.length;h<d;h++)t.call(a,u[h],h)},setLocalTransform:function(t){gr.copy(this.localTransform.array,t.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(t){this.localTransform.decomposeMatrix(t?null:this.scale,this.rotation,this.position)},setWorldTransform:function(t){gr.copy(this.worldTransform.array,t.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var t=gr.create();return function(a){var u=this.localTransform,h=this.worldTransform;this._parent?(gr.invert(t,this._parent.worldTransform.array),gr.multiply(u.array,t,h.array)):gr.copy(u.array,h.array),u.decomposeMatrix(a?null:this.scale,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var t=this.position,a=this.rotation,u=this.scale;if(this.transformNeedsUpdate()){var h=this.localTransform.array;gr.fromRotationTranslation(h,a.array,t.array),gr.scale(h,h,u.array),a._dirty=!1,u._dirty=!1,t._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var t=this.localTransform.array,a=this.worldTransform.array;this._parent?gr.multiplyAffine(a,this._parent.worldTransform.array,t):gr.copy(a,t)},updateWorldTransform:function(){for(var t=this;t&&t.getParent()&&t.getParent().transformNeedsUpdate();)t=t.getParent();t.update()},update:function(t){this.autoUpdateLocalTransform?this.updateLocalTransform():t=!0,(t||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),t=!0,this._needsUpdateWorldTransform=!1);for(var a=this._children,u=0,h=a.length;u<h;u++)a[u].update(t)},getBoundingBox:function(){function t(d){return!d.invisible&&d.geometry}var a=new Mn,u=new _r,h=new _r;return function(d,g){return g=g||new Mn,d=d||t,this._parent?_r.invert(h,this._parent.worldTransform):_r.identity(h),this.traverse(function(y){y.geometry&&y.geometry.boundingBox&&(a.copy(y.geometry.boundingBox),_r.multiply(u,h,y.worldTransform),a.applyTransform(u),g.union(a))},this,t),g}}(),getWorldPosition:function(t){this.transformNeedsUpdate()&&this.updateWorldTransform();var a=this.worldTransform.array;if(t){var u=t.array;return u[0]=a[12],u[1]=a[13],u[2]=a[14],t}return new mr(a[12],a[13],a[14])},clone:function(){var t=new this.constructor,a=this._children;t.setName(this.name),t.position.copy(this.position),t.rotation.copy(this.rotation),t.scale.copy(this.scale);for(var u=0;u<a.length;u++)t.add(a[u].clone());return t},rotateAround:function(){var t=new mr,a=new _r;return function(u,h,d){t.copy(this.position).subtract(u);var g=this.localTransform;g.identity(),g.translate(u),g.rotate(d,h),a.fromRotationTranslation(this.rotation,t),g.multiply(a),g.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var t=new _r;return function(a,u){t.lookAt(this.position,a,u||this.localTransform.y).invert(),this.setLocalTransform(t),this.target=a}}()});const Ln=Ko;var Fn=Ln.extend({material:null,geometry:null,mode:4,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:1029,frontFace:2305,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(t){},afterRender:function(t,a){},getBoundingBox:function(t,a){return a=Ln.prototype.getBoundingBox.call(this,t,a),this.geometry&&this.geometry.boundingBox&&a.union(this.geometry.boundingBox),a},clone:function(){var t=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var a=Ln.prototype.clone.call(this);a.geometry=this.geometry,a.material=this.material;for(var u=0;u<t.length;u++){var h=t[u];a[h]!==this[h]&&(a[h]=this[h])}return a}}()});Fn.POINTS=0,Fn.LINES=1,Fn.LINE_LOOP=2,Fn.LINE_STRIP=3,Fn.TRIANGLES=4,Fn.TRIANGLE_STRIP=5,Fn.TRIANGLE_FAN=6,Fn.BACK=1029,Fn.FRONT=1028,Fn.FRONT_AND_BACK=1032,Fn.CW=2304,Fn.CCW=2305;const Po=Fn;var As=I.extend({scene:null,camera:null,renderer:null},function(){this._ray=new dr,this._ndc=new ne},{pick:function(t,a,u){return this.pickAll(t,a,[],u)[0]||null},pickAll:function(t,a,u,h){return this.renderer.screenToNDC(t,a,this._ndc),this.camera.castRay(this._ndc,this._ray),this._intersectNode(this.scene,u=u||[],h||!1),u.sort(this._intersectionCompareFunc),u},_intersectNode:function(t,a,u){t instanceof Po&&t.isRenderable()&&(!t.ignorePicking||u)&&(4===t.mode&&t.geometry.isUseIndices()||t.geometry.pickByRay||t.geometry.pick)&&this._intersectRenderable(t,a);for(var h=0;h<t._children.length;h++)this._intersectNode(t._children[h],a,u)},_intersectRenderable:function(){var t=new mr,a=new mr,u=new mr,h=new dr,d=new _r;return function(g,y){var S=g.isSkinnedMesh();h.copy(this._ray),_r.invert(d,g.worldTransform),S||h.applyTransform(d);var b=g.geometry,L=S?g.skeleton.boundingBox:b.boundingBox;if(!L||h.intersectBoundingBox(L)){if(b.pick)return void b.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,g,y);if(b.pickByRay)return void b.pickByRay(h,g,y);var ut,zt,W=1029===g.cullFace&&2305===g.frontFace||1028===g.cullFace&&2304===g.frontFace,bt=b.indices,Ct=b.attributes.position,Et=b.attributes.weight,Dt=b.attributes.joint,$t=[];if(Ct&&Ct.value&&bt){if(S){zt=g.skeleton.getSubSkinMatrices(g.__uid__,g.joints);for(var ae=0;ae<g.joints.length;ae++){$t[ae]=$t[ae]||[];for(var Jt=0;Jt<16;Jt++)$t[ae][Jt]=zt[16*ae+Jt]}var qt=[],me=[],ge=[],Ge=[],Oe=[],We=b.attributes.skinnedPosition;for((!We||!We.value)&&(b.createAttribute("skinnedPosition","f",3),(We=b.attributes.skinnedPosition).init(b.vertexCount)),ae=0;ae<b.vertexCount;ae++){for(Ct.get(ae,qt),Et.get(ae,me),Dt.get(ae,ge),me[3]=1-me[0]-me[1]-me[2],he.set(Ge,0,0,0),Jt=0;Jt<4;Jt++)ge[Jt]>=0&&me[Jt]>1e-4&&(he.transformMat4(Oe,qt,$t[ge[Jt]]),he.scaleAndAdd(Ge,Ge,Oe,me[Jt]));We.set(ae,Ge)}}for(ae=0;ae<bt.length;ae+=3){var ar=bt[ae],Ke=bt[ae+1],lr=bt[ae+2],vr=S?b.attributes.skinnedPosition:Ct;if(vr.get(ar,t.array),vr.get(Ke,a.array),vr.get(lr,u.array),ut=W?h.intersectTriangle(t,a,u,g.culling):h.intersectTriangle(t,u,a,g.culling)){var nr=new mr;S?mr.copy(nr,ut):mr.transformMat4(nr,ut,g.worldTransform),y.push(new As.Intersection(ut,nr,g,[ar,Ke,lr],ae/3,mr.dist(nr,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(t,a){return t.distance-a.distance}});As.Intersection=function(t,a,u,h,d,g){this.point=t,this.pointWorld=a,this.target=u,this.triangle=h,this.triangleIndex=d,this.distance=g};const Ea=As;var Ao="__dt__",jo=function(){this._contextId=0,this._caches=[],this._context={}};(jo.prototype={use:function(t,a){var u=this._caches;u[t]||(u[t]={},a&&(u[t]=a())),this._contextId=t,this._context=u[t]},put:function(t,a){this._context[t]=a},get:function(t){return this._context[t]},dirty:function(t){this.put(Ao+(t=t||""),!0)},dirtyAll:function(t){for(var a=Ao+(t=t||""),u=this._caches,h=0;h<u.length;h++)u[h]&&(u[h][a]=!0)},fresh:function(t){this.put(Ao+(t=t||""),!1)},freshAll:function(t){for(var a=Ao+(t=t||""),u=this._caches,h=0;h<u.length;h++)u[h]&&(u[h][a]=!1)},isDirty:function(t){var a=Ao+(t=t||""),u=this._context;return!u.hasOwnProperty(a)||!0===u[a]},deleteContext:function(t){delete this._caches[t],this._context={}},delete:function(t){delete this._context[t]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(t,a){Object.keys(this._caches).forEach(function(h){t&&t.call(a,h)})},miss:function(t){return!this._context.hasOwnProperty(t)}}).constructor=jo;const il=jo;var vn=I.extend({width:512,height:512,type:5121,format:6408,wrapS:10497,wrapT:10497,minFilter:9987,magFilter:9729,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new il},{getWebGLTexture:function(t){var a=t.gl,u=this._cache;return u.use(t.__uid__),u.miss("webgl_texture")&&u.put("webgl_texture",a.createTexture()),this.dynamic?this.update(t):u.isDirty()&&(this.update(t),u.fresh()),u.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(t){},updateCommon:function(t){var a=t.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,this.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,this.unpackAlignment),6402===this.format&&(this.useMipmap=!1);var u=t.getGLExtension("EXT_sRGB");this.format===vn.SRGB&&!u&&(this.format=vn.RGB),this.format===vn.SRGB_ALPHA&&!u&&(this.format=vn.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?33071:this.wrapS},getAvailableWrapT:function(){return this.NPOT?33071:this.wrapT},getAvailableMinFilter:function(){var t=this.minFilter;return this.NPOT||!this.useMipmap?9984===t||9986===t?9728:9987===t||9985===t?9729:t:t},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(t){--t;for(var a=1;a<32;a<<=1)t|=t>>a;return t+1},dispose:function(t){var a=this._cache;a.use(t.__uid__);var u=a.get("webgl_texture");u&&t.gl.deleteTexture(u),a.deleteContext(t.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(vn.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(vn.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),vn.BYTE=5120,vn.UNSIGNED_BYTE=5121,vn.SHORT=5122,vn.UNSIGNED_SHORT=5123,vn.INT=5124,vn.UNSIGNED_INT=5125,vn.FLOAT=5126,vn.HALF_FLOAT=36193,vn.UNSIGNED_INT_24_8_WEBGL=34042,vn.DEPTH_COMPONENT=6402,vn.DEPTH_STENCIL=34041,vn.ALPHA=6406,vn.RGB=6407,vn.RGBA=6408,vn.LUMINANCE=6409,vn.LUMINANCE_ALPHA=6410,vn.SRGB=35904,vn.SRGB_ALPHA=35906,vn.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,vn.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,vn.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,vn.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,vn.NEAREST=9728,vn.LINEAR=9729,vn.NEAREST_MIPMAP_NEAREST=9984,vn.LINEAR_MIPMAP_NEAREST=9985,vn.NEAREST_MIPMAP_LINEAR=9986,vn.LINEAR_MIPMAP_LINEAR=9987,vn.REPEAT=10497,vn.CLAMP_TO_EDGE=33071,vn.MIRRORED_REPEAT=33648;const zr=vn;var zi=Po.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var t=Po.prototype.clone.call(this);return t.skeleton=this.skeleton,this.joints&&(t.joints=this.joints.slice()),t}});zi.POINTS=0,zi.LINES=1,zi.LINE_LOOP=2,zi.LINE_STRIP=3,zi.TRIANGLES=4,zi.TRIANGLE_STRIP=5,zi.TRIANGLE_FAN=6,zi.BACK=1029,zi.FRONT=1028,zi.FRONT_AND_BACK=1032,zi.CW=2304,zi.CCW=2305;const Ua=zi;var Jo={isPowerOfTwo:function(t){return 0==(t&t-1)},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}};const io=Jo;var Oo=io.isPowerOfTwo;function Qo(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}var qo=zr.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(t){var a=t.gl;a.bindTexture(a.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(t);var u=this.format,h=this.type,d=!(!this.convertToPOT||this.mipmaps.length||!this.image||this.wrapS!==zr.REPEAT&&this.wrapT!==zr.REPEAT||!this.NPOT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,d?this.wrapS:this.getAvailableWrapS()),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,d?this.wrapT:this.getAvailableWrapT()),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,d?this.magFilter:this.getAvailableMagFilter()),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d?this.minFilter:this.getAvailableMinFilter());var g=t.getGLExtension("EXT_texture_filter_anisotropic");if(g&&this.anisotropic>1&&a.texParameterf(a.TEXTURE_2D,g.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===h&&(t.getGLExtension("OES_texture_half_float")||(h=5126)),this.mipmaps.length)for(var S=this.width,b=this.height,L=0;L<this.mipmaps.length;L++)this._updateTextureData(a,this.mipmaps[L],L,S,b,u,h,!1),S/=2,b/=2;else this._updateTextureData(a,this,0,this.width,this.height,u,h,d),this.useMipmap&&(!this.NPOT||d)&&a.generateMipmap(a.TEXTURE_2D);a.bindTexture(a.TEXTURE_2D,null)},_updateTextureData:function(t,a,u,h,d,g,y,S){if(a.image){var b=a.image;S&&(this._potCanvas=function ao(t,a){var u=Qo(t.width),h=Qo(t.height);return(a=a||document.createElement("canvas")).width=u,a.height=h,a.getContext("2d").drawImage(t.image,0,0,u,h),a}(this,this._potCanvas),b=this._potCanvas),t.texImage2D(t.TEXTURE_2D,u,g,g,y,b)}else g<=zr.COMPRESSED_RGBA_S3TC_DXT5_EXT&&g>=zr.COMPRESSED_RGB_S3TC_DXT1_EXT?t.compressedTexImage2D(t.TEXTURE_2D,u,g,h,d,0,a.pixels):t.texImage2D(t.TEXTURE_2D,u,g,h,d,0,g,y,a.pixels)},generateMipmap:function(t){var a=t.gl;this.useMipmap&&!this.NPOT&&(a.bindTexture(a.TEXTURE_2D,this._cache.get("webgl_texture")),a.generateMipmap(a.TEXTURE_2D))},isPowerOfTwo:function(){return Oo(this.width)&&Oo(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!(!this.width||!this.height)},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,null)},load:function(t,a){var u=vt.createImage();a&&(u.crossOrigin=a);var h=this;return u.onload=function(){h.dirty(),h.trigger("success",h)},u.onerror=function(){h.trigger("error",h)},u.src=t,this.image=u,this}});Object.defineProperty(qo.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(t){this.image?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(qo.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(t){this.image?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});const an=qo;function oo(t){return{byte:vt.Int8Array,ubyte:vt.Uint8Array,short:vt.Int16Array,ushort:vt.Uint16Array}[t]||vt.Float32Array}function so(t){return"attr_"+t}function wa(t,a,u,h){switch(this.name=t,this.type=a,this.size=u,this.semantic=h||"",this.value=null,u){case 1:this.get=function(d){return this.value[d]},this.set=function(d,g){this.value[d]=g},this.copy=function(d,g){this.value[d]=this.value[d]};break;case 2:this.get=function(d,g){var y=this.value;return g[0]=y[2*d],g[1]=y[2*d+1],g},this.set=function(d,g){var y=this.value;y[2*d]=g[0],y[2*d+1]=g[1]},this.copy=function(d,g){var y=this.value;y[d*=2]=y[g*=2],y[d+1]=y[g+1]};break;case 3:this.get=function(d,g){var y=3*d,S=this.value;return g[0]=S[y],g[1]=S[y+1],g[2]=S[y+2],g},this.set=function(d,g){var y=3*d,S=this.value;S[y]=g[0],S[y+1]=g[1],S[y+2]=g[2]},this.copy=function(d,g){var y=this.value;y[d*=3]=y[g*=3],y[d+1]=y[g+1],y[d+2]=y[g+2]};break;case 4:this.get=function(d,g){var y=this.value,S=4*d;return g[0]=y[S],g[1]=y[S+1],g[2]=y[S+2],g[3]=y[S+3],g},this.set=function(d,g){var y=this.value,S=4*d;y[S]=g[0],y[S+1]=g[1],y[S+2]=g[2],y[S+3]=g[3]},this.copy=function(d,g){var y=this.value;y[d*=4]=y[g*=4],y[d+1]=y[g+1],y[d+2]=y[g+2],y[d+3]=y[g+3]}}}function Os(t,a,u,h,d){this.name=t,this.type=a,this.buffer=u,this.size=h,this.semantic=d,this.symbol="",this.needsRemove=!1}function al(t){this.buffer=t,this.count=0}wa.prototype.init=function(t){if(!this.value||this.value.length!==t*this.size){var a=oo(this.type);this.value=new a(t*this.size)}},wa.prototype.fromArray=function(t){var u,a=oo(this.type);if(t[0]&&t[0].length){var h=0,d=this.size;u=new a(t.length*d);for(var g=0;g<t.length;g++)for(var y=0;y<d;y++)u[h++]=t[g][y]}else u=new a(t);this.value=u},wa.prototype.clone=function(t){var a=new wa(this.name,this.type,this.size,this.semantic);return t&&console.warn("todo"),a};var Ui=I.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new il,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var t=this.getEnabledAttributes(),a=0;a<t.length;a++)this.dirtyAttribute(t[a]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(t){this._cache.dirtyAll(so(t)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(t,a){if(t<this.triangleCount&&t>=0){a||(a=[]);var u=this.indices;return a[0]=u[3*t],a[1]=u[3*t+1],a[2]=u[3*t+2],a}},setTriangleIndices:function(t,a){var u=this.indices;u[3*t]=a[0],u[3*t+1]=a[1],u[3*t+2]=a[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(t){var a,u=this.vertexCount>65535?vt.Uint32Array:vt.Uint16Array;if(t[0]&&t[0].length){var h=0;a=new u(3*t.length);for(var g=0;g<t.length;g++)for(var y=0;y<3;y++)a[h++]=t[g][y]}else a=new u(t);this.indices=a},createAttribute:function(t,a,u,h){var d=new wa(t,a,u,h);return this.attributes[t]&&this.removeAttribute(t),this.attributes[t]=d,this._attributeList.push(t),d},removeAttribute:function(t){var a=this._attributeList,u=a.indexOf(t);return u>=0&&(a.splice(u,1),delete this.attributes[t],!0)},getAttribute:function(t){return this.attributes[t]},getEnabledAttributes:function(){var t=this._enabledAttributes,a=this._attributeList;if(t)return t;for(var u=[],h=this.vertexCount,d=0;d<a.length;d++){var g=a[d],y=this.attributes[g];y.value&&y.value.length===h*y.size&&u.push(g)}return this._enabledAttributes=u,u},getBufferChunks:function(t){var a=this._cache;a.use(t.__uid__);var u=a.isDirty("attributes"),h=a.isDirty("indices");if(u||h){this._updateBuffer(t.gl,u,h);for(var d=this.getEnabledAttributes(),g=0;g<d.length;g++)a.fresh(so(d[g]));a.fresh("attributes"),a.fresh("indices")}return a.fresh("any"),a.get("chunks")},_updateBuffer:function(t,a,u){var h=this._cache,d=h.get("chunks"),g=!1;d||((d=[])[0]={attributeBuffers:[],indicesBuffer:null},h.put("chunks",d),g=!0);var y=d[0],S=y.attributeBuffers,b=y.indicesBuffer;if(a||g){var L=this.getEnabledAttributes(),W={};if(!g)for(var ut=0;ut<S.length;ut++)W[S[ut].name]=S[ut];for(var bt=0;bt<L.length;bt++){var Dt,zt,Ct=L[bt],Et=this.attributes[Ct];g||(Dt=W[Ct]),zt=Dt?Dt.buffer:t.createBuffer(),h.isDirty(so(Ct))&&(t.bindBuffer(t.ARRAY_BUFFER,zt),t.bufferData(t.ARRAY_BUFFER,Et.value,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW)),S[bt]=new Os(Ct,Et.type,zt,Et.size,Et.semantic)}for(ut=bt;ut<S.length;ut++)t.deleteBuffer(S[ut].buffer);S.length=bt}this.isUseIndices()&&(u||g)&&(b||(b=new al(t.createBuffer()),y.indicesBuffer=b),b.count=this.indices.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,b.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW))},dispose:function(t){var a=this._cache;a.use(t.__uid__);var u=a.get("chunks");if(u)for(var h=0;h<u.length;h++){for(var d=u[h],g=0;g<d.attributeBuffers.length;g++)t.gl.deleteBuffer(d.attributeBuffers[g].buffer);d.indicesBuffer&&t.gl.deleteBuffer(d.indicesBuffer.buffer)}if(this.__vaoCache){var S=t.getGLExtension("OES_vertex_array_object");for(var b in this.__vaoCache){var L=this.__vaoCache[b].vao;L&&S.deleteVertexArrayOES(L)}}this.__vaoCache={},a.deleteContext(t.__uid__)}});Object.defineProperty&&(Object.defineProperty(Ui.prototype,"vertexCount",{enumerable:!1,get:function(){var t=this.attributes[this.mainAttribute];return t||(t=this.attributes[this._attributeList[0]]),t&&t.value?t.value.length/t.size:0}}),Object.defineProperty(Ui.prototype,"triangleCount",{enumerable:!1,get:function(){var t=this.indices;return t?t.length/3:0}})),Ui.STATIC_DRAW=35044,Ui.DYNAMIC_DRAW=35048,Ui.STREAM_DRAW=35040,Ui.AttributeBuffer=Os,Ui.IndicesBuffer=al,Ui.Attribute=wa;const Ha=Ui;var li=he.create,Ii=he.add,lo=he.set,ui=Ha.Attribute,Si=Ha.extend(function(){return{attributes:{position:new ui("position","float",3,"POSITION"),texcoord0:new ui("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new ui("texcoord1","float",2,"TEXCOORD_1"),normal:new ui("normal","float",3,"NORMAL"),tangent:new ui("tangent","float",4,"TANGENT"),color:new ui("color","float",4,"COLOR"),weight:new ui("weight","float",3,"WEIGHT"),joint:new ui("joint","float",4,"JOINT"),barycentric:new ui("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var t=this.boundingBox;t||(t=this.boundingBox=new Mn);var a=this.attributes.position.value;if(a&&a.length){var u=t.min,h=t.max,d=u.array,g=h.array;he.set(d,a[0],a[1],a[2]),he.set(g,a[0],a[1],a[2]);for(var y=3;y<a.length;){var S=a[y++],b=a[y++],L=a[y++];S<d[0]&&(d[0]=S),b<d[1]&&(d[1]=b),L<d[2]&&(d[2]=L),S>g[0]&&(g[0]=S),b>g[1]&&(g[1]=b),L>g[2]&&(g[2]=L)}u._dirty=!0,h._dirty=!0}},generateVertexNormals:function(){if(this.vertexCount){var t=this.indices,a=this.attributes,u=a.position.value,h=a.normal.value;if(h&&h.length===u.length)for(var d=0;d<h.length;d++)h[d]=0;else h=a.normal.value=new vt.Float32Array(u.length);for(var bt,Ct,Et,g=li(),y=li(),S=li(),b=li(),L=li(),W=li(),ut=t?t.length:this.vertexCount,Dt=0;Dt<ut;)for(t?(bt=t[Dt++],Ct=t[Dt++],Et=t[Dt++]):(bt=Dt++,Ct=Dt++,Et=Dt++),lo(g,u[3*bt],u[3*bt+1],u[3*bt+2]),lo(y,u[3*Ct],u[3*Ct+1],u[3*Ct+2]),lo(S,u[3*Et],u[3*Et+1],u[3*Et+2]),he.sub(b,g,y),he.sub(L,y,S),he.cross(W,b,L),d=0;d<3;d++)h[3*bt+d]=h[3*bt+d]+W[d],h[3*Ct+d]=h[3*Ct+d]+W[d],h[3*Et+d]=h[3*Et+d]+W[d];for(d=0;d<h.length;)lo(W,h[d],h[d+1],h[d+2]),he.normalize(W,W),h[d++]=W[0],h[d++]=W[1],h[d++]=W[2];this.dirty()}},generateFaceNormals:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.indices,a=this.attributes,u=a.position.value,h=a.normal.value,d=li(),g=li(),y=li(),S=li(),b=li(),L=li();h||(h=a.normal.value=new Float32Array(u.length));for(var ut,bt,Ct,W=t?t.length:this.vertexCount,Et=0;Et<W;){t?(ut=t[Et++],bt=t[Et++],Ct=t[Et++]):(ut=Et++,bt=Et++,Ct=Et++),lo(d,u[3*ut],u[3*ut+1],u[3*ut+2]),lo(g,u[3*bt],u[3*bt+1],u[3*bt+2]),lo(y,u[3*Ct],u[3*Ct+1],u[3*Ct+2]),he.sub(S,d,g),he.sub(b,g,y),he.cross(L,S,b),he.normalize(L,L);for(var Dt=0;Dt<3;Dt++)h[3*ut+Dt]=L[Dt],h[3*bt+Dt]=L[Dt],h[3*Ct+Dt]=L[Dt]}this.dirty()}},generateTangents:function(){if(this.vertexCount){var t=this.vertexCount,a=this.attributes;a.tangent.value||(a.tangent.value=new Float32Array(4*t));var u=a.texcoord0.value,h=a.position.value,d=a.tangent.value,g=a.normal.value;if(!u)return void console.warn("Geometry without texcoords can't generate tangents.");for(var y=[],S=[],b=0;b<t;b++)y[b]=[0,0,0],S[b]=[0,0,0];var Ct,Et,Dt,L=[0,0,0],W=[0,0,0],ut=this.indices,bt=ut?ut.length:this.vertexCount;for(b=0;b<bt;){ut?(Ct=ut[b++],Et=ut[b++],Dt=ut[b++]):(Ct=b++,Et=b++,Dt=b++);var zt=u[2*Ct],Jt=u[2*Ct+1],ge=h[3*Ct],We=h[3*Ct+1],lr=h[3*Ct+2],Sr=h[3*Et]-ge,Er=h[3*Dt]-ge,Wr=h[3*Et+1]-We,Tr=h[3*Dt+1]-We,wn=h[3*Et+2]-lr,Gr=h[3*Dt+2]-lr,Kn=u[2*Et]-zt,Dn=u[2*Dt]-zt,ri=u[2*Et+1]-Jt,ni=u[2*Dt+1]-Jt,xn=1/(Kn*ni-ri*Dn);L[0]=(ni*Sr-ri*Er)*xn,L[1]=(ni*Wr-ri*Tr)*xn,L[2]=(ni*wn-ri*Gr)*xn,W[0]=(Kn*Er-Dn*Sr)*xn,W[1]=(Kn*Tr-Dn*Wr)*xn,W[2]=(Kn*Gr-Dn*wn)*xn,Ii(y[Ct],y[Ct],L),Ii(y[Et],y[Et],L),Ii(y[Dt],y[Dt],L),Ii(S[Ct],S[Ct],W),Ii(S[Et],S[Et],W),Ii(S[Dt],S[Dt],W)}var Zi=li(),mi=li(),Ei=li();for(b=0;b<t;b++){Ei[0]=g[3*b],Ei[1]=g[3*b+1],Ei[2]=g[3*b+2];var ua=y[b];he.scale(Zi,Ei,he.dot(Ei,ua)),he.sub(Zi,ua,Zi),he.normalize(Zi,Zi),he.cross(mi,Ei,ua),d[4*b]=Zi[0],d[4*b+1]=Zi[1],d[4*b+2]=Zi[2],d[4*b+3]=he.dot(mi,S[b])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return!this.isUseIndices()||this.vertexCount===this.indices.length},generateUniqueVertex:function(){if(this.vertexCount&&this.indices){this.indices.length>65535&&(this.indices=new vt.Uint32Array(this.indices));for(var t=this.attributes,a=this.indices,u=this.getEnabledAttributes(),h={},d=0;d<u.length;d++)h[g=u[d]]=t[g].value,t[g].init(this.indices.length);for(var y=0,S=0;S<a.length;S++){var b=a[S];for(d=0;d<u.length;d++)for(var g,L=t[g=u[d]].value,W=t[g].size,ut=0;ut<W;ut++)L[y*W+ut]=h[g][b*W+ut];a[S]=y,y++}this.dirty()}},generateBarycentric:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.attributes,a=t.barycentric.value,u=this.indices;if(!a||a.length!==3*u.length){a=t.barycentric.value=new Float32Array(3*u.length);for(var h=0;h<(u?u.length:this.vertexCount/3);)for(var d=0;d<3;d++)a[3*(u?u[h++]:3*h+d)+d]=1;this.dirty()}}},applyTransform:function(t){var a=this.attributes,u=a.position.value,h=a.normal.value,d=a.tangent.value;t=t.array;var g=gr.create();gr.invert(g,t),gr.transpose(g,g);var y=he.transformMat4,S=he.forEach;S(u,3,0,null,y,t),h&&S(h,3,0,null,y,g),d&&S(d,4,0,null,y,g),this.boundingBox&&this.updateBoundingBox()},dispose:function(t){var a=this._cache;a.use(t.__uid__);var u=a.get("chunks");if(u)for(var h=0;h<u.length;h++){for(var d=u[h],g=0;g<d.attributeBuffers.length;g++)t.gl.deleteBuffer(d.attributeBuffers[g].buffer);d.indicesBuffer&&t.gl.deleteBuffer(d.indicesBuffer.buffer)}if(this.__vaoCache){var S=t.getGLExtension("OES_vertex_array_object");for(var b in this.__vaoCache){var L=this.__vaoCache[b].vao;L&&S.deleteVertexArrayOES(L)}}this.__vaoCache={},a.deleteContext(t.__uid__)}});Si.STATIC_DRAW=Ha.STATIC_DRAW,Si.DYNAMIC_DRAW=Ha.DYNAMIC_DRAW,Si.STREAM_DRAW=Ha.STREAM_DRAW,Si.AttributeBuffer=Ha.AttributeBuffer,Si.IndicesBuffer=Ha.IndicesBuffer,Si.Attribute=ui;const gn=Si;var ji="uniform vec3 ",Es="uniform float ",Va="@export clay.header.",ra="@end",Nn=":unconfigurable;";const ts=[Va+"directional_light",ji+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+Nn,ji+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+Nn,ra,Va+"ambient_light",ji+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+Nn,ra,Va+"ambient_sh_light",ji+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+Nn,ji+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+Nn,"vec3 calcAmbientSHLight(int idx, vec3 N) {\n int offset = 9 * idx;\n return ambientSHLightCoefficients[0]\n + ambientSHLightCoefficients[1] * N.x\n + ambientSHLightCoefficients[2] * N.y\n + ambientSHLightCoefficients[3] * N.z\n + ambientSHLightCoefficients[4] * N.x * N.z\n + ambientSHLightCoefficients[5] * N.z * N.y\n + ambientSHLightCoefficients[6] * N.y * N.x\n + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)\n + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);\n}",ra,Va+"ambient_cubemap_light",ji+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+Nn,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+Nn,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+Nn,ra,Va+"point_light",ji+"pointLightPosition[POINT_LIGHT_COUNT]"+Nn,Es+"pointLightRange[POINT_LIGHT_COUNT]"+Nn,ji+"pointLightColor[POINT_LIGHT_COUNT]"+Nn,ra,Va+"spot_light",ji+"spotLightPosition[SPOT_LIGHT_COUNT]"+Nn,ji+"spotLightDirection[SPOT_LIGHT_COUNT]"+Nn,Es+"spotLightRange[SPOT_LIGHT_COUNT]"+Nn,Es+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+Nn,Es+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+Nn,Es+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+Nn,ji+"spotLightColor[SPOT_LIGHT_COUNT]"+Nn,ra].join("\n");rr.import(ts);var Eo=Ln.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var t=Ln.prototype.clone.call(this);return t.color=Array.prototype.slice.call(this.color),t.intensity=this.intensity,t.castShadow=this.castShadow,t.shadowResolution=this.shadowResolution,t}});const pa=Eo;var Ri=function(t,a){this.normal=t||new mr(0,1,0),this.distance=a||0};Ri.prototype={constructor:Ri,distanceToPoint:function(t){return he.dot(t.array,this.normal.array)-this.distance},projectPoint:function(t,a){a||(a=new mr);var u=this.distanceToPoint(t);return he.scaleAndAdd(a.array,t.array,this.normal.array,-u),a._dirty=!0,a},normalize:function(){var t=1/he.len(this.normal.array);he.scale(this.normal.array,t),this.distance*=t},intersectFrustum:function(t){for(var a=t.vertices,u=this.normal.array,h=he.dot(a[0].array,u)>this.distance,d=1;d<8;d++)if(he.dot(a[d].array,u)>this.distance!=h)return!0},intersectLine:function(){var t=he.create();return function(a,u,h){var d=this.distanceToPoint(a),g=this.distanceToPoint(u);if(d>0&&g>0||d<0&&g<0)return null;var y=this.normal.array,S=this.distance,b=a.array;he.sub(t,u.array,a.array),he.normalize(t,t);var L=he.dot(y,t);if(0===L)return null;h||(h=new mr);var W=(he.dot(y,b)-S)/L;return he.scaleAndAdd(h.array,b,t,-W),h._dirty=!0,h}}(),applyTransform:function(){var t=gr.create(),a=Mr.create(),u=Mr.create();return u[3]=1,function(h){h=h.array,he.scale(u,this.normal.array,this.distance),Mr.transformMat4(u,u,h),this.distance=he.dot(u,this.normal.array),gr.invert(t,h),gr.transpose(t,t),a[3]=0,he.copy(a,this.normal.array),Mr.transformMat4(a,a,t),he.copy(this.normal.array,a)}}(),copy:function(t){he.copy(this.normal.array,t.normal.array),this.normal._dirty=!0,this.distance=t.distance},clone:function(){var t=new Ri;return t.copy(this),t}};const Wa=Ri;var Xn=he.set,Yl=he.copy,sl=he.transformMat4,wo=Math.min,ll=Math.max,Kl=function(){this.planes=[];for(var t=0;t<6;t++)this.planes.push(new Wa);for(this.boundingBox=new Mn,this.vertices=[],t=0;t<8;t++)this.vertices[t]=he.fromValues(0,0,0)};Kl.prototype={setFromProjection:function(t){var a=this.planes,u=t.array,h=u[0],d=u[1],g=u[2],y=u[3],S=u[4],b=u[5],L=u[6],W=u[7],ut=u[8],bt=u[9],Ct=u[10],Et=u[11],Dt=u[12],zt=u[13],$t=u[14],ae=u[15];Xn(a[0].normal.array,y-h,W-S,Et-ut),a[0].distance=-(ae-Dt),a[0].normalize(),Xn(a[1].normal.array,y+h,W+S,Et+ut),a[1].distance=-(ae+Dt),a[1].normalize(),Xn(a[2].normal.array,y+d,W+b,Et+bt),a[2].distance=-(ae+zt),a[2].normalize(),Xn(a[3].normal.array,y-d,W-b,Et-bt),a[3].distance=-(ae-zt),a[3].normalize(),Xn(a[4].normal.array,y-g,W-L,Et-Ct),a[4].distance=-(ae-$t),a[4].normalize(),Xn(a[5].normal.array,y+g,W+L,Et+Ct),a[5].distance=-(ae+$t),a[5].normalize();var Jt=this.boundingBox,qt=this.vertices;if(0===ae){var me=b/h,ge=-$t/(Ct-1),Ge=-$t/(Ct+1),Oe=-Ge/b,We=-ge/b;Jt.min.set(-Oe*me,-Oe,Ge),Jt.max.set(Oe*me,Oe,ge),Xn(qt[0],-Oe*me,-Oe,Ge),Xn(qt[1],-Oe*me,Oe,Ge),Xn(qt[2],Oe*me,-Oe,Ge),Xn(qt[3],Oe*me,Oe,Ge),Xn(qt[4],-We*me,-We,ge),Xn(qt[5],-We*me,We,ge),Xn(qt[6],We*me,-We,ge),Xn(qt[7],We*me,We,ge)}else{var ar=(-1-Dt)/h,Ke=(1-Dt)/h,lr=(1-zt)/b,vr=(-1-zt)/b,nr=(-1-$t)/Ct,Sr=(1-$t)/Ct;Jt.min.set(Math.min(ar,Ke),Math.min(vr,lr),Math.min(Sr,nr)),Jt.max.set(Math.max(Ke,ar),Math.max(lr,vr),Math.max(nr,Sr));var Er=Jt.min.array,Wr=Jt.max.array;Xn(qt[0],Er[0],Er[1],Er[2]),Xn(qt[1],Er[0],Wr[1],Er[2]),Xn(qt[2],Wr[0],Er[1],Er[2]),Xn(qt[3],Wr[0],Wr[1],Er[2]),Xn(qt[4],Er[0],Er[1],Wr[2]),Xn(qt[5],Er[0],Wr[1],Wr[2]),Xn(qt[6],Wr[0],Er[1],Wr[2]),Xn(qt[7],Wr[0],Wr[1],Wr[2])}},getTransformedBoundingBox:function(){var t=he.create();return function(a,u){var h=this.vertices,d=u.array,g=a.min,y=a.max,S=g.array,b=y.array,L=h[0];sl(t,L,d),Yl(S,t),Yl(b,t);for(var W=1;W<8;W++)sl(t,L=h[W],d),S[0]=wo(t[0],S[0]),S[1]=wo(t[1],S[1]),S[2]=wo(t[2],S[2]),b[0]=ll(t[0],b[0]),b[1]=ll(t[1],b[1]),b[2]=ll(t[2],b[2]);return g._dirty=!0,y._dirty=!0,a}}()};const es=Kl;var ws=Ln.extend(function(){return{projectionMatrix:new _r,invProjectionMatrix:new _r,viewMatrix:new _r,frustum:new es}},function(){this.update(!0)},{update:function(t){Ln.prototype.update.call(this,t),_r.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),_r.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(t){_r.copy(this.viewMatrix,t),_r.invert(this.worldTransform,t),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(t){_r.copy(this.projectionMatrix,t),_r.invert(this.invProjectionMatrix,t),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var t=Mr.create();return function(a,u){var h=void 0!==u?u:new dr,d=a.array[0],g=a.array[1];return Mr.set(t,d,g,-1,1),Mr.transformMat4(t,t,this.invProjectionMatrix.array),Mr.transformMat4(t,t,this.worldTransform.array),he.scale(h.origin.array,t,1/t[3]),Mr.set(t,d,g,1,1),Mr.transformMat4(t,t,this.invProjectionMatrix.array),Mr.transformMat4(t,t,this.worldTransform.array),he.scale(t,t,1/t[3]),he.sub(h.direction.array,t,h.origin.array),he.normalize(h.direction.array,h.direction.array),h.direction._dirty=!0,h.origin._dirty=!0,h}}()});const Do=ws;var Ds=gr.create(),ul=gr.create(),rs={};function jl(t){var a=[],u=Object.keys(t);u.sort();for(var h=0;h<u.length;h++){var d=u[h];a.push(d+" "+t[d])}var g=a.join("\n");if(rs[g])return rs[g];var y=w.genGUID();return rs[g]=y,y}function Lo(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}Lo.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},Lo.prototype.add=function(t,a){a?this.transparent[this._transparentCount++]=t:this.opaque[this._opaqueCount++]=t},Lo.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var Jl=Ln.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new Mn,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new Pt(20)}},function(){this._scene=this},{addToScene:function(t){t instanceof Do?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(t)):t instanceof pa&&this.lights.push(t),t.name&&(this._nodeRepository[t.name]=t)},removeFromScene:function(t){var a;t instanceof Do?(a=this._cameraList.indexOf(t))>=0&&this._cameraList.splice(a,1):t instanceof pa&&(a=this.lights.indexOf(t))>=0&&this.lights.splice(a,1),t.name&&delete this._nodeRepository[t.name]},getNode:function(t){return this._nodeRepository[t]},setMainCamera:function(t){var a=this._cameraList.indexOf(t);a>=0&&this._cameraList.splice(a,1),this._cameraList.unshift(t)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var t=this.lights;this._previousLightNumber=this._lightNumber;for(var a={},u=0;u<t.length;u++){var h=t[u];if(!h.invisible){var d=h.group;a[d]||(a[d]={}),a[d][h.type]=a[d][h.type]||0,a[d][h.type]++}}for(var g in this._lightNumber=a,a)this._lightProgramKeys[g]=jl(a[g]);this._updateLightUniforms()},cloneNode:function(t){var a=t.clone(),u={};return function h(d,g){u[d.__uid__]=g;for(var y=0;y<d._children.length;y++)h(d._children[y],g._children[y])}(t,a),a.traverse(function(d){d.skeleton&&(d.skeleton=d.skeleton.clone(u)),d.material&&(d.material=d.material.clone())}),a},updateRenderList:function(t,a){var u=t.__uid__,h=this._renderLists.get(u);return h||(h=new Lo,this._renderLists.put(u,h)),h.startCount(),a&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0)),this._doUpdateRenderList(this,t,this.material&&this.material.transparent||!1,h,a),h.endCount(),h},getRenderList:function(t){return this._renderLists.get(t.__uid__)},_doUpdateRenderList:function(t,a,u,h,d){if(!t.invisible)for(var g=0;g<t._children.length;g++){var y=t._children[g];if(y.isRenderable()){var S=y.isSkinnedMesh()?Ds:y.worldTransform.array,b=y.geometry;gr.multiplyAffine(ul,a.viewMatrix.array,S),(d&&!b.boundingBox||!this.isFrustumCulled(y,a,ul))&&h.add(y,y.material.transparent||u)}y._children.length>0&&this._doUpdateRenderList(y,a,u,h,d)}},isFrustumCulled:function(){var t=new Mn,a=new _r;return function(u,h,d){var g=u.boundingBox;if(g||(g=u.skeleton&&u.skeleton.boundingBox?u.skeleton.boundingBox:u.geometry.boundingBox),!g)return!1;if(a.array=d,t.transformFrom(g,a),u.castShadow&&this.viewBoundingBoxLastFrame.union(t),u.frustumCulling){if(!t.intersectBoundingBox(h.frustum.boundingBox))return!0;a.array=h.projectionMatrix.array,t.max.array[2]>0&&t.min.array[2]<0&&(t.max.array[2]=-1e-20),t.applyProjection(a);var y=t.min.array,S=t.max.array;if(S[0]<-1||y[0]>1||S[1]<-1||y[1]>1||S[2]<-1||y[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var t=this.lights;t.sort(Ql);var a=this._lightUniforms;for(var u in a)for(var h in a[u])a[u][h].value.length=0;for(var d=0;d<t.length;d++){var g=t[d];if(!g.invisible)for(var h in u=g.group,g.uniformTemplates){var y=g.uniformTemplates[h],S=y.value(g);if(null!=S){a[u]||(a[u]={}),a[u][h]||(a[u][h]={type:"",value:[]});var b=a[u][h];switch(b.type=y.type+"v",y.type){case"1i":case"1f":case"t":b.value.push(S);break;case"2f":case"3f":case"4f":for(var L=0;L<S.length;L++)b.value.push(S[L]);break;default:console.error("Unkown light uniform type "+y.type)}}}}},getLightGroups:function(){var t=[];for(var a in this._lightNumber)t.push(a);return t},getNumberChangedLightGroups:function(){var t=[];for(var a in this._lightNumber)this.isLightNumberChanged(a)&&t.push(a);return t},isLightNumberChanged:function(t){var a=this._previousLightNumber,u=this._lightNumber;for(var h in u[t])if(!a[t]||u[t][h]!==a[t][h])return!0;for(var h in a[t])if(!u[t]||u[t][h]!==a[t][h])return!0;return!1},getLightsNumbers:function(t){return this._lightNumber[t]},getProgramKey:function(t){return this._lightProgramKeys[t]},setLightUniforms:function(){function t(a,u,h){for(var d in a){var g=a[d];if("tv"===g.type){if(!u.hasUniform(d))continue;for(var y=[],S=0;S<g.value.length;S++){var L=u.takeCurrentTextureSlot(h,g.value[S]);y.push(L)}u.setUniform(h.gl,"1iv",d,y)}else u.setUniform(h.gl,g.type,d,g.value)}}return function(a,u,h){t(this._lightUniforms[u],a,h),t(this.shadowUniforms,a,h)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function Ql(t,a){if(a.castShadow&&!t.castShadow)return!0}const Da=Jl;var yo=D(9286),Ls=io.isPowerOfTwo,ku=["px","nx","py","ny","pz","nz"],cl=zr.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(t){var a=t.gl;a.bindTexture(a.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(t);var u=this.format,h=this.type;a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,this.getAvailableWrapS()),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,this.getAvailableWrapT()),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var d=t.getGLExtension("EXT_texture_filter_anisotropic");if(d&&this.anisotropic>1&&a.texParameterf(a.TEXTURE_CUBE_MAP,d.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===h&&(t.getGLExtension("OES_texture_half_float")||(h=5126)),this.mipmaps.length)for(var y=this.width,S=this.height,b=0;b<this.mipmaps.length;b++)this._updateTextureData(a,this.mipmaps[b],b,y,S,u,h),y/=2,S/=2;else this._updateTextureData(a,this,0,this.width,this.height,u,h),!this.NPOT&&this.useMipmap&&a.generateMipmap(a.TEXTURE_CUBE_MAP);a.bindTexture(a.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(t,a,u,h,d,g,y){for(var S=0;S<6;S++){var b=ku[S],L=a.image&&a.image[b];L?t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+S,u,g,g,y,L):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+S,u,g,h,d,0,g,y,a.pixels&&a.pixels[b])}},generateMipmap:function(t){var a=t.gl;this.useMipmap&&!this.NPOT&&(a.bindTexture(a.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),a.generateMipmap(a.TEXTURE_CUBE_MAP))},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?Ls(this.image.px.width)&&Ls(this.image.px.height):Ls(this.width)&&Ls(this.height)},isRenderable:function(){return this.image.px?na(this.image.px)&&na(this.image.nx)&&na(this.image.py)&&na(this.image.ny)&&na(this.image.pz)&&na(this.image.nz):!(!this.width||!this.height)},load:function(t,a){var u=0,h=this;return w.each(t,function(d,g){var y=vt.createImage();a&&(y.crossOrigin=a),y.onload=function(){0==--u&&(h.dirty(),h.trigger("success",h))},y.onerror=function(){u--},u++,y.src=d,h.image[g]=y}),this}});function na(t){return t.width>0&&t.height>0}Object.defineProperty(cl.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(cl.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});const sn=cl;var No=Do.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var t=this.fov/180*Math.PI;this.projectionMatrix.perspective(t,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array,a=2*Math.atan(1/t[5]);this.fov=a/Math.PI*180,this.aspect=t[5]/t[0],this.near=t[14]/(t[10]-1),this.far=t[14]/(t[10]+1)},clone:function(){var t=Do.prototype.clone.call(this);return t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t}});const ci=No;var Io="framebuffer",Ji="renderbuffer",hl=Ji+"_width",Ro=Ji+"_height",ia=Ji+"_attached",Zt="depthtexture_attached",Ht=36160,Rt=36161,Vt=36096,se=I.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new il,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(t){if(t.__currentFrameBuffer){if(t.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}t.__currentFrameBuffer=this;var a=t.gl;a.bindFramebuffer(Ht,this._getFrameBufferGL(t)),this._boundRenderer=t;var u=this._cache;u.put("viewport",t.viewport);var d,g,h=!1;for(var y in this._textures){h=!0;var S=this._textures[y];S&&(d=S.texture.width,g=S.texture.height,this._doAttach(t,S.texture,y,S.target))}this._width=d,this._height=g,!h&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?t.setViewport(this.viewport):t.setViewport(0,0,d,g,1);var b=u.get("attached_textures");if(b)for(var y in b)this._textures[y]||this._doDetach(a,y,b[y]);if(!u.get(Zt)&&this.depthBuffer){u.miss(Ji)&&u.put(Ji,a.createRenderbuffer());var W=u.get(Ji);(d!==u.get(hl)||g!==u.get(Ro))&&(a.bindRenderbuffer(Rt,W),a.renderbufferStorage(Rt,a.DEPTH_COMPONENT16,d,g),u.put(hl,d),u.put(Ro,g),a.bindRenderbuffer(Rt,null)),u.get(ia)||(a.framebufferRenderbuffer(Ht,Vt,Rt,W),u.put(ia,!0))}},unbind:function(t){t.__currentFrameBuffer=null,t.gl.bindFramebuffer(Ht,null),this._boundRenderer=null,this._cache.use(t.__uid__);var u=this._cache.get("viewport");u&&t.setViewport(u),this.updateMipmap(t)},updateMipmap:function(t){var a=t.gl;for(var u in this._textures){var h=this._textures[u];if(h){var d=h.texture;if(!d.NPOT&&d.useMipmap&&d.minFilter===zr.LINEAR_MIPMAP_LINEAR){var g="textureCube"===d.textureType?34067:3553;a.bindTexture(g,d.getWebGLTexture(t)),a.generateMipmap(g),a.bindTexture(g,null)}}}},checkStatus:function(t){return t.checkFramebufferStatus(Ht)},_getFrameBufferGL:function(t){var a=this._cache;return a.use(t.__uid__),a.miss(Io)&&a.put(Io,t.gl.createFramebuffer()),a.get(Io)},attach:function(t,a,u){if(!t.width)throw new Error("The texture attached to color buffer is not a valid.");a=a||36064,u=u||3553;var g,h=this._boundRenderer;if(h&&h.gl){var y=this._cache;y.use(h.__uid__),g=y.get("attached_textures")}var S=this._textures[a];if(!S||S.target!==u||S.texture!==t||!g||null==g[a]){var b=!0;h&&(b=this._doAttach(h,t,a,u),this.viewport||h.setViewport(0,0,t.width,t.height,1)),b&&(this._textures[a]=this._textures[a]||{},this._textures[a].texture=t,this._textures[a].target=u)}},_doAttach:function(t,a,u,h){var d=t.gl,g=a.getWebGLTexture(t),y=this._cache.get("attached_textures");if(y&&y[u]){var S=y[u];if(S.texture===a&&S.target===h)return}var b=!0;if(((u=+u)===Vt||33306===u)&&(t.getGLExtension("WEBGL_depth_texture")||(console.error("Depth texture is not supported by the browser"),b=!1),6402!==a.format&&34041!==a.format&&(console.error("The texture attached to depth buffer is not a valid."),b=!1),b)){var W=this._cache.get(Ji);W&&(d.framebufferRenderbuffer(Ht,Vt,Rt,null),d.deleteRenderbuffer(W),this._cache.put(Ji,!1)),this._cache.put(ia,!1),this._cache.put(Zt,!0)}return d.framebufferTexture2D(Ht,u,h,g,0),y||this._cache.put("attached_textures",y={}),y[u]=y[u]||{},y[u].texture=a,y[u].target=h,b},_doDetach:function(t,a,u){t.framebufferTexture2D(Ht,a,u,null,0);var h=this._cache.get("attached_textures");h&&h[a]&&(h[a]=null),(a===Vt||33306===a)&&this._cache.put(Zt,!1)},detach:function(t,a){this._textures[t]=null,this._boundRenderer&&(this._cache.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,t,a))},dispose:function(t){var a=t.gl,u=this._cache;u.use(t.__uid__);var h=u.get(Ji);h&&a.deleteRenderbuffer(h);var d=u.get(Io);d&&a.deleteFramebuffer(d),u.deleteContext(t.__uid__),this._textures={}}});se.DEPTH_ATTACHMENT=Vt,se.COLOR_ATTACHMENT0=36064,se.STENCIL_ATTACHMENT=36128,se.DEPTH_STENCIL_ATTACHMENT=33306;const ve=se;var He=["px","nx","py","ny","pz","nz"],ze=I.extend(function(){var t={position:new mr,far:1e3,near:.1,texture:null,shadowMapPass:null},a=t._cameras={px:new ci({fov:90}),nx:new ci({fov:90}),py:new ci({fov:90}),ny:new ci({fov:90}),pz:new ci({fov:90}),nz:new ci({fov:90})};return a.px.lookAt(mr.POSITIVE_X,mr.NEGATIVE_Y),a.nx.lookAt(mr.NEGATIVE_X,mr.NEGATIVE_Y),a.py.lookAt(mr.POSITIVE_Y,mr.POSITIVE_Z),a.ny.lookAt(mr.NEGATIVE_Y,mr.NEGATIVE_Z),a.pz.lookAt(mr.POSITIVE_Z,mr.NEGATIVE_Y),a.nz.lookAt(mr.NEGATIVE_Z,mr.NEGATIVE_Y),t._frameBuffer=new ve,t},{getCamera:function(t){return this._cameras[t]},render:function(t,a,u){var h=t.gl;u||a.update();for(var d=this.texture.width,g=2*Math.atan(d/(d-.5))/Math.PI*180,y=0;y<6;y++){var b=this._cameras[He[y]];if(mr.copy(b.position,this.position),b.far=this.far,b.near=this.near,b.fov=g,this.shadowMapPass){b.update();var L=a.getBoundingBox();L.applyTransform(b.viewMatrix),a.viewBoundingBoxLastFrame.copy(L),this.shadowMapPass.render(t,a,b,!0)}this._frameBuffer.attach(this.texture,h.COLOR_ATTACHMENT0,h.TEXTURE_CUBE_MAP_POSITIVE_X+y),this._frameBuffer.bind(t),t.render(a,b,!0),this._frameBuffer.unbind(t)}},dispose:function(t){this._frameBuffer.dispose(t)}});const qe=ze;var yr=gn.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var t=this.heightSegments,a=this.widthSegments,u=this.attributes,h=[],d=[],g=[],y=[],S=0;S<=t;S++)for(var b=S/t,L=0;L<=a;L++){var W=L/a;if(h.push([2*W-1,2*b-1,0]),d&&d.push([W,b]),g&&g.push([0,0,1]),L<a&&S<t){var ut=L+S*(a+1);y.push([ut,ut+1,ut+a+1]),y.push([ut+a+1,ut+1,ut+a+2])}}u.position.fromArray(h),u.texcoord0.fromArray(d),u.normal.fromArray(g),this.initIndicesFromArray(y),this.boundingBox=new Mn,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}});const fe=yr;var Me=new _r,Ce=gn.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var t={px:Ie("px",this.depthSegments,this.heightSegments),nx:Ie("nx",this.depthSegments,this.heightSegments),py:Ie("py",this.widthSegments,this.depthSegments),ny:Ie("ny",this.widthSegments,this.depthSegments),pz:Ie("pz",this.widthSegments,this.heightSegments),nz:Ie("nz",this.widthSegments,this.heightSegments)},a=["position","texcoord0","normal"],u=0,h=0;for(var d in t)u+=t[d].vertexCount,h+=t[d].indices.length;for(var g=0;g<a.length;g++)this.attributes[a[g]].init(u);this.indices=new vt.Uint16Array(h);var y=0,S=0;for(var d in t){var b=t[d];for(g=0;g<a.length;g++)for(var L=a[g],W=b.attributes[L].value,ut=b.attributes[L].size,bt="normal"===L,Ct=0;Ct<W.length;Ct++){var Et=W[Ct];this.inside&&bt&&(Et=-Et),this.attributes[L].value[Ct+ut*S]=Et}var Dt=b.indices.length;for(Ct=0;Ct<b.indices.length;Ct++)this.indices[Ct+y]=S+b.indices[this.inside?Dt-Ct-1:Ct];y+=b.indices.length,S+=b.vertexCount}this.boundingBox=new Mn,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function Ie(t,a,u){Me.identity();var h=new fe({widthSegments:a,heightSegments:u});switch(t){case"px":_r.translate(Me,Me,mr.POSITIVE_X),_r.rotateY(Me,Me,Math.PI/2);break;case"nx":_r.translate(Me,Me,mr.NEGATIVE_X),_r.rotateY(Me,Me,-Math.PI/2);break;case"py":_r.translate(Me,Me,mr.POSITIVE_Y),_r.rotateX(Me,Me,-Math.PI/2);break;case"ny":_r.translate(Me,Me,mr.NEGATIVE_Y),_r.rotateX(Me,Me,Math.PI/2);break;case"pz":_r.translate(Me,Me,mr.POSITIVE_Z);break;case"nz":_r.translate(Me,Me,mr.NEGATIVE_Z),_r.rotateY(Me,Me,Math.PI)}return h.applyTransform(Me),h}const Ue=Ce;rr.import("@export clay.skybox.vertex\n#define SHADER_NAME skybox\nuniform mat4 world : WORLD;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nvarying vec3 v_WorldPosition;\nvoid main()\n{\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end\n@export clay.skybox.fragment\n#define PI 3.1415926\nuniform mat4 viewInverse : VIEWINVERSE;\n#ifdef EQUIRECTANGULAR\nuniform sampler2D environmentMap;\n#else\nuniform samplerCube environmentMap;\n#endif\nuniform float lod: 0.0;\nvarying vec3 v_WorldPosition;\n@import clay.util.rgbm\n@import clay.util.srgb\n@import clay.util.ACES\nvoid main()\n{\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(v_WorldPosition - eyePos);\n#ifdef EQUIRECTANGULAR\n float phi = acos(V.y);\n float theta = atan(-V.x, V.z) + PI * 0.5;\n vec2 uv = vec2(theta / 2.0 / PI, phi / PI);\n vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));\n#else\n #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)\n vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));\n #else\n vec4 texel = decodeHDR(textureCube(environmentMap, V));\n #endif\n#endif\n#ifdef SRGB_DECODE\n texel = sRGBToLinear(texel);\n#endif\n#ifdef TONEMAPPING\n texel.rgb = ACESToneMapping(texel.rgb);\n#endif\n#ifdef SRGB_ENCODE\n texel = linearTosRGB(texel);\n#endif\n gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));\n}\n@end");var cr=Ua.extend(function(){var t=new rr({vertex:rr.source("clay.skybox.vertex"),fragment:rr.source("clay.skybox.fragment")}),a=new Cr({shader:t,depthMask:!1});return{scene:null,geometry:new Ue,material:a,environmentMap:null,culling:!1,_dummyCamera:new ci}},function(){var t=this.scene;t&&this.attachScene(t),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(t){this.scene&&this.detachScene(),t.skybox=this,this.scene=t,t.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(t){this.detachScene(),this.geometry.dispose(t)},setEnvironmentMap:function(t){"texture2D"===t.textureType?(this.material.define("EQUIRECTANGULAR"),t.minFilter=zr.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",t)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(t,a,u){this.renderSkybox(t,u)},renderSkybox:function(t,a){var u=this._dummyCamera;u.aspect=t.getViewportAspect(),u.fov=a.fov||50,u.updateProjectionMatrix(),_r.invert(u.invProjectionMatrix,u.projectionMatrix),u.worldTransform.copy(a.worldTransform),u.viewMatrix.copy(a.viewMatrix),this.position.copy(a.getWorldPosition()),this.update(),t.gl.disable(t.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),t.renderPass([this],u)}});const xr=cr,br=xr;function eu(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var Is=eu("DXT1"),ih=eu("DXT3"),Ai=eu("DXT5"),sh={parse:function(t,a){var u=new Int32Array(t,0,31);if(542327876!==u[0]||4&!u(20))return null;var b,L,h=u(21),d=u[4],g=u[3],y=512&u[28],S=131072&u[2];switch(h){case Is:b=8,L=zr.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case ih:b=16,L=zr.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case Ai:b=16,L=zr.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var W=u[1]+4,ut=y?6:1,bt=1;S&&(bt=Math.max(1,u[7]));for(var Ct=[],Et=0;Et<ut;Et++){var Dt=d,zt=g;Ct[Et]=new an({width:Dt,height:zt,format:L});for(var $t=[],ae=0;ae<bt;ae++){var Jt=Math.max(4,Dt)/4*Math.max(4,zt)/4*b,qt=new Uint8Array(t,W,Jt);W+=Jt,Dt*=.5,zt*=.5,$t[ae]=qt}Ct[Et].pixels=$t[0],S&&(Ct[Et].mipmaps=$t)}if(!a)return Ct[0];a.width=Ct[0].width,a.height=Ct[0].height,a.format=Ct[0].format,a.pixels=Ct[0].pixels,a.mipmaps=Ct[0].mipmaps}};const Rs=sh;var xo=String.fromCharCode;function Nf(t,a,u,h){if(t[3]>0){var d=Math.pow(2,t[3]-128-8+h);a[u+0]=t[0]*d,a[u+1]=t[1]*d,a[u+2]=t[2]*d}else a[u+0]=0,a[u+1]=0,a[u+2]=0;return a[u+3]=1,a}function ru(t,a){a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3]}function Xu(t,a,u,h){for(var d=0,g=0,y=h;y>0;)if(t[g][0]=a[u++],t[g][1]=a[u++],t[g][2]=a[u++],t[g][3]=a[u++],1===t[g][0]&&1===t[g][1]&&1===t[g][2]){for(var S=t[g][3]<<d>>>0;S>0;S--)ru(t[g-1],t[g]),g++,y--;d+=8}else g++,y--,d=0;return u}function If(t,a,u,h){if(h<8|h>32767)return Xu(t,a,u,h);if(2!=(d=a[u++]))return Xu(t,a,u-1,h);if(t[0][1]=a[u++],t[0][2]=a[u++],d=a[u++],(t[0][2]<<8>>>0|d)>>>0!==h)return null;for(var d=0;d<4;d++)for(var g=0;g<h;){var y=a[u++];if(y>128){y=(127&y)>>>0;for(var S=a[u++];y--;)t[g++][d]=S}else for(;y--;)t[g++][d]=a[u++]}return u}var Ya={parseRGBE:function(t,a,u){null==u&&(u=0);var h=new Uint8Array(t),d=h.length;if("#?"===function $u(t,a,u){for(var h="",d=a;d<u;d++)h+=xo(t[d]);return h}(h,0,2)){for(var g=2;g<d&&("\n"!==xo(h[g])||"\n"!==xo(h[g+1]));g++);if(!(g>=d)){g+=2;for(var y="";g<d;g++){var S=xo(h[g]);if("\n"===S)break;y+=S}var b=y.split(" "),L=parseInt(b[1]),W=parseInt(b[3]);if(W&&L){for(var ut=g+1,bt=[],Ct=0;Ct<W;Ct++){bt[Ct]=[];for(var Et=0;Et<4;Et++)bt[Ct][Et]=0}for(var Dt=new Float32Array(W*L*4),zt=0,$t=0;$t<L;$t++){if(!(ut=If(bt,h,ut,W)))return null;for(Ct=0;Ct<W;Ct++)Nf(bt[Ct],Dt,zt,u),zt+=4}return a||(a=new an),a.width=W,a.height=L,a.pixels=Dt,a.type=zr.FLOAT,a}}}},parseRGBEFromPNG:function(t){}};const aa=Ya;var hi={loadTexture:function(t,a,u,h){var d;if("function"==typeof a?(h=u=a,a={}):a=a||{},"string"==typeof t){if(t.match(/.hdr$/)||"hdr"===a.fileType)return d=new an({width:0,height:0,sRGB:!1}),hi._fetchTexture(t,function(g){aa.parseRGBE(g,d,a.exposure),d.dirty(),u&&u(d)},h),d;t.match(/.dds$/)||"dds"===a.fileType?(d=new an({width:0,height:0}),hi._fetchTexture(t,function(g){Rs.parse(g,d),d.dirty(),u&&u(d)},h)):((d=new an).load(t),d.success(u),d.error(h))}else"object"==typeof t&&typeof t.px<"u"&&((d=new sn).load(t),d.success(u),d.error(h));return d},loadPanorama:function(t,a,u,h,d,g){var y=this;"function"==typeof h?(g=d=h,h={}):h=h||{},hi.loadTexture(a,h,function(S){S.flipY=h.flipY||!1,y.panoramaToCubeMap(t,S,u,h),S.dispose(t),d&&d(u)},g)},panoramaToCubeMap:function(t,a,u,h){var d=new qe,g=new br({scene:new Da});return g.setEnvironmentMap(a),(h=h||{}).encodeRGBM&&g.material.define("fragment","RGBM_ENCODE"),u.sRGB=a.sRGB,d.texture=u,d.render(t,g.scene),d.texture=null,d.dispose(t),u},heightToNormal:function(t,a){var u=document.createElement("canvas"),h=u.width=t.width,d=u.height=t.height,g=u.getContext("2d");g.drawImage(t,0,0,h,d),a=a||!1;for(var y=g.getImageData(0,0,h,d),S=g.createImageData(h,d),b=0;b<y.data.length;b+=4){if(a){var W=y.data[b+1],ut=y.data[b+2];if(Math.abs(y.data[b]-W)+Math.abs(W-ut)>20)return console.warn("Given image is not a height map"),t}var Ct,Et,Dt,zt;b%(4*h)==0?(Ct=y.data[b],Dt=y.data[b+4]):b%(4*h)==4*(h-1)?(Ct=y.data[b-4],Dt=y.data[b]):(Ct=y.data[b-4],Dt=y.data[b+4]),b<4*h?(Et=y.data[b],zt=y.data[b+4*h]):b>h*(d-1)*4?(Et=y.data[b-4*h],zt=y.data[b]):(Et=y.data[b-4*h],zt=y.data[b+4*h]),S.data[b]=Ct-Dt+127,S.data[b+1]=Et-zt+127,S.data[b+2]=255,S.data[b+3]=255}return g.putImageData(S,0,0),u},isHeightImage:function(t,a,u){if(!t||!t.width||!t.height)return!1;var h=document.createElement("canvas"),d=h.getContext("2d"),g=a||32;u=u||20,h.width=h.height=g,d.drawImage(t,0,0,g,g);for(var y=d.getImageData(0,0,g,g),S=0;S<y.data.length;S+=4){var L=y.data[S+1],W=y.data[S+2];if(Math.abs(y.data[S]-L)+Math.abs(L-W)>u)return!1}return!0},_fetchTexture:function(t,a,u){vt.request.get({url:t,responseType:"arraybuffer",onload:a,onerror:u})},createChessboard:function(t,a,u,h){t=t||512,a=a||64,u=u||"black",h=h||"white";var d=Math.ceil(t/a),g=document.createElement("canvas");g.width=t,g.height=t;var y=g.getContext("2d");y.fillStyle=h,y.fillRect(0,0,t,t),y.fillStyle=u;for(var S=0;S<d;S++)for(var b=0;b<d;b++)(b%2?S%2:S%2-1)&&y.fillRect(S*a,b*a,a,a);return new an({image:g,anisotropic:8})},createBlank:function(t){var a=document.createElement("canvas");a.width=1,a.height=1;var u=a.getContext("2d");return u.fillStyle=t,u.fillRect(0,0,1,1),new an({image:a})}};const va=hi;var So=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function nu(t){return"_on"+t}var Yu=function(t){var a=this;this._texture=new an({anisotropic:32,flipY:!1,surface:this,dispose:function(u){a.dispose(),an.prototype.dispose.call(this,u)}}),So.forEach(function(u){this[nu(u)]=function(h){!h.triangle||this._meshes.forEach(function(d){this.dispatchEvent(u,d,h.triangle,h.point)},this)}},this),this._meshes=[],t&&this.setECharts(t),this.onupdate=null};Yu.prototype={constructor:Yu,getTexture:function(){return this._texture},setECharts:function(t){this._chart=t;var a=t.getDom();if(a instanceof HTMLCanvasElement){var u=this,h=t.getZr(),d=h.__oldRefreshImmediately||h.refreshImmediately;h.refreshImmediately=function(){d.call(this),u._texture.dirty(),u.onupdate&&u.onupdate()},h.__oldRefreshImmediately=d}else console.error("ECharts must init on canvas if it is used as texture."),a=document.createElement("canvas");this._texture.image=a,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var t=new mr,a=new mr,u=new mr,h=new ne,d=new ne,g=new ne,y=new ne,S=new mr;return function(b,L,W,ut){var bt=L.geometry,Ct=bt.attributes.position,Et=bt.attributes.texcoord0,Dt=mr.dot,zt=mr.cross;Ct.get(W[0],t.array),Ct.get(W[1],a.array),Ct.get(W[2],u.array),Et.get(W[0],h.array),Et.get(W[1],d.array),Et.get(W[2],g.array),zt(S,a,u);var $t=Dt(t,S),ae=Dt(ut,S)/$t;zt(S,u,t);var Jt=Dt(ut,S)/$t;zt(S,t,a);var qt=Dt(ut,S)/$t;ne.scale(y,h,ae),ne.scaleAndAdd(y,y,d,Jt),ne.scaleAndAdd(y,y,g,qt);var me=y.x*this._chart.getWidth(),ge=y.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(b,{zrX:me,zrY:ge})}}(),attachToMesh:function(t){this._meshes.indexOf(t)>=0||(So.forEach(function(a){t.on(a,this[nu(a)],this)},this),this._meshes.push(t))},detachFromMesh:function(t){var a=this._meshes.indexOf(t);a>=0&&this._meshes.splice(a,1),So.forEach(function(u){t.off(u,this[nu(u)])},this)},dispose:function(){this._meshes.forEach(function(t){this.detachFromMesh(t)},this)}};const lh=Yu;var La=Do.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array;this.left=(-1-t[12])/t[0],this.right=(1-t[12])/t[0],this.top=(1-t[13])/t[5],this.bottom=(-1-t[13])/t[5],this.near=-(-1-t[14])/t[10],this.far=-(1-t[14])/t[10]},clone:function(){var t=Do.prototype.clone.call(this);return t.left=this.left,t.right=this.right,t.near=this.near,t.far=this.far,t.top=this.top,t.bottom=this.bottom,t}});const ns=La;rr.import("\n@export clay.compositor.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nvarying vec2 v_Texcoord;\nvoid main()\n{\n v_Texcoord = texcoord;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end");var fl=new fe,ch=new Ua({geometry:fl,frustumCulling:!1}),Rf=new ns,Bf=I.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var t=new rr(rr.source("clay.compositor.vertex"),this.fragment),a=new Cr({shader:t});a.enableTexturesAll(),this.material=a},{setUniform:function(t,a){this.material.setUniform(t,a)},getUniform:function(t){var a=this.material.uniforms[t];if(a)return a.value},attachOutput:function(t,a){this.outputs||(this.outputs={}),this.outputs[a=a||36064]=t},detachOutput:function(t){for(var a in this.outputs)this.outputs[a]===t&&(this.outputs[a]=null)},bind:function(t,a){if(this.outputs)for(var u in this.outputs){var h=this.outputs[u];h&&a.attach(h,u)}a&&a.bind(t)},unbind:function(t,a){a.unbind(t)},render:function(t,a){var u=t.gl;if(a){this.bind(t,a);var h=t.getGLExtension("EXT_draw_buffers");if(h&&this.outputs){var d=[];for(var g in this.outputs)(g=+g)>=u.COLOR_ATTACHMENT0&&g<=u.COLOR_ATTACHMENT0+8&&d.push(g);h.drawBuffersEXT(d)}}this.trigger("beforerender",this,t);var y=this.clearDepth?u.DEPTH_BUFFER_BIT:0;if(u.depthMask(!0),this.clearColor){y|=u.COLOR_BUFFER_BIT,u.colorMask(!0,!0,!0,!0);var S=this.clearColor;Array.isArray(S)&&u.clearColor(S[0],S[1],S[2],S[3])}u.clear(y),this.blendWithPrevious?(u.enable(u.BLEND),this.material.transparent=!0):(u.disable(u.BLEND),this.material.transparent=!1),this.renderQuad(t),this.trigger("afterrender",this,t),a&&this.unbind(t,a)},renderQuad:function(t){ch.material=this.material,t.renderPass([ch],Rf)},dispose:function(t){}});const Vn=Bf;var is={},Ku=["px","nx","py","ny","pz","nz"];is.prefilterEnvironmentMap=function(t,a,u,h,d){(!d||!h)&&(h=is.generateNormalDistribution(),d=is.integrateBRDF(t,h));var g=(u=u||{}).width||64,y=u.height||64,S=u.type||a.type,b=new sn({width:g,height:y,type:S,flipY:!1,mipmaps:[]});b.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var L=Math.min(g,y),W=Math.log(L)/Math.log(2)+1,ut=new Cr({shader:new rr({vertex:rr.source("clay.skybox.vertex"),fragment:"#define SHADER_NAME prefilter\n#define SAMPLE_NUMBER 1024\n#define PI 3.14159265358979\nuniform mat4 viewInverse : VIEWINVERSE;\nuniform samplerCube environmentMap;\nuniform sampler2D normalDistribution;\nuniform float roughness : 0.5;\nvarying vec2 v_Texcoord;\nvarying vec3 v_WorldPosition;\n@import clay.util.rgbm\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nvoid main() {\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(v_WorldPosition - eyePos);\n vec3 N = V;\n vec3 prefilteredColor = vec3(0.0);\n float totalWeight = 0.0;\n float fMaxSampleNumber = float(SAMPLE_NUMBER);\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\n vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);\n vec3 L = reflect(-V, H);\n float NoL = clamp(dot(N, L), 0.0, 1.0);\n if (NoL > 0.0) {\n prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;\n totalWeight += NoL;\n }\n }\n gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));\n}\n"})});ut.set("normalDistribution",h),u.encodeRGBM&&ut.define("fragment","RGBM_ENCODE"),u.decodeRGBM&&ut.define("fragment","RGBM_DECODE");var Ct,bt=new Da;if("texture2D"===a.textureType){var Et=new sn({width:g,height:y,type:S===zr.FLOAT?zr.HALF_FLOAT:S});va.panoramaToCubeMap(t,a,Et,{encodeRGBM:u.decodeRGBM}),a=Et}(Ct=new xr({scene:bt,material:ut})).material.set("environmentMap",a);var Dt=new qe({texture:b});u.encodeRGBM&&(S=b.type=zr.UNSIGNED_BYTE);for(var zt=new an({width:g,height:y,type:S}),$t=new ve({depthBuffer:!1}),ae=vt[S===zr.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],Jt=0;Jt<W;Jt++){b.mipmaps[Jt]={pixels:{}},Ct.material.set("roughness",Jt/(W-1));for(var qt=zt.width,me=2*Math.atan(qt/(qt-.5))/Math.PI*180,ge=0;ge<Ku.length;ge++){var Ge=new ae(zt.width*zt.height*4);$t.attach(zt),$t.bind(t);var Oe=Dt.getCamera(Ku[ge]);Oe.fov=me,t.render(bt,Oe),t.gl.readPixels(0,0,zt.width,zt.height,zr.RGBA,S,Ge),$t.unbind(t),b.mipmaps[Jt].pixels[Ku[ge]]=Ge}zt.width/=2,zt.height/=2,zt.dirty()}return $t.dispose(t),zt.dispose(t),Ct.dispose(t),h.dispose(t),{environmentMap:b,brdfLookup:d,normalDistribution:h,maxMipmapLevel:W}},is.integrateBRDF=function(t,a){a=a||is.generateNormalDistribution();var u=new ve({depthBuffer:!1}),h=new Vn({fragment:"#define SAMPLE_NUMBER 1024\n#define PI 3.14159265358979\nuniform sampler2D normalDistribution;\nuniform vec2 viewportSize : [512, 256];\nconst vec3 N = vec3(0.0, 0.0, 1.0);\nconst float fSampleNumber = float(SAMPLE_NUMBER);\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nfloat G_Smith(float roughness, float NoV, float NoL) {\n float k = roughness * roughness / 2.0;\n float G1V = NoV / (NoV * (1.0 - k) + k);\n float G1L = NoL / (NoL * (1.0 - k) + k);\n return G1L * G1V;\n}\nvoid main() {\n vec2 uv = gl_FragCoord.xy / viewportSize;\n float NoV = uv.x;\n float roughness = uv.y;\n vec3 V;\n V.x = sqrt(1.0 - NoV * NoV);\n V.y = 0.0;\n V.z = NoV;\n float A = 0.0;\n float B = 0.0;\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\n vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);\n vec3 L = reflect(-V, H);\n float NoL = clamp(L.z, 0.0, 1.0);\n float NoH = clamp(H.z, 0.0, 1.0);\n float VoH = clamp(dot(V, H), 0.0, 1.0);\n if (NoL > 0.0) {\n float G = G_Smith(roughness, NoV, NoL);\n float G_Vis = G * VoH / (NoH * NoV);\n float Fc = pow(1.0 - VoH, 5.0);\n A += (1.0 - Fc) * G_Vis;\n B += Fc * G_Vis;\n }\n }\n gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);\n}\n"}),d=new an({width:512,height:256,type:zr.HALF_FLOAT,wrapS:zr.CLAMP_TO_EDGE,wrapT:zr.CLAMP_TO_EDGE,minFilter:zr.NEAREST,magFilter:zr.NEAREST,useMipmap:!1});return h.setUniform("normalDistribution",a),h.setUniform("viewportSize",[512,256]),h.attachOutput(d),h.render(t,u),u.dispose(t),d},is.generateNormalDistribution=function(u,h){for(var d=new an({width:u=u||256,height:h=h||1024,type:zr.FLOAT,minFilter:zr.NEAREST,magFilter:zr.NEAREST,wrapS:zr.CLAMP_TO_EDGE,wrapT:zr.CLAMP_TO_EDGE,useMipmap:!1}),g=new Float32Array(h*u*4),y=[],S=0;S<u;S++){for(var b=S/u,L=b*b,W=0;W<h;W++){var ut=(W<<16|W>>>16)>>>0;ut=(((16711935&(ut=((252645135&(ut=((858993459&(ut=((1431655765&ut)<<1|(2863311530&ut)>>>1)>>>0))<<2|(3435973836&ut)>>>2)>>>0))<<4|(4042322160&ut)>>>4)>>>0))<<8|(4278255360&ut)>>>8)>>>0)/4294967296;var bt=Math.sqrt((1-ut)/(1+(L*L-1)*ut));y[W]=bt}for(W=0;W<h;W++){var Ct=4*(W*u+S),Et=(bt=y[W],Math.sqrt(1-bt*bt)),zt=2*Math.PI*(W/h);g[Ct]=Et*Math.cos(zt),g[Ct+1]=bt,g[Ct+2]=Et*Math.sin(zt),g[Ct+3]=1}}return d.pixels=g,d};const iu=is;var ju=pa.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(t,a){if(t.getGLExtension("EXT_shader_texture_lod")){this._brdfLookup||(this._normalDistribution=iu.generateNormalDistribution(),this._brdfLookup=iu.integrateBRDF(t,this._normalDistribution));var u=this.cubemap;if(!u.__prefiltered){var h=iu.prefilterEnvironmentMap(t,u,{encodeRGBM:!0,width:a,height:a},this._normalDistribution,this._brdfLookup);this.cubemap=h.environmentMap,this.cubemap.__prefiltered=!0,u.dispose(t)}}else console.warn("Device not support textureCubeLodEXT")},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(t){var a=t.color,u=t.intensity;return[a[0]*u,a[1]*u,a[2]*u]}},ambientCubemapLightCubemap:{type:"t",value:function(t){return t.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(t){return t._brdfLookup}}}});const Ff=ju;var Ju=pa.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new vt.Float32Array(27)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(t){var a=t.color,u=t.intensity;return[a[0]*u,a[1]*u,a[2]*u]}},ambientSHLightCoefficients:{type:"3f",value:function(t){for(var a=t._coefficientsTmpArr,u=0;u<t.coefficients.length;u++)a[u]=t.coefficients[u];return a}}}});const kf=Ju;var Bo={},Ka=["px","nx","py","ny","pz","nz"];function Uf(t,a){var u=t[0],h=t[1],d=t[2];return 0===a?1:1===a?u:2===a?h:3===a?d:4===a?u*d:5===a?h*d:6===a?u*h:7===a?3*d*d-1:u*u-h*h}var as={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};Bo.projectEnvironmentMap=function(t,a,u){(u=u||{}).lod=u.lod||0;var h,d=new Da,g=64;"texture2D"===a.textureType?h=new br({scene:d,environmentMap:a}):(g=a.image&&a.image.px?a.image.px.width:a.width,h=new xr({scene:d,environmentMap:a}));var y=Math.ceil(g/Math.pow(2,u.lod)),S=Math.ceil(g/Math.pow(2,u.lod)),b=new an({width:y,height:S}),L=new ve;h.material.define("fragment","RGBM_ENCODE"),u.decodeRGBM&&h.material.define("fragment","RGBM_DECODE"),h.material.set("lod",u.lod);for(var W=new qe({texture:b}),ut={},bt=0;bt<Ka.length;bt++){ut[Ka[bt]]=new Uint8Array(y*S*4);var Ct=W.getCamera(Ka[bt]);Ct.fov=90,L.attach(b),L.bind(t),t.render(d,Ct),t.gl.readPixels(0,0,y,S,zr.RGBA,zr.UNSIGNED_BYTE,ut[Ka[bt]]),L.unbind(t)}return h.dispose(t),L.dispose(t),b.dispose(t),function Qu(t,a,u,h){for(var d=new vt.Float32Array(27),g=he.create(),y=he.create(),S=he.create(),b=0;b<9;b++){for(var L=he.create(),W=0;W<Ka.length;W++){for(var ut=a[Ka[W]],bt=he.create(),Ct=0,Et=0,Dt=as[Ka[W]],zt=0;zt<h;zt++)for(var $t=0;$t<u;$t++){g[0]=$t/(u-1)*2-1,g[1]=zt/(h-1)*2-1,g[2]=-1,he.normalize(g,g),S[0]=g[Dt[0]]*Dt[3],S[1]=g[Dt[1]]*Dt[4],S[2]=g[Dt[2]]*Dt[5],y[0]=ut[Et++]/255,y[1]=ut[Et++]/255,y[2]=ut[Et++]/255;var ae=ut[Et++]/255*8.12;y[0]*=ae,y[1]*=ae,y[2]*=ae,he.scaleAndAdd(bt,bt,y,Uf(S,b)*-g[2]),Ct+=-g[2]}he.scaleAndAdd(L,L,bt,1/Ct)}d[3*b]=L[0]/6,d[3*b+1]=L[1]/6,d[3*b+2]=L[2]/6}return d}(0,ut,y,S)};const hh=Bo;var fh={firstNotNull:function(){for(var t=0,a=arguments.length;t<a;t++)if(null!=arguments[t])return arguments[t]},queryDataIndex:function(t,a){return null!=a.dataIndexInside?a.dataIndexInside:null!=a.dataIndex?V.D5.isArray(a.dataIndex)?V.D5.map(a.dataIndex,function(u){return t.indexOfRawIndex(u)}):t.indexOfRawIndex(a.dataIndex):null!=a.name?V.D5.isArray(a.name)?V.D5.map(a.name,function(u){return t.indexOfName(u)}):t.indexOfName(a.name):void 0}};const pn=fh;var Hf=gn.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var t=this.heightSegments,a=this.widthSegments,u=this.attributes.position,h=this.attributes.texcoord0,d=this.attributes.normal,g=(a+1)*(t+1);u.init(g),h.init(g),d.init(g);var b,L,W,ut,bt,Ct,Et,Jt,y=g>65535?Uint32Array:Uint16Array,S=this.indices=new y(a*t*6),Dt=this.phiStart,zt=this.phiLength,$t=this.thetaStart,ae=this.thetaLength,qt=[],me=[],ge=0,Ge=1/(Jt=this.radius);for(Et=0;Et<=t;Et++)for(Ct=0;Ct<=a;Ct++)ut=Ct/a,bt=Et/t,b=-Jt*Math.cos(Dt+ut*zt)*Math.sin($t+bt*ae),L=Jt*Math.cos($t+bt*ae),W=Jt*Math.sin(Dt+ut*zt)*Math.sin($t+bt*ae),qt[0]=b,qt[1]=L,qt[2]=W,me[0]=ut,me[1]=bt,u.set(ge,qt),h.set(ge,me),qt[0]*=Ge,qt[1]*=Ge,qt[2]*=Ge,d.set(ge,qt),ge++;var We,ar,Ke,lr=a+1,vr=0;for(Et=0;Et<t;Et++)for(Ct=0;Ct<a;Ct++)We=Et*lr+Ct,Ke=(Et+1)*lr+Ct+1,ar=(Et+1)*lr+Ct,S[vr++]=Et*lr+Ct+1,S[vr++]=We,S[vr++]=Ke,S[vr++]=We,S[vr++]=ar,S[vr++]=Ke;this.boundingBox=new Mn,this.boundingBox.max.set(Jt,Jt,Jt),this.boundingBox.min.set(-Jt,-Jt,-Jt)}});const dh=Hf;var Vf=pa.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(t){var a=t.color,u=t.intensity;return[a[0]*u,a[1]*u,a[2]*u]}}}});const ph=Vf;var Wf=pa.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new mr,t.__dir.copy(t.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(t){var a=t.color,u=t.intensity;return[a[0]*u,a[1]*u,a[2]*u]}}},clone:function(){var t=pa.prototype.clone.call(this);return t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}});const Rp=Wf;var $f=pa.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(t){return t.range}},pointLightColor:{type:"3f",value:function(t){var a=t.color,u=t.intensity;return[a[0]*u,a[1]*u,a[2]*u]}}},clone:function(){var t=pa.prototype.clone.call(this);return t.range=this.range,t}});const vh=$f;var gh=pa.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(t){return t.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(t){return t.falloffFactor}},spotLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new mr,t.__dir.copy(t.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(t){var a=t.color,u=t.intensity;return[a[0]*u,a[1]*u,a[2]*u]}}},clone:function(){var t=pa.prototype.clone.call(this);return t.range=this.range,t.umbraAngle=this.umbraAngle,t.penumbraAngle=this.penumbraAngle,t.falloffFactor=this.falloffFactor,t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}});const Xf=gh;var mn=function(t,a,u,h){this.array=Mr.fromValues(t=t||0,a=a||0,u=u||0,h=h||0),this._dirty=!0};mn.prototype={constructor:mn,add:function(t){return Mr.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,a,u,h){return this.array[0]=t,this.array[1]=a,this.array[2]=u,this.array[3]=h,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new mn(this.x,this.y,this.z,this.w)},copy:function(t){return Mr.copy(this.array,t.array),this._dirty=!0,this},dist:function(t){return Mr.dist(this.array,t.array)},distance:function(t){return Mr.distance(this.array,t.array)},div:function(t){return Mr.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return Mr.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return Mr.dot(this.array,t.array)},len:function(){return Mr.len(this.array)},length:function(){return Mr.length(this.array)},lerp:function(t,a,u){return Mr.lerp(this.array,t.array,a.array,u),this._dirty=!0,this},min:function(t){return Mr.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return Mr.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return Mr.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return Mr.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return Mr.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Mr.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return Mr.random(this.array,t),this._dirty=!0,this},scale:function(t){return Mr.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,a){return Mr.scaleAndAdd(this.array,this.array,t.array,a),this._dirty=!0,this},sqrDist:function(t){return Mr.sqrDist(this.array,t.array)},squaredDistance:function(t){return Mr.squaredDistance(this.array,t.array)},sqrLen:function(){return Mr.sqrLen(this.array)},squaredLength:function(){return Mr.squaredLength(this.array)},sub:function(t){return Mr.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return Mr.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return Mr.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return Mr.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Bs=Object.defineProperty;if(Bs){var au=mn.prototype;Bs(au,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Bs(au,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),Bs(au,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),Bs(au,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}mn.add=function(t,a,u){return Mr.add(t.array,a.array,u.array),t._dirty=!0,t},mn.set=function(t,a,u,h,d){Mr.set(t.array,a,u,h,d),t._dirty=!0},mn.copy=function(t,a){return Mr.copy(t.array,a.array),t._dirty=!0,t},mn.distance=mn.dist=function(t,a){return Mr.distance(t.array,a.array)},mn.divide=mn.div=function(t,a,u){return Mr.divide(t.array,a.array,u.array),t._dirty=!0,t},mn.dot=function(t,a){return Mr.dot(t.array,a.array)},mn.len=function(t){return Mr.length(t.array)},mn.lerp=function(t,a,u,h){return Mr.lerp(t.array,a.array,u.array,h),t._dirty=!0,t},mn.min=function(t,a,u){return Mr.min(t.array,a.array,u.array),t._dirty=!0,t},mn.max=function(t,a,u){return Mr.max(t.array,a.array,u.array),t._dirty=!0,t},mn.multiply=mn.mul=function(t,a,u){return Mr.multiply(t.array,a.array,u.array),t._dirty=!0,t},mn.negate=function(t,a){return Mr.negate(t.array,a.array),t._dirty=!0,t},mn.normalize=function(t,a){return Mr.normalize(t.array,a.array),t._dirty=!0,t},mn.random=function(t,a){return Mr.random(t.array,a),t._dirty=!0,t},mn.scale=function(t,a,u){return Mr.scale(t.array,a.array,u),t._dirty=!0,t},mn.scaleAndAdd=function(t,a,u,h){return Mr.scaleAndAdd(t.array,a.array,u.array,h),t._dirty=!0,t},mn.squaredDistance=mn.sqrDist=function(t,a){return Mr.sqrDist(t.array,a.array)},mn.squaredLength=mn.sqrLen=function(t){return Mr.sqrLen(t.array)},mn.subtract=mn.sub=function(t,a,u){return Mr.subtract(t.array,a.array,u.array),t._dirty=!0,t},mn.transformMat4=function(t,a,u){return Mr.transformMat4(t.array,a.array,u.array),t._dirty=!0,t},mn.transformQuat=function(t,a,u){return Mr.transformQuat(t.array,a.array,u.array),t._dirty=!0,t};const Yf=mn;var Jn={create:function(){var t=new Nr(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},clone:function(t){var a=new Nr(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},transpose:function(t,a){if(t===a){var u=a[1];t[1]=a[2],t[2]=u}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},invert:function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=u*g-d*h;return y?(t[0]=g*(y=1/y),t[1]=-h*y,t[2]=-d*y,t[3]=u*y,t):null},adjoint:function(t,a){var u=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=u,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=u[0],b=u[1],L=u[2],W=u[3];return t[0]=h*S+g*b,t[1]=d*S+y*b,t[2]=h*L+g*W,t[3]=d*L+y*W,t}};Jn.mul=Jn.multiply,Jn.rotate=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=Math.sin(u),b=Math.cos(u);return t[0]=h*b+g*S,t[1]=d*b+y*S,t[2]=h*-S+g*b,t[3]=d*-S+y*b,t},Jn.scale=function(t,a,u){var d=a[1],g=a[2],y=a[3],S=u[0],b=u[1];return t[0]=a[0]*S,t[1]=d*S,t[2]=g*b,t[3]=y*b,t},Jn.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},Jn.LDU=function(t,a,u,h){return t[2]=h[2]/h[0],u[0]=h[0],u[1]=h[1],u[3]=h[3]-t[2]*u[1],[t,a,u]};const fi=Jn;var oa=function(){this.array=fi.create(),this._dirty=!0};oa.prototype={constructor:oa,setArray:function(t){for(var a=0;a<this.array.length;a++)this.array[a]=t[a];return this._dirty=!0,this},clone:function(){return(new oa).copy(this)},copy:function(t){return fi.copy(this.array,t.array),this._dirty=!0,this},adjoint:function(){return fi.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return fi.determinant(this.array)},identity:function(){return fi.identity(this.array),this._dirty=!0,this},invert:function(){return fi.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return fi.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return fi.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return fi.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return fi.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return fi.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return fi.scale(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return fi.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},oa.adjoint=function(t,a){return fi.adjoint(t.array,a.array),t._dirty=!0,t},oa.copy=function(t,a){return fi.copy(t.array,a.array),t._dirty=!0,t},oa.determinant=function(t){return fi.determinant(t.array)},oa.identity=function(t){return fi.identity(t.array),t._dirty=!0,t},oa.invert=function(t,a){return fi.invert(t.array,a.array),t._dirty=!0,t},oa.multiply=oa.mul=function(t,a,u){return fi.mul(t.array,a.array,u.array),t._dirty=!0,t},oa.rotate=function(t,a,u){return fi.rotate(t.array,a.array,u),t._dirty=!0,t},oa.scale=function(t,a,u){return fi.scale(t.array,a.array,u.array),t._dirty=!0,t},oa.transpose=function(t,a){return fi.transpose(t.array,a.array),t._dirty=!0,t};const ii=oa;var ga={create:function(){var t=new Nr(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},clone:function(t){var a=new Nr(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},invert:function(t,a){var u=a[0],h=a[1],d=a[2],g=a[3],y=a[4],S=a[5],b=u*g-h*d;return b?(t[0]=g*(b=1/b),t[1]=-h*b,t[2]=-d*b,t[3]=u*b,t[4]=(d*S-g*y)*b,t[5]=(h*y-u*S)*b,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=a[4],b=a[5],L=u[0],W=u[1],ut=u[2],bt=u[3],Ct=u[4],Et=u[5];return t[0]=h*L+g*W,t[1]=d*L+y*W,t[2]=h*ut+g*bt,t[3]=d*ut+y*bt,t[4]=h*Ct+g*Et+S,t[5]=d*Ct+y*Et+b,t}};ga.mul=ga.multiply,ga.rotate=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=a[4],b=a[5],L=Math.sin(u),W=Math.cos(u);return t[0]=h*W+g*L,t[1]=d*W+y*L,t[2]=h*-L+g*W,t[3]=d*-L+y*W,t[4]=S,t[5]=b,t},ga.scale=function(t,a,u){var d=a[1],g=a[2],y=a[3],S=a[4],b=a[5],L=u[0],W=u[1];return t[0]=a[0]*L,t[1]=d*L,t[2]=g*W,t[3]=y*W,t[4]=S,t[5]=b,t},ga.translate=function(t,a,u){var h=a[0],d=a[1],g=a[2],y=a[3],S=a[4],b=a[5],L=u[0],W=u[1];return t[0]=h,t[1]=d,t[2]=g,t[3]=y,t[4]=h*L+g*W+S,t[5]=d*L+y*W+b,t},ga.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)};const vi=ga;var Bi=function(){this.array=vi.create(),this._dirty=!0};Bi.prototype={constructor:Bi,setArray:function(t){for(var a=0;a<this.array.length;a++)this.array[a]=t[a];return this._dirty=!0,this},clone:function(){return(new Bi).copy(this)},copy:function(t){return vi.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return vi.determinant(this.array)},identity:function(){return vi.identity(this.array),this._dirty=!0,this},invert:function(){return vi.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return vi.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return vi.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return vi.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return vi.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return vi.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return vi.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return vi.translate(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Bi.copy=function(t,a){return vi.copy(t.array,a.array),t._dirty=!0,t},Bi.determinant=function(t){return vi.determinant(t.array)},Bi.identity=function(t){return vi.identity(t.array),t._dirty=!0,t},Bi.invert=function(t,a){return vi.invert(t.array,a.array),t._dirty=!0,t},Bi.multiply=Bi.mul=function(t,a,u){return vi.mul(t.array,a.array,u.array),t._dirty=!0,t},Bi.rotate=function(t,a,u){return vi.rotate(t.array,a.array,u),t._dirty=!0,t},Bi.scale=function(t,a,u){return vi.scale(t.array,a.array,u.array),t._dirty=!0,t},Bi.translate=function(t,a,u){return vi.translate(t.array,a.array,u.array),t._dirty=!0,t};const dl=Bi;var Oi=function(){this.array=un.create(),this._dirty=!0};Oi.prototype={constructor:Oi,setArray:function(t){for(var a=0;a<this.array.length;a++)this.array[a]=t[a];return this._dirty=!0,this},adjoint:function(){return un.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new Oi).copy(this)},copy:function(t){return un.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return un.determinant(this.array)},fromMat2d:function(t){return un.fromMat2d(this.array,t.array),this._dirty=!0,this},fromMat4:function(t){return un.fromMat4(this.array,t.array),this._dirty=!0,this},fromQuat:function(t){return un.fromQuat(this.array,t.array),this._dirty=!0,this},identity:function(){return un.identity(this.array),this._dirty=!0,this},invert:function(){return un.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return un.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return un.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return un.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return un.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return un.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return un.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return un.translate(this.array,this.array,t.array),this._dirty=!0,this},normalFromMat4:function(t){return un.normalFromMat4(this.array,t.array),this._dirty=!0,this},transpose:function(){return un.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Oi.adjoint=function(t,a){return un.adjoint(t.array,a.array),t._dirty=!0,t},Oi.copy=function(t,a){return un.copy(t.array,a.array),t._dirty=!0,t},Oi.determinant=function(t){return un.determinant(t.array)},Oi.identity=function(t){return un.identity(t.array),t._dirty=!0,t},Oi.invert=function(t,a){return un.invert(t.array,a.array),t},Oi.multiply=Oi.mul=function(t,a,u){return un.mul(t.array,a.array,u.array),t._dirty=!0,t},Oi.fromMat2d=function(t,a){return un.fromMat2d(t.array,a.array),t._dirty=!0,t},Oi.fromMat4=function(t,a){return un.fromMat4(t.array,a.array),t._dirty=!0,t},Oi.fromQuat=function(t,a){return un.fromQuat(t.array,a.array),t._dirty=!0,t},Oi.normalFromMat4=function(t,a){return un.normalFromMat4(t.array,a.array),t._dirty=!0,t},Oi.rotate=function(t,a,u){return un.rotate(t.array,a.array,u),t._dirty=!0,t},Oi.scale=function(t,a,u){return un.scale(t.array,a.array,u.array),t._dirty=!0,t},Oi.transpose=function(t,a){return un.transpose(t.array,a.array),t._dirty=!0,t},Oi.translate=function(t,a,u){return un.translate(t.array,a.array,u.array),t._dirty=!0,t};const Kf=Oi;var os=D(1694),_h={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(t,a){var h;if(this._animators=this._animators||[],t){for(var d=t.split("."),g=this,y=0,S=d.length;y<S;y++)!g||(g=g[d[y]]);g&&(h=g)}else h=this;if(null==h)throw new Error("Target "+t+" not exists");var b=this._animators,L=new os.Z(h,a),W=this;return L.during(function(){W.__zr&&W.__zr.refresh()}).done(function(){var ut=b.indexOf(L);ut>=0&&b.splice(ut,1)}),b.push(L),this.__zr&&this.__zr.animation.addAnimator(L),L},stopAnimation:function(t){this._animators=this._animators||[];for(var a=this._animators,u=a.length,h=0;h<u;h++)a[h].stop(t);return a.length=0,this},addAnimatorsToZr:function(t){if(this._animators)for(var a=0;a<this._animators.length;a++)t.animation.addAnimator(this._animators[a])},removeAnimatorsFromZr:function(t){if(this._animators)for(var a=0;a<this._animators.length;a++)t.animation.removeAnimator(this._animators[a])}};const mh="\n@export clay.util.rand\nhighp float rand(vec2 uv) {\n const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);\n return fract(sin(sn) * c);\n}\n@end\n@export clay.util.calculate_attenuation\nuniform float attenuationFactor : 5.0;\nfloat lightAttenuation(float dist, float range)\n{\n float attenuation = 1.0;\n attenuation = dist*dist/(range*range+1.0);\n float att_s = attenuationFactor;\n attenuation = 1.0/(attenuation*att_s+1.0);\n att_s = 1.0/(att_s+1.0);\n attenuation = attenuation - att_s;\n attenuation /= 1.0 - att_s;\n return clamp(attenuation, 0.0, 1.0);\n}\n@end\n@export clay.util.edge_factor\n#ifdef SUPPORT_STANDARD_DERIVATIVES\nfloat edgeFactor(float width)\n{\n vec3 d = fwidth(v_Barycentric);\n vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);\n return min(min(a3.x, a3.y), a3.z);\n}\n#else\nfloat edgeFactor(float width)\n{\n return 1.0;\n}\n#endif\n@end\n@export clay.util.encode_float\nvec4 encodeFloat(const in float depth)\n{\n const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n vec4 res = fract(depth * bitShifts);\n res -= res.xxyz * bit_mask;\n return res;\n}\n@end\n@export clay.util.decode_float\nfloat decodeFloat(const in vec4 color)\n{\n const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n return dot(color, bitShifts);\n}\n@end\n@export clay.util.float\n@import clay.util.encode_float\n@import clay.util.decode_float\n@end\n@export clay.util.rgbm_decode\nvec3 RGBMDecode(vec4 rgbm, float range) {\n return range * rgbm.rgb * rgbm.a;\n}\n@end\n@export clay.util.rgbm_encode\nvec4 RGBMEncode(vec3 color, float range) {\n if (dot(color, color) == 0.0) {\n return vec4(0.0);\n }\n vec4 rgbm;\n color /= range;\n rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);\n rgbm.a = ceil(rgbm.a * 255.0) / 255.0;\n rgbm.rgb = color / rgbm.a;\n return rgbm;\n}\n@end\n@export clay.util.rgbm\n@import clay.util.rgbm_decode\n@import clay.util.rgbm_encode\nvec4 decodeHDR(vec4 color)\n{\n#if defined(RGBM_DECODE) || defined(RGBM)\n return vec4(RGBMDecode(color, 8.12), 1.0);\n#else\n return color;\n#endif\n}\nvec4 encodeHDR(vec4 color)\n{\n#if defined(RGBM_ENCODE) || defined(RGBM)\n return RGBMEncode(color.xyz, 8.12);\n#else\n return color;\n#endif\n}\n@end\n@export clay.util.srgb\nvec4 sRGBToLinear(in vec4 value) {\n return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);\n}\nvec4 linearTosRGB(in vec4 value) {\n return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);\n}\n@end\n@export clay.chunk.skinning_header\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n#ifdef USE_SKIN_MATRICES_TEXTURE\nuniform sampler2D skinMatricesTexture : ignore;\nuniform float skinMatricesTextureSize: ignore;\nmat4 getSkinMatrix(sampler2D tex, float idx) {\n float j = idx * 4.0;\n float x = mod(j, skinMatricesTextureSize);\n float y = floor(j / skinMatricesTextureSize) + 0.5;\n vec2 scale = vec2(skinMatricesTextureSize);\n return mat4(\n texture2D(tex, vec2(x + 0.5, y) / scale),\n texture2D(tex, vec2(x + 1.5, y) / scale),\n texture2D(tex, vec2(x + 2.5, y) / scale),\n texture2D(tex, vec2(x + 3.5, y) / scale)\n );\n}\nmat4 getSkinMatrix(float idx) {\n return getSkinMatrix(skinMatricesTexture, idx);\n}\n#else\nuniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;\nmat4 getSkinMatrix(float idx) {\n return skinMatrix[int(idx)];\n}\n#endif\n#endif\n@end\n@export clay.chunk.skin_matrix\nmat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;\nif (weight.y > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.y) * weight.y;\n}\nif (weight.z > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.z) * weight.z;\n}\nfloat weightW = 1.0-weight.x-weight.y-weight.z;\nif (weightW > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.w) * weightW;\n}\n@end\n@export clay.chunk.instancing_header\n#ifdef INSTANCING\nattribute vec4 instanceMat1;\nattribute vec4 instanceMat2;\nattribute vec4 instanceMat3;\n#endif\n@end\n@export clay.chunk.instancing_matrix\nmat4 instanceMat = mat4(\n vec4(instanceMat1.xyz, 0.0),\n vec4(instanceMat2.xyz, 0.0),\n vec4(instanceMat3.xyz, 0.0),\n vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)\n);\n@end\n@export clay.util.parallax_correct\nvec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {\n vec3 first = (boxMax - pos) / dir;\n vec3 second = (boxMin - pos) / dir;\n vec3 further = max(first, second);\n float dist = min(further.x, min(further.y, further.z));\n vec3 fixedPos = pos + dir * dist;\n vec3 boxCenter = (boxMax + boxMin) * 0.5;\n return normalize(fixedPos - boxCenter);\n}\n@end\n@export clay.util.clamp_sample\nvec4 clampSample(const in sampler2D texture, const in vec2 coord)\n{\n#ifdef STEREO\n float eye = step(0.5, coord.x) * 0.5;\n vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));\n#else\n vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));\n#endif\n return texture2D(texture, coordClamped);\n}\n@end\n@export clay.util.ACES\nvec3 ACESToneMapping(vec3 color)\n{\n const float A = 2.51;\n const float B = 0.03;\n const float C = 2.43;\n const float D = 0.59;\n const float E = 0.14;\n return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\n@end";function qu(t){return t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof Image}Object.assign(Ln.prototype,_h),rr.import(mh),rr.import(Tn),rr.import("\n@export ecgl.common.transformUniforms\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nuniform mat4 world : WORLD;\n@end\n\n@export ecgl.common.attributes\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 normal : NORMAL;\n@end\n\n@export ecgl.common.uv.header\nuniform vec2 uvRepeat : [1.0, 1.0];\nuniform vec2 uvOffset : [0.0, 0.0];\nuniform vec2 detailUvRepeat : [1.0, 1.0];\nuniform vec2 detailUvOffset : [0.0, 0.0];\n\nvarying vec2 v_Texcoord;\nvarying vec2 v_DetailTexcoord;\n@end\n\n@export ecgl.common.uv.main\nv_Texcoord = texcoord * uvRepeat + uvOffset;\nv_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;\n@end\n\n@export ecgl.common.uv.fragmentHeader\nvarying vec2 v_Texcoord;\nvarying vec2 v_DetailTexcoord;\n@end\n\n\n@export ecgl.common.albedo.main\n\n vec4 albedoTexel = vec4(1.0);\n#ifdef DIFFUSEMAP_ENABLED\n albedoTexel = texture2D(diffuseMap, v_Texcoord);\n #ifdef SRGB_DECODE\n albedoTexel = sRGBToLinear(albedoTexel);\n #endif\n#endif\n\n#ifdef DETAILMAP_ENABLED\n vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);\n #ifdef SRGB_DECODE\n detailTexel = sRGBToLinear(detailTexel);\n #endif\n albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);\n albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;\n#endif\n\n@end\n\n@export ecgl.common.wireframe.vertexHeader\n\n#ifdef WIREFRAME_QUAD\nattribute vec4 barycentric;\nvarying vec4 v_Barycentric;\n#elif defined(WIREFRAME_TRIANGLE)\nattribute vec3 barycentric;\nvarying vec3 v_Barycentric;\n#endif\n\n@end\n\n@export ecgl.common.wireframe.vertexMain\n\n#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)\n v_Barycentric = barycentric;\n#endif\n\n@end\n\n\n@export ecgl.common.wireframe.fragmentHeader\n\nuniform float wireframeLineWidth : 1;\nuniform vec4 wireframeLineColor: [0, 0, 0, 0.5];\n\n#ifdef WIREFRAME_QUAD\nvarying vec4 v_Barycentric;\nfloat edgeFactor () {\n vec4 d = fwidth(v_Barycentric);\n vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);\n return min(min(min(a4.x, a4.y), a4.z), a4.w);\n}\n#elif defined(WIREFRAME_TRIANGLE)\nvarying vec3 v_Barycentric;\nfloat edgeFactor () {\n vec3 d = fwidth(v_Barycentric);\n vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);\n return min(min(a3.x, a3.y), a3.z);\n}\n#endif\n\n@end\n\n\n@export ecgl.common.wireframe.fragmentMain\n\n#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)\n if (wireframeLineWidth > 0.) {\n vec4 lineColor = wireframeLineColor;\n#ifdef SRGB_DECODE\n lineColor = sRGBToLinear(lineColor);\n#endif\n\n gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);\n }\n#endif\n@end\n\n\n\n\n@export ecgl.common.bumpMap.header\n\n#ifdef BUMPMAP_ENABLED\nuniform sampler2D bumpMap;\nuniform float bumpScale : 1.0;\n\n\nvec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)\n{\n vec2 dSTdx = dFdx(v_Texcoord);\n vec2 dSTdy = dFdy(v_Texcoord);\n\n float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;\n float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;\n float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;\n\n vec3 vSigmaX = dFdx(surfPos);\n vec3 vSigmaY = dFdy(surfPos);\n vec3 vN = surfNormal;\n\n vec3 R1 = cross(vSigmaY, vN);\n vec3 R2 = cross(vN, vSigmaX);\n\n float fDet = dot(vSigmaX, R1);\n\n vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);\n return normalize(abs(fDet) * baseNormal - vGrad);\n\n}\n#endif\n\n@end\n\n@export ecgl.common.normalMap.vertexHeader\n\n#ifdef NORMALMAP_ENABLED\nattribute vec4 tangent : TANGENT;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@end\n\n@export ecgl.common.normalMap.vertexMain\n\n#ifdef NORMALMAP_ENABLED\n if (dot(tangent, tangent) > 0.0) {\n v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n }\n#endif\n\n@end\n\n\n@export ecgl.common.normalMap.fragmentHeader\n\n#ifdef NORMALMAP_ENABLED\nuniform sampler2D normalMap;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@end\n\n@export ecgl.common.normalMap.fragmentMain\n#ifdef NORMALMAP_ENABLED\n if (dot(v_Tangent, v_Tangent) > 0.0) {\n vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;\n if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;\n mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\n N = normalize(tbn * N);\n }\n }\n#endif\n@end\n\n\n\n@export ecgl.common.vertexAnimation.header\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute vec3 prevNormal;\nuniform float percent;\n#endif\n\n@end\n\n@export ecgl.common.vertexAnimation.main\n\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n vec3 norm = mix(prevNormal, normal, percent);\n#else\n vec3 pos = position;\n vec3 norm = normal;\n#endif\n\n@end\n\n\n@export ecgl.common.ssaoMap.header\n#ifdef SSAOMAP_ENABLED\nuniform sampler2D ssaoMap;\nuniform vec4 viewport : VIEWPORT;\n#endif\n@end\n\n@export ecgl.common.ssaoMap.main\n float ao = 1.0;\n#ifdef SSAOMAP_ENABLED\n ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;\n#endif\n@end\n\n\n\n\n@export ecgl.common.diffuseLayer.header\n\n#if (LAYER_DIFFUSEMAP_COUNT > 0)\nuniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];\nuniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];\n#endif\n\n@end\n\n@export ecgl.common.emissiveLayer.header\n\n#if (LAYER_EMISSIVEMAP_COUNT > 0)\nuniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];\nuniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];\n#endif\n\n@end\n\n@export ecgl.common.layers.header\n@import ecgl.common.diffuseLayer.header\n@import ecgl.common.emissiveLayer.header\n@end\n\n@export ecgl.common.diffuseLayer.main\n\n#if (LAYER_DIFFUSEMAP_COUNT > 0)\n for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{\n float intensity = layerDiffuseIntensity[_idx_];\n vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);\n #ifdef SRGB_DECODE\n texel2 = sRGBToLinear(texel2);\n #endif\n albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);\n albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;\n }}\n#endif\n\n@end\n\n@export ecgl.common.emissiveLayer.main\n\n#if (LAYER_EMISSIVEMAP_COUNT > 0)\n for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)\n {{\n vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];\n #ifdef SRGB_DECODE\n texel2 = sRGBToLinear(texel2);\n #endif\n float intensity = layerEmissionIntensity[_idx_];\n gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;\n }}\n#endif\n\n@end\n"),rr.import("@export ecgl.color.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\n@import ecgl.common.uv.header\n\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 position: POSITION;\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nuniform float percent : 1.0;\n#endif\n\n#ifdef ATMOSPHERE_ENABLED\nattribute vec3 normal: NORMAL;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nvarying vec3 v_Normal;\n#endif\n\nvoid main()\n{\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n#else\n vec3 pos = position;\n#endif\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n @import ecgl.common.uv.main\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n#ifdef ATMOSPHERE_ENABLED\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n\n}\n\n@end\n\n@export ecgl.color.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n\nuniform sampler2D diffuseMap;\nuniform sampler2D detailMap;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\nvarying vec3 v_Normal;\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n@import ecgl.common.layers.header\n\n@import ecgl.common.uv.fragmentHeader\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color);\n#else\n gl_FragColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n gl_FragColor *= albedoTexel;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n\n}\n@end"),rr.import("/**\n * http: */\n\n@export ecgl.lambert.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n\n@import ecgl.common.attributes\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.vertexAnimation.header\n\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n @import ecgl.common.uv.main\n\n @import ecgl.common.vertexAnimation.main\n\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n}\n\n@end\n\n\n@export ecgl.lambert.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\nuniform sampler2D detailMap;\n\n@import ecgl.common.layers.header\n\nuniform float emissionIntensity: 1.0;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\n#endif\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color);\n#else\n gl_FragColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n gl_FragColor *= sRGBToLinear(v_Color);\n #else\n gl_FragColor *= v_Color;\n #endif\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n gl_FragColor *= albedoTexel;\n\n vec3 N = v_Normal;\n#ifdef DOUBLE_SIDED\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)\n {\n diffuseColor += ambientLightColor[i] * ambientFactor * ao;\n }\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;\n }}\n#endif\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\n {\n vec3 lightDirection = -directionalLightDirection[i];\n vec3 lightColor = directionalLightColor[i];\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[i];\n }\n#endif\n\n float ndl = dot(N, normalize(lightDirection)) * shadowContrib;\n\n diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);\n }\n#endif\n\n gl_FragColor.rgb *= diffuseColor;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end"),rr.import("@export ecgl.realistic.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef NORMALMAP_ENABLED\nattribute vec4 tangent : TANGENT;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@import ecgl.common.vertexAnimation.header\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n\n @import ecgl.common.uv.main\n\n @import ecgl.common.vertexAnimation.main\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n#ifdef NORMALMAP_ENABLED\n v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n\n}\n\n@end\n\n\n\n@export ecgl.realistic.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n#define PI 3.14159265358979\n#define ROUGHNESS_CHANEL 0\n#define METALNESS_CHANEL 1\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\n\nuniform sampler2D detailMap;\nuniform sampler2D metalnessMap;\nuniform sampler2D roughnessMap;\n\n@import ecgl.common.layers.header\n\nuniform float emissionIntensity: 1.0;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nuniform float metalness : 0.0;\nuniform float roughness : 0.5;\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\n#endif\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\n@import clay.header.ambient_cubemap_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n@import ecgl.common.normalMap.fragmentHeader\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import clay.util.rgbm\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nvec3 F_Schlick(float ndv, vec3 spec) {\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\n}\n\nfloat D_Phong(float g, float ndh) {\n float a = pow(8192.0, g);\n return (a + 2.0) / 8.0 * pow(ndh, a);\n}\n\nvoid main()\n{\n vec4 albedoColor = color;\n\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n albedoColor *= sRGBToLinear(v_Color);\n #else\n albedoColor *= v_Color;\n #endif\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n albedoColor *= albedoTexel;\n\n float m = metalness;\n\n#ifdef METALNESSMAP_ENABLED\n float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];\n m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);\n#endif\n\n vec3 baseColor = albedoColor.rgb;\n albedoColor.rgb = baseColor * (1.0 - m);\n vec3 specFactor = mix(vec3(0.04), baseColor, m);\n\n float g = 1.0 - roughness;\n\n#ifdef ROUGHNESSMAP_ENABLED\n float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\n#endif\n\n vec3 N = v_Normal;\n\n#ifdef DOUBLE_SIDED\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n@import ecgl.common.normalMap.fragmentMain\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n vec3 diffuseTerm = vec3(0.0);\n vec3 specularTerm = vec3(0.0);\n\n float ndv = clamp(dot(N, V), 0.0, 1.0);\n vec3 fresnelTerm = F_Schlick(ndv, specFactor);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)\n {{\n diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;\n }}\n#endif\n\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;\n }}\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)\n {{\n vec3 L = -directionalLightDirection[_idx_];\n vec3 lc = directionalLightColor[_idx_];\n\n vec3 H = normalize(L + V);\n float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);\n float ndh = clamp(dot(N, H), 0.0, 1.0);\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[_idx_];\n }\n#endif\n\n vec3 li = lc * ndl * shadowContrib;\n\n diffuseTerm += li;\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\n }}\n#endif\n\n\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\n vec3 L = reflect(-V, N);\n L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);\n float rough2 = clamp(1.0 - g, 0.0, 1.0);\n float bias2 = rough2 * 5.0;\n vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;\n vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;\n vec3 envTexel2;\n for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)\n {{\n envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);\n specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;\n }}\n#endif\n\n gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;\n gl_FragColor.a = albedoColor.a;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n#ifdef SRGB_ENCODE\n gl_FragColor = linearTosRGB(gl_FragColor);\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end"),rr.import("@export ecgl.hatching.vertex\n\n@import ecgl.realistic.vertex\n\n@end\n\n\n@export ecgl.hatching.fragment\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform vec4 color : [0.0, 0.0, 0.0, 1.0];\nuniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nuniform sampler2D hatch1;\nuniform sampler2D hatch2;\nuniform sampler2D hatch3;\nuniform sampler2D hatch4;\nuniform sampler2D hatch5;\nuniform sampler2D hatch6;\n\nfloat shade(in float tone) {\n vec4 c = vec4(1. ,1., 1., 1.);\n float step = 1. / 6.;\n vec2 uv = v_DetailTexcoord;\n if (tone <= step / 2.0) {\n c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);\n }\n else if (tone <= step) {\n c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);\n }\n if(tone > step && tone <= 2. * step){\n c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));\n }\n if(tone > 2. * step && tone <= 3. * step){\n c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));\n }\n if(tone > 3. * step && tone <= 4. * step){\n c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));\n }\n if(tone > 4. * step && tone <= 5. * step){\n c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));\n }\n if(tone > 5. * step){\n c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));\n }\n\n return c.r;\n}\n\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n vec4 inkColor = sRGBToLinear(color);\n#else\n vec4 inkColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n inkColor *= sRGBToLinear(v_Color);\n #else\n inkColor *= v_Color;\n #endif\n#endif\n\n vec3 N = v_Normal;\n#ifdef DOUBLE_SIDED\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float tone = 0.0;\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)\n {\n tone += dot(ambientLightColor[i], w) * ambientFactor * ao;\n }\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;\n }}\n#endif\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\n {\n vec3 lightDirection = -directionalLightDirection[i];\n float lightTone = dot(directionalLightColor[i], w);\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[i];\n }\n#endif\n\n float ndl = dot(N, normalize(lightDirection)) * shadowContrib;\n\n tone += lightTone * clamp(ndl, 0.0, 1.0);\n }\n#endif\n\n gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));\n }\n@end\n"),rr.import("@export ecgl.sm.depth.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nuniform float percent : 1.0;\n#endif\n\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\n\nvoid main(){\n\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n#else\n vec3 pos = position;\n#endif\n\n v_ViewPosition = worldViewProjection * vec4(pos, 1.0);\n gl_Position = v_ViewPosition;\n\n v_Texcoord = texcoord;\n\n}\n@end\n\n\n\n@export ecgl.sm.depth.fragment\n\n@import clay.sm.depth.fragment\n\n@end");var ou=Da.prototype.addToScene,xh=Da.prototype.removeFromScene;Da.prototype.addToScene=function(t){if(ou.call(this,t),this.__zr){var a=this.__zr;t.traverse(function(u){u.__zr=a,u.addAnimatorsToZr&&u.addAnimatorsToZr(a)})}},Da.prototype.removeFromScene=function(t){xh.call(this,t),t.traverse(function(a){var u=a.__zr;a.__zr=null,u&&a.removeAnimatorsFromZr&&a.removeAnimatorsFromZr(u)})},Cr.prototype.setTextureImage=function(t,a,u,h){if(this.shader){var y,d=u.getZr(),g=this;return g.autoUpdateTextureStatus=!1,g.disableTexture(t),function rd(t){return!t||"none"===t}(a)||(y=en.loadTexture(a,u,h,function(S){g.enableTexture(t),d&&d.refresh()}),g.set(t,y)),y}};var en={};en.Renderer=Mo,en.Node=Ln,en.Mesh=Ua,en.Shader=rr,en.Material=Cr,en.Texture=zr,en.Texture2D=an,en.Geometry=gn,en.SphereGeometry=dh,en.PlaneGeometry=fe,en.CubeGeometry=Ue,en.AmbientLight=ph,en.DirectionalLight=Rp,en.PointLight=vh,en.SpotLight=Xf,en.PerspectiveCamera=ci,en.OrthographicCamera=ns,en.Vector2=ne,en.Vector3=mr,en.Vector4=Yf,en.Quaternion=nl,en.Matrix2=ii,en.Matrix2d=dl,en.Matrix3=Kf,en.Matrix4=_r,en.Plane=Wa,en.Ray=dr,en.BoundingBox=Mn,en.Frustum=es;var su=null;function lu(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function Th(t){if((t.wrapS===zr.REPEAT||t.wrapT===zr.REPEAT)&&t.image){var a=lu(t.width),u=lu(t.height);if(a!==t.width||u!==t.height){var h=document.createElement("canvas");h.width=a,h.height=u,h.getContext("2d").drawImage(t.image,0,0,a,u),t.image=h}}}en.loadTexture=function(t,a,u,h){"function"==typeof u&&(h=u,u={}),u=u||{};for(var d=Object.keys(u).sort(),g="",y=0;y<d.length;y++)g+=d[y]+"_"+u[d[y]]+"_";var S=a.__textureCache=a.__textureCache||new yo.ZP(20);if(function Ca(t){return t.getZr&&t.setOption}(t)){if(L=S.get(g+(b=t.__textureid__)))L.texture.surface.setECharts(t),h&&h(L.texture);else{var W=new lh(t);for(W.onupdate=function(){a.getZr().refresh()},L={texture:W.getTexture()},y=0;y<d.length;y++)L.texture[d[y]]=u[d[y]];t.__textureid__=b=t.__textureid__||"__ecgl_ec__"+L.texture.__uid__,S.put(g+b,L),h&&h(L.texture)}return L.texture}if(qu(t)){var b,L;if(!(L=S.get(g+(b=t.__textureid__)))){for(L={texture:new en.Texture2D({image:t})},y=0;y<d.length;y++)L.texture[d[y]]=u[d[y]];t.__textureid__=b=t.__textureid__||"__ecgl_image__"+L.texture.__uid__,S.put(g+b,L),Th(L.texture),h&&h(L.texture)}return L.texture}if(L=S.get(g+t))L.callbacks?L.callbacks.push(h):h&&h(L.texture);else if(t.match(/.hdr$|^data:application\/octet-stream/)){L={callbacks:[h]};var ut=va.loadTexture(t,{exposure:u.exposure,fileType:"hdr"},function(){ut.dirty(),L.callbacks.forEach(function(Et){Et&&Et(ut)}),L.callbacks=null});L.texture=ut,S.put(g+t,L)}else{for(ut=new en.Texture2D({image:new Image}),y=0;y<d.length;y++)ut[d[y]]=u[d[y]];L={texture:ut,callbacks:[h]};var bt=ut.image;bt.onload=function(){ut.image=bt,Th(ut),ut.dirty(),L.callbacks.forEach(function(Dt){Dt&&Dt(ut)}),L.callbacks=null},bt.crossOrigin="Anonymous",bt.src=t,ut.image=function Sh(){return null!==su||(su=va.createBlank("rgba(255,255,255,0)").image),su}(),S.put(g+t,L)}return L.texture},en.createAmbientCubemap=function(t,a,u,h){var d=(t=t||{}).texture,g=pn.firstNotNull(t.exposure,1),y=new Ff({intensity:pn.firstNotNull(t.specularIntensity,1)}),S=new kf({intensity:pn.firstNotNull(t.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return y.cubemap=en.loadTexture(d,u,{exposure:g},function(){y.cubemap.flipY=!1,y.prefilter(a,32),S.coefficients=hh.projectEnvironmentMap(a,y.cubemap,{lod:1}),h&&h()}),{specular:y,diffuse:S}},en.createBlankTexture=va.createBlank,en.isImage=qu,en.additiveBlend=function(t){t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)},en.parseColor=function(t,a){return t instanceof Array?(a||(a=[]),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t.length>3?t[3]:1,a):((a=V.$_.parse(t||"#000",a)||[0,0,0,0])[0]/=255,a[1]/=255,a[2]/=255,a)},en.directionFromAlphaBeta=function(t,a){var u=t/180*Math.PI+Math.PI/2,h=-a/180*Math.PI+Math.PI/2,d=[],g=Math.sin(u);return d[0]=g*Math.cos(h),d[1]=-Math.cos(u),d[2]=g*Math.sin(h),d},en.getShadowResolution=function(t){var a=1024;switch(t){case"low":a=512;break;case"medium":break;case"high":a=2048;break;case"ultra":a=4096}return a},en.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"],en.createShader=function(t){"ecgl.shadow"===t&&(t="ecgl.displayShadow");var a=rr.source(t+".vertex"),u=rr.source(t+".fragment");a||console.error("Vertex shader of '%s' not exits",t),u||console.error("Fragment shader of '%s' not exits",t);var h=new rr(a,u);return h.name=t,h},en.createMaterial=function(t,a){a instanceof Array||(a=[a]);var u=en.createShader(t),h=new Cr({shader:u});return a.forEach(function(d){"string"==typeof d&&h.define(d)}),h},en.setMaterialFromModel=function(t,a,u,h){a.autoUpdateTextureStatus=!1;var d=u.getModel(t+"Material"),g=d.get("detailTexture"),y=pn.firstNotNull(d.get("textureTiling"),1),S=pn.firstNotNull(d.get("textureOffset"),0);"number"==typeof y&&(y=[y,y]),"number"==typeof S&&(S=[S,S]);var b=y[0]>1||y[1]>1?en.Texture.REPEAT:en.Texture.CLAMP_TO_EDGE,L={anisotropic:8,wrapS:b,wrapT:b};if("realistic"===t){var W=d.get("roughness"),ut=d.get("metalness");null!=ut?isNaN(ut)&&(a.setTextureImage("metalnessMap",ut,h,L),ut=pn.firstNotNull(d.get("metalnessAdjust"),.5)):ut=0,null!=W?isNaN(W)&&(a.setTextureImage("roughnessMap",W,h,L),W=pn.firstNotNull(d.get("roughnessAdjust"),.5)):W=.5;var bt=d.get("normalTexture");a.setTextureImage("detailMap",g,h,L),a.setTextureImage("normalMap",bt,h,L),a.set({roughness:W,metalness:ut,detailUvRepeat:y,detailUvOffset:S})}else if("lambert"===t)a.setTextureImage("detailMap",g,h,L),a.set({detailUvRepeat:y,detailUvOffset:S});else if("color"===t)a.setTextureImage("detailMap",g,h,L),a.set({detailUvRepeat:y,detailUvOffset:S});else if("hatching"===t){for(var Ct=d.get("hatchingTextures")||[],Et=0;Et<6;Et++)a.setTextureImage("hatch"+(Et+1),Ct[Et],h,{anisotropic:8,wrapS:en.Texture.REPEAT,wrapT:en.Texture.REPEAT});a.set({detailUvRepeat:y,detailUvOffset:S})}},en.updateVertexAnimation=function(t,a,u,h){var d=h.get("animation"),g=h.get("animationDurationUpdate"),y=h.get("animationEasingUpdate"),S=u.shadowDepthMaterial;if(d&&a&&g>0&&a.geometry.vertexCount===u.geometry.vertexCount){u.material.define("vertex","VERTEX_ANIMATION"),u.ignorePreZ=!0,S&&S.define("vertex","VERTEX_ANIMATION");for(var b=0;b<t.length;b++)u.geometry.attributes[t[b][0]].value=a.geometry.attributes[t[b][1]].value;u.geometry.dirty(),u.__percent=0,u.material.set("percent",0),u.stopAnimation(),u.animate().when(g,{__percent:1}).during(function(){u.material.set("percent",u.__percent),S&&S.set("percent",u.__percent)}).done(function(){u.ignorePreZ=!1,u.material.undefine("vertex","VERTEX_ANIMATION"),S&&S.undefine("vertex","VERTEX_ANIMATION")}).start(y)}else u.material.undefine("vertex","VERTEX_ANIMATION"),S&&S.undefine("vertex","VERTEX_ANIMATION")};const ce=en;var uu=D(663),Rn=function(t,a){this.id=t,this.zr=a;try{this.renderer=new Mo({clearBit:0,devicePixelRatio:a.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(a.painter.getWidth(),a.painter.getHeight())}catch(h){return this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",void console.error(h)}this.onglobalout=this.onglobalout.bind(this),a.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var u=this.dom.style;u.position="absolute",u.left="0",u.top="0",this.views=[],this._picking=new Ea({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new V.Q.Rect({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};function Go(t){var a=t.__zr;t.__zr=null,a&&t.removeAnimatorsFromZr&&t.removeAnimatorsFromZr(a)}Rn.prototype.setUnpainted=function(){},Rn.prototype.addView=function(t){if(t.layer!==this){var a=this._viewsToDispose.indexOf(t);a>=0&&this._viewsToDispose.splice(a,1),this.views.push(t),t.layer=this;var u=this.zr;t.scene.traverse(function(h){h.__zr=u,h.addAnimatorsToZr&&h.addAnimatorsToZr(u)})}},Rn.prototype.removeView=function(t){if(t.layer===this){var a=this.views.indexOf(t);a>=0&&(this.views.splice(a,1),t.scene.traverse(Go,this),t.layer=null,this._viewsToDispose.push(t))}},Rn.prototype.removeViewsAll=function(){this.views.forEach(function(t){t.scene.traverse(Go,this),t.layer=null,this._viewsToDispose.push(t)},this),this.views.length=0},Rn.prototype.resize=function(t,a){this.renderer.resize(t,a)},Rn.prototype.clear=function(){var t=this.renderer.gl,a=this._backgroundColor||[0,0,0,0];t.clearColor(a[0],a[1],a[2],a[3]),t.depthMask(!0),t.colorMask(!0,!0,!0,!0),t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT)},Rn.prototype.clearDepth=function(){var t=this.renderer.gl;t.clear(t.DEPTH_BUFFER_BIT)},Rn.prototype.clearColor=function(){var t=this.renderer.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},Rn.prototype.needsRefresh=function(){this.zr.refresh()},Rn.prototype.refresh=function(t){this._backgroundColor=t?ce.parseColor(t):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var a=0;a<this.views.length;a++)this.views[a].prepareRender(this.renderer);for(this._doRender(!1),this._trackAndClean(),a=0;a<this._viewsToDispose.length;a++)this._viewsToDispose[a].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()},Rn.prototype.renderToCanvas=function(t){this._startAccumulating(!0),t.drawImage(this.dom,0,0,t.canvas.width,t.canvas.height)},Rn.prototype._doRender=function(t){this.clear(),this.renderer.saveViewport();for(var a=0;a<this.views.length;a++)this.views[a].render(this.renderer,t);this.renderer.restoreViewport()},Rn.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var tc=1;function Gs(t){for(var a=0;a<t.length;a++)t[a].__used__=0}function cu(t,a){for(var u=0;u<a.length;u++)a[u].__used__||a[u].dispose(t)}function uo(t,a){t.__used__=t.__used__||0,t.__used__++,1===t.__used__&&a.push(t)}function nd(t,a,u){var h,d;t.traverse(function(y){if(y.isRenderable()){var S=y.geometry,b=y.material;if(b!==h)for(var L=b.getTextureUniforms(),W=0;W<L.length;W++){var bt=b.uniforms[L[W]].value;if(bt)if(bt instanceof zr)uo(bt,a);else if(bt instanceof Array)for(var Ct=0;Ct<bt.length;Ct++)bt[Ct]instanceof zr&&uo(bt[Ct],a)}S!==d&&uo(S,u),h=b,d=S}});for(var g=0;g<t.lights.length;g++)t.lights[g].cubemap&&uo(t.lights[g].cubemap,a)}Rn.prototype._startAccumulating=function(t){var a=this;this._stopAccumulating();for(var u=!1,h=0;h<this.views.length;h++)u=this.views[h].needsAccumulate()||u;function d(g){if(a._accumulatingId&&g===a._accumulatingId){for(var y=!0,S=0;S<a.views.length;S++)y=a.views[S].isAccumulateFinished()&&u;y||(a._doRender(!0),t?d(g):(0,uu.Z)(function(){d(g)}))}}u&&(this._accumulatingId=tc++,t?d(a._accumulatingId):this._accumulatingTimeout=setTimeout(function(){d(a._accumulatingId)},50))},Rn.prototype._trackAndClean=function(){var t=[],a=[];this._textureList&&(Gs(this._textureList),Gs(this._geometriesList));for(var u=0;u<this.views.length;u++)nd(this.views[u].scene,t,a);this._textureList&&(cu(this.renderer,this._textureList),cu(this.renderer,this._geometriesList)),this._textureList=t,this._geometriesList=a},Rn.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(Gs(this._textureList),Gs(this._geometriesList),cu(this.renderer,this._textureList),cu(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)},Rn.prototype.onmousedown=function(t){if(!t.target||!t.target.__isGLToZRProxy){var a=this.pickObject((t=t.event).offsetX,t.offsetY);a&&(this._dispatchEvent("mousedown",t,a),this._dispatchDataEvent("mousedown",t,a)),this._downX=t.offsetX,this._downY=t.offsetY}},Rn.prototype.onmousemove=function(t){if(!t.target||!t.target.__isGLToZRProxy){var a=this.pickObject((t=t.event).offsetX,t.offsetY),u=a&&a.target,h=this._hovered;this._hovered=a,h&&u!==h.target&&(h.relatedTarget=u,this._dispatchEvent("mouseout",t,h),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",t,a),a&&(this.zr.setCursorStyle("pointer"),(!h||u!==h.target)&&this._dispatchEvent("mouseover",t,a)),this._dispatchDataEvent("mousemove",t,a)}},Rn.prototype.onmouseup=function(t){if(!t.target||!t.target.__isGLToZRProxy){var a=this.pickObject((t=t.event).offsetX,t.offsetY);a&&(this._dispatchEvent("mouseup",t,a),this._dispatchDataEvent("mouseup",t,a)),this._upX=t.offsetX,this._upY=t.offsetY}},Rn.prototype.onclick=Rn.prototype.dblclick=function(t){if(!t.target||!t.target.__isGLToZRProxy){var a=this._upX-this._downX,u=this._upY-this._downY;if(!(Math.sqrt(a*a+u*u)>20)){var h=this.pickObject((t=t.event).offsetX,t.offsetY);h&&(this._dispatchEvent(t.type,t,h),this._dispatchDataEvent(t.type,t,h));var d=this._clickToSetFocusPoint(t);d&&d.view.setDOFFocusOnPoint(d.distance)&&this.zr.refresh()}}},Rn.prototype._clickToSetFocusPoint=function(t){for(var a=this.renderer,u=a.viewport,h=this.views.length-1;h>=0;h--){var d=this.views[h];if(d.hasDOF()&&d.containPoint(t.offsetX,t.offsetY)){this._picking.scene=d.scene,this._picking.camera=d.camera,a.viewport=d.viewport;var g=this._picking.pick(t.offsetX,t.offsetY,!0);if(g)return g.view=d,g}}a.viewport=u},Rn.prototype.onglobalout=function(t){var a=this._hovered;a&&this._dispatchEvent("mouseout",t,{target:a.target})},Rn.prototype.pickObject=function(t,a){for(var u=[],h=this.renderer,d=h.viewport,g=0;g<this.views.length;g++){var y=this.views[g];y.containPoint(t,a)&&(this._picking.scene=y.scene,this._picking.camera=y.camera,h.viewport=y.viewport,this._picking.pickAll(t,a,u))}return h.viewport=d,u.sort(function(S,b){return S.distance-b.distance}),u[0]},Rn.prototype._dispatchEvent=function(t,a,u){u||(u={});var h=u.target;for(u.cancelBubble=!1,u.event=a,u.type=t,u.offsetX=a.offsetX,u.offsetY=a.offsetY;h&&(h.trigger(t,u),h=h.getParent(),!u.cancelBubble););this._dispatchToView(t,u)},Rn.prototype._dispatchDataEvent=function(t,a,u){var h=u&&u.target,d=h&&h.dataIndex,g=h&&h.seriesIndex,y=h&&h.eventData,S=!1,b=this._zrEventProxy;b.x=a.offsetX,b.y=a.offsetY,b.update();var L={target:b};const W=V._y.getECData(b);"mousemove"===t&&(null!=d?d!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(W.dataIndex=this._lastDataIndex,W.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(L,"mouseout",a)),S=!0):null!=y&&y!==this._lastEventData&&(null!=this._lastEventData&&(W.eventData=this._lastEventData,this.zr.handler.dispatchToElement(L,"mouseout",a)),S=!0),this._lastEventData=y,this._lastDataIndex=d,this._lastSeriesIndex=g),W.eventData=y,W.dataIndex=d,W.seriesIndex=g,(null!=y||parseInt(d,10)>=0&&parseInt(g,10)>=0)&&(this.zr.handler.dispatchToElement(L,t,a),S&&this.zr.handler.dispatchToElement(L,"mouseover",a))},Rn.prototype._dispatchToView=function(t,a){for(var u=0;u<this.views.length;u++)this.views[u].containPoint(a.offsetX,a.offsetY)&&this.views[u].trigger(t,a)},Object.assign(Rn.prototype,tt);const pl=Rn;var id=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function Zs(t,a){if(t&&t[a]&&(t[a].normal||t[a].emphasis)){var u=t[a].normal,h=t[a].emphasis;u&&(t[a]=u),h&&(t.emphasis=t.emphasis||{},t.emphasis[a]=h)}}function ss(t){!t||(t instanceof Array||(t=[t]),V.D5.each(t,function(a){if(a.axisLabel){var u=a.axisLabel;Object.assign(u,u.textStyle),u.textStyle=null}}))}function vl(t){this._layers={},this._zr=t}vl.prototype.update=function(t,a){var u=this,h=a.getZr();if(h.getWidth()&&h.getHeight()){for(var y in this._layers)this._layers[y].removeViewsAll();t.eachComponent(function(S,b){if("series"!==S){var L=a.getViewOfComponentModel(b),W=b.coordinateSystem;if(L.__ecgl__){if(W){if(!W.viewGL)return void console.error("Can't find viewGL in coordinateSystem of component "+b.id);ut=W.viewGL}else{if(!b.viewGL)return void console.error("Can't find viewGL of component "+b.id);ut=W.viewGL}var ut=W.viewGL,bt=d(b);bt.addView(ut),L.afterRender&&L.afterRender(b,t,a,bt),g(L.groupGL,b.get("silent"))}}}),t.eachSeries(function(S){var b=a.getViewOfSeriesModel(S),L=S.coordinateSystem;if(b.__ecgl__){if(L&&!L.viewGL&&!b.viewGL)return void console.error("Can't find viewGL of series "+b.id);var W=L&&L.viewGL||b.viewGL,ut=d(S);ut.addView(W),b.afterRender&&b.afterRender(S,t,a,ut),g(b.groupGL,S.get("silent"))}})}else console.warn("Dom has no width or height");function d(S){var b;h.setSleepAfterStill(0),b=S.get("zlevel");var L=u._layers,W=L[b];if(!W){if(W=L[b]=new pl("gl-"+b,h),h.painter.isSingleCanvas()){W.virtual=!0;var ut=new V.Q.Image({z:1e4,style:{image:W.renderer.canvas},silent:!0});W.__hostImage=ut,h.add(ut)}h.painter.insertLayer(b,W)}return W.__hostImage&&W.__hostImage.setStyle({width:W.renderer.getWidth(),height:W.renderer.getHeight()}),W}function g(S,b){S&&S.traverse(function(L){L.isRenderable&&L.isRenderable()&&(L.ignorePicking=null!=L.$ignorePicking?L.$ignorePicking:b)})}},V.sq(function(t){var a=t.getZr(),u=a.painter.dispose;a.painter.dispose=function(){"function"==typeof this.eachOtherLayer&&this.eachOtherLayer(function(h){h instanceof pl&&h.dispose()}),u.call(this)},a.painter.getRenderedCanvas=function(h){if(h=h||{},this._singleCanvas)return this._layers[0].dom;var d=document.createElement("canvas"),g=h.pixelRatio||this.dpr;d.width=this.getWidth()*g,d.height=this.getHeight()*g;var y=d.getContext("2d");y.dpr=g,y.clearRect(0,0,d.width,d.height),h.backgroundColor&&(y.fillStyle=h.backgroundColor,y.fillRect(0,0,d.width,d.height));var L,S=this.storage.getDisplayList(!0),b={},W=this;function ut(Dt,zt){var $t=W._zlevelList;null==Dt&&(Dt=-1/0);for(var ae,Jt=0;Jt<$t.length;Jt++){var qt=$t[Jt],me=W._layers[qt];if(!me.__builtin__&&qt>Dt&&qt<zt){ae=me;break}}ae&&ae.renderToCanvas&&(y.save(),ae.renderToCanvas(y),y.restore())}for(var bt={ctx:y},Ct=0;Ct<S.length;Ct++){var Et=S[Ct];Et.zlevel!==L&&(ut(L,Et.zlevel),L=Et.zlevel),this._doPaintEl(Et,bt,!0,null,b)}return ut(L,1/0),d}}),V.Br(function(t,a){var u=a.getZr();(u.__egl=u.__egl||new vl(u)).update(t,a)}),V.ds(function Ch(t){V.D5.each(t.series,function(a){V.D5.indexOf(id,a.type)>=0&&(function ec(t){Zs(t,"itemStyle"),Zs(t,"lineStyle"),Zs(t,"areaStyle"),Zs(t,"label")}(a),"mapbox"===a.coordinateSystem&&(a.coordinateSystem="mapbox3D",t.mapbox3D=t.mapbox))}),ss(t.xAxis3D),ss(t.yAxis3D),ss(t.zAxis3D),ss(t.grid3D),Zs(t.geo3D)});const hu={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(t){t=t||{},this.option.viewControl=this.option.viewControl||{},null!=t.alpha&&(this.option.viewControl.alpha=t.alpha),null!=t.beta&&(this.option.viewControl.beta=t.beta),null!=t.distance&&(this.option.viewControl.distance=t.distance),null!=t.center&&(this.option.viewControl.center=t.center)}},ls={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,radiowavesuration:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},us={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}};var cs=V.tF.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});V.D5.merge(cs.prototype,hu),V.D5.merge(cs.prototype,ls),V.D5.merge(cs.prototype,us);const Na=cs;var gl=D(8811),Vi=pn.firstNotNull,Mh={left:0,middle:1,right:2};function bh(t){return t instanceof Array||(t=[t,t]),t}var nc=I.extend(function(){return{zr:null,viewGL:null,_center:new mr,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new ne,_panVelocity:new ne,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(t){this[t]=this[t].bind(this)},this)},{init:function(){var t=this.zr;t&&(t.on("mousedown",this._mouseDownHandler),t.on("globalout",this._mouseUpHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("pinch",this._pinchHandler),t.animation.on("frame",this._update),t.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var t=this.zr;t&&(t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("pinch",this._pinchHandler),t.off("globalout",this._mouseUpHandler),t.dom.removeEventListener("contextmenu",this._contextMenuHandler),t.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(t){this._distance=t,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(t){this._orthoSize=t,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(t){t=Math.max(Math.min(this.maxAlpha,t),this.minAlpha),this._theta=t/180*Math.PI,this._needsUpdate=!0},setBeta:function(t){t=Math.max(Math.min(this.maxBeta,t),this.minBeta),this._phi=-t/180*Math.PI,this._needsUpdate=!0},setCenter:function(t){this._center.setArray(t)},setViewGL:function(t){this.viewGL=t},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(t,a){var u=(a=a||{}).baseDistance||0,h=a.baseOrthoSize||1,d=t.get("projection");"perspective"!==d&&"orthographic"!==d&&"isometric"!==d&&(d="perspective"),this._projection=d,this.viewGL.setProjection(d);var g=t.get("distance")+u,y=t.get("orthographicSize")+h;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(bt){this[bt[0]]=Vi(t.get(bt[0]),bt[1])},this),this.minDistance+=u,this.maxDistance+=u,this.minOrthographicSize+=h,this.maxOrthographicSize+=h;var S=t.ecModel,b={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(bt){b[bt]=Vi(t.get(bt),S&&S.get(bt))});var L=Vi(a.alpha,t.get("alpha"))||0,W=Vi(a.beta,t.get("beta"))||0,ut=Vi(a.center,t.get("center"))||[0,0,0];b.animation&&b.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:L,beta:W,center:ut,distance:g,orthographicSize:y,easing:b.animationEasingUpdate,duration:b.animationDurationUpdate}):(this.setDistance(g),this.setAlpha(L),this.setBeta(W),this.setCenter(ut),this.setOrthographicSize(y)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(t){var a=this.zr,u=this,h={},d={};return null!=t.distance&&(h.distance=this.getDistance(),d.distance=t.distance),null!=t.orthographicSize&&(h.orthographicSize=this.getOrthographicSize(),d.orthographicSize=t.orthographicSize),null!=t.alpha&&(h.alpha=this.getAlpha(),d.alpha=t.alpha),null!=t.beta&&(h.beta=this.getBeta(),d.beta=t.beta),null!=t.center&&(h.center=this.getCenter(),d.center=t.center),this._addAnimator(a.animation.animate(h).when(t.duration||1e3,d).during(function(){null!=h.alpha&&u.setAlpha(h.alpha),null!=h.beta&&u.setBeta(h.beta),null!=h.distance&&u.setDistance(h.distance),null!=h.center&&u.setCenter(h.center),null!=h.orthographicSize&&u.setOrthographicSize(h.orthographicSize),u._needsUpdate=!0})).start(t.easing||"linear")},stopAllAnimation:function(){for(var t=0;t<this._animators.length;t++)this._animators[t].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(t){if(this._rotating){var a=("cw"===this.autoRotateDirection?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=a*t/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(t=Math.min(t,50),this._updateDistanceOrSize(t),this._updatePan(t),this._updateRotate(t),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(t){var a=this._rotateVelocity;this._phi=a.y*t/20+this._phi,this._theta=a.x*t/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(a,Math.pow(this.damping,t/16))},_updateDistanceOrSize:function(t){"perspective"===this._projection?this._setDistance(this._distance+this._zoomSpeed*t/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*t/20),this._zoomSpeed*=Math.pow(this.damping,t/16)},_setDistance:function(t){this._distance=Math.max(Math.min(t,this.maxDistance),this.minDistance)},_setOrthoSize:function(t){this._orthoSize=Math.max(Math.min(t,this.maxOrthographicSize),this.minOrthographicSize);var a=this.getCamera(),u=this._orthoSize,h=u/this.viewGL.viewport.height*this.viewGL.viewport.width;a.left=-h/2,a.right=h/2,a.top=u/2,a.bottom=-u/2},_updatePan:function(t){var a=this._panVelocity,u=this._distance,h=this.getCamera(),d=h.worldTransform.y;this._center.scaleAndAdd(h.worldTransform.x,-a.x*u/200).scaleAndAdd(d,-a.y*u/200),this._vectorDamping(a,0)},_updateTransform:function(){var t=this.getCamera(),a=new mr,u=this._theta+Math.PI/2,h=this._phi+Math.PI/2,d=Math.sin(u);a.x=d*Math.cos(h),a.y=-Math.cos(u),a.z=d*Math.sin(h),t.position.copy(this._center).scaleAndAdd(a,this._distance),t.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var t=this.autoRotateAfterStill,a=this;!isNaN(t)&&t>0&&(this._stillTimeout=setTimeout(function(){a._rotating=!0},1e3*t))},_vectorDamping:function(t,a){var u=t.len();(u*=a)<1e-4&&(u=0),t.normalize().scale(u)},_decomposeTransform:function(){if(this.getCamera()){this.getCamera().updateWorldTransform();var t=this.getCamera().worldTransform.z,a=Math.asin(t.y),u=Math.atan2(t.x,t.z);this._theta=a,this._phi=-u,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(t){t.target||this._isAnimating()||this.viewGL&&!this.viewGL.containPoint(t.offsetX,t.offsetY)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),t.event.targetTouches?1===t.event.targetTouches.length&&(this._mode="rotate"):this._mode=t.event.button===Mh[this.rotateMouseButton]?"rotate":t.event.button===Mh[this.panMouseButton]?"pan":"",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=t.offsetX,this._mouseY=t.offsetY)},_mouseMoveHandler:function(t){if(!(t.target&&t.target.__isGLToZRProxy||this._isAnimating())){var a=bh(this.panSensitivity),u=bh(this.rotateSensitivity);"rotate"===this._mode?(this._rotateVelocity.y=(t.offsetX-this._mouseX)/this.zr.getHeight()*2*u[0],this._rotateVelocity.x=(t.offsetY-this._mouseY)/this.zr.getWidth()*2*u[1]):"pan"===this._mode&&(this._panVelocity.x=(t.offsetX-this._mouseX)/this.zr.getWidth()*a[0]*400,this._panVelocity.y=(-t.offsetY+this._mouseY)/this.zr.getHeight()*a[1]*400),this._mouseX=t.offsetX,this._mouseY=t.offsetY,t.event.preventDefault()}},_mouseWheelHandler:function(t){this._isAnimating()||this._zoomHandler(t,t.event.wheelDelta||-t.event.detail)},_pinchHandler:function(t){this._isAnimating()||(this._zoomHandler(t,t.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(t,a){var d;0!==a&&(this.viewGL&&!this.viewGL.containPoint(t.offsetX,t.offsetY)||(d="perspective"===this._projection?Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(a>0?-1:1)*d*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&"rotate"===this._mode&&this._startCountingStill(),t.event.preventDefault()))},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return"right"===this.rotateMouseButton||"right"===this.panMouseButton},_contextMenuHandler:function(t){this._isRightMouseButtonUsed()&&t.preventDefault()},_addAnimator:function(t){var a=this._animators;return a.push(t),t.done(function(){var u=a.indexOf(t);u>=0&&a.splice(u,1)}),t}});Object.defineProperty(nc.prototype,"autoRotate",{get:function(t){return this._autoRotate},set:function(t){this._autoRotate=t,this._rotating=t}});const _l=nc,ml={convertToDynamicArray:function(t){t&&this.resetOffset();var a=this.attributes;for(var u in a)a[u].value=t||!a[u].value?[]:Array.prototype.slice.call(a[u].value);this.indices=t||!this.indices?[]:Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var t=this.attributes;for(var a in t)t[a].value=t[a].value&&t[a].value.length>0?new Float32Array(t[a].value):null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},gi={vec2:we,vec3:he,vec4:Mr,mat2:fi,mat2d:vi,mat3:un,mat4:gr,quat:tn};var yl=gi.vec3,Ph=[[0,0],[1,1]],ac=gn.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new gn.Attribute("position","float",3,"POSITION"),positionPrev:new gn.Attribute("positionPrev","float",3),positionNext:new gn.Attribute("positionNext","float",3),prevPositionPrev:new gn.Attribute("prevPositionPrev","float",3),prevPosition:new gn.Attribute("prevPosition","float",3),prevPositionNext:new gn.Attribute("prevPositionNext","float",3),offset:new gn.Attribute("offset","float",1),color:new gn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var a=this.attributes;this.vertexCount!==t&&(a.position.init(t),a.color.init(t),this.useNativeLine||(a.positionPrev.init(t),a.positionNext.init(t),a.offset.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(this.indices=0===t?null:this.vertexCount>65535?new Uint32Array(3*t):new Uint16Array(3*t))},_getCubicCurveApproxStep:function(t,a,u,h){return 1/(yl.dist(t,a)+yl.dist(u,a)+yl.dist(h,u)+1)*this.segmentScale},getCubicCurveVertexCount:function(t,a,u,h){var d=this._getCubicCurveApproxStep(t,a,u,h),g=Math.ceil(1/d);return this.useNativeLine?2*g:2*g+2},getCubicCurveTriangleCount:function(t,a,u,h){var d=this._getCubicCurveApproxStep(t,a,u,h),g=Math.ceil(1/d);return this.useNativeLine?0:2*g},getLineVertexCount:function(){return this.getPolylineVertexCount(Ph)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(Ph)},getPolylineVertexCount:function(t){var a;return a="number"==typeof t?t:"number"!=typeof t[0]?t.length:t.length/3,this.useNativeLine?2*(a-1):2*(a-1)+2},getPolylineTriangleCount:function(t){var a;return a="number"==typeof t?t:"number"!=typeof t[0]?t.length:t.length/3,this.useNativeLine?0:2*Math.max(a-1,0)},addCubicCurve:function(t,a,u,h,d,g){null==g&&(g=1);var y=t[0],S=t[1],b=t[2],L=a[0],W=a[1],ut=a[2],bt=u[0],Ct=u[1],Et=u[2],Dt=h[0],zt=h[1],$t=h[2],ae=this._getCubicCurveApproxStep(t,a,u,h),Jt=ae*ae,qt=Jt*ae,me=3*ae,ge=3*Jt,Ge=6*Jt,Oe=6*qt,We=y-2*L+bt,ar=S-2*W+Ct,Ke=b-2*ut+Et,lr=3*(L-bt)-y+Dt,vr=3*(W-Ct)-S+zt,nr=3*(ut-Et)-b+$t,Sr=y,Er=S,Wr=b,Tr=(L-y)*me+We*ge+lr*qt,wn=(W-S)*me+ar*ge+vr*qt,Gr=(ut-b)*me+Ke*ge+nr*qt,Kn=We*Ge+lr*Oe,Dn=ar*Ge+vr*Oe,ri=Ke*Ge+nr*Oe,ni=lr*Oe,xn=vr*Oe,Zi=nr*Oe,mi=0,Ei=0,ua=Math.ceil(1/ae),Yi=new Float32Array(3*(ua+1)),Fi=(Yi=[],0);for(Ei=0;Ei<ua+1;Ei++)Yi[Fi++]=Sr,Yi[Fi++]=Er,Yi[Fi++]=Wr,Sr+=Tr,Er+=wn,Wr+=Gr,Tr+=Kn,wn+=Dn,Gr+=ri,Kn+=ni,Dn+=xn,ri+=Zi,(mi+=ae)>1&&(Sr=Tr>0?Math.min(Sr,Dt):Math.max(Sr,Dt),Er=wn>0?Math.min(Er,zt):Math.max(Er,zt),Wr=Gr>0?Math.min(Wr,$t):Math.max(Wr,$t));return this.addPolyline(Yi,d,g)},addLine:function(t,a,u,h){return this.addPolyline([t,a],u,h)},addPolyline:function(t,a,u,h,d){if(t.length){var g="number"!=typeof t[0];if(null==d&&(d=g?t.length:t.length/3),!(d<2)){null==h&&(h=0),null==u&&(u=1),this._itemVertexOffsets.push(this._vertexOffset);var Et,Dt,y=(g="number"!=typeof t[0])?"number"!=typeof a[0]:a.length/4===d,S=this.attributes.position,b=this.attributes.positionPrev,L=this.attributes.positionNext,W=this.attributes.color,ut=this.attributes.offset,bt=this.indices,Ct=this._vertexOffset;u=Math.max(u,.01);for(var zt=h;zt<d;zt++){if(g)Et=t[zt],Dt=y?a[zt]:a;else{var $t=3*zt;if((Et=Et||[])[0]=t[$t],Et[1]=t[$t+1],Et[2]=t[$t+2],y){var ae=4*zt;(Dt=Dt||[])[0]=a[ae],Dt[1]=a[ae+1],Dt[2]=a[ae+2],Dt[3]=a[ae+3]}else Dt=a}if(this.useNativeLine?zt>1&&(S.copy(Ct,Ct-1),W.copy(Ct,Ct-1),Ct++):(zt<d-1&&(b.set(Ct+2,Et),b.set(Ct+3,Et)),zt>0&&(L.set(Ct-2,Et),L.set(Ct-1,Et)),S.set(Ct,Et),S.set(Ct+1,Et),W.set(Ct,Dt),W.set(Ct+1,Dt),ut.set(Ct,u/2),ut.set(Ct+1,-u/2),Ct+=2),this.useNativeLine)W.set(Ct,Dt),S.set(Ct,Et),Ct++;else if(zt>0){var Jt=3*this._triangleOffset;(bt=this.indices)[Jt]=Ct-4,bt[Jt+1]=Ct-3,bt[Jt+2]=Ct-2,bt[Jt+3]=Ct-3,bt[Jt+4]=Ct-1,bt[Jt+5]=Ct-2,this._triangleOffset+=2}}if(!this.useNativeLine){var qt=this._vertexOffset,me=this._vertexOffset+2*d;b.copy(qt,qt+2),b.copy(qt+1,qt+3),L.copy(me-1,me-3),L.copy(me-2,me-4)}return this._vertexOffset=Ct,this._vertexOffset}}},setItemColor:function(t,a){for(var h=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,d=this._itemVertexOffsets[t];d<h;d++)this.attributes.color.set(d,a);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});V.D5.defaults(ac.prototype,ml);const Zo=ac;function fu(t,a,u,h,d,g,y){this._zr=t,this._x=0,this._y=0,this._rowHeight=0,this.width=h,this.height=d,this.offsetX=a,this.offsetY=u,this.dpr=y,this.gap=g}function oc(t){(t=t||{}).width=t.width||512,t.height=t.height||512,t.devicePixelRatio=t.devicePixelRatio||1,t.gap=t.gap??2;var a=document.createElement("canvas");a.width=t.width*t.devicePixelRatio,a.height=t.height*t.devicePixelRatio,this._canvas=a,this._texture=new an({image:a,flipY:!1});var u=this;this._zr=V.x_.init(a);var h=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){h.call(this),u._texture.dirty(),u.onupdate&&u.onupdate()},this._dpr=t.devicePixelRatio,this._coords={},this.onupdate=t.onupdate,this._gap=t.gap,this._textureAtlasNodes=[new fu(this._zr,0,0,t.width,t.height,this._gap,this._dpr)],this._nodeWidth=t.width,this._nodeHeight=t.height,this._currentNodeIdx=0}fu.prototype={constructor:fu,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(t,a,u){var h=t.getBoundingRect();null==a&&(a=h.width),null==u&&(u=h.height),this._fitElement(t,a*=this.dpr,u*=this.dpr);var d=this._x,g=this._y,y=this.width*this.dpr,S=this.height*this.dpr,b=this.gap;if(d+a+b>y&&(d=this._x=0,this._y=g+=this._rowHeight+b,this._rowHeight=0),this._x+=a+b,this._rowHeight=Math.max(this._rowHeight,u),g+u+b>S)return null;t.x+=this.offsetX*this.dpr+d,t.y+=this.offsetY*this.dpr+g,this._zr.add(t);var L=[this.offsetX/this.width,this.offsetY/this.height];return[[d/y+L[0],g/S+L[1]],[(d+a)/y+L[0],(g+u)/S+L[1]]]},_fitElement:function(t,a,u){var h=t.getBoundingRect(),d=a/h.width,g=u/h.height;t.x=-h.x*d,t.y=-h.y*g,t.scaleX=d,t.scaleY=g,t.update()}},oc.prototype={clear:function(){for(var t=0;t<this._textureAtlasNodes.length;t++)this._textureAtlasNodes[t].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var t=4096/this._dpr,u=this._textureAtlasNodes.length,h=u*this._nodeWidth%t,d=Math.floor(u*this._nodeWidth/t)*this._nodeHeight;if(!(d>=t)){var g=(h+this._nodeWidth)*this._dpr,y=(d+this._nodeHeight)*this._dpr;try{this._zr.resize({width:g,height:y})}catch{this._canvas.width=g,this._canvas.height=y}var S=new fu(this._zr,h,d,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(S),S}},add:function(t,a,u){if(this._coords[t.id])return this._coords[t.id];var h=this._getCurrentNode().add(t,a,u);if(!h){var d=this._expand();if(!d)return;h=d.add(t,a,u)}return this._coords[t.id]=h,h},getCoordsScale:function(){var t=this._dpr;return[this._nodeWidth/this._canvas.width*t,this._nodeHeight/this._canvas.height*t]},getCoords:function(t){return this._coords[t]},dispose:function(){this._zr.dispose()}};const sc=oc;function du(){}du.prototype={constructor:du,setScene:function(t){this._scene=t,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(t){this._lightRoot=t,this.mainLight=new ce.DirectionalLight({shadowBias:.005}),this.ambientLight=new ce.AmbientLight,t.add(this.mainLight),t.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(t){var a=this.mainLight,u=this.ambientLight,h=t.getModel("light"),d=h.getModel("main"),g=h.getModel("ambient");a.intensity=d.get("intensity"),u.intensity=g.get("intensity"),a.color=ce.parseColor(d.get("color")).slice(0,3),u.color=ce.parseColor(g.get("color")).slice(0,3);var y=d.get("alpha")||0,S=d.get("beta")||0;a.position.setArray(ce.directionFromAlphaBeta(y,S)),a.lookAt(ce.Vector3.ZERO),a.castShadow=d.get("shadow"),a.shadowResolution=ce.getShadowResolution(d.get("shadowQuality"))},updateAmbientCubemap:function(t,a,u){var h=a.getModel("light.ambientCubemap"),d=h.get("texture");if(d){this._cubemapLightsCache=this._cubemapLightsCache||{};var g=this._cubemapLightsCache[d];if(!g){var y=this;g=this._cubemapLightsCache[d]=ce.createAmbientCubemap(h.option,t,u,function(){y._isSkyboxFromAmbientCubemap&&y._skybox.setEnvironmentMap(g.specular.cubemap),u.getZr().refresh()})}this._lightRoot.add(g.diffuse),this._lightRoot.add(g.specular),this._currentCubemapLights=g}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(t,a,u){var h=a.get("environment"),d=this,y=function g(){return d._skybox=d._skybox||new xr,d._skybox}();if(h&&"none"!==h)if("auto"===h)this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights?(y.setEnvironmentMap(this._currentCubemapLights.specular.cubemap),this._scene&&y.attachScene(this._scene),y.material.set("lod",3)):this._skybox&&this._skybox.detachScene();else if("object"==typeof h&&h.colorStops||"string"==typeof h&&V.$_.parse(h)){this._isSkyboxFromAmbientCubemap=!1;var b=new ce.Texture2D({anisotropic:8,flipY:!1});y.setEnvironmentMap(b);var L=b.image=document.createElement("canvas");L.width=L.height=16;var W=L.getContext("2d"),ut=new V.Q.Rect({shape:{x:0,y:0,width:16,height:16},style:{fill:h}});V.z$(W,ut),y.attachScene(this._scene)}else this._isSkyboxFromAmbientCubemap=!1,b=ce.loadTexture(h,u,{anisotropic:8,flipY:!1}),y.setEnvironmentMap(b),y.attachScene(this._scene);else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var bt=a.coordinateSystem;if(this._skybox)if(!bt||!bt.viewGL||"auto"===h||h.match&&h.match(/.hdr$/))this._skybox.material.undefine("fragment","SRGB_DECODE");else{var Ct=bt.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[Ct]("fragment","SRGB_DECODE")}}};const Fs=du;var hs=gi.vec3,Ah=gn.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new gn.Attribute("position","float",3,"POSITION"),normal:new gn.Attribute("normal","float",3,"NORMAL"),color:new gn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(t){var a=this.attributes,u=this.getQuadVertexCount()*t,h=this.getQuadTriangleCount()*t;this.vertexCount!==u&&(a.position.init(u),a.normal.init(u),a.color.init(u)),this.triangleCount!==h&&(this.indices=u>65535?new Uint32Array(3*h):new Uint16Array(3*h))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var t=hs.create(),a=hs.create(),u=hs.create(),h=[0,3,1,3,2,1];return function(d,g){var y=this.attributes.position,S=this.attributes.normal,b=this.attributes.color;hs.sub(t,d[1],d[0]),hs.sub(a,d[2],d[1]),hs.cross(u,t,a),hs.normalize(u,u);for(var L=0;L<4;L++)y.set(this._vertexOffset+L,d[L]),b.set(this._vertexOffset+L,g),S.set(this._vertexOffset+L,u);var W=3*this._faceOffset;for(L=0;L<6;L++)this.indices[W+L]=h[L]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});V.D5.defaults(Ah.prototype,ml);const ad=Ah;var lc=pn.firstNotNull,uc={x:0,y:2,z:1};function co(t,a,u){this.rootNode=new ce.Node;var h=new ce.Mesh({geometry:new Zo({useNativeLine:!1}),material:a,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),d=new ce.Mesh({geometry:new ad,material:u,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(d),this.rootNode.add(h),this.faceInfo=t,this.plane=new ce.Plane,this.linesMesh=h,this.quadsMesh=d}co.prototype.update=function(t,a,u){var h=t.coordinateSystem,d=[h.getAxis(this.faceInfo[0]),h.getAxis(this.faceInfo[1])],g=this.linesMesh.geometry,y=this.quadsMesh.geometry;g.convertToDynamicArray(!0),y.convertToDynamicArray(!0),this._updateSplitLines(g,d,t,u),this._udpateSplitAreas(y,d,t,u),g.convertToTypedArray(),y.convertToTypedArray();var S=h.getAxis(this.faceInfo[2]);!function Oh(t,a,u,h){var d=[0,0,0],g=h<0?u.getExtentMin():u.getExtentMax();d[uc[u.dim]]=g,t.position.setArray(d),t.rotation.identity(),a.distance=-Math.abs(g),a.normal.set(0,0,0),"x"===u.dim?(t.rotation.rotateY(h*Math.PI/2),a.normal.x=-h):"z"===u.dim?(t.rotation.rotateX(-h*Math.PI/2),a.normal.y=-h):(h>0&&t.rotation.rotateY(Math.PI),a.normal.z=-h)}(this.rootNode,this.plane,S,this.faceInfo[3])},co.prototype._updateSplitLines=function(t,a,u,h){var d=h.getDevicePixelRatio();a.forEach(function(g,y){var S=g.model,b=a[1-y].getExtent();if(!g.scale.isBlank()){var L=S.getModel("splitLine",u.getModel("splitLine"));if(L.get("show")){var W=L.getModel("lineStyle"),ut=W.get("color"),bt=lc(W.get("opacity"),1),Ct=lc(W.get("width"),1);ut=V.D5.isArray(ut)?ut:[ut];for(var Et=g.getTicksCoords({tickModel:L}),Dt=0,zt=0;zt<Et.length;zt++){var $t=Et[zt].coord,ae=ce.parseColor(ut[Dt%ut.length]);ae[3]*=bt;var Jt=[0,0,0],qt=[0,0,0];Jt[y]=qt[y]=$t,Jt[1-y]=b[0],qt[1-y]=b[1],t.addLine(Jt,qt,ae,Ct*d),Dt++}}}})},co.prototype._udpateSplitAreas=function(t,a,u,h){a.forEach(function(d,g){var y=d.model,S=a[1-g].getExtent();if(!d.scale.isBlank()){var b=y.getModel("splitArea",u.getModel("splitArea"));if(b.get("show")){var L=b.getModel("areaStyle"),W=L.get("color"),ut=lc(L.get("opacity"),1);W=V.D5.isArray(W)?W:[W];for(var bt=d.getTicksCoords({tickModel:b,clamp:!0}),Ct=0,Et=[0,0,0],Dt=[0,0,0],zt=0;zt<bt.length;zt++){var ae=[0,0,0],Jt=[0,0,0];if(ae[g]=Jt[g]=bt[zt].coord,ae[1-g]=S[0],Jt[1-g]=S[1],0!==zt){var qt=ce.parseColor(W[Ct%W.length]);qt[3]*=ut,t.addQuad([Et,ae,Jt,Dt],qt),Et=ae,Dt=Jt,Ct++}else Et=ae,Dt=Jt}}}})};const fs=co;var ds=[0,1,2,0,2,3],Eh=gn.extend(function(){return{attributes:{position:new gn.Attribute("position","float",3,"POSITION"),texcoord:new gn.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new gn.Attribute("offset","float",2),color:new gn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(t){this._spriteCount=t;var a=4*t,u=2*t;this.vertexCount!==a&&(this.attributes.position.init(a),this.attributes.offset.init(a),this.attributes.color.init(a)),this.triangleCount!==u&&(this.indices=a>65535?new Uint32Array(3*u):new Uint16Array(3*u))},setSpriteAlign:function(t,a,u,h,d){var g,y,S,b;switch(null==u&&(u="left"),null==h&&(h="top"),d=d||0,u){case"left":g=d,S=a[0]+d;break;case"center":case"middle":g=-a[0]/2,S=a[0]/2;break;case"right":g=-a[0]-d,S=-d}switch(h){case"bottom":y=d,b=a[1]+d;break;case"middle":y=-a[1]/2,b=a[1]/2;break;case"top":y=-a[1]-d,b=-d}var L=4*t,W=this.attributes.offset;W.set(L,[g,b]),W.set(L+1,[S,b]),W.set(L+2,[S,y]),W.set(L+3,[g,y])},addSprite:function(t,a,u,h,d,g){var y=this._vertexOffset;this.setSprite(this._vertexOffset/4,t,a,u,h,d,g);for(var S=0;S<ds.length;S++)this.indices[3*this._faceOffset+S]=ds[S]+y;return this._faceOffset+=2,this._vertexOffset+=4,y/4},setSprite:function(t,a,u,h,d,g,y){for(var S=4*t,b=this.attributes,L=0;L<4;L++)b.position.set(S+L,a);var W=b.texcoord;W.set(S,[h[0][0],h[0][1]]),W.set(S+1,[h[1][0],h[0][1]]),W.set(S+2,[h[1][0],h[1][1]]),W.set(S+3,[h[0][0],h[1][1]]),this.setSpriteAlign(t,u,d,g,y)}});V.D5.defaults(Eh.prototype,ml);const od=Eh;ce.Shader.import("@export ecgl.labels.vertex\n\nattribute vec3 position: POSITION;\nattribute vec2 texcoord: TEXCOORD_0;\nattribute vec2 offset;\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n vec4 proj = worldViewProjection * vec4(position, 1.0);\n\n vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;\n\n screen += offset;\n\n proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);\n gl_Position = proj;\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n v_Texcoord = texcoord;\n}\n@end\n\n\n@export ecgl.labels.fragment\n\nuniform vec3 color : [1.0, 1.0, 1.0];\nuniform float alpha : 1.0;\nuniform sampler2D textureAtlas;\nuniform vec2 uvScale: [1.0, 1.0];\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\nvarying float v_Miter;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n#endif\n}\n\n@end");const cc=ce.Mesh.extend(function(){return{geometry:new od({dynamic:!0}),material:new ce.Material({shader:ce.createShader("ecgl.labels"),transparent:!0,depthMask:!1}),culling:!1,castShadow:!1,ignorePicking:!0}});var ps=pn.firstNotNull,vs={x:0,y:2,z:1};function hc(t,a){var u=new ce.Mesh({geometry:new Zo({useNativeLine:!1}),material:a,castShadow:!1,ignorePicking:!0,renderOrder:2}),h=new cc;h.material.depthMask=!1;var d=new ce.Node;d.add(u),d.add(h),this.rootNode=d,this.dim=t,this.linesMesh=u,this.labelsMesh=h,this.axisLineCoords=null,this.labelElements=[]}var fc={x:"y",y:"x",z:"y"};hc.prototype.update=function(t,a,u){var d=t.coordinateSystem.getAxis(this.dim),g=this.linesMesh.geometry,y=this.labelsMesh.geometry;g.convertToDynamicArray(!0),y.convertToDynamicArray(!0);var S=d.model,b=d.getExtent(),Ke=u.getDevicePixelRatio(),L=S.getModel("axisLine",t.getModel("axisLine")),W=S.getModel("axisTick",t.getModel("axisTick")),ut=S.getModel("axisLabel",t.getModel("axisLabel")),bt=L.get("lineStyle.color");if(L.get("show")){var Ct=L.getModel("lineStyle"),Dt=[0,0,0];(Et=[0,0,0])[zt=vs[d.dim]]=b[0],Dt[zt]=b[1],this.axisLineCoords=[Et,Dt];var $t=ce.parseColor(bt),ae=ps(Ct.get("width"),1),Jt=ps(Ct.get("opacity"),1);$t[3]*=Jt,g.addLine(Et,Dt,$t,ae*Ke)}if(W.get("show")){var qt=W.getModel("lineStyle"),me=ce.parseColor(ps(qt.get("color"),bt));ae=ps(qt.get("width"),1),me[3]*=ps(qt.get("opacity"),1);for(var ge=d.getTicksCoords(),Ge=W.get("length"),Oe=0;Oe<ge.length;Oe++){var Et,ar=vs[fc[d.dim]];(Et=[0,0,0])[zt=vs[d.dim]]=(Dt=[0,0,0])[zt]=We=ge[Oe].coord,Dt[ar]=Ge,g.addLine(Et,Dt,me,ae*Ke)}}if(this.labelElements=[],Ke=u.getDevicePixelRatio(),ut.get("show")){ge=d.getTicksCoords();var lr=S.get("data"),vr=ut.get("margin"),nr=d.getViewLabels();for(Oe=0;Oe<nr.length;Oe++){var Sr=nr[Oe].tickValue,Er=nr[Oe].formattedLabel,Wr=nr[Oe].rawLabel,We=d.dataToCoord(Sr);ar=vs[fc[d.dim]],(Tr=[0,0,0])[zt=vs[d.dim]]=Tr[zt]=We,Tr[ar]=vr;var wn=ut;lr&&lr[Sr]&&lr[Sr].textStyle&&(wn=new V.Hn(lr[Sr].textStyle,ut,S.ecModel));var Gr=ps(wn.get("color"),bt),Kn=new V.Q.Text({style:(0,gl.Lr)(wn,{text:Er,fill:"function"==typeof Gr?Gr("category"===d.type?Wr:"value"===d.type?Sr+"":Sr,Oe):Gr,verticalAlign:"top",align:"left"})}),Dn=a.add(Kn),ri=Kn.getBoundingRect();y.addSprite(Tr,[ri.width*Ke,ri.height*Ke],Dn),this.labelElements.push(Kn)}}if(S.get("name")){var ni=S.getModel("nameTextStyle"),Tr=[0,0,0],zt=vs[d.dim],xn=(ar=vs[fc[d.dim]],ps(ni.get("color"),bt)),Zi=ni.get("borderColor");ae=ni.get("borderWidth"),Tr[zt]=Tr[zt]=(b[0]+b[1])/2,Tr[ar]=S.get("nameGap"),Kn=new V.Q.Text({style:(0,gl.Lr)(ni,{text:S.get("name"),fill:xn,stroke:Zi,lineWidth:ae})}),Dn=a.add(Kn),ri=Kn.getBoundingRect(),y.addSprite(Tr,[ri.width*Ke,ri.height*Ke],Dn),Kn.__idx=this.labelElements.length,this.nameLabelElement=Kn}this.labelsMesh.material.set("textureAtlas",a.getTexture()),this.labelsMesh.material.set("uvScale",a.getCoordsScale()),g.convertToTypedArray(),y.convertToTypedArray()},hc.prototype.setSpriteAlign=function(t,a,u){for(var h=u.getDevicePixelRatio(),d=this.labelsMesh.geometry,g=0;g<this.labelElements.length;g++){var S=this.labelElements[g].getBoundingRect();d.setSpriteAlign(g,[S.width*h,S.height*h],t,a)}var b=this.nameLabelElement;b&&(S=b.getBoundingRect(),d.setSpriteAlign(b.__idx,[S.width*h,S.height*h],t,a),d.dirty()),this.textAlign=t,this.textVerticalAlign=a};const xl=hc,Ia="@export ecgl.lines3D.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position: POSITION;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(position, 1.0);\n v_Color = a_Color;\n}\n\n@end\n\n@export ecgl.lines3D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n}\n@end\n\n\n\n@export ecgl.lines3D.clipNear\n\nvec4 clipNear(vec4 p1, vec4 p2) {\n float n = (p1.w - near) / (p1.w - p2.w);\n return vec4(mix(p1.xy, p2.xy, n), -near, near);\n}\n\n@end\n\n@export ecgl.lines3D.expandLine\n#ifdef VERTEX_ANIMATION\n vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);\n vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);\n vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);\n#else\n vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);\n vec4 currProj = worldViewProjection * vec4(position, 1.0);\n vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);\n#endif\n\n if (currProj.w < 0.0) {\n if (nextProj.w > 0.0) {\n currProj = clipNear(currProj, nextProj);\n }\n else if (prevProj.w > 0.0) {\n currProj = clipNear(currProj, prevProj);\n }\n }\n\n vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;\n vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;\n vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;\n\n vec2 dir;\n float len = offset;\n if (position == positionPrev) {\n dir = normalize(nextScreen - currScreen);\n }\n else if (position == positionNext) {\n dir = normalize(currScreen - prevScreen);\n }\n else {\n vec2 dirA = normalize(currScreen - prevScreen);\n vec2 dirB = normalize(nextScreen - currScreen);\n\n vec2 tanget = normalize(dirA + dirB);\n\n float miter = 1.0 / max(dot(tanget, dirA), 0.5);\n len *= miter;\n dir = tanget;\n }\n\n dir = vec2(-dir.y, dir.x) * len;\n currScreen += dir;\n\n currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);\n@end\n\n\n@export ecgl.meshLines3D.vertex\n\nattribute vec3 position: POSITION;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute float offset;\nattribute vec4 a_Color : COLOR;\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute vec3 prevPositionPrev;\nattribute vec3 prevPositionNext;\nuniform float percent : 1.0;\n#endif\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\nuniform float near : NEAR;\n\nvarying vec4 v_Color;\n\n@import ecgl.common.wireframe.vertexHeader\n\n@import ecgl.lines3D.clipNear\n\nvoid main()\n{\n @import ecgl.lines3D.expandLine\n\n gl_Position = currProj;\n\n v_Color = a_Color;\n\n @import ecgl.common.wireframe.vertexMain\n}\n@end\n\n\n@export ecgl.meshLines3D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end";var Sl=pn.firstNotNull;ce.Shader.import(Ia);var Ma={x:0,y:2,z:1};const dc=V.Ir.extend({type:"grid3D",__ecgl__:!0,init:function(t,a){var d=new ce.Material({shader:ce.createShader("ecgl.color"),depthMask:!1,transparent:!0}),g=new ce.Material({shader:ce.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});d.define("fragment","DOUBLE_SIDED"),d.define("both","VERTEX_COLOR"),this.groupGL=new ce.Node,this._control=new _l({zr:a.getZr()}),this._control.init(),this._faces=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]].map(function(S){var b=new fs(S,g,d);return this.groupGL.add(b.rootNode),b},this),this._axes=["x","y","z"].map(function(S){var b=new xl(S,g);return this.groupGL.add(b.rootNode),b},this);var y=a.getDevicePixelRatio();this._axisLabelSurface=new sc({width:256,height:256,devicePixelRatio:y}),this._axisLabelSurface.onupdate=function(){a.getZr().refresh()},this._axisPointerLineMesh=new ce.Mesh({geometry:new Zo({useNativeLine:!1}),material:g,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new sc({width:128,height:128,devicePixelRatio:y}),this._axisPointerLabelsMesh=new cc({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new ce.Node,this._sceneHelper=new Fs,this._sceneHelper.initLight(this._lightRoot)},render:function(t,a,u){this._model=t,this._api=u;var h=t.coordinateSystem;h.viewGL.add(this._lightRoot),t.get("show")?h.viewGL.add(this.groupGL):h.viewGL.remove(this.groupGL);var d=this._control;d.setViewGL(h.viewGL);var g=t.getModel("viewControl");d.setFromViewControlModel(g,0),this._axisLabelSurface.clear(),d.off("update"),t.get("show")&&(this._faces.forEach(function(y){y.update(t,a,u)},this),this._axes.forEach(function(y){y.update(t,this._axisLabelSurface,u)},this)),d.on("update",this._onCameraChange.bind(this,t,u),this),this._sceneHelper.setScene(h.viewGL.scene),this._sceneHelper.updateLight(t),h.viewGL.setPostEffect(t.getModel("postEffect"),u),h.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._initMouseHandler(t)},afterRender:function(t,a,u,h){var d=h.renderer;this._sceneHelper.updateAmbientCubemap(d,t,u),this._sceneHelper.updateSkybox(d,t,u)},showAxisPointer:function(t,a,u,h){this._doShowAxisPointer(),this._updateAxisPointer(h.value)},hideAxisPointer:function(t,a,u,h){this._doHideAxisPointer()},_initMouseHandler:function(t){var u=t.coordinateSystem.viewGL;t.get("show")&&t.get("axisPointer.show")?u.on("mousemove",this._updateAxisPointerOnMousePosition,this):u.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(t){if(!t.target){for(var g,u=this._model.coordinateSystem,h=u.viewGL,d=h.castRay(t.offsetX,t.offsetY,new ce.Ray),y=0;y<this._faces.length;y++){var S=this._faces[y];if(!S.rootNode.invisible){S.plane.normal.dot(h.camera.worldTransform.z)<0&&S.plane.normal.negate();var b=d.intersectPlane(S.plane);if(b){var L=u.getAxis(S.faceInfo[0]),W=u.getAxis(S.faceInfo[1]),bt=Ma[S.faceInfo[1]];L.contain(b.array[Ma[S.faceInfo[0]]])&&W.contain(b.array[bt])&&(g=b)}}}if(g){var Ct=u.pointToData(g.array,[],!0);this._updateAxisPointer(Ct),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(t,a){t.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var u=this._control;a.dispatchAction({type:"grid3DChangeCamera",alpha:u.getAlpha(),beta:u.getBeta(),distance:u.getDistance(),center:u.getCenter(),from:this.uid,grid3DId:t.id})},_updateFaceVisibility:function(){var t=this._control.getCamera(),a=new ce.Vector3;t.update();for(var u=0;u<this._faces.length/2;u++){for(var h=[],d=0;d<2;d++)this._faces[2*u+d].rootNode.getWorldPosition(a),a.transformMat4(t.viewMatrix),h[d]=a.z;var y=h[0]>h[1]?0:1,b=this._faces[2*u+1-y];this._faces[2*u+y].rootNode.invisible=!0,b.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var t=this._model.coordinateSystem,a=t.getAxis("x"),u=t.getAxis("y"),h=t.getAxis("z"),d=h.getExtentMax(),g=h.getExtentMin(),y=a.getExtentMin(),S=a.getExtentMax(),b=u.getExtentMax(),L=u.getExtentMin(),W=this._axes[0].rootNode,ut=this._axes[1].rootNode,bt=this._axes[2].rootNode,Ct=this._faces,Et=Ct[4].rootNode.invisible?L:b,Dt=Ct[2].rootNode.invisible?d:g,zt=Ct[0].rootNode.invisible?y:S,$t=Ct[2].rootNode.invisible?d:g,ae=Ct[0].rootNode.invisible?S:y,Jt=Ct[4].rootNode.invisible?L:b;W.rotation.identity(),ut.rotation.identity(),bt.rotation.identity(),Ct[4].rootNode.invisible&&(this._axes[0].flipped=!0,W.rotation.rotateX(Math.PI)),Ct[0].rootNode.invisible&&(this._axes[1].flipped=!0,ut.rotation.rotateZ(Math.PI)),Ct[4].rootNode.invisible&&(this._axes[2].flipped=!0,bt.rotation.rotateY(Math.PI)),W.position.set(0,Dt,Et),ut.position.set(zt,$t,0),bt.position.set(ae,0,Jt),W.update(),ut.update(),bt.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var t=this._control.getCamera(),a=[new ce.Vector4,new ce.Vector4],u=new ce.Vector4;this.groupGL.getWorldPosition(u),u.w=1,u.transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),u.x/=u.w,u.y/=u.w,this._axes.forEach(function(h){for(var d=h.axisLineCoords,y=0;y<a.length;y++)a[y].setArray(d[y]),a[y].w=1,a[y].transformMat4(h.rootNode.worldTransform).transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),a[y].x/=a[y].w,a[y].y/=a[y].w;var ut,bt,L=(a[1].x+a[0].x)/2,W=(a[1].y+a[0].y)/2;Math.abs((a[1].y-a[0].y)/(a[1].x-a[0].x))<.5?(ut="center",bt=W>u.y?"bottom":"top"):(bt="middle",ut=L>u.x?"left":"right"),h.setSpriteAlign(ut,bt,this._api)},this)},_doShowAxisPointer:function(){!this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(t){var a=this._model.coordinateSystem,u=a.dataToPoint(t),d=this._axisPointerLineMesh.geometry,g=this._model.getModel("axisPointer"),y=this._api.getDevicePixelRatio();function S(Oe){return pn.firstNotNull(Oe.model.get("axisPointer.show"),g.get("show"))}function b(Oe){var ar=Oe.model.getModel("axisPointer",g).getModel("lineStyle"),Ke=ce.parseColor(ar.get("color")),lr=Sl(ar.get("width"),1),vr=Sl(ar.get("opacity"),1);return Ke[3]*=vr,{color:Ke,lineWidth:lr}}d.convertToDynamicArray(!0);for(var L=0;L<this._faces.length;L++){var W=this._faces[L];if(!W.rootNode.invisible){for(var ut=W.faceInfo,bt=ut[3]<0?a.getAxis(ut[2]).getExtentMin():a.getAxis(ut[2]).getExtentMax(),Ct=Ma[ut[2]],Et=0;Et<2;Et++){var Dt=ut[Et],zt=ut[1-Et],$t=a.getAxis(Dt),ae=a.getAxis(zt);if(S($t)){var me=Ma[Dt],ge=Ma[zt];(Jt=[0,0,0])[me]=(qt=[0,0,0])[me]=u[me],Jt[Ct]=qt[Ct]=bt,Jt[ge]=ae.getExtentMin(),qt[ge]=ae.getExtentMax();var Ge=b($t);d.addLine(Jt,qt,Ge.color,Ge.lineWidth*y)}}if(S(a.getAxis(ut[2]))){var qt,Jt=u.slice();(qt=u.slice())[Ct]=bt,Ge=b(a.getAxis(ut[2])),d.addLine(Jt,qt,Ge.color,Ge.lineWidth*y)}}}d.convertToTypedArray(),this._updateAxisPointerLabelsMesh(t),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(t){var a=this._model,u=this._axisPointerLabelsMesh,h=this._axisPointerLabelsSurface,d=a.coordinateSystem,g=a.getModel("axisPointer");u.geometry.convertToDynamicArray(!0),h.clear();var y={x:"y",y:"x",z:"y"};this._axes.forEach(function(S,b){var L=d.getAxis(S.dim),ut=L.model.getModel("axisPointer",g),bt=ut.getModel("label"),Ct=ut.get("lineStyle.color");if(bt.get("show")&&ut.get("show")){var Et=t[b],Dt=bt.get("formatter"),zt=L.scale.getLabel({value:Et});if(null!=Dt)zt=Dt(zt,t);else if("interval"===L.scale.type||"log"===L.scale.type){var $t=V.Rx.getPrecisionSafe(L.scale.getTicks()[0]);zt=Et.toFixed($t+2)}var ae=bt.get("color"),Jt=new V.Q.Text({style:(0,gl.Lr)(bt,{text:zt,fill:ae||Ct,align:"left",verticalAlign:"top"})}),qt=h.add(Jt),me=Jt.getBoundingRect(),ge=this._api.getDevicePixelRatio(),Ge=S.rootNode.position.toArray();Ge[Ma[y[S.dim]]]+=(S.flipped?-1:1)*bt.get("margin"),Ge[Ma[S.dim]]=L.dataToCoord(t[b]),u.geometry.addSprite(Ge,[me.width*ge,me.height*ge],qt,S.textAlign,S.textVerticalAlign)}},this),h.getZr().refreshImmediately(),u.material.set("uvScale",h.getCoordsScale()),u.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}});var wh=D(1491);function pu(t){wh.Z.call(this,t),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}pu.prototype={constructor:pu,model:null,containPoint:function(t){return this.getAxis("x").contain(t[0])&&this.getAxis("y").contain(t[2])&&this.getAxis("z").contain(t[1])},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])&&this.getAxis("z").containData(t[2])},dataToPoint:function(t,a,u){return(a=a||[])[0]=this.getAxis("x").dataToCoord(t[0],u),a[2]=this.getAxis("y").dataToCoord(t[1],u),a[1]=this.getAxis("z").dataToCoord(t[2],u),a},pointToData:function(t,a,u){return(a=a||[])[0]=this.getAxis("x").coordToData(t[0],u),a[1]=this.getAxis("y").coordToData(t[2],u),a[2]=this.getAxis("z").coordToData(t[1],u),a}},V.D5.inherits(pu,wh.Z);const Dh=pu;function Tl(t,a,u){V.RD.call(this,t,a,u)}Tl.prototype={constructor:Tl,getExtentMin:function(){var t=this._extent;return Math.min(t[0],t[1])},getExtentMax:function(){var t=this._extent;return Math.max(t[0],t[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}},V.D5.inherits(Tl,V.RD);const pc=Tl;var ks=D(942),vc=function(){this._pool={},this._allocatedTextures=[]};vc.prototype={constructor:vc,get:function(t){var a=_c(t);this._pool.hasOwnProperty(a)||(this._pool[a]=[]);var u=this._pool[a];if(!u.length){var h=new an(t);return this._allocatedTextures.push(h),h}return u.pop()},put:function(t){var a=_c(t);this._pool.hasOwnProperty(a)||(this._pool[a]=[]),this._pool[a].push(t)},clear:function(t){for(var a=0;a<this._allocatedTextures.length;a++)this._allocatedTextures[a].dispose(t);this._pool={},this._allocatedTextures=[]}};var gc={width:512,height:512,type:5121,format:6408,wrapS:33071,wrapT:33071,minFilter:9987,magFilter:9729,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},vu=Object.keys(gc);function _c(t){w.defaultsWithPropList(t,gc,vu),function Lh(t){var a=function H(t,a){return 0==(t&t-1)&&0==(a&a-1)}(t.width,t.height);6402===t.format&&(t.useMipmap=!1),(!a||!t.useMipmap)&&(9984==t.minFilter||9986==t.minFilter?t.minFilter=9728:(9987==t.minFilter||9985==t.minFilter)&&(t.minFilter=9729)),a||(t.wrapS=33071,t.wrapT=33071)}(t);for(var a="",u=0;u<vu.length;u++)a+=t[vu[u]].toString();return a}const Lt=vc;var pt=["px","nx","py","ny","pz","nz"];function Bt(t,a,u){return"alphaMap"===u?t.material.get("diffuseMap"):"alphaCutoff"===u?t.material.isDefined("fragment","ALPHA_TEST")&&t.material.get("diffuseMap")&&t.material.get("alphaCutoff")||0:"uvRepeat"===u?t.material.get("uvRepeat"):"uvOffset"===u?t.material.get("uvOffset"):a.get(u)}function Qt(t,a){var u=t.material,h=a.material;return u.get("diffuseMap")!==h.get("diffuseMap")||(u.get("alphaCutoff")||0)!==(h.get("alphaCutoff")||0)}rr.import("@export clay.sm.depth.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nuniform vec2 uvRepeat = vec2(1.0, 1.0);\nuniform vec2 uvOffset = vec2(0.0, 0.0);\n@import clay.chunk.skinning_header\n@import clay.chunk.instancing_header\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\nvoid main(){\n vec4 P = vec4(position, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n v_ViewPosition = worldViewProjection * P;\n gl_Position = v_ViewPosition;\n v_Texcoord = texcoord * uvRepeat + uvOffset;\n}\n@end\n@export clay.sm.depth.fragment\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\nuniform float bias : 0.001;\nuniform float slopeScale : 1.0;\nuniform sampler2D alphaMap;\nuniform float alphaCutoff: 0.0;\n@import clay.util.encode_float\nvoid main(){\n float depth = v_ViewPosition.z / v_ViewPosition.w;\n if (alphaCutoff > 0.0) {\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\n discard;\n }\n }\n#ifdef USE_VSM\n depth = depth * 0.5 + 0.5;\n float moment1 = depth;\n float moment2 = depth * depth;\n #ifdef SUPPORT_STANDARD_DERIVATIVES\n float dx = dFdx(depth);\n float dy = dFdy(depth);\n moment2 += 0.25*(dx*dx+dy*dy);\n #endif\n gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);\n#else\n #ifdef SUPPORT_STANDARD_DERIVATIVES\n float dx = dFdx(depth);\n float dy = dFdy(depth);\n depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;\n #else\n depth += bias;\n #endif\n gl_FragColor = encodeFloat(depth * 0.5 + 0.5);\n#endif\n}\n@end\n@export clay.sm.debug_depth\nuniform sampler2D depthMap;\nvarying vec2 v_Texcoord;\n@import clay.util.decode_float\nvoid main() {\n vec4 tex = texture2D(depthMap, v_Texcoord);\n#ifdef USE_VSM\n gl_FragColor = vec4(tex.rgb, 1.0);\n#else\n float depth = decodeFloat(tex);\n gl_FragColor = vec4(depth, depth, depth, 1.0);\n#endif\n}\n@end\n@export clay.sm.distance.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 world : WORLD;\nattribute vec3 position : POSITION;\n@import clay.chunk.skinning_header\nvarying vec3 v_WorldPosition;\nvoid main (){\n vec4 P = vec4(position, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n gl_Position = worldViewProjection * P;\n v_WorldPosition = (world * P).xyz;\n}\n@end\n@export clay.sm.distance.fragment\nuniform vec3 lightPosition;\nuniform float range : 100;\nvarying vec3 v_WorldPosition;\n@import clay.util.encode_float\nvoid main(){\n float dist = distance(lightPosition, v_WorldPosition);\n#ifdef USE_VSM\n gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);\n#else\n dist = dist / range;\n gl_FragColor = encodeFloat(dist);\n#endif\n}\n@end\n@export clay.plugin.shadow_map_common\n@import clay.util.decode_float\nfloat tapShadowMap(sampler2D map, vec2 uv, float z){\n vec4 tex = texture2D(map, uv);\n return step(z, decodeFloat(tex) * 2.0 - 1.0);\n}\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {\n float shadowContrib = tapShadowMap(map, uv, z);\n vec2 offset = vec2(1.0 / textureSize) * scale;\n#ifdef PCF_KERNEL_SIZE\n for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{\n shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);\n }}\n return shadowContrib / float(PCF_KERNEL_SIZE + 1);\n#else\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);\n return shadowContrib / 9.0;\n#endif\n}\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize) {\n return pcf(map, uv, z, textureSize, vec2(1.0));\n}\nfloat chebyshevUpperBound(vec2 moments, float z){\n float p = 0.0;\n z = z * 0.5 + 0.5;\n if (z <= moments.x) {\n p = 1.0;\n }\n float variance = moments.y - moments.x * moments.x;\n variance = max(variance, 0.0000001);\n float mD = moments.x - z;\n float pMax = variance / (variance + mD * mD);\n pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);\n return max(p, pMax);\n}\nfloat computeShadowContrib(\n sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset\n) {\n vec4 posInLightSpace = lightVPM * vec4(position, 1.0);\n posInLightSpace.xyz /= posInLightSpace.w;\n float z = posInLightSpace.z;\n if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&\n all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){\n vec2 uv = (posInLightSpace.xy+1.0) / 2.0;\n #ifdef USE_VSM\n vec2 moments = texture2D(map, uv * scale + offset).xy;\n return chebyshevUpperBound(moments, z);\n #else\n return pcf(map, uv * scale + offset, z, textureSize, scale);\n #endif\n }\n return 1.0;\n}\nfloat computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {\n return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));\n}\nfloat computeShadowContribOmni(samplerCube map, vec3 direction, float range)\n{\n float dist = length(direction);\n vec4 shadowTex = textureCube(map, direction);\n#ifdef USE_VSM\n vec2 moments = shadowTex.xy;\n float variance = moments.y - moments.x * moments.x;\n float mD = moments.x - dist;\n float p = variance / (variance + mD * mD);\n if(moments.x + 0.001 < dist){\n return clamp(p, 0.0, 1.0);\n }else{\n return 1.0;\n }\n#else\n return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);\n#endif\n}\n@end\n@export clay.plugin.compute_shadow_map\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)\n#ifdef SPOT_LIGHT_SHADOWMAP_COUNT\nuniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\n#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT\n#if defined(SHADOW_CASCADE)\nuniform sampler2D directionalLightShadowMaps[1]:unconfigurable;\nuniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;\nuniform float directionalLightShadowMapSizes[1]:unconfigurable;\nuniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;\nuniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;\n#else\nuniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\n#endif\n#ifdef POINT_LIGHT_SHADOWMAP_COUNT\nuniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\nuniform bool shadowEnabled : true;\n#ifdef PCF_KERNEL_SIZE\nuniform vec2 pcfKernel[PCF_KERNEL_SIZE];\n#endif\n@import clay.plugin.shadow_map_common\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\nvoid computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {\n float shadowContrib;\n for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n shadowContrib = computeShadowContrib(\n spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,\n spotLightShadowMapSizes[_idx_]\n );\n shadowContribs[_idx_] = shadowContrib;\n }}\n for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n#ifdef SHADOW_CASCADE\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\n float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)\n / (gl_DepthRange.far - gl_DepthRange.near);\n float shadowContrib;\n shadowContribs[0] = 1.0;\n for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{\n if (\n depth >= shadowCascadeClipsNear[_idx_] &&\n depth <= shadowCascadeClipsFar[_idx_]\n ) {\n shadowContrib = computeShadowContrib(\n directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,\n directionalLightShadowMapSizes[0],\n vec2(1.0 / float(SHADOW_CASCADE), 1.0),\n vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)\n );\n shadowContribs[0] = shadowContrib;\n }\n }}\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#else\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\n float shadowContrib;\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n shadowContrib = computeShadowContrib(\n directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,\n directionalLightShadowMapSizes[_idx_]\n );\n shadowContribs[_idx_] = shadowContrib;\n }}\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#endif\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\nvoid computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){\n vec3 lightPosition;\n vec3 direction;\n for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n lightPosition = pointLightPosition[_idx_];\n direction = position - lightPosition;\n shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);\n }}\n for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#endif\n@end");var _e=I.extend(function(){return{softShadow:_e.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new ve,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new Lt}},function(){this._gaussianPassH=new Vn({fragment:rr.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new Vn({fragment:rr.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new Vn({fragment:rr.source("clay.sm.debug_depth")})},{render:function(t,a,u,h){u||(u=a.getMainCamera()),this.trigger("beforerender",this,t,a,u),this._renderShadowPass(t,a,u,h),this.trigger("afterrender",this,t,a,u)},renderDebug:function(t,a){t.saveClear();var u=t.viewport,h=0,g=a||u.width/4,y=g;for(var S in this.softShadow===_e.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM"),this._textures){var b=this._textures[S];t.setViewport(h,0,g*b.width/b.height,y),this._outputDepthPass.setUniform("depthMap",b),this._outputDepthPass.render(t),h+=g*b.width/b.height}t.setViewport(u),t.restoreClear()},_updateReceivers:function(t,a){if(a.receiveShadow?(this._receivers.push(a),a.material.set("shadowEnabled",1),a.material.set("pcfKernel",this.kernelPCF)):a.material.set("shadowEnabled",0),this.softShadow===_e.VSM)a.material.define("fragment","USE_VSM"),a.material.undefine("fragment","PCF_KERNEL_SIZE");else{a.material.undefine("fragment","USE_VSM");var u=this.kernelPCF;u&&u.length?a.material.define("fragment","PCF_KERNEL_SIZE",u.length/2):a.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(t,a){var u=this;a.traverse(function(g){g.isRenderable()&&u._updateReceivers(t,g)});for(var h=0;h<a.lights.length;h++){var d=a.lights[h];d.castShadow&&!d.invisible&&this._lightsCastShadow.push(d)}},_renderShadowPass:function(t,a,u,h){for(var d in this._shadowMapNumber)this._shadowMapNumber[d]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var g=t.gl;if(h||a.update(),u&&u.update(),a.updateLights(),this._update(t,a),this._lightsCastShadow.length||!this._lastRenderNotCastShadow){this._lastRenderNotCastShadow=0===this._lightsCastShadow,g.enable(g.DEPTH_TEST),g.depthMask(!0),g.disable(g.BLEND),g.clearColor(1,1,1,1);for(var bt,y=[],S=[],b=[],L=[],W=[],ut=[],Ct=0;Ct<this._lightsCastShadow.length;Ct++){var Et=this._lightsCastShadow[Ct];if("DIRECTIONAL_LIGHT"===Et.type){if(bt){console.warn("Only one direectional light supported with shadow cascade");continue}if(Et.shadowCascade>4){console.warn("Support at most 4 cascade");continue}Et.shadowCascade>1&&(bt=Et),this.renderDirectionalLightShadow(t,a,u,Et,W,L,b)}else"SPOT_LIGHT"===Et.type?this.renderSpotLightShadow(t,a,Et,S,y):"POINT_LIGHT"===Et.type&&this.renderPointLightShadow(t,a,Et,ut);this._shadowMapNumber[Et.type]++}for(var Dt in this._shadowMapNumber){var zt=this._shadowMapNumber[Dt],$t=Dt+"_SHADOWMAP_COUNT";for(Ct=0;Ct<this._receivers.length;Ct++)(Jt=this._receivers[Ct].material).fragmentDefines[$t]!==zt&&(zt>0?Jt.define("fragment",$t,zt):Jt.isDefined("fragment",$t)&&Jt.undefine("fragment",$t))}for(Ct=0;Ct<this._receivers.length;Ct++){var Jt=this._receivers[Ct].material;bt?Jt.define("fragment","SHADOW_CASCADE",bt.shadowCascade):Jt.undefine("fragment","SHADOW_CASCADE")}var qt=a.shadowUniforms;if(b.length>0){var ge=b.map(me);if(qt.directionalLightShadowMaps={value:b,type:"tv"},qt.directionalLightMatrices={value:L,type:"m4v"},qt.directionalLightShadowMapSizes={value:ge,type:"1fv"},bt){var Ge=W.slice(),Oe=W.slice();Ge.pop(),Oe.shift(),Ge.reverse(),Oe.reverse(),L.reverse(),qt.shadowCascadeClipsNear={value:Ge,type:"1fv"},qt.shadowCascadeClipsFar={value:Oe,type:"1fv"}}}if(y.length>0){var We=y.map(me);(qt=a.shadowUniforms).spotLightShadowMaps={value:y,type:"tv"},qt.spotLightMatrices={value:S,type:"m4v"},qt.spotLightShadowMapSizes={value:We,type:"1fv"}}ut.length>0&&(qt.pointLightShadowMaps={value:ut,type:"tv"})}function me(ar){return ar.height}},renderDirectionalLightShadow:function(){var t=new es,a=new _r,u=new Mn,h=new _r,d=new _r,g=new _r,y=new _r;return function(S,b,L,W,ut,bt,Ct){var Et=this._getDepthMaterial(W),Dt={getMaterial:function(ri){return ri.shadowDepthMaterial||Et},isMaterialChanged:Qt,getUniform:Bt,ifRender:function(ri){return ri.castShadow},sortCompare:Mo.opaqueSortCompare};if(!b.viewBoundingBoxLastFrame.isFinite()){var zt=b.getBoundingBox();b.viewBoundingBoxLastFrame.copy(zt).applyTransform(L.viewMatrix)}var $t=Math.min(-b.viewBoundingBoxLastFrame.min.z,L.far),ae=Math.max(-b.viewBoundingBoxLastFrame.max.z,L.near),Jt=this._getDirectionalLightCamera(W,b,L),qt=g.array;y.copy(Jt.projectionMatrix),gr.invert(d.array,Jt.worldTransform.array),gr.multiply(d.array,d.array,L.worldTransform.array),gr.multiply(qt,y.array,d.array);for(var me=[],ge=L instanceof ci,Ge=(L.near+L.far)/(L.near-L.far),Oe=2*L.near*L.far/(L.near-L.far),We=0;We<=W.shadowCascade;We++){var lr=ae*Math.pow($t/ae,We/W.shadowCascade)*W.cascadeSplitLogFactor+(ae+($t-ae)*We/W.shadowCascade)*(1-W.cascadeSplitLogFactor);me.push(lr),ut.push(-(-lr*Ge+Oe)/-lr)}var vr=this._getTexture(W,W.shadowCascade);Ct.push(vr);var nr=S.viewport,Sr=S.gl;for(this._frameBuffer.attach(vr),this._frameBuffer.bind(S),Sr.clear(Sr.COLOR_BUFFER_BIT|Sr.DEPTH_BUFFER_BIT),We=0;We<W.shadowCascade;We++){var Er=me[We],Wr=me[We+1];ge?gr.perspective(a.array,L.fov/180*Math.PI,L.aspect,Er,Wr):gr.ortho(a.array,L.left,L.right,L.bottom,L.top,Er,Wr),t.setFromProjection(a),t.getTransformedBoundingBox(u,d),u.applyProjection(y);var Tr=u.min.array,wn=u.max.array;Tr[0]=Math.max(Tr[0],-1),Tr[1]=Math.max(Tr[1],-1),wn[0]=Math.min(wn[0],1),wn[1]=Math.min(wn[1],1),h.ortho(Tr[0],wn[0],Tr[1],wn[1],1,-1),Jt.projectionMatrix.multiplyLeft(h);var Gr=W.shadowResolution||512;S.setViewport((W.shadowCascade-We-1)*Gr,0,Gr,Gr,1);var Kn=b.updateRenderList(Jt);S.renderPass(Kn.opaque,Jt,Dt),this.softShadow===_e.VSM&&this._gaussianFilter(S,vr,vr.width);var Dn=new _r;Dn.copy(Jt.viewMatrix).multiplyLeft(Jt.projectionMatrix),bt.push(Dn.array),Jt.projectionMatrix.copy(y)}this._frameBuffer.unbind(S),S.setViewport(nr)}}(),renderSpotLightShadow:function(t,a,u,h,d){var g=this._getTexture(u),y=this._getSpotLightCamera(u),S=t.gl;this._frameBuffer.attach(g),this._frameBuffer.bind(t),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT);var b=this._getDepthMaterial(u),L={getMaterial:function(bt){return bt.shadowDepthMaterial||b},isMaterialChanged:Qt,getUniform:Bt,ifRender:function(bt){return bt.castShadow},sortCompare:Mo.opaqueSortCompare},W=a.updateRenderList(y);t.renderPass(W.opaque,y,L),this._frameBuffer.unbind(t),this.softShadow===_e.VSM&&this._gaussianFilter(t,g,g.width);var ut=new _r;ut.copy(y.worldTransform).invert().multiplyLeft(y.projectionMatrix),d.push(g),h.push(ut.array)},renderPointLightShadow:function(t,a,u,h){var d=this._getTexture(u),g=t.gl;h.push(d);var y=this._getDepthMaterial(u),S={getMaterial:function(ae){return ae.shadowDepthMaterial||y},getUniform:Bt,sortCompare:Mo.opaqueSortCompare},b={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},L=new Mn,W=u.getWorldPosition().array,ut=new Mn,bt=u.range;ut.min.setArray(W),ut.max.setArray(W);var Ct=new mr(bt,bt,bt);ut.max.add(Ct),ut.min.sub(Ct);var Et={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};a.traverse(function(ae){if(ae.isRenderable()&&ae.castShadow){var Jt=ae.geometry;if(!Jt.boundingBox){for(var qt=0;qt<pt.length;qt++)b[pt[qt]].push(ae);return}if(L.transformFrom(Jt.boundingBox,ae.worldTransform),!L.intersectBoundingBox(ut))return;for(L.updateVertices(),qt=0;qt<pt.length;qt++)Et[pt[qt]]=!1;for(qt=0;qt<8;qt++){var me=L.vertices[qt],ge=me[0]-W[0],Ge=me[1]-W[1],Oe=me[2]-W[2],We=Math.abs(ge),ar=Math.abs(Ge),Ke=Math.abs(Oe);We>ar?We>Ke?Et[ge>0?"px":"nx"]=!0:Et[Oe>0?"pz":"nz"]=!0:ar>Ke?Et[Ge>0?"py":"ny"]=!0:Et[Oe>0?"pz":"nz"]=!0}for(qt=0;qt<pt.length;qt++)Et[pt[qt]]&&b[pt[qt]].push(ae)}});for(var Dt=0;Dt<6;Dt++){var zt=pt[Dt],$t=this._getPointLightCamera(u,zt);this._frameBuffer.attach(d,g.COLOR_ATTACHMENT0,g.TEXTURE_CUBE_MAP_POSITIVE_X+Dt),this._frameBuffer.bind(t),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT),t.renderPass(b[zt],$t,S)}this._frameBuffer.unbind(t)},_getDepthMaterial:function(t){var a=this._lightMaterials[t.__uid__],u="POINT_LIGHT"===t.type;if(!a){var h=u?"clay.sm.distance.":"clay.sm.depth.";a=new Cr({precision:this.precision,shader:new rr(rr.source(h+"vertex"),rr.source(h+"fragment"))}),this._lightMaterials[t.__uid__]=a}return null!=t.shadowSlopeScale&&a.setUniform("slopeScale",t.shadowSlopeScale),null!=t.shadowBias&&a.setUniform("bias",t.shadowBias),this.softShadow===_e.VSM?a.define("fragment","USE_VSM"):a.undefine("fragment","USE_VSM"),u&&(a.set("lightPosition",t.getWorldPosition().array),a.set("range",t.range)),a},_gaussianFilter:function(t,a,u){var d=this._texturePool.get({width:u,height:u,type:zr.FLOAT});this._frameBuffer.attach(d),this._frameBuffer.bind(t),this._gaussianPassH.setUniform("texture",a),this._gaussianPassH.setUniform("textureWidth",u),this._gaussianPassH.render(t),this._frameBuffer.attach(a),this._gaussianPassV.setUniform("texture",d),this._gaussianPassV.setUniform("textureHeight",u),this._gaussianPassV.render(t),this._frameBuffer.unbind(t),this._texturePool.put(d)},_getTexture:function(t,a){var u=t.__uid__,h=this._textures[u],d=t.shadowResolution||512;return a=a||1,h||((h="POINT_LIGHT"===t.type?new sn:new an).width=d*a,h.height=d,this.softShadow===_e.VSM?(h.type=zr.FLOAT,h.anisotropic=4):(h.minFilter=9728,h.magFilter=9728,h.useMipmap=!1),this._textures[u]=h),h},_getPointLightCamera:function(t,a){this._lightCameras.point||(this._lightCameras.point={px:new ci,nx:new ci,py:new ci,ny:new ci,pz:new ci,nz:new ci});var u=this._lightCameras.point[a];switch(u.far=t.range,u.fov=90,u.position.set(0,0,0),a){case"px":u.lookAt(mr.POSITIVE_X,mr.NEGATIVE_Y);break;case"nx":u.lookAt(mr.NEGATIVE_X,mr.NEGATIVE_Y);break;case"py":u.lookAt(mr.POSITIVE_Y,mr.POSITIVE_Z);break;case"ny":u.lookAt(mr.NEGATIVE_Y,mr.NEGATIVE_Z);break;case"pz":u.lookAt(mr.POSITIVE_Z,mr.NEGATIVE_Y);break;case"nz":u.lookAt(mr.NEGATIVE_Z,mr.NEGATIVE_Y)}return t.getWorldPosition(u.position),u.update(),u},_getDirectionalLightCamera:function(){var t=new _r,a=new Mn,u=new Mn;return function(h,d,g){this._lightCameras.directional||(this._lightCameras.directional=new ns);var y=this._lightCameras.directional;a.copy(d.viewBoundingBoxLastFrame),a.intersection(g.frustum.boundingBox),y.position.copy(a.min).add(a.max).scale(.5).transformMat4(g.worldTransform),y.rotation.copy(h.rotation),y.scale.copy(h.scale),y.updateWorldTransform(),_r.invert(t,y.worldTransform),_r.multiply(t,t,g.worldTransform),u.copy(a).applyTransform(t);var S=u.min.array,b=u.max.array;return y.position.set((S[0]+b[0])/2,(S[1]+b[1])/2,b[2]).transformMat4(y.worldTransform),y.near=0,y.far=-S[2]+b[2],isNaN(this.lightFrustumBias)?y.far*=4:y.far+=this.lightFrustumBias,y.left=S[0],y.right=b[0],y.top=b[1],y.bottom=S[1],y.update(!0),y}}(),_getSpotLightCamera:function(t){this._lightCameras.spot||(this._lightCameras.spot=new ci);var a=this._lightCameras.spot;return a.fov=2*t.penumbraAngle,a.far=t.range,a.worldTransform.copy(t.worldTransform),a.updateProjectionMatrix(),gr.invert(a.viewMatrix.array,a.worldTransform.array),a},dispose:function(t){var a=t.gl||t;for(var u in this._frameBuffer&&this._frameBuffer.dispose(a),this._textures)this._textures[u].dispose(a);this._texturePool.clear(t.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var h=0;h<this._receivers.length;h++){var d=this._receivers[h];if(d.material){var g=d.material;g.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),g.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),g.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),g.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});_e.VSM=1,_e.PCF=2;const Ee=_e;var Xe=I.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(t,a){var y,S,u=this.outputs[t],h=u.parameters,d=u._parametersCopy;if(d||(d=u._parametersCopy={}),h)for(var g in h)"width"!==g&&"height"!==g&&(d[g]=h[g]);return y=h.width instanceof Function?h.width.call(this,a):h.width,S=h.height instanceof Function?h.height.call(this,a):h.height,(d.width!==y||d.height!==S)&&this._outputTextures[t]&&this._outputTextures[t].dispose(a.gl),d.width=y,d.height=S,d},setParameter:function(t,a){},getParameter:function(t){},setParameters:function(t){for(var a in t)this.setParameter(a,t[a])},render:function(){},getOutput:function(t,a){if(null==a)return this._outputTextures[a=t];var u=this.outputs[a];return u?this._rendered?u.outputLastFrame?this._prevOutputTextures[a]:this._outputTextures[a]:this._rendering?(this._prevOutputTextures[a]||(this._prevOutputTextures[a]=this._compositor.allocateTexture(u.parameters||{})),this._prevOutputTextures[a]):(this.render(t),this._outputTextures[a]):void 0},removeReference:function(t){this._outputReferences[t]--,0===this._outputReferences[t]&&(this.outputs[t].keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t]))},link:function(t,a,u){this.inputLinks[t]={node:a,pin:u},a.outputLinks[u]||(a.outputLinks[u]=[]),a.outputLinks[u].push({node:this,pin:t}),this.pass.material.enableTexture(t)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(t){if(!this._rendering){for(var a in this._rendering=!0,this.inputLinks){var u=this.inputLinks[a];u.node.updateReference(u.pin)}this._rendering=!1}t&&this._outputReferences[t]++},beforeFrame:function(){for(var t in this._rendered=!1,this.outputLinks)this._outputReferences[t]=0},afterFrame:function(){for(var t in this.outputLinks)this._outputReferences[t]>0&&(this.outputs[t].keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t]))}});const je=Xe;var hr=I.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(t){this.nodes.indexOf(t)>=0||(this.nodes.push(t),this._dirty=!0)},removeNode:function(t){"string"==typeof t&&(t=this.getNodeByName(t));var a=this.nodes.indexOf(t);a>=0&&(this.nodes.splice(a,1),this._dirty=!0)},getNodeByName:function(t){for(var a=0;a<this.nodes.length;a++)if(this.nodes[a].name===t)return this.nodes[a]},update:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear();for(t=0;t<this.nodes.length;t++){var a=this.nodes[t];if(a.inputs)for(var u in a.inputs)if(a.inputs[u]){if(a.pass&&!a.pass.material.isUniformEnabled(u)){console.warn("Pin "+a.name+"."+u+" not used.");continue}var h=a.inputs[u],d=this.findPin(h);d?a.link(u,d.node,d.pin):console.warn("string"==typeof h?"Node "+h+" not exist":"Pin of "+h.node+"."+h.pin+" not exist")}}},findPin:function(t){var a;if(("string"==typeof t||t instanceof je)&&(t={node:t}),"string"==typeof t.node)for(var u=0;u<this.nodes.length;u++){var h=this.nodes[u];h.name===t.node&&(a=h)}else a=t.node;if(a){var d=t.pin;if(d||a.outputs&&(d=Object.keys(a.outputs)[0]),a.outputs[d])return{node:a,pin:d}}}});const jr=hr;var fn=jr.extend(function(){return{_outputs:[],_texturePool:new Lt,_frameBuffer:new ve({depthBuffer:!1})}},{addNode:function(t){jr.prototype.addNode.call(this,t),t._compositor=this},render:function(t,a){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var u=0;u<this.nodes.length;u++)this.nodes[u].outputs||this._outputs.push(this.nodes[u])}for(u=0;u<this.nodes.length;u++)this.nodes[u].beforeFrame();for(u=0;u<this._outputs.length;u++)this._outputs[u].updateReference();for(u=0;u<this._outputs.length;u++)this._outputs[u].render(t,a);for(u=0;u<this.nodes.length;u++)this.nodes[u].afterFrame()},allocateTexture:function(t){return this._texturePool.get(t)},releaseTexture:function(t){this._texturePool.put(t)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(t){this._texturePool.clear(t)}});const ei=fn;var _i=je.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new ve},{render:function(t){this._rendering=!0;var u,a=t.gl;if(this.trigger("beforerender"),this.outputs){var h=this.frameBuffer;for(var d in this.outputs){var g=this.updateParameter(d,t),y=this.outputs[d],S=this._compositor.allocateTexture(g);this._outputTextures[d]=S,"string"==typeof(b=y.attachment||a.COLOR_ATTACHMENT0)&&(b=a[b]),h.attach(S,b)}h.bind(t);var L=t.getGLExtension("EXT_draw_buffers");if(L){var W=[];for(var b in this.outputs)(b=parseInt(b))>=a.COLOR_ATTACHMENT0&&b<=a.COLOR_ATTACHMENT0+8&&W.push(b);L.drawBuffersEXT(W)}t.saveClear(),t.clearBit=16640,u=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),t.restoreClear(),h.unbind(t)}else u=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);this.trigger("afterrender",u),this._rendering=!1,this._rendered=!0}});const hn=_i,Sn=je.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(t,a){return this.texture},beforeFrame:function(){},afterFrame:function(){}});var sa=je.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var t=new Vn({fragment:this.shader});this.pass=t},{render:function(t,a){this.trigger("beforerender",t),this._rendering=!0;var u=t.gl;for(var h in this.inputLinks){var g=(d=this.inputLinks[h]).node.getOutput(t,d.pin);this.pass.setUniform(h,g)}if(this.outputs){this.pass.outputs={};var y={};for(var S in this.outputs){var b=this.updateParameter(S,t);isNaN(b.width)&&this.updateParameter(S,t);var L=this.outputs[S],W=this._compositor.allocateTexture(b);this._outputTextures[S]=W,"string"==typeof(ut=L.attachment||u.COLOR_ATTACHMENT0)&&(ut=u[ut]),y[ut]=W}for(var ut in this._compositor.getFrameBuffer().bind(t),y)this._compositor.getFrameBuffer().attach(y[ut],ut);this.pass.render(t),this._compositor.getFrameBuffer().updateMipmap(t)}else this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(t),this.pass.render(t,a);for(var h in this.inputLinks){var d;(d=this.inputLinks[h]).node.removeReference(d.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",t)},updateParameter:function(t,a){var y,S,u=this.outputs[t],h=u.parameters,d=u._parametersCopy;if(d||(d=u._parametersCopy={}),h)for(var g in h)"width"!==g&&"height"!==g&&(d[g]=h[g]);return y="function"==typeof h.width?h.width.call(this,a):h.width,S="function"==typeof h.height?h.height.call(this,a):h.height,y=Math.ceil(y),S=Math.ceil(S),(d.width!==y||d.height!==S)&&this._outputTextures[t]&&this._outputTextures[t].dispose(a),d.width=y,d.height=S,d},setParameter:function(t,a){this.pass.setUniform(t,a)},getParameter:function(t){return this.pass.getUniform(t)},setParameters:function(t){for(var a in t)this.setParameter(a,t[a])},define:function(t,a){this.pass.material.define("fragment",t,a)},undefine:function(t){this.pass.material.undefine("fragment",t)},removeReference:function(t){this._outputReferences[t]--,0===this._outputReferences[t]&&(this.outputs[t].keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t]))},clear:function(){je.prototype.clear.call(this),this.pass.material.disableTexturesAll()}});const la=sa,Bn="@export clay.compositor.kernel.gaussian_9\nfloat gaussianKernel[9];\ngaussianKernel[0] = 0.07;\ngaussianKernel[1] = 0.09;\ngaussianKernel[2] = 0.12;\ngaussianKernel[3] = 0.14;\ngaussianKernel[4] = 0.16;\ngaussianKernel[5] = 0.14;\ngaussianKernel[6] = 0.12;\ngaussianKernel[7] = 0.09;\ngaussianKernel[8] = 0.07;\n@end\n@export clay.compositor.kernel.gaussian_13\nfloat gaussianKernel[13];\ngaussianKernel[0] = 0.02;\ngaussianKernel[1] = 0.03;\ngaussianKernel[2] = 0.06;\ngaussianKernel[3] = 0.08;\ngaussianKernel[4] = 0.11;\ngaussianKernel[5] = 0.13;\ngaussianKernel[6] = 0.14;\ngaussianKernel[7] = 0.13;\ngaussianKernel[8] = 0.11;\ngaussianKernel[9] = 0.08;\ngaussianKernel[10] = 0.06;\ngaussianKernel[11] = 0.03;\ngaussianKernel[12] = 0.02;\n@end\n@export clay.compositor.gaussian_blur\n#define SHADER_NAME gaussian_blur\nuniform sampler2D texture;varying vec2 v_Texcoord;\nuniform float blurSize : 2.0;\nuniform vec2 textureSize : [512.0, 512.0];\nuniform float blurDir : 0.0;\n@import clay.util.rgbm\n@import clay.util.clamp_sample\nvoid main (void)\n{\n @import clay.compositor.kernel.gaussian_9\n vec2 off = blurSize / textureSize;\n off *= vec2(1.0 - blurDir, blurDir);\n vec4 sum = vec4(0.0);\n float weightAll = 0.0;\n for (int i = 0; i < 9; i++) {\n float w = gaussianKernel[i];\n vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));\n sum += texel * w;\n weightAll += w;\n }\n gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));\n}\n@end\n",ho="\n@export clay.compositor.lut\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform sampler2D lookup;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n float blueColor = tex.b * 63.0;\n vec2 quad1;\n quad1.y = floor(floor(blueColor) / 8.0);\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\n vec2 quad2;\n quad2.y = floor(ceil(blueColor) / 8.0);\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n vec2 texPos1;\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n vec2 texPos2;\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n vec4 newColor1 = texture2D(lookup, texPos1);\n vec4 newColor2 = texture2D(lookup, texPos2);\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n gl_FragColor = vec4(newColor.rgb, tex.w);\n}\n@end",zs="@export clay.compositor.output\n#define OUTPUT_ALPHA\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\n gl_FragColor.rgb = tex.rgb;\n#ifdef OUTPUT_ALPHA\n gl_FragColor.a = tex.a;\n#else\n gl_FragColor.a = 1.0;\n#endif\n gl_FragColor = encodeHDR(gl_FragColor);\n#ifdef PREMULTIPLY_ALPHA\n gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n}\n@end",gs="@export clay.compositor.bright\nuniform sampler2D texture;\nuniform float threshold : 1;\nuniform float scale : 1.0;\nuniform vec2 textureSize: [512, 512];\nvarying vec2 v_Texcoord;\nconst vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);\n@import clay.util.rgbm\nvec4 median(vec4 a, vec4 b, vec4 c)\n{\n return a + b + c - min(min(a, b), c) - max(max(a, b), c);\n}\nvoid main()\n{\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\n#ifdef ANTI_FLICKER\n vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);\n vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));\n vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));\n vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));\n vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));\n texel = median(median(texel, s1, s2), s3, s4);\n#endif\n float lum = dot(texel.rgb , lumWeight);\n vec4 color;\n if (lum > threshold && texel.a > 0.0)\n {\n color = vec4(texel.rgb * scale, texel.a * scale);\n }\n else\n {\n color = vec4(0.0);\n }\n gl_FragColor = encodeHDR(color);\n}\n@end\n",Zn="@export clay.compositor.downsample\nuniform sampler2D texture;\nuniform vec2 textureSize : [512, 512];\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nfloat brightness(vec3 c)\n{\n return max(max(c.r, c.g), c.b);\n}\n@import clay.util.clamp_sample\nvoid main()\n{\n vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;\n#ifdef ANTI_FLICKER\n vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;\n vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;\n vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;\n vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;\n float s1w = 1.0 / (brightness(s1) + 1.0);\n float s2w = 1.0 / (brightness(s2) + 1.0);\n float s3w = 1.0 / (brightness(s3) + 1.0);\n float s4w = 1.0 / (brightness(s4) + 1.0);\n float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);\n vec4 color = vec4(\n (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,\n 1.0\n );\n#else\n vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\n color *= 0.25;\n#endif\n gl_FragColor = encodeHDR(color);\n}\n@end",Cl="\n@export clay.compositor.upsample\n#define HIGH_QUALITY\nuniform sampler2D texture;\nuniform vec2 textureSize : [512, 512];\nuniform float sampleScale: 0.5;\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\n@import clay.util.clamp_sample\nvoid main()\n{\n#ifdef HIGH_QUALITY\n vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;\n vec4 s;\n s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));\n s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n gl_FragColor = encodeHDR(s / 16.0);\n#else\n vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;\n vec4 s;\n s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\n gl_FragColor = encodeHDR(s / 4.0);\n#endif\n}\n@end",mc="@export clay.compositor.hdr.composite\n#define TONEMAPPING\nuniform sampler2D texture;\n#ifdef BLOOM_ENABLED\nuniform sampler2D bloom;\n#endif\n#ifdef LENSFLARE_ENABLED\nuniform sampler2D lensflare;\nuniform sampler2D lensdirt;\n#endif\n#ifdef LUM_ENABLED\nuniform sampler2D lum;\n#endif\n#ifdef LUT_ENABLED\nuniform sampler2D lut;\n#endif\n#ifdef COLOR_CORRECTION\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float radiowavesuration : 1.0;\n#endif\n#ifdef VIGNETTE\nuniform float vignetteDarkness: 1.0;\nuniform float vignetteOffset: 1.0;\n#endif\nuniform float exposure : 1.0;\nuniform float bloomIntensity : 0.25;\nuniform float lensflareIntensity : 1;\nvarying vec2 v_Texcoord;\n@import clay.util.srgb\nvec3 ACESToneMapping(vec3 color)\n{\n const float A = 2.51;\n const float B = 0.03;\n const float C = 2.43;\n const float D = 0.59;\n const float E = 0.14;\n return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nfloat eyeAdaption(float fLum)\n{\n return mix(0.2, fLum, 0.5);\n}\n#ifdef LUT_ENABLED\nvec3 lutTransform(vec3 color) {\n float blueColor = color.b * 63.0;\n vec2 quad1;\n quad1.y = floor(floor(blueColor) / 8.0);\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\n vec2 quad2;\n quad2.y = floor(ceil(blueColor) / 8.0);\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n vec2 texPos1;\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n vec2 texPos2;\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n vec4 newColor1 = texture2D(lut, texPos1);\n vec4 newColor2 = texture2D(lut, texPos2);\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n return newColor.rgb;\n}\n#endif\n@import clay.util.rgbm\nvoid main()\n{\n vec4 texel = vec4(0.0);\n vec4 originalTexel = vec4(0.0);\n#ifdef TEXTURE_ENABLED\n texel = decodeHDR(texture2D(texture, v_Texcoord));\n originalTexel = texel;\n#endif\n#ifdef BLOOM_ENABLED\n vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));\n texel.rgb += bloomTexel.rgb * bloomIntensity;\n texel.a += bloomTexel.a * bloomIntensity;\n#endif\n#ifdef LENSFLARE_ENABLED\n texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;\n#endif\n texel.a = min(texel.a, 1.0);\n#ifdef LUM_ENABLED\n float fLum = texture2D(lum, vec2(0.5, 0.5)).r;\n float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));\n float exposureBias = adaptedLumDest * exposure;\n#else\n float exposureBias = exposure;\n#endif\n#ifdef TONEMAPPING\n texel.rgb *= exposureBias;\n texel.rgb = ACESToneMapping(texel.rgb);\n#endif\n texel = linearTosRGB(texel);\n#ifdef LUT_ENABLED\n texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));\n#endif\n#ifdef COLOR_CORRECTION\n texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);\n texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));\n texel.rgb = mix(vec3(lum), texel.rgb, radiowavesuration);\n#endif\n#ifdef VIGNETTE\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);\n texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));\n#endif\n gl_FragColor = encodeHDR(texel);\n#ifdef DEBUG\n #if DEBUG == 1\n gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));\n #elif DEBUG == 2\n gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);\n #elif DEBUG == 3\n gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));\n #endif\n#endif\n if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {\n gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));\n }\n#ifdef PREMULTIPLY_ALPHA\n gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n}\n@end",yc="@export clay.compositor.blend\n#define SHADER_NAME blend\n#ifdef TEXTURE1_ENABLED\nuniform sampler2D texture1;\nuniform float weight1 : 1.0;\n#endif\n#ifdef TEXTURE2_ENABLED\nuniform sampler2D texture2;\nuniform float weight2 : 1.0;\n#endif\n#ifdef TEXTURE3_ENABLED\nuniform sampler2D texture3;\nuniform float weight3 : 1.0;\n#endif\n#ifdef TEXTURE4_ENABLED\nuniform sampler2D texture4;\nuniform float weight4 : 1.0;\n#endif\n#ifdef TEXTURE5_ENABLED\nuniform sampler2D texture5;\nuniform float weight5 : 1.0;\n#endif\n#ifdef TEXTURE6_ENABLED\nuniform sampler2D texture6;\nuniform float weight6 : 1.0;\n#endif\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = vec4(0.0);\n#ifdef TEXTURE1_ENABLED\n tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;\n#endif\n#ifdef TEXTURE2_ENABLED\n tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;\n#endif\n#ifdef TEXTURE3_ENABLED\n tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;\n#endif\n#ifdef TEXTURE4_ENABLED\n tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;\n#endif\n#ifdef TEXTURE5_ENABLED\n tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;\n#endif\n#ifdef TEXTURE6_ENABLED\n tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;\n#endif\n gl_FragColor = encodeHDR(tex);\n}\n@end",gu="@export clay.compositor.fxaa\nuniform sampler2D texture;\nuniform vec4 viewport : VIEWPORT;\nvarying vec2 v_Texcoord;\n#define FXAA_REDUCE_MIN (1.0/128.0)\n#define FXAA_REDUCE_MUL (1.0/8.0)\n#define FXAA_SPAN_MAX 8.0\n@import clay.util.rgbm\nvoid main()\n{\n vec2 resolution = 1.0 / viewport.zw;\n vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;\n vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;\n vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;\n vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;\n vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );\n vec3 rgbM = rgbaM.xyz;\n float opacity = rgbaM.w;\n vec3 luma = vec3( 0.299, 0.587, 0.114 );\n float lumaNW = dot( rgbNW, luma );\n float lumaNE = dot( rgbNE, luma );\n float lumaSW = dot( rgbSW, luma );\n float lumaSE = dot( rgbSE, luma );\n float lumaM = dot( rgbM, luma );\n float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n vec2 dir;\n dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n dir * rcpDirMin)) * resolution;\n vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;\n rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;\n rgbA *= 0.5;\n vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;\n rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;\n rgbB *= 0.25;\n rgbB += rgbA * 0.5;\n float lumaB = dot( rgbB, luma );\n if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )\n {\n gl_FragColor = vec4( rgbA, opacity );\n }\n else {\n gl_FragColor = vec4( rgbB, opacity );\n }\n}\n@end";!function Ih(t){t.import("@export clay.compositor.coloradjust\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float exposure : 0.0;\nuniform float gamma : 1.0;\nuniform float radiowavesuration : 1.0;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);\n color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n color = clamp( color * pow(2.0, exposure), 0.0, 1.0);\n color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);\n float luminance = dot( color, w );\n color = mix(vec3(luminance), color, radiowavesuration);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.brightness\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float brightness : 0.0;\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = tex.rgb + vec3(brightness);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.contrast\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float contrast : 1.0;\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.exposure\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float exposure : 0.0;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = tex.rgb * pow(2.0, exposure);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.gamma\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float gamma : 1.0;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = pow(tex.rgb, vec3(gamma));\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.radiowavesuration\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float radiowavesuration : 1.0;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = tex.rgb;\n float luminance = dot(color, w);\n color = mix(vec3(luminance), color, radiowavesuration);\n gl_FragColor = vec4(color, tex.a);\n}\n@end"),t.import(Bn),t.import("@export clay.compositor.hdr.log_lum\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\n float luminance = dot(tex.rgb, w);\n luminance = log(luminance + 0.001);\n gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));\n}\n@end\n@export clay.compositor.hdr.lum_adaption\nvarying vec2 v_Texcoord;\nuniform sampler2D adaptedLum;\nuniform sampler2D currentLum;\nuniform float frameTime : 0.02;\n@import clay.util.rgbm\nvoid main()\n{\n float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;\n float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);\n fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));\n gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));\n}\n@end\n@export clay.compositor.lum\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord );\n float luminance = dot(tex.rgb, w);\n gl_FragColor = vec4(vec3(luminance), 1.0);\n}\n@end"),t.import(ho),t.import("@export clay.compositor.vignette\n#define OUTPUT_ALPHA\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float darkness: 1;\nuniform float offset: 1;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\n gl_FragColor.rgb = texel.rgb;\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);\n gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));\n}\n@end"),t.import(zs),t.import(gs),t.import(Zn),t.import(Cl),t.import(mc),t.import("@export clay.compositor.lensflare\n#define SAMPLE_NUMBER 8\nuniform sampler2D texture;\nuniform sampler2D lenscolor;\nuniform vec2 textureSize : [512, 512];\nuniform float dispersal : 0.3;\nuniform float haloWidth : 0.4;\nuniform float distortion : 1.0;\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nvec4 textureDistorted(\n in vec2 texcoord,\n in vec2 direction,\n in vec3 distortion\n) {\n return vec4(\n decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,\n decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,\n decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,\n 1.0\n );\n}\nvoid main()\n{\n vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;\n vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;\n vec2 haloVec = normalize(ghostVec) * haloWidth;\n vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);\n vec4 result = vec4(0.0);\n for (int i = 0; i < SAMPLE_NUMBER; i++)\n {\n vec2 offset = fract(texcoord + ghostVec * float(i));\n float weight = length(vec2(0.5) - offset) / length(vec2(0.5));\n weight = pow(1.0 - weight, 10.0);\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n }\n result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));\n float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\n weight = pow(1.0 - weight, 10.0);\n vec2 offset = fract(texcoord + haloVec);\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n gl_FragColor = result;\n}\n@end"),t.import(yc),t.import(gu)}(rr);var xc=/^#source\((.*?)\)/;function Bh(t,a,u){var d,g,y,ut,h=t.type||"filter";if("filter"===h){var S=t.shader.trim(),b=xc.exec(S);if(b?d=rr.source(b[1].trim()):"#"===S.charAt(0)&&(d=a.shaders[S.substr(1)]),d||(d=S),!d)return}if(t.inputs)for(var L in g={},t.inputs)g[L]="string"==typeof t.inputs[L]?t.inputs[L]:{node:t.inputs[L].node,pin:t.inputs[L].pin};if(t.outputs)for(var L in y={},t.outputs){var W=t.outputs[L];y[L]={},null!=W.attachment&&(y[L].attachment=W.attachment),null!=W.keepLastFrame&&(y[L].keepLastFrame=W.keepLastFrame),null!=W.outputLastFrame&&(y[L].outputLastFrame=W.outputLastFrame),W.parameters&&(y[L].parameters=Fo(W.parameters))}if(ut="scene"===h?new hn({name:t.name,scene:u.scene,camera:u.camera,outputs:y}):"texture"===h?new Sn({name:t.name,outputs:y}):new la({name:t.name,shader:d,inputs:g,outputs:y})){if(t.parameters)for(var L in t.parameters)"string"==typeof(bt=t.parameters[L])?"#"===(bt=bt.trim()).charAt(0)?bt=a.textures[bt.substr(1)]:ut.on("beforerender",Fh(L,Ml(bt))):"function"==typeof bt&&ut.on("beforerender",bt),ut.setParameter(L,bt);if(t.defines&&ut.pass)for(var L in t.defines){var bt;ut.pass.material.define("fragment",L,bt=t.defines[L])}}return ut}function Gh(t,a){return t}function Sc(t,a){return a}function Fo(t){var a={};if(!t)return a;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(h){var d=t[h];null!=d&&("string"==typeof d&&(d=zr[d]),a[h]=d)});var u=t.scale||1;return["width","height"].forEach(function(h){if(null!=t[h]){var d=t[h];"string"==typeof d?(d=d.trim(),a[h]=function kh(t,a,u){return u=u||1,function(h){var d=h.getDevicePixelRatio(),g=h.getWidth()*u,y=h.getHeight()*u;return a(g,y,d)}}(0,Ml(d),u)):a[h]=d}}),a.width||(a.width=Gh),a.height||(a.height=Sc),null!=t.useMipmap&&(a.useMipmap=t.useMipmap),a}function Fh(t,a){return function(u){var h=u.getDevicePixelRatio(),d=u.getWidth(),g=u.getHeight(),y=a(d,g,h);this.setParameter(t,y)}}function Ml(t){var a=/^expr\((.*)\)$/.exec(t);if(a)try{var u=new Function("width","height","dpr","return "+a[1]);return u(1,1),u}catch{throw new Error("Invalid expression.")}}const _s=function Uh(t,a){for(var u=0,h=1/a,d=t;d>0;)u+=h*(d%a),d=Math.floor(d/a),h/=a;return u};function Cc(t){for(var a=new Uint8Array(t*t*4),u=0,h=new mr,d=0;d<t;d++)for(var g=0;g<t;g++)h.set(2*Math.random()-1,2*Math.random()-1,0).normalize(),a[u++]=255*(.5*h.x+.5),a[u++]=255*(.5*h.y+.5),a[u++]=0,a[u++]=255;return a}function Mc(t){return new an({pixels:Cc(t),wrapS:zr.REPEAT,wrapT:zr.REPEAT,width:t,height:t})}function Hh(t,a,u){var h=new Float32Array(3*t);a=a||0;for(var d=0;d<t;d++){var g=_s(d+a,2)*(u?1:2)*Math.PI,y=_s(d+a,3)*Math.PI,S=Math.random(),b=Math.cos(g)*Math.sin(y)*S,L=Math.cos(y)*S,W=Math.sin(g)*Math.sin(y)*S;h[3*d]=b,h[3*d+1]=L,h[3*d+2]=W}return h}function ja(t){t=t||{},this._ssaoPass=new Vn({fragment:rr.source("ecgl.ssao.estimate")}),this._blurPass=new Vn({fragment:rr.source("ecgl.ssao.blur")}),this._framebuffer=new ve({depthBuffer:!1}),this._ssaoTexture=new an,this._blurTexture=new an,this._blurTexture2=new an,this._depthTex=t.depthTexture,this._normalTex=t.normalTexture,this.setNoiseSize(4),this.setKernelSize(t.kernelSize||12),null!=t.radius&&this.setParameter("radius",t.radius),null!=t.power&&this.setParameter("power",t.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}rr.import("@export ecgl.ssao.estimate\n\nuniform sampler2D depthTex;\n\nuniform sampler2D normalTex;\n\nuniform sampler2D noiseTex;\n\nuniform vec2 depthTexSize;\n\nuniform vec2 noiseTexSize;\n\nuniform mat4 projection;\n\nuniform mat4 projectionInv;\n\nuniform mat4 viewInverseTranspose;\n\nuniform vec3 kernel[KERNEL_SIZE];\n\nuniform float radius : 1;\n\nuniform float power : 1;\n\nuniform float bias: 1e-2;\n\nuniform float intensity: 1.0;\n\nvarying vec2 v_Texcoord;\n\nfloat ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {\n float occlusion = 0.0;\n\n for (int i = 0; i < KERNEL_SIZE; i++) {\n vec3 samplePos = kernel[i];\n#ifdef NORMALTEX_ENABLED\n samplePos = kernelBasis * samplePos;\n#endif\n samplePos = samplePos * radius + originPos;\n\n vec4 texCoord = projection * vec4(samplePos, 1.0);\n texCoord.xy /= texCoord.w;\n\n vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);\n\n float sampleDepth = depthTexel.r * 2.0 - 1.0;\n if (projection[3][3] == 0.0) {\n sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);\n }\n else {\n sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];\n }\n \n float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));\n occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);\n }\n#ifdef NORMALTEX_ENABLED\n occlusion = 1.0 - occlusion / float(KERNEL_SIZE);\n#else\n occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);\n#endif\n return pow(occlusion, power);\n}\n\nvoid main()\n{\n\n vec4 depthTexel = texture2D(depthTex, v_Texcoord);\n\n#ifdef NORMALTEX_ENABLED\n vec4 tex = texture2D(normalTex, v_Texcoord);\n if (dot(tex.rgb, tex.rgb) == 0.0) {\n gl_FragColor = vec4(1.0);\n return;\n }\n vec3 N = tex.rgb * 2.0 - 1.0;\n N = (viewInverseTranspose * vec4(N, 0.0)).xyz;\n\n vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;\n vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;\n vec3 T = normalize(rvec - N * dot(rvec, N));\n vec3 BT = normalize(cross(N, T));\n mat3 kernelBasis = mat3(T, BT, N);\n#else\n if (depthTexel.r > 0.99999) {\n gl_FragColor = vec4(1.0);\n return;\n }\n mat3 kernelBasis;\n#endif\n\n float z = depthTexel.r * 2.0 - 1.0;\n\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);\n vec4 p4 = projectionInv * projectedPos;\n\n vec3 position = p4.xyz / p4.w;\n\n float ao = ssaoEstimator(position, kernelBasis);\n ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);\n gl_FragColor = vec4(vec3(ao), 1.0);\n}\n\n@end\n\n\n@export ecgl.ssao.blur\n#define SHADER_NAME SSAO_BLUR\n\nuniform sampler2D ssaoTexture;\n\n#ifdef NORMALTEX_ENABLED\nuniform sampler2D normalTex;\n#endif\n\nvarying vec2 v_Texcoord;\n\nuniform vec2 textureSize;\nuniform float blurSize : 1.0;\n\nuniform int direction: 0.0;\n\n#ifdef DEPTHTEX_ENABLED\nuniform sampler2D depthTex;\nuniform mat4 projection;\nuniform float depthRange : 0.5;\n\nfloat getLinearDepth(vec2 coord)\n{\n float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n}\n#endif\n\nvoid main()\n{\n float kernel[5];\n kernel[0] = 0.122581;\n kernel[1] = 0.233062;\n kernel[2] = 0.288713;\n kernel[3] = 0.233062;\n kernel[4] = 0.122581;\n\n vec2 off = vec2(0.0);\n if (direction == 0) {\n off[0] = blurSize / textureSize.x;\n }\n else {\n off[1] = blurSize / textureSize.y;\n }\n\n vec2 coord = v_Texcoord;\n\n float sum = 0.0;\n float weightAll = 0.0;\n\n#ifdef NORMALTEX_ENABLED\n vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;\n#endif\n#if defined(DEPTHTEX_ENABLED)\n float centerDepth = getLinearDepth(v_Texcoord);\n#endif\n\n for (int i = 0; i < 5; i++) {\n vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));\n\n float w = kernel[i];\n#ifdef NORMALTEX_ENABLED\n vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;\n w *= clamp(dot(normal, centerNormal), 0.0, 1.0);\n#endif\n#ifdef DEPTHTEX_ENABLED\n float d = getLinearDepth(coord);\n w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));\n#endif\n\n weightAll += w;\n sum += texture2D(ssaoTexture, coord).r * w;\n }\n\n gl_FragColor = vec4(vec3(sum / weightAll), 1.0);\n}\n\n@end\n"),ja.prototype.setDepthTexture=function(t){this._depthTex=t},ja.prototype.setNormalTexture=function(t){this._normalTex=t,this._ssaoPass.material[t?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)},ja.prototype.update=function(t,a,u){var h=t.getWidth(),d=t.getHeight(),g=this._ssaoPass,y=this._blurPass;g.setUniform("kernel",this._kernels[u%this._kernels.length]),g.setUniform("depthTex",this._depthTex),null!=this._normalTex&&g.setUniform("normalTex",this._normalTex),g.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var S=new _r;_r.transpose(S,a.worldTransform),g.setUniform("projection",a.projectionMatrix.array),g.setUniform("projectionInv",a.invProjectionMatrix.array),g.setUniform("viewInverseTranspose",S.array);var b=this._ssaoTexture,L=this._blurTexture,W=this._blurTexture2;b.width=h/2,b.height=d/2,L.width=h,L.height=d,W.width=h,W.height=d,this._framebuffer.attach(b),this._framebuffer.bind(t),t.gl.clearColor(1,1,1,1),t.gl.clear(t.gl.COLOR_BUFFER_BIT),g.render(t),y.setUniform("textureSize",[h/2,d/2]),y.setUniform("projection",a.projectionMatrix.array),this._framebuffer.attach(L),y.setUniform("direction",0),y.setUniform("ssaoTexture",b),y.render(t),this._framebuffer.attach(W),y.setUniform("textureSize",[h,d]),y.setUniform("direction",1),y.setUniform("ssaoTexture",L),y.render(t),this._framebuffer.unbind(t);var ut=t.clearColor;t.gl.clearColor(ut[0],ut[1],ut[2],ut[3])},ja.prototype.getTargetTexture=function(){return this._blurTexture2},ja.prototype.setParameter=function(t,a){"noiseTexSize"===t?this.setNoiseSize(a):"kernelSize"===t?this.setKernelSize(a):"intensity"===t?this._ssaoPass.material.set("intensity",a):this._ssaoPass.setUniform(t,a)},ja.prototype.setKernelSize=function(t){this._kernelSize=t,this._ssaoPass.material.define("fragment","KERNEL_SIZE",t),this._kernels=this._kernels||[];for(var a=0;a<30;a++)this._kernels[a]=Hh(t,a*t,!!this._normalTex)},ja.prototype.setNoiseSize=function(t){var a=this._ssaoPass.getUniform("noiseTex");a?(a.data=Cc(t),a.width=a.height=t,a.dirty()):(a=Mc(t),this._ssaoPass.setUniform("noiseTex",Mc(t))),this._ssaoPass.setUniform("noiseTexSize",[t,t])},ja.prototype.dispose=function(t){this._blurTexture.dispose(t),this._ssaoTexture.dispose(t),this._blurTexture2.dispose(t)};const bc=ja;function Ja(t){t=t||{},this._ssrPass=new Vn({fragment:rr.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new Vn({fragment:rr.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new Vn({fragment:rr.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new Vn({fragment:rr.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",t.normalTexture),this._ssrPass.setUniform("gBufferTexture2",t.depthTexture),this._blurPass1.setUniform("gBufferTexture1",t.normalTexture),this._blurPass1.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.setUniform("gBufferTexture1",t.normalTexture),this._blurPass2.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new an({type:zr.HALF_FLOAT}),this._texture2=new an({type:zr.HALF_FLOAT}),this._texture3=new an({type:zr.HALF_FLOAT}),this._prevTexture=new an({type:zr.HALF_FLOAT}),this._currentTexture=new an({type:zr.HALF_FLOAT}),this._frameBuffer=new ve({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}rr.import("@export ecgl.ssr.main\n\n#define SHADER_NAME SSR\n#define MAX_ITERATION 20;\n#define SAMPLE_PER_FRAME 5;\n#define TOTAL_SAMPLES 128;\n\nuniform sampler2D sourceTexture;\nuniform sampler2D gBufferTexture1;\nuniform sampler2D gBufferTexture2;\nuniform sampler2D gBufferTexture3;\nuniform samplerCube specularCubemap;\nuniform float specularIntensity: 1;\n\nuniform mat4 projection;\nuniform mat4 projectionInv;\nuniform mat4 toViewSpace;\nuniform mat4 toWorldSpace;\n\nuniform float maxRayDistance: 200;\n\nuniform float pixelStride: 16;\nuniform float pixelStrideZCutoff: 50; \nuniform float screenEdgeFadeStart: 0.9; \nuniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; \nuniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;\n\nuniform float nearZ;\nuniform vec2 viewportSize : VIEWPORT_SIZE;\n\nuniform float jitterOffset: 0;\n\nvarying vec2 v_Texcoord;\n\n#ifdef DEPTH_DECODE\n@import clay.util.decode_float\n#endif\n\n#ifdef PHYSICALLY_CORRECT\nuniform sampler2D normalDistribution;\nuniform float sampleOffset: 0;\nuniform vec2 normalDistributionSize;\n\nvec3 transformNormal(vec3 H, vec3 N) {\n vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nvec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {\n float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));\n vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;\n return transformNormal(H, N);\n}\nfloat G_Smith(float g, float ndv, float ndl) {\n float roughness = 1.0 - g;\n float k = roughness * roughness / 2.0;\n float G1V = ndv / (ndv * (1.0 - k) + k);\n float G1L = ndl / (ndl * (1.0 - k) + k);\n return G1L * G1V;\n}\nvec3 F_Schlick(float ndv, vec3 spec) {\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\n}\n#endif\n\nfloat fetchDepth(sampler2D depthTexture, vec2 uv)\n{\n vec4 depthTexel = texture2D(depthTexture, uv);\n return depthTexel.r * 2.0 - 1.0;\n}\n\nfloat linearDepth(float depth)\n{\n if (projection[3][3] == 0.0) {\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n }\n else {\n return (depth - projection[3][2]) / projection[2][2];\n }\n}\n\nbool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)\n{\n if (rayZFar > rayZNear)\n {\n float t = rayZFar; rayZFar = rayZNear; rayZNear = t;\n }\n float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));\n return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;\n}\n\n\nbool traceScreenSpaceRay(\n vec3 rayOrigin, vec3 rayDir, float jitter,\n out vec2 hitPixel, out vec3 hitPoint, out float iterationCount\n)\n{\n float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)\n ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;\n\n vec3 rayEnd = rayOrigin + rayDir * rayLength;\n\n vec4 H0 = projection * vec4(rayOrigin, 1.0);\n vec4 H1 = projection * vec4(rayEnd, 1.0);\n\n float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;\n\n vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;\n\n vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;\n vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;\n\n P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;\n vec2 delta = P1 - P0;\n\n bool permute = false;\n if (abs(delta.x) < abs(delta.y)) {\n permute = true;\n delta = delta.yx;\n P0 = P0.yx;\n P1 = P1.yx;\n }\n float stepDir = sign(delta.x);\n float invdx = stepDir / delta.x;\n\n vec3 dQ = (Q1 - Q0) * invdx;\n float dk = (k1 - k0) * invdx;\n\n vec2 dP = vec2(stepDir, delta.y * invdx);\n\n float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);\n float pixStride = 1.0 + strideScaler * pixelStride;\n\n dP *= pixStride; dQ *= pixStride; dk *= pixStride;\n\n vec4 pqk = vec4(P0, Q0.z, k0);\n vec4 dPQK = vec4(dP, dQ.z, dk);\n\n pqk += dPQK * jitter;\n float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n float rayZNear;\n\n bool intersect = false;\n\n vec2 texelSize = 1.0 / viewportSize;\n\n iterationCount = 0.0;\n\n for (int i = 0; i < MAX_ITERATION; i++)\n {\n pqk += dPQK;\n\n rayZNear = rayZFar;\n rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n\n hitPixel = permute ? pqk.yx : pqk.xy;\n hitPixel *= texelSize;\n\n intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);\n\n iterationCount += 1.0;\n\n dPQK *= 1.2;\n\n if (intersect) {\n break;\n }\n }\n\n Q0.xy += dQ.xy * iterationCount;\n Q0.z = pqk.z;\n hitPoint = Q0 / pqk.w;\n\n return intersect;\n}\n\nfloat calculateAlpha(\n float iterationCount, float reflectivity,\n vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir\n)\n{\n float alpha = clamp(reflectivity, 0.0, 1.0);\n alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));\n vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;\n float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));\n alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);\n\n float _eyeFadeStart = eyeFadeStart;\n float _eyeFadeEnd = eyeFadeEnd;\n if (_eyeFadeStart > _eyeFadeEnd) {\n float tmp = _eyeFadeEnd;\n _eyeFadeEnd = _eyeFadeStart;\n _eyeFadeStart = tmp;\n }\n\n float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);\n alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);\n\n alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);\n\n return alpha;\n}\n\n@import clay.util.rand\n\n@import clay.util.rgbm\n\nvoid main()\n{\n vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);\n\n if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {\n discard;\n }\n\n float g = normalAndGloss.a;\n#if !defined(PHYSICALLY_CORRECT)\n if (g <= minGlossiness) {\n discard;\n }\n#endif\n\n float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);\n\n vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);\n N = normalize((toViewSpace * vec4(N, 0.0)).xyz);\n\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);\n vec4 pos = projectionInv * projectedPos;\n vec3 rayOrigin = pos.xyz / pos.w;\n vec3 V = -normalize(rayOrigin);\n\n float ndv = clamp(dot(N, V), 0.0, 1.0);\n float iterationCount;\n float jitter = rand(fract(v_Texcoord + jitterOffset));\n\n#ifdef PHYSICALLY_CORRECT\n vec4 color = vec4(vec3(0.0), 1.0);\n vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);\n vec3 albedo = albedoMetalness.rgb;\n float m = albedoMetalness.a;\n vec3 diffuseColor = albedo * (1.0 - m);\n vec3 spec = mix(vec3(0.04), albedo, m);\n\n float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);\n\n for (int i = 0; i < SAMPLE_PER_FRAME; i++) {\n vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);\n vec3 rayDir = normalize(reflect(-V, H));\n#else\n vec3 rayDir = normalize(reflect(-V, N));\n#endif\n vec2 hitPixel;\n vec3 hitPoint;\n\n bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);\n\n float dist = distance(rayOrigin, hitPoint);\n\n vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;\n hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);\n#ifdef PHYSICALLY_CORRECT\n float ndl = clamp(dot(N, rayDir), 0.0, 1.0);\n float vdh = clamp(dot(V, H), 0.0, 1.0);\n float ndh = clamp(dot(N, H), 0.0, 1.0);\n vec3 litTexel = vec3(0.0);\n if (dot(hitNormal, rayDir) < 0.0 && intersect) {\n litTexel = texture2D(sourceTexture, hitPixel).rgb;\n litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);\n\n }\n else {\n #ifdef SPECULARCUBEMAP_ENABLED\n vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;\n litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;\n#endif\n }\n color.rgb += ndl * litTexel * (\n F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)\n );\n }\n color.rgb /= float(SAMPLE_PER_FRAME);\n#else\n #if !defined(SPECULARCUBEMAP_ENABLED)\n if (dot(hitNormal, rayDir) >= 0.0) {\n discard;\n }\n if (!intersect) {\n discard;\n }\n#endif\n float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);\n vec4 color = texture2D(sourceTexture, hitPixel);\n color.rgb *= alpha;\n\n#ifdef SPECULARCUBEMAP_ENABLED\n vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;\n alpha = alpha * (intersect ? 1.0 : 0.0);\n float bias = (1.0 -g) * 5.0;\n color.rgb += (1.0 - alpha)\n * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb\n * specularIntensity;\n#endif\n\n#endif\n\n gl_FragColor = encodeHDR(color);\n}\n@end\n\n@export ecgl.ssr.blur\n\nuniform sampler2D texture;\nuniform sampler2D gBufferTexture1;\nuniform sampler2D gBufferTexture2;\nuniform mat4 projection;\nuniform float depthRange : 0.05;\n\nvarying vec2 v_Texcoord;\n\nuniform vec2 textureSize;\nuniform float blurSize : 1.0;\n\n#ifdef BLEND\n #ifdef SSAOTEX_ENABLED\nuniform sampler2D ssaoTex;\n #endif\nuniform sampler2D sourceTexture;\n#endif\n\nfloat getLinearDepth(vec2 coord)\n{\n float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n}\n\n@import clay.util.rgbm\n\n\nvoid main()\n{\n @import clay.compositor.kernel.gaussian_9\n\n vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);\n float g = centerNTexel.a;\n float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;\n#ifdef VERTICAL\n vec2 off = vec2(0.0, maxBlurSize / textureSize.y);\n#else\n vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);\n#endif\n\n vec2 coord = v_Texcoord;\n\n vec4 sum = vec4(0.0);\n float weightAll = 0.0;\n\n vec3 cN = centerNTexel.rgb * 2.0 - 1.0;\n float cD = getLinearDepth(v_Texcoord);\n for (int i = 0; i < 9; i++) {\n vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));\n float w = gaussianKernel[i]\n * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);\n float d = getLinearDepth(coord);\n w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));\n\n weightAll += w;\n sum += decodeHDR(texture2D(texture, coord)) * w;\n }\n\n#ifdef BLEND\n float aoFactor = 1.0;\n #ifdef SSAOTEX_ENABLED\n aoFactor = texture2D(ssaoTex, v_Texcoord).r;\n #endif\n gl_FragColor = encodeHDR(\n sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))\n );\n#else\n gl_FragColor = encodeHDR(sum / weightAll);\n#endif\n}\n\n@end"),Ja.prototype.setAmbientCubemap=function(t,a){this._ssrPass.material.set("specularCubemap",t),this._ssrPass.material.set("specularIntensity",a),this._ssrPass.material[t&&a?"enableTexture":"disableTexture"]("specularCubemap")},Ja.prototype.update=function(t,a,u,h){var d=t.getWidth(),g=t.getHeight(),y=this._ssrTexture,S=this._texture2,b=this._texture3;y.width=this._prevTexture.width=this._currentTexture.width=d/this._downScale,y.height=this._prevTexture.height=this._currentTexture.height=g/this._downScale,S.width=b.width=d,S.height=b.height=g;var L=this._frameBuffer,W=this._ssrPass,ut=this._blurPass1,bt=this._blurPass2,Ct=this._blendPass,Et=new _r,Dt=new _r;if(_r.transpose(Et,a.worldTransform),_r.transpose(Dt,a.viewMatrix),W.setUniform("sourceTexture",u),W.setUniform("projection",a.projectionMatrix.array),W.setUniform("projectionInv",a.invProjectionMatrix.array),W.setUniform("toViewSpace",Et.array),W.setUniform("toWorldSpace",Dt.array),W.setUniform("nearZ",a.near),W.setUniform("jitterOffset",h/this._totalSamples*this._samplePerFrame),W.setUniform("sampleOffset",h*this._samplePerFrame),ut.setUniform("textureSize",[y.width,y.height]),bt.setUniform("textureSize",[d,g]),bt.setUniform("sourceTexture",u),ut.setUniform("projection",a.projectionMatrix.array),bt.setUniform("projection",a.projectionMatrix.array),L.attach(y),L.bind(t),W.render(t),this._physicallyCorrect&&(L.attach(this._currentTexture),Ct.setUniform("texture1",this._prevTexture),Ct.setUniform("texture2",y),Ct.material.set({weight1:h>=1?.95:0,weight2:h>=1?.05:1}),Ct.render(t)),L.attach(S),ut.setUniform("texture",this._physicallyCorrect?this._currentTexture:y),ut.render(t),L.attach(b),bt.setUniform("texture",S),bt.render(t),L.unbind(t),this._physicallyCorrect){var $t=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=$t}},Ja.prototype.getTargetTexture=function(){return this._texture3},Ja.prototype.setParameter=function(t,a){"maxIteration"===t?this._ssrPass.material.define("fragment","MAX_ITERATION",a):this._ssrPass.setUniform(t,a)},Ja.prototype.setPhysicallyCorrect=function(t){t?(this._normalDistribution||(this._normalDistribution=iu.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=t},Ja.prototype.setSSAOTexture=function(t){var a=this._blurPass2;t?(a.material.enableTexture("ssaoTex"),a.material.set("ssaoTex",t)):a.material.disableTexture("ssaoTex")},Ja.prototype.isFinished=function(t){return!this._physicallyCorrect||t>this._totalSamples/this._samplePerFrame},Ja.prototype.dispose=function(t){this._ssrTexture.dispose(t),this._texture2.dispose(t),this._texture3.dispose(t),this._prevTexture.dispose(t),this._currentTexture.dispose(t),this._frameBuffer.dispose(t)};const Qr=Ja,ld=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925];function cd(t,a,u,h,d){var g=t.gl;a.setUniform(g,"1i",u,d),g.activeTexture(g.TEXTURE0+d),h.isRenderable()?h.bind(t):h.unbind(t)}function Bp(t,a,u,h,d){var g,y,S,b,L=t.gl;return function(W,ut,bt){if(!b||b.material!==W.material){var Ct=W.material,Et=W.__program,Dt=Ct.get("roughness");null==Dt&&(Dt=1);var zt=Ct.get("normalMap")||a,$t=Ct.get("roughnessMap"),ae=Ct.get("bumpMap"),Jt=Ct.get("uvRepeat"),qt=Ct.get("uvOffset"),me=Ct.get("detailUvRepeat"),ge=Ct.get("detailUvOffset"),Ge=!!ae&&Ct.isTextureEnabled("bumpMap"),Oe=!!$t&&Ct.isTextureEnabled("roughnessMap"),We=Ct.isDefined("fragment","DOUBLE_SIDED");ae=ae||u,$t=$t||h,bt!==ut?(ut.set("normalMap",zt),ut.set("bumpMap",ae),ut.set("roughnessMap",$t),ut.set("useBumpMap",Ge),ut.set("useRoughnessMap",Oe),ut.set("doubleSide",We),null!=Jt&&ut.set("uvRepeat",Jt),null!=qt&&ut.set("uvOffset",qt),null!=me&&ut.set("detailUvRepeat",me),null!=ge&&ut.set("detailUvOffset",ge),ut.set("roughness",Dt)):(Et.setUniform(L,"1f","roughness",Dt),g!==zt&&cd(t,Et,"normalMap",zt,0),y!==ae&&ae&&cd(t,Et,"bumpMap",ae,1),S!==$t&&$t&&cd(t,Et,"roughnessMap",$t,2),null!=Jt&&Et.setUniform(L,"2f","uvRepeat",Jt),null!=qt&&Et.setUniform(L,"2f","uvOffset",qt),null!=me&&Et.setUniform(L,"2f","detailUvRepeat",me),null!=ge&&Et.setUniform(L,"2f","detailUvOffset",ge),Et.setUniform(L,"1i","useBumpMap",+Ge),Et.setUniform(L,"1i","useRoughnessMap",+Oe),Et.setUniform(L,"1i","doubleSide",+We)),g=zt,y=ae,S=$t,b=W}}}function _u(t){t=t||{},this._depthTex=new an({format:zr.DEPTH_COMPONENT,type:zr.UNSIGNED_INT}),this._normalTex=new an({type:zr.HALF_FLOAT}),this._framebuffer=new ve,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,ve.DEPTH_ATTACHMENT),this._normalMaterial=new Cr({shader:new rr(rr.source("ecgl.normal.vertex"),rr.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=va.createBlank("#000"),this._defaultBumpMap=va.createBlank("#000"),this._defaultRoughessMap=va.createBlank("#000"),this._debugPass=new Vn({fragment:rr.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}rr.import("@export ecgl.normal.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\n@import ecgl.common.normalMap.vertexHeader\n\n@import ecgl.common.vertexAnimation.header\n\nvoid main()\n{\n\n @import ecgl.common.vertexAnimation.main\n\n @import ecgl.common.uv.main\n\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n @import ecgl.common.normalMap.vertexMain\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n}\n\n\n@end\n\n\n@export ecgl.normal.fragment\n\n#define ROUGHNESS_CHANEL 0\n\nuniform bool useBumpMap;\nuniform bool useRoughnessMap;\nuniform bool doubleSide;\nuniform float roughness;\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n@import ecgl.common.normalMap.fragmentHeader\n@import ecgl.common.bumpMap.header\n\nuniform sampler2D roughnessMap;\n\nvoid main()\n{\n vec3 N = v_Normal;\n \n bool flipNormal = false;\n if (doubleSide) {\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n flipNormal = true;\n }\n }\n\n @import ecgl.common.normalMap.fragmentMain\n\n if (useBumpMap) {\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n }\n\n float g = 1.0 - roughness;\n\n if (useRoughnessMap) {\n float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\n }\n\n if (flipNormal) {\n N = -N;\n }\n\n gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;\n gl_FragColor.a = g;\n}\n@end"),_u.prototype.getDepthTexture=function(){return this._depthTex},_u.prototype.getNormalTexture=function(){return this._normalTex},_u.prototype.update=function(t,a,u){var h=t.getWidth(),d=t.getHeight(),g=this._depthTex,y=this._normalTex,S=this._normalMaterial;g.width=h,g.height=d,y.width=h,y.height=d;var b=a.getRenderList(u).opaque;this._framebuffer.bind(t),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.gl.disable(t.gl.BLEND),t.renderPass(b,u,{getMaterial:function(){return S},ifRender:function(L){return L.renderNormal},beforeRender:Bp(t,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap),sort:t.opaqueSortCompare}),this._framebuffer.unbind(t)},_u.prototype.renderDebug=function(t){this._debugPass.render(t)},_u.prototype.dispose=function(t){this._depthTex.dispose(t),this._normalTex.dispose(t)};const gg=_u;function Pc(t){t=t||{},this._edgePass=new Vn({fragment:rr.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",t.normalTexture),this._edgePass.setUniform("depthTexture",t.depthTexture),this._targetTexture=new an({type:zr.HALF_FLOAT}),this._frameBuffer=new ve,this._frameBuffer.attach(this._targetTexture)}Pc.prototype.update=function(t,a,u,h){var d=t.getWidth(),g=t.getHeight(),y=this._targetTexture;y.width=d,y.height=g;var S=this._frameBuffer;S.bind(t),this._edgePass.setUniform("projectionInv",a.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[d,g]),this._edgePass.setUniform("texture",u),this._edgePass.render(t),S.unbind(t)},Pc.prototype.getTargetTexture=function(){return this._targetTexture},Pc.prototype.setParameter=function(t,a){this._edgePass.setUniform(t,a)},Pc.prototype.dispose=function(t){this._targetTexture.dispose(t),this._frameBuffer.dispose(t)};const hd=Pc,Ac={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]};function Oc(t,a){return{color:{parameters:{width:t,height:a}}}}rr.import(Bn),rr.import(ho),rr.import(zs),rr.import(gs),rr.import(Zn),rr.import(Cl),rr.import(mc),rr.import(yc),rr.import(gu),rr.import("@export ecgl.dof.coc\n\nuniform sampler2D depth;\n\nuniform float zNear: 0.1;\nuniform float zFar: 2000;\n\nuniform float focalDistance: 3;\nuniform float focalRange: 1;\nuniform float focalLength: 30;\nuniform float fstop: 2.8;\n\nvarying vec2 v_Texcoord;\n\n@import clay.util.encode_float\n\nvoid main()\n{\n float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;\n\n float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));\n\n float aperture = focalLength / fstop;\n\n float coc;\n\n float uppper = focalDistance + focalRange;\n float lower = focalDistance - focalRange;\n if (dist <= uppper && dist >= lower) {\n coc = 0.5;\n }\n else {\n float focalAdjusted = dist > uppper ? uppper : lower;\n\n coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));\n coc = clamp(coc, 0.0, 2.0) / 2.00001;\n\n if (dist < lower) {\n coc = -coc;\n }\n coc = coc * 0.5 + 0.5;\n }\n\n gl_FragColor = encodeFloat(coc);\n}\n@end\n\n\n@export ecgl.dof.composite\n\n#define DEBUG 0\n\nuniform sampler2D original;\nuniform sampler2D blurred;\nuniform sampler2D nearfield;\nuniform sampler2D coc;\nuniform sampler2D nearcoc;\nvarying vec2 v_Texcoord;\n\n@import clay.util.rgbm\n@import clay.util.float\n\nvoid main()\n{\n vec4 blurredColor = texture2D(blurred, v_Texcoord);\n vec4 originalColor = texture2D(original, v_Texcoord);\n\n float fCoc = decodeFloat(texture2D(coc, v_Texcoord));\n\n fCoc = abs(fCoc * 2.0 - 1.0);\n\n float weight = smoothstep(0.0, 1.0, fCoc);\n \n#ifdef NEARFIELD_ENABLED\n vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);\n float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));\n fNearCoc = abs(fNearCoc * 2.0 - 1.0);\n\n gl_FragColor = encodeHDR(\n mix(\n nearfieldColor, mix(originalColor, blurredColor, weight),\n pow(1.0 - fNearCoc, 4.0)\n )\n );\n#else\n gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));\n#endif\n\n}\n\n@end\n\n\n\n@export ecgl.dof.diskBlur\n\n#define POISSON_KERNEL_SIZE 16;\n\nuniform sampler2D texture;\nuniform sampler2D coc;\nvarying vec2 v_Texcoord;\n\nuniform float blurRadius : 10.0;\nuniform vec2 textureSize : [512.0, 512.0];\n\nuniform vec2 poissonKernel[POISSON_KERNEL_SIZE];\n\nuniform float percent;\n\nfloat nrand(const in vec2 n) {\n return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n@import clay.util.rgbm\n@import clay.util.float\n\n\nvoid main()\n{\n vec2 offset = blurRadius / textureSize;\n\n float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );\n float cosa = cos(rnd);\n float sina = sin(rnd);\n vec4 basis = vec4(cosa, -sina, sina, cosa);\n\n#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)\n offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);\n#endif\n\n#ifdef BLUR_COC\n float cocSum = 0.0;\n#else\n vec4 color = vec4(0.0);\n#endif\n\n\n float weightSum = 0.0;\n\n for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {\n vec2 ofs = poissonKernel[i];\n\n ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));\n\n vec2 uv = v_Texcoord + ofs * offset;\n vec4 texel = texture2D(texture, uv);\n\n float w = 1.0;\n#ifdef BLUR_COC\n float fCoc = decodeFloat(texel) * 2.0 - 1.0;\n cocSum += clamp(fCoc, -1.0, 0.0) * w;\n#else\n texel = texel;\n #if !defined(BLUR_NEARFIELD)\n float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;\n w *= abs(fCoc);\n #endif\n texel.rgb *= texel.a;\n color += texel * w;\n#endif\n\n weightSum += w;\n }\n\n#ifdef BLUR_COC\n gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);\n#else\n color /= weightSum;\n color.rgb /= (color.a + 0.0001);\n gl_FragColor = color;\n#endif\n}\n\n@end"),rr.import("@export ecgl.edge\n\nuniform sampler2D texture;\n\nuniform sampler2D normalTexture;\nuniform sampler2D depthTexture;\n\nuniform mat4 projectionInv;\n\nuniform vec2 textureSize;\n\nuniform vec4 edgeColor: [0,0,0,0.8];\n\nvarying vec2 v_Texcoord;\n\nvec3 packColor(vec2 coord) {\n float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;\n vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);\n vec4 p4 = projectionInv * p;\n\n return vec3(\n texture2D(normalTexture, coord).rg,\n -p4.z / p4.w / 5.0\n );\n}\n\nvoid main() {\n vec2 cc = v_Texcoord;\n vec3 center = packColor(cc);\n\n float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;\n float dx = size / textureSize.x;\n float dy = size / textureSize.y;\n\n vec2 coord;\n vec3 topLeft = packColor(cc+vec2(-dx, -dy));\n vec3 top = packColor(cc+vec2(0.0, -dy));\n vec3 topRight = packColor(cc+vec2(dx, -dy));\n vec3 left = packColor(cc+vec2(-dx, 0.0));\n vec3 right = packColor(cc+vec2(dx, 0.0));\n vec3 bottomLeft = packColor(cc+vec2(-dx, dy));\n vec3 bottom = packColor(cc+vec2(0.0, dy));\n vec3 bottomRight = packColor(cc+vec2(dx, dy));\n\n vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;\n vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;\n\n float edge = sqrt(dot(h, h) + dot(v, v));\n\n edge = smoothstep(0.8, 1.0, edge);\n\n gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);\n}\n@end");var dd=["composite","FXAA"];function yn(){this._sourceTexture=new an({type:zr.HALF_FLOAT}),this._depthTexture=new an({format:zr.DEPTH_COMPONENT,type:zr.UNSIGNED_INT}),this._framebuffer=new ve,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,ve.DEPTH_ATTACHMENT),this._normalPass=new gg,this._compositor=function Rh(t,a){var u=new ei;a=a||{};var h={textures:{},parameters:{}};for(var g in t.parameters)h.parameters[g]=Fo(t.parameters[g]);return function Zh(t,a,u,h){if(t.textures){var d={},g=0,y=!1,S=u.textureRootPath;w.each(t.textures,function(b,L){var W,ut=b.path,bt=Fo(b.parameters);if(Array.isArray(ut)&&6===ut.length)S&&(ut=ut.map(function(Ct){return w.relative2absolute(Ct,S)})),W=new sn(bt);else{if("string"!=typeof ut)return;S&&(ut=w.relative2absolute(ut,S)),W=new an(bt)}W.load(ut),g++,W.once("success",function(){d[L]=W,0==--g&&(h(d),y=!0)})}),0===g&&!y&&h(d)}else h({})}(t,0,a,function(S){h.textures=S,function(S,b){for(var L=0;L<t.nodes.length;L++){var ut=Bh(t.nodes[L],h,a);ut&&u.addNode(ut)}}()}),u}(Ac);var t=this._compositor.getNodeByName("source");t.texture=this._sourceTexture;var a=this._compositor.getNodeByName("coc");this._sourceNode=t,this._cocNode=a,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(h){return this._compositor.getNodeByName(h)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=dd.map(function(h){return this._compositor.getNodeByName(h)},this);var u={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new bc(u),this._ssrPass=new Qr(u),this._edgePass=new hd(u)}yn.prototype.resize=function(h,d,u){d*=u=u||1;var g=this._sourceTexture,y=this._depthTexture;g.width=h*=u,g.height=d,y.width=h,y.height=d;var S={getWidth:function(){return h},getHeight:function(){return d},getDevicePixelRatio:function(){return u}};function b(L,W){if("function"==typeof L[W]){var ut=L[W].__original||L[W];L[W]=function(bt){return ut.call(this,S)},L[W].__original=ut}}this._compositor.nodes.forEach(function(L){for(var W in L.outputs){var ut=L.outputs[W].parameters;ut&&(b(ut,"width"),b(ut,"height"))}for(var bt in L.parameters)b(L.parameters,bt)}),this._width=h,this._height=d,this._dpr=u},yn.prototype.getWidth=function(){return this._width},yn.prototype.getHeight=function(){return this._height},yn.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR},yn.prototype._getPrevNode=function(t){for(var a=dd.indexOf(t.name)-1,u=this._finalNodesChain[a];u&&!this._compositor.getNodeByName(u.name);)u=this._finalNodesChain[a-=1];return u},yn.prototype._getNextNode=function(t){for(var a=dd.indexOf(t.name)+1,u=this._finalNodesChain[a];u&&!this._compositor.getNodeByName(u.name);)u=this._finalNodesChain[a+=1];return u},yn.prototype._addChainNode=function(t){var a=this._getPrevNode(t),u=this._getNextNode(t);!a||(t.inputs.texture=a.name,u?(t.outputs=Oc(this.getWidth.bind(this),this.getHeight.bind(this)),u.inputs.texture=t.name):t.outputs=null,this._compositor.addNode(t))},yn.prototype._removeChainNode=function(t){var a=this._getPrevNode(t),u=this._getNextNode(t);!a||(u?(a.outputs=Oc(this.getWidth.bind(this),this.getHeight.bind(this)),u.inputs.texture=a.name):a.outputs=null,this._compositor.removeNode(t))},yn.prototype.updateNormal=function(t,a,u,h){this._ifRenderNormalPass()&&this._normalPass.update(t,a,u)},yn.prototype.updateSSAO=function(t,a,u,h){this._ssaoPass.update(t,u,h)},yn.prototype.enableSSAO=function(){this._enableSSAO=!0},yn.prototype.disableSSAO=function(){this._enableSSAO=!1},yn.prototype.enableSSR=function(){this._enableSSR=!0},yn.prototype.disableSSR=function(){this._enableSSR=!1},yn.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()},yn.prototype.getSourceFrameBuffer=function(){return this._framebuffer},yn.prototype.getSourceTexture=function(){return this._sourceTexture},yn.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)},yn.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)},yn.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()},yn.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()},yn.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()},yn.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()},yn.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0},yn.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1},yn.prototype.enableEdge=function(){this._enableEdge=!0},yn.prototype.disableEdge=function(){this._enableEdge=!1},yn.prototype.setBloomIntensity=function(t){this._compositeNode.setParameter("bloomIntensity",t)},yn.prototype.setSSAOParameter=function(t,a){switch(t){case"quality":this._ssaoPass.setParameter("kernelSize",{low:6,medium:12,high:32,ultra:62}[a]||12);break;case"radius":this._ssaoPass.setParameter(t,a),this._ssaoPass.setParameter("bias",a/200);break;case"intensity":this._ssaoPass.setParameter(t,a)}},yn.prototype.setDOFParameter=function(t,a){switch(t){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(t,a);break;case"blurRadius":for(var u=0;u<this._dofBlurNodes.length;u++)this._dofBlurNodes[u].setParameter("blurRadius",a);break;case"quality":var h={low:4,medium:8,high:16,ultra:32}[a]||8;for(this._dofBlurKernelSize=h,u=0;u<this._dofBlurNodes.length;u++)this._dofBlurNodes[u].pass.material.define("POISSON_KERNEL_SIZE",h);this._dofBlurKernel=new Float32Array(2*h)}},yn.prototype.setSSRParameter=function(t,a){if(null!=a)switch(t){case"quality":var h={low:32,medium:16,high:8,ultra:4}[a]||16;this._ssrPass.setParameter("maxIteration",{low:10,medium:15,high:30,ultra:80}[a]||20),this._ssrPass.setParameter("pixelStride",h);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-a,1),0));break;case"physical":this.setPhysicallyCorrectSSR(a);break;default:console.warn("Unkown SSR parameter "+t)}},yn.prototype.setPhysicallyCorrectSSR=function(t){this._ssrPass.setPhysicallyCorrect(t)},yn.prototype.setEdgeColor=function(t){var a=ce.parseColor(t);this._edgePass.setParameter("edgeColor",a)},yn.prototype.setExposure=function(t){this._compositeNode.setParameter("exposure",Math.pow(2,t))},yn.prototype.setColorLookupTexture=function(t,a){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?t:"none",a,{minFilter:ce.Texture.NEAREST,magFilter:ce.Texture.NEAREST,flipY:!1})},yn.prototype.setColorCorrection=function(t,a){this._compositeNode.setParameter(t,a)},yn.prototype.isSSREnabled=function(){return this._enableSSR},yn.prototype.composite=function(t,a,u,h,d){var g=this._sourceTexture,y=g;this._enableEdge&&(this._edgePass.update(t,u,g,d),g=y=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(t,u,g,d),y=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=y,this._cocNode.setParameter("depth",this._depthTexture);for(var S=this._dofBlurKernel,b=this._dofBlurKernelSize,W=d%Math.floor(ld.length/2/b),ut=0;ut<2*b;ut++)S[ut]=ld[ut+W*b*2];for(ut=0;ut<this._dofBlurNodes.length;ut++)this._dofBlurNodes[ut].setParameter("percent",d/30),this._dofBlurNodes[ut].setParameter("poissonKernel",S);this._cocNode.setParameter("zNear",u.near),this._cocNode.setParameter("zFar",u.far),this._compositor.render(t,h)},yn.prototype.dispose=function(t){this._sourceTexture.dispose(t),this._depthTexture.dispose(t),this._framebuffer.dispose(t),this._compositor.dispose(t),this._normalPass.dispose(t),this._ssaoPass.dispose(t)};const _g=yn;function Pl(t){for(var a=[],u=0;u<30;u++)a.push([_s(u,2),_s(u,3)]);this._haltonSequence=a,this._frame=0,this._sourceTex=new an,this._sourceFb=new ve,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new an,this._outputTex=new an;var h=this._blendPass=new Vn({fragment:rr.source("clay.compositor.blend")});h.material.disableTexturesAll(),h.material.enableTexture(["texture1","texture2"]),this._blendFb=new ve({depthBuffer:!1}),this._outputPass=new Vn({fragment:rr.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(d){d.blendEquationSeparate(d.FUNC_ADD,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA)}}Pl.prototype={constructor:Pl,jitterProjection:function(t,a){var u=t.viewport,h=u.devicePixelRatio||t.getDevicePixelRatio(),d=u.width*h,g=u.height*h,y=this._haltonSequence[this._frame%this._haltonSequence.length],S=new _r;S.array[12]=(2*y[0]-1)/d,S.array[13]=(2*y[1]-1)/g,_r.mul(a.projectionMatrix,S,a.projectionMatrix),_r.invert(a.invProjectionMatrix,a.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(t,a){this._prevFrameTex.width=t,this._prevFrameTex.height=a,this._outputTex.width=t,this._outputTex.height=a,this._sourceTex.width=t,this._sourceTex.height=a,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(t,a,u){var h=this._blendPass;0===this._frame?(h.setUniform("weight1",0),h.setUniform("weight2",1)):(h.setUniform("weight1",.9),h.setUniform("weight2",.1)),h.setUniform("texture1",this._prevFrameTex),h.setUniform("texture2",a||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(t),h.render(t),this._blendFb.unbind(t),u||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(t));var d=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=d,this._frame++},dispose:function(t){this._sourceFb.dispose(t),this._blendFb.dispose(t),this._prevFrameTex.dispose(t),this._outputTex.dispose(t),this._sourceTex.dispose(t),this._outputPass.dispose(t),this._blendPass.dispose(t)}};const mg=Pl;function di(t){t=t||"perspective",this.layer=null,this.scene=new Da,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(t),this._compositor=new _g,this._temporalSS=new mg,this._shadowMapPass=new Ee;for(var a=[],u=0,h=0;h<30;h++){for(var d=[],g=0;g<6;g++)d.push(4*_s(u,2)-2),d.push(4*_s(u,3)-2),u++;a.push(d)}this._pcfKernels=a,this.scene.on("beforerender",function(y,S,b){this.needsTemporalSS()&&this._temporalSS.jitterProjection(y,b)},this)}di.prototype.setProjection=function(t){var a=this.camera;a&&a.update(),"perspective"===t?this.camera instanceof ci||(this.camera=new ci,a&&this.camera.setLocalTransform(a.localTransform)):this.camera instanceof ns||(this.camera=new ns,a&&this.camera.setLocalTransform(a.localTransform)),this.camera.near=.1,this.camera.far=2e3},di.prototype.setViewport=function(t,a,u,h,d){this.camera instanceof ci&&(this.camera.aspect=u/h),d=d||1,this.viewport.x=t,this.viewport.y=a,this.viewport.width=u,this.viewport.height=h,this.viewport.devicePixelRatio=d,this._compositor.resize(u*d,h*d),this._temporalSS.resize(u*d,h*d)},di.prototype.containPoint=function(t,a){var u=this.viewport;return a=this.layer.renderer.getHeight()-a,t>=u.x&&a>=u.y&&t<=u.x+u.width&&a<=u.y+u.height};var Zp=new ne;di.prototype.castRay=function(t,a,u){var h=this.layer.renderer,d=h.viewport;return h.viewport=this.viewport,h.screenToNDC(t,a,Zp),this.camera.castRay(Zp,u),h.viewport=d,u},di.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var t=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var a=0;a<t.transparent.length;a++){var h=t.transparent[a].geometry;h.needsSortVerticesProgressively&&h.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),h.needsSortTrianglesProgressively&&h.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()},di.prototype.render=function(t,a){this._doRender(t,a,this._frame),this._frame++},di.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively},di.prototype.needsTemporalSS=function(){var t=this._enableTemporalSS;return"auto"===t&&(t=this._enablePostEffect),t},di.prototype.hasDOF=function(){return this._enableDOF},di.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30},di.prototype._doRender=function(t,a,u){var h=this.scene,d=this.camera;this._updateTransparent(t,h,d,u=u||0),a||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(t,h,d,!0)),this._updateShadowPCFKernel(u);var g=t.clearColor;if(t.gl.clearColor(g[0],g[1],g[2],g[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(t,d),this._compositor.updateNormal(t,h,d,this._temporalSS.getFrame())),this._updateSSAO(t,h,d,this._temporalSS.getFrame()),this._enablePostEffect)(y=this._compositor.getSourceFrameBuffer()).bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),t.render(h,d,!0,!0),y.unbind(t),this.needsTemporalSS()&&a?(this._compositor.composite(t,h,d,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),t.setViewport(this.viewport),this._temporalSS.render(t)):(t.setViewport(this.viewport),this._compositor.composite(t,h,d,null,0));else if(this.needsTemporalSS()&&a){var y;(y=this._temporalSS.getSourceFrameBuffer()).bind(t),t.saveClear(),t.clearBit=t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT,t.render(h,d,!0,!0),t.restoreClear(),y.unbind(t),t.setViewport(this.viewport),this._temporalSS.render(t)}else t.setViewport(this.viewport),t.render(h,d,!0,!0)},di.prototype._updateTransparent=function(t,a,u,h){for(var d=new mr,g=new _r,y=u.getWorldPosition(),S=a.getRenderList(u).transparent,b=0;b<S.length;b++){var L=S[b],W=L.geometry;_r.invert(g,L.worldTransform),mr.transformMat4(d,y,g),W.needsSortTriangles&&W.needsSortTriangles()&&W.doSortTriangles(d,h),W.needsSortVertices&&W.needsSortVertices()&&W.doSortVertices(d,h)}},di.prototype._updateSSAO=function(t,a,u){var h=this._enableSSAO&&this._enablePostEffect;h&&this._compositor.updateSSAO(t,a,u,this._temporalSS.getFrame());for(var d=a.getRenderList(u),g=0;g<d.opaque.length;g++){var y=d.opaque[g];y.renderNormal&&y.material[h?"enableTexture":"disableTexture"]("ssaoMap"),h&&y.material.set("ssaoMap",this._compositor.getSSAOTexture())}},di.prototype._updateShadowPCFKernel=function(t){for(var a=this._pcfKernels[t%this._pcfKernels.length],h=this.scene.getRenderList(this.camera).opaque,d=0;d<h.length;d++)h[d].receiveShadow&&(h[d].material.set("pcfKernel",a),h[d].material.define("fragment","PCF_KERNEL_SIZE",a.length/2))},di.prototype.dispose=function(t){this._compositor.dispose(t.gl),this._temporalSS.dispose(t.gl),this._shadowMapPass.dispose(t)},di.prototype.setPostEffect=function(t,a){var u=this._compositor;this._enablePostEffect=t.get("enable");var h=t.getModel("bloom"),d=t.getModel("edge"),g=t.getModel("DOF",t.getModel("depthOfField")),y=t.getModel("SSAO",t.getModel("screenSpaceAmbientOcclusion")),S=t.getModel("SSR",t.getModel("screenSpaceReflection")),b=t.getModel("FXAA"),L=t.getModel("colorCorrection");h.get("enable")?u.enableBloom():u.disableBloom(),g.get("enable")?u.enableDOF():u.disableDOF(),S.get("enable")?u.enableSSR():u.disableSSR(),L.get("enable")?u.enableColorCorrection():u.disableColorCorrection(),d.get("enable")?u.enableEdge():u.disableEdge(),b.get("enable")?u.enableFXAA():u.disableFXAA(),this._enableDOF=g.get("enable"),this._enableSSAO=y.get("enable"),this._enableSSAO?u.enableSSAO():u.disableSSAO(),u.setBloomIntensity(h.get("intensity")),u.setEdgeColor(d.get("color")),u.setColorLookupTexture(L.get("lookupTexture"),a),u.setExposure(L.get("exposure")),["radius","quality","intensity"].forEach(function(W){u.setSSAOParameter(W,y.get(W))}),["quality","maxRoughness","physical"].forEach(function(W){u.setSSRParameter(W,S.get(W))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(W){u.setDOFParameter(W,g.get(W))}),["brightness","contrast","radiowavesuration"].forEach(function(W){u.setColorCorrection(W,L.get(W))})},di.prototype.setDOFFocusOnPoint=function(t){if(this._enablePostEffect)return t>this.camera.far||t<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",t),!0)},di.prototype.setTemporalSuperSampling=function(t){this._enableTemporalSS=t.get("enable")},di.prototype.isLinearSpace=function(){return this._enablePostEffect},di.prototype.setRootNode=function(t){if(this.rootNode!==t){for(var a=this.rootNode.children(),u=0;u<a.length;u++)t.add(a[u]);t!==this.scene&&this.scene.add(t),this.rootNode=t}},di.prototype.add=function(t){this.rootNode.add(t)},di.prototype.remove=function(t){this.rootNode.remove(t)},di.prototype.removeAll=function(t){this.rootNode.removeAll(t)},Object.assign(di.prototype,tt);const Us=di;function yg(t,a){var u=t.getBoxLayoutParams(),h=(0,ks.ME)(u,{width:a.getWidth(),height:a.getHeight()});h.y=a.getHeight()-h.y-h.height,this.viewGL.setViewport(h.x,h.y,h.width,h.height,a.getDevicePixelRatio());var d=t.get("boxWidth"),g=t.get("boxHeight"),y=t.get("boxDepth");this.getAxis("x").setExtent(-d/2,d/2),this.getAxis("y").setExtent(y/2,-y/2),this.getAxis("z").setExtent(-g/2,g/2),this.size=[d,g,y]}function Fp(t,a){var u={};t.eachSeries(function(d){if(d.coordinateSystem===this){var g=d.getData();["x","y","z"].forEach(function(y){g.mapDimensionsAll(y,!0).forEach(function(S){!function h(d,g){u[d]=u[d]||[1/0,-1/0],u[d][0]=Math.min(g[0],u[d][0]),u[d][1]=Math.max(g[1],u[d][1])}(y,g.getDataExtent(S,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(d){t.eachComponent(d,function(g){var y=d.charAt(0),S=g.getReferringComponents("grid3D").models[0],b=S.coordinateSystem;if(b===this){var L=b.getAxis(y);if(!L){var W=V._y.createScale(u[y]||[1/0,-1/0],g);(L=new pc(y,W)).type=g.get("type"),L.onBand="category"===L.type&&g.get("boundaryGap"),L.inverse=g.get("inverse"),g.axis=L,L.model=g,L.getLabelModel=function(){return g.getModel("axisLabel",S.getModel("axisLabel"))},L.getTickModel=function(){return g.getModel("axisTick",S.getModel("axisTick"))},b.addAxis(L)}}},this)},this),this.resize(this.model,a)}var xg={dimensions:Dh.prototype.dimensions,create:function(t,a){var u=[];t.eachComponent("grid3D",function(g){g.__viewGL=g.__viewGL||new Us;var y=new Dh;y.model=g,y.viewGL=g.__viewGL,g.coordinateSystem=y,u.push(y),y.resize=yg,y.update=Fp});var h=["xAxis3D","yAxis3D","zAxis3D"];return t.eachSeries(function(g){if("cartesian3D"===g.get("coordinateSystem")){if(null==(y=g.getReferringComponents("grid3D").models[0])){var S=function d(g,y){return h.map(function(S){var b=g.getReferringComponents(S).models[0];return null==b&&(b=y.getComponent(S)),b})}(g,t),y=S[0].getCoordSysModel();S.forEach(function(W){W.getCoordSysModel()})}g.coordinateSystem=y.coordinateSystem}}),u}};const pd=xg;var vd=V.tF.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});V._y.mixinAxisModelCommonMethods(vd);const Sg=vd;var gd={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},Tg=V.D5.merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},gd),_d=V.D5.merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},gd),Hs=V.D5.defaults({scale:!0,min:"dataMin",max:"dataMax"},_d),kp=V.D5.defaults({logBase:10},_d);kp.scale=!0;const zp={categoryAxis3D:Tg,valueAxis3D:_d,timeAxis3D:Hs,logAxis3D:kp};var md=D(872),Cg=["value","category","time","log"];function bg(t,a){return a.type||(a.data?"category":"value")}(0,V.D$)(function Pg(t){t.registerComponentModel(Na),t.registerComponentView(dc),t.registerCoordinateSystem("grid3D",pd),["x","y","z"].forEach(function(a){!function Mg(t,a,u,h,d){Cg.forEach(function(g){var y=u.extend({type:a+"Axis3D."+g,__ordinalMeta:null,mergeDefaultAndTheme:function(S,b){var L=b.getTheme();V.D5.merge(S,L.get(g+"Axis3D")),V.D5.merge(S,this.getDefaultOption()),S.type=h(a,S)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=md.Z.createByAxisModel(this))},getCategories:function(){if("category"===this.option.type)return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:V.D5.merge(V.D5.clone(zp[g+"Axis3D"]),d||{},!0)});t.registerComponentModel(y)}),t.registerSubTypeDefaulter(a+"Axis3D",V.D5.curry(h,a))}(t,a,Sg,bg,{name:a.toUpperCase()});const u=t.ComponentView.extend({type:a+"Axis3D"});t.registerComponentView(u)}),t.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(a,u){u.eachComponent({mainType:"grid3D",query:a},function(h){h.setView(a)})}),t.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(a,u){}),t.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(a,u){})});const mu={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},Up={getFilledRegions:function(t,a){var h,u=(t||[]).slice();if("string"==typeof a?h=(a=V.FU(a))&&a.geoJson:a&&a.features&&(h=a),!h)return[];for(var d={},g=h.features,y=0;y<u.length;y++)d[u[y].name]=u[y];for(y=0;y<g.length;y++){var S=g[y].properties.name;d[S]||u.push({name:S})}return u},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}};var Al=V.tF.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var t=this.option;t.regions=this.getFilledRegions(t.regions,t.map);var a=V._y.createDimensions(t.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),u=new V.aV(a,this);u.initData(t.regions);var h={};u.each(function(d){var g=u.getName(d),y=u.getItemModel(d);h[g]=y}),this._regionModelMap=h,this._data=u},getData:function(){return this._data},getRegionModel:function(t){var a=this.getData().getName(t);return this._regionModelMap[a]||new V.Hn(null,this)},getRegionPolygonCoords:function(t){var a=this.getData().getName(t),u=this.coordinateSystem.getRegion(a);return u?u.geometries:[]},getFormattedLabel:function(t,a){var u=this._data.getName(t),h=this.getRegionModel(t),d=h.get("normal"===a?["label","formatter"]:["emphasis","label","formatter"]);null==d&&(d=h.get(["label","formatter"]));var g={name:u};return"function"==typeof d?(g.status=a,d(g)):"string"==typeof d?d.replace("{a}",g.seriesName??""):u},defaultOption:{regions:[]}});V.D5.merge(Al.prototype,Up),V.D5.merge(Al.prototype,hu),V.D5.merge(Al.prototype,ls),V.D5.merge(Al.prototype,us),V.D5.merge(Al.prototype,mu);const yd=Al,Hp=xd;function xd(t,a,u){u=u||2;var S,b,L,W,ut,bt,Ct,h=a&&a.length,d=h?a[0]*u:t.length,g=Sd(t,0,d,u,!0),y=[];if(!g)return y;if(h&&(g=function Wh(t,a,u,h){var g,y,L,d=[];for(g=0,y=a.length;g<y;g++)(L=Sd(t,a[g]*h,g<y-1?a[g+1]*h:t.length,h,!1))===L.next&&(L.steiner=!0),d.push(Ng(L));for(d.sort(Eg),g=0;g<d.length;g++)wc(d[g],u),u=yu(u,u.next);return u}(t,a,g,u)),t.length>80*u){S=L=t[0],b=W=t[1];for(var Et=u;Et<d;Et+=u)(ut=t[Et])<S&&(S=ut),(bt=t[Et+1])<b&&(b=bt),ut>L&&(L=ut),bt>W&&(W=bt);Ct=Math.max(L-S,W-b)}return Ec(g,y,u,S,b,Ct),y}function Sd(t,a,u,h,d){var g,y;if(d===Yh(t,a,u,h)>0)for(g=a;g<u;g+=h)y=Vs(g,t[g],t[g+1],y);else for(g=u-h;g>=a;g-=h)y=Vs(g,t[g],t[g+1],y);return y&&Dl(y,y.next)&&(Ll(y),y=y.next),y}function yu(t,a){if(!t)return t;a||(a=t);var h,u=t;do{if(h=!1,u.steiner||!Dl(u,u.next)&&0!==Pa(u.prev,u,u.next))u=u.next;else{if(Ll(u),(u=a=u.prev)===u.next)return null;h=!0}}while(h||u!==a);return a}function Ec(t,a,u,h,d,g,y){if(t){!y&&g&&function Dg(t,a,u,h){var d=t;do{null===d.z&&(d.z=El(d.x,d.y,a,u,h)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next}while(d!==t);d.prevZ.nextZ=null,d.prevZ=null,function Lg(t){var a,u,h,d,g,y,S,b,L=1;do{for(u=t,t=null,g=null,y=0;u;){for(y++,h=u,S=0,a=0;a<L&&(S++,h=h.nextZ);a++);for(b=L;S>0||b>0&&h;)0!==S&&(0===b||!h||u.z<=h.z)?(d=u,u=u.nextZ,S--):(d=h,h=h.nextZ,b--),g?g.nextZ=d:t=d,d.prevZ=g,g=d;u=h}g.nextZ=null,L*=2}while(y>1)}(d)}(t,h,d,g);for(var b,L,S=t;t.prev!==t.next;)if(b=t.prev,L=t.next,g?Og(t,h,d,g):Ag(t))a.push(b.i/u),a.push(t.i/u),a.push(L.i/u),Ll(t),t=L.next,S=L.next;else if((t=L)===S){y?1===y?Ec(t=Ol(t,a,u),a,u,h,d,g,2):2===y&&Vp(t,a,u,h,d,g):Ec(yu(t),a,u,h,d,g,1);break}}}function Ag(t){var a=t.prev,u=t,h=t.next;if(Pa(a,u,h)>=0)return!1;for(var d=t.next.next;d!==t.prev;){if(wl(a.x,a.y,u.x,u.y,h.x,h.y,d.x,d.y)&&Pa(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function Og(t,a,u,h){var d=t.prev,g=t,y=t.next;if(Pa(d,g,y)>=0)return!1;for(var L=d.x>g.x?d.x>y.x?d.x:y.x:g.x>y.x?g.x:y.x,W=d.y>g.y?d.y>y.y?d.y:y.y:g.y>y.y?g.y:y.y,ut=El(d.x<g.x?d.x<y.x?d.x:y.x:g.x<y.x?g.x:y.x,d.y<g.y?d.y<y.y?d.y:y.y:g.y<y.y?g.y:y.y,a,u,h),bt=El(L,W,a,u,h),Ct=t.nextZ;Ct&&Ct.z<=bt;){if(Ct!==t.prev&&Ct!==t.next&&wl(d.x,d.y,g.x,g.y,y.x,y.y,Ct.x,Ct.y)&&Pa(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.nextZ}for(Ct=t.prevZ;Ct&&Ct.z>=ut;){if(Ct!==t.prev&&Ct!==t.next&&wl(d.x,d.y,g.x,g.y,y.x,y.y,Ct.x,Ct.y)&&Pa(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.prevZ}return!0}function Ol(t,a,u){var h=t;do{var d=h.prev,g=h.next.next;!Dl(d,g)&&$h(d,h,h.next,g)&&xu(d,g)&&xu(g,d)&&(a.push(d.i/u),a.push(h.i/u),a.push(g.i/u),Ll(h),Ll(h.next),h=t=g),h=h.next}while(h!==t);return h}function Vp(t,a,u,h,d,g){var y=t;do{for(var S=y.next.next;S!==y.prev;){if(y.i!==S.i&&Td(y,S)){var b=Su(y,S);return y=yu(y,y.next),b=yu(b,b.next),Ec(y,a,u,h,d,g),void Ec(b,a,u,h,d,g)}S=S.next}y=y.next}while(y!==t)}function Eg(t,a){return t.x-a.x}function wc(t,a){if(a=function wg(t,a){var y,u=a,h=t.x,d=t.y,g=-1/0;do{if(d<=u.y&&d>=u.next.y&&u.next.y!==u.y){var S=u.x+(d-u.y)*(u.next.x-u.x)/(u.next.y-u.y);if(S<=h&&S>g){if(g=S,S===h){if(d===u.y)return u;if(d===u.next.y)return u.next}y=u.x<u.next.x?u:u.next}}u=u.next}while(u!==a);if(!y)return null;if(h===g)return y.prev;var bt,b=y,L=y.x,W=y.y,ut=1/0;for(u=y.next;u!==b;)h>=u.x&&u.x>=L&&h!==u.x&&wl(d<W?h:g,d,L,W,d<W?g:h,d,u.x,u.y)&&((bt=Math.abs(d-u.y)/(h-u.x))<ut||bt===ut&&u.x>y.x)&&xu(u,t)&&(y=u,ut=bt),u=u.next;return y}(t,a),a){var u=Su(a,t);yu(u,u.next)}}function El(t,a,u,h,d){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-u)/d)|t<<8))|t<<4))|t<<2))|t<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-h)/d)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function Ng(t){var a=t,u=t;do{a.x<u.x&&(u=a),a=a.next}while(a!==t);return u}function wl(t,a,u,h,d,g,y,S){return(d-y)*(a-S)-(t-y)*(g-S)>=0&&(t-y)*(h-S)-(u-y)*(a-S)>=0&&(u-y)*(g-S)-(d-y)*(h-S)>=0}function Td(t,a){return t.next.i!==a.i&&t.prev.i!==a.i&&!function Xh(t,a){var u=t;do{if(u.i!==t.i&&u.next.i!==t.i&&u.i!==a.i&&u.next.i!==a.i&&$h(u,u.next,t,a))return!0;u=u.next}while(u!==t);return!1}(t,a)&&xu(t,a)&&xu(a,t)&&function Dc(t,a){var u=t,h=!1,d=(t.x+a.x)/2,g=(t.y+a.y)/2;do{u.y>g!=u.next.y>g&&u.next.y!==u.y&&d<(u.next.x-u.x)*(g-u.y)/(u.next.y-u.y)+u.x&&(h=!h),u=u.next}while(u!==t);return h}(t,a)}function Pa(t,a,u){return(a.y-t.y)*(u.x-a.x)-(a.x-t.x)*(u.y-a.y)}function Dl(t,a){return t.x===a.x&&t.y===a.y}function $h(t,a,u,h){return!!(Dl(t,a)&&Dl(u,h)||Dl(t,h)&&Dl(u,a))||Pa(t,a,u)>0!=Pa(t,a,h)>0&&Pa(u,h,t)>0!=Pa(u,h,a)>0}function xu(t,a){return Pa(t.prev,t,t.next)<0?Pa(t,a,t.next)>=0&&Pa(t,t.prev,a)>=0:Pa(t,a,t.prev)<0||Pa(t,t.next,a)<0}function Su(t,a){var u=new Lc(t.i,t.x,t.y),h=new Lc(a.i,a.x,a.y),d=t.next,g=a.prev;return t.next=a,a.prev=t,u.next=d,d.prev=u,h.next=u,u.prev=h,g.next=h,h.prev=g,h}function Vs(t,a,u,h){var d=new Lc(t,a,u);return h?(d.next=h.next,d.prev=h,h.next.prev=d,h.next=d):(d.prev=d,d.next=d),d}function Ll(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Lc(t,a,u){this.i=t,this.x=a,this.y=u,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yh(t,a,u,h){for(var d=0,g=a,y=u-h;g<u;g+=h)d+=(t[y]-t[g])*(t[g+1]+t[y+1]),y=g;return d}function Cd(t,a,u){var h=t[a];t[a]=t[u],t[u]=h}function Nc(t,a,u,h,d){var g=u,y=t[a];Cd(t,a,h);for(var S=u;S<h;S++)d(t[S],y)<0&&(Cd(t,S,g),g++);return Cd(t,h,g),g}function Gi(t,a,u,h){if(u<h){var g=Nc(t,Math.floor((u+h)/2),u,h,a);Gi(t,a,u,g-1),Gi(t,a,g+1,h)}}function Md(){this._parts=[]}xd.deviation=function(t,a,u,h){var d=a&&a.length,y=Math.abs(Yh(t,0,d?a[0]*u:t.length,u));if(d)for(var S=0,b=a.length;S<b;S++)y-=Math.abs(Yh(t,a[S]*u,S<b-1?a[S+1]*u:t.length,u));var ut=0;for(S=0;S<h.length;S+=3){var bt=h[S]*u,Ct=h[S+1]*u,Et=h[S+2]*u;ut+=Math.abs((t[bt]-t[Et])*(t[Ct+1]-t[bt+1])-(t[bt]-t[Ct])*(t[Et+1]-t[bt+1]))}return 0===y&&0===ut?0:Math.abs((ut-y)/y)},Md.prototype.step=function(t,a,u){var h=t.length;if(0===u){this._parts=[],this._sorted=!1;var d=Math.floor(h/2);this._parts.push({pivot:d,left:0,right:h-1}),this._currentSortPartIdx=0}if(!this._sorted){var g=this._parts;if(0===g.length)return this._sorted=!0,!0;if(g.length<512){for(var y=0;y<g.length;y++)g[y].pivot=Nc(t,g[y].pivot,g[y].left,g[y].right,a);var S=[];for(y=0;y<g.length;y++){var b,L;(L=g[y].pivot-1)>(b=g[y].left)&&S.push({pivot:Math.floor((L+b)/2),left:b,right:L}),(L=g[y].right)>(b=g[y].pivot+1)&&S.push({pivot:Math.floor((L+b)/2),left:b,right:L})}g=this._parts=S}else for(y=0;y<Math.floor(g.length/10);y++){var W=g.length-1-this._currentSortPartIdx;if(Gi(t,a,g[W].left,g[W].right),this._currentSortPartIdx++,this._currentSortPartIdx===g.length)return this._sorted=!0,!0}return!1}},Md.sort=Gi;const Ic=Md;var Tu=gi.vec3,bd=Tu.create(),Wp=Tu.create(),Pd=Tu.create();const Ad={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(t,a){var u=this.indices;if(0===a){var h=this.attributes.position;t=t.array,(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new u.constructor(u.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var g,d=0,y=0;y<u.length;){h.get(u[y++],bd),h.get(u[y++],Wp),h.get(u[y++],Pd);var S=Tu.sqrDist(bd,t),b=Tu.sqrDist(Wp,t),L=Tu.sqrDist(Pd,t),W=Math.min(S,b);W=Math.min(W,L),3===y?(g=W,W=0):W-=g,this._triangleZList[d++]=W}}var ut=this._sortedTriangleIndices;for(y=0;y<ut.length;y++)ut[y]=y;if(this.triangleCount<2e4)0===a&&this._simpleSort(!0);else for(y=0;y<3;y++)this._progressiveQuickSort(3*a+y);var bt=this._indicesTmp,Ct=this._triangleZListTmp,Et=this._triangleZList;for(y=0;y<this.triangleCount;y++){var Dt=3*ut[y],zt=3*y;bt[zt++]=u[Dt++],bt[zt++]=u[Dt++],bt[zt]=u[Dt],Ct[y]=Et[ut[y]]}var $t=this._indicesTmp;this._indicesTmp=this.indices,this.indices=$t,$t=this._triangleZListTmp,this._triangleZListTmp=this._triangleZList,this._triangleZList=$t,this.dirtyIndices()},_simpleSort:function(t){var a=this._triangleZList,u=this._sortedTriangleIndices;function h(d,g){return a[g]-a[d]}t?Array.prototype.sort.call(u,h):Ic.sort(u,h,0,u.length-1)},_progressiveQuickSort:function(t){var a=this._triangleZList,u=this._sortedTriangleIndices;this._quickSort=this._quickSort||new Ic,this._quickSort.step(u,function(h,d){return a[d]-a[h]},t)}};function wi(t,a){const u=t.getItemVisual(a,"style");if(u)return u[t.getVisual("drawType")]}function $i(t,a){const u=t.getItemVisual(a,"style");return u&&u.opacity}function Ws(t,a,u){this._labelsMesh=new cc,this._labelTextureSurface=new sc({width:512,height:512,devicePixelRatio:u.getDevicePixelRatio(),onupdate:function(){u.getZr().refresh()}}),this._api=u,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}Ws.prototype.getLabelPosition=function(t,a,u){return[0,0,0]},Ws.prototype.getLabelDistance=function(t,a,u){return 0},Ws.prototype.getMesh=function(){return this._labelsMesh},Ws.prototype.updateData=function(t,a,u){null==a&&(a=0),null==u&&(u=t.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==u-a)&&(this._labelsVisibilitiesBits=new Uint8Array(u-a));for(var h=["label","show"],d=["emphasis","label","show"],g=a;g<u;g++){var y=t.getItemModel(g),S=y.get(h),b=y.get(d);null==b&&(b=S),this._labelsVisibilitiesBits[g-a]=(S?1:0)|(b?2:0)}this._start=a,this._end=u,this._data=t},Ws.prototype.updateLabels=function(t){if(this._data){for(var a=(t=t||[]).length>0,u={},h=0;h<t.length;h++)u[t[h]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var d=["label"],g=["emphasis","label"],y=this._data.hostModel,S=this._data,b=y.getModel(d),L=y.getModel(g,b),W={left:"right",right:"left",top:"center",bottom:"center"},ut={left:"middle",right:"middle",top:"bottom",bottom:"top"},bt=this._start;bt<this._end;bt++){var Ct=!1;if(a&&u[bt]&&(Ct=!0),this._labelsVisibilitiesBits[bt-this._start]&(Ct?2:1)){var zt=S.getItemModel(bt).getModel(Ct?g:d,Ct?L:b),$t=zt.get("distance")||0,ae=zt.get("position"),Jt=this._api.getDevicePixelRatio(),qt=y.getFormattedLabel(bt,Ct?"emphasis":"normal");if(null==qt||""===qt)return;var me=new V.Q.Text({style:(0,gl.Lr)(zt,{text:qt,fill:zt.get("color")||wi(S,bt)||"#000",align:"left",verticalAlign:"top",opacity:pn.firstNotNull(zt.get("opacity"),$i(S,bt),1)})}),ge=me.getBoundingRect();ge.height*=1.2;var Oe=this._labelTextureSurface.add(me),We=W[ae]||"center",ar=ut[ae]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(bt,ae,$t),[ge.width*Jt,ge.height*Jt],Oe,We,ar,this.getLabelDistance(bt,ae,$t)*Jt)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}},Ws.prototype.dispose=function(){this._labelTextureSurface.dispose()};const Bc=Ws;var Aa=gi.vec3;function Ed(t){this.rootNode=new ce.Node,this._triangulationResults={},this._shadersMap=ce.COMMON_SHADERS.filter(function(u){return"shadow"!==u}).reduce(function(u,h){return u[h]=ce.createShader("ecgl."+h),u},{}),this._linesShader=ce.createShader("ecgl.meshLines3D");var a={};ce.COMMON_SHADERS.forEach(function(u){a[u]=new ce.Material({shader:ce.createShader("ecgl."+u)})}),this._groundMaterials=a,this._groundMesh=new ce.Mesh({geometry:new ce.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new Bc(512,512,t),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=t}ce.Shader.import(Ia),Ed.prototype={constructor:Ed,extrudeY:!0,update:function(t,a,u,h,d){var g=t.getData();null==h&&(h=0),null==d&&(d=g.count()),this._startIndex=h,this._endIndex=d-1,this._triangulation(t,h,d);var y=this._getShader(t.get("shading"));this._prepareMesh(t,y,u,h,d),this.rootNode.updateWorldTransform(),this._updateRegionMesh(t,u,h,d);var S=t.coordinateSystem;"geo3D"===S.type&&this._updateGroundPlane(t,S,u);var b=this;this._labelsBuilder.updateData(g,h,d),this._labelsBuilder.getLabelPosition=function(L,W,ut){var bt=g.getName(L),Et=ut;if("geo3D"===S.type){var Dt=S.getRegion(bt);return Dt?(Ct=Dt.getCenter(),S.dataToPoint([Ct[0],Ct[1],Et])):[NaN,NaN,NaN]}var $t=b._triangulationResults[L-b._startIndex],Ct=b.extrudeY?[($t.max[0]+$t.min[0])/2,$t.max[1]+Et,($t.max[2]+$t.min[2])/2]:[($t.max[0]+$t.min[0])/2,($t.max[1]+$t.min[1])/2,$t.max[2]+Et]},this._data=g,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(t),this._lastHoverDataIndex=0},_initMeshes:function(){var t=this,u=function a(){var d=new ce.Mesh({name:"Polygon",material:new ce.Material({shader:t._shadersMap.lambert}),geometry:new ce.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(d.geometry,Ad),d}(),h=new ce.Mesh({material:new ce.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new Zo({useNativeLine:!1})});this.rootNode.add(u),this.rootNode.add(h),u.material.define("both","VERTEX_COLOR"),u.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=u,this._linesMesh=h,this.rootNode.add(this._groundMesh)},_getShader:function(t){var a=this._shadersMap[t];return a||(a=this._shadersMap.lambert),a.__shading=t,a},_prepareMesh:function(t,a,u,h,d){for(var g=0,y=0,S=0,b=0,L=h;L<d;L++){var W=this._getRegionPolygonInfo(L),ut=this._getRegionLinesInfo(L,t,this._linesMesh.geometry);g+=W.vertexCount,y+=W.triangleCount,S+=ut.vertexCount,b+=ut.triangleCount}var bt=this._polygonMesh,Ct=bt.geometry;["position","normal","texcoord0","color"].forEach(function(Et){Ct.attributes[Et].init(g)}),Ct.indices=g>65535?new Uint32Array(3*y):new Uint16Array(3*y),bt.material.shader!==a&&bt.material.attachShader(a,!0),ce.setMaterialFromModel(a.__shading,bt.material,t,u),S>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(S),this._linesMesh.geometry.setTriangleCount(b)),this._dataIndexOfVertex=new Uint32Array(g),this._vertexRangeOfDataIndex=new Uint32Array(2*(d-h))},_updateRegionMesh:function(t,a,u,h){for(var d=t.getData(),g=0,y=0,S=!1,ge=this._polygonMesh,b=this._linesMesh,L=u;L<h;L++){var W=t.getRegionModel(L),ut=W.getModel("itemStyle"),bt=pn.firstNotNull(wi(d,L),ut.get("color"),"#fff"),Ct=pn.firstNotNull($i(d,L),ut.get("opacity"),1),Et=ce.parseColor(bt),Dt=ce.parseColor(ut.get("borderColor"));Et[3]*=Ct,Dt[3]*=Ct;var zt=Et[3]<.99;ge.material.set("color",[1,1,1,1]),S=S||zt;for(var $t=pn.firstNotNull(W.get("height",!0),t.get("regionHeight")),ae=this._updatePolygonGeometry(t,ge.geometry,L,$t,g,y,Et),Jt=g;Jt<ae.vertexOffset;Jt++)this._dataIndexOfVertex[Jt]=L;this._vertexRangeOfDataIndex[2*(L-u)]=g,this._vertexRangeOfDataIndex[2*(L-u)+1]=ae.vertexOffset,g=ae.vertexOffset,y=ae.triangleOffset;var qt=ut.get("borderWidth"),me=qt>0;me&&(qt*=a.getDevicePixelRatio(),this._updateLinesGeometry(b.geometry,t,L,$t,qt,t.coordinateSystem.transform)),b.invisible=!me,b.material.set({color:Dt})}(ge=this._polygonMesh).material.transparent=S,ge.material.depthMask=!S,ge.geometry.updateBoundingBox(),ge.frontFace=this.extrudeY?ce.Mesh.CCW:ce.Mesh.CW,ge.material.get("normalMap")&&ge.geometry.generateTangents(),ge.seriesIndex=t.seriesIndex,ge.on("mousemove",this._onmousemove,this),ge.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(t){var a=t.getModel("debug.wireframe");if(a.get("show")){var u=ce.parseColor(a.get("lineStyle.color")||"rgba(0,0,0,0.5)"),h=pn.firstNotNull(a.get("lineStyle.width"),1),d=this._polygonMesh;d.geometry.generateBarycentric(),d.material.define("both","WIREFRAME_TRIANGLE"),d.material.set("wireframeLineColor",u),d.material.set("wireframeLineWidth",h)}},_onmousemove:function(t){var a=this._dataIndexOfVertex[t.triangle[0]];null==a&&(a=-1),a!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(a),this._labelsBuilder.updateLabels([a])),this._lastHoverDataIndex=a,this._polygonMesh.dataIndex=a},_onmouseout:function(t){t.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(t,a,u){var h=t.getModel("groundPlane",t);if(this._groundMesh.invisible=!h.get("show",!0),!this._groundMesh.invisible){var d=t.get("shading"),g=this._groundMaterials[d];g||(g=this._groundMaterials.lambert),ce.setMaterialFromModel(d,g,h,u),g.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=g,this._groundMesh.material.set("color",ce.parseColor(h.get("color"))),this._groundMesh.scale.set(a.size[0],a.size[2],1)}},_triangulation:function(t,a,u){this._triangulationResults=[];for(var h=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0],g=t.coordinateSystem,y=a;y<u;y++){for(var S=[],b=t.getRegionPolygonCoords(y),L=0;L<b.length;L++){var W=b[L].exterior,ut=b[L].interiors,bt=[],Ct=[];if(!(W.length<3)){for(var Et=0,Dt=0;Dt<W.length;Dt++)bt[Et++]=(zt=W[Dt])[0],bt[Et++]=zt[1];for(Dt=0;Dt<ut.length;Dt++)if(!(ut[Dt].length<3)){for(var $t=bt.length/2,ae=0;ae<ut[Dt].length;ae++){var zt;bt.push((zt=ut[Dt][ae])[0]),bt.push(zt[1])}Ct.push($t)}var Jt=Hp(bt,Ct),qt=new Float64Array(bt.length/2*3),me=[],ge=[1/0,1/0,1/0],Ge=[-1/0,-1/0,-1/0],Oe=0;for(Dt=0;Dt<bt.length;)Aa.set(me,bt[Dt++],0,bt[Dt++]),g&&g.transform&&Aa.transformMat4(me,me,g.transform),Aa.min(ge,ge,me),Aa.max(Ge,Ge,me),qt[Oe++]=me[0],qt[Oe++]=me[1],qt[Oe++]=me[2];Aa.min(h,h,ge),Aa.max(d,d,Ge),S.push({points:qt,indices:Jt,min:ge,max:Ge})}}this._triangulationResults.push(S)}this._geoBoundingBox=[h,d]},_getRegionPolygonInfo:function(t){for(var a=this._triangulationResults[t-this._startIndex],u=0,h=0,d=0;d<a.length;d++)u+=a[d].points.length/3,h+=a[d].indices.length/3;return{vertexCount:2*u+4*u,triangleCount:2*h+2*u}},_updatePolygonGeometry:function(t,a,u,h,d,g,y){var S=t.get("projectUVOnGround"),b=a.attributes.position,L=a.attributes.normal,W=a.attributes.texcoord0,ut=a.attributes.color,bt=this._triangulationResults[u-this._startIndex],Ct=ut.value&&y,Et=a.indices,Dt=this.extrudeY?1:2,zt=this.extrudeY?2:1,$t=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],ae=Aa.mul([],this._geoBoundingBox[0],$t),Jt=Aa.mul([],this._geoBoundingBox[1],$t),qt=Math.max(Jt[0]-ae[0],Jt[2]-ae[2]);function ge(Ei,ua,Yi){var Fi=d;!function me(Ei,ua,Yi){for(var Fi=Ei.points,jc=Fi.length,ki=[],zo=[],ca=0;ca<jc;ca+=3)ki[0]=Fi[ca],ki[Dt]=ua,ki[zt]=Fi[ca+2],zo[0]=(Fi[ca]*$t[0]-ae[0])/qt,zo[1]=(Fi[ca+2]*$t[zt]-ae[2])/qt,b.set(d,ki),Ct&&ut.set(d,y),W.set(d++,zo)}(Ei,ua);for(var jc=Ei.indices.length,ki=0;ki<jc;ki++)Et[3*g+ki]=Ei.indices[ki]+Fi;g+=Ei.indices.length/3}for(var Ge=this.extrudeY?[0,1,0]:[0,0,1],Oe=Aa.negate([],Ge),We=0;We<bt.length;We++){var ar=d,Ke=bt[We];ge(Ke,0),ge(Ke,h);for(var lr=Ke.points.length/3,vr=0;vr<lr;vr++)L.set(ar+vr,Oe),L.set(ar+vr+lr,Ge);var nr=[0,3,1,1,3,2],Sr=[[],[],[],[]],Er=[],Wr=[],Tr=[],wn=[],Gr=0;for(vr=0;vr<lr;vr++){for(var Kn=(vr+1)%lr,Dn=(Ke.points[3*Kn]-Ke.points[3*vr])*$t[0],ri=(Ke.points[3*Kn+2]-Ke.points[3*vr+2])*$t[zt],ni=Math.sqrt(Dn*Dn+ri*ri),xn=0;xn<4;xn++){var Zi=0===xn||3===xn,mi=3*(Zi?vr:Kn);Sr[xn][0]=Ke.points[mi],Sr[xn][Dt]=xn>1?h:0,Sr[xn][zt]=Ke.points[mi+2],b.set(d+xn,Sr[xn]),S?(wn[0]=(Ke.points[mi]*$t[0]-ae[0])/qt,wn[1]=(Ke.points[mi+2]*$t[zt]-ae[zt])/qt):(wn[0]=(Zi?Gr:Gr+ni)/qt,wn[1]=(Sr[xn][Dt]*$t[Dt]-ae[Dt])/qt),W.set(d+xn,wn)}for(Aa.sub(Er,Sr[1],Sr[0]),Aa.sub(Wr,Sr[3],Sr[0]),Aa.cross(Tr,Er,Wr),Aa.normalize(Tr,Tr),xn=0;xn<4;xn++)L.set(d+xn,Tr),Ct&&ut.set(d+xn,y);for(xn=0;xn<6;xn++)Et[3*g+xn]=nr[xn]+d;d+=4,g+=2,Gr+=ni}}return a.dirty(),{vertexOffset:d,triangleOffset:g}},_getRegionLinesInfo:function(t,a,u){var h=0,d=0;return a.getRegionModel(t).getModel("itemStyle").get("borderWidth")>0&&a.getRegionPolygonCoords(t).forEach(function(L){var W=L.exterior,ut=L.interiors;h+=u.getPolylineVertexCount(W),d+=u.getPolylineTriangleCount(W);for(var bt=0;bt<ut.length;bt++)h+=u.getPolylineVertexCount(ut[bt]),d+=u.getPolylineTriangleCount(ut[bt])},this),{vertexCount:h,triangleCount:d}},_updateLinesGeometry:function(t,a,u,h,d,g){function y(L){for(var W=new Float64Array(3*L.length),ut=0,bt=[],Ct=0;Ct<L.length;Ct++)bt[0]=L[Ct][0],bt[1]=h+.1,bt[2]=L[Ct][1],g&&Aa.transformMat4(bt,bt,g),W[ut++]=bt[0],W[ut++]=bt[1],W[ut++]=bt[2];return W}var S=[1,1,1,1];a.getRegionPolygonCoords(u).forEach(function(L){var ut=L.interiors;t.addPolyline(y(L.exterior),S,d);for(var bt=0;bt<ut.length;bt++)t.addPolyline(y(ut[bt]),S,d)})},highlight:function(t){var a=this._data;if(a){var h=a.getItemModel(t).getModel(["emphasis","itemStyle"]),d=h.get("color"),g=pn.firstNotNull(h.get("opacity"),$i(a,t),1);if(null==d){var y=wi(a,t);d=V.$_.lift(y,-.4)}null==g&&(g=$i(a,t));var S=ce.parseColor(d);S[3]*=g,this._setColorOfDataIndex(a,t,S)}},downplay:function(t){var a=this._data;if(a){var u=a.getItemModel(t),h=pn.firstNotNull(wi(a,t),u.get(["itemStyle","color"]),"#fff"),d=pn.firstNotNull($i(a,t),u.get(["itemStyle","opacity"]),1),g=ce.parseColor(h);g[3]*=d,this._setColorOfDataIndex(a,t,g)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(t,a,u){if(!(a<this._startIndex&&a>this._endIndex)){for(var h=this._vertexRangeOfDataIndex[2*(a-=this._startIndex)];h<this._vertexRangeOfDataIndex[2*a+1];h++)this._polygonMesh.geometry.attributes.color.set(h,u);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};const Kh=Ed,Rg=V.Ir.extend({type:"geo3D",__ecgl__:!0,init:function(t,a){this._geo3DBuilder=new Kh(a),this.groupGL=new ce.Node,this._lightRoot=new ce.Node,this._sceneHelper=new Fs(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new _l({zr:a.getZr()}),this._control.init()},render:function(t,a,u){this.groupGL.add(this._geo3DBuilder.rootNode);var h=t.coordinateSystem;if(h&&h.viewGL){h.viewGL.add(this._lightRoot),t.get("show")?h.viewGL.add(this.groupGL):h.viewGL.remove(this.groupGL);var d=this._control;d.setViewGL(h.viewGL);var g=t.getModel("viewControl");d.setFromViewControlModel(g,0),this._sceneHelper.setScene(h.viewGL.scene),this._sceneHelper.updateLight(t),h.viewGL.setPostEffect(t.getModel("postEffect"),u),h.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._geo3DBuilder.update(t,a,u,0,t.getData().count());var y=h.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(S){S.material&&S.material[y]("fragment","SRGB_DECODE")}),d.off("update"),d.on("update",function(){u.dispatchAction({type:"geo3DChangeCamera",alpha:d.getAlpha(),beta:d.getBeta(),distance:d.getDistance(),center:d.getCenter(),from:this.uid,geo3DId:t.id})}),d.update()}},afterRender:function(t,a,u,h){var d=h.renderer;this._sceneHelper.updateAmbientCubemap(d,t,u),this._sceneHelper.updateSkybox(d,t,u)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}});var Bg=D(9356),$p={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},Zg=gi.vec3,Mu=gi.mat4,Fg=[Bg.Z,function Gg(t,a){if("world"===t){var u=$p[a.name];u&&a.setCenter([u[0],u[1]])}}];function wd(t,a,u,h,d){this.name=t,this.map=a,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(u,h,d),this.transform=Mu.identity(new Float64Array(16)),this.invTransform=Mu.identity(new Float64Array(16)),this.extrudeY=!0}wd.prototype={constructor:wd,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(t,a,u){var h=V.Nu||V.pQ;try{this.regions=t?h(t):[]}catch(L){throw"Invalid geoJson format\n"+L}a=a||{},u=u||{};for(var d=this.regions,g={},y=0;y<d.length;y++){var S=d[y].name;d[y].name=S=u[S]||S,g[S]=d[y],this.addGeoCoord(S,d[y].getCenter());var b=a[S];b&&d[y].transformTo(b.left,b.top,b.width,b.height)}this._regionsMap=g,this._geoRect=null,Fg.forEach(function(L){L(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var t,a=this.regions,u=0;u<a.length;u++){var h=a[u].getBoundingRect();(t=t||h.clone()).union(h)}return this._geoRect=t||new V.Q.BoundingRect(0,0,0,0)},addGeoCoord:function(t,a){this._nameCoordMap[t]=a},getRegion:function(t){return this._regionsMap[t]},getRegionByCoord:function(t){for(var a=this.regions,u=0;u<a.length;u++)if(a[u].contain(t))return a[u]},setSize:function(t,a,u){this.size=[t,a,u];var h=this.getGeoBoundingRect(),d=t/h.width,g=-u/h.height,y=-t/2-h.x*d,S=u/2-h.y*g,b=this.extrudeY?[y,0,S]:[y,S,0],L=this.extrudeY?[d,1,g]:[d,g,1],W=this.transform;Mu.identity(W),Mu.translate(W,W,b),Mu.scale(W,W,L),Mu.invert(this.invTransform,W)},dataToPoint:function(t,a){a=a||[];var u=this.extrudeY?1:2,h=this.extrudeY?2:1,d=t[2];return isNaN(d)&&(d=0),a[0]=t[0],a[h]=t[1],a[u]=this.altitudeAxis?this.altitudeAxis.dataToCoord(d):0,a[u]+=this.regionHeight,Zg.transformMat4(a,a,this.transform),a},pointToData:function(t,a){}};const Dd=wd;function kg(t,a){var u=t.getBoxLayoutParams(),h=(0,ks.ME)(u,{width:a.getWidth(),height:a.getHeight()});h.y=a.getHeight()-h.y-h.height,this.viewGL.setViewport(h.x,h.y,h.width,h.height,a.getDevicePixelRatio());var d=this.getGeoBoundingRect(),g=d.width/d.height*(t.get("aspectScale")||.75),y=t.get("boxWidth"),S=t.get("boxDepth"),b=t.get("boxHeight");null==b&&(b=5),isNaN(y)&&isNaN(S)&&(y=100),isNaN(S)?S=y/g:isNaN(y)&&(y=S/g),this.setSize(y,b,S),this.regionHeight=t.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(b-this.regionHeight,0))}function zg(t,a){var u=[1/0,-1/0];if(t.eachSeries(function(d){if(d.coordinateSystem===this&&"series.map3D"!==d.type){var g=d.getData(),y=d.coordDimToDataDim("alt"),S=y&&y[0];if(S){var b=g.getDataExtent(S,!0);u[0]=Math.min(u[0],b[0]),u[1]=Math.max(u[1],b[1])}}},this),u&&isFinite(u[1]-u[0])){var h=V._y.createScale(u,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new V.RD("altitude",h),this.resize(this.model,a)}}var Ld=0,Xp={dimensions:Dd.prototype.dimensions,create:function(t,a){var u=[];if(!V.FU)throw new Error("geo3D component depends on geo component");function h(d,g){var y=Xp.createGeo3D(d);d.__viewGL=d.__viewGL||new Us,y.viewGL=d.__viewGL,d.coordinateSystem=y,y.model=d,u.push(y),y.resize=kg,y.resize(d,a),y.update=zg}return t.eachComponent("geo3D",function(d,g){h(d)}),t.eachSeriesByType("map3D",function(d,g){var y=d.get("coordinateSystem");null==y&&(y="geo3D"),"geo3D"===y&&h(d)}),t.eachSeries(function(d){if("geo3D"===d.get("coordinateSystem")){if("series.map3D"===d.type)return;var g=d.getReferringComponents("geo3D").models[0];if(g||(g=t.getComponent("geo3D")),!g)throw new Error('geo "'+pn.firstNotNull(d.get("geo3DIndex"),d.get("geo3DId"),0)+'" not found');d.coordinateSystem=g.coordinateSystem}}),u},createGeo3D:function(t){var u,a=t.get("map");return"string"==typeof a?(u=a,a=V.FU(a)):a&&a.features&&(a={geoJson:a}),null==u&&(u="GEO_ANONYMOUS_"+Ld++),new Dd(u+Ld++,u,a&&a.geoJson,a&&a.specialAreas,t.get("nameMap"))}};const Yp=Xp;function Kp(t){t.registerComponentModel(yd),t.registerComponentView(Rg),t.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(a,u){u.eachComponent({mainType:"geo3D",query:a},function(h){h.setView(a)})}),t.registerCoordinateSystem("geo3D",Yp)}function Gc(t,a){t.id=t.id||t.name||a+""}(0,V.D$)(Kp);var Nl=V.tF.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){Nl.superApply(this,"init",arguments),V.D5.each(this.option.layers,function(t,a){V.D5.merge(t,this.defaultLayerOption),Gc(t,a)},this)},mergeOption:function(t){var a=this.option.layers;function u(y){return V.D5.reduce(y,function(S,b,L){return Gc(b,L),S[b.id]=b,S},{})}if(this.option.layers=null,Nl.superApply(this,"mergeOption",arguments),a&&a.length){var h=u(t.layers),d=u(a);for(var g in h)d[g]?V.D5.merge(d[g],h[g],!0):a.push(t.layers[g]);this.option.layers=a}V.D5.each(this.option.layers,function(y){V.D5.merge(y,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(t,a,u){this.displacementData=t,this.displacementWidth=a,this.displacementHeight=u},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var t=this.getDisplacementTexture(),a=this.get("displacementScale");return(!t||"none"===t)&&(a=0),a},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var t=this.getDisplacementTexture(),a=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==t||this._displacementScale!==a,this._displacementTexture=t,this._displacementScale=a},isDisplacementChanged:function(){return this._displacementChanged}});V.D5.merge(Nl.prototype,hu),V.D5.merge(Nl.prototype,ls),V.D5.merge(Nl.prototype,us),V.D5.merge(Nl.prototype,mu);const Nd=Nl;var Zc=Math.PI,Qa=Math.sin,qa=Math.cos,Id=Math.tan,jp=Math.asin,Jp=Math.atan2,ms=Zc/180,jh=23.4397*ms;function Fc(t,a){return Jp(Qa(t)*qa(jh)-Id(a)*Qa(jh),qa(t))}function kc(t,a){return jp(Qa(a)*qa(jh)+qa(a)*Qa(jh)*Qa(t))}function qp(t,a,u){return Jp(Qa(t),qa(t)*Qa(a)-Id(u)*qa(a))}function Gd(t,a,u){return jp(Qa(a)*Qa(u)+qa(a)*qa(u)*qa(t))}var Il={};Il.getPosition=function(t,a,u){var h=ms*-u,d=ms*a,g=function Bd(t){return function Qp(t){return t.valueOf()/864e5-.5+2440588}(t)-2451545}(t),y=function $g(t){var a=function Wg(t){return ms*(357.5291+.98560028*t)}(t),u=function tv(t){return t+ms*(1.9148*Qa(t)+.02*Qa(2*t)+3e-4*Qa(3*t))+102.9372*ms+Zc}(a);return{dec:kc(u,0),ra:Fc(u,0)}}(g),S=function Zd(t,a){return ms*(280.16+360.9856235*t)-a}(g,h)-y.ra;return{azimuth:qp(S,d,y.dec),altitude:Gd(S,d,y.dec)}};const Xg=Il;ce.Shader.import(mh),ce.Shader.import("@export ecgl.atmosphere.vertex\nattribute vec3 position: POSITION;\nattribute vec3 normal : NORMAL;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;\n\nvarying vec3 v_Normal;\n\nvoid main() {\n v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end\n\n\n@export ecgl.atmosphere.fragment\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform float glowPower;\nuniform vec3 glowColor;\n\nvarying vec3 v_Normal;\n\nvoid main() {\n float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor = vec4(glowColor, intensity * intensity);\n}\n@end");const Kg=V.Ir.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(t,a){this.groupGL=new ce.Node,this._sphereGeometry=new ce.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new ce.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new ce.PlaneGeometry,this._earthMesh=new ce.Mesh({renderNormal:!0}),this._atmosphereMesh=new ce.Mesh,this._atmosphereGeometry=new ce.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new ce.Material({shader:new ce.Shader(ce.Shader.source("ecgl.atmosphere.vertex"),ce.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=ce.Mesh.CW,this._lightRoot=new ce.Node,this._sceneHelper=new Fs,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new _l({zr:a.getZr()}),this._control.init(),this._layerMeshes={}},render:function(t,a,u){var h=t.coordinateSystem,d=t.get("shading");h.viewGL.add(this._lightRoot),t.get("show")?h.viewGL.add(this.groupGL):h.viewGL.remove(this.groupGL),this._sceneHelper.setScene(h.viewGL.scene),h.viewGL.setPostEffect(t.getModel("postEffect"),u),h.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var g=this._earthMesh;g.geometry=this._sphereGeometry;var y="ecgl."+d;(!g.material||g.material.shader.name!==y)&&(g.material=ce.createMaterial(y)),ce.setMaterialFromModel(d,g.material,t,u),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(ut){var bt=g.material.get(ut);bt&&(bt.flipY=!1)}),g.material.set("color",ce.parseColor(t.get("baseColor")));var S=.99*h.radius;if(g.scale.set(S,S,S),t.get("atmosphere.show")){g.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:t.get("atmosphere.glowPower")||6,glowColor:t.get("atmosphere.color")||"#ffffff"}),g.material.setUniforms({glowPower:t.get("atmosphere.innerGlowPower")||2,glowColor:t.get("atmosphere.color")||"#ffffff"});var b=t.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(S+b,S+b,S+b)}else g.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var L=g.material.setTextureImage("diffuseMap",t.get("baseTexture"),u,{flipY:!1,anisotropic:8});L&&L.surface&&L.surface.attachToMesh(g);var W=g.material.setTextureImage("bumpMap",t.get("heightTexture"),u,{flipY:!1,anisotropic:8});W&&W.surface&&W.surface.attachToMesh(g),g.material[t.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(t,u),this._displaceVertices(t,u),this._updateViewControl(t,u),this._updateLayers(t,u)},afterRender:function(t,a,u,h){var d=h.renderer;this._sceneHelper.updateAmbientCubemap(d,t,u),this._sceneHelper.updateSkybox(d,t,u)},_updateLayers:function(t,a){var u=t.coordinateSystem,h=t.get("layers"),d=u.radius,g=[],y=[],S=[],b=[];V.D5.each(h,function(Ct){var Et=new V.Hn(Ct),Dt=Et.get("type"),zt=ce.loadTexture(Et.get("texture"),a,{flipY:!1,anisotropic:8});if(zt.surface&&zt.surface.attachToMesh(this._earthMesh),"blend"===Dt){var $t=Et.get("blendTo"),ae=pn.firstNotNull(Et.get("intensity"),1);"emission"===$t?(S.push(zt),b.push(ae)):(g.push(zt),y.push(ae))}else{var Jt=Et.get("id"),qt=this._layerMeshes[Jt];qt||(qt=this._layerMeshes[Jt]=new ce.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0})),"lambert"===Et.get("shading")?(qt.material=qt.__lambertMaterial||new ce.Material({autoUpdateTextureStatus:!1,shader:ce.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),qt.__lambertMaterial=qt.material):(qt.material=qt.__colorMaterial||new ce.Material({autoUpdateTextureStatus:!1,shader:ce.createShader("ecgl.color"),transparent:!0,depthMask:!1}),qt.__colorMaterial=qt.material),qt.material.enableTexture("diffuseMap");var ge=Et.get("distance"),Ge=d+(ge??u.radius/100);qt.scale.set(Ge,Ge,Ge),d=Ge;var Oe=this._blankTexture||(this._blankTexture=ce.createBlankTexture("rgba(255, 255, 255, 0)"));qt.material.set("diffuseMap",Oe),ce.loadTexture(Et.get("texture"),a,{flipY:!1,anisotropic:8},function(We){We.surface&&We.surface.attachToMesh(qt),qt.material.set("diffuseMap",We),a.getZr().refresh()}),Et.get("show")?this.groupGL.add(qt):this.groupGL.remove(qt)}},this);var L=this._earthMesh.material;L.define("fragment","LAYER_DIFFUSEMAP_COUNT",g.length),L.define("fragment","LAYER_EMISSIVEMAP_COUNT",S.length),L.set("layerDiffuseMap",g),L.set("layerDiffuseIntensity",y),L.set("layerEmissiveMap",S),L.set("layerEmissionIntensity",b);var W=t.getModel("debug.wireframe");if(W.get("show")){L.define("both","WIREFRAME_TRIANGLE");var ut=ce.parseColor(W.get("lineStyle.color")||"rgba(0,0,0,0.5)"),bt=pn.firstNotNull(W.get("lineStyle.width"),1);L.set("wireframeLineWidth",bt),L.set("wireframeLineColor",ut)}else L.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(t,a){var u=t.coordinateSystem,h=t.getModel("viewControl"),g=this,S=this._control;S.setViewGL(u.viewGL);var L,W,b=h.get("targetCoord");null!=b&&(W=b[0]+90,L=b[1]),S.setFromViewControlModel(h,{baseDistance:u.radius,alpha:L,beta:W}),S.off("update"),S.on("update",function(){a.dispatchAction(function y(){return{type:"globeChangeCamera",alpha:S.getAlpha(),beta:S.getBeta(),distance:S.getDistance()-u.radius,center:S.getCenter(),from:g.uid,globeId:t.id}}())})},_displaceVertices:function(t,a){var u=t.get("displacementQuality"),h=t.get("debug.wireframe.show"),d=t.coordinateSystem;if(t.isDisplacementChanged()||u!==this._displacementQuality||h!==this._showDebugWireframe){this._displacementQuality=u,this._showDebugWireframe=h;var g=this._sphereGeometry,y={low:100,medium:200,high:400,ultra:800}[u]||200,S=y/2;(g.widthSegments!==y||h)&&(g.widthSegments=y,g.heightSegments=S,g.build()),this._doDisplaceVertices(g,d),h&&g.generateBarycentric()}},_doDisplaceVertices:function(t,a){var u=t.attributes.position.value,h=t.attributes.texcoord0.value,d=t.__originalPosition;(!d||d.length!==u.length)&&((d=new Float32Array(u.length)).set(u),t.__originalPosition=d);for(var g=a.displacementWidth,y=a.displacementHeight,S=a.displacementData,b=0;b<t.vertexCount;b++){var L=3*b,W=2*b,ut=d[L+1],bt=d[L+2],Ct=d[L+3],Et=h[W++],Dt=h[W++],zt=Math.round(Et*(g-1)),$t=Math.round(Dt*(y-1)),Jt=S?S[$t*g+zt]:0;u[L+1]=ut+ut*Jt,u[L+2]=bt+bt*Jt,u[L+3]=Ct+Ct*Jt}t.generateVertexNormals(),t.dirty(),t.updateBoundingBox()},_updateLight:function(t,a){var u=this._earthMesh;this._sceneHelper.updateLight(t);var h=this._sceneHelper.mainLight,d=t.get("light.main.time")||new Date,g=Xg.getPosition(V.Rx.parseDate(d),0,0),y=Math.cos(g.altitude);h.position.y=-y*Math.cos(g.azimuth),h.position.x=Math.sin(g.altitude),h.position.z=y*Math.sin(g.azimuth),h.lookAt(u.getWorldPosition())},dispose:function(t,a){this.groupGL.removeAll(),this._control.dispose()}});var jg=gi.vec3;function Jh(t){this.radius=t,this.viewGL=null,this.displacementData=null}Jh.prototype={constructor:Jh,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(t,a,u){this.displacementData=t,this.displacementWidth=a,this.displacementHeight=u},_getDisplacementScale:function(t,a){var h=(90-a)/180*(this.displacementHeight-1),d=Math.round((t+180)/360*(this.displacementWidth-1))+Math.round(h)*this.displacementWidth;return this.displacementData[d]},dataToPoint:function(t,a){var u=t[0],h=t[1],d=t[2]||0,g=this.radius;this.displacementData&&(g*=1+this._getDisplacementScale(u,h)),this.altitudeAxis&&(g+=this.altitudeAxis.dataToCoord(d)),u=u*Math.PI/180,h=h*Math.PI/180;var y=Math.cos(h)*g;return(a=a||[])[0]=-y*Math.cos(u+Math.PI),a[1]=Math.sin(h)*g,a[2]=y*Math.sin(u+Math.PI),a},pointToData:function(t,a){var u=t[0],h=t[1],d=t[2],g=jg.len(t);u/=g,d/=g;var y=Math.asin(h/=g),S=Math.atan2(d,-u);S<0&&(S=2*Math.PI+S);var b=180*y/Math.PI,L=180*S/Math.PI-180;return(a=a||[])[0]=L,a[1]=b,a[2]=g-this.radius,this.altitudeAxis&&(a[2]=this.altitudeAxis.coordToData(a[2])),a}};const Qh=Jh;function Nm(t,a){var u=t.getBoxLayoutParams(),h=(0,ks.ME)(u,{width:a.getWidth(),height:a.getHeight()});h.y=a.getHeight()-h.y-h.height,this.viewGL.setViewport(h.x,h.y,h.width,h.height,a.getDevicePixelRatio()),this.radius=t.get("globeRadius");var d=t.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,d-this.radius)}function Fd(t,a){var u=[1/0,-1/0];if(t.eachSeries(function(d){if(d.coordinateSystem===this){var g=d.getData(),y=d.coordDimToDataDim("alt"),S=y&&y[0];if(S){var b=g.getDataExtent(S,!0);u[0]=Math.min(u[0],b[0]),u[1]=Math.max(u[1],b[1])}}},this),u&&isFinite(u[1]-u[0])){var h=V._y.createScale(u,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new V.RD("altitude",h),this.resize(this.model,a)}}var Jg={dimensions:Qh.prototype.dimensions,create:function(t,a){var u=[];return t.eachComponent("globe",function(h){h.__viewGL=h.__viewGL||new Us;var d=new Qh;d.viewGL=h.__viewGL,h.coordinateSystem=d,d.model=h,u.push(d),d.resize=Nm,d.resize(h,a),d.update=Fd}),t.eachSeries(function(h){if("globe"===h.get("coordinateSystem")){var d=h.getReferringComponents("globe").models[0];if(d||(d=t.getComponent("globe")),!d)throw new Error('globe "'+pn.firstNotNull(h.get("globe3DIndex"),h.get("globe3DId"),0)+'" not found');h.coordinateSystem=d.coordinateSystem}}),t.eachComponent("globe",function(h,d){var g=h.coordinateSystem,y=h.getDisplacementTexture(),S=h.getDisplacemenScale();if(h.isDisplacementChanged()){if(h.hasDisplacement()){var b=!0;ce.loadTexture(y,a,function(L){var ut=function ev(t,a){var u=document.createElement("canvas"),h=u.getContext("2d"),d=t.width,g=t.height;u.width=d,u.height=g,h.drawImage(t,0,0,d,g);for(var y=h.getImageData(0,0,d,g).data,S=new Float32Array(y.length/4),b=0;b<y.length/4;b++)S[b]=y[4*b]/255*a;return{data:S,width:d,height:g}}(L.image,S);h.setDisplacementData(ut.data,ut.width,ut.height),b||a.dispatchAction({type:"globeUpdateDisplacment"})}),b=!1}else g.setDisplacementData(null,0,0);g.setDisplacementData(h.displacementData,h.displacementWidth,h.displacementHeight)}}),u}};const Qg=Jg;(0,V.D$)(function kd(t){t.registerComponentModel(Nd),t.registerComponentView(Kg),t.registerCoordinateSystem("globe",Qg),t.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(a,u){u.eachComponent({mainType:"globe",query:a},function(h){h.setView(a)})}),t.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(a,u){})});var zd=["zoom","center","pitch","bearing"],qh=V.tF.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var t=this;return zd.reduce(function(a,u){return a[u]=t.get(u),a},{})},setMapboxCameraOption:function(t){null!=t&&zd.forEach(function(a){null!=t[a]&&(this.option[a]=t[a])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(t){this._mapbox=t}});V.D5.merge(qh.prototype,ls),V.D5.merge(qh.prototype,us);const qg=qh;function ko(t,a){if(this.id=t,this.zr=a,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}ko.prototype.setUnpainted=function(){},ko.prototype.resize=function(){this._mapbox.resize()},ko.prototype.getMapbox=function(){return this._mapbox},ko.prototype.clear=function(){},ko.prototype.refresh=function(){this._mapbox.resize()};var rv=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];ko.prototype._initEvents=function(){var t=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(a){return a.preventDefault(),!1}},rv.forEach(function(a){this._handlers[a]=function(u){var h={};for(var d in u)h[d]=u[d];h.bubbles=!1;var g=new u.constructor(u.type,h);t.dispatchEvent(g)},this.zr.dom.addEventListener(a,this._handlers[a])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},ko.prototype.dispose=function(){rv.forEach(function(t){this.zr.dom.removeEventListener(t,this._handlers[t])},this)};const Ud=ko,nv="\n@export ecgl.displayShadow.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\nvarying vec3 v_WorldPosition;\n\nvarying vec3 v_Normal;\n\nvoid main()\n{\n @import ecgl.common.uv.main\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n\n@end\n\n\n@export ecgl.displayShadow.fragment\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform float roughness: 0.2;\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n@import ecgl.common.ssaoMap.header\n\n@import clay.plugin.compute_shadow_map\n\nvoid main()\n{\n float shadow = 1.0;\n\n @import ecgl.common.ssaoMap.main\n\n#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {\n shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);\n }\n#endif\n\n shadow *= 0.5 + ao * 0.5;\n shadow = clamp(shadow, 0.0, 1.0);\n\n gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);\n}\n\n@end";ce.Shader.import(nv);const iv=V.Ir.extend({type:"mapbox3D",__ecgl__:!0,init:function(t,a){var u=a.getZr();this._zrLayer=new Ud("mapbox3D",u),u.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new ce.Node,this._sceneHelper=new Fs(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var h=this._zrLayer.getMapbox(),d=this._dispatchInteractAction.bind(this,a,h);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(g){h.on(g,d)}),this._groundMesh=new ce.Mesh({geometry:new ce.PlaneGeometry,material:new ce.Material({shader:new ce.Shader({vertex:ce.Shader.source("ecgl.displayShadow.vertex"),fragment:ce.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(t,a,u){var h=this._zrLayer.getMapbox(),d=t.get("style"),g=JSON.stringify(d);g!==this._oldStyleStr&&d&&h.setStyle(d),this._oldStyleStr=g,h.setCenter(t.get("center")),h.setZoom(t.get("zoom")),h.setPitch(t.get("pitch")),h.setBearing(t.get("bearing")),t.setMapbox(h);var y=t.coordinateSystem;y.viewGL.scene.add(this._lightRoot),y.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(y.viewGL.scene),this._sceneHelper.updateLight(t),y.viewGL.setPostEffect(t.getModel("postEffect"),u),y.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._mapbox3DModel=t},afterRender:function(t,a,u,h){var d=h.renderer;this._sceneHelper.updateAmbientCubemap(d,t,u),this._sceneHelper.updateSkybox(d,t,u),t.coordinateSystem.viewGL.scene.traverse(function(g){g.material&&(g.material.define("fragment","NORMAL_UP_AXIS",2),g.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(t,a,u,h){t.coordinateSystem.setCameraOption(h),this._updateGroundMesh(),u.getZr().refresh()},_dispatchInteractAction:function(t,a,u){t.dispatchAction({type:"mapbox3DChangeCamera",pitch:a.getPitch(),zoom:a.getZoom(),center:a.getCenter().toArray(),bearing:a.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var t=this._mapbox3DModel.coordinateSystem,a=t.dataToPoint(t.center);this._groundMesh.position.set(a[0],a[1],-.001);var u=new ce.Plane(new ce.Vector3(0,0,1),0),h=t.viewGL.camera.castRay(new ce.Vector2(-1,-1)),d=t.viewGL.camera.castRay(new ce.Vector2(1,1)),g=h.intersectPlane(u),y=d.intersectPlane(u),S=g.dist(y)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(S,S,1)}},dispose:function(t,a){this._zrLayer&&this._zrLayer.dispose(),a.getZr().painter.delLayer(-1e3)}});var ys=gi.mat4,zc=.6435011087932844,_a=Math.PI;function Uc(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.bearing=0,this.pitch=0,this.center=[0,0],this.zoom=0,this.maxPitch=60,this.zoomOffset=0}Uc.prototype={constructor:Uc,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(t){this.bearing=t.bearing,this.pitch=t.pitch,this.center=t.center,this.zoom=t.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,512)),null==this._initialZoom&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(this.height){var t=.5/Math.tan(zc/2)*this.height*.1,a=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,u=zc/2,h=Math.PI/2+a,d=Math.sin(u)*t/Math.sin(Math.PI-h-u),y=1.1*(Math.cos(Math.PI/2-a)*d+t);this.pitch>50&&(y=1e3),ys.perspective(S=[],zc,this.width/this.height,1,y),this.viewGL.camera.projectionMatrix.setArray(S),this.viewGL.camera.decomposeProjectionMatrix();var S=ys.identity([]),b=this.dataToPoint(this.center);ys.scale(S,S,[1,-1,1]),ys.translate(S,S,[0,0,-t]),ys.rotateX(S,S,a),ys.rotateZ(S,S,-this.bearing/180*Math.PI),ys.translate(S,S,[-b[0]*this.getScale()*.1,-b[1]*this.getScale()*.1,0]),this.viewGL.camera.viewMatrix.array=S;var L=[];ys.invert(L,S),this.viewGL.camera.worldTransform.array=L,this.viewGL.camera.decomposeWorldTransform();var ut,W=512*this.getScale();ut=this.altitudeExtent&&!isNaN(this.boxHeight)?this.boxHeight/(this.altitudeExtent[1]-this.altitudeExtent[0])*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset):W/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*.1,this.viewGL.rootNode.scale.set(.1*this.getScale(),.1*this.getScale(),ut)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(t,a){return this.projectOnTileWithScale(t,512*this.getScale(),a)},projectOnTileWithScale:function(t,a,u){var S=a*(t[0]*_a/180+_a)/(2*_a),b=a*(_a-Math.log(Math.tan(_a/4+t[1]*_a/180*.5)))/(2*_a);return(u=u||[])[0]=S,u[1]=b,u},unprojectFromTile:function(t,a){return this.unprojectOnTileWithScale(t,512*this.getScale(),a)},unprojectOnTileWithScale:function(t,a,u){var g=t[0]/a*(2*_a)-_a,y=2*(Math.atan(Math.exp(_a-t[1]/a*(2*_a)))-_a/4);return(u=u||[])[0]=180*g/_a,u[1]=180*y/_a,u},dataToPoint:function(t,a){return(a=this.projectOnTileWithScale(t,512,a))[0]-=this._origin[0],a[1]-=this._origin[1],a[2]=isNaN(t[2])?0:t[2],isNaN(t[2])||(a[2]=t[2],this.altitudeExtent&&(a[2]-=this.altitudeExtent[0])),a}};const xs=Uc;function Bl(){xs.apply(this,arguments)}function Hd(t,a,u){function h(g,y){var S=y.getWidth(),b=y.getHeight(),L=y.getDevicePixelRatio();this.viewGL.setViewport(0,0,S,b,L),this.width=S,this.height=b,this.altitudeScale=g.get("altitudeScale"),this.boxHeight=g.get("boxHeight")}function d(g,y){if("auto"!==this.model.get("boxHeight")){var S=[1/0,-1/0];g.eachSeries(function(b){if(b.coordinateSystem===this){var L=b.getData(),W=b.coordDimToDataDim("alt")[0];if(W){var ut=L.getDataExtent(W,!0);S[0]=Math.min(S[0],ut[0]),S[1]=Math.max(S[1],ut[1])}}},this),S&&isFinite(S[1]-S[0])&&(this.altitudeExtent=S)}}return{dimensions:a.prototype.dimensions,create:function(g,y){var S=[];return g.eachComponent(t,function(b){var L=b.__viewGL;L||(L=b.__viewGL=new Us).setRootNode(new ce.Node);var W=new a;W.viewGL=b.__viewGL,W.resize=h,W.resize(b,y),S.push(W),b.coordinateSystem=W,W.model=b,W.update=d}),g.eachSeries(function(b){if(b.get("coordinateSystem")===t){var L=b.getReferringComponents(t).models[0];if(L||(L=g.getComponent(t)),!L)throw new Error(t+' "'+pn.firstNotNull(b.get(t+"Index"),b.get(t+"Id"),0)+'" not found');b.coordinateSystem=L.coordinateSystem}}),u&&u(S,g,y),S}}}(Bl.prototype=new xs).constructor=Bl,Bl.prototype.type="mapbox3D";var Vd=Hd("mapbox3D",Bl,function(t){t.forEach(function(a){a.setCameraOption(a.model.getMapboxCameraOption())})});const ov=Vd;(0,V.D$)(function t_(t){t.registerComponentModel(qg),t.registerComponentView(iv),t.registerCoordinateSystem("mapbox3D",ov),t.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(a,u){u.eachComponent({mainType:"mapbox3D",query:a},function(h){h.setMapboxCameraOption(a)})})});var sv=["zoom","center","pitch","bearing"],Wd=V.tF.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var t=this;return sv.reduce(function(a,u){return a[u]=t.get(u),a},{})},setMaptalksCameraOption:function(t){null!=t&&sv.forEach(function(a){null!=t[a]&&(this.option[a]=t[a])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(t){this._maptalks=t}});V.D5.merge(Wd.prototype,ls),V.D5.merge(Wd.prototype,us);const lv=Wd;function Ss(t,a,u,h){if(this.id=t,this.zr=a,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:u,zoom:h,doubleClickZoom:!1,fog:!1}),this._initEvents()}Ss.prototype.setUnpainted=function(){},Ss.prototype.resize=function(){this._maptalks.checkSize()},Ss.prototype.getMaptalks=function(){return this._maptalks},Ss.prototype.clear=function(){},Ss.prototype.refresh=function(){this._maptalks.checkSize()};var uv=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];Ss.prototype._initEvents=function(){var t=this.dom;this._handlers=this._handlers||{contextmenu:function(a){return a.preventDefault(),!1}},uv.forEach(function(a){this._handlers[a]=function(u){var h={};for(var d in u)h[d]=u[d];h.bubbles=!1;var g=new u.constructor(u.type,h);"mousewheel"===a||"DOMMouseScroll"===a?t.dispatchEvent(g):t.firstElementChild.dispatchEvent(g)},this.zr.dom.addEventListener(a,this._handlers[a])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Ss.prototype.dispose=function(){uv.forEach(function(t){this.zr.dom.removeEventListener(t,this._handlers[t])},this),this._maptalks.remove()};const e_=Ss;ce.Shader.import(nv);const r_=V.Ir.extend({type:"maptalks3D",__ecgl__:!0,init:function(t,a){this._groundMesh=new ce.Mesh({geometry:new ce.PlaneGeometry,material:new ce.Material({shader:new ce.Shader({vertex:ce.Shader.source("ecgl.displayShadow.vertex"),fragment:ce.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(t,a){var u=a.getZr();this._zrLayer=new e_("maptalks3D",u,t.get("center"),t.get("zoom")),u.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new ce.Node,this._sceneHelper=new Fs(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var h=this._zrLayer.getMaptalks(),d=this._dispatchInteractAction.bind(this,a,h);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(g){h.on(g,d)})},render:function(t,a,u){this._zrLayer||this._initMaptalksLayer(t,u);var h=this._zrLayer.getMaptalks(),d=t.get("urlTemplate"),g=h.getBaseLayer();d!==this._oldUrlTemplate&&(g?g.setOptions({urlTemplate:d,attribution:t.get("attribution")}):(g=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:d,subdomains:["a","b","c"],attribution:t.get("attribution")}),h.setBaseLayer(g))),this._oldUrlTemplate=d,h.setCenter(t.get("center")),h.setZoom(t.get("zoom"),{animation:!1}),h.setPitch(t.get("pitch")),h.setBearing(t.get("bearing")),t.setMaptalks(h);var y=t.coordinateSystem;y.viewGL.scene.add(this._lightRoot),y.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(y.viewGL.scene),this._sceneHelper.updateLight(t),y.viewGL.setPostEffect(t.getModel("postEffect"),u),y.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._maptalks3DModel=t},afterRender:function(t,a,u,h){var d=h.renderer;this._sceneHelper.updateAmbientCubemap(d,t,u),this._sceneHelper.updateSkybox(d,t,u),t.coordinateSystem.viewGL.scene.traverse(function(g){g.material&&(g.material.define("fragment","NORMAL_UP_AXIS",2),g.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(t,a,u,h){t.coordinateSystem.setCameraOption(h),this._updateGroundMesh(),u.getZr().refresh()},_dispatchInteractAction:function(t,a,u){t.dispatchAction({type:"maptalks3DChangeCamera",pitch:a.getPitch(),zoom:i_(a.getResolution())+1,center:a.getCenter().toArray(),bearing:a.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var t=this._maptalks3DModel.coordinateSystem,a=t.dataToPoint(t.center);this._groundMesh.position.set(a[0],a[1],-.001);var u=new ce.Plane(new ce.Vector3(0,0,1),0),h=t.viewGL.camera.castRay(new ce.Vector2(-1,-1)),d=t.viewGL.camera.castRay(new ce.Vector2(1,1)),g=h.intersectPlane(u),y=d.intersectPlane(u),S=g.dist(y)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(S,S,1)}},dispose:function(t,a){this._zrLayer&&this._zrLayer.dispose(),a.getZr().painter.delLayer(-1e3)}}),n_=12756274*Math.PI/(256*Math.pow(2,20));function i_(t){return 19-Math.log(t/n_)/Math.LN2}function Hc(){xs.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}(Hc.prototype=new xs).constructor=Hc,Hc.prototype.type="maptalks3D";var a_=Hd("maptalks3D",Hc,function(t){t.forEach(function(a){a.setCameraOption(a.model.getMaptalksCameraOption())})});const o_=a_;(0,V.D$)(function tf(t){t.registerComponentModel(lv),t.registerComponentView(r_),t.registerCoordinateSystem("maptalks3D",o_),t.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(a,u){u.eachComponent({mainType:"maptalks3D",query:a},function(h){h.setMaptalksCameraOption(a)})})});var s_=gi.vec3,l_=V._y.dataStack.isDimensionStacked;function $d(t,a,u){for(var h=t.getDataExtent(a),d=t.getDataExtent(u),g=h[1]-h[0]||h[0],y=d[1]-d[0]||d[0],b=new Uint8Array(2500),L=0;L<t.count();L++){var W=t.get(a,L),ut=t.get(u,L),bt=Math.floor((W-h[0])/g*49),Et=50*Math.floor((ut-d[0])/y*49)+bt;b[Et]=b[Et]||1}var Dt=0;for(L=0;L<b.length;L++)b[L]&&Dt++;return Dt/b.length}var cv=gi.vec3,f_=V._y.dataStack.isDimensionStacked;function Xd(t,a){var u=f_(t,a[2]);return{dimension:u?t.getCalculationInfo("stackResultDimension"):a[2],isStacked:u}}function g_(t){t.registerLayout(function(a,u){a.eachSeriesByType("bar3D",function(h){var d=h.coordinateSystem,g=d&&d.type;"globe"===g?function d_(t,a){var u=t.getData(),h=t.get("minHeight")||0,d=t.get("barSize"),g=["lng","lat","alt"].map(function(L){return t.coordDimToDataDim(L)[0]});if(null==d){var y=a.radius*Math.PI,S=$d(u,g[0],g[1]);d=[y/Math.sqrt(u.count()/S),y/Math.sqrt(u.count()/S)]}else V.D5.isArray(d)||(d=[d,d]);var b=Xd(u,g);u.each(g,function(L,W,ut,bt){var Ct=u.get(b.dimension,bt),Et=b.isStacked?Ct-ut:a.altitudeAxis.scale.getExtent()[0],Dt=Math.max(a.altitudeAxis.dataToCoord(ut),h),zt=a.dataToPoint([L,W,Et]),$t=a.dataToPoint([L,W,Ct]),ae=cv.sub([],$t,zt);cv.normalize(ae,ae),u.setItemLayout(bt,[zt,ae,[d[0],Dt,d[1]]])}),u.setLayout("orient",mr.UP.array)}(h,d):"cartesian3D"===g?function c_(t,a){var u=t.getData(),h=t.get("barSize");if(null==h){var g,y,d=a.size,S=a.getAxis("x"),b=a.getAxis("y");g="category"===S.type?.7*S.getBandWidth():.6*Math.round(d[0]/Math.sqrt(u.count())),y="category"===b.type?.7*b.getBandWidth():.6*Math.round(d[1]/Math.sqrt(u.count())),h=[g,y]}else V.D5.isArray(h)||(h=[h,h]);var L=a.getAxis("z").scale.getExtent(),W=function u_(t){var a=t[0],u=t[1];return!(a>0&&u>0||a<0&&u<0)}(L),ut=["x","y","z"].map(function(Et){return t.coordDimToDataDim(Et)[0]}),bt=l_(u,ut[2]),Ct=bt?u.getCalculationInfo("stackResultDimension"):ut[2];u.each(ut,function(Et,Dt,zt,$t){var ae=u.get(Ct,$t),qt=a.dataToPoint([Et,Dt,bt?ae-zt:W?0:L[0]]),me=a.dataToPoint([Et,Dt,ae]),ge=s_.dist(qt,me),Ge=[0,me[1]<qt[1]?-1:1,0];0===Math.abs(ge)&&(ge=.1),u.setItemLayout($t,[qt,Ge,[h[0],ge,h[1]]])}),u.setLayout("orient",[1,0,0])}(h,d):"geo3D"===g?function p_(t,a){var u=t.getData(),h=t.get("barSize"),d=t.get("minHeight")||0,g=["lng","lat","alt"].map(function(W){return t.coordDimToDataDim(W)[0]});if(null==h){var y=Math.min(a.size[0],a.size[2]),S=$d(u,g[0],g[1]);h=[y/Math.sqrt(u.count()/S),y/Math.sqrt(u.count()/S)]}else V.D5.isArray(h)||(h=[h,h]);var b=[0,1,0],L=Xd(u,g);u.each(g,function(W,ut,bt,Ct){var Et=u.get(L.dimension,Ct),Dt=L.isStacked?Et-bt:a.altitudeAxis.scale.getExtent()[0],zt=Math.max(a.altitudeAxis.dataToCoord(bt),d),$t=a.dataToPoint([W,ut,Dt]);u.setItemLayout(Ct,[$t,b,[h[0],zt,h[1]]])}),u.setLayout("orient",[1,0,0])}(h,d):("mapbox3D"===g||"maptalks3D"===g)&&function v_(t,a){var u=t.getData(),h=t.coordDimToDataDim("lng")[0],d=t.coordDimToDataDim("lat")[0],g=t.coordDimToDataDim("alt")[0],y=t.get("barSize"),S=t.get("minHeight")||0;if(null==y){var b=u.getDataExtent(h),L=u.getDataExtent(d),W=a.dataToPoint([b[0],L[0]]),ut=a.dataToPoint([b[1],L[1]]),bt=Math.min(Math.abs(W[0]-ut[0]),Math.abs(W[1]-ut[1]))||1,Ct=$d(u,h,d);y=[bt/Math.sqrt(u.count()/Ct),bt/Math.sqrt(u.count()/Ct)]}else V.D5.isArray(y)||(y=[y,y]),y[0]/=a.getScale()/16,y[1]/=a.getScale()/16;var Et=[0,0,1],Dt=[h,d,g],zt=Xd(u,Dt);u.each(Dt,function($t,ae,Jt,qt){var me=u.get(zt.dimension,qt),Ge=a.dataToPoint([$t,ae,zt.isStacked?me-Jt:0]),Oe=a.dataToPoint([$t,ae,me]),We=Math.max(Oe[2]-Ge[2],S);u.setItemLayout(qt,[Ge,Et,[y[0],We,y[1]]])}),u.setLayout("orient",[1,0,0])}(h,d)})})}var Yd={getFormattedLabel:function(t,a,u,h,d){u=u||"normal";var y=t.getData(h).getItemModel(a),S=t.getDataParams(a,h);null!=d&&S.value instanceof Array&&(S.value=S.value[d]);var L,b=y.get("normal"===u?["label","formatter"]:["emphasis","label","formatter"]);return null==b&&(b=y.get(["label","formatter"])),"function"==typeof b?(S.status=u,L=b(S)):"string"==typeof b&&(L=V.WU.formatTpl(b,S)),L},normalizeToArray:function(t){return t instanceof Array?t:null==t?[]:[t]}};const bu=Yd;function Vc(t,a,u){var d=t.getData(),g=t.getRawValue(a),y=V.D5.isArray(g)?function h(ut){var Ct=[],Et=function __(t,a){var u=[];return V.D5.each(t.dimensions,function(h){var d=t.getDimensionInfo(h),y=d.otherDims[a];null!=y&&!1!==y&&(u[y]=d.name)}),u}(d,"tooltip");function Dt(zt,$t){var ae=d.getDimensionInfo($t);if(ae&&!1!==ae.otherDims.tooltip){var Jt=ae.type,qt="- "+(ae.tooltipName||ae.name)+": "+("ordinal"===Jt?zt+"":"time"===Jt?u?"":V.WU.formatTime("yyyy/MM/dd hh:mm:ss",zt):V.WU.addCommas(zt));qt&&Ct.push(V.WU.encodeHTML(qt))}}return Et.length?V.D5.each(Et,function(zt){Dt(d.get(zt,a),zt)}):V.D5.each(ut,Dt),"<br/>"+Ct.join("<br/>")}(g):V.WU.encodeHTML(V.WU.addCommas(g)),S=d.getName(a),b=wi(d,a);V.D5.isObject(b)&&b.colorStops&&(b=(b.colorStops[0]||{}).color);var L=V.WU.getTooltipMarker(b=b||"transparent"),W=t.name;return"\0-"===W&&(W=""),W=W?V.WU.encodeHTML(W)+(u?": ":"<br/>"):"",u?L+W+y:W+L+(S?V.WU.encodeHTML(S)+": "+y:y)}function ef(t,a,u){u=u||t.getSource();var h=a||V.wL(t.get("coordinateSystem"))||["x","y","z"],d=V._y.createDimensions(u,{dimensionsDefine:u.dimensionsDefine||t.get("dimensions"),encodeDefine:u.encodeDefine||t.get("encode"),coordDimensions:h.map(function(S){var b=t.getReferringComponents(S+"Axis3D").models[0];return{type:b&&"category"===b.get("type")?"ordinal":"float",name:S}})});"cartesian3D"===t.get("coordinateSystem")&&d.forEach(function(S){if(h.indexOf(S.coordDim)>=0){var b=t.getReferringComponents(S.coordDim+"Axis3D").models[0];b&&"category"===b.get("type")&&(S.ordinalMeta=b.getOrdinalMeta())}});var g=V._y.dataStack.enableDataStack(t,d,{byIndex:!0,stackedCoordDimension:"z"}),y=new V.aV(d,t);return y.setCalculationInfo(g),y.initData(u),y}var hv=V.wJ.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(t,a){return ef(this)},getFormattedLabel:function(t,a,u,h){var d=bu.getFormattedLabel(this,t,a,u,h);return null==d&&(d=this.getData().get("z",t)),d},formatTooltip:function(t){return Vc(this,t)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});V.D5.merge(hv.prototype,mu);const fv=hv;var pi=gi.vec3,dv=gi.mat3,Wc=gn.extend(function(){return{attributes:{position:new gn.Attribute("position","float",3,"POSITION"),normal:new gn.Attribute("normal","float",3,"NORMAL"),color:new gn.Attribute("color","float",4,"COLOR"),prevPosition:new gn.Attribute("prevPosition","float",3),prevNormal:new gn.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(t){var a=this.enableNormal,u=this.getBarVertexCount()*t,h=this.getBarTriangleCount()*t;this.vertexCount!==u&&(this.attributes.position.init(u),a?this.attributes.normal.init(u):this.attributes.normal.value=null,this.attributes.color.init(u)),this.triangleCount!==h&&(this.indices=u>65535?new Uint32Array(3*h):new Uint16Array(3*h),this._dataIndices=new Uint32Array(u))},getBarVertexCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarVertexCount(t):this.enableNormal?24:8},getBarTriangleCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarTriangleCount(t):12},_getBevelBarVertexCount:function(t){return 4*(t+1)*(t+1)*2},_getBevelBarTriangleCount:function(t){return(4*t+3+1)*(2*t+1)*2+4},setColor:function(t,a){for(var u=this.getBarVertexCount(),d=u*(t+1),g=u*t;g<d;g++)this.attributes.color.set(g,a);this.dirtyAttribute("color")},getDataIndexOfVertex:function(t){return this._dataIndices?this._dataIndices[t]:null},addBar:function(){for(var t=pi.create,a=pi.scaleAndAdd,u=t(),h=t(),d=t(),g=t(),y=t(),S=t(),b=t(),L=[],W=[],ut=0;ut<8;ut++)L[ut]=t();var bt=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],Ct=[0,1,2,0,2,3],Et=[];for(ut=0;ut<bt.length;ut++)for(var Dt=bt[ut],zt=0;zt<2;zt++){for(var $t=[],ae=0;ae<3;ae++)$t.push(Dt[Ct[3*zt+ae]]);Et.push($t)}return function(Jt,qt,me,ge,Ge,Oe){var We=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(Jt,qt,me,ge,this.bevelSize,this.bevelSegments,Ge);else{pi.copy(d,qt),pi.normalize(d,d),pi.cross(g,me,d),pi.normalize(g,g),pi.cross(h,d,g),pi.normalize(g,g),pi.negate(y,h),pi.negate(S,d),pi.negate(b,g),a(L[0],Jt,h,ge[0]/2),a(L[0],L[0],g,ge[2]/2),a(L[1],Jt,h,ge[0]/2),a(L[1],L[1],b,ge[2]/2),a(L[2],Jt,y,ge[0]/2),a(L[2],L[2],b,ge[2]/2),a(L[3],Jt,y,ge[0]/2),a(L[3],L[3],g,ge[2]/2),a(u,Jt,d,ge[1]),a(L[4],u,h,ge[0]/2),a(L[4],L[4],g,ge[2]/2),a(L[5],u,h,ge[0]/2),a(L[5],L[5],b,ge[2]/2),a(L[6],u,y,ge[0]/2),a(L[6],L[6],b,ge[2]/2),a(L[7],u,y,ge[0]/2),a(L[7],L[7],g,ge[2]/2);var ar=this.attributes;if(this.enableNormal){W[0]=h,W[1]=y,W[2]=d,W[3]=S,W[4]=g,W[5]=b;for(var Ke=this._vertexOffset,lr=0;lr<bt.length;lr++){for(var vr=3*this._triangleOffset,nr=0;nr<6;nr++)this.indices[vr++]=Ke+Ct[nr];Ke+=4,this._triangleOffset+=2}for(lr=0;lr<bt.length;lr++){var Sr=W[lr];for(nr=0;nr<4;nr++)ar.position.set(this._vertexOffset,L[bt[lr][nr]]),ar.normal.set(this._vertexOffset,Sr),ar.color.set(this._vertexOffset++,Ge)}}else{for(lr=0;lr<Et.length;lr++){for(vr=3*this._triangleOffset,nr=0;nr<3;nr++)this.indices[vr+nr]=Et[lr][nr]+this._vertexOffset;this._triangleOffset++}for(lr=0;lr<L.length;lr++)ar.position.set(this._vertexOffset,L[lr]),ar.color.set(this._vertexOffset++,Ge)}}var Wr=this._vertexOffset;for(lr=We;lr<Wr;lr++)this._dataIndices[lr]=Oe}}(),_addBevelBar:function(){var t=pi.create(),a=pi.create(),u=pi.create(),h=dv.create(),d=[],g=[1,-1,-1,1],y=[1,1,-1,-1],S=[2,0];return function(b,L,W,ut,bt,Ct,Et){pi.copy(a,L),pi.normalize(a,a),pi.cross(u,W,a),pi.normalize(u,u),pi.cross(t,a,u),pi.normalize(u,u),h[0]=t[0],h[1]=t[1],h[2]=t[2],h[3]=a[0],h[4]=a[1],h[5]=a[2],h[6]=u[0],h[7]=u[1],h[8]=u[2],bt=Math.min(ut[0],ut[2])/2*bt;for(var Dt=0;Dt<3;Dt++)d[Dt]=Math.max(ut[Dt]-2*bt,0);var zt=(ut[0]-d[0])/2,$t=(ut[1]-d[1])/2,ae=(ut[2]-d[2])/2,Jt=[],qt=[],me=this._vertexOffset,ge=[];for(Dt=0;Dt<2;Dt++){ge[Dt]=ge[Dt]=[];for(var Ge=0;Ge<=Ct;Ge++)for(var Oe=0;Oe<4;Oe++){(0===Ge&&0===Dt||1===Dt&&Ge===Ct)&&ge[Dt].push(me);for(var We=0;We<=Ct;We++){var ar=We/Ct*Math.PI/2+Math.PI/2*Oe,Ke=Ge/Ct*Math.PI/2+Math.PI/2*Dt;qt[0]=zt*Math.cos(ar)*Math.sin(Ke),qt[1]=$t*Math.cos(Ke),qt[2]=ae*Math.sin(ar)*Math.sin(Ke),Jt[0]=qt[0]+g[Oe]*d[0]/2,Jt[1]=qt[1]+$t+S[Dt]*d[1]/2,Jt[2]=qt[2]+y[Oe]*d[2]/2,Math.abs(zt-$t)<1e-6&&Math.abs($t-ae)<1e-6||(qt[0]/=zt*zt,qt[1]/=$t*$t,qt[2]/=ae*ae),pi.normalize(qt,qt),pi.transformMat3(Jt,Jt,h),pi.transformMat3(qt,qt,h),pi.add(Jt,Jt,b),this.attributes.position.set(me,Jt),this.enableNormal&&this.attributes.normal.set(me,qt),this.attributes.color.set(me,Et),me++}}}var lr=4*Ct+3,vr=2*Ct+1,nr=lr+1;for(Oe=0;Oe<vr;Oe++)for(Dt=0;Dt<=lr;Dt++){var Sr=Oe*nr+Dt+this._vertexOffset,Er=Oe*nr+(Dt+1)%nr+this._vertexOffset,Wr=(Oe+1)*nr+(Dt+1)%nr+this._vertexOffset,Tr=(Oe+1)*nr+Dt+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[Wr,Sr,Er]),this.setTriangleIndices(this._triangleOffset++,[Wr,Tr,Sr])}this.setTriangleIndices(this._triangleOffset++,[ge[0][0],ge[0][2],ge[0][1]]),this.setTriangleIndices(this._triangleOffset++,[ge[0][0],ge[0][3],ge[0][2]]),this.setTriangleIndices(this._triangleOffset++,[ge[1][0],ge[1][1],ge[1][2]]),this.setTriangleIndices(this._triangleOffset++,[ge[1][0],ge[1][2],ge[1][3]]),this._vertexOffset=me}}()});V.D5.defaults(Wc.prototype,ml),V.D5.defaults(Wc.prototype,Ad);const m_=Wc;var y_=gi.vec3;const x_=V.TA.extend({type:"bar3D",__ecgl__:!0,init:function(t,a){this.groupGL=new ce.Node,this._api=a,this._labelsBuilder=new Bc(256,256,a);var u=this;this._labelsBuilder.getLabelPosition=function(h,d,g){if(u._data){var y=u._data.getItemLayout(h);return y_.scaleAndAdd([],y[0],y[1],g+y[2][1])}return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(t,a,u){var h=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=h,this._barMesh||(this._barMesh=new ce.Mesh({geometry:new m_,shadowDepthMaterial:new ce.Material({shader:new ce.Shader(ce.Shader.source("ecgl.sm.depth.vertex"),ce.Shader.source("ecgl.sm.depth.fragment"))}),culling:"cartesian3D"===t.coordinateSystem.type,renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var d=t.coordinateSystem;if(this._doRender(t,u),d&&d.viewGL){d.viewGL.add(this.groupGL);var g=d.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[g]("fragment","SRGB_DECODE")}this._data=t.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(t)},_updateAnimation:function(t){ce.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,t)},_doRender:function(t,a){var u=t.getData(),h=t.get("shading"),d="color"!==h,g=this,y=this._barMesh,S="ecgl."+h;(!y.material||y.material.shader.name!==S)&&(y.material=ce.createMaterial(S,["VERTEX_COLOR"])),ce.setMaterialFromModel(h,y.material,t,a),y.geometry.enableNormal=d,y.geometry.resetOffset();var b=t.get("bevelSize"),L=t.get("bevelSmoothness");y.geometry.bevelSegments=L,y.geometry.bevelSize=b;var W=[],ut=new Float32Array(4*u.count()),bt=0,zt=0,Ct=!1;u.each(function(ae){if(u.hasValue(ae)){var Jt=wi(u,ae),qt=$i(u,ae);null==qt&&(qt=1),ce.parseColor(Jt,W),W[3]*=qt,ut[bt++]=W[0],ut[bt++]=W[1],ut[bt++]=W[2],ut[bt++]=W[3],W[3]>0&&(zt++,W[3]<.99&&(Ct=!0))}}),y.geometry.setBarCount(zt);var Et=u.getLayout("orient"),Dt=this._barIndexOfData=new Int32Array(u.count());zt=0,u.each(function(ae){if(u.hasValue(ae)){var Jt=u.getItemLayout(ae),qt=Jt[0],me=Jt[1],ge=Jt[2],Ge=4*ae;W[0]=ut[Ge++],W[1]=ut[Ge++],W[2]=ut[Ge++],W[3]=ut[Ge++],W[3]>0&&(g._barMesh.geometry.addBar(qt,me,Et,ge,W,ae),Dt[ae]=zt++)}else Dt[ae]=-1}),y.geometry.dirty(),y.geometry.updateBoundingBox();var $t=y.material;$t.transparent=Ct,$t.depthMask=!Ct,y.geometry.sortTriangles=Ct,this._initHandler(t,a)},_initHandler:function(t,a){var u=t.getData(),h=this._barMesh,d="cartesian3D"===t.coordinateSystem.type;h.seriesIndex=t.seriesIndex;var g=-1;h.off("mousemove"),h.off("mouseout"),h.on("mousemove",function(y){var S=h.geometry.getDataIndexOfVertex(y.triangle[0]);S!==g&&(this._downplay(g),this._highlight(S),this._labelsBuilder.updateLabels([S]),d&&a.dispatchAction({type:"grid3DShowAxisPointer",value:[u.get("x",S),u.get("y",S),u.get("z",S,!0)]})),g=S,h.dataIndex=S},this),h.on("mouseout",function(y){this._downplay(g),this._labelsBuilder.updateLabels(),g=-1,h.dataIndex=-1,d&&a.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(t){var a=this._data;if(a){var u=this._barIndexOfData[t];if(!(u<0)){var d=a.getItemModel(t).getModel("emphasis.itemStyle"),g=d.get("color"),y=d.get("opacity");if(null==g){var S=wi(a,t);g=V.$_.lift(S,-.4)}null==y&&(y=$i(a,t));var b=ce.parseColor(g);b[3]*=y,this._barMesh.geometry.setColor(u,b),this._api.getZr().refresh()}}},_downplay:function(t){var a=this._data;if(a){var u=this._barIndexOfData[t];if(!(u<0)){var h=wi(a,t),d=$i(a,t),g=ce.parseColor(h);g[3]*=d,this._barMesh.geometry.setColor(u,g),this._api.getZr().refresh()}}},highlight:function(t,a,u,h){this._toggleStatus("highlight",t,a,u,h)},downplay:function(t,a,u,h){this._toggleStatus("downplay",t,a,u,h)},_toggleStatus:function(t,a,u,h,d){var g=a.getData(),y=pn.queryDataIndex(g,d),S=this;null!=y?V.D5.each(bu.normalizeToArray(y),function(b){"highlight"===t?this._highlight(b):this._downplay(b)},this):g.each(function(b){"highlight"===t?S._highlight(b):S._downplay(b)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});(0,V.D$)(function S_(t){t.registerChartView(x_),t.registerSeriesModel(fv),g_(t),t.registerProcessor(function(a,u){a.eachSeriesByType("bar3d",function(h){var d=h.getData();d.filterSelf(function(g){return d.hasValue(g)})})})});var T_=V.wJ.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,a){return ef(this)},formatTooltip:function(t){return Vc(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}});const C_=T_;var M_=D(31),b_=gi.vec3;ce.Shader.import(Ia);const P_=V.TA.extend({type:"line3D",__ecgl__:!0,init:function(t,a){this.groupGL=new ce.Node,this._api=a},render:function(t,a,u){var h=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=h,this._line3DMesh||(this._line3DMesh=new ce.Mesh({geometry:new Zo({useNativeLine:!1,sortTriangles:!0}),material:new ce.Material({shader:ce.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var d=t.coordinateSystem;if(d&&d.viewGL){d.viewGL.add(this.groupGL);var g=d.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[g]("fragment","SRGB_DECODE")}this._doRender(t,u),this._data=t.getData(),this._camera=d.viewGL.camera,this.updateCamera(),this._updateAnimation(t)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(t,a){var u=t.getData(),h=this._line3DMesh;h.geometry.resetOffset();var d=u.getLayout("points"),g=[],y=new Float32Array(d.length/3*4),S=0,b=!1;u.each(function(ut){var bt=wi(u,ut),Ct=$i(u,ut);null==Ct&&(Ct=1),ce.parseColor(bt,g),g[3]*=Ct,y[S++]=g[0],y[S++]=g[1],y[S++]=g[2],y[S++]=g[3],g[3]<.99&&(b=!0)}),h.geometry.setVertexCount(h.geometry.getPolylineVertexCount(d)),h.geometry.setTriangleCount(h.geometry.getPolylineTriangleCount(d)),h.geometry.addPolyline(d,y,pn.firstNotNull(t.get("lineStyle.width"),1)),h.geometry.dirty(),h.geometry.updateBoundingBox();var L=h.material;L.transparent=b,L.depthMask=!b;var W=t.getModel("debug.wireframe");W.get("show")?(h.geometry.createAttribute("barycentric","float",3),h.geometry.generateBarycentric(),h.material.set("both","WIREFRAME_TRIANGLE"),h.material.set("wireframeLineColor",ce.parseColor(W.get("lineStyle.color")||"rgba(0,0,0,0.5)")),h.material.set("wireframeLineWidth",pn.firstNotNull(W.get("lineStyle.width"),1))):h.material.set("both","WIREFRAME_TRIANGLE"),this._points=d,this._initHandler(t,a)},_updateAnimation:function(t){ce.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,t)},_initHandler:function(t,a){var u=t.getData(),h=t.coordinateSystem,d=this._line3DMesh,g=-1;d.seriesIndex=t.seriesIndex,d.off("mousemove"),d.off("mouseout"),d.on("mousemove",function(y){var S=h.pointToData(y.point.array),b=u.indicesOfNearest("x",S[0])[0];b!==g&&(a.dispatchAction({type:"grid3DShowAxisPointer",value:[u.get("x",b),u.get("y",b),u.get("z",b)]}),d.dataIndex=b),g=b},this),d.on("mouseout",function(y){g=-1,d.dataIndex=-1,a.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var t=new _r,a=this._camera;_r.multiply(t,a.projectionMatrix,a.viewMatrix);var u=this._positionNDC,h=this._points,d=h.length/3;(!u||u.length/2!==d)&&(u=this._positionNDC=new Float32Array(2*d));for(var g=[],y=0;y<d;y++){var S=3*y,b=2*y;g[0]=h[S],g[1]=h[S+1],g[2]=h[S+2],g[3]=1,b_.transformMat4(g,g,t.array),u[b]=g[0]/g[3],u[b+1]=g[1]/g[3]}},_pick:function(t,a,u,h,d,g){var y=this._positionNDC,b=this._data.hostModel.get("lineStyle.width"),L=-1,bt=.5*u.viewport.width,Ct=.5*u.viewport.height;t=(t+1)*bt,a=(a+1)*Ct;for(var Et=1;Et<y.length/2;Et++){var Dt=(y[2*(Et-1)]+1)*bt,zt=(y[2*(Et-1)+1]+1)*Ct,$t=(y[2*Et]+1)*bt,ae=(y[2*Et+1]+1)*Ct;M_.m(Dt,zt,$t,ae,b,t,a)&&(L=(Dt-t)*(Dt-t)+(zt-a)*(zt-a)<($t-t)*($t-t)+(ae-a)*(ae-a)?Et-1:Et)}if(L>=0){var me=3*L,ge=new mr(this._points[me],this._points[me+1],this._points[me+2]);g.push({dataIndex:L,point:ge,pointWorld:ge.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(ge)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});(0,V.D$)(function A_(t){t.registerChartView(P_),t.registerSeriesModel(C_),t.registerLayout(function(a,u){a.eachSeriesByType("line3D",function(h){var d=h.getData(),g=h.coordinateSystem;if(g){if("cartesian3D"!==g.type)return;var y=new Float32Array(3*d.count()),S=[],b=[],W=g.dimensions.map(function(ut){return h.coordDimToDataDim(ut)[0]});g&&d.each(W,function(ut,bt,Ct,Et){S[0]=ut,S[1]=bt,S[2]=Ct,g.dataToPoint(S,b),y[3*Et]=b[0],y[3*Et+1]=b[1],y[3*Et+2]=b[2]}),d.setLayout("points",y)}})})});const O_=V.wJ.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(t,a){return ef(this)},getFormattedLabel:function(t,a,u,h){var d=bu.getFormattedLabel(this,t,a,u,h);if(null==d){var g=this.getData();d=g.get(g.dimensions[g.dimensions.length-1],t)}return d},formatTooltip:function(t){return Vc(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function Kd(t,h,u){(h=h||document.createElement("canvas")).width=t,h.height=t;var d=h.getContext("2d");return u&&u(d),h}var jd={getMarginByStyle:function(t){var a=t.minMargin||0,u=0;t.stroke&&"none"!==t.stroke&&(u=t.lineWidth??1);var h=t.shadowBlur||0,d=t.shadowOffsetX||0,g=t.shadowOffsetY||0,y={};return y.left=Math.max(u/2,-d+h,a),y.right=Math.max(u/2,d+h,a),y.top=Math.max(u/2,-g+h,a),y.bottom=Math.max(u/2,g+h,a),y},createSymbolSprite:function(t,a,u,h){var d=function E_(t,a,u,h){V.D5.isArray(a)||(a=[a,a]);var d=jd.getMarginByStyle(u,h),g=a[0]+d.left+d.right,y=a[1]+d.top+d.bottom,S=V._y.createSymbol(t,0,0,a[0],a[1]),b=Math.max(g,y);S.x=d.left,S.y=d.top,g>y?S.y+=(b-y)/2:S.x+=(b-g)/2;var L=S.getBoundingRect();return S.x-=L.x,S.y-=L.y,S.setStyle(u),S.update(),S.__size=b,S}(t,a,u),g=jd.getMarginByStyle(u);return{image:Kd(d.__size,h,function(y){V.z$(y,d)}),margin:g}},createSDFFromCanvas:function(t,a,u,h){return Kd(a,h,function(d){var y=t.getContext("2d").getImageData(0,0,t.width,t.height);d.putImageData(function w_(t,a,u){var h=a.width,d=a.height,g=t.canvas.width,y=t.canvas.height,S=h/g,b=d/y;function L($t){return $t<128?1:-1}function W($t,ae){var Jt=1/0;$t=Math.floor($t*S),ae=Math.floor(ae*b);for(var ge=L(a.data[4*(ae*h+$t)]),Ge=Math.max(ae-u,0);Ge<Math.min(ae+u,d);Ge++)for(var Oe=Math.max($t-u,0);Oe<Math.min($t+u,h);Oe++){var Ke=Oe-$t,lr=Ge-ae;if(ge!==L(a.data[4*(Ge*h+Oe)])){var vr=Ke*Ke+lr*lr;vr<Jt&&(Jt=vr)}}return ge*Math.sqrt(Jt)}for(var ut=t.createImageData(g,y),bt=0;bt<y;bt++)for(var Ct=0;Ct<g;Ct++){var Dt=W(Ct,bt)/u*.5+.5,zt=4*(bt*g+Ct);ut.data[zt++]=255*(1-Dt),ut.data[zt++]=255*(1-Dt),ut.data[zt++]=255*(1-Dt),ut.data[zt++]=255}return ut}(d,y,u),0,0)})},createSimpleSprite:function(t,a){return Kd(t,a,function(u){var h=t/2;u.beginPath(),u.arc(h,h,60,0,2*Math.PI,!1),u.closePath();var d=u.createRadialGradient(h,h,0,h,h,h);d.addColorStop(0,"rgba(255, 255, 255, 1)"),d.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),d.addColorStop(1,"rgba(255, 255, 255, 0)"),u.fillStyle=d,u.fill()})}};const rf=jd;var pv=gi.vec3;const D_={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(t,a){var u=this.indices,h=pv.create();if(!u){u=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var d=0;d<u.length;d++)u[d]=d}if(0===a){var S,g=this.attributes.position,y=(t=t.array,0);for((!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount)),d=0;d<this.vertexCount;d++){g.get(d,h);var b=pv.sqrDist(h,t);isNaN(b)&&(b=1e7,y++),0===d?(S=b,b=0):b-=S,this._zList[d]=b}this._noneCount=y}if(this.vertexCount<2e4)0===a&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(d=0;d<3;d++)this._progressiveQuickSort(3*a+d);this.dirtyIndices()},_simpleSort:function(t){var a=this._zList,u=this.indices;function h(d,g){return a[g]-a[d]}t?Array.prototype.sort.call(u,h):Ic.sort(u,h,0,u.length-1)},_progressiveQuickSort:function(t){var a=this._zList,u=this.indices;this._quickSort=this._quickSort||new Ic,this._quickSort.step(u,function(h,d){return a[d]-a[h]},t)}};var Jd=gi.vec4;ce.Shader.import("@export ecgl.sdfSprite.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform float elapsedTime : 0;\n\nattribute vec3 position : POSITION;\n\n#ifdef VERTEX_SIZE\nattribute float size;\n#else\nuniform float u_Size;\n#endif\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_FillColor: COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute float prevSize;\nuniform float percent : 1.0;\n#endif\n\n\n#ifdef POSITIONTEXTURE_ENABLED\nuniform sampler2D positionTexture;\n#endif\n\nvarying float v_Size;\n\nvoid main()\n{\n\n#ifdef POSITIONTEXTURE_ENABLED\n gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);\n#else\n\n #ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n #else\n vec3 pos = position;\n #endif\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n#endif\n\n#ifdef VERTEX_SIZE\n#ifdef VERTEX_ANIMATION\n v_Size = mix(prevSize, size, percent);\n#else\n v_Size = size;\n#endif\n#else\n v_Size = u_Size;\n#endif\n\n#ifdef VERTEX_COLOR\n v_Color = a_FillColor;\n #endif\n\n gl_PointSize = v_Size;\n}\n\n@end\n\n@export ecgl.sdfSprite.fragment\n\nuniform vec4 color: [1, 1, 1, 1];\nuniform vec4 strokeColor: [1, 1, 1, 1];\nuniform float smoothing: 0.07;\n\nuniform float lineWidth: 0.0;\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\nvarying float v_Size;\n\nuniform sampler2D sprite;\n\n@import clay.util.srgb\n\nvoid main()\n{\n gl_FragColor = color;\n\n vec4 _strokeColor = strokeColor;\n\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n #endif\n\n#ifdef SPRITE_ENABLED\n float d = texture2D(sprite, gl_PointCoord).r;\n gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);\n\n if (lineWidth > 0.0) {\n float sLineWidth = lineWidth / 2.0;\n\n float outlineMaxValue0 = 0.5 + sLineWidth;\n float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;\n float outlineMinValue0 = 0.5 - sLineWidth - smoothing;\n float outlineMinValue1 = 0.5 - sLineWidth;\n\n if (d <= outlineMaxValue1 && d >= outlineMinValue0) {\n float a = _strokeColor.a;\n if (d <= outlineMinValue1) {\n a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);\n }\n else {\n a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);\n }\n gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);\n gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;\n }\n }\n#endif\n\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(gl_FragColor);\n#endif\n}\n@end");var N_=ce.Mesh.extend(function(){var t=new ce.Geometry({dynamic:!0,attributes:{color:new ce.Geometry.Attribute("color","float",4,"COLOR"),position:new ce.Geometry.Attribute("position","float",3,"POSITION"),size:new ce.Geometry.Attribute("size","float",1),prevPosition:new ce.Geometry.Attribute("prevPosition","float",3),prevSize:new ce.Geometry.Attribute("prevSize","float",1)}});Object.assign(t,D_);var a=new ce.Material({shader:ce.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});a.enableTexture("sprite"),a.define("both","VERTEX_COLOR"),a.define("both","VERTEX_SIZE");var u=new ce.Texture2D({image:document.createElement("canvas"),flipY:!1});return a.set("sprite",u),t.pick=this._pick.bind(this),{geometry:t,material:a,mode:ce.Mesh.POINTS,sizeScale:1}},{_pick:function(t,a,u,h,d,g){var y=this._positionNDC;if(y)for(var S=u.viewport,b=2/S.width,L=2/S.height,W=this.geometry.vertexCount-1;W>=0;W--){var ut,bt=y[2*(ut=this.geometry.indices?this.geometry.indices[W]:W)],Ct=y[2*ut+1],Dt=this.geometry.attributes.size.get(ut)/this.sizeScale/2;if(t>bt-Dt*b&&t<bt+Dt*b&&a>Ct-Dt*L&&a<Ct+Dt*L){var zt=new ce.Vector3,$t=new ce.Vector3;this.geometry.attributes.position.get(ut,zt.array),ce.Vector3.transformMat4($t,zt,this.worldTransform),g.push({vertexIndex:ut,point:zt,pointWorld:$t,target:this,distance:$t.distance(h.getWorldPosition())})}}},updateNDCPosition:function(t,a,u){var h=this._positionNDC,d=this.geometry;(!h||h.length/2!==d.vertexCount)&&(h=this._positionNDC=new Float32Array(2*d.vertexCount));for(var g=Jd.create(),y=0;y<d.vertexCount;y++)d.attributes.position.get(y,g),g[3]=1,Jd.transformMat4(g,g,t.array),Jd.scale(g,g,1/g[3]),h[2*y]=g[0],h[2*y+1]=g[1]}});const Gl=N_;function af(t,a){this.rootNode=new ce.Node,this.is2D=t,this._labelsBuilder=new Bc(256,256,a),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=a,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}af.prototype={constructor:af,highlightOnMouseover:!0,update:function(t,a,u,h,d){var g=this._prevMesh;this._prevMesh=this._mesh,this._mesh=g;var y=t.getData();if(null==h&&(h=0),null==d&&(d=y.count()),this._startDataIndex=h,this._endDataIndex=d-1,!this._mesh){var S=this._prevMesh&&this._prevMesh.material;this._mesh=new Gl({renderOrder:10,frustumCulling:!1}),S&&(this._mesh.material=S)}S=this._mesh.material;var b=this._mesh.geometry,L=b.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var W=this._getSymbolInfo(t,h,d),ut=u.getDevicePixelRatio(),bt=t.getModel("itemStyle").getItemStyle(),Ct=t.get("large"),Et=1;W.maxSize>2?(Et=this._updateSymbolSprite(t,bt,W,ut),S.enableTexture("sprite")):S.disableTexture("sprite"),L.position.init(d-h);var Dt=[];if(Ct){S.undefine("VERTEX_SIZE"),S.undefine("VERTEX_COLOR");var zt=function Od(t){const a=t.getVisual("style");if(a)return a[t.getVisual("drawType")]}(y),$t=function Ig(t){return t.getVisual("style").opacity}(y);ce.parseColor(zt,Dt),Dt[3]*=$t,S.set({color:Dt,u_Size:W.maxSize*this._sizeScale})}else S.set({color:[1,1,1,1]}),S.define("VERTEX_SIZE"),S.define("VERTEX_COLOR"),L.size.init(d-h),L.color.init(d-h),this._originalOpacity=new Float32Array(d-h);for(var ae=y.getLayout("points"),Jt=L.position.value,me=0;me<d-h;me++){var ge=3*me,Ge=2*me;if(this.is2D?(Jt[ge]=ae[Ge],Jt[ge+1]=ae[Ge+1],Jt[ge+2]=-10):(Jt[ge]=ae[ge],Jt[ge+1]=ae[ge+1],Jt[ge+2]=ae[ge+2]),!Ct){zt=wi(y,me),$t=$i(y,me),ce.parseColor(zt,Dt),Dt[3]*=$t,L.color.set(me,Dt);var Oe=y.getItemVisual(me,"symbolSize");Oe=Oe instanceof Array?Math.max(Oe[0],Oe[1]):Oe,isNaN(Oe)&&(Oe=0),L.size.value[me]=Oe*Et*this._sizeScale,this._originalOpacity[me]=Dt[3]}}this._mesh.sizeScale=Et,b.updateBoundingBox(),b.dirty(),this._updateMaterial(t,bt);var We=t.coordinateSystem;We&&We.viewGL&&S[We.viewGL.isLinearSpace()?"define":"undefine"]("fragment","SRGB_DECODE"),Ct||this._updateLabelBuilder(t,h,d),this._updateHandler(t,a,u),this._updateAnimation(t),this._api=u},getPointsMesh:function(){return this._mesh},updateLabels:function(t){this._labelsBuilder.updateLabels(t)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(t,a,u,h){u.maxSize=Math.min(2*u.maxSize,200);var d=[];return u.aspect>1?(d[0]=u.maxSize,d[1]=u.maxSize/u.aspect):(d[1]=u.maxSize,d[0]=u.maxSize*u.aspect),d[0]=d[0]||1,d[1]=d[1]||1,(this._symbolType!==u.type||!function Qd(t,a){return t&&a&&t[0]===a[0]&&t[1]===a[1]}(this._symbolSize,d)||this._lineWidth!==a.lineWidth)&&(rf.createSymbolSprite(u.type,d,{fill:"#fff",lineWidth:a.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(d[0]/2,10)},this._spriteImageCanvas),rf.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),20,this._mesh.material.get("sprite").image),this._symbolType=u.type,this._symbolSize=d,this._lineWidth=a.lineWidth),this._spriteImageCanvas.width/u.maxSize*h},_updateMaterial:function(t,a){var u="lighter"===t.get("blendMode")?ce.additiveBlend:null,h=this._mesh.material;h.blend=u,h.set("lineWidth",a.lineWidth/20);var d=ce.parseColor(a.stroke);h.set("strokeColor",d),h.transparent=!0,h.depthMask=!1,h.depthTest=!this.is2D,h.sortVertices=!this.is2D},_updateLabelBuilder:function(t,y,u){var h=t.getData(),d=this._mesh.geometry,g=d.attributes.position.value,S=this._mesh.sizeScale;this._labelsBuilder.updateData(h,y=this._startDataIndex,u),this._labelsBuilder.getLabelPosition=function(b,L,W){var ut=3*(b-y);return[g[ut],g[ut+1],g[ut+2]]},this._labelsBuilder.getLabelDistance=function(b,L,W){return d.attributes.size.get(b-y)/S/2+W},this._labelsBuilder.updateLabels()},_updateAnimation:function(t){ce.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,t)},_updateHandler:function(t,a,u){var b,h=t.getData(),d=this._mesh,g=this,y=-1,S=t.coordinateSystem&&"cartesian3D"===t.coordinateSystem.type;S&&(b=t.coordinateSystem.model),d.seriesIndex=t.seriesIndex,d.off("mousemove"),d.off("mouseout"),d.on("mousemove",function(L){var W=L.vertexIndex+g._startDataIndex;W!==y&&(this.highlightOnMouseover&&(this.downplay(h,y),this.highlight(h,W),this._labelsBuilder.updateLabels([W])),S&&u.dispatchAction({type:"grid3DShowAxisPointer",value:[h.get(t.coordDimToDataDim("x")[0],W),h.get(t.coordDimToDataDim("y")[0],W),h.get(t.coordDimToDataDim("z")[0],W)],grid3DIndex:b.componentIndex})),d.dataIndex=W,y=W},this),d.on("mouseout",function(L){this.highlightOnMouseover&&(this.downplay(h,L.vertexIndex+g._startDataIndex),this._labelsBuilder.updateLabels()),y=-1,d.dataIndex=-1,S&&u.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:b.componentIndex})},this)},updateLayout:function(t,a,u){var h=t.getData();if(this._mesh){var d=this._mesh.geometry.attributes.position.value,g=h.getLayout("points");if(this.is2D)for(var y=0;y<g.length/2;y++){var S=3*y,b=2*y;d[S]=g[b],d[S+1]=g[b+1],d[S+2]=-10}else for(y=0;y<g.length;y++)d[y]=g[y];this._mesh.geometry.dirty(),u.getZr().refresh()}},updateView:function(t){if(this._mesh){var a=new _r;_r.mul(a,t.viewMatrix,this._mesh.worldTransform),_r.mul(a,t.projectionMatrix,a),this._mesh.updateNDCPosition(a,this.is2D,this._api)}},highlight:function(t,a){if(!(a>this._endDataIndex||a<this._startDataIndex)){var h=t.getItemModel(a).getModel("emphasis.itemStyle"),d=h.get("color"),g=h.get("opacity");if(null==d){var y=wi(t,a);d=V.$_.lift(y,-.4)}null==g&&(g=$i(t,a));var S=ce.parseColor(d);S[3]*=g,this._mesh.geometry.attributes.color.set(a-this._startDataIndex,S),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(t,a){if(!(a>this._endDataIndex||a<this._startDataIndex)){var u=wi(t,a),h=$i(t,a),d=ce.parseColor(u);d[3]*=h,this._mesh.geometry.attributes.color.set(a-this._startDataIndex,d),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(t){if(this._originalOpacity){for(var a=this._mesh.geometry,u=0;u<a.vertexCount;u++)a.attributes.color.value[4*u+3]=this._originalOpacity[u]*t;a.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(t){this._mesh&&this._setPositionTextureToMesh(this._mesh,t),this._positionTexture=t},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(t){if(t!==this._sizeScale){if(this._mesh){var a=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",a/this._sizeScale*t);var u=this._mesh.geometry.attributes;if(u.size.value)for(var h=0;h<u.size.value.length;h++)u.size.value[h]=u.size.value[h]/this._sizeScale*t}this._sizeScale=t}},_setPositionTextureToMesh:function(t,a){a&&t.material.set("positionTexture",a),t.material[a?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(t,a,u){if(t.get("large"))return(h=pn.firstNotNull(t.get("symbolSize"),1))instanceof Array?(L=Math.max(h[0],h[1]),g=h[0]/h[1]):(L=h,g=1),{maxSize:h,type:t.get("symbol"),aspect:g};for(var g,d=t.getData(),S=d.getItemVisual(0,"symbol")||"circle",L=0,W=a;W<u;W++){var bt,h=d.getItemVisual(W,"symbolSize"),ut=d.getItemVisual(W,"symbol");if(h instanceof Array)bt=h[0]/h[1],L=Math.max(Math.max(h[0],h[1]),L);else{if(isNaN(h))continue;bt=1,L=Math.max(h,L)}S=ut,g=bt}return{maxSize:L,type:S,aspect:g}}};const Pu=af,vv=V.TA.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(t,a){this.groupGL=new ce.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(t,a,u){if(this.groupGL.removeAll(),t.getData().count()){var h=t.coordinateSystem;if(h&&h.viewGL){h.viewGL.add(this.groupGL),this._camera=h.viewGL.camera;var d=this._pointsBuilderList[0];d||(d=this._pointsBuilderList[0]=new Pu(!1,u)),this._pointsBuilderList.length=1,this.groupGL.add(d.rootNode),d.update(t,a,u),d.updateView(h.viewGL.camera)}}},incrementalPrepareRender:function(t,a,u){var h=t.coordinateSystem;h&&h.viewGL&&(h.viewGL.add(this.groupGL),this._camera=h.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(t,a,u,h){if(!(t.end<=t.start)){var d=this._pointsBuilderList[this._currentStep];d||(d=new Pu(!1,h),this._pointsBuilderList[this._currentStep]=d),this.groupGL.add(d.rootNode),d.update(a,u,h,t.start,t.end),d.updateView(a.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(t){t.updateView(this._camera)},this)},highlight:function(t,a,u,h){this._toggleStatus("highlight",t,a,u,h)},downplay:function(t,a,u,h){this._toggleStatus("downplay",t,a,u,h)},_toggleStatus:function(t,a,u,h,d){var g=a.getData(),y=pn.queryDataIndex(g,d),S="highlight"===t;null!=y?V.D5.each(bu.normalizeToArray(y),function(b){for(var L=0;L<this._pointsBuilderList.length;L++){var W=this._pointsBuilderList[L];S?W.highlight(g,b):W.downplay(g,b)}},this):g.each(function(b){for(var L=0;L<this._pointsBuilderList.length;L++){var W=this._pointsBuilderList[L];S?W.highlight(g,b):W.downplay(g,b)}})},dispose:function(){this._pointsBuilderList.forEach(function(t){t.dispose()}),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});(0,V.D$)(function I_(t){t.registerChartView(vv),t.registerSeriesModel(O_),t.registerLayout({seriesType:"scatter3D",reset:function(a){var u=a.coordinateSystem;if(u){var h=u.dimensions;if(h.length<3)return;var d=h.map(function(S){return a.coordDimToDataDim(S)[0]}),g=[],y=[];return{progress:function(S,b){for(var L=new Float32Array(3*(S.end-S.start)),W=S.start;W<S.end;W++){var ut=3*(W-S.start);g[0]=b.get(d[0],W),g[1]=b.get(d[1],W),g[2]=b.get(d[2],W),u.dataToPoint(g,y),L[ut]=y[0],L[ut+1]=y[1],L[ut+2]=y[2]}b.setLayout("points",L)}}}}})});var Di=gi.vec3,gv=gi.vec2,Ts=Di.normalize,Fl=Di.cross,_v=Di.sub,qd=Di.add,Xs=Di.create,Ys=Xs(),fo=Xs(),Ks=Xs(),Au=Xs(),tp=[],js=[];function $c(t,a){gv.copy(tp,t[0]),gv.copy(js,t[1]);var u=[],h=u[0]=Xs(),d=u[1]=Xs(),g=u[2]=Xs(),y=u[3]=Xs();a.dataToPoint(tp,h),a.dataToPoint(js,y),Ts(Ys,h),_v(fo,y,h),Ts(fo,fo),Fl(Ks,fo,Ys),Ts(Ks,Ks),Fl(fo,Ys,Ks),qd(d,Ys,fo),Ts(d,d),Ts(Ys,y),_v(fo,h,y),Ts(fo,fo),Fl(Ks,fo,Ys),Ts(Ks,Ks),Fl(fo,Ys,Ks),qd(g,Ys,fo),Ts(g,g),qd(Au,h,y),Ts(Au,Au);var S=Di.dot(h,Au),b=Di.dot(Au,d),L=(Math.max(Di.len(h),Di.len(y))-S)/b*2;return Di.scaleAndAdd(d,h,d,L),Di.scaleAndAdd(g,y,g,L),u}function mv(t,a){for(var u=new Float32Array(3*t.length),h=0,d=[],g=0;g<t.length;g++)a.dataToPoint(t[g],d),u[h++]=d[0],u[h++]=d[1],u[h++]=d[2];return u}function yv(t){var a=[];return t.each(function(u){var h=t.getItemModel(u),d=h.option instanceof Array?h.option:h.getShallow("coords",!0);a.push(d)}),{coordsList:a}}function xv(t,a,u){var h=t.getData(),d=t.get("polyline"),g=yv(h);h.setLayout("lineType",d?"polyline":"cubicBezier"),h.each(function(y){var S=g.coordsList[y],b=d?mv(S,a):function Ou(t,a,u){var h=[],d=h[0]=Di.create(),g=h[1]=Di.create(),y=h[2]=Di.create(),S=h[3]=Di.create();a.dataToPoint(t[0],d),a.dataToPoint(t[1],S);var b=Di.dist(d,S);return Di.lerp(g,d,S,.3),Di.lerp(y,d,S,.3),Di.scaleAndAdd(g,g,u,Math.min(.1*b,10)),Di.scaleAndAdd(y,y,u,Math.min(.1*b,10)),h}(S,a,u);h.setItemLayout(y,b)})}function Sv(t,a){t.eachSeriesByType("lines3D",function(u){var h=u.coordinateSystem;"globe"===h.type?function R_(t,a){var u=t.getData(),h=t.get("polyline");u.setLayout("lineType",h?"polyline":"cubicBezier");var d=yv(u);u.each(function(g){u.setItemLayout(g,(h?mv:$c)(d.coordsList[g],a))})}(u,h):"geo3D"===h.type?xv(u,h,[0,1,0]):("mapbox3D"===h.type||"maptalks3D"===h.type)&&xv(u,h,[0,0,1])})}const B_=V.wJ.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,a){var u=new V.aV(["value"],this);return u.hasItemOption=!1,u.initData(t.data,[],function(h,d,g,y){if(h instanceof Array)return NaN;u.hasItemOption=!0;var S=h.value;return null!=S?S instanceof Array?S[y]:S:void 0}),u},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}});var ep=gi.vec3;function Z_(t){return t>0?1:-1}ce.Shader.import("@export ecgl.trail2.vertex\nattribute vec3 position: POSITION;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute float offset;\nattribute float dist;\nattribute float distAll;\nattribute float start;\n\nattribute vec4 a_Color : COLOR;\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\nuniform float near : NEAR;\n\nuniform float speed : 0;\nuniform float trailLength: 0.3;\nuniform float time;\nuniform float period: 1000;\n\nuniform float spotSize: 1;\n\nvarying vec4 v_Color;\nvarying float v_Percent;\nvarying float v_SpotPercent;\n\n@import ecgl.common.wireframe.vertexHeader\n\n@import ecgl.lines3D.clipNear\n\nvoid main()\n{\n @import ecgl.lines3D.expandLine\n\n gl_Position = currProj;\n\n v_Color = a_Color;\n\n @import ecgl.common.wireframe.vertexMain\n\n#ifdef CONSTANT_SPEED\n float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;\n#else\n float t = mod((time + start) / period, 1. + trailLength) - trailLength;\n#endif\n\n float trailLen = distAll * trailLength;\n\n v_Percent = (dist - t * distAll) / trailLen;\n\n v_SpotPercent = spotSize / distAll;\n\n }\n@end\n\n\n@export ecgl.trail2.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform float spotIntensity: 5;\n\nvarying vec4 v_Color;\nvarying float v_Percent;\nvarying float v_SpotPercent;\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n if (v_Percent > 1.0 || v_Percent < 0.0) {\n discard;\n }\n\n float fade = v_Percent;\n\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n\n @import ecgl.common.wireframe.fragmentMain\n\n if (v_Percent > (1.0 - v_SpotPercent)) {\n gl_FragColor.rgb *= spotIntensity;\n }\n\n gl_FragColor.a *= fade;\n}\n\n@end");const F_=ce.Mesh.extend(function(){var t=new ce.Material({shader:new ce.Shader(ce.Shader.source("ecgl.trail2.vertex"),ce.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),a=new Zo({dynamic:!0});return a.createAttribute("dist","float",1),a.createAttribute("distAll","float",1),a.createAttribute("start","float",1),{geometry:a,material:t,culling:!1,$ignorePicking:!0}},{updateData:function(t,a,u){var h=t.hostModel,d=this.geometry,g=h.getModel("effect"),y=g.get("trailWidth")*a.getDevicePixelRatio(),S=g.get("trailLength"),b=h.get("effect.constantSpeed"),L=1e3*h.get("effect.period"),W=null!=b;W?this.material.set("speed",b/1e3):this.material.set("period",L),this.material[W?"define":"undefine"]("vertex","CONSTANT_SPEED");var ut=h.get("polyline");d.trailLength=S,this.material.set("trailLength",S),d.resetOffset(),["position","positionPrev","positionNext"].forEach(function(Ge){d.attributes[Ge].value=u.attributes[Ge].value}),["dist","distAll","start","offset","color"].forEach(function(Ge){d.attributes[Ge].init(d.vertexCount)}),d.indices=u.indices;var Ct=[],Et=g.get("trailColor"),Dt=g.get("trailOpacity"),zt=null!=Et,$t=null!=Dt;this.updateWorldTransform();var ae=this.worldTransform.x.len(),Jt=this.worldTransform.y.len(),qt=this.worldTransform.z.len(),me=0,ge=0;t.each(function(Ge){var Oe=t.getItemLayout(Ge),We=$t?Dt:$i(t,Ge),ar=wi(t,Ge);null==We&&(We=1),(Ct=ce.parseColor(zt?Et:ar,Ct))[3]*=We;for(var Ke=ut?u.getPolylineVertexCount(Oe):u.getCubicCurveVertexCount(Oe[0],Oe[1],Oe[2],Oe[3]),lr=0,vr=[],nr=[],Sr=me;Sr<me+Ke;Sr++)d.attributes.position.get(Sr,vr),vr[0]*=ae,vr[1]*=Jt,vr[2]*=qt,Sr>me&&(lr+=ep.dist(vr,nr)),d.attributes.dist.set(Sr,lr),ep.copy(nr,vr);ge=Math.max(ge,lr);var Er=Math.random()*(W?lr:L);for(Sr=me;Sr<me+Ke;Sr++)d.attributes.distAll.set(Sr,lr),d.attributes.start.set(Sr,Er),d.attributes.offset.set(Sr,Z_(u.attributes.offset.get(Sr))*y/2),d.attributes.color.set(Sr,Ct);me+=Ke}),this.material.set("spotSize",.1*ge*S),this.material.set("spotIntensity",g.get("spotIntensity")),d.dirty()},setAnimationTime:function(t){this.material.set("time",t)}});ce.Shader.import(Ia);const Cv=V.TA.extend({type:"lines3D",__ecgl__:!0,init:function(t,a){this.groupGL=new ce.Node,this._meshLinesMaterial=new ce.Material({shader:ce.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new ce.Mesh({geometry:new Zo,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new F_},render:function(t,a,u){this.groupGL.add(this._linesMesh);var h=t.coordinateSystem,d=t.getData();if(h&&h.viewGL){h.viewGL.add(this.groupGL),this._updateLines(t,a,u);var y=h.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[y]("fragment","SRGB_DECODE"),this._trailMesh.material[y]("fragment","SRGB_DECODE")}var S=this._trailMesh;if(S.stopAnimation(),t.get("effect.show")){this.groupGL.add(S),S.updateData(d,u,this._linesMesh.geometry),S.__time=S.__time||0;var b=36e5;this._curveEffectsAnimator=S.animate("",{loop:!0}).when(b,{__time:b}).during(function(){S.setAnimationTime(S.__time)}).start()}else this.groupGL.remove(S),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend="lighter"===t.get("blendMode")?ce.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var t=this._curveEffectsAnimator;t&&(t.isPaused()?t.resume():t.pause())},_updateLines:function(t,a,u){var h=t.getData(),d=t.coordinateSystem,g=this._linesMesh.geometry,y=t.get("polyline");g.expandLine=!0;var S=function Tv(t){return null!=t.radius?t.radius:null!=t.size?Math.max(t.size[0],t.size[1],t.size[2]):100}(d);g.segmentScale=S/20;var b="lineStyle.width".split("."),L=u.getDevicePixelRatio(),W=0;h.each(function(Et){var zt=h.getItemModel(Et).get(b);null==zt&&(zt=1),h.setItemVisual(Et,"lineWidth",zt),W=Math.max(zt,W)}),g.useNativeLine=!1;var ut=0,bt=0;h.each(function(Et){var Dt=h.getItemLayout(Et);y?(ut+=g.getPolylineVertexCount(Dt),bt+=g.getPolylineTriangleCount(Dt)):(ut+=g.getCubicCurveVertexCount(Dt[0],Dt[1],Dt[2],Dt[3]),bt+=g.getCubicCurveTriangleCount(Dt[0],Dt[1],Dt[2],Dt[3]))}),g.setVertexCount(ut),g.setTriangleCount(bt),g.resetOffset();var Ct=[];h.each(function(Et){var Dt=h.getItemLayout(Et),zt=wi(h,Et),$t=$i(h,Et),ae=h.getItemVisual(Et,"lineWidth")*L;null==$t&&($t=1),(Ct=ce.parseColor(zt,Ct))[3]*=$t,y?g.addPolyline(Dt,Ct,ae):g.addCubicCurve(Dt[0],Dt[1],Dt[2],Dt[3],Ct,ae)}),g.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function rp(t,a){for(var u=[],h=0;h<a.length;h++)u.push(t.dataToPoint(a[h]));return u}(0,V.D$)(function Mv(t){t.registerChartView(Cv),t.registerSeriesModel(B_),t.registerLayout(Sv),t.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),t.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),t.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})});var of=V.wJ.extend({type:"series.polygons3D",getRegionModel:function(t){return this.getData().getItemModel(t)},getRegionPolygonCoords:function(t){var a=this.coordinateSystem,u=this.getData().getItemModel(t),h=u.option instanceof Array?u.option:u.getShallow("coords");u.get("multiPolygon")||(h=[h]);for(var d=[],g=0;g<h.length;g++){for(var y=[],S=1;S<h[g].length;S++)y.push(rp(a,h[g][S]));d.push({exterior:rp(a,h[g][0]),interiors:y})}return d},getInitialData:function(t){var a=new V.aV(["value"],this);return a.hasItemOption=!1,a.initData(t.data,[],function(u,h,d,g){if(u instanceof Array)return NaN;a.hasItemOption=!0;var y=u.value;return null!=y?y instanceof Array?y[g]:y:void 0}),a},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});V.D5.merge(of.prototype,mu);const np=of,ip=V.TA.extend({type:"polygons3D",__ecgl__:!0,init:function(t,a){this.groupGL=new ce.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(t,a,u){this.groupGL.removeAll();var h=t.coordinateSystem;h&&h.viewGL&&h.viewGL.add(this.groupGL);var d=this._geo3DBuilderList[0];d||((d=new Kh(u)).extrudeY="mapbox3D"!==h.type&&"maptalks3D"!==h.type,this._geo3DBuilderList[0]=d),this._updateShaderDefines(h,d),d.update(t,a,u),this._geo3DBuilderList.length=1,this.groupGL.add(d.rootNode)},incrementalPrepareRender:function(t,a,u){this.groupGL.removeAll();var h=t.coordinateSystem;h&&h.viewGL&&h.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(t,a,u,h){var d=this._geo3DBuilderList[this._currentStep],g=a.coordinateSystem;d||((d=new Kh(h)).extrudeY="mapbox3D"!==g.type&&"maptalks3D"!==g.type,this._geo3DBuilderList[this._currentStep]=d),d.update(a,u,h,t.start,t.end),this.groupGL.add(d.rootNode),this._updateShaderDefines(g,d),this._currentStep++},_updateShaderDefines:function(t,a){var u=t.viewGL.isLinearSpace()?"define":"undefine";a.rootNode.traverse(function(h){h.material&&(h.material[u]("fragment","SRGB_DECODE"),("mapbox3D"===t.type||"maptalks3D"===t.type)&&(h.material.define("fragment","NORMAL_UP_AXIS",2),h.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach(function(t){t.dispose()})}});(0,V.D$)(function bv(t){t.registerChartView(ip),t.registerSeriesModel(np)});var sf=V.wJ.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(t){return Vc(this,t)},getInitialData:function(t,a){var u=t.data;function h(Wr){return!(isNaN(Wr.min)||isNaN(Wr.max)||isNaN(Wr.step))}function d(Wr){var Tr=V.Rx.getPrecisionSafe;return Math.max(Tr(Wr.min),Tr(Wr.max),Tr(Wr.step))+1}if(!u)if(t.parametric){var qt=t.parametricEquation||{},me=qt.u||{},ge=qt.v||{};["u","v"].forEach(function(Tr){h(qt[Tr])}),["x","y","z"].forEach(function(Tr){});var Ge=Math.floor((me.max+me.step-me.min)/me.step),Oe=Math.floor((ge.max+ge.step-ge.min)/ge.step);u=new Float32Array(Ge*Oe*5);for(var We=d(me),ar=d(ge),bt=0,Ct=0;Ct<Oe;Ct++)for(var Et=0;Et<Ge;Et++){var lr=Ct*ge.step+ge.min,vr=V.Rx.round(Math.min(Et*me.step+me.min,me.max),We),nr=V.Rx.round(Math.min(lr,ge.max),ar),Dt=qt.x(vr,nr),zt=qt.y(vr,nr),Jt=qt.z(vr,nr);u[bt++]=Dt,u[bt++]=zt,u[bt++]=Jt,u[bt++]=vr,u[bt++]=nr}}else{var g=t.equation||{},y=g.x||{},S=g.y||{};if(["x","y"].forEach(function(Wr){h(g[Wr])}),"function"!=typeof g.z)return;var b=Math.floor((y.max+y.step-y.min)/y.step),L=Math.floor((S.max+S.step-S.min)/S.step);u=new Float32Array(b*L*3);var W=d(y),ut=d(S);for(bt=0,Ct=0;Ct<L;Ct++)for(Et=0;Et<b;Et++){Dt=Et*y.step+y.min,zt=Ct*S.step+S.min;var $t=V.Rx.round(Math.min(Dt,y.max),W),ae=V.Rx.round(Math.min(zt,S.max),ut);Jt=g.z($t,ae),u[bt++]=$t,u[bt++]=ae,u[bt++]=Jt}}var Sr=["x","y","z"];return t.parametric&&Sr.push("u","v"),ef(this,Sr,u)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});V.D5.merge(sf.prototype,mu);const kl=sf;var zl=gi.vec3;function Pv(t){return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])}const Av=V.TA.extend({type:"surface",__ecgl__:!0,init:function(t,a){this.groupGL=new ce.Node},render:function(t,a,u){var h=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=h,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var d=t.coordinateSystem,g=t.get("shading"),y=t.getData(),S="ecgl."+g;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==S)&&(this._surfaceMesh.material=ce.createMaterial(S,["VERTEX_COLOR","DOUBLE_SIDED"])),ce.setMaterialFromModel(g,this._surfaceMesh.material,t,u),d&&d.viewGL){d.viewGL.add(this.groupGL);var b=d.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[b]("fragment","SRGB_DECODE")}var L=t.get("parametric"),W=t.get("dataShape");W||(W=this._getDataShape(y,L));var ut=t.getModel("wireframe"),bt=ut.get("lineStyle.width"),Ct=ut.get("show")&&bt>0;this._updateSurfaceMesh(this._surfaceMesh,t,W,Ct);var Et=this._surfaceMesh.material;Ct?(Et.define("WIREFRAME_QUAD"),Et.set("wireframeLineWidth",bt),Et.set("wireframeLineColor",ce.parseColor(ut.get("lineStyle.color")))):Et.undefine("WIREFRAME_QUAD"),this._initHandler(t,u),this._updateAnimation(t)},_updateAnimation:function(t){ce.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,t)},_createSurfaceMesh:function(){var t=new ce.Mesh({geometry:new ce.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new ce.Material({shader:new ce.Shader(ce.Shader.source("ecgl.sm.depth.vertex"),ce.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return t.geometry.createAttribute("barycentric","float",4),t.geometry.createAttribute("prevPosition","float",3),t.geometry.createAttribute("prevNormal","float",3),Object.assign(t.geometry,Ad),t},_initHandler:function(t,a){var u=t.getData(),h=this._surfaceMesh,d=t.coordinateSystem;h.seriesIndex=t.seriesIndex;var y=-1;h.off("mousemove"),h.off("mouseout"),h.on("mousemove",function(S){var b=function g(S,b){for(var L=1/0,W=-1,ut=[],bt=0;bt<S.length;bt++){h.geometry.attributes.position.get(S[bt],ut);var Ct=zl.dist(b.array,ut);Ct<L&&(L=Ct,W=S[bt])}return W}(S.triangle,S.point);if(b>=0){var L=[];h.geometry.attributes.position.get(b,L);for(var W=d.pointToData(L),ut=1/0,bt=-1,Ct=[],Et=0;Et<u.count();Et++){Ct[0]=u.get("x",Et),Ct[1]=u.get("y",Et),Ct[2]=u.get("z",Et);var Dt=zl.squaredDistance(Ct,W);Dt<ut&&(bt=Et,ut=Dt)}bt!==y&&a.dispatchAction({type:"grid3DShowAxisPointer",value:W}),y=bt,h.dataIndex=bt}else h.dataIndex=-1},this),h.on("mouseout",function(S){y=-1,h.dataIndex=-1,a.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(t,a,u,h){var d=t.geometry,g=a.getData(),y=g.getLayout("points"),S=0;g.each(function(ki){g.hasValue(ki)||S++});var b=S||h,L=d.attributes.position,W=d.attributes.normal,ut=d.attributes.texcoord0,bt=d.attributes.barycentric,Ct=d.attributes.color,Et=u[0],Dt=u[1],$t="color"!==a.get("shading");if(b){var ae=(Et-1)*(Dt-1)*4;L.init(ae),h&&bt.init(ae)}else L.value=new Float32Array(y);Ct.init(d.vertexCount),ut.init(d.vertexCount);var Jt=[0,3,1,1,3,2],qt=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],me=d.indices=new(d.vertexCount>65535?Uint32Array:Uint16Array)((Et-1)*(Dt-1)*6),ge=function(ki,zo,ca){ca[1]=ki*Dt+zo,ca[0]=ki*Dt+zo+1,ca[3]=(ki+1)*Dt+zo+1,ca[2]=(ki+1)*Dt+zo},Ge=!1;if(b){var Oe=[],We=[],ar=0;$t?W.init(d.vertexCount):W.value=null;for(var Ke=[[],[],[]],lr=[],vr=[],nr=zl.create(),Sr=function(ki,zo,ca){var _p=3*zo;return ca[0]=ki[_p],ca[1]=ki[_p+1],ca[2]=ki[_p+2],ca},Er=new Float32Array(y.length),Wr=new Float32Array(y.length/3*4),Tr=0;Tr<g.count();Tr++)if(g.hasValue(Tr)){var Yi=ce.parseColor(wi(g,Tr));null!=(wn=$i(g,Tr))&&(Yi[3]*=wn),Yi[3]<.99&&(Ge=!0);for(var Gr=0;Gr<4;Gr++)Wr[4*Tr+Gr]=Yi[Gr]}var Kn=[1e7,1e7,1e7];for(Tr=0;Tr<Et-1;Tr++)for(var Dn=0;Dn<Dt-1;Dn++){var ni=4*(Tr*(Dt-1)+Dn);ge(Tr,Dn,Oe);var xn=!1;for(Gr=0;Gr<4;Gr++)Sr(y,Oe[Gr],We),Pv(We)&&(xn=!0);for(Gr=0;Gr<4;Gr++)xn?L.set(ni+Gr,Kn):(Sr(y,Oe[Gr],We),L.set(ni+Gr,We)),h&&bt.set(ni+Gr,qt[Gr]);for(Gr=0;Gr<6;Gr++)me[ar++]=Jt[Gr]+ni;if($t&&!xn)for(Gr=0;Gr<2;Gr++){for(var Zi=3*Gr,mi=0;mi<3;mi++)Sr(y,Ei=Oe[Jt[Zi]+mi],Ke[mi]);for(zl.sub(lr,Ke[0],Ke[1]),zl.sub(vr,Ke[1],Ke[2]),zl.cross(nr,lr,vr),mi=0;mi<3;mi++){var ua=3*Oe[Jt[Zi]+mi];Er[ua]=Er[ua]+nr[0],Er[ua+1]=Er[ua+1]+nr[1],Er[ua+2]=Er[ua+2]+nr[2]}}}if($t)for(Tr=0;Tr<Er.length/3;Tr++)Sr(Er,Tr,nr),zl.normalize(nr,nr),Er[3*Tr]=nr[0],Er[3*Tr+1]=nr[1],Er[3*Tr+2]=nr[2];Yi=[];var Fi=[];for(Tr=0;Tr<Et-1;Tr++)for(Dn=0;Dn<Dt-1;Dn++)for(ni=4*(Tr*(Dt-1)+Dn),ge(Tr,Dn,Oe),Gr=0;Gr<4;Gr++){for(mi=0;mi<4;mi++)Yi[mi]=Wr[4*Oe[Gr]+mi];var Ei;Ct.set(ni+Gr,Yi),$t&&(Sr(Er,Oe[Gr],nr),W.set(ni+Gr,nr)),Fi[0]=(Ei=Oe[Gr])%Dt/(Dt-1),Fi[1]=Math.floor(Ei/Dt)/(Et-1),ut.set(ni+Gr,Fi)}}else{for(Fi=[],Tr=0;Tr<g.count();Tr++){var wn;Fi[0]=Tr%Dt/(Dt-1),Fi[1]=Math.floor(Tr/Dt)/(Et-1),Yi=ce.parseColor(wi(g,Tr)),null!=(wn=$i(g,Tr))&&(Yi[3]*=wn),Yi[3]<.99&&(Ge=!0),Ct.set(Tr,Yi),ut.set(Tr,Fi)}Oe=[];var jc=0;for(Tr=0;Tr<Et-1;Tr++)for(Dn=0;Dn<Dt-1;Dn++)for(ge(Tr,Dn,Oe),Gr=0;Gr<6;Gr++)me[jc++]=Oe[Jt[Gr]];$t?d.generateVertexNormals():W.value=null}t.material.get("normalMap")&&d.generateTangents(),d.updateBoundingBox(),d.dirty(),t.material.transparent=Ge,t.material.depthMask=!Ge},_getDataShape:function(t,a){for(var u=-1/0,h=0,d=0,y=!1,S=a?"u":"x",b=t.count(),L=0;L<b;L++){var W=t.get(S,L);W<u&&(d=0,h++),u=W,d++}if((!h||1===d)&&(y=!0),!y)return[h+1,d];for(var ut=Math.floor(Math.sqrt(b));ut>0;){if(Math.floor(b/ut)===b/ut)return[ut,b/ut];ut--}return[ut=Math.floor(Math.sqrt(b)),ut]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function lf(t,a){for(var u=[],h=0;h<a.length;h++)u.push(t.dataToPoint(a[h]));return u}(0,V.D$)(function Ov(t){t.registerChartView(Av),t.registerSeriesModel(kl),t.registerLayout(function(a,u){a.eachSeriesByType("surface",function(h){var d=h.coordinateSystem,g=h.getData(),y=new Float32Array(3*g.count()),S=[NaN,NaN,NaN];if(d&&"cartesian3D"===d.type){var L=d.dimensions.map(function(W){return h.coordDimToDataDim(W)[0]});g.each(L,function(W,ut,bt,Ct){var Et;Et=g.hasValue(Ct)?d.dataToPoint([W,ut,bt]):S,y[3*Ct]=Et[0],y[3*Ct+1]=Et[1],y[3*Ct+2]=Et[2]})}g.setLayout("points",y)})})});var Ba=V.wJ.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(t){t=t||{};var a=this.get("coordinateSystem");null!=a&&"geo3D"!==a&&(this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null)},getInitialData:function(t){t.data=this.getFilledRegions(t.data,t.map);var a=V._y.createDimensions(t.data,{coordDimensions:["value"]}),u=new V.aV(a,this);u.initData(t.data);var h={};return u.each(function(d){var g=u.getName(d),y=u.getItemModel(d);h[g]=y}),this._regionModelMap=h,u},formatTooltip:function(t){return Vc(this,t)},getRegionModel:function(t){var a=this.getData().getName(t);return this._regionModelMap[a]||new V.Hn(null,this)},getRegionPolygonCoords:function(t){var a=this.coordinateSystem,u=this.getData().getName(t);if(a.transform)return(h=a.getRegion(u))?h.geometries:[];this._geo||(this._geo=Yp.createGeo3D(this));for(var h=this._geo.getRegion(u),d=[],g=0;g<h.geometries.length;g++){var y=h.geometries[g],S=[],b=lf(a,y.exterior);if(S&&S.length)for(var L=0;L<y.interiors.length;L++)S.push(lf(a,S[L]));d.push({interiors:S,exterior:b})}return d},getFormattedLabel:function(t,a){var u=bu.getFormattedLabel(this,t,a);return null==u&&(u=this.getData().getName(t)),u},defaultOption:{coordinateSystem:"geo3D",data:null}});V.D5.merge(Ba.prototype,Up),V.D5.merge(Ba.prototype,hu),V.D5.merge(Ba.prototype,ls),V.D5.merge(Ba.prototype,us),V.D5.merge(Ba.prototype,mu);const ap=Ba,Ev=V.TA.extend({type:"map3D",__ecgl__:!0,init:function(t,a){this._geo3DBuilder=new Kh(a),this.groupGL=new ce.Node},render:function(t,a,u){var h=t.coordinateSystem;if(h&&h.viewGL){if(this.groupGL.add(this._geo3DBuilder.rootNode),h.viewGL.add(this.groupGL),"geo3D"===h.type){this._sceneHelper||(this._sceneHelper=new Fs,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(h.viewGL.scene),this._sceneHelper.updateLight(t),h.viewGL.setPostEffect(t.getModel("postEffect"),u),h.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var g=this._control;g||(g=this._control=new _l({zr:u.getZr()}),this._control.init());var y=t.getModel("viewControl");g.setViewGL(h.viewGL),g.setFromViewControlModel(y,0),g.off("update"),g.on("update",function(){u.dispatchAction({type:"map3DChangeCamera",alpha:g.getAlpha(),beta:g.getBeta(),distance:g.getDistance(),from:this.uid,map3DId:t.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),t.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(t,a,u,0,t.getData().count());var S=h.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(b){b.material&&b.material[S]("fragment","SRGB_DECODE")})}},afterRender:function(t,a,u,h){var d=h.renderer,g=t.coordinateSystem;g&&"geo3D"===g.type&&(this._sceneHelper.updateAmbientCubemap(d,t,u),this._sceneHelper.updateSkybox(d,t,u))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});(0,V.D$)(function k_(t){Kp(t),t.registerChartView(Ev),t.registerSeriesModel(ap),t.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(a,u){u.eachComponent({mainType:"series",subType:"map3D",query:a},function(h){h.setView(a)})})});const op=V.wJ.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return V._y.createList(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,radiowavesuration:1,enable:!0}}}});var wv=D(4498),sp=D(8544);function Js(t){this.viewGL=t}Js.prototype.reset=function(t,a){this._updateCamera(a.getWidth(),a.getHeight(),a.getDevicePixelRatio()),this._viewTransform=wv.create(),this.updateTransform(t,a)},Js.prototype.updateTransform=function(t,a){var u=t.coordinateSystem;u.getRoamTransform&&(wv.invert(this._viewTransform,u.getRoamTransform()),this._setCameraTransform(this._viewTransform),a.getZr().refresh())},Js.prototype.dataToPoint=function(t,a,u){u=t.dataToPoint(a,null,u);var h=this._viewTransform;h&&sp.applyTransform(u,u,h)},Js.prototype.removeTransformInPoint=function(t){return this._viewTransform&&sp.applyTransform(t,t,this._viewTransform),t},Js.prototype.getZoom=function(){if(this._viewTransform){var t=this._viewTransform;return 1/Math.max(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]))}return 1},Js.prototype._setCameraTransform=function(t){var a=this.viewGL.camera;a.position.set(t[4],t[5],0),a.scale.set(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]),1)},Js.prototype._updateCamera=function(t,a,u){this.viewGL.setViewport(0,0,t,a,u);var h=this.viewGL.camera;h.left=h.top=0,h.bottom=a,h.right=t,h.near=0,h.far=100};const lp=Js,up=V.TA.extend({type:"scatterGL",__ecgl__:!0,init:function(t,a){this.groupGL=new ce.Node,this.viewGL=new Us("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new lp(this.viewGL)},render:function(t,a,u){if(this.groupGL.removeAll(),this._glViewHelper.reset(t,u),t.getData().count()){var h=this._pointsBuilderList[0];h||(h=this._pointsBuilderList[0]=new Pu(!0,u)),this._pointsBuilderList.length=1,this.groupGL.add(h.rootNode),this._removeTransformInPoints(t.getData().getLayout("points")),h.update(t,a,u),this.viewGL.setPostEffect(t.getModel("postEffect"),u)}},incrementalPrepareRender:function(t,a,u){this.groupGL.removeAll(),this._glViewHelper.reset(t,u),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),u)},incrementalRender:function(t,a,u,h){if(!(t.end<=t.start)){var d=this._pointsBuilderList[this._currentStep];d||(d=new Pu(!0,h),this._pointsBuilderList[this._currentStep]=d),this.groupGL.add(d.rootNode),this._removeTransformInPoints(a.getData().getLayout("points")),d.setSizeScale(this._sizeScale),d.update(a,u,h,t.start,t.end),h.getZr().refresh(),this._currentStep++}},updateTransform:function(t,a,u){if(t.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(t,u);var h=this._glViewHelper.getZoom(),d=Math.max((t.get("zoomScale")||0)*(h-1)+1,0);this._sizeScale=d,this._pointsBuilderList.forEach(function(g){g.setSizeScale(d)})}},_removeTransformInPoints:function(t){if(t)for(var a=[],u=0;u<t.length;u+=2)a[0]=t[u],a[1]=t[u+1],this._glViewHelper.removeTransformInPoint(a),t[u]=a[0],t[u+1]=a[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach(function(t){t.dispose()})},remove:function(){this.groupGL.removeAll()}});(0,V.D$)(function z_(t){t.registerChartView(up),t.registerSeriesModel(op),t.registerLayout({seriesType:"scatterGL",reset:function(a){var d,u=a.coordinateSystem,h=a.getData();if(u){var g=u.dimensions.map(function(S){return h.mapDimension(S)}).slice(0,2),y=[];1===g.length?d=function(S){for(var b=new Float32Array(2*(S.end-S.start)),L=S.start;L<S.end;L++){var W=2*(L-S.start),ut=h.get(g[0],L),bt=u.dataToPoint(ut);b[W]=bt[0],b[W+1]=bt[1]}h.setLayout("points",b)}:2===g.length&&(d=function(S){for(var b=new Float32Array(2*(S.end-S.start)),L=S.start;L<S.end;L++){var W=2*(L-S.start),ut=h.get(g[0],L),bt=h.get(g[1],L);y[0]=ut,y[1]=bt,y=u.dataToPoint(y),b[W]=y[0],b[W+1]=y[1]}h.setLayout("points",b)})}return{progress:d}}})});var U_=D(6677);const hp=D(8446).Z;var Eu=V.wJ.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(t){Eu.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(t){Eu.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(t,a,u,h){var d=bu.getFormattedLabel(this,t,a,u,h);if(null==d){var g=this.getData();d=g.get(g.dimensions[g.dimensions.length-1],t)}return d},getInitialData:function(t,a){var u=t.edges||t.links||[],h=t.data||t.nodes||[],d=this;if(h&&u)return function Dv(t,a,u,h,d){for(var g=new U_.ZP(h),y=0;y<t.length;y++)g.addNode(pn.firstNotNull(t[y].id,t[y].name,y),y);var S=[],b=[],L=0;for(y=0;y<a.length;y++){var W=a[y],ut=W.source,bt=W.target;g.addEdge(ut,bt,L)&&(b.push(W),S.push(pn.firstNotNull(W.id,ut+" > "+bt)),L++)}var Ct,Et=V._y.createDimensions(t,{coordDimensions:["value"]});(Ct=new V.aV(Et,u)).initData(t);var Dt=new V.aV(["value"],u);return Dt.initData(b,S),d&&d(Ct,Dt),hp({mainData:Ct,struct:g,structAttr:"graph",datas:{node:Ct,edge:Dt},datasAttr:{node:"data",edge:"edgeData"}}),g.update(),g}(h,u,this,!0,function g(y,S){y.wrapMethod("getItemModel",function(ut){const Et=d._categoriesModels[ut.getShallow("category")];return Et&&(Et.parentModel=ut.parentModel,ut.parentModel=Et),ut});const b=a.getModel([]).getModel;function L(ut,bt){const Ct=b.call(this,ut,bt);return Ct.resolveParentPath=W,Ct}function W(ut){if(ut&&("label"===ut[0]||"label"===ut[1])){const bt=ut.slice();return"label"===ut[0]?bt[0]="edgeLabel":"label"===ut[1]&&(bt[1]="edgeLabel"),bt}return ut}S.wrapMethod("getItemModel",function(ut){return ut.resolveParentPath=W,ut.getModel=L,ut})}).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,a,u){if("edge"===u){var h=this.getData(),d=this.getDataParams(t,u),g=h.graph.getEdgeByIndex(t),y=h.getName(g.node1.dataIndex),S=h.getName(g.node2.dataIndex),b=[];return null!=y&&b.push(y),null!=S&&b.push(S),b=V.WU.encodeHTML(b.join(" > ")),d.value&&(b+=" : "+V.WU.encodeHTML(d.value)),b}return Eu.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=(this.option.categories||[]).map(function(u){return null!=u.value?u:Object.assign({value:0},u)}),a=new V.aV(["value"],this);a.initData(t),this._categoriesData=a,this._categoriesModels=a.mapArray(function(u){return a.getItemModel(u,!0)})},setView:function(t){null!=t.zoom&&(this.option.zoom=t.zoom),null!=t.offset&&(this.option.offset=t.offset)},setNodePosition:function(t){for(var a=0;a<t.length/2;a++){var u=t[2*a],h=t[2*a+1],d=this.getData().getRawDataItem(a);d.x=u,d.y=h}},isAnimationEnabled:function(){return Eu.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}});const H_=Eu;var Li=gi.vec2,Lv=[[0,0],[1,1]],Xc=gn.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new gn.Attribute("position","float",2,"POSITION"),normal:new gn.Attribute("normal","float",2),offset:new gn.Attribute("offset","float",1),color:new gn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var a=this.attributes;this.vertexCount!==t&&(a.position.init(t),a.color.init(t),this.useNativeLine||(a.offset.init(t),a.normal.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(this.indices=0===t?null:this.vertexCount>65535?new Uint32Array(3*t):new Uint16Array(3*t))},_getCubicCurveApproxStep:function(t,a,u,h){return 1/(Li.dist(t,a)+Li.dist(u,a)+Li.dist(h,u)+1)*this.segmentScale},getCubicCurveVertexCount:function(t,a,u,h){var d=this._getCubicCurveApproxStep(t,a,u,h),g=Math.ceil(1/d);return this.useNativeLine?2*g:2*g+2},getCubicCurveTriangleCount:function(t,a,u,h){var d=this._getCubicCurveApproxStep(t,a,u,h),g=Math.ceil(1/d);return this.useNativeLine?0:2*g},getLineVertexCount:function(){return this.getPolylineVertexCount(Lv)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(Lv)},getPolylineVertexCount:function(t){var a;return a="number"==typeof t?t:"number"!=typeof t[0]?t.length:t.length/2,this.useNativeLine?2*(a-1):2*(a-1)+2},getPolylineTriangleCount:function(t){var a;return a="number"==typeof t?t:"number"!=typeof t[0]?t.length:t.length/2,this.useNativeLine?0:2*(a-1)},addCubicCurve:function(t,a,u,h,d,g){null==g&&(g=1);var y=t[0],S=t[1],b=a[0],L=a[1],W=u[0],ut=u[1],bt=h[0],Ct=h[1],Et=this._getCubicCurveApproxStep(t,a,u,h),Dt=Et*Et,zt=Dt*Et,$t=3*Et,ae=3*Dt,Jt=6*Dt,qt=6*zt,me=y-2*b+W,ge=S-2*L+ut,Ge=3*(b-W)-y+bt,Oe=3*(L-ut)-S+Ct,We=y,ar=S,Ke=(b-y)*$t+me*ae+Ge*zt,lr=(L-S)*$t+ge*ae+Oe*zt,vr=me*Jt+Ge*qt,nr=ge*Jt+Oe*qt,Sr=Ge*qt,Er=Oe*qt,Wr=0,Tr=0,wn=Math.ceil(1/Et),Gr=new Float32Array(3*(wn+1)),Kn=(Gr=[],0);for(Tr=0;Tr<wn+1;Tr++)Gr[Kn++]=We,Gr[Kn++]=ar,We+=Ke,ar+=lr,Ke+=vr,lr+=nr,vr+=Sr,nr+=Er,(Wr+=Et)>1&&(We=Ke>0?Math.min(We,bt):Math.max(We,bt),ar=lr>0?Math.min(ar,Ct):Math.max(ar,Ct));this.addPolyline(Gr,d,g)},addLine:function(t,a,u,h){this.addPolyline([t,a],u,h)},addPolyline:function(){var t=Li.create(),a=Li.create(),u=Li.create(),h=Li.create(),d=[],g=[],y=[];return function(S,b,L,W,ut){if(S.length){var bt="number"!=typeof S[0];if(null==ut&&(ut=bt?S.length:S.length/2),!(ut<2)){null==W&&(W=0),null==L&&(L=1),this._itemVertexOffsets.push(this._vertexOffset);for(var qt,Ct=bt?"number"!=typeof b[0]:b.length/4===ut,Et=this.attributes.position,Dt=this.attributes.color,zt=this.attributes.offset,$t=this.attributes.normal,ae=this.indices,Jt=this._vertexOffset,me=0;me<ut;me++){if(bt)d=S[me+W],qt=Ct?b[me+W]:b;else if((d=d||[])[0]=S[ge=2*me+W],d[1]=S[ge+1],Ct){var Ge=4*me+W;(qt=qt||[])[0]=b[Ge],qt[1]=b[Ge+1],qt[2]=b[Ge+2],qt[3]=b[Ge+3]}else qt=b;if(this.useNativeLine)me>1&&(Et.copy(Jt,Jt-1),Dt.copy(Jt,Jt-1),Jt++);else{var Oe,ge;if(me<ut-1)if(bt?Li.copy(g,S[me+1]):((g=g||[])[0]=S[ge=2*(me+1)+W],g[1]=S[ge+1]),me>0){Li.sub(t,d,y),Li.sub(a,g,d),Li.normalize(t,t),Li.normalize(a,a),Li.add(h,t,a),Li.normalize(h,h);var We=L/2*Math.min(1/Li.dot(t,h),2);u[0]=-h[1],u[1]=h[0],Oe=We}else Li.sub(t,g,d),Li.normalize(t,t),u[0]=-t[1],u[1]=t[0],Oe=L/2;else Li.sub(t,d,y),Li.normalize(t,t),u[0]=-t[1],u[1]=t[0],Oe=L/2;$t.set(Jt,u),$t.set(Jt+1,u),zt.set(Jt,Oe),zt.set(Jt+1,-Oe),Li.copy(y,d),Et.set(Jt,d),Et.set(Jt+1,d),Dt.set(Jt,qt),Dt.set(Jt+1,qt),Jt+=2}if(this.useNativeLine)Dt.set(Jt,qt),Et.set(Jt,d),Jt++;else if(me>0){var ar=3*this._faceOffset;(ae=this.indices)[ar]=Jt-4,ae[ar+1]=Jt-3,ae[ar+2]=Jt-2,ae[ar+3]=Jt-3,ae[ar+4]=Jt-1,ae[ar+5]=Jt-2,this._faceOffset+=2}}this._vertexOffset=Jt}}}}(),setItemColor:function(t,a){for(var h=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,d=this._itemVertexOffsets[t];d<h;d++)this.attributes.color.set(d,a);this.dirty("color")}});V.D5.defaults(Xc.prototype,ml);const fp=Xc;ce.Shader.import("@export ecgl.forceAtlas2.updateNodeRepulsion\n\n#define NODE_COUNT 0\n\nuniform sampler2D positionTex;\n\nuniform vec2 textureSize;\nuniform float gravity;\nuniform float scaling;\nuniform vec2 gravityCenter;\n\nuniform bool strongGravityMode;\nuniform bool preventOverlap;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n\n vec4 n0 = texture2D(positionTex, v_Texcoord);\n\n vec2 force = vec2(0.0);\n for (int i = 0; i < NODE_COUNT; i++) {\n vec2 uv = vec2(\n mod(float(i), textureSize.x) / (textureSize.x - 1.0),\n floor(float(i) / textureSize.x) / (textureSize.y - 1.0)\n );\n vec4 n1 = texture2D(positionTex, uv);\n\n vec2 dir = n0.xy - n1.xy;\n float d2 = dot(dir, dir);\n\n if (d2 > 0.0) {\n float factor = 0.0;\n if (preventOverlap) {\n float d = sqrt(d2);\n d = d - n0.w - n1.w;\n if (d > 0.0) {\n factor = scaling * n0.z * n1.z / (d * d);\n }\n else if (d < 0.0) {\n factor = scaling * 100.0 * n0.z * n1.z;\n }\n }\n else {\n factor = scaling * n0.z * n1.z / d2;\n }\n force += dir * factor;\n }\n }\n\n vec2 dir = gravityCenter - n0.xy;\n float d = 1.0;\n if (!strongGravityMode) {\n d = length(dir);\n }\n\n force += dir * n0.z * gravity / (d + 1.0);\n\n gl_FragColor = vec4(force, 0.0, 1.0);\n}\n@end\n\n@export ecgl.forceAtlas2.updateEdgeAttraction.vertex\n\nattribute vec2 node1;\nattribute vec2 node2;\nattribute float weight;\n\nuniform sampler2D positionTex;\nuniform float edgeWeightInfluence;\nuniform bool preventOverlap;\nuniform bool linLogMode;\n\nuniform vec2 windowSize: WINDOW_SIZE;\n\nvarying vec2 v_Force;\n\nvoid main() {\n\n vec4 n0 = texture2D(positionTex, node1);\n vec4 n1 = texture2D(positionTex, node2);\n\n vec2 dir = n1.xy - n0.xy;\n float d = length(dir);\n float w;\n if (edgeWeightInfluence == 0.0) {\n w = 1.0;\n }\n else if (edgeWeightInfluence == 1.0) {\n w = weight;\n }\n else {\n w = pow(weight, edgeWeightInfluence);\n }\n vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);\n vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);\n vec2 pos = node1 * scale * 2.0 - 1.0;\n gl_Position = vec4(pos + offset, 0.0, 1.0);\n gl_PointSize = 1.0;\n\n float factor;\n if (preventOverlap) {\n d = d - n1.w - n0.w;\n }\n if (d <= 0.0) {\n v_Force = vec2(0.0);\n return;\n }\n\n if (linLogMode) {\n factor = w * log(d) / d;\n }\n else {\n factor = w;\n }\n v_Force = dir * factor;\n}\n@end\n\n@export ecgl.forceAtlas2.updateEdgeAttraction.fragment\n\nvarying vec2 v_Force;\n\nvoid main() {\n gl_FragColor = vec4(v_Force, 0.0, 0.0);\n}\n@end\n\n@export ecgl.forceAtlas2.calcWeightedSum.vertex\n\nattribute vec2 node;\n\nvarying vec2 v_NodeUv;\n\nvoid main() {\n\n v_NodeUv = node;\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n gl_PointSize = 1.0;\n}\n@end\n\n@export ecgl.forceAtlas2.calcWeightedSum.fragment\n\nvarying vec2 v_NodeUv;\n\nuniform sampler2D positionTex;\nuniform sampler2D forceTex;\nuniform sampler2D forcePrevTex;\n\nvoid main() {\n vec2 force = texture2D(forceTex, v_NodeUv).rg;\n vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;\n\n float mass = texture2D(positionTex, v_NodeUv).z;\n float swing = length(force - forcePrev) * mass;\n float traction = length(force + forcePrev) * 0.5 * mass;\n\n gl_FragColor = vec4(swing, traction, 0.0, 0.0);\n}\n@end\n\n@export ecgl.forceAtlas2.calcGlobalSpeed\n\nuniform sampler2D globalSpeedPrevTex;\nuniform sampler2D weightedSumTex;\nuniform float jitterTolerence;\n\nvoid main() {\n vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;\n float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;\n float globalSpeed = jitterTolerence * jitterTolerence\n * weightedSum.y / weightedSum.x;\n if (prevGlobalSpeed > 0.0) {\n globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;\n }\n gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);\n}\n@end\n\n@export ecgl.forceAtlas2.updatePosition\n\nuniform sampler2D forceTex;\nuniform sampler2D forcePrevTex;\nuniform sampler2D positionTex;\nuniform sampler2D globalSpeedTex;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n vec2 force = texture2D(forceTex, v_Texcoord).xy;\n vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;\n vec4 node = texture2D(positionTex, v_Texcoord);\n\n float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;\n float swing = length(force - forcePrev);\n float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));\n\n float df = length(force);\n if (df > 0.0) {\n speed = min(df * speed, 10.0) / df;\n\n gl_FragColor = vec4(node.xy + speed * force, node.zw);\n }\n else {\n gl_FragColor = node;\n }\n}\n@end\n\n@export ecgl.forceAtlas2.edges.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec2 node;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\nuniform sampler2D positionTex;\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(\n texture2D(positionTex, node).xy, -10.0, 1.0\n );\n v_Color = a_Color;\n}\n@end\n\n@export ecgl.forceAtlas2.edges.fragment\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nvarying vec4 v_Color;\nvoid main() {\n gl_FragColor = color * v_Color;\n}\n@end");var uf={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function Xi(t){var a={type:ce.Texture.FLOAT,minFilter:ce.Texture.NEAREST,magFilter:ce.Texture.NEAREST};this._positionSourceTex=new ce.Texture2D(a),this._positionSourceTex.flipY=!1,this._positionTex=new ce.Texture2D(a),this._positionPrevTex=new ce.Texture2D(a),this._forceTex=new ce.Texture2D(a),this._forcePrevTex=new ce.Texture2D(a),this._weightedSumTex=new ce.Texture2D(a),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new ce.Texture2D(a),this._globalSpeedPrevTex=new ce.Texture2D(a),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new Vn({fragment:ce.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new Vn({fragment:ce.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new Vn({fragment:ce.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new Vn({fragment:ce.Shader.source("clay.compositor.output")});var u=function(h){h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE)};this._edgeForceMesh=new ce.Mesh({geometry:new ce.Geometry({attributes:{node1:new ce.Geometry.Attribute("node1","float",2),node2:new ce.Geometry.Attribute("node2","float",2),weight:new ce.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new ce.Material({transparent:!0,shader:ce.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:u,depthMask:!1,depthText:!1}),mode:ce.Mesh.POINTS}),this._weightedSumMesh=new ce.Mesh({geometry:new ce.Geometry({attributes:{node:new ce.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new ce.Material({transparent:!0,shader:ce.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:u,depthMask:!1,depthText:!1}),mode:ce.Mesh.POINTS}),this._framebuffer=new ve({depthBuffer:!1}),this._dummyCamera=new ce.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}Xi.prototype.updateOption=function(t){for(var a in uf)this[a]=uf[a];var u=this._nodes.length;if(this.jitterTolerence=u>5e4?10:u>5e3?1:.1,this.scaling=u>100?2:10,t)for(var a in uf)null!=t[a]&&(this[a]=t[a]);if(this.repulsionByDegree)for(var h=this._positionSourceTex.pixels,d=0;d<this._nodes.length;d++)h[4*d+2]=(this._nodes[d].degree||0)+1},Xi.prototype._updateGravityCenter=function(t){var a=this._nodes,u=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var h=[1/0,1/0],d=[-1/0,-1/0],g=0;g<a.length;g++)h[0]=Math.min(a[g].x,h[0]),h[1]=Math.min(a[g].y,h[1]),d[0]=Math.max(a[g].x,d[0]),d[1]=Math.max(a[g].y,d[1]);this._gravityCenter=[.5*(h[0]+d[0]),.5*(h[1]+d[1])]}for(g=0;g<u.length;g++){var y=u[g].node1,S=u[g].node2;a[y].degree=(a[y].degree||0)+1,a[S].degree=(a[S].degree||0)+1}},Xi.prototype.initData=function(t,a){this._nodes=t,this._edges=a,this._updateGravityCenter();var u=Math.ceil(Math.sqrt(t.length)),h=u,d=new Float32Array(u*h*4);this._resize(u,h);for(var g=0,y=0;y<t.length;y++){var S=t[y];d[g++]=S.x||0,d[g++]=S.y||0,d[g++]=S.mass||1,d[g++]=S.size||1}this._positionSourceTex.pixels=d;var b=this._edgeForceMesh.geometry,L=a.length;b.attributes.node1.init(2*L),b.attributes.node2.init(2*L),b.attributes.weight.init(2*L);var W=[];for(y=0;y<a.length;y++){var ut=b.attributes,bt=a[y].weight;null==bt&&(bt=1),ut.node1.set(y,this.getNodeUV(a[y].node1,W)),ut.node2.set(y,this.getNodeUV(a[y].node2,W)),ut.weight.set(y,bt),ut.node1.set(y+L,this.getNodeUV(a[y].node2,W)),ut.node2.set(y+L,this.getNodeUV(a[y].node1,W)),ut.weight.set(y+L,bt)}var Ct=this._weightedSumMesh.geometry;for(Ct.attributes.node.init(t.length),y=0;y<t.length;y++)Ct.attributes.node.set(y,this.getNodeUV(y,W));b.dirty(),Ct.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",t.length),this._nodeRepulsionPass.material.setUniform("textureSize",[u,h]),this._inited=!1,this._frame=0},Xi.prototype.getNodes=function(){return this._nodes},Xi.prototype.getEdges=function(){return this._edges},Xi.prototype.step=function(t){this._inited||(this._initFromSource(t),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(t);var a=this._nodeRepulsionPass;a.setUniform("strongGravityMode",this.strongGravityMode),a.setUniform("gravity",this.gravity),a.setUniform("gravityCenter",this._gravityCenter),a.setUniform("scaling",this.scaling),a.setUniform("preventOverlap",this.preventOverlap),a.setUniform("positionTex",this._positionPrevTex),a.render(t);var u=this._edgeForceMesh;u.material.set("linLogMode",this.linLogMode),u.material.set("edgeWeightInfluence",this.edgeWeightInfluence),u.material.set("preventOverlap",this.preventOverlap),u.material.set("positionTex",this._positionPrevTex),t.gl.enable(t.gl.BLEND),t.renderPass([u],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT),t.gl.enable(t.gl.BLEND);var h=this._weightedSumMesh;h.material.set("positionTex",this._positionPrevTex),h.material.set("forceTex",this._forceTex),h.material.set("forcePrevTex",this._forcePrevTex),t.renderPass([h],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var d=this._globalSpeedPass;d.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),d.setUniform("weightedSumTex",this._weightedSumTex),d.setUniform("jitterTolerence",this.jitterTolerence),t.gl.disable(t.gl.BLEND),d.render(t);var g=this._positionPass;this._framebuffer.attach(this._positionTex),g.setUniform("globalSpeedTex",this._globalSpeedTex),g.setUniform("positionTex",this._positionPrevTex),g.setUniform("forceTex",this._forceTex),g.setUniform("forcePrevTex",this._forcePrevTex),g.render(t),this._framebuffer.unbind(t),this._swapTexture()},Xi.prototype.update=function(t,a,u){null==a&&(a=1),a=Math.max(a,1);for(var h=0;h<a;h++)this.step(t);u&&u()},Xi.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex},Xi.prototype.getNodeUV=function(t,a){var u=this._positionTex.width,h=this._positionTex.height;return(a=a||[])[0]=t%u/(u-1),a[1]=Math.floor(t/u)/(h-1)||0,a},Xi.prototype.getNodePosition=function(t,a){var u=this._positionArr,h=this._positionTex.width,d=this._positionTex.height,g=h*d;(!u||u.length!==4*g)&&(u=this._positionArr=new Float32Array(4*g)),this._framebuffer.bind(t),this._framebuffer.attach(this._positionPrevTex),t.gl.readPixels(0,0,h,d,t.gl.RGBA,t.gl.FLOAT,u),this._framebuffer.unbind(t),a||(a=new Float32Array(2*this._nodes.length));for(var y=0;y<this._nodes.length;y++)a[2*y]=u[4*y],a[2*y+1]=u[4*y+1];return a},Xi.prototype.getTextureData=function(t,a){var u=this["_"+a+"Tex"],h=u.width,d=u.height;this._framebuffer.bind(t),this._framebuffer.attach(u);var g=new Float32Array(h*d*4);return t.gl.readPixels(0,0,h,d,t.gl.RGBA,t.gl.FLOAT,g),this._framebuffer.unbind(t),g},Xi.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}},Xi.prototype.isFinished=function(t){return this._frame>t},Xi.prototype._swapTexture=function(){var t=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=t,t=this._forcePrevTex,this._forcePrevTex=this._forceTex,this._forceTex=t,t=this._globalSpeedPrevTex,this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=t},Xi.prototype._initFromSource=function(t){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(t),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(t),t.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(t)},Xi.prototype._resize=function(t,a){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(u){this[u].width=t,this[u].height=a,this[u].dirty()},this)},Xi.prototype.dispose=function(t){this._framebuffer.dispose(t),this._copyPass.dispose(t),this._nodeRepulsionPass.dispose(t),this._positionPass.dispose(t),this._globalSpeedPass.dispose(t),this._edgeForceMesh.geometry.dispose(t),this._weightedSumMesh.geometry.dispose(t),this._positionSourceTex.dispose(t),this._positionTex.dispose(t),this._positionPrevTex.dispose(t),this._forceTex.dispose(t),this._forcePrevTex.dispose(t),this._weightedSumTex.dispose(t),this._globalSpeedTex.dispose(t),this._globalSpeedPrevTex.dispose(t)};const cf=Xi;var Yc=function pp(){var t_create=function(){return new Float32Array(2)},t_dist=function(b,L){var W=L[0]-b[0],ut=L[1]-b[1];return Math.sqrt(W*W+ut*ut)},t_len=function(b){var L=b[0],W=b[1];return Math.sqrt(L*L+W*W)},t_scaleAndAdd=function(b,L,W,ut){return b[0]=L[0]+W[0]*ut,b[1]=L[1]+W[1]*ut,b},t_add=function(b,L,W){return b[0]=L[0]+W[0],b[1]=L[1]+W[1],b},t_sub=function(b,L,W){return b[0]=L[0]-W[0],b[1]=L[1]-W[1],b},t_copy=function(b,L){return b[0]=L[0],b[1]=L[1],b},t_set=function(b,L,W){return b[0]=L,b[1]=W,b};function a(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var u=a.prototype;function h(){this.position=new Float32Array(2),this.force=t_create(),this.forcePrev=t_create(),this.mass=1,this.inDegree=0,this.outDegree=0}function d(b,L){this.source=b,this.target=L,this.weight=1}function g(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new a,this.rootRegion.centerOfMass=t_create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}u.beforeUpdate=function(){for(var b=0;b<this.nSubRegions;b++)this.subRegions[b].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},u.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var b=0;b<this.nSubRegions;b++)this.subRegions[b].afterUpdate()},u.addNode=function(b){if(0===this.nSubRegions){if(null==this.node)return void(this.node=b);this._addNodeToSubRegion(this.node),this.node=null}this._addNodeToSubRegion(b),this._updateCenterOfMass(b)},u.findSubRegion=function(b,L){for(var W=0;W<this.nSubRegions;W++){var ut=this.subRegions[W];if(ut.contain(b,L))return ut}},u.contain=function(b,L){return this.bbox[0]<=b&&this.bbox[2]>=b&&this.bbox[1]<=L&&this.bbox[3]>=L},u.setBBox=function(b,L,W,ut){this.bbox[0]=b,this.bbox[1]=L,this.bbox[2]=W,this.bbox[3]=ut,this.size=(W-b+ut-L)/2},u._newSubRegion=function(){var b=this.subRegions[this.nSubRegions];return b||(b=new a,this.subRegions[this.nSubRegions]=b),this.nSubRegions++,b},u._addNodeToSubRegion=function(b){var L=this.findSubRegion(b.position[0],b.position[1]),W=this.bbox;if(!L){var Ct=(W[2]-W[0])/2,Et=(W[3]-W[1])/2,Dt=b.position[0]>=(W[0]+W[2])/2?1:0,zt=b.position[1]>=(W[1]+W[3])/2?1:0;(L=this._newSubRegion()).setBBox(Dt*Ct+W[0],zt*Et+W[1],(Dt+1)*Ct+W[0],(zt+1)*Et+W[1])}L.addNode(b)},u._updateCenterOfMass=function(b){null==this.centerOfMass&&(this.centerOfMass=new Float32Array(2));var L=this.centerOfMass[0]*this.mass,W=this.centerOfMass[1]*this.mass;L+=b.position[0]*b.mass,W+=b.position[1]*b.mass,this.mass+=b.mass,this.centerOfMass[0]=L/this.mass,this.centerOfMass[1]=W/this.mass};var b,y=g.prototype;y.initNodes=function(b,L,W){var ut=L.length;this.nodes.length=0;for(var bt=typeof W<"u",Ct=0;Ct<ut;Ct++){var Et=new h;Et.position[0]=b[2*Ct],Et.position[1]=b[2*Ct+1],Et.mass=L[Ct],bt&&(Et.size=W[Ct]),this.nodes.push(Et)}this._massArr=L,this._swingingArr=new Float32Array(ut),bt&&(this._sizeArr=W)},y.initEdges=function(b,L){var W=b.length/2;this.edges.length=0;for(var ut=0;ut<W;ut++){var Et=this.nodes[b[2*ut]],Dt=this.nodes[b[2*ut+1]];if(!Et||!Dt)return void console.error("Node not exists, try initNodes before initEdges");Et.outDegree++,Dt.inDegree++;var zt=new d(Et,Dt);L&&(zt.weight=L[ut]),this.edges.push(zt)}},y.updateSettings=function(){if(this.repulsionByDegree)for(var b=0;b<this.nodes.length;b++)(L=this.nodes[b]).mass=L.inDegree+L.outDegree+1;else for(b=0;b<this.nodes.length;b++){var L;(L=this.nodes[b]).mass=this._massArr[b]}},y.update=function(){var b=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var L=0;L<b;L++)this.rootRegion.addNode(this.nodes[L]);this.rootRegion.afterUpdate()}for(L=0;L<b;L++)t_copy((W=this.nodes[L]).forcePrev,W.force),t_set(W.force,0,0);for(L=0;L<b;L++){var ut=this.nodes[L];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,ut);else for(var bt=L+1;bt<b;bt++)this.applyNodeToNodeRepulsion(ut,this.nodes[bt],!1);this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(ut):this.applyNodeGravity(ut))}for(L=0;L<this.edges.length;L++)this.applyEdgeAttraction(this.edges[L]);var Et=0,Dt=0,zt=t_create();for(L=0;L<b;L++)Et+=($t=t_dist((W=this.nodes[L]).force,W.forcePrev))*W.mass,t_add(zt,W.force,W.forcePrev),Dt+=.5*t_len(zt)*W.mass,this._swingingArr[L]=$t;var Jt=this.jitterTolerence*this.jitterTolerence*Dt/Et;for(this._globalSpeed>0&&(Jt=Math.min(Jt/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=Jt,L=0;L<b;L++){var W=this.nodes[L],$t=this._swingingArr[L],qt=.1*Jt/(1+Jt*Math.sqrt($t)),me=t_len(W.force);me>0&&(qt=Math.min(me*qt,10)/me,t_scaleAndAdd(W.position,W.position,W.force,qt))}},y.applyRegionToNodeRepulsion=(b=t_create(),function(W,ut){if(W.node)this.applyNodeToNodeRepulsion(W.node,ut,!0);else{t_sub(b,ut.position,W.centerOfMass);var bt=b[0]*b[0]+b[1]*b[1];if(bt>this.barnesHutTheta*W.size*W.size)t_scaleAndAdd(ut.force,ut.force,b,this.scaling*ut.mass*W.mass/bt);else for(var Et=0;Et<W.nSubRegions;Et++)this.applyRegionToNodeRepulsion(W.subRegions[Et],ut)}}),y.applyNodeToNodeRepulsion=function(){var b=t_create();return function(W,ut,bt){if(W!=ut){t_sub(b,W.position,ut.position);var Ct=b[0]*b[0]+b[1]*b[1];if(0!==Ct){var Et;if(this.preventOverlap){var Dt=Math.sqrt(Ct);if((Dt=Dt-W.size-ut.size)>0)Et=this.scaling*W.mass*ut.mass/(Dt*Dt);else{if(!(Dt<0))return;Et=100*this.scaling*W.mass*ut.mass}}else Et=this.scaling*W.mass*ut.mass/Ct;t_scaleAndAdd(W.force,W.force,b,Et),t_scaleAndAdd(ut.force,ut.force,b,-Et)}}}}(),y.applyEdgeAttraction=function(){var b=t_create();return function(W){var ut=W.source,bt=W.target;t_sub(b,ut.position,bt.position);var Et,Dt,Ct=t_len(b);Et=0===this.edgeWeightInfluence?1:1===this.edgeWeightInfluence?W.weight:Math.pow(W.weight,this.edgeWeightInfluence),this.preventOverlap&&(Ct=Ct-ut.size-bt.size)<=0||(Dt=this.linLogMode?-Et*Math.log(Ct+1)/(Ct+1):-Et,t_scaleAndAdd(ut.force,ut.force,b,Dt),t_scaleAndAdd(bt.force,bt.force,b,-Dt))}}(),y.applyNodeGravity=function(){var b=t_create();return function(L){t_sub(b,this.gravityCenter,L.position);var W=t_len(b);t_scaleAndAdd(L.force,L.force,b,this.gravity*L.mass/(W+1))}}(),y.applyNodeStrongGravity=function(){var b=t_create();return function(L){t_sub(b,this.gravityCenter,L.position),t_scaleAndAdd(L.force,L.force,b,this.gravity*L.mass)}}(),y.updateBBox=function(){for(var b=1/0,L=1/0,W=-1/0,ut=-1/0,bt=0;bt<this.nodes.length;bt++){var Ct=this.nodes[bt].position;b=Math.min(b,Ct[0]),L=Math.min(L,Ct[1]),W=Math.max(W,Ct[0]),ut=Math.max(ut,Ct[1])}this.bbox[0]=b,this.bbox[1]=L,this.bbox[2]=W,this.bbox[3]=ut},y.getGlobalSpeed=function(){return this._globalSpeed};var S=null;self.onmessage=function(b){switch(b.data.cmd){case"init":(S=new g).initNodes(b.data.nodesPosition,b.data.nodesMass,b.data.nodesSize),S.initEdges(b.data.edges,b.data.edgesWeight);break;case"updateConfig":if(S)for(var L in b.data.config)S[L]=b.data.config[L];break;case"update":var W=b.data.steps;if(S){for(var ut=0;ut<W;ut++)S.update();var bt=S.nodes.length,Ct=new Float32Array(2*bt);for(ut=0;ut<bt;ut++){var Et=S.nodes[ut];Ct[2*ut]=Et.position[0],Ct[2*ut+1]=Et.position[1]}self.postMessage({buffer:Ct.buffer,globalSpeed:S.getGlobalSpeed()},[Ct.buffer])}else{var Dt=new Float32Array;self.postMessage({buffer:Dt.buffer,globalSpeed:S.getGlobalSpeed()},[Dt.buffer])}}}}.toString();Yc=Yc.slice(Yc.indexOf("{")+1,Yc.lastIndexOf("}"));var Kc={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},to=function(t){for(var a in Kc)this[a]=Kc[a];if(t)for(var a in t)this[a]=t[a];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new an({type:zr.FLOAT,flipY:!1,minFilter:zr.NEAREST,magFilter:zr.NEAREST})};to.prototype.initData=function(t,a){var u=new Blob([Yc]),h=window.URL.createObjectURL(u);this._worker=new Worker(h),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=t,this._edges=a,this._frame=0;for(var d=t.length,g=a.length,y=new Float32Array(2*d),S=new Float32Array(d),b=new Float32Array(d),L=new Float32Array(2*g),W=new Float32Array(g),ut=0;ut<t.length;ut++){var bt=t[ut];y[2*ut]=bt.x,y[2*ut+1]=bt.y,S[ut]=bt.mass??1,b[ut]=bt.size??1}for(ut=0;ut<a.length;ut++){var Ct=a[ut],Dt=Ct.node2;L[2*ut]=Ct.node1,L[2*ut+1]=Dt,W[ut]=Ct.weight??1}var zt=Math.ceil(Math.sqrt(t.length)),$t=zt,ae=new Float32Array(zt*$t*4),Jt=this._positionTex;Jt.width=zt,Jt.height=$t,Jt.pixels=ae,this._worker.postMessage({cmd:"init",nodesPosition:y,nodesMass:S,nodesSize:b,edges:L,edgesWeight:W}),this._globalSpeed=1/0},to.prototype.updateOption=function(t){var a={};for(var u in Kc)a[u]=Kc[u];var h=this._nodes,d=this._edges,g=h.length;if(a.jitterTolerence=g>5e4?10:g>5e3?1:.1,a.scaling=g>100?2:10,a.barnesHutOptimize=g>1e3,t)for(var u in Kc)null!=t[u]&&(a[u]=t[u]);if(!a.gravityCenter){for(var y=[1/0,1/0],S=[-1/0,-1/0],b=0;b<h.length;b++)y[0]=Math.min(h[b].x,y[0]),y[1]=Math.min(h[b].y,y[1]),S[0]=Math.max(h[b].x,S[0]),S[1]=Math.max(h[b].y,S[1]);a.gravityCenter=[.5*(y[0]+S[0]),.5*(y[1]+S[1])]}for(b=0;b<d.length;b++){var L=d[b].node1,W=d[b].node2;h[L].degree=(h[L].degree||0)+1,h[W].degree=(h[W].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:a})},to.prototype.update=function(t,a,u){null==a&&(a=1),a=Math.max(a,1),this._frame+=a,this._onupdate=u,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(a)})},to.prototype._$onupdate=function(t){if(!this._disposed){var a=new Float32Array(t.data.buffer);this._globalSpeed=t.data.globalSpeed,this._positionArr=a,this._updateTexture(a),this._onupdate&&this._onupdate()}},to.prototype.getNodePositionTexture=function(){return this._positionTex},to.prototype.getNodeUV=function(t,a){var u=this._positionTex.width,h=this._positionTex.height;return(a=a||[])[0]=t%u/(u-1),a[1]=Math.floor(t/u)/(h-1),a},to.prototype.getNodes=function(){return this._nodes},to.prototype.getEdges=function(){return this._edges},to.prototype.isFinished=function(t){return this._frame>t},to.prototype.getNodePosition=function(t,a){if(a||(a=new Float32Array(2*this._nodes.length)),this._positionArr)for(var u=0;u<this._positionArr.length;u++)a[u]=this._positionArr[u];return a},to.prototype._updateTexture=function(t){for(var a=this._positionTex.pixels,u=0,h=0;h<t.length;)a[u++]=t[h++],a[u++]=t[h++],a[u++]=1,a[u++]=1;this._positionTex.dirty()},to.prototype.dispose=function(t){this._disposed=!0,this._worker=null};const Nv=to;var V_=I.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var t=this.zr;t.on("mousedown",this._mouseDownHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("globalout",this._mouseUpHandler),t.animation.on("frame",this._update)},setTarget:function(t){this._target=t},setZoom:function(t){this._zoom=Math.max(Math.min(t,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(t){this._dx=t[0],this._dy=t[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(this._target&&this._needsUpdate){var t=this._target,a=this._zoom;t.position.x=this._dx,t.position.y=this._dy,t.scale.set(a,a,a),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(t){if(!t.target){var a=t.offsetX,u=t.offsetY;if(!this.viewGL||this.viewGL.containPoint(a,u)){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var h=this._convertPos(a,u);this._x=h.x,this._y=h.y}}},_convertPos:function(t,a){var u=this.viewGL.camera,h=this.viewGL.viewport;return{x:(t-h.x)/h.width*(u.right-u.left)+u.left,y:(a-h.y)/h.height*(u.bottom-u.top)+u.top}},_mouseMoveHandler:function(t){var a=this._convertPos(t.offsetX,t.offsetY);this._dx+=a.x-this._x,this._dy+=a.y-this._y,this._x=a.x,this._y=a.y,this._needsUpdate=!0},_mouseUpHandler:function(t){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(t){var a=(t=t.event).wheelDelta||-t.detail;if(0!==a){var u=t.offsetX,h=t.offsetY;if(!this.viewGL||this.viewGL.containPoint(u,h)){var d=a>0?1.1:.9,g=Math.max(Math.min(this._zoom*d,this.maxZoom),this.minZoom);d=g/this._zoom;var y=this._convertPos(u,h),b=(y.y-this._dy)*(d-1);this._dx-=(y.x-this._dx)*(d-1),this._dy-=b,this._zoom=g,this._needsUpdate=!0}}},dispose:function(){var t=this.zr;t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("globalout",this._mouseUpHandler),t.animation.off("frame",this._update)}});const W_=V_;var hf=gi.vec2;ce.Shader.import("@export ecgl.lines2D.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec2 position: POSITION;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\n#ifdef POSITIONTEXTURE_ENABLED\nuniform sampler2D positionTexture;\n#endif\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);\n\n v_Color = a_Color;\n}\n\n@end\n\n@export ecgl.lines2D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\nvoid main()\n{\n gl_FragColor = color * v_Color;\n}\n@end\n\n\n@export ecgl.meshLines2D.vertex\n\nattribute vec2 position: POSITION;\nattribute vec2 normal;\nattribute float offset;\nattribute vec4 a_Color : COLOR;\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\n\nvarying vec4 v_Color;\nvarying float v_Miter;\n\nvoid main()\n{\n vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);\n gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);\n\n p2.xy /= p2.w;\n gl_Position.xy /= gl_Position.w;\n\n vec2 N = normalize(p2.xy - gl_Position.xy);\n gl_Position.xy += N * offset / viewport.zw * 2.0;\n\n gl_Position.xy *= gl_Position.w;\n\n v_Color = a_Color;\n}\n@end\n\n\n@export ecgl.meshLines2D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\nvarying float v_Miter;\n\nvoid main()\n{\n gl_FragColor = color * v_Color;\n}\n\n@end");var Iv=1;const X_=V.TA.extend({type:"graphGL",__ecgl__:!0,init:function(t,a){this.groupGL=new ce.Node,this.viewGL=new Us("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new Pu(!0,a),this._forceEdgesMesh=new ce.Mesh({material:new ce.Material({shader:ce.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new ce.Geometry({attributes:{node:new ce.Geometry.Attribute("node","float",2),color:new ce.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:ce.Mesh.LINES}),this._edgesMesh=new ce.Mesh({material:new ce.Material({shader:ce.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new fp({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new W_({zr:a.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(t,a,u){this.groupGL.add(this._pointsBuilder.rootNode),this._model=t,this._api=u,this._initLayout(t,a,u),this._pointsBuilder.update(t,a,u),this._forceLayoutInstance instanceof cf||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(t,u),this._control.off("update"),this._control.on("update",function(){u.dispatchAction({type:"graphGLRoam",seriesId:t.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(pn.firstNotNull(t.get("zoom"),1)),this._control.setOffset(t.get("offset")||[0,0]);var h=this._pointsBuilder.getPointsMesh();if(h.off("mousemove",this._mousemoveHandler),h.off("mouseout",this._mouseOutHandler,this),u.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,t.get("focusNodeAdjacency")){var d=t.get("focusNodeAdjacencyOn");"click"===d?u.getZr().on("click",this._clickHandler):"mouseover"===d&&(h.on("mousemove",this._mousemoveHandler,this),h.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(t){if(!this._layouting){var a=this._pointsBuilder.getPointsMesh().dataIndex;this._api.dispatchAction(a>=0?{type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:a}:{type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(t){if(!this._layouting){var a=this._pointsBuilder.getPointsMesh().dataIndex;a>=0?a!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:a}):this._mouseOutHandler(t),this._lastMouseOverDataIndex=a}},_mouseOutHandler:function(t){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(t,a){var u=this._forceEdgesMesh.geometry,h=a.getEdgeData(),d=0,g=this._forceLayoutInstance,y=2*h.count();u.attributes.node.init(y),u.attributes.color.init(y),h.each(function(S){var b=t[S];u.attributes.node.set(d,g.getNodeUV(b.node1)),u.attributes.node.set(d+1,g.getNodeUV(b.node2));var L=wi(h,b.dataIndex),W=ce.parseColor(L);W[3]*=pn.firstNotNull($i(h,b.dataIndex),1),u.attributes.color.set(d,W),u.attributes.color.set(d+1,W),d+=2}),u.dirty()},_updateMeshLinesGeometry:function(){var a=this._model.getEdgeData(),t=this._edgesMesh.geometry,u=(a=this._model.getEdgeData(),this._model.getData().getLayout("points"));t.resetOffset(),t.setVertexCount(a.count()*t.getLineVertexCount()),t.setTriangleCount(a.count()*t.getLineTriangleCount());var h=[],d=[],g=["lineStyle","width"];this._originalEdgeColors=new Float32Array(4*a.count()),this._edgeIndicesMap=new Float32Array(a.count()),a.each(function(y){var S=a.graph.getEdgeByIndex(y),b=2*S.node1.dataIndex,L=2*S.node2.dataIndex;h[0]=u[b],h[1]=u[b+1],d[0]=u[L],d[1]=u[L+1];var W=wi(a,S.dataIndex),ut=ce.parseColor(W);ut[3]*=pn.firstNotNull($i(a,S.dataIndex),1);var bt=a.getItemModel(S.dataIndex),Ct=pn.firstNotNull(bt.get(g),1)*this._api.getDevicePixelRatio();t.addLine(h,d,ut,Ct);for(var Et=0;Et<4;Et++)this._originalEdgeColors[4*S.dataIndex+Et]=ut[Et];this._edgeIndicesMap[S.dataIndex]=y},this),t.dirty()},_updateForceNodesGeometry:function(t){for(var a=this._pointsBuilder.getPointsMesh(),u=[],h=0;h<t.count();h++)this._forceLayoutInstance.getNodeUV(h,u),a.geometry.attributes.position.set(h,u);a.geometry.dirty("position")},_initLayout:function(t,a,u){var h=t.get("layout"),d=t.getGraph(),g=t.getBoxLayoutParams(),y=(0,ks.ME)(g,{width:u.getWidth(),height:u.getHeight()});"force"===h&&(h="forceAtlas2"),this.stopLayout(t,a,u,{beforeLayout:!0});var S=t.getData(),b=t.getData();if("forceAtlas2"===h){var L=t.getModel("forceAtlas2"),W=this._forceLayoutInstance,ut=[],bt=[],Ct=S.getDataExtent("value"),Et=b.getDataExtent("value"),Dt=pn.firstNotNull(L.get("edgeWeight"),1),zt=pn.firstNotNull(L.get("nodeWeight"),1);"number"==typeof Dt&&(Dt=[Dt,Dt]),"number"==typeof zt&&(zt=[zt,zt]);var $t=0,ae={},Jt=new Float32Array(2*S.count());if(d.eachNode(function(me){var Oe,We,ge=me.dataIndex,Ge=S.get("value",ge);if(S.hasItemOption){var ar=S.getItemModel(ge);Oe=ar.get("x"),We=ar.get("y")}null==Oe&&(Oe=y.x+Math.random()*y.width,We=y.y+Math.random()*y.height),Jt[2*$t]=Oe,Jt[2*$t+1]=We,ae[me.id]=$t++;var Ke=V.Rx.linearMap(Ge,Ct,zt);isNaN(Ke)&&(Ke=isNaN(zt[0])?1:zt[0]),ut.push({x:Oe,y:We,mass:Ke,size:S.getItemVisual(ge,"symbolSize")})}),S.setLayout("points",Jt),d.eachEdge(function(me){var ge=me.dataIndex,Ge=S.get("value",ge),Oe=V.Rx.linearMap(Ge,Et,Dt);isNaN(Oe)&&(Oe=isNaN(Dt[0])?1:Dt[0]),bt.push({node1:ae[me.node1.id],node2:ae[me.node2.id],weight:Oe,dataIndex:ge})}),!W){var qt=L.get("GPU");this._forceLayoutInstance&&(qt&&!(this._forceLayoutInstance instanceof cf)||!qt&&!(this._forceLayoutInstance instanceof Nv))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),W=this._forceLayoutInstance=qt?new cf:new Nv}W.initData(ut,bt),W.updateOption(L.option),this._updateForceEdgesGeometry(W.getEdges(),t),this._updatePositionTexture(),u.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else Jt=new Float32Array(2*S.count()),$t=0,d.eachNode(function(Ge){var We,ar;if(S.hasItemOption){var Ke=S.getItemModel(Ge.dataIndex);We=Ke.get("x"),ar=Ke.get("y")}Jt[$t++]=We,Jt[$t++]=ar}),S.setLayout("points",Jt),this._updateAfterLayout(t,a,u)},_updatePositionTexture:function(){var t=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(t),this._forceEdgesMesh.material.set("positionTex",t)},startLayout:function(t,a,g,h){if(!h||null==h.from||h.from===this.uid){var d=this.viewGL,y=(g=this._api,this._forceLayoutInstance),S=this._model.getData(),b=this._model.getModel("forceAtlas2");if(y&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),this._forceLayoutInstance)){this._updateForceNodesGeometry(t.getData()),this._pointsBuilder.hideLabels();var L=this,W=this._layoutId=Iv++,ut=b.getShallow("maxSteps"),bt=b.getShallow("steps"),Ct=0,Et=Math.max(2*bt,20),Dt=function(zt){if(zt===L._layoutId){if(y.isFinished(ut))return g.dispatchAction({type:"graphGLStopLayout",from:L.uid}),void g.dispatchAction({type:"graphGLFinishLayout",points:S.getLayout("points"),from:L.uid});y.update(d.layer.renderer,bt,function(){L._updatePositionTexture(),(Ct+=bt)>=Et&&(L._syncNodePosition(t),Ct=0),g.getZr().refresh(),(0,uu.Z)(function(){Dt(zt)})})}};(0,uu.Z)(function(){L._forceLayoutInstanceToDispose&&(L._forceLayoutInstanceToDispose.dispose(d.layer.renderer),L._forceLayoutInstanceToDispose=null),Dt(W)}),this._layouting=!0}}},stopLayout:function(t,a,u,h){h&&null!=h.from&&h.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&(!this.viewGL.layer||(h&&h.beforeLayout||(this._syncNodePosition(t),this._updateAfterLayout(t,a,u)),this._api.getZr().refresh(),this._layouting=!1)))},_syncNodePosition:function(t){var a=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);t.getData().setLayout("points",a),t.setNodePosition(a)},_updateAfterLayout:function(t,a,u){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(t,a,u),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(t,a,u,h){var d=this._model.getData();this._downplayAll();var S=[],b=d.graph.getNodeByIndex(h.dataIndex);S.push(b),b.edges.forEach(function(W){W.dataIndex<0||(W.node1!==b&&S.push(W.node1),W.node2!==b&&S.push(W.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),S.forEach(function(W){this._pointsBuilder.highlight(d,W.dataIndex)},this),this._pointsBuilder.updateLabels(S.map(function(W){return W.dataIndex}));var L=[];b.edges.forEach(function(W){W.dataIndex>=0&&(this._highlightEdge(W.dataIndex),L.push(W))},this),this._focusNodes=S,this._focusEdges=L},unfocusNodeAdjacency:function(t,a,u,h){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(t){var a=this._model.getEdgeData().getItemModel(t),u=ce.parseColor(a.get("emphasis.lineStyle.color")||a.get("lineStyle.color")),h=pn.firstNotNull(a.get("emphasis.lineStyle.opacity"),a.get("lineStyle.opacity"),1);u[3]*=h,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],u)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(t){this._pointsBuilder.downplay(this._model.getData(),t.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(t){this._downplayEdge(t.dataIndex)},this)},_downplayEdge:function(t){var a=this._getColor(t,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],a)},_setEdgeFade:function(){var t=[];return function(a,u){this._getColor(a,t),t[3]*=u,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[a],t)}}(),_getColor:function(t,a){for(var u=0;u<4;u++)a[u]=this._originalEdgeColors[4*t+u];return a},_fadeOutEdgesAll:function(t){this._model.getData().graph.eachEdge(function(u){this._setEdgeFade(u.dataIndex,t)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(t,a){this.viewGL.setViewport(0,0,a.getWidth(),a.getHeight(),a.getDevicePixelRatio());for(var u=this.viewGL.camera,d=t.getData().getLayout("points"),g=hf.create(1/0,1/0),y=hf.create(-1/0,-1/0),S=[],b=0;b<d.length;)S[0]=d[b++],S[1]=d[b++],hf.min(g,g,S),hf.max(y,y,S);var L=(y[1]+g[1])/2,W=(y[0]+g[0])/2;if(!(W>u.left&&W<u.right&&L<u.bottom&&L>u.top)){var ut=Math.max(y[0]-g[0],10),bt=ut/a.getWidth()*a.getHeight();bt*=1.4,g[0]-=.2*(ut*=1.4),u.left=g[0],u.top=L-bt/2,u.bottom=L+bt/2,u.right=ut+g[0],u.near=0,u.far=100}},dispose:function(){this._forceLayoutInstance&&this._forceLayoutInstance.dispose(this.viewGL.layer.renderer),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function ff(t){return t instanceof Array||(t=[t,t]),t}(0,V.D$)(function Y_(t){function a(){}t.registerChartView(X_),t.registerSeriesModel(H_),t.registerVisual(function(u){const h={};u.eachSeriesByType("graphGL",function(d){var g=d.getCategoriesData(),y=d.getData(),S={};g.each(function(b){var L=g.getName(b);S["ec-"+L]=b;var W=g.getItemModel(b),ut=W.getModel("itemStyle").getItemStyle();ut.fill||(ut.fill=d.getColorFromPalette(L,h)),g.setItemVisual(b,"style",ut);var bt=["symbol","symbolSize","symbolKeepAspect"];for(let Et=0;Et<bt.length;Et++){var Ct=W.getShallow(bt[Et],!0);null!=Ct&&g.setItemVisual(b,bt[Et],Ct)}}),g.count()&&y.each(function(b){let W=y.getItemModel(b).getShallow("category");if(null!=W){"string"==typeof W&&(W=S["ec-"+W]);var ut=g.getItemVisual(W,"style"),bt=y.ensureUniqueItemVisual(b,"style");V.D5.extend(bt,ut);var Ct=["symbol","symbolSize","symbolKeepAspect"];for(let Et=0;Et<Ct.length;Et++)y.setItemVisual(b,Ct[Et],g.getItemVisual(W,Ct[Et]))}})})}),t.registerVisual(function(u){u.eachSeriesByType("graphGL",function(h){var d=h.getGraph(),g=h.getEdgeData(),y=ff(h.get("edgeSymbol")),S=ff(h.get("edgeSymbolSize"));g.setVisual("drawType","stroke"),g.setVisual("fromSymbol",y&&y[0]),g.setVisual("toSymbol",y&&y[1]),g.setVisual("fromSymbolSize",S&&S[0]),g.setVisual("toSymbolSize",S&&S[1]),g.setVisual("style",h.getModel("lineStyle").getLineStyle()),g.each(function(b){var L=g.getItemModel(b),W=d.getEdgeByIndex(b),ut=ff(L.getShallow("symbol",!0)),bt=ff(L.getShallow("symbolSize",!0)),Ct=L.getModel("lineStyle").getLineStyle(),Et=g.ensureUniqueItemVisual(b,"style");switch(V.D5.extend(Et,Ct),Et.stroke){case"source":var Dt=W.node1.getVisual("style");Et.stroke=Dt&&Dt.fill;break;case"target":Dt=W.node2.getVisual("style"),Et.stroke=Dt&&Dt.fill}ut[0]&&W.setVisual("fromSymbol",ut[0]),ut[1]&&W.setVisual("toSymbol",ut[1]),bt[0]&&W.setVisual("fromSymbolSize",bt[0]),bt[1]&&W.setVisual("toSymbolSize",bt[1])})})}),t.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(u,h){h.eachComponent({mainType:"series",query:u},function(d){d.setView(u)})}),t.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},a),t.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},a),t.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},a),t.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},a)});const K_=V.wJ.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(t,a){var u=this.get("coordinateSystem"),h="geo"===u?["lng","lat"]:V.wL(u)||["x","y"];h.push("vx","vy");var d=V._y.createDimensions(this.getSource(),{coordDimensions:h,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),g=new V.aV(d,this);return g.initData(this.getSource()),g},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}});var j_=gn.extend(function(){return{dynamic:!0,attributes:{position:new gn.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(t){var u=4*t,h=2*t;this.vertexCount!==u&&this.attributes.position.init(u),this.triangleCount!==h&&(this.indices=0===h?null:this.vertexCount>65535?new Uint32Array(3*h):new Uint16Array(3*h))},addLine:function(t){var a=this._vertexOffset;this.attributes.position.set(a,[t[0],t[1],1]),this.attributes.position.set(a+1,[t[0],t[1],-1]),this.attributes.position.set(a+2,[t[0],t[1],2]),this.attributes.position.set(a+3,[t[0],t[1],-2]),this.setTriangleIndices(this._faceOffset++,[a,a+1,a+2]),this.setTriangleIndices(this._faceOffset++,[a+1,a+2,a+3]),this._vertexOffset+=4}});const J_=j_;rr.import("@export ecgl.vfParticle.particle.fragment\n\nuniform sampler2D particleTexture;\nuniform sampler2D spawnTexture;\nuniform sampler2D velocityTexture;\n\nuniform float deltaTime;\nuniform float elapsedTime;\n\nuniform float speedScaling : 1.0;\n\nuniform vec2 textureSize;\nuniform vec4 region : [0, 0, 1, 1];\nuniform float firstFrameTime;\n\nvarying vec2 v_Texcoord;\n\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, v_Texcoord);\n bool spawn = false;\n if (p.w <= 0.0) {\n p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));\n p.w -= firstFrameTime;\n spawn = true;\n }\n vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;\n v = (v - 0.5) * 2.0;\n p.z = length(v);\n p.xy += v * deltaTime / 10.0 * speedScaling;\n p.w -= deltaTime;\n\n if (spawn || p.xy != fract(p.xy)) {\n p.z = 0.0;\n }\n p.xy = fract(p.xy);\n\n gl_FragColor = p;\n}\n@end\n\n@export ecgl.vfParticle.renderPoints.vertex\n\n#define PI 3.1415926\n\nattribute vec2 texcoord : TEXCOORD_0;\n\nuniform sampler2D particleTexture;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nuniform float size : 1.0;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, texcoord);\n\n if (p.w > 0.0 && p.z > 1e-5) {\n gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);\n }\n else {\n gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);\n }\n\n v_Mag = p.z;\n v_Uv = p.xy;\n\n gl_PointSize = size;\n}\n\n@end\n\n@export ecgl.vfParticle.renderPoints.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform sampler2D gradientTexture;\nuniform sampler2D colorTexture;\nuniform sampler2D spriteTexture;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n gl_FragColor = color;\n#ifdef SPRITETEXTURE_ENABLED\n gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);\n if (color.a == 0.0) {\n discard;\n }\n#endif\n#ifdef GRADIENTTEXTURE_ENABLED\n gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));\n#endif\n#ifdef COLORTEXTURE_ENABLED\n gl_FragColor *= texture2D(colorTexture, v_Uv);\n#endif\n}\n\n@end\n\n@export ecgl.vfParticle.renderLines.vertex\n\n#define PI 3.1415926\n\nattribute vec3 position : POSITION;\n\nuniform sampler2D particleTexture;\nuniform sampler2D prevParticleTexture;\n\nuniform float size : 1.0;\nuniform vec4 vp: VIEWPORT;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\n@import clay.util.rand\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, position.xy);\n vec4 p2 = texture2D(prevParticleTexture, position.xy);\n\n p.xy = p.xy * 2.0 - 1.0;\n p2.xy = p2.xy * 2.0 - 1.0;\n\n if (p.w > 0.0 && p.z > 1e-5) {\n vec2 dir = normalize(p.xy - p2.xy);\n vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;\n if (abs(position.z) == 2.0) {\n gl_Position = vec4(p.xy + norm, 0.0, 1.0);\n v_Uv = p.xy;\n v_Mag = p.z;\n }\n else {\n gl_Position = vec4(p2.xy + norm, 0.0, 1.0);\n v_Mag = p2.z;\n v_Uv = p2.xy;\n }\n gl_Position = worldViewProjection * gl_Position;\n }\n else {\n gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);\n }\n}\n\n@end\n\n@export ecgl.vfParticle.renderLines.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform sampler2D gradientTexture;\nuniform sampler2D colorTexture;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n gl_FragColor = color;\n #ifdef GRADIENTTEXTURE_ENABLED\n gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));\n#endif\n#ifdef COLORTEXTURE_ENABLED\n gl_FragColor *= texture2D(colorTexture, v_Uv);\n#endif\n}\n\n@end\n");var vp=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new an({type:zr.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};vp.prototype={constructor:vp,init:function(){var t={type:zr.FLOAT,minFilter:zr.NEAREST,magFilter:zr.NEAREST,useMipmap:!1};this._spawnTexture=new an(t),this._particleTexture0=new an(t),this._particleTexture1=new an(t),this._frameBuffer=new ve({depthBuffer:!1}),this._particlePass=new Vn({fragment:rr.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new Vn({fragment:rr.source("clay.compositor.downsample")});var a=new Ua({renderOrder:10,material:new Cr({shader:new rr(rr.source("ecgl.vfParticle.renderPoints.vertex"),rr.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:Ua.POINTS,geometry:new gn({dynamic:!0,mainAttribute:"texcoord0"})}),u=new Ua({renderOrder:10,material:new Cr({shader:new rr(rr.source("ecgl.vfParticle.renderLines.vertex"),rr.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new J_,culling:!1}),h=new Ua({material:new Cr({shader:new rr(rr.source("ecgl.color.vertex"),rr.source("ecgl.color.fragment"))}),geometry:new fe});h.material.enableTexture("diffuseMap"),this._particlePointsMesh=a,this._particleLinesMesh=u,this._lastFrameFullQuadMesh=h,this._camera=new ns,this._thisFrameTexture=new an,this._lastFrameTexture=new an},setParticleDensity:function(t,a){for(var h=new Float32Array(t*a*4),d=0,g=this.particleLife,y=0;y<t;y++)for(var S=0;S<a;S++,d++){h[4*d]=Math.random(),h[4*d+1]=Math.random(),h[4*d+2]=Math.random();var b=(g[1]-g[0])*Math.random()+g[0];h[4*d+3]=b}"line"===this._particleType?this._setLineGeometry(t,a):this._setPointsGeometry(t,a),this._spawnTexture.width=t,this._spawnTexture.height=a,this._spawnTexture.pixels=h,this._particleTexture0.width=this._particleTexture1.width=t,this._particleTexture0.height=this._particleTexture1.height=a,this._particlePass.setUniform("textureSize",[t,a])},_setPointsGeometry:function(t,a){var h=this._particlePointsMesh.geometry,d=h.attributes;d.texcoord0.init(t*a);for(var g=0,y=0;y<t;y++)for(var S=0;S<a;S++,g++)d.texcoord0.value[2*g]=y/t,d.texcoord0.value[2*g+1]=S/a;h.dirty()},_setLineGeometry:function(t,a){var u=t*a,h=this._getParticleMesh().geometry;h.setLineCount(u),h.resetOffset();for(var d=0;d<t;d++)for(var g=0;g<a;g++)h.addLine([d/t,g/a]);h.dirty()},_getParticleMesh:function(){return"line"===this._particleType?this._particleLinesMesh:this._particlePointsMesh},update:function(t,a,u,h){var d=this._getParticleMesh(),g=this._frameBuffer,y=this._particlePass;h&&this._updateDownsampleTextures(t,a),d.material.set("size",this._particleSize*this._supersampling),d.material.set("color",this.particleColor),y.setUniform("speedScaling",this.particleSpeedScaling),g.attach(this._particleTexture1),y.setUniform("firstFrameTime",h?(this.particleLife[1]+this.particleLife[0])/2:0),y.setUniform("particleTexture",this._particleTexture0),y.setUniform("deltaTime",u),y.setUniform("elapsedTime",this._elapsedTime),y.render(t,g),d.material.set("particleTexture",this._particleTexture1),d.material.set("prevParticleTexture",this._particleTexture0),g.attach(this._thisFrameTexture),g.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT);var S=this._lastFrameFullQuadMesh;S.material.set("diffuseMap",this._lastFrameTexture),S.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),t.renderPass([S,d],this._camera),g.unbind(t),this._downsample(t),this._swapTexture(),this._elapsedTime+=u},_downsample:function(t){var a=this._downsampleTextures;if(0!==a.length)for(var u=0,h=this._thisFrameTexture,d=a[u];d;)this._frameBuffer.attach(d),this._downsamplePass.setUniform("texture",h),this._downsamplePass.setUniform("textureSize",[h.width,h.height]),this._downsamplePass.render(t,this._frameBuffer),h=d,d=a[++u]},getSurfaceTexture:function(){var t=this._downsampleTextures;return t.length>0?t[t.length-1]:this._lastFrameTexture},setRegion:function(t){this._particlePass.setUniform("region",t)},resize:function(t,a){this._lastFrameTexture.width=t*this._supersampling,this._lastFrameTexture.height=a*this._supersampling,this._thisFrameTexture.width=t*this._supersampling,this._thisFrameTexture.height=a*this._supersampling,this._width=t,this._height=a},setParticleSize:function(t){var a=this._getParticleMesh();if(t<=2)return a.material.disableTexture("spriteTexture"),void(a.material.transparent=!1);this._spriteTexture||(this._spriteTexture=new an),(!this._spriteTexture.image||this._spriteTexture.image.width!==t)&&(this._spriteTexture.image=function q_(t){var a=document.createElement("canvas");a.width=a.height=t;var u=a.getContext("2d");return u.fillStyle="#fff",u.arc(t/2,t/2,t/2,0,2*Math.PI),u.fill(),a}(t),this._spriteTexture.dirty()),a.material.transparent=!0,a.material.enableTexture("spriteTexture"),a.material.set("spriteTexture",this._spriteTexture),this._particleSize=t},setGradientTexture:function(t){var a=this._getParticleMesh().material;a[t?"enableTexture":"disableTexture"]("gradientTexture"),a.setUniform("gradientTexture",t)},setColorTextureImage:function(t,a){this._getParticleMesh().material.setTextureImage("colorTexture",t,a,{flipY:!0})},setParticleType:function(t){this._particleType=t},clearFrame:function(t){var a=this._frameBuffer;a.attach(this._lastFrameTexture),a.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),a.unbind(t)},setSupersampling:function(t){this._supersampling=t,this.resize(this._width,this._height)},_updateDownsampleTextures:function(t,a){for(var u=this._downsampleTextures,h=Math.max(Math.floor(Math.log(this._supersampling/a.getDevicePixelRatio())/Math.log(2)),0),d=2,g=this._width*this._supersampling,y=this._height*this._supersampling,S=0;S<h;S++)u[S]=u[S]||new an,u[S].width=g/d,u[S].height=y/d,d*=2;for(;S<u.length;S++)u[S].dispose(t);u.length=h},_swapTexture:function(){var t=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=t,t=this._thisFrameTexture,this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=t},dispose:function(t){t.disposeFrameBuffer(this._frameBuffer),t.disposeTexture(this.vectorFieldTexture),t.disposeTexture(this._spawnTexture),t.disposeTexture(this._particleTexture0),t.disposeTexture(this._particleTexture1),t.disposeTexture(this._thisFrameTexture),t.disposeTexture(this._lastFrameTexture),t.disposeGeometry(this._particleLinesMesh.geometry),t.disposeGeometry(this._particlePointsMesh.geometry),t.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&t.disposeTexture(this._spriteTexture),this._particlePass.dispose(t),this._downsamplePass.dispose(t),this._downsampleTextures.forEach(function(a){a.dispose(t)})}};const t0=vp,e0=V.TA.extend({type:"flowGL",__ecgl__:!0,init:function(t,a){this.viewGL=new Us("orthographic"),this.groupGL=new ce.Node,this.viewGL.add(this.groupGL),this._particleSurface=new t0;var u=new ce.Mesh({geometry:new ce.PlaneGeometry,material:new ce.Material({shader:new ce.Shader({vertex:ce.Shader.source("ecgl.color.vertex"),fragment:ce.Shader.source("ecgl.color.fragment")}),transparent:!0})});u.material.enableTexture("diffuseMap"),this.groupGL.add(u),this._planeMesh=u},render:function(t,a,u){var h=this._particleSurface;h.setParticleType(t.get("particleType")),h.setSupersampling(t.get("supersampling")),this._updateData(t,u),this._updateCamera(u.getWidth(),u.getHeight(),u.getDevicePixelRatio());var d=pn.firstNotNull(t.get("particleDensity"),128);h.setParticleDensity(d,d);var g=this._planeMesh,y=+new Date,S=this,b=!0;g.__percent=0,g.stopAnimation(),g.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var ut=+new Date,bt=Math.min(ut-y,20);y+=bt,S._renderer&&(h.update(S._renderer,u,bt/1e3,b),g.material.set("diffuseMap",h.getSurfaceTexture())),b=!1}).start();var L=t.getModel("itemStyle"),W=ce.parseColor(L.get("color"));W[3]*=pn.firstNotNull(L.get("opacity"),1),g.material.set("color",W),h.setColorTextureImage(t.get("colorTexture"),u),h.setParticleSize(t.get("particleSize")),h.particleSpeedScaling=t.get("particleSpeed"),h.motionBlurFactor=1-Math.pow(.1,t.get("particleTrail"))},updateTransform:function(t,a,u){this._updateData(t,u)},afterRender:function(t,a,u,h){this._renderer=h.renderer},_updateData:function(t,a){var u=t.coordinateSystem,h=u.dimensions.map(function(ae){return t.coordDimToDataDim(ae)[0]}),d=t.getData(),g=d.getDataExtent(h[0]),y=d.getDataExtent(h[1]),S=t.get("gridWidth"),b=t.get("gridHeight");null!=S&&"auto"!==S||(S=Math.round(Math.sqrt((g[1]-g[0])/(y[1]-y[0])*d.count()))),(null==b||"auto"===b)&&(b=Math.ceil(d.count()/S));var W=this._particleSurface.vectorFieldTexture,ut=W.pixels;if(ut&&ut.length===b*S*4)for(var bt=0;bt<ut.length;bt++)ut[bt]=0;else ut=W.pixels=new Float32Array(S*b*4);var Ct=0,Et=1/0,Dt=new Float32Array(2*d.count()),zt=0,$t=[[1/0,1/0],[-1/0,-1/0]];d.each([h[0],h[1],"vx","vy"],function(ae,Jt,qt,me){var ge=u.dataToPoint([ae,Jt]);Dt[zt++]=ge[0],Dt[zt++]=ge[1],$t[0][0]=Math.min(ge[0],$t[0][0]),$t[0][1]=Math.min(ge[1],$t[0][1]),$t[1][0]=Math.max(ge[0],$t[1][0]),$t[1][1]=Math.max(ge[1],$t[1][1]);var Ge=Math.sqrt(qt*qt+me*me);Ct=Math.max(Ct,Ge),Et=Math.min(Et,Ge)}),d.each(["vx","vy"],function(ae,Jt,qt){var me=Math.round((Dt[2*qt]-$t[0][0])/($t[1][0]-$t[0][0])*(S-1)),Ge=4*((b-1-Math.round((Dt[2*qt+1]-$t[0][1])/($t[1][1]-$t[0][1])*(b-1)))*S+me);ut[Ge]=ae/Ct*.5+.5,ut[Ge+1]=Jt/Ct*.5+.5,ut[Ge+3]=1}),W.width=S,W.height=b,"bmap"===t.get("coordinateSystem")&&this._fillEmptyPixels(W),W.dirty(),this._updatePlanePosition($t[0],$t[1],t,a),this._updateGradientTexture(d.getVisual("visualMeta"),[Et,Ct])},_fillEmptyPixels:function(t){var a=t.pixels,u=t.width,h=t.height;function d(Dt,zt,$t){Dt=Math.max(Math.min(Dt,u-1),0);var ae=4*((zt=Math.max(Math.min(zt,h-1),0))*(u-1)+Dt);return 0!==a[ae+3]&&($t[0]=a[ae],$t[1]=a[ae+1],!0)}function g(Dt,zt,$t){$t[0]=Dt[0]+zt[0],$t[1]=Dt[1]+zt[1]}for(var y=[],S=[],b=[],L=[],W=[],ut=0,bt=0;bt<h;bt++)for(var Ct=0;Ct<u;Ct++){var Et=4*(bt*(u-1)+Ct);0===a[Et+3]&&(ut=y[0]=y[1]=0,d(Ct-1,bt,S)&&(ut++,g(S,y,y)),d(Ct+1,bt,b)&&(ut++,g(b,y,y)),d(Ct,bt-1,L)&&(ut++,g(L,y,y)),d(Ct,bt+1,W)&&(ut++,g(W,y,y)),y[0]/=ut,y[1]/=ut,a[Et]=y[0],a[Et+1]=y[1]),a[Et+3]=1}},_updateGradientTexture:function(t,a){if(t&&t.length){this._gradientTexture=this._gradientTexture||new ce.Texture2D({image:document.createElement("canvas")});var u=this._gradientTexture,h=u.image;h.width=200,h.height=1;var d=h.getContext("2d"),g=d.createLinearGradient(0,.5,h.width,.5);t[0].stops.forEach(function(y){var S;a[1]===a[0]?S=0:(S=y.value/a[1],S=Math.min(Math.max(S,0),1)),g.addColorStop(S,y.color)}),d.fillStyle=g,d.fillRect(0,0,h.width,h.height),u.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)}else this._particleSurface.setGradientTexture(null)},_updatePlanePosition:function(t,a,u,h){var d=this._limitInViewportAndFullFill(t,a,u,h);t=d.leftTop,a=d.rightBottom,this._particleSurface.setRegion(d.region),this._planeMesh.position.set((t[0]+a[0])/2,h.getHeight()-(t[1]+a[1])/2,0);var g=a[0]-t[0],y=a[1]-t[1];this._planeMesh.scale.set(g/2,y/2,1),this._particleSurface.resize(Math.max(Math.min(g,2048),1),Math.max(Math.min(y,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(t,a,u,h){var d=[Math.max(t[0],0),Math.max(t[1],0)],g=[Math.min(a[0],h.getWidth()),Math.min(a[1],h.getHeight())];if("bmap"===u.get("coordinateSystem")){var y=u.getData().getDataExtent(u.coordDimToDataDim("lng")[0]);Math.floor(y[1]-y[0])>=359&&(d[0]>0&&(d[0]=0),g[0]<h.getWidth()&&(g[0]=h.getWidth()))}var b=a[0]-t[0],L=a[1]-t[1],ut=g[1]-d[1];return{leftTop:d,rightBottom:g,region:[(d[0]-t[0])/b,1-ut/L-(d[1]-t[1])/L,(g[0]-d[0])/b,ut/L]}},_updateCamera:function(t,a,u){this.viewGL.setViewport(0,0,t,a,u);var h=this.viewGL.camera;h.left=h.bottom=0,h.top=a,h.right=t,h.near=0,h.far=100,h.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});(0,V.D$)(function r0(t){t.registerChartView(e0),t.registerSeriesModel(K_)});var Rv=D(6615),df=V.wJ.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(t){var a=this._processFlatCoordsArray(t.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(t.data=new Float32Array(a.count)),df.superApply(this,"init",arguments)},mergeOption:function(t){var a=this._processFlatCoordsArray(t.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(t.data=new Float32Array(a.count)),df.superApply(this,"mergeOption",arguments)},appendData:function(t){var a=this._processFlatCoordsArray(t.data);a.flatCoords&&(this._flatCoords?(this._flatCoords=(0,Rv.concatArray)(this._flatCoords,a.flatCoords),this._flatCoordsOffset=(0,Rv.concatArray)(this._flatCoordsOffset,a.flatCoordsOffset)):(this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset),t.data=new Float32Array(a.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var a=this.getData().getItemModel(t);return a.option instanceof Array?a.option:a.getShallow("coords")},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,a){if(this._flatCoordsOffset){for(var u=this._flatCoordsOffset[2*t],h=this._flatCoordsOffset[2*t+1],d=0;d<h;d++)a[d]=a[d]||[],a[d][0]=this._flatCoords[u+2*d],a[d][1]=this._flatCoords[u+2*d+1];return h}var g=this._getCoordsFromItemModel(t);for(d=0;d<g.length;d++)a[d]=a[d]||[],a[d][0]=g[d][0],a[d][1]=g[d][1];return g.length},_processFlatCoordsArray:function(t){var a=0;if(this._flatCoords&&(a=this._flatCoords.length),"number"==typeof t[0]){for(var u=t.length,h=new Uint32Array(u),d=new Float64Array(u),g=0,y=0,S=0,b=0;b<u;){S++;var L=t[b++];h[y++]=g+a,h[y++]=L;for(var W=0;W<L;W++){var ut=t[b++],bt=t[b++];d[g++]=ut,d[g++]=bt}}return{flatCoordsOffset:new Uint32Array(h.buffer,0,y),flatCoords:d,count:S}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,a){var u=new V.aV(["value"],this);return u.hasItemOption=!1,u.initData(t.data,[],function(h,d,g,y){if(h instanceof Array)return NaN;u.hasItemOption=!0;var S=h.value;return null!=S?S instanceof Array?S[y]:S:void 0}),u},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,radiowavesuration:1,enable:!0}}}});const n0=df,i0=V.TA.extend({type:"linesGL",__ecgl__:!0,init:function(t,a){this.groupGL=new ce.Node,this.viewGL=new Us("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new lp(this.viewGL),this._nativeLinesShader=ce.createShader("ecgl.lines3D"),this._meshLinesShader=ce.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(t,a,u){this.groupGL.removeAll(),this._glViewHelper.reset(t,u);var h=this._linesMeshes[0];h||(h=this._linesMeshes[0]=this._createLinesMesh(t)),this._linesMeshes.length=1,this.groupGL.add(h),this._updateLinesMesh(t,h,0,t.getData().count()),this.viewGL.setPostEffect(t.getModel("postEffect"),u)},incrementalPrepareRender:function(t,a,u){this.groupGL.removeAll(),this._glViewHelper.reset(t,u),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),u)},incrementalRender:function(t,a,u,h){var d=this._linesMeshes[this._currentStep];d||(d=this._createLinesMesh(a),this._linesMeshes[this._currentStep]=d),this._updateLinesMesh(a,d,t.start,t.end),this.groupGL.add(d),h.getZr().refresh(),this._currentStep++},updateTransform:function(t,a,u){t.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(t,u)},_createLinesMesh:function(t){return new ce.Mesh({$ignorePicking:!0,material:new ce.Material({shader:ce.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new fp({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:ce.Mesh.LINES,culling:!1})},_updateLinesMesh:function(t,a,u,h){var d=t.getData();a.material.blend="lighter"===t.get("blendMode")?ce.additiveBlend:null;var g=t.get("lineStyle.curveness")||0,y=t.get("polyline"),S=a.geometry,b=t.coordinateSystem,L=pn.firstNotNull(t.get("lineStyle.width"),1);L>1?(a.material.shader!==this._meshLinesShader&&a.material.attachShader(this._meshLinesShader),a.mode=ce.Mesh.TRIANGLES):(a.material.shader!==this._nativeLinesShader&&a.material.attachShader(this._nativeLinesShader),a.mode=ce.Mesh.LINES),u=u||0,h=h||d.count(),S.resetOffset();var W=0,ut=0,bt=[],Ct=[],Et=[],Dt=[],zt=[];function Jt(){Ct[0]=.7*bt[0]+.3*Dt[0]-(bt[1]-Dt[1])*g,Ct[1]=.7*bt[1]+.3*Dt[1]-(Dt[0]-bt[0])*g,Et[0]=.3*bt[0]+.7*Dt[0]-(bt[1]-Dt[1])*g,Et[1]=.3*bt[1]+.7*Dt[1]-(Dt[0]-bt[0])*g}if(y||0!==g)for(var qt=u;qt<h;qt++)if(y){var me=t.getLineCoordsCount(qt);W+=S.getPolylineVertexCount(me),ut+=S.getPolylineTriangleCount(me)}else t.getLineCoords(qt,zt),this._glViewHelper.dataToPoint(b,zt[0],bt),this._glViewHelper.dataToPoint(b,zt[1],Dt),Jt(),W+=S.getCubicCurveVertexCount(bt,Ct,Et,Dt),ut+=S.getCubicCurveTriangleCount(bt,Ct,Et,Dt);else{var ge=h-u;W+=ge*S.getLineVertexCount(),ut+=ge*S.getLineVertexCount()}S.setVertexCount(W),S.setTriangleCount(ut);var Ge=u,Oe=[];for(qt=u;qt<h;qt++){ce.parseColor(wi(d,Ge),Oe);var We=pn.firstNotNull($i(d,Ge),1);Oe[3]*=We,me=t.getLineCoords(qt,zt);for(var ar=0;ar<me;ar++)this._glViewHelper.dataToPoint(b,zt[ar],zt[ar]);y?S.addPolyline(zt,Oe,L,0,me):0!==g?(bt=zt[0],Dt=zt[1],Jt(),S.addCubicCurve(bt,Ct,Et,Dt,Oe,L)):S.addPolyline(zt,Oe,L,0,2),Ge++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});(0,V.D$)(function a0(t){t.registerChartView(i0),t.registerSeriesModel(n0)});var Bv=D(9292),o0=D(5568),s0=D(3734),gp=D(6331),l0=D(7787),Gv=D(3091),Zv=D(6895),u0=D(4984);function c0(t,a){1&t&&(B.TgZ(0,"div",7)(1,"div",8)(2,"span"),B.SDv(3,9),B.qZA()(),B.TgZ(4,"small",10),B.SDv(5,11),B.qZA()())}function Qs(t,a){1&t&&B._UZ(0,"div",12)}function pf(t,a){if(1&t){const u=B.EpF();B.TgZ(0,"div"),B.YNc(1,c0,6,0,"div",4),B.TgZ(2,"div",5),B.NdJ("chartInit",function(d){B.CHM(u);const g=B.oxw(2);return B.KtG(g.onChartInit(d))})("chartFinished",function(d){B.CHM(u);const g=B.oxw(2);return B.KtG(g.onChartFinished(d))}),B.qZA(),B.YNc(3,Qs,1,0,"div",6),B.qZA()}if(2&t){const u=B.oxw(2);B.Tol("full-container "+u.style+(u.fitContainer?" fit-container":"")),B.xp6(1),B.Q6J("ngIf","graph"===u.style),B.xp6(1),B.Tol(u.style),B.Q6J("initOpts",u.chartInitOptions)("options",u.chartOptions),B.xp6(1),B.Q6J("ngIf",!u.chartOptions&&"nodepage"===u.style)}}function qs(t,a){if(1&t&&(B.TgZ(0,"div",13),B._UZ(1,"div",14),B.qZA()),2&t){const u=B.oxw(2);B.Tol(u.style)}}function h0(t,a){if(1&t&&(B.ynx(0),B.YNc(1,pf,4,8,"div",2),B.YNc(2,qs,2,2,"div",3),B.BQk()),2&t){const u=B.oxw();B.xp6(1),B.Q6J("ngIf",u.chartOptions),B.xp6(1),B.Q6J("ngIf",u.isLoading&&!u.disableSpinner)}}let f0=(()=>{class t{constructor(u,h,d,g,y,S,b){this.seoService=u,this.apiService=h,this.stateService=d,this.assetsService=g,this.router=y,this.zone=S,this.activatedRoute=b,this.style="graph",this.channel=[],this.fitContainer=!1,this.hasLocation=!0,this.placeholder=!1,this.disableSpinner=!1,this.readyEvent=new B.vpe,this.channelWidth=.6,this.channelOpacity=.1,this.channelColor="#466d9d",this.channelCurve=0,this.nodeSize=4,this.isLoading=!1,this.chartInstance=void 0,this.chartOptions={},this.chartInitOptions={renderer:"canvas"}}ngOnInit(){this.center="widget"===this.style?[0,40]:[0,5],this.zoom=1.3,"widget"===this.style&&!(0,Bv.tq)()&&(this.zoom=3.5),"widget"===this.style&&(0,Bv.tq)()&&(this.zoom=1.4,this.center=[0,10]),"graph"===this.style&&this.seoService.setTitle("Lightning \u10DC\u10DD\u10D3\u10D4\u10D1\u10D8\u10E1 \u10E9\u10D0\u10DC\u10D4\u10DA\u10D4\u10D1\u10D8 \u10DB\u10E1\u10DD\u10E4\u10DA\u10D8\u10DD \u10E0\u10E3\u10E5\u10D0\u10D6\u10D4"),["nodepage","channelpage"].includes(this.style)&&(this.nodeSize=8),this.channelsObservable=this.activatedRoute.paramMap.pipe((0,St.g)(100),(0,n.w)(u=>(this.isLoading=!0,("channelpage"===this.style&&0===this.channel.length||!this.hasLocation)&&(this.isLoading=!1),(0,_t.$)(this.assetsService.getWorldMapJson$,"channelpage"!==this.style?this.apiService.getChannelsGeo$(u.get("public_key")??void 0,this.style):[""],[u.get("public_key")??void 0]).pipe((0,mt.b)(h=>{(0,yt.registerMap)("world",h[0]);const d=[],g=[],y={};let S,b=h[1];"channelpage"===this.style&&(b=0===this.channel.length?[]:[this.channel]);for(const L of b){"nodepage"===this.style&&!S&&(h[2]===L[0]?S=[L[2],L[3]]:h[2]===L[4]&&(S=[L[6],L[7]]));const W=0,ut=1;let bt=2,Ct=3;const Et=4,Dt=5;let zt=6,$t=7,ae=L[W],Jt=L[Et];"widget"===this.style&&(bt=0,Ct=1,zt=2,$t=3,ae=L[bt].toString()+L[Ct].toString(),Jt=L[zt].toString()+L[$t].toString());let qt=2*Math.random()*Math.PI,me=.01*Math.random();y[ae]||(g.push([L[bt]+me*Math.cos(qt),L[Ct]+me*Math.sin(qt),1,L[W],L[ut]]),y[ae]=g[g.length-1]),qt=2*Math.random()*Math.PI,me=.01*Math.random(),y[Jt]||(g.push([L[zt]+me*Math.cos(qt),L[$t]+me*Math.sin(qt),1,L[Et],L[Dt]]),y[Jt]=g[g.length-1]);const ge=[];ge.push(y[ae].slice(0,2)),ge.push(y[Jt].slice(0,2)),d.push(ge)}if("nodepage"===this.style&&S&&(this.center=[S[0],S[1]],this.zoom=5,this.channelWidth=1,this.channelOpacity=1),"channelpage"===this.style&&this.channel.length>0){this.channelWidth=2,this.channelOpacity=1,this.channelColor="#bafcff",this.channelCurve=.1,this.center=[(this.channel[2]+this.channel[6])/2,(this.channel[3]+this.channel[7])/2];const L=Math.sqrt(Math.pow(this.channel[7]-this.channel[3],2)+Math.pow(this.channel[6]-this.channel[2],2));this.zoom=-.05*L+8}this.prepareChartOptions(g,d)})))))}prepareChartOptions(u,h){let d;0===h.length&&(this.placeholder?(d={textStyle:{color:"white",fontSize:18},text:"\u10D2\u10D4\u10DD\u10DA\u10DD\u10D9\u10D0\u10EA\u10D8\u10D8\u10E1 \u10DB\u10DD\u10DC\u10D0\u10EA\u10D4\u10DB\u10D4\u10D1\u10D8 \u10DB\u10D8\u10E3\u10EC\u10D5\u10D3\u10DD\u10DB\u10D4\u10DA\u10D8\u10D0",left:"center",top:"center"},this.zoom=1.5,this.center=[0,20]):(this.isLoading=!1,d={textStyle:{color:"white",fontSize:18},text:"\u10DB\u10DD\u10DC\u10D0\u10EA\u10D4\u10DB\u10D4\u10D1\u10D8\u10E1 \u10E9\u10D5\u10D4\u10DC\u10D4\u10D1\u10D0 \u10EF\u10D4\u10E0 \u10D0\u10E0 \u10D0\u10E0\u10D8\u10E1 \u10E8\u10D4\u10E1\u10D0\u10EB\u10DA\u10D4\u10D1\u10D4\u10DA\u10D8. \u1C9B\u10DD\u10D2\u10D5\u10D8\u10D0\u10DC\u10D4\u10D1\u10D8\u10D7 \u10E1\u10EA\u10D0\u10D3\u10D4\u10D7.",left:"center",top:"center"},this.zoom=1.5,this.center=[0,20])),this.chartOptions={silent:"widget"===this.style,title:d??void 0,tooltip:{},geo:{top:75,animation:!1,silent:!0,center:this.center,zoom:this.zoom,tooltip:{show:!1},map:"world",roam:"widget"!==this.style,itemStyle:{borderColor:"black",color:"#272b3f"},scaleLimit:{min:1.3,max:1e5},emphasis:{disabled:!0}},series:[{large:!0,type:"scatter",data:u,coordinateSystem:"geo",geoIndex:0,symbolSize:this.nodeSize,tooltip:{show:!0,backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:g=>{const y=g.data;return`<b style="color: white">${y[4].length>0?y[4]:y[3].slice(0,20)}</b>`}},itemStyle:{color:"white",opacity:1,borderColor:"black",borderWidth:0},blendMode:"lighter",zlevel:2},{large:!1,progressive:"widget"===this.style?500:200,silent:!0,type:"lines",coordinateSystem:"geo",data:h,lineStyle:{opacity:this.channelOpacity,width:this.channelWidth,curveness:this.channelCurve,color:this.channelColor},blendMode:"lighter",tooltip:{show:!1},zlevel:1}]}}onChartInit(u){void 0===this.chartInstance&&(this.chartInstance=u,this.chartInstance.on("finished",()=>{this.isLoading=!1}),"widget"===this.style&&this.chartInstance.getZr().on("click",h=>{this.zone.run(()=>{const d=new gt.w(this.stateService).transform("/graphs/lightning/nodes-channels-map");this.router.navigate([d])})}),this.chartInstance.on("click",h=>{h.data&&this.zone.run(()=>{const d=new gt.w(this.stateService).transform(`/lightning/node/${h.data[3]}`);this.router.navigate([d])})}),this.chartInstance.on("georoam",h=>{if(!h.zoom||"nodepage"===this.style)return;const d=.005,g={series:this.chartOptions.series};let y=0;this.chartInstance.getOption().geo[0].zoom>5e3&&(y=2),g.series[0].itemStyle.borderWidth=y,g.series[0].symbolSize+=h.zoom>1?15*d:15*-d,g.series[0].symbolSize=Math.max(4,Math.min(7,g.series[0].symbolSize)),g.series[1].lineStyle.opacity+=h.zoom>1?d:-d,g.series[1].lineStyle.width+=h.zoom>1?d:-d,g.series[1].lineStyle.opacity=Math.max(.05,Math.min(.5,g.series[1].lineStyle.opacity)),g.series[1].lineStyle.width=Math.max(.5,Math.min(1,g.series[1].lineStyle.width)),this.chartInstance.setOption(g)}))}onChartFinished(u){this.readyEvent.emit()}}return t.\u0275fac=function(u){return new(u||t)(B.Y36(o0.v),B.Y36(s0.s),B.Y36(gp.b),B.Y36(l0.z),B.Y36(Gv.F0),B.Y36(B.R0b),B.Y36(Gv.gz))},t.\u0275cmp=B.Xpm({type:t,selectors:[["app-nodes-channels-map"]],inputs:{style:"style",publicKey:"publicKey",channel:"channel",fitContainer:"fitContainer",hasLocation:"hasLocation",placeholder:"placeholder",disableSpinner:"disableSpinner"},outputs:{readyEvent:"readyEvent"},decls:3,vars:5,consts:function(){let a,u;return a="Lightning \u10DC\u10DD\u10D3\u10D4\u10D1\u10D8\u10E1 \u10E9\u10D0\u10DC\u10D4\u10DA\u10D4\u10D1\u10D8 \u10DB\u10E1\u10DD\u10E4\u10DA\u10D8\u10DD \u10E0\u10E3\u10E5\u10D0\u10D6\u10D4",u="(Tor nodes excluded)",[[1,"map-wrapper"],[4,"ngIf"],[3,"class",4,"ngIf"],["class","text-center loading-spinner",3,"class",4,"ngIf"],["class","card-header",4,"ngIf"],["echarts","",1,"chart",3,"initOpts","options","chartInit","chartFinished"],["style","padding-top: 30px",4,"ngIf"],[1,"card-header"],[1,"d-flex","d-md-block","align-items-baseline",2,"margin-bottom","-5px"],a,[2,"color","#ffffff66"],u,[2,"padding-top","30px"],[1,"text-center","loading-spinner"],[1,"spinner-border","text-light"]]},template:function(u,h){1&u&&(B.TgZ(0,"div",0),B.YNc(1,h0,3,2,"ng-container",1),B.ALo(2,"async"),B.qZA()),2&u&&(B.Tol(h.style),B.xp6(1),B.Q6J("ngIf",B.lcZ(2,3,h.channelsObservable)))},dependencies:[Zv.O5,u0._w,Zv.Ov],styles:[".map-wrapper[_ngcontent-%COMP%]{height:100%}.map-wrapper.widget[_ngcontent-%COMP%]{height:250px}.card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:600px;height:calc(100% - 150px)}.full-container.nodepage[_ngcontent-%COMP%]{min-height:400px;margin-top:25px;margin-bottom:25px}.full-container.channelpage[_ngcontent-%COMP%]{min-height:400px;margin-top:25px;margin-bottom:25px;min-height:100%}.full-container.widget[_ngcontent-%COMP%]{height:250px;min-height:250px}.full-container.fit-container[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;min-height:100px}.full-container.fit-container[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]{padding:0;min-height:100px}.chart[_ngcontent-%COMP%]{min-height:500px;width:100%;height:100%}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 629px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}@media (max-width: 567px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}.chart.graph[_ngcontent-%COMP%]{min-height:600px}.chart.nodepage[_ngcontent-%COMP%]{min-height:100%;width:100%;height:100%;padding-bottom:0}.chart.channelpage[_ngcontent-%COMP%]{min-height:400px}.widget[_ngcontent-%COMP%]{width:100%;margin-left:auto;margin-right:auto;height:250px;-webkit-mask:linear-gradient(0deg,rgba(17,19,31,0) 5%,#11131f 25%)}.widget[_ngcontent-%COMP%] > .chart[_ngcontent-%COMP%]{min-height:250px;-webkit-mask:linear-gradient(180deg,rgba(17,19,31,0) 0%,#11131f 20%)}@media (max-width: 767.98px){.widget[_ngcontent-%COMP%] > .chart[_ngcontent-%COMP%]{padding-bottom:0}}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}@media (max-width: 767.98px){.loading-spinner[_ngcontent-%COMP%]{top:550px}}.loading-spinner.widget[_ngcontent-%COMP%]{position:absolute;top:200px;z-index:100;width:100%;left:0}@media (max-width: 767.98px){.loading-spinner.widget[_ngcontent-%COMP%]{top:250px}}.loading-spinner.nodepage[_ngcontent-%COMP%]{position:absolute;top:200px;z-index:100;width:100%;left:0}.loading-spinner.channelpage[_ngcontent-%COMP%]{position:absolute;top:400px;z-index:100;width:100%;left:0}@media (max-width: 767.98px){.loading-spinner.channelpage[_ngcontent-%COMP%]{top:450px}}.indexing-message[_ngcontent-%COMP%]{position:absolute;width:100%;text-align:center;margin-top:100px}"],changeDetection:0}),t})()},9290:(Ze,te,D)=>{D.d(te,{n:()=>z});var B=D(4650),St=D(1135),n=D(3900),_t=D(9841),mt=D(8505),gt=D(1420),yt=D(1044),V=D(1957),k=D(9292),X=D(5568),q=D(3734),N=D(6331),et=D(7787),$=D(3091),st=D(3951),K=D(6895),_=D(4984);function j(tt,J){1&tt&&(B.TgZ(0,"div",3)(1,"div",4)(2,"span"),B.SDv(3,5),B.qZA()(),B.TgZ(4,"small",6),B.SDv(5,7),B.qZA()())}function it(tt,J){if(1&tt){const Y=B.EpF();B.TgZ(0,"div",8),B.NdJ("chartInit",function(U){B.CHM(Y);const w=B.oxw();return B.KtG(w.onChartInit(U))})("chartFinished",function(U){B.CHM(Y);const w=B.oxw();return B.KtG(w.onChartFinished(U))}),B.qZA()}if(2&tt){const Y=B.oxw();B.Tol(Y.widget?"widget":""),B.Q6J("initOpts",Y.chartInitOptions)("options",Y.chartOptions)}}let z=(()=>{class tt{constructor(Y,nt,U,w,C,I,P,M){this.locale=Y,this.seoService=nt,this.apiService=U,this.stateService=w,this.assetsService=C,this.router=I,this.zone=P,this.amountShortenerPipe=M,this.widget=!1,this.nodes=void 0,this.type="none",this.fitContainer=!1,this.readyEvent=new B.vpe,this.chartInstance=void 0,this.chartOptions={},this.chartInitOptions={renderer:"svg"}}ngOnInit(){this.widget||this.seoService.setTitle("Lightning \u10D8\u10E1 \u10DC\u10DD\u10D3\u10D4\u10D1\u10D8 \u10DB\u10E1\u10DD\u10E4\u10DA\u10D8\u10DD\u10E1 \u10E0\u10E3\u10E5\u10D0\u10D6\u10D4"),this.inputNodes$||(this.inputNodes$=new St.X(this.nodes)),this.nodes$=this.inputNodes$.pipe((0,n.w)(Y=>Y?[Y]:this.apiService.getWorldNodes$())),this.observable$=(0,_t.a)(this.assetsService.getWorldMapJson$,this.nodes$).pipe((0,mt.b)(Y=>{(0,gt.registerMap)("world",Y[0]);let nt=Y[1].maxLiquidity,U=Y[1].nodes,w=[0,5];"country"===this.type?w=[0,0]:"isp"===this.type&&(w=[0,10]);let C=1.3;if(!U){U=[];for(const P of Y[1])"country"===this.type&&(w[0]+=P.longitude,w[1]+=P.latitude),U.push([P.longitude,P.latitude,P.public_key,P.alias,P.capacity,P.channels,P.country,P.iso_code]),nt=Math.max(nt??0,P.capacity);"country"===this.type&&(w[0]/=Y[1].length,w[1]/=Y[1].length,C=6)}const I=[];for(const P of U){const M=2*Math.random()*Math.PI,A=.01*Math.random();I.push([P[0]+A*Math.cos(M),P[1]+A*Math.sin(M),P[4],P[3],P[2],P[5],P[6].en,P[7]])}nt=Math.max(1,nt),this.prepareChartOptions(I,nt,w,C)}))}ngOnChanges(Y){Y.nodes&&(this.inputNodes$?this.inputNodes$.next(Y.nodes.currentValue):this.inputNodes$=new St.X(Y.nodes.currentValue))}prepareChartOptions(Y,nt,U,w){let C;0===Y.length&&(C={textStyle:{color:"grey",fontSize:15},text:"\u10DB\u10DD\u10DC\u10D0\u10EA\u10D4\u10DB\u10D4\u10D1\u10D8\u10E1 \u10E9\u10D5\u10D4\u10DC\u10D4\u10D1\u10D0 \u10EF\u10D4\u10E0 \u10D0\u10E0 \u10D0\u10E0\u10D8\u10E1 \u10E8\u10D4\u10E1\u10D0\u10EB\u10DA\u10D4\u10D1\u10D4\u10DA\u10D8. \u1C9B\u10DD\u10D2\u10D5\u10D8\u10D0\u10DC\u10D4\u10D1\u10D8\u10D7 \u10E1\u10EA\u10D0\u10D3\u10D4\u10D7.",left:"center",top:"center"}),this.chartOptions={silent:!1,title:C??void 0,tooltip:{},geo:{animation:!1,silent:!0,center:U,zoom:w,tooltip:{show:!1},map:"world",roam:!0,itemStyle:{borderColor:"black",color:"#272b3f"},scaleLimit:{min:1.3,max:1e5},emphasis:{disabled:!0}},series:[{large:!1,type:"scatter",data:Y,coordinateSystem:"geo",geoIndex:0,progressive:500,symbolSize:function(I){return 10*Math.pow(I[2]/nt,.2)+3},tooltip:{position:function(I,P,M,A,R){return I},trigger:"item",show:!0,backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:0,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:I=>{const P=I.data;return`\n                <b style="color: white">${P[3].length>0?P[3]:P[4].slice(0,20)}</b><br>\n                ${P[2]>=1e8?`${this.amountShortenerPipe.transform(P[2]/1e8)} BIT`:`${this.amountShortenerPipe.transform(P[2],2)} radiowavess`}<br>`+"" + P[5] + " \u10E9\u10D0\u10DC\u10D4\u10DA\u10D4\u10D1\u10D8"+`<br>\n                ${(0,k.bK)(P[7])} ${P[6]}\n              `}},itemStyle:{color:function(I){return`${(0,yt.Py)("#1E88E5","#D81B60",Math.pow(I.data[2]/nt,.2))}`},opacity:1,borderColor:"black",borderWidth:0},zlevel:2}]}}onChartInit(Y){void 0===this.chartInstance&&(this.chartInstance=Y,this.chartInstance.on("click",nt=>{nt.data&&this.zone.run(()=>{const U=new V.w(this.stateService).transform(`/lightning/node/${nt.data[4]}`);this.router.navigate([U])})}),this.chartInstance.on("georoam",nt=>{this.chartInstance.resize()}))}onChartFinished(Y){this.readyEvent.emit()}}return tt.\u0275fac=function(Y){return new(Y||tt)(B.Y36(B.soG),B.Y36(X.v),B.Y36(q.s),B.Y36(N.b),B.Y36(et.z),B.Y36($.F0),B.Y36(B.R0b),B.Y36(st.j))},tt.\u0275cmp=B.Xpm({type:tt,selectors:[["app-nodes-map"]],inputs:{widget:"widget",nodes:"nodes",type:"type",fitContainer:"fitContainer"},outputs:{readyEvent:"readyEvent"},features:[B.TTD],decls:4,vars:8,consts:function(){let J,Y;return J="Lightning \u10D8\u10E1 \u10DC\u10DD\u10D3\u10D4\u10D1\u10D8 \u10DB\u10E1\u10DD\u10E4\u10DA\u10D8\u10DD\u10E1 \u10E0\u10E3\u10E5\u10D0\u10D6\u10D4",Y="(Tor nodes excluded)",[[1,"full-container"],["class","card-header",4,"ngIf"],["class","chart","echarts","",3,"class","initOpts","options","chartInit","chartFinished",4,"ngIf"],[1,"card-header"],[1,"d-flex","d-md-block","align-items-baseline",2,"margin-bottom","-5px"],J,[2,"color","#ffffff66"],Y,["echarts","",1,"chart",3,"initOpts","options","chartInit","chartFinished"]]},template:function(Y,nt){1&Y&&(B.TgZ(0,"div",0),B.YNc(1,j,6,0,"div",1),B.YNc(2,it,1,4,"div",2),B.ALo(3,"async"),B.qZA()),2&Y&&(B.Tol(nt.widget?"widget":""),B.ekj("fit-container",nt.fitContainer),B.xp6(1),B.Q6J("ngIf",!nt.widget),B.xp6(1),B.Q6J("ngIf",B.lcZ(3,6,nt.observable$)))},dependencies:[K.O5,_._w,K.Ov],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:500px;height:calc(100% - 150px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{height:100%;padding-bottom:100px}}.full-container.widget[_ngcontent-%COMP%]{min-height:240px;height:240px;padding:0}.full-container.fit-container[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;min-height:100px}.full-container.fit-container[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]{padding:0;min-height:100px}.chart[_ngcontent-%COMP%]{width:100%;height:100%;padding-bottom:20px;padding-right:10px}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 629px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}@media (max-width: 567px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}.chart.widget[_ngcontent-%COMP%]{padding:0}"],changeDetection:0}),tt})()},7319:(Ze,te,D)=>{D.d(te,{a:()=>A});var B=D(4650),St=D(1420),n=D(8675),_t=D(3900),mt=D(8505),gt=D(4004),yt=D(3099),V=D(6895),k=D(1044),X=D(9292),q=D(5568),N=D(7530),et=D(4006),$=D(10),st=D(4529),K=D(3951),_=D(3091),j=D(2216),it=D(4984),z=D(1957);const tt=function(R){return[R]};function J(R,Z){if(1&R&&(B.TgZ(0,"label",11),B._UZ(1,"input",13),B.ALo(2,"relativeUrl"),B._uU(3," 1M "),B.qZA()),2&R){const rt=B.oxw(2);B.ekj("active","1m"===rt.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","1m")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/nodes-networks")))}}function Y(R,Z){if(1&R&&(B.TgZ(0,"label",11),B._UZ(1,"input",14),B.ALo(2,"relativeUrl"),B._uU(3," 3M "),B.qZA()),2&R){const rt=B.oxw(2);B.ekj("active","3d"===rt.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","3m")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/nodes-networks")))}}function nt(R,Z){if(1&R&&(B.TgZ(0,"label",11),B._UZ(1,"input",15),B.ALo(2,"relativeUrl"),B._uU(3," 6M "),B.qZA()),2&R){const rt=B.oxw(2);B.ekj("active","6m"===rt.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","6m")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/nodes-networks")))}}function U(R,Z){if(1&R&&(B.TgZ(0,"label",11),B._UZ(1,"input",16),B.ALo(2,"relativeUrl"),B._uU(3," 1Y "),B.qZA()),2&R){const rt=B.oxw(2);B.ekj("active","1y"===rt.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","1y")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/nodes-networks")))}}function w(R,Z){if(1&R&&(B.TgZ(0,"label",11),B._UZ(1,"input",17),B.ALo(2,"relativeUrl"),B._uU(3," 2Y "),B.qZA()),2&R){const rt=B.oxw(2);B.ekj("active","2y"===rt.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","2y")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/nodes-networks")))}}function C(R,Z){if(1&R&&(B.TgZ(0,"label",11),B._UZ(1,"input",18),B.ALo(2,"relativeUrl"),B._uU(3," 3Y "),B.qZA()),2&R){const rt=B.oxw(2);B.ekj("active","3y"===rt.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","3y")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/nodes-networks")))}}function I(R,Z){if(1&R&&(B.TgZ(0,"form",8)(1,"div",9),B.YNc(2,J,4,8,"label",10),B.YNc(3,Y,4,8,"label",10),B.YNc(4,nt,4,8,"label",10),B.YNc(5,U,4,8,"label",10),B.YNc(6,w,4,8,"label",10),B.YNc(7,C,4,8,"label",10),B.TgZ(8,"label",11),B._UZ(9,"input",12),B.ALo(10,"relativeUrl"),B._uU(11," ALL "),B.qZA()()()),2&R){const rt=Z.ngIf,ot=B.oxw();B.Q6J("formGroup",ot.radioGroupForm),B.xp6(2),B.Q6J("ngIf",rt.days>=30),B.xp6(1),B.Q6J("ngIf",rt.days>=90),B.xp6(1),B.Q6J("ngIf",rt.days>=180),B.xp6(1),B.Q6J("ngIf",rt.days>=365),B.xp6(1),B.Q6J("ngIf",rt.days>=730),B.xp6(1),B.Q6J("ngIf",rt.days>=1095),B.xp6(1),B.ekj("active","all"===ot.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","all")("routerLink",B.VKq(13,tt,B.lcZ(10,11,"/graphs/lightning/nodes-networks")))}}function P(R,Z){1&R&&(B.TgZ(0,"div",19),B._UZ(1,"div",20),B.qZA())}const M=function(){return["fas","download"]};let A=(()=>{class R{constructor(rt,ot,at,lt,ht,vt,ct){this.locale=rt,this.seoService=ot,this.lightningApiService=at,this.formBuilder=lt,this.storageService=ht,this.miningService=vt,this.amountShortenerPipe=ct,this.right=45,this.left=45,this.widget=!1,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.dir="ltr",this.isLoading=!0,this.formatNumber=V.uf,this.timespan="",this.chartInstance=void 0}ngOnInit(){let rt=!0;this.widget?this.miningWindowPreference="3y":(this.seoService.setTitle("Lightning \u10DC\u10DD\u10D3\u10D0 \u10E7\u10DD\u10D5\u10D4\u10DA \u10DC\u10D4\u10D7\u10D5\u10DD\u10E0\u10E5\u10D6\u10D4"),this.miningWindowPreference=this.miningService.getDefaultTimespan("all")),this.radioGroupForm=this.formBuilder.group({dateSpan:this.miningWindowPreference}),this.radioGroupForm.controls.dateSpan.setValue(this.miningWindowPreference),this.nodesNetworkObservable$=this.radioGroupForm.get("dateSpan").valueChanges.pipe((0,n.O)(this.miningWindowPreference),(0,_t.w)(ot=>(this.timespan=ot,!this.widget&&!rt&&this.storageService.setValue("lightningWindowPreference",ot),rt=!1,this.miningWindowPreference=ot,this.isLoading=!0,this.lightningApiService.listStatistics$(ot).pipe((0,mt.b)(at=>{const lt=at.body,ht={tor_nodes:lt.map(ct=>[1e3*ct.added,ct.tor_nodes]),clearnet_nodes:lt.map(ct=>[1e3*ct.added,ct.clearnet_nodes]),unannounced_nodes:lt.map(ct=>[1e3*ct.added,ct.unannounced_nodes]),clearnet_tor_nodes:lt.map(ct=>[1e3*ct.added,ct.clearnet_tor_nodes])};let vt=0;for(const ct of lt)vt=Math.max(vt,ct.tor_nodes+ct.clearnet_nodes+ct.unannounced_nodes+ct.clearnet_tor_nodes);vt=3e3*Math.ceil(vt/3e3),this.prepareChartOptions(ht,vt),this.isLoading=!1}),(0,gt.U)(at=>({days:parseInt(at.headers.get("x-total-count"),10)}))))),(0,yt.B)())}prepareChartOptions(rt,ot){let at;this.widget||0!==rt.tor_nodes.length?this.widget&&rt.tor_nodes.length>0&&(at={textStyle:{color:"grey",fontSize:11},text:"Lightning \u10DC\u10DD\u10D3\u10D0 \u10E7\u10DD\u10D5\u10D4\u10DA \u10DC\u10D4\u10D7\u10D5\u10DD\u10E0\u10E5\u10D6\u10D4",left:"center",top:0,zlevel:10}):at={textStyle:{color:"grey",fontSize:15},text:"\u10D8\u10DC\u10D3\u10D4\u10E5\u10E1\u10D8\u10E0\u10D4\u10D1\u10D0 \u10DB\u10E3\u10E8\u10D0\u10D5\u10D3\u10D4\u10D1\u10D0",left:"center",top:"center"};const lt=[{zlevel:1,yAxisIndex:0,name:"\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8",showSymbol:!1,symbol:"none",data:rt.unannounced_nodes,type:"line",lineStyle:{width:2},areaStyle:{opacity:.5},stack:"Total",color:new St.graphic.LinearGradient(0,.75,0,1,[{offset:0,color:"#D81B60"},{offset:1,color:"#D81B60AA"}]),smooth:!1},{zlevel:1,yAxisIndex:0,name:"Clearnet \u10D8 \u10D3\u10D0 Darknet \u10D8",showSymbol:!1,symbol:"none",data:rt.clearnet_tor_nodes,type:"line",lineStyle:{width:2},areaStyle:{opacity:.5},stack:"Total",color:new St.graphic.LinearGradient(0,.75,0,1,[{offset:0,color:"#be7d4c"},{offset:1,color:"#be7d4cAA"}]),smooth:!1},{zlevel:1,yAxisIndex:0,name:"Clearnet Only (IPv4, IPv6)",showSymbol:!1,symbol:"none",data:rt.clearnet_nodes,type:"line",lineStyle:{width:2},areaStyle:{opacity:.5},stack:"Total",color:new St.graphic.LinearGradient(0,.75,0,1,[{offset:0,color:"#FFB300"},{offset:1,color:"#FFB300AA"}]),smooth:!1},{zlevel:1,yAxisIndex:0,name:"Darknet Only (Tor, I2P, cjdns)",showSymbol:!1,symbol:"none",data:rt.tor_nodes,type:"line",lineStyle:{width:2},areaStyle:{opacity:.5},stack:"Total",color:new St.graphic.LinearGradient(0,.75,0,1,[{offset:0,color:"#7D4698"},{offset:1,color:"#7D4698AA"}]),smooth:!1}];this.chartOptions={title:at,animation:!1,grid:{height:this.widget?90:void 0,top:this.widget?20:40,bottom:this.widget?0:70,right:(0,X.tq)()&&this.widget?35:this.right,left:(0,X.tq)()&&this.widget?40:this.left},tooltip:{show:!(0,X.tq)()||!this.widget,trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:ht=>{let vt=0,dt=`<b style="color: white; margin-left: 2px">${new Date(ht[0].data[0]).toLocaleDateString(this.locale,{year:"numeric",month:"short",day:"numeric"})}</b><br>`;for(const Mt of ht.reverse())-1===Mt.seriesName.indexOf("ignored")&&((0===Mt.seriesIndex||1===Mt.seriesIndex||2===Mt.seriesIndex||3===Mt.seriesIndex)&&(dt+=`${Mt.marker} ${Mt.seriesName}: ${(0,V.uf)(Mt.data[1],this.locale,"1.0-0")}`),dt+="<br>",vt+=Mt.data[1]);return dt+=`<b>Total:</b> ${(0,V.uf)(vt,this.locale,"1.0-0")} nodes`,dt}},xAxis:0===rt.tor_nodes.length?void 0:{type:"time",splitNumber:(0,X.tq)()||this.widget?5:10,axisLabel:{hideOverlap:!0}},legend:this.widget||0===rt.tor_nodes.length?void 0:{padding:10,data:[{name:"Darknet Only (Tor, I2P, cjdns)",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"},{name:"Clearnet Only (IPv4, IPv6)",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"},{name:"Clearnet \u10D8 \u10D3\u10D0 Darknet \u10D8",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"},{name:"\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"}],selected:this.widget?void 0:JSON.parse(this.storageService.getValue("nodes_networks_legend"))??{"$localize`Darknet Only (Tor, I2P, cjdns)`":!0,"$localize`Clearnet Only (IPv4, IPv6)`":!0,"$localize`Clearnet and Darknet`":!0,"$localize`:@@e5d8bb389c702588877f039d72178f219453a72d:Unknown`":!0}},yAxis:0===rt.tor_nodes.length?void 0:[{type:"value",position:"left",axisLabel:{color:"rgb(110, 112, 121)",formatter:ht=>this.widget?`${this.amountShortenerPipe.transform(ht,0)}`:`${(0,V.uf)(Math.round(ht),this.locale,"1.0-0")}`},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}},min:0,interval:3e3},{type:"value",position:"right",axisLabel:{color:"rgb(110, 112, 121)",formatter:ht=>this.widget?`${this.amountShortenerPipe.transform(ht,0)}`:`${(0,V.uf)(Math.round(ht),this.locale,"1.0-0")}`},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}},min:0,interval:3e3}],series:0===rt.tor_nodes.length?[]:lt.concat(lt.map(ht=>{const vt={...ht};return vt.name="ignored"+Math.random().toString(),vt.stack="ignored",vt.yAxisIndex=1,vt.lineStyle={opacity:0},vt.areaStyle={opacity:0},vt})),dataZoom:this.widget?null:[{type:"inside",realtime:!0,zoomLock:!0,maxSpan:100,minSpan:5,moveOnMouseMove:!1},{showDetail:!1,show:!0,type:"slider",brushSelect:!1,realtime:!0,left:20,right:15,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}]},(0,X.tq)()&&this.chartOptions.legend&&(this.chartOptions.legend.left=50)}onChartInit(rt){void 0===this.chartInstance&&(this.chartInstance=rt,this.chartInstance.on("legendselectchanged",ot=>{this.storageService.setValue("nodes_networks_legend",JSON.stringify(ot.selected))}))}onSaveChart(){const rt=this.chartOptions.grid.bottom,ot=new Date;this.chartOptions.grid.bottom=40,this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,k.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`block-sizes-weights-${this.timespan}-${Math.round(ot.getTime()/1e3)}.svg`),this.chartOptions.grid.bottom=rt,this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}}return R.\u0275fac=function(rt){return new(rt||R)(B.Y36(B.soG),B.Y36(q.v),B.Y36(N.Q),B.Y36(et.QS),B.Y36($.V),B.Y36(st.J),B.Y36(K.j))},R.\u0275cmp=B.Xpm({type:R,selectors:[["app-nodes-networks-chart"]],hostVars:1,hostBindings:function(rt,ot){2&rt&&B.uIk("dir",ot.dir)},inputs:{right:"right",left:"left",widget:"widget"},decls:11,vars:15,consts:function(){let Z;return Z="Lightning \u10DC\u10DD\u10D3\u10D0 \u10E7\u10DD\u10D5\u10D4\u10DA \u10DC\u10D4\u10D7\u10D5\u10DD\u10E0\u10E5\u10D6\u10D4",[[1,"card-header","mb-0","mb-md-4"],[1,"d-flex","d-md-block","align-items-baseline"],Z,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],["class","formRadioGroup",3,"formGroup",4,"ngIf"],["echarts","",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],[1,"formRadioGroup",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],["class","btn btn-primary btn-sm",3,"active",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","all","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"]]},template:function(rt,ot){1&rt&&(B.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"span"),B.SDv(4,2),B.qZA(),B.TgZ(5,"button",3),B.NdJ("click",function(){return ot.onSaveChart()}),B._UZ(6,"fa-icon",4),B.qZA()(),B.YNc(7,I,12,15,"form",5),B.ALo(8,"async"),B.qZA(),B.TgZ(9,"div",6),B.NdJ("chartInit",function(lt){return ot.onChartInit(lt)}),B.qZA(),B.YNc(10,P,2,0,"div",7),B.qZA()),2&rt&&(B.Tol(!1===ot.widget?"full-container":""),B.xp6(1),B.Akn(ot.widget?"display:none":""),B.xp6(5),B.Q6J("icon",B.DdM(14,M))("fixedWidth",!0),B.xp6(1),B.Q6J("ngIf",B.lcZ(8,12,ot.nodesNetworkObservable$)),B.xp6(2),B.Tol(ot.widget?"chart-widget":"chart"),B.Q6J("initOpts",ot.chartInitOptions)("options",ot.chartOptions),B.xp6(1),B.Q6J("ngIf",ot.isLoading))},dependencies:[V.O5,_.rH,et._Y,et.Fj,et._,et.JJ,et.JL,et.sg,et.u,j.BN,it._w,V.Ov,z.w],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:500px;height:calc(100% - 150px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{padding-bottom:100px}}.chart[_ngcontent-%COMP%]{width:100%;height:100%;padding-bottom:20px;padding-right:10px}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 629px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}@media (max-width: 567px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:145px}.pool-distribution[_ngcontent-%COMP%]{min-height:56px;display:block}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]{display:flex;flex-direction:row}}.pool-distribution[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:10px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:50%;display:inline-block;margin:0 auto 20px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:2}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:3}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){order:3}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){order:2;display:block}}@media (min-width: 768px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:none}}@media (min-width: 992px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:block}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1rem;color:#4a68b9}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:18px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff6;font-size:12px}.skeleton-loader[_ngcontent-%COMP%]{width:100%;display:block;max-width:80px;margin:15px auto 3px}",".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}"],changeDetection:0}),R})()},9304:(Ze,te,D)=>{D.d(te,{J:()=>ht});var B=D(7579),St=D(9841),n=D(8675),_t=D(3900),mt=D(8505),gt=D(4004),yt=D(3099),V=D(1556),k=D(9292),X=D(1044),q=D(1957),N=D(4650),et=D(3734),$=D(5568),st=D(3951),K=D(3091),_=D(6331),j=D(6895),it=D(6585),z=D(2216),tt=D(8138),J=D(9160);let Y=(()=>{class vt{constructor(dt){this.cd=dt,this.toggleStatusChanged=new N.vpe,this.checked=!1,this.animate=!1}ngAfterViewInit(){this.animate=!0,setTimeout(()=>{this.cd.markForCheck()})}onToggleStatusChanged(dt){this.toggleStatusChanged.emit(dt.target.checked)}}return vt.\u0275fac=function(dt){return new(dt||vt)(N.Y36(N.sBO))},vt.\u0275cmp=N.Xpm({type:vt,selectors:[["app-toggle"]],inputs:{textLeft:"textLeft",textRight:"textRight",checked:"checked"},outputs:{toggleStatusChanged:"toggleStatusChanged"},decls:10,vars:5,consts:[[1,"d-flex","align-items-center"],[1,"switch",2,"margin-bottom","0"],["type","checkbox",3,"checked","change"],[1,"slider","round"]],template:function(dt,Mt){1&dt&&(N.TgZ(0,"div",0)(1,"span"),N._uU(2),N.qZA(),N._uU(3,"\xa0 "),N.TgZ(4,"label",1)(5,"input",2),N.NdJ("change",function(wt){return Mt.onToggleStatusChanged(wt)}),N.qZA(),N._UZ(6,"span",3),N.qZA(),N._uU(7," \xa0"),N.TgZ(8,"span"),N._uU(9),N.qZA()()),2&dt&&(N.xp6(2),N.Oqu(Mt.textLeft),N.xp6(3),N.Q6J("checked",Mt.checked),N.xp6(1),N.ekj("animate",Mt.animate),N.xp6(3),N.Oqu(Mt.textRight))},styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:30px;height:17px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:13px;width:13px;left:2px;bottom:2px;background-color:#fff}.slider.animate[_ngcontent-%COMP%], .slider.animate[_ngcontent-%COMP%]:before{transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(13px)}.slider.round[_ngcontent-%COMP%]{border-radius:17px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}'],changeDetection:0}),vt})();var nt=D(4984);function U(vt,ct){if(1&vt&&(N.TgZ(0,"div",6)(1,"div",7)(2,"h5",8),N.SDv(3,9),N.qZA(),N.TgZ(4,"p",10),N._UZ(5,"app-amount",11),N.qZA()(),N.TgZ(6,"div",7)(7,"h5",8),N.SDv(8,12),N.qZA(),N.TgZ(9,"p",13),N._UZ(10,"app-amount",11),N.qZA()(),N.TgZ(11,"div",7)(12,"h5",8),N.SDv(13,14),N.qZA(),N.TgZ(14,"p",15),N._UZ(15,"app-amount",11),N.qZA()()()),2&vt){const dt=ct.ngIf;N.xp6(5),N.Q6J("radiowavesoshis",dt.clearnetCapacity)("digitsInfo","1.2-2")("noFiat",!0),N.xp6(5),N.Q6J("radiowavesoshis",dt.unknownCapacity)("digitsInfo","1.2-2")("noFiat",!0),N.xp6(5),N.Q6J("radiowavesoshis",dt.torCapacity)("digitsInfo","1.2-2")("noFiat",!0)}}function w(vt,ct){if(1&vt&&(N.TgZ(0,"div"),N.YNc(1,U,16,9,"div",5),N.ALo(2,"async"),N.qZA()),2&vt){const dt=N.oxw(),Mt=N.MAs(5);N.xp6(1),N.Q6J("ngIf",N.lcZ(2,2,dt.nodesPerAsObservable$))("ngIfElse",Mt)}}const C=function(){return["fas","download"]};function I(vt,ct){if(1&vt){const dt=N.EpF();N.TgZ(0,"div",16)(1,"div",17)(2,"span"),N.SDv(3,18),N.qZA(),N.TgZ(4,"button",19),N.NdJ("click",function(){N.CHM(dt);const Pt=N.oxw();return N.KtG(Pt.onSaveChart())}),N._UZ(5,"fa-icon",20),N.qZA()(),N.TgZ(6,"small",21)(7,"span"),N.SDv(8,22),N.qZA()()()}2&vt&&(N.xp6(5),N.Q6J("icon",N.DdM(2,C))("fixedWidth",!0))}function P(vt,ct){1&vt&&(N.TgZ(0,"div",28),N._UZ(1,"div",29),N.qZA())}function M(vt,ct){if(1&vt){const dt=N.EpF();N.TgZ(0,"div",30)(1,"app-toggle",31),N.NdJ("toggleStatusChanged",function(Pt){N.CHM(dt);const wt=N.oxw(2);return N.KtG(wt.onGroupToggleStatusChanged(Pt))}),N.qZA()()}2&vt&&(N.xp6(1),N.Q6J("textLeft","Sort by nodes")("textRight","capacity")("checked",!0))}const A=function(vt){return[vt]};function R(vt,ct){if(1&vt&&(N.TgZ(0,"tr")(1,"td",33),N._uU(2),N.qZA(),N.TgZ(3,"td",44)(4,"a",45),N.ALo(5,"relativeUrl"),N._uU(6),N.qZA()(),N.TgZ(7,"td",37),N._uU(8),N.qZA(),N.TgZ(9,"td",39),N._uU(10),N.qZA(),N.TgZ(11,"td",41),N._UZ(12,"app-amount",11),N.qZA()()),2&vt){const dt=ct.$implicit,Mt=N.oxw(4);N.xp6(2),N.Oqu(dt[5]),N.xp6(2),N.Q6J("routerLink",N.VKq(10,A,N.lcZ(5,8,"/lightning/nodes/isp/"+dt[0]))),N.xp6(2),N.Oqu(dt[1]),N.xp6(2),N.hij("","capacity"===Mt.sortBy?dt[7]:dt[6],"%"),N.xp6(2),N.Oqu(dt[4]),N.xp6(2),N.Q6J("radiowavesoshis",dt[2])("digitsInfo","1.2-2")("noFiat",!0)}}function Z(vt,ct){if(1&vt&&(N.TgZ(0,"tbody"),N.YNc(1,R,13,12,"tr",43),N.qZA()),2&vt){const dt=ct.ngIf;N.uIk("data-cy","pools-table"),N.xp6(1),N.Q6J("ngForOf",dt.ispRanking)}}function rt(vt,ct){if(1&vt&&(N.TgZ(0,"table",32)(1,"thead")(2,"tr")(3,"th",33),N.SDv(4,34),N.qZA(),N.TgZ(5,"th",35),N.SDv(6,36),N.qZA(),N.TgZ(7,"th",37),N.SDv(8,38),N.qZA(),N.TgZ(9,"th",39),N.SDv(10,40),N.qZA(),N.TgZ(11,"th",41),N.SDv(12,42),N.qZA()()(),N.YNc(13,Z,2,2,"tbody",0),N.ALo(14,"async"),N.qZA()),2&vt){const dt=N.oxw(2);N.xp6(13),N.Q6J("ngIf",N.lcZ(14,1,dt.nodesPerAsObservable$))}}function ot(vt,ct){if(1&vt){const dt=N.EpF();N.TgZ(0,"div",23)(1,"div",24),N.NdJ("chartInit",function(Pt){N.CHM(dt);const wt=N.oxw();return N.KtG(wt.onChartInit(Pt))}),N.qZA(),N.YNc(2,P,2,0,"div",25),N.YNc(3,M,2,3,"div",26),N.YNc(4,rt,15,3,"table",27),N.qZA()}if(2&vt){const dt=N.oxw();N.Tol(dt.widget?"pb-0":"bottom-padding"),N.xp6(1),N.Tol(dt.widget?"chart-widget":"chart"),N.Q6J("initOpts",dt.chartInitOptions)("options",dt.chartOptions),N.xp6(1),N.Q6J("ngIf",dt.isLoading),N.xp6(1),N.Q6J("ngIf",!dt.widget),N.xp6(1),N.Q6J("ngIf",!dt.widget)}}function at(vt,ct){1&vt&&(N.TgZ(0,"div",6)(1,"div",7)(2,"h5",8),N.SDv(3,46),N.qZA(),N.TgZ(4,"p",47),N._UZ(5,"span",48),N.qZA()(),N.TgZ(6,"div",7)(7,"h5",8),N.SDv(8,49),N.qZA(),N.TgZ(9,"p",47),N._UZ(10,"span",48),N.qZA()(),N.TgZ(11,"div",7)(12,"h5",8),N.SDv(13,50),N.qZA(),N.TgZ(14,"p",47),N._UZ(15,"span",48),N.qZA()()())}function lt(vt,ct){1&vt&&(N.TgZ(0,"div",51),N.SDv(1,52),N.qZA())}let ht=(()=>{class vt{constructor(dt,Mt,Pt,wt,Ot,Ft){this.apiService=dt,this.seoService=Mt,this.amountShortenerPipe=Pt,this.router=wt,this.zone=Ot,this.stateService=Ft,this.widget=!1,this.isLoading=!0,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.timespan="",this.sortBy="capacity",this.showUnknown=!1,this.chartInstance=void 0,this.indexingInProgress=!1,this.dir="ltr",this.sortBySubject=new B.x,this.showUnknownSubject=new B.x}ngOnInit(){this.widget||this.seoService.setTitle("Lightning Nodes Per ISP"),this.nodesPerAsObservable$=(0,St.a)([this.sortBySubject.pipe((0,n.O)(!0))]).pipe((0,_t.w)(dt=>(this.sortBy=dt[0]?"capacity":"node-count",this.apiService.getNodesPerIsp().pipe((0,mt.b)(()=>{this.isLoading=!1}),(0,gt.U)(Mt=>{let Pt=0,wt=0;for(let Ot=0;Ot<Mt.ispRanking.length;++Ot)Pt+=Mt.ispRanking[Ot][4],wt+=Mt.ispRanking[Ot][2],Mt.ispRanking[Ot][5]=Ot;for(let Ot=0;Ot<Mt.ispRanking.length;++Ot)Mt.ispRanking[Ot][6]=Math.round(Mt.ispRanking[Ot][4]/Pt*1e4)/100,Mt.ispRanking[Ot][7]=Math.round(Mt.ispRanking[Ot][2]/wt*1e4)/100;Mt.ispRanking.sort(!0===dt[0]?(Ot,Ft)=>Ft[7]-Ot[7]:(Ot,Ft)=>Ft[6]-Ot[6]);for(let Ot=0;Ot<Mt.ispRanking.length;++Ot)Mt.ispRanking[Ot][5]=Ot+1;return this.prepareChartOptions(Mt.ispRanking),this.indexingInProgress=!Mt.ispRanking.length,{taggedISP:Mt.ispRanking.length,clearnetCapacity:Mt.clearnetCapacity,unknownCapacity:Mt.unknownCapacity,torCapacity:Mt.torCapacity,ispRanking:Mt.ispRanking.slice(0,100)}})))),(0,yt.B)()),this.widget&&this.sortBySubject.next(!1)}generateChartSerieData(dt){let Mt=.4;this.widget&&(0,k.tq)()||(0,k.tq)()?Mt=1:this.widget&&(Mt=.75);const Pt=[];let wt=0,Ot=0,Ft=0,Ut="10%";return(0,k.tq)()&&this.widget?Ut=0:((0,k.tq)()&&!this.widget||this.widget)&&(Ut=10),dt.forEach(kt=>{if(("capacity"===this.sortBy?kt[7]:kt[6])<Mt)return wt+="capacity"===this.sortBy?kt[7]:kt[6],Ot+=kt[4],void(Ft+=kt[2]);Pt.push({value:"capacity"===this.sortBy?kt[7]:kt[6],name:kt[1].replace("&","")+((0,k.tq)()||this.widget?"":` (${"capacity"===this.sortBy?kt[7]:kt[6]}%)`),label:{overflow:"truncate",width:(0,k.tq)()?75:this.widget?125:250,color:"#b1b1b1",alignTo:"edge",edgeDistance:Ut},tooltip:{show:!(0,k.tq)(),backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1"},borderColor:"#000",formatter:()=>{const ie=kt[4].toString();return`<b style="color: white">${kt[1]} (${"capacity"===this.sortBy?kt[7]:kt[6]}%)</b><br>`+"" + ie + " nodes"+"<br>"+"" + this.amountShortenerPipe.transform(kt[2] / 1e8, 2) + " BIT"}},data:kt[0]})}),Pt.push({itemStyle:{color:"grey"},value:wt,name:"Other (" + (wt.toFixed(2) + "%") + ")",label:{overflow:"truncate",color:"#b1b1b1",alignTo:"edge",edgeDistance:Ut},tooltip:{backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1"},borderColor:"#000",formatter:()=>{const kt=Ot.toString();return'<b style="color: white">'+"Other (" + (wt.toFixed(2) + "%") + ")"+"</b><br>"+"" + kt + " nodes"+"<br>"+"" + this.amountShortenerPipe.transform(Ft / 1e8, 2) + " BIT"}},data:9999}),Pt}prepareChartOptions(dt){let Mt=["20%","80%"];(0,k.tq)()&&!this.widget&&(Mt=["15%","60%"]),this.chartOptions={color:V.vK.filter(Pt=>"#5E35B1"!=Pt),tooltip:{trigger:"item",textStyle:{align:"left"}},series:[{zlevel:0,minShowLabelAngle:.9,name:"Lightning nodes",type:"pie",radius:Mt,data:this.generateChartSerieData(dt),labelLine:{lineStyle:{width:2},length:(0,k.tq)()?1:20,length2:(0,k.tq)()?1:void 0},label:{fontSize:14},itemStyle:{borderRadius:1,borderWidth:1,borderColor:"#000"},emphasis:{itemStyle:{shadowBlur:40,shadowColor:"rgba(0, 0, 0, 0.75)"},labelLine:{lineStyle:{width:4}}}}]}}onChartInit(dt){void 0===this.chartInstance&&(this.chartInstance=dt,this.chartInstance.on("click",Mt=>{9999===Mt.data.data||null===Mt.data.data||this.zone.run(()=>{const Pt=new q.w(this.stateService).transform(`/lightning/nodes/isp/${Mt.data.data}`);this.router.navigate([Pt])})}))}onSaveChart(){const dt=new Date;this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,X.LR)(this.chartInstance.getDataURL({pixelRatio:2,excludeComponents:["dataZoom"]}),`ln-nodes-per-as-${this.timespan}-${Math.round(dt.getTime()/1e3)}.svg`),this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}onGroupToggleStatusChanged(dt){this.sortBySubject.next(dt)}}return vt.\u0275fac=function(dt){return new(dt||vt)(N.Y36(et.s),N.Y36($.v),N.Y36(st.j),N.Y36(K.F0),N.Y36(N.R0b),N.Y36(_.b))},vt.\u0275cmp=N.Xpm({type:vt,selectors:[["app-nodes-per-isp-chart"]],hostVars:1,hostBindings:function(dt,Mt){2&dt&&N.uIk("dir",Mt.dir)},inputs:{widget:"widget"},decls:8,vars:6,consts:function(){let ct,dt,Mt,Pt,wt,Ot,Ft,Ut,kt,ie,ue,Pe,Se,De,Fe,Ye,tr;return ct="Clearnet \u10E1\u10D8\u10DB\u10EB\u10DA\u10D0\u10D5\u10E0\u10D4",dt="\u10E0\u10D0\u10DB\u10D3\u10D4\u10DC\u10D8 \u10DA\u10D8\u10D9\u10D5\u10D8\u10D3\u10E3\u10E0\u10DD\u10D1\u10D0 \u10D0\u10E0\u10D8\u10E1 \u10D9\u10D5\u10D0\u10E8\u10D8\u10E0\u10D6\u10D4, \u10E0\u10DD\u10DB\u10DA\u10D4\u10D1\u10D8\u10EA \u10D8\u10E7\u10D4\u10DC\u10D4\u10D1\u10D4\u10DC \u10DB\u10D8\u10DC\u10D8\u10DB\u10E3\u10DB \u10D4\u10E0\u10D7\u10D8 \u10EC\u10DB\u10D8\u10DC\u10D3\u10D0 IP \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10E1",Mt="\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10E1\u10D8\u10DB\u10EB\u10DA\u10D0\u10D5\u10E0\u10D4",Pt="\u10E0\u10D0\u10DB\u10D3\u10D4\u10DC\u10D0\u10D3 \u10DA\u10D8\u10D9\u10D5\u10D8\u10D3\u10E3\u10E0\u10D8\u10D0 \u10D9\u10D0\u10D5\u10E8\u10D8\u10E0\u10D8, \u10E0\u10DD\u10DB\u10D4\u10DA\u10D7\u10D0 \u10D8\u10D3\u10D4\u10DC\u10E2\u10D8\u10E4\u10D8\u10EA\u10D8\u10E0\u10D4\u10D1\u10D0\u10EA ISP \u10D0\u10E0 \u10D8\u10E7\u10DD",wt="Tor \u10E1\u10D8\u10DB\u10EB\u10DA\u10D0\u10D5\u10E0\u10D4",Ot="\u10E0\u10D0\u10DB\u10D3\u10D4\u10DC\u10D0\u10D3 \u10DA\u10D8\u10D9\u10D5\u10D8\u10D3\u10E3\u10E0\u10D8\u10D0 \u10DB\u10EE\u10DD\u10DA\u10DD\u10D3 Tor-\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D4\u10D1\u10D6\u10D4 \u10DC\u10DD\u10D3\u10D4\u10D1\u10D8",Ft="Top 100 ISPs hosting LN nodes",Ut="(Tor nodes excluded)",kt="\u10E0\u10D4\u10D8\u10E2\u10D8\u10DC\u10D2\u10D8",ie="ISP",ue="\u10D2\u10D0\u10D6\u10D8\u10D0\u10E0\u10D4\u10D1\u10D0",Pe="\u10DC\u10DD\u10D3\u10D0",Se="\u10E2\u10D4\u10D5\u10D0\u10D3\u10DD\u10D1\u10D0",De="Clearnet \u10E1\u10D8\u10DB\u10EB\u10DA\u10D0\u10D5\u10E0\u10D4",Fe="\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10E1\u10D8\u10DB\u10EB\u10DA\u10D0\u10D5\u10E0\u10D4",Ye="Tor \u10E1\u10D8\u10DB\u10EB\u10DA\u10D0\u10D5\u10E0\u10D4",tr="\u10D8\u10DC\u10D3\u10D4\u10E5\u10E1\u10D8\u10E0\u10D4\u10D1\u10D0 \u10DB\u10E3\u10E8\u10D0\u10D5\u10D3\u10D4\u10D1\u10D0",[[4,"ngIf"],["class","card-header",4,"ngIf"],["class","container pb-lg-0",3,"class",4,"ngIf","ngIfElse"],["loadingReward",""],["indexing",""],["class","pool-distribution",4,"ngIf","ngIfElse"],[1,"pool-distribution"],[1,"item"],[1,"card-title"],ct,["ngbTooltip",dt,"placement","bottom",1,"card-text"],[3,"radiowavesoshis","digitsInfo","noFiat"],Mt,["ngbTooltip",Pt,"placement","bottom",1,"card-text"],wt,["ngbTooltip",Ot,"placement","bottom",1,"card-text"],[1,"card-header"],[1,"d-flex","d-md-block","align-items-baseline",2,"margin-bottom","-5px"],Ft,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],[1,"d-block",2,"color","#ffffff66","min-height","25px"],Ut,[1,"container","pb-lg-0"],["echarts","",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],["class","d-flex justify-content-md-end toggle",4,"ngIf"],["class","table table-borderless table-fixed text-center m-auto","style","max-width: 900px",4,"ngIf"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"],[1,"d-flex","justify-content-md-end","toggle"],[3,"textLeft","textRight","checked","toggleStatusChanged"],[1,"table","table-borderless","table-fixed","text-center","m-auto",2,"max-width","900px"],[1,"rank","text-left","pl-0"],kt,[1,"name","text-left"],ie,[1,"share","text-right"],ue,[1,"nodes","text-right"],Pe,[1,"capacity","text-right","pr-0"],Se,[4,"ngFor","ngForOf"],[1,"name","text-left","text-truncate"],[3,"routerLink"],De,[1,"card-text"],[1,"skeleton-loader","skeleton-loader-big"],Fe,Ye,[1,"indexing-message"],tr]},template:function(dt,Mt){if(1&dt&&(N.TgZ(0,"div"),N.YNc(1,w,3,4,"div",0),N.YNc(2,I,9,3,"div",1),N.YNc(3,ot,5,9,"div",2),N.qZA(),N.YNc(4,at,16,0,"ng-template",null,3,N.W1O),N.YNc(6,lt,2,0,"ng-template",null,4,N.W1O)),2&dt){const Pt=N.MAs(7);N.Tol(!1===Mt.widget?"full-container":""),N.xp6(1),N.Q6J("ngIf",Mt.widget),N.xp6(1),N.Q6J("ngIf",!Mt.widget),N.xp6(1),N.Q6J("ngIf",!Mt.indexingInProgress)("ngIfElse",Pt)}},dependencies:[j.sg,j.O5,K.yS,it._L,z.BN,tt.G,J.P,Y,nt._w,j.Ov,q.w],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;height:calc(100% - 140px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{height:calc(100% - 190px)}}@media (max-width: 575px){.full-container[_ngcontent-%COMP%]{height:calc(100% - 230px)}}.chart[_ngcontent-%COMP%]{max-height:400px}@media (max-width: 767.98px){.chart[_ngcontent-%COMP%]{max-height:230px;margin-top:-40px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:100%;height:240px}@media (max-width: 485px){.chart-widget[_ngcontent-%COMP%]{max-height:200px}}@media (max-width: 992px){.bottom-padding[_ngcontent-%COMP%]{padding-bottom:65px}}@media (max-width: 576px){.bottom-padding[_ngcontent-%COMP%]{padding-bottom:65px}}@media (max-width: 767.98px){.pools-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .pools-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.3em!important}}.loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}.pool-distribution[_ngcontent-%COMP%]{min-height:56px;display:block}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]{display:flex;flex-direction:row}}.pool-distribution[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:5px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{max-width:150px;width:50%;display:inline-block;margin:0 auto 20px}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{max-width:160px}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:2}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:3}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){width:50%;order:3}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){order:2;display:block}}@media (min-width: 768px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:none}}@media (min-width: 992px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:block}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1rem;color:#4a68b9;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:18px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff6;font-size:12px}.skeleton-loader[_ngcontent-%COMP%]{width:100%;display:block;max-width:80px;margin:15px auto 3px}.rank[_ngcontent-%COMP%]{width:15%}@media (max-width: 576px){.rank[_ngcontent-%COMP%]{display:none}}.name[_ngcontent-%COMP%]{width:35%;max-width:300px}@media (max-width: 576px){.name[_ngcontent-%COMP%]{width:70%;max-width:150px;padding-left:0;padding-right:0}}.share[_ngcontent-%COMP%]{width:15%}@media (max-width: 576px){.share[_ngcontent-%COMP%]{display:none}}.nodes[_ngcontent-%COMP%]{width:15%}@media (max-width: 576px){.nodes[_ngcontent-%COMP%]{width:10%}}.capacity[_ngcontent-%COMP%]{width:20%}@media (max-width: 576px){.capacity[_ngcontent-%COMP%]{width:20%;max-width:100px}}.toggle[_ngcontent-%COMP%]{justify-content:space-between;padding-top:15px}@media (min-width: 576px){.toggle[_ngcontent-%COMP%]{padding-bottom:15px;padding-left:105px;padding-right:105px}}.indexing-message[_ngcontent-%COMP%]{font-size:15px;color:gray;font-weight:700;width:100%;padding-top:100px;text-align:center;height:240px}"],changeDetection:0}),vt})()},504:(Ze,te,D)=>{D.d(te,{z:()=>Z});var B=D(4650),St=D(1420),n=D(8675),_t=D(3900),mt=D(8505),gt=D(4004),yt=D(3099),V=D(6895),k=D(1044),X=D(9292),q=D(5568),N=D(7530),et=D(4006),$=D(10),st=D(4529),K=D(3951),_=D(3091),j=D(2216),it=D(4984),z=D(1957);const tt=function(rt){return[rt]};function J(rt,ot){if(1&rt&&(B.TgZ(0,"label",12),B._UZ(1,"input",14),B.ALo(2,"relativeUrl"),B._uU(3," 1M "),B.qZA()),2&rt){const at=B.oxw(2);B.ekj("active","1m"===at.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","1m")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/capacity")))}}function Y(rt,ot){if(1&rt&&(B.TgZ(0,"label",12),B._UZ(1,"input",15),B.ALo(2,"relativeUrl"),B._uU(3," 3M "),B.qZA()),2&rt){const at=B.oxw(2);B.ekj("active","3m"===at.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","3m")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/capacity")))}}function nt(rt,ot){if(1&rt&&(B.TgZ(0,"label",12),B._UZ(1,"input",16),B.ALo(2,"relativeUrl"),B._uU(3," 6M "),B.qZA()),2&rt){const at=B.oxw(2);B.ekj("active","6m"===at.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","6m")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/capacity")))}}function U(rt,ot){if(1&rt&&(B.TgZ(0,"label",12),B._UZ(1,"input",17),B.ALo(2,"relativeUrl"),B._uU(3," 1Y "),B.qZA()),2&rt){const at=B.oxw(2);B.ekj("active","1y"===at.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","1y")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/capacity")))}}function w(rt,ot){if(1&rt&&(B.TgZ(0,"label",12),B._UZ(1,"input",18),B.ALo(2,"relativeUrl"),B._uU(3," 2Y "),B.qZA()),2&rt){const at=B.oxw(2);B.ekj("active","2y"===at.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","2y")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/capacity")))}}function C(rt,ot){if(1&rt&&(B.TgZ(0,"label",12),B._UZ(1,"input",19),B.ALo(2,"relativeUrl"),B._uU(3," 3Y "),B.qZA()),2&rt){const at=B.oxw(2);B.ekj("active","3y"===at.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","3y")("routerLink",B.VKq(6,tt,B.lcZ(2,4,"/graphs/lightning/capacity")))}}function I(rt,ot){if(1&rt&&(B.TgZ(0,"form",9)(1,"div",10),B.YNc(2,J,4,8,"label",11),B.YNc(3,Y,4,8,"label",11),B.YNc(4,nt,4,8,"label",11),B.YNc(5,U,4,8,"label",11),B.YNc(6,w,4,8,"label",11),B.YNc(7,C,4,8,"label",11),B.TgZ(8,"label",12),B._UZ(9,"input",13),B.ALo(10,"relativeUrl"),B._uU(11," ALL "),B.qZA()()()),2&rt){const at=ot.ngIf,lt=B.oxw();B.Q6J("formGroup",lt.radioGroupForm),B.xp6(2),B.Q6J("ngIf",at.days>=30),B.xp6(1),B.Q6J("ngIf",at.days>=90),B.xp6(1),B.Q6J("ngIf",at.days>=180),B.xp6(1),B.Q6J("ngIf",at.days>=365),B.xp6(1),B.Q6J("ngIf",at.days>=730),B.xp6(1),B.Q6J("ngIf",at.days>=1095),B.xp6(1),B.ekj("active","all"===lt.radioGroupForm.get("dateSpan").value),B.xp6(1),B.Q6J("value","all")("routerLink",B.VKq(13,tt,B.lcZ(10,11,"/graphs/lightning/capacity")))}}function P(rt,ot){1&rt&&(B.TgZ(0,"div",20),B._UZ(1,"div",21),B.qZA())}function M(rt,ot){1&rt&&(B.TgZ(0,"div",23),B.SDv(1,24),B.qZA())}function A(rt,ot){if(1&rt&&(B.TgZ(0,"div"),B.YNc(1,M,2,0,"div",22),B.qZA()),2&rt){const at=ot.ngIf;B.xp6(1),B.Q6J("ngIf",0===at.days)}}const R=function(){return["fas","download"]};let Z=(()=>{class rt{constructor(at,lt,ht,vt,ct,dt,Mt){this.locale=at,this.seoService=lt,this.lightningApiService=ht,this.formBuilder=vt,this.storageService=ct,this.miningService=dt,this.amountShortenerPipe=Mt,this.right=45,this.left=45,this.widget=!1,this.chartOptions={},this.chartInitOptions={renderer:"svg"},this.dir="ltr",this.isLoading=!0,this.formatNumber=V.uf,this.timespan="",this.chartInstance=void 0}ngOnInit(){let at=!0;this.widget?this.miningWindowPreference="3y":(this.seoService.setTitle("Lightning \u10D8\u10E1 \u10E8\u10D4\u10E1\u10D0\u10EB\u10DA\u10D4\u10D1\u10DA\u10DD\u10D1\u10D0"),this.miningWindowPreference=this.miningService.getDefaultTimespan("all")),this.radioGroupForm=this.formBuilder.group({dateSpan:this.miningWindowPreference}),this.radioGroupForm.controls.dateSpan.setValue(this.miningWindowPreference),this.capacityObservable$=this.radioGroupForm.get("dateSpan").valueChanges.pipe((0,n.O)(this.miningWindowPreference),(0,_t.w)(lt=>(this.timespan=lt,!this.widget&&!at&&this.storageService.setValue("lightningWindowPreference",lt),at=!1,this.miningWindowPreference=lt,this.isLoading=!0,this.lightningApiService.listStatistics$(lt).pipe((0,mt.b)(ht=>{const vt=ht.body;this.prepareChartOptions({channel_count:vt.map(ct=>[1e3*ct.added,ct.channel_count]),capacity:vt.map(ct=>[1e3*ct.added,ct.total_capacity])}),this.isLoading=!1}),(0,gt.U)(ht=>({days:parseInt(ht.headers.get("x-total-count"),10)}))))),(0,yt.B)())}prepareChartOptions(at){let lt;this.widget||0!==at.channel_count.length?this.widget&&at.channel_count.length>0&&(lt={textStyle:{color:"grey",fontSize:11},text:"Lightning \u10D8\u10E1 \u10E8\u10D4\u10E1\u10D0\u10EB\u10DA\u10D4\u10D1\u10DA\u10DD\u10D1\u10D0",left:"center",top:0,zlevel:10}):lt={textStyle:{color:"grey",fontSize:15},text:"\u10D8\u10DC\u10D3\u10D4\u10E5\u10E1\u10D8\u10E0\u10D4\u10D1\u10D0 \u10DB\u10E3\u10E8\u10D0\u10D5\u10D3\u10D4\u10D1\u10D0",left:"center",top:"center"},this.chartOptions={title:lt,animation:!1,color:["#FFB300",new St.graphic.LinearGradient(0,.75,0,1,[{offset:0,color:"#D81B60"},{offset:1,color:"#D81B60AA"}])],grid:{height:this.widget?90:void 0,top:this.widget?20:40,bottom:this.widget?0:70,right:(0,X.tq)()&&this.widget?35:this.right,left:(0,X.tq)()&&this.widget?40:this.left},tooltip:{show:!(0,X.tq)(),trigger:"axis",axisPointer:{type:"line"},backgroundColor:"rgba(17, 19, 31, 1)",borderRadius:4,shadowColor:"rgba(0, 0, 0, 0.5)",textStyle:{color:"#b1b1b1",align:"left"},borderColor:"#000",formatter:ht=>{let vt="",ct="";for(const Pt of ht)0===Pt.seriesIndex?vt=`${Pt.marker} ${Pt.seriesName}: ${(0,V.uf)(Pt.data[1],this.locale,"1.0-0")}`:1===Pt.seriesIndex&&(ct=`${Pt.marker} ${Pt.seriesName}: ${(0,V.uf)(Pt.data[1]/1e8,this.locale,"1.0-0")} BIT`);return`\n            <b style="color: white; margin-left: 18px">${new Date(ht[0].data[0]).toLocaleDateString(this.locale,{year:"numeric",month:"short",day:"numeric"})}</b><br>\n            <span>${vt}</span><br>\n            <span>${ct}</span>\n          `}},xAxis:0===at.channel_count.length?void 0:{type:"time",splitNumber:(0,X.tq)()||this.widget?5:10,axisLabel:{hideOverlap:!0}},legend:this.widget||0===at.channel_count.length?void 0:{padding:10,data:[{name:"\u10E9\u10D0\u10DC\u10D4\u10DA\u10D8",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"},{name:"\u10E2\u10D4\u10D5\u10D0\u10D3\u10DD\u10D1\u10D0",inactiveColor:"rgb(110, 112, 121)",textStyle:{color:"white"},icon:"roundRect"}],selected:JSON.parse(this.storageService.getValue("sizes_ln_legend"))??{Channels:!0,Capacity:!0}},yAxis:0===at.channel_count.length?void 0:[{type:"value",axisLabel:{color:"rgb(110, 112, 121)",formatter:ht=>this.widget?`${this.amountShortenerPipe.transform(ht,0)}`:`${(0,V.uf)(Math.round(ht),this.locale,"1.0-0")}`},splitLine:{lineStyle:{type:"dotted",color:"#ffffff66",opacity:.25}},minInterval:this.widget?2e4:void 0},{min:0,type:"value",position:"right",axisLabel:{color:"rgb(110, 112, 121)",formatter:ht=>this.widget?`${this.amountShortenerPipe.transform(Math.round(ht/1e8),0)}`:`${(0,V.uf)(Math.round(ht/1e8),this.locale,"1.0-0")}`},splitLine:{show:!1}}],series:0===at.channel_count.length?[]:[{zlevel:1,name:"\u10E9\u10D0\u10DC\u10D4\u10DA\u10D8",showSymbol:!1,symbol:"none",data:at.channel_count,type:"line",lineStyle:{width:2},markLine:{silent:!0,symbol:"none",lineStyle:{type:"solid",color:"#ffffff66",opacity:1,width:1}},smooth:!1},{zlevel:0,yAxisIndex:1,name:"\u10E2\u10D4\u10D5\u10D0\u10D3\u10DD\u10D1\u10D0",showSymbol:!1,symbol:"none",stack:"Total",data:at.capacity,areaStyle:{opacity:.5},type:"line",smooth:!1}],dataZoom:this.widget?null:[{type:"inside",realtime:!0,zoomLock:!0,maxSpan:100,minSpan:5,moveOnMouseMove:!1},{showDetail:!1,show:!0,type:"slider",brushSelect:!1,realtime:!0,left:20,right:15,selectedDataBackground:{lineStyle:{color:"#fff",opacity:.45},areaStyle:{opacity:0}}}]}}onChartInit(at){void 0===this.chartInstance&&(this.chartInstance=at,this.chartInstance.on("legendselectchanged",lt=>{this.storageService.setValue("sizes_ln_legend",JSON.stringify(lt.selected))}))}onSaveChart(){const at=this.chartOptions.grid.bottom,lt=new Date;this.chartOptions.grid.bottom=40,this.chartOptions.backgroundColor="#11131f",this.chartInstance.setOption(this.chartOptions),(0,k.LR)(this.chartInstance.getDataURL({pixelRatio:2}),`lightning-network-capacity-${this.timespan}-${Math.round(lt.getTime()/1e3)}.svg`),this.chartOptions.grid.bottom=at,this.chartOptions.backgroundColor="none",this.chartInstance.setOption(this.chartOptions)}}return rt.\u0275fac=function(at){return new(at||rt)(B.Y36(B.soG),B.Y36(q.v),B.Y36(N.Q),B.Y36(et.QS),B.Y36($.V),B.Y36(st.J),B.Y36(K.j))},rt.\u0275cmp=B.Xpm({type:rt,selectors:[["app-lightning-statistics-chart"]],hostVars:1,hostBindings:function(at,lt){2&at&&B.uIk("dir",lt.dir)},inputs:{right:"right",left:"left",widget:"widget"},decls:13,vars:18,consts:function(){let ot,at;return ot="Lightning \u10D8\u10E1 \u10E8\u10D4\u10E1\u10D0\u10EB\u10DA\u10D4\u10D1\u10DA\u10DD\u10D1\u10D0",at="\u10D8\u10DC\u10D3\u10D4\u10E5\u10E1\u10D8\u10E0\u10D4\u10D1\u10D0 \u10DB\u10E3\u10E8\u10D0\u10D5\u10D3\u10D4\u10D1\u10D0",[[1,"card-header","mb-0","mb-md-4"],[1,"d-flex","d-md-block","align-items-baseline"],ot,[1,"btn","p-0","pl-2",2,"margin","0 0 4px 0px",3,"click"],[3,"icon","fixedWidth"],["class","formRadioGroup",3,"formGroup",4,"ngIf"],["echarts","",3,"initOpts","options","chartInit"],["class","text-center loadingGraphs",4,"ngIf"],[4,"ngIf"],[1,"formRadioGroup",3,"formGroup"],["name","radioBasic",1,"btn-group","btn-group-toggle"],["class","btn btn-primary btn-sm",3,"active",4,"ngIf"],[1,"btn","btn-primary","btn-sm"],["type","radio","fragment","all","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","6m","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","1y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","2y","formControlName","dateSpan",3,"value","routerLink"],["type","radio","fragment","3y","formControlName","dateSpan",3,"value","routerLink"],[1,"text-center","loadingGraphs"],[1,"spinner-border","text-light"],["class","indexing-message d-flex",4,"ngIf"],[1,"indexing-message","d-flex"],at]},template:function(at,lt){1&at&&(B.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"span"),B.SDv(4,2),B.qZA(),B.TgZ(5,"button",3),B.NdJ("click",function(){return lt.onSaveChart()}),B._UZ(6,"fa-icon",4),B.qZA()(),B.YNc(7,I,12,15,"form",5),B.ALo(8,"async"),B.qZA(),B.TgZ(9,"div",6),B.NdJ("chartInit",function(vt){return lt.onChartInit(vt)}),B.qZA(),B.YNc(10,P,2,0,"div",7),B.YNc(11,A,2,1,"div",8),B.ALo(12,"async"),B.qZA()),2&at&&(B.Tol(!1===lt.widget?"full-container":""),B.xp6(1),B.Akn(lt.widget?"display:none":""),B.xp6(5),B.Q6J("icon",B.DdM(17,R))("fixedWidth",!0),B.xp6(1),B.Q6J("ngIf",B.lcZ(8,13,lt.capacityObservable$)),B.xp6(2),B.Tol(lt.widget?"chart-widget":"chart"),B.Q6J("initOpts",lt.chartInitOptions)("options",lt.chartOptions),B.xp6(1),B.Q6J("ngIf",lt.isLoading),B.xp6(1),B.Q6J("ngIf",lt.widget&&B.lcZ(12,15,lt.capacityObservable$)))},dependencies:[V.O5,_.rH,et._Y,et.Fj,et._,et.JJ,et.JL,et.sg,et.u,j.BN,it._w,V.Ov,z.w],styles:[".card-header[_ngcontent-%COMP%]{border-bottom:0;font-size:18px}@media (min-width: 465px){.card-header[_ngcontent-%COMP%]{font-size:20px}}.main-title[_ngcontent-%COMP%]{position:relative;color:#ffffff91;margin-top:-13px;font-size:10px;text-transform:uppercase;font-weight:500;text-align:center;padding-bottom:3px}.full-container[_ngcontent-%COMP%]{padding:0 15px;width:100%;min-height:500px;height:calc(100% - 150px)}@media (max-width: 992px){.full-container[_ngcontent-%COMP%]{padding-bottom:100px}}.chart[_ngcontent-%COMP%]{width:100%;height:100%;padding-bottom:20px;padding-right:10px}@media (max-width: 992px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 829px){.chart[_ngcontent-%COMP%]{padding-bottom:50px}}@media (max-width: 767px){.chart[_ngcontent-%COMP%]{padding-bottom:25px}}@media (max-width: 629px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}@media (max-width: 567px){.chart[_ngcontent-%COMP%]{padding-bottom:55px}}.chart-widget[_ngcontent-%COMP%]{width:100%;height:145px}.pool-distribution[_ngcontent-%COMP%]{min-height:56px;display:block}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]{display:flex;flex-direction:row}}.pool-distribution[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:10px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:50%;display:inline-block;margin:0 auto 20px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:2}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2){order:3}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){order:3}@media (min-width: 485px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){order:2;display:block}}@media (min-width: 768px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:none}}@media (min-width: 992px){.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3){display:block}}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1rem;color:#4a68b9}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:18px}.pool-distribution[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff6;font-size:12px}.skeleton-loader[_ngcontent-%COMP%]{width:100%;display:block;max-width:80px;margin:15px auto 3px}.indexing-message[_ngcontent-%COMP%]{position:absolute;font-size:15px;color:gray;font-weight:700;margin-left:calc(50% - 85px);margin-top:-10px}",".loadingGraphs[_ngcontent-%COMP%]{position:absolute;top:50%;left:calc(50% - 15px);z-index:100}"]}),rt})()},4529:(Ze,te,D)=>{D.d(te,{J:()=>gt});var B=D(4004),St=D(4650),n=D(6331),_t=D(3734),mt=D(10);let gt=(()=>{class yt{constructor(k,X,q){this.stateService=k,this.apiService=X,this.storageService=q}getMiningStats(k){return this.apiService.listPools$(k).pipe((0,B.U)(X=>this.generateMiningStats(X)))}getMiningUnits(){let X=18;return"testnet"===this.stateService.network&&(X=12),{hashrateDivider:Math.pow(10,X),hashrateUnit:{0:"H/s",3:"kH/s",6:"MH/s",9:"GH/s",12:"TH/s",15:"PH/s",18:"EH/s"}[X]}}getDefaultTimespan(k){const X=["24h","3d","1w","1m","3m","6m","1y","2y","3y","all"],q=this.storageService.getValue("miningWindowPreference")??"1w";return X.indexOf(q)<X.indexOf(k)?k:q}generateMiningStats(k){const X=k.body,q=this.getMiningUnits(),N=q.hashrateDivider,et=Object.values(X.pools).reduce((K,_)=>K+_.emptyBlocks,0),$=(et/X.blockCount*100).toFixed(2),st=X.pools.map(K=>({share:parseFloat((K.blockCount/X.blockCount*100).toFixed(2)),lastEstimatedHashrate:(K.blockCount/X.blockCount*X.lastEstimatedHashrate/N).toFixed(2),emptyBlockRatio:(K.emptyBlocks/K.blockCount*100).toFixed(2),logo:"/resources/mining-pools/"+K.name.toLowerCase().replace(" ","").replace(".","")+".svg",...K}));return{lastEstimatedHashrate:(X.lastEstimatedHashrate/N).toFixed(2),blockCount:X.blockCount,totalEmptyBlock:et,totalEmptyBlockRatio:$,pools:st,miningUnits:q,totalBlockCount:parseInt(k.headers.get("x-total-count"),10)}}}return yt.\u0275fac=function(k){return new(k||yt)(St.LFG(n.b),St.LFG(_t.s),St.LFG(mt.V))},yt.\u0275prov=St.Yz7({token:yt,factory:yt.\u0275fac,providedIn:"root"}),yt})()},9292:(Ze,te,D)=>{function B(){return window.innerWidth<=767.98}function St(gt){if(!gt)return"";const yt=gt.toUpperCase().split("").map(V=>127397+V.charCodeAt());return String.fromCodePoint(...yt)}function n(gt,yt){if(!gt)return"";const X=[["Alabama","AL"],["Alaska","AK"],["American Samoa","AS"],["Arizona","AZ"],["Arkansas","AR"],["Armed Forces Americas","AA"],["Armed Forces Europe","AE"],["Armed Forces Pacific","AP"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["District Of Columbia","DC"],["Florida","FL"],["Georgia","GA"],["Guam","GU"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Marshall Islands","MH"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Northern Mariana Islands","NP"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Puerto Rico","PR"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["US Virgin Islands","VI"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"]].concat([["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland","NF"],["Northwest Territory","NT"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Yukon","YT"]]);let q;if("abbreviated"==yt){for(gt=gt.replace(/\w\S*/g,function(N){return N.charAt(0).toUpperCase()+N.substr(1).toLowerCase()}),q=0;q<X.length;q++)if(X[q][0]==gt)return X[q][1]}else if("name"==yt)for(gt=gt.toUpperCase(),q=0;q<X.length;q++)if(X[q][1]==gt)return X[q][0]}function _t(gt,yt,V,k){const X=gt*Math.PI/180,q=yt*Math.PI/180,N=V*Math.PI/180,et=k*Math.PI/180,$=Math.sin((N-X)/2),st=Math.sin((et-q)/2),K=Math.min(1,Math.max(0,$*$+Math.cos(X)*Math.cos(N)*st*st));return 12742*Math.asin(Math.sqrt(K))}function mt(gt){return.62137119*gt}D.d(te,{YV:()=>n,bK:()=>St,qu:()=>mt,tq:()=>B,xm:()=>_t})},1420:(Ze,te,D)=>{D.r(te),D.d(te,{Axis:()=>St.RD,ChartView:()=>St.TA,ComponentModel:()=>St.tF,ComponentView:()=>St.Ir,List:()=>St.aV,Model:()=>St.Hn,PRIORITY:()=>St.Hr,SeriesModel:()=>St.wJ,color:()=>St.$_,connect:()=>St.$j,dataTool:()=>St.Ok,dependencies:()=>St.HO,disConnect:()=>St.eU,disconnect:()=>St.zP,dispose:()=>St.B9,env:()=>St.OB,extendChartView:()=>St.Zy,extendComponentModel:()=>St.tv,extendComponentView:()=>St.Sp,extendSeriesModel:()=>St.Zr,format:()=>St.WU,getCoordinateSystemDimensions:()=>St.wL,getInstanceByDom:()=>St.JE,getInstanceById:()=>St.rp,getMap:()=>St.FU,graphic:()=>St.Q,helper:()=>St._y,init:()=>St.S1,innerDrawElementOnCanvas:()=>St.z$,matrix:()=>St.pI,number:()=>St.Rx,parseGeoJSON:()=>St.Nu,parseGeoJson:()=>St.pQ,registerAction:()=>St.zl,registerCoordinateSystem:()=>St.RS,registerLayout:()=>St.qR,registerLoading:()=>St.yn,registerLocale:()=>St.I2,registerMap:()=>St.je,registerPostInit:()=>St.sq,registerPostUpdate:()=>St.Br,registerPreprocessor:()=>St.ds,registerProcessor:()=>St.Pu,registerTheme:()=>St.aW,registerTransform:()=>St.rV,registerUpdateLifecycle:()=>St.YK,registerVisual:()=>St.Og,setCanvasCreator:()=>St.jQ,setPlatformAPI:()=>St.g2,throttle:()=>St.P2,time:()=>St.XV,use:()=>St.D$,util:()=>St.D5,vector:()=>St.xr,version:()=>St.i8,zrUtil:()=>St.gf,zrender:()=>St.x_});var B=D(8458),St=D(3915),n=D(5770),_t=D(4687),mt=D(2477),gt=D(8418),yt=D(585),V=D(3008),k=Math.sin,X=Math.cos,q=Math.PI,N=2*Math.PI,et=180/q;const st=function(){function o(){}return o.prototype.reset=function(r){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,r||4)},o.prototype.moveTo=function(r,e){this._add("M",r,e)},o.prototype.lineTo=function(r,e){this._add("L",r,e)},o.prototype.bezierCurveTo=function(r,e,i,s,l,c){this._add("C",r,e,i,s,l,c)},o.prototype.quadraticCurveTo=function(r,e,i,s){this._add("Q",r,e,i,s)},o.prototype.arc=function(r,e,i,s,l,c){this.ellipse(r,e,i,i,0,s,l,c)},o.prototype.ellipse=function(r,e,i,s,l,c,f,p){var G,v=f-c,m=!p,x=Math.abs(v),T=(0,_t.zT)(x-N)||(m?v>=N:-v>=N),O=v>0?v%N:v%N+N;G=!!T||!(0,_t.zT)(x)&&O>=q==!!m;var F=r+i*X(c),Q=e+s*k(c);this._start&&this._add("M",F,Q);var ft=Math.round(l*et);if(T){var Tt=1/this._p,xt=(m?1:-1)*(N-Tt);this._add("A",i,s,ft,1,+m,r+i*X(c+xt),e+s*k(c+xt)),Tt>.01&&this._add("A",i,s,ft,0,+m,F,Q)}else{var At=r+i*X(f),It=e+s*k(f);this._add("A",i,s,ft,+G,+m,At,It)}},o.prototype.rect=function(r,e,i,s){this._add("M",r,e),this._add("l",i,0),this._add("l",0,s),this._add("l",-i,0),this._add("Z")},o.prototype.closePath=function(){this._d.length>0&&this._add("Z")},o.prototype._add=function(r,e,i,s,l,c,f,p,v){for(var m=[],x=this._p,T=1;T<arguments.length;T++){var O=arguments[T];if(isNaN(O))return void(this._invalid=!0);m.push(Math.round(O*x)/x)}this._d.push(r+m.join(" ")),this._start="Z"===r},o.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},o.prototype.getStr=function(){return this._str},o}();var K=D(9022),_=D(6615),j="none",it=Math.round,J=["lineCap","miterLimit","lineJoin"],Y=(0,_.map)(J,function(o){return"stroke-"+o.toLowerCase()});var U=D(5917),w="http://www.w3.org/2000/svg",C="http://www.w3.org/1999/xlink";function M(o){return document.createElementNS(w,o)}function A(o,r,e,i,s){return{tag:o,attrs:e||{},children:i,text:s,key:r}}function rt(o,r){var e=(r=r||{}).newline?"\n":"";return function i(s){var l=s.children,c=s.tag;return function R(o,r){var e=[];if(r)for(var i in r){var s=r[i],l=i;!1!==s&&(!0!==s&&null!=s&&(l+='="'+s+'"'),e.push(l))}return"<"+o+" "+e.join(" ")+">"}(c,s.attrs)+(0,U.F1)(s.text)+(l?""+e+(0,_.map)(l,function(p){return i(p)}).join(e)+e:"")+function Z(o){return"</"+o+">"}(c)}(o)}function at(o){return{zrId:o,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function lt(o,r,e,i){return A("svg","root",{width:o,height:r,xmlns:w,"xmlns:xlink":C,version:"1.1",baseProfile:"full",viewBox:!!i&&"0 0 "+o+" "+r},e)}var ht=D(5486),vt=D(5028),ct=D(7034),dt=D(1803),Mt=D(6776),Pt={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},wt="transform-origin";function Ot(o,r,e){var i=(0,_.extend)({},o.shape);(0,_.extend)(i,r),o.buildPath(e,i);var s=new st;return s.reset((0,_t.Gk)(o)),e.rebuildPath(s,1),s.generateStr(),s.getStr()}function Ft(o,r){var e=r.originX,i=r.originY;(e||i)&&(o[wt]=e+"px "+i+"px")}var Ut={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function kt(o,r){var e=r.zrId+"-ani-"+r.cssAnimIdx++;return r.cssAnims[e]=o,e}function ue(o){return(0,_.isString)(o)?Pt[o]?"cubic-bezier("+Pt[o]+")":(0,Mt.H)(o)?o:"":""}function Pe(o,r,e,i){var s=o.animators,l=s.length,c=[];if(o instanceof dt.Z){var f=function ie(o,r,e){var l,c,s={};if((0,_.each)(o.shape.paths,function(p){var v=at(e.zrId);v.animation=!0,Pe(p,{},v,!0);var m=v.cssAnims,x=v.cssNodes,T=(0,_.keys)(m),O=T.length;if(O){var G=m[c=T[O-1]];for(var F in G){var Q=G[F];s[F]=s[F]||{d:""},s[F].d+=Q.d||""}for(var ft in x){var Tt=x[ft].animation;Tt.indexOf(c)>=0&&(l=Tt)}}}),l){r.d=!1;var f=kt(s,e);return l.replace(c,f)}}(o,r,e);if(f)c.push(f);else if(!l)return}else if(!l)return;for(var p={},v=0;v<l;v++){var m=s[v],x=[m.getMaxTime()/1e3+"s"],T=ue(m.getClip().easing),O=m.getDelay();x.push(T||"linear"),O&&x.push(O/1e3+"s"),m.getLoop()&&x.push("infinite");var G=x.join(" ");p[G]=p[G]||[G,[]],p[G][1].push(m)}function F(Tt){var xt=Tt[1],At=xt.length,It={},Nt={},Gt={},Wt="animation-timing-function";function jt(nn,Wn,kn){for(var qn=nn.getTracks(),ha=nn.getMaxTime(),ma=0;ma<qn.length;ma++){var Ci=qn[ma];if(Ci.needsAnimate()){var Qi=Ci.keyframes,Ki=Ci.propName;if(kn&&(Ki=kn(Ki)),Ki)for(var Ga=0;Ga<Qi.length;Ga++){var Wl=Qi[Ga],po=Math.round(Wl.time/ha*100)+"%",pg=ue(Wl.easing),Zu=Wl.rawValue;((0,_.isString)(Zu)||(0,_.isNumber)(Zu))&&(Wn[po]=Wn[po]||{},Wn[po][Ki]=Wl.rawValue,pg&&(Wn[po][Wt]=pg))}}}}for(var ee=0;ee<At;ee++)(de=(oe=xt[ee]).targetName)?"shape"===de&&jt(oe,Nt):!i&&jt(oe,It);for(var xe in It){var be={};(0,vt.kY)(be,o),(0,_.extend)(be,It[xe]);var Ae=(0,_t.gA)(be),ke=It[xe][Wt];Gt[xe]=Ae?{transform:Ae}:{},Ft(Gt[xe],be),ke&&(Gt[xe][Wt]=ke)}var Je,$e=!0;for(var xe in Nt){Gt[xe]=Gt[xe]||{};var fr=!Je;ke=Nt[xe][Wt],fr&&(Je=new ct.Z);var wr=Je.len();Je.reset(),Gt[xe].d=Ot(o,Nt[xe],Je);var Dr=Je.len();if(!fr&&wr!==Dr){$e=!1;break}ke&&(Gt[xe][Wt]=ke)}if(!$e)for(var xe in Gt)delete Gt[xe].d;if(!i)for(ee=0;ee<At;ee++){var oe,de;"style"===(de=(oe=xt[ee]).targetName)&&jt(oe,Gt,function(qn){return Ut[qn]})}var rn,cn=(0,_.keys)(Gt),ln=!0;for(ee=1;ee<cn.length;ee++){var Pn=cn[ee-1];if(Gt[Pn][wt]!==Gt[cn[ee]][wt]){ln=!1;break}rn=Gt[Pn][wt]}if(ln&&rn){for(var xe in Gt)Gt[xe][wt]&&delete Gt[xe][wt];r[wt]=rn}if((0,_.filter)(cn,function(nn){return(0,_.keys)(Gt[nn]).length>0}).length)return kt(Gt,e)+" "+Tt[0]+" both"}for(var Q in p)(f=F(p[Q]))&&c.push(f);if(c.length){var ft=e.zrId+"-cls-"+e.cssClassIdx++;e.cssNodes["."+ft]={animation:c.join(",")},r.class=ft}}var Se=D(2018),De=D(800),Fe=Math.round;function Ye(o){return o&&(0,_.isString)(o.src)}function tr(o){return o&&(0,_.isFunction)(o.toDataURL)}function or(o,r,e,i){(function nt(o,r,e,i){var s=r.opacity??1;if(e instanceof gt.ZP)o("opacity",s);else{if(function z(o){var r=o.fill;return null!=r&&r!==j}(r)){var l=(0,_t.ut)(r.fill);o("fill",l.color);var c=null!=r.fillOpacity?r.fillOpacity*l.opacity*s:l.opacity*s;(i||c<1)&&o("fill-opacity",c)}else o("fill",j);if(function tt(o){var r=o.stroke;return null!=r&&r!==j}(r)){var f=(0,_t.ut)(r.stroke);o("stroke",f.color);var p=r.strokeNoScale?e.getLineScale():1,v=p?(r.lineWidth||0)/p:0,m=null!=r.strokeOpacity?r.strokeOpacity*f.opacity*s:f.opacity*s,x=r.strokeFirst;if((i||1!==v)&&o("stroke-width",v),(i||x)&&o("paint-order",x?"stroke":"fill"),(i||m<1)&&o("stroke-opacity",m),r.lineDash){var T=(0,K.a)(e),O=T[0],G=T[1];O&&(G=it(G||0),o("stroke-dasharray",O.join(",")),(G||i)&&o("stroke-dashoffset",G))}else i&&o("stroke-dasharray",j);for(var F=0;F<J.length;F++){var Q=J[F];if(i||r[Q]!==mt.$t[Q]){var ft=r[Q]||mt.$t[Q];ft&&o(Y[F],ft)}}}else i&&o("stroke",j)}})(function(s,l){var c="fill"===s||"stroke"===s;c&&(0,_t.H3)(l)?we(r,o,s,i):c&&(0,_t.R)(l)?Le(e,o,s,i):o[s]=l},r,e,!1),function pe(o,r,e){var i=o.style;if((0,_t.i2)(i)){var s=(0,_t.n1)(o),l=e.shadowCache,c=l[s];if(!c){var f=o.getGlobalScale(),p=f[0],v=f[1];if(!p||!v)return;var m=i.shadowOffsetX||0,x=i.shadowOffsetY||0,T=i.shadowBlur,O=(0,_t.ut)(i.shadowColor),G=O.opacity,F=O.color,Tt=T/2/p+" "+T/2/v;c=e.zrId+"-s"+e.shadowIdx++,e.defs[c]=A("filter",c,{id:c,x:"-100%",y:"-100%",width:"300%",height:"300%"},[A("feDropShadow","",{dx:m/p,dy:x/v,stdDeviation:Tt,"flood-color":F,"flood-opacity":G})]),l[s]=c}r.filter=(0,_t.m1)(c)}}(e,o,i)}function Hr(o){return(0,_t.zT)(o[0]-1)&&(0,_t.zT)(o[1])&&(0,_t.zT)(o[2])&&(0,_t.zT)(o[3]-1)}function qr(o,r,e){if(r&&(!function Rr(o){return(0,_t.zT)(o[4])&&(0,_t.zT)(o[5])}(r)||!Hr(r))){var i=e?10:1e4;o.transform=Hr(r)?"translate("+Fe(r[4]*i)/i+" "+Fe(r[5]*i)/i+")":(0,_t.qV)(r)}}function Vr(o,r,e){for(var i=o.points,s=[],l=0;l<i.length;l++)s.push(Fe(i[l][0]*e)/e),s.push(Fe(i[l][1]*e)/e);r.points=s.join(" ")}function Ve(o){return!o.smooth}var Ar={circle:[function er(o){var r=(0,_.map)(o,function(e){return"string"==typeof e?[e,e]:e});return function(e,i,s){for(var l=0;l<r.length;l++){var c=r[l],f=e[c[0]];null!=f&&(i[c[1]]=Fe(f*s)/s)}}}(["cx","cy","r"])],polyline:[Vr,Ve],polygon:[Vr,Ve]};function Cr(o,r){var e=o.style,i=o.shape,s=Ar[o.type],l={},c=r.animation,f="path",p=o.style.strokePercent,v=r.compress&&(0,_t.Gk)(o)||4;if(!s||r.willUpdate||s[1]&&!s[1](i)||c&&function Lr(o){for(var r=o.animators,e=0;e<r.length;e++)if("shape"===r[e].targetName)return!0;return!1}(o)||p<1){var x=!o.path||o.shapeChanged();o.path||o.createPathProxy();var T=o.path;x&&(T.beginPath(),o.buildPath(T,o.shape),o.pathUpdated());var O=T.getVersion(),G=o,F=G.__svgPathBuilder;(G.__svgPathVersion!==O||!F||p!==G.__svgPathStrokePercent)&&(F||(F=G.__svgPathBuilder=new st),F.reset(v),T.rebuildPath(F,p),F.generateStr(),G.__svgPathVersion=O,G.__svgPathStrokePercent=p),l.d=F.getStr()}else{f=o.type;var m=Math.pow(10,v);s[0](i,l,m)}return qr(l,o.transform),or(l,e,o,r),r.animation&&Pe(o,l,r),A(f,o.id+"",l)}function re(o,r){return o instanceof mt.ZP?Cr(o,r):o instanceof gt.ZP?function Zr(o,r){var e=o.style,i=e.image;if(i&&!(0,_.isString)(i)&&(Ye(i)?i=i.src:tr(i)&&(i=i.toDataURL())),i){var s=e.x||0,l=e.y||0,p={href:i,width:e.width,height:e.height};return s&&(p.x=s),l&&(p.y=l),qr(p,o.transform),or(p,e,o,r),r.animation&&Pe(o,p,r),A("image",o.id+"",p)}}(o,r):o instanceof V.Z?function Nr(o,r){var e=o.style,i=e.text;if(null!=i&&(i+=""),i&&!isNaN(e.x)&&!isNaN(e.y)){var s=e.font||De.Uo,l=e.x||0,c=(0,_t.mU)(e.y||0,(0,yt.Dp)(s),e.textBaseline),p={"dominant-baseline":"central","text-anchor":_t.jY[e.textAlign]||e.textAlign};if((0,Se.Y1)(e)){var v="",m=e.fontStyle,x=(0,Se.VG)(e.fontSize);if(!parseFloat(x))return;var O=e.fontWeight;v+="font-size:"+x+";font-family:"+(e.fontFamily||De.rk)+";",m&&"normal"!==m&&(v+="font-style:"+m+";"),O&&"normal"!==O&&(v+="font-weight:"+O+";"),p.style=v}else p.style="font: "+s;return i.match(/\s/)&&(p["xml:space"]="preserve"),l&&(p.x=l),c&&(p.y=c),qr(p,o.transform),or(p,e,o,r),r.animation&&Pe(o,p,r),A("text",o.id+"",p,void 0,i)}}(o,r):void 0}function we(o,r,e,i){var l,s=o[e],c={gradientUnits:s.global?"userSpaceOnUse":"objectBoundingBox"};if((0,_t.I1)(s))l="linearGradient",c.x1=s.x,c.y1=s.y,c.x2=s.x2,c.y2=s.y2;else{if(!(0,_t.gO)(s))return;l="radialGradient",c.cx=(0,_.retrieve2)(s.x,.5),c.cy=(0,_.retrieve2)(s.y,.5),c.r=(0,_.retrieve2)(s.r,.5)}for(var f=s.colorStops,p=[],v=0,m=f.length;v<m;++v){var x=100*(0,_t.Pn)(f[v].offset)+"%",O=(0,_t.ut)(f[v].color),F=O.opacity,Q={offset:x};Q["stop-color"]=O.color,F<1&&(Q["stop-opacity"]=F),p.push(A("stop",v+"",Q))}var Tt=rt(A(l,"",c,p)),xt=i.gradientCache,At=xt[Tt];At||(At=i.zrId+"-g"+i.gradientIdx++,xt[Tt]=At,c.id=At,i.defs[At]=A(l,At,c,p)),r[e]=(0,_t.m1)(At)}function Le(o,r,e,i){var x,s=o.style[e],l=o.getBoundingRect(),c={},f=s.repeat,p="no-repeat"===f,v="repeat-x"===f,m="repeat-y"===f;if((0,_t.Cv)(s)){var T=s.imageWidth,O=s.imageHeight,G=void 0,F=s.image;if((0,_.isString)(F)?G=F:Ye(F)?G=F.src:tr(F)&&(G=F.toDataURL()),typeof Image>"u"){var Q="Image width/height must been given explictly in svg-ssr renderer.";(0,_.assert)(T,Q),(0,_.assert)(O,Q)}else if(null==T||null==O){var ft=function(ee,oe){if(ee){var de=ee.elm,xe=T||oe.width,be=O||oe.height;"pattern"===ee.tag&&(v?(be=1,xe/=l.width):m&&(xe=1,be/=l.height)),ee.attrs.width=xe,ee.attrs.height=be,de&&(de.setAttribute("width",xe),de.setAttribute("height",be))}},Tt=(0,ht.Gq)(G,null,o,function(ee){p||ft(Nt,ee),ft(x,ee)});Tt&&Tt.width&&Tt.height&&(T=T||Tt.width,O=O||Tt.height)}x=A("image","img",{href:G,width:T,height:O}),c.width=T,c.height=O}else s.svgElement&&(x=(0,_.clone)(s.svgElement),c.width=s.svgWidth,c.height=s.svgHeight);if(x){var xt,At;p?xt=At=1:v?(At=1,xt=c.width/l.width):m?(xt=1,At=c.height/l.height):c.patternUnits="userSpaceOnUse",null!=xt&&!isNaN(xt)&&(c.width=xt),null!=At&&!isNaN(At)&&(c.height=At);var It=(0,_t.gA)(s);It&&(c.patternTransform=It);var Nt=A("pattern","",c,[x]),Gt=rt(Nt),Wt=i.patternCache,jt=Wt[Gt];jt||(jt=i.zrId+"-p"+i.patternIdx++,Wt[Gt]=jt,c.id=jt,Nt=i.defs[jt]=A("pattern",jt,c,[x])),r[e]=(0,_t.m1)(jt)}}function Kt(o,r,e){var i=e.clipPathCache,s=e.defs,l=i[o.id];if(!l){var c={id:l=e.zrId+"-c"+e.clipPathIdx++};i[o.id]=l,s[l]=A("clipPath",l,c,[Cr(o,e)])}r["clip-path"]=(0,_t.m1)(l)}function ne(o){return document.createTextNode(o)}function Xt(o,r,e){o.insertBefore(r,e)}function Te(o,r){o.removeChild(r)}function ye(o,r){o.appendChild(r)}function Ne(o){return o.parentNode}function Qe(o){return o.nextSibling}function Ir(o,r){o.textContent=r}var qi=A("","");function fa(o){return void 0===o}function Mi(o){return void 0!==o}function Wo(o,r,e){for(var i={},s=r;s<=e;++s){var l=o[s].key;void 0!==l&&(i[l]=s)}return i}function To(o,r){return o.tag===r.tag&&o.key===r.key}function ya(o){var r,e=o.children,i=o.tag;if(Mi(i)){var s=o.elm=M(i);if(vo(qi,o),(0,_.isArray)(e))for(r=0;r<e.length;++r){var l=e[r];null!=l&&ye(s,ya(l))}else Mi(o.text)&&!(0,_.isObject)(o.text)&&ye(s,ne(o.text))}else o.elm=ne(o.text);return o.elm}function ti(o,r,e,i,s){for(;i<=s;++i){var l=e[i];null!=l&&Xt(o,ya(l),r)}}function yi(o,r,e,i){for(;e<=i;++e){var s=r[e];null!=s&&(Mi(s.tag)?Te(Ne(s.elm),s.elm):Te(o,s.elm))}}function vo(o,r){var e,i=r.elm,s=o&&o.attrs||{},l=r.attrs||{};if(s!==l){for(e in l){var c=l[e];s[e]!==c&&(!0===c?i.setAttribute(e,""):!1===c?i.removeAttribute(e):120!==e.charCodeAt(0)?i.setAttribute(e,c):"xmlns:xlink"===e||"xmlns"===e?i.setAttributeNS("http://www.w3.org/2000/xmlns/",e,c):58===e.charCodeAt(3)?i.setAttributeNS("http://www.w3.org/XML/1998/namespace",e,c):58===e.charCodeAt(5)?i.setAttributeNS(C,e,c):i.setAttribute(e,c))}for(e in s)e in l||i.removeAttribute(e)}}function go(o,r){var e=r.elm=o.elm,i=o.children,s=r.children;o!==r&&(vo(o,r),fa(r.text)?Mi(i)&&Mi(s)?i!==s&&function $l(o,r,e){for(var x,T,O,i=0,s=0,l=r.length-1,c=r[0],f=r[l],p=e.length-1,v=e[0],m=e[p];i<=l&&s<=p;)null==c?c=r[++i]:null==f?f=r[--l]:null==v?v=e[++s]:null==m?m=e[--p]:To(c,v)?(go(c,v),c=r[++i],v=e[++s]):To(f,m)?(go(f,m),f=r[--l],m=e[--p]):To(c,m)?(go(c,m),Xt(o,c.elm,Qe(f.elm)),c=r[++i],m=e[--p]):To(f,v)?(go(f,v),Xt(o,f.elm,c.elm),f=r[--l],v=e[++s]):(fa(x)&&(x=Wo(r,i,l)),fa(T=x[v.key])||(O=r[T]).tag!==v.tag?Xt(o,ya(v),c.elm):(go(O,v),r[T]=void 0,Xt(o,O.elm,c.elm)),v=e[++s]);(i<=l||s<=p)&&(i>l?ti(o,null==e[p+1]?null:e[p+1].elm,e,s,p):yi(o,r,i,l))}(e,i,s):Mi(s)?(Mi(o.text)&&Ir(e,""),ti(e,null,s,0,s.length-1)):Mi(i)?yi(e,i,0,i.length-1):Mi(o.text)&&Ir(e,""):o.text!==r.text&&(Mi(i)&&yi(e,i,0,i.length-1),Ir(e,r.text)))}var Cs=D(6430),no=0;const Xl=function(){function o(r,e,i){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=e,this._opts=i=(0,_.extend)({},i),this.root=r,this._id="zr"+no++,this._oldVNode=lt(i.width,i.height),r&&!i.ssr){var s=this._viewport=document.createElement("div");s.style.cssText="position:relative;overflow:hidden";var l=this._svgDom=this._oldVNode.elm=M("svg");vo(null,this._oldVNode),s.appendChild(l),r.appendChild(s)}this.resize(i.width,i.height)}return o.prototype.getType=function(){return this.type},o.prototype.getViewportRoot=function(){return this._viewport},o.prototype.getViewportRootOffset=function(){var r=this.getViewportRoot();if(r)return{offsetLeft:r.offsetLeft||0,offsetTop:r.offsetTop||0}},o.prototype.getSvgDom=function(){return this._svgDom},o.prototype.refresh=function(){if(this.root){var r=this.renderToVNode({willUpdate:!0});r.attrs.style="position:absolute;left:0;top:0;user-select:none",function Fu(o,r){if(To(o,r))go(o,r);else{var e=o.elm,i=Ne(e);ya(r),null!==i&&(Xt(i,r.elm,Qe(e)),yi(i,[o],0,0))}}(this._oldVNode,r),this._oldVNode=r}},o.prototype.renderOneToVNode=function(r){return re(r,at(this._id))},o.prototype.renderToVNode=function(r){r=r||{};var e=this.storage.getDisplayList(!0),i=this._width,s=this._height,l=at(this._id);l.animation=r.animation,l.willUpdate=r.willUpdate,l.compress=r.compress;var c=[],f=this._bgVNode=function Co(o,r,e,i){var s;if(e&&"none"!==e)if(s=A("rect","bg",{width:o,height:r,x:"0",y:"0",id:"0"}),(0,_t.H3)(e))we({fill:e},s.attrs,"fill",i);else if((0,_t.R)(e))Le({style:{fill:e},dirty:_.noop,getBoundingRect:function(){return{width:o,height:r}}},s.attrs,"fill",i);else{var l=(0,_t.ut)(e),f=l.opacity;s.attrs.fill=l.color,f<1&&(s.attrs["fill-opacity"]=f)}return s}(i,s,this._backgroundColor,l);f&&c.push(f);var p=r.compress?null:this._mainVNode=A("g","main",{},[]);this._paintList(e,l,p?p.children:c),p&&c.push(p);var v=(0,_.map)((0,_.keys)(l.defs),function(T){return l.defs[T]});if(v.length&&c.push(A("defs","defs",{},v)),r.animation){var m=function ot(o,r,e){var i=(e=e||{}).newline?"\n":"",s=" {"+i,l=i+"}",c=(0,_.map)((0,_.keys)(o),function(p){return p+s+(0,_.map)((0,_.keys)(o[p]),function(v){return v+":"+o[p][v]+";"}).join(i)+l}).join(i),f=(0,_.map)((0,_.keys)(r),function(p){return"@keyframes "+p+s+(0,_.map)((0,_.keys)(r[p]),function(v){return v+s+(0,_.map)((0,_.keys)(r[p][v]),function(m){var x=r[p][v][m];return"d"===m&&(x='path("'+x+'")'),m+":"+x+";"}).join(i)+l}).join(i)+l}).join(i);return c||f?["<![CDATA[",c,f,"]]>"].join(i):""}(l.cssNodes,l.cssAnims,{newline:!0});if(m){var x=A("style","stl",{},[],m);c.push(x)}}return lt(i,s,c,r.useViewBox)},o.prototype.renderToString=function(r){return rt(this.renderToVNode({animation:(0,_.retrieve2)((r=r||{}).cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:(0,_.retrieve2)(r.useViewBox,!0)}),{newline:!0})},o.prototype.setBackgroundColor=function(r){this._backgroundColor=r},o.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},o.prototype._paintList=function(r,e,i){for(var f,p,s=r.length,l=[],c=0,v=0,m=0;m<s;m++){var x=r[m];if(!x.invisible){var T=x.__clipPaths,O=T&&T.length||0,G=p&&p.length||0,F=void 0;for(F=Math.max(O-1,G-1);F>=0&&(!T||!p||T[F]!==p[F]);F--);for(var Q=G-1;Q>F;Q--)f=l[--c-1];for(var ft=F+1;ft<O;ft++){var Tt={};Kt(T[ft],Tt,e);var xt=A("g","clip-g-"+v++,Tt,[]);(f?f.children:i).push(xt),l[c++]=xt,f=xt}p=T;var At=re(x,e);At&&(f?f.children:i).push(At)}}},o.prototype.resize=function(r,e){var i=this._opts,s=this.root,l=this._viewport;if(null!=r&&(i.width=r),null!=e&&(i.height=e),s&&l&&(l.style.display="none",r=(0,Cs.ap)(s,0,i),e=(0,Cs.ap)(s,1,i),l.style.display=""),this._width!==r||this._height!==e){if(this._width=r,this._height=e,l){var c=l.style;c.width=r+"px",c.height=e+"px"}if((0,_t.R)(this._backgroundColor))this.refresh();else{var f=this._svgDom;f&&(f.setAttribute("width",r),f.setAttribute("height",e));var p=this._bgVNode&&this._bgVNode.elm;p&&(p.setAttribute("width",r),p.setAttribute("height",e))}}},o.prototype.getWidth=function(){return this._width},o.prototype.getHeight=function(){return this._height},o.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},o.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},o.prototype.toDataURL=function(r){var e=this.renderToString(),i="data:image/svg+xml;";return r?(e=(0,_t.oF)(e))&&i+"base64,"+e:i+"charset=UTF-8,"+encodeURIComponent(e)},o}();var Re=D(8299),Fa=D(6382),rr=D(4263),Tn=D(5773),pr=D(4786);const Yr=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e){return(0,Fa.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.getLegendIcon=function(e){var i=new pr.Z,s=(0,Tn.th)("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);i.add(s),s.setStyle(e.lineStyle);var l=this.getData().getVisual("symbol"),c=this.getData().getVisual("symbolRotate"),f="none"===l?"circle":l,p=.8*e.itemHeight,v=(0,Tn.th)(f,(e.itemWidth-p)/2,(e.itemHeight-p)/2,p,p,e.itemStyle.fill);return i.add(v),v.setStyle(e.itemStyle),v.rotation=("inherit"===e.iconRotate?c:e.iconRotate||0)*Math.PI/180,v.setOrigin([e.itemWidth/2,e.itemHeight/2]),f.indexOf("empty")>-1&&(v.style.stroke=v.style.fill,v.style.fill="#fff",v.style.lineWidth=2),i},r.type="series.line",r.dependencies=["grid","polar"],r.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},r}(rr.Z);var he=D(3996),ur=D(2694),Fr=D(7166),sr=D(8786),Xo=D(4727);function _o(o,r){var e=o.mapDimensionsAll("defaultedLabel"),i=e.length;if(1===i){var s=(0,Xo.hk)(o,r,e[0]);return null!=s?s+"":null}if(i){for(var l=[],c=0;c<e.length;c++)l.push((0,Xo.hk)(o,r,e[c]));return l.join(" ")}}function Ms(o,r){var e=o.mapDimensionsAll("defaultedLabel");if(!(0,_.isArray)(r))return r+"";for(var i=[],s=0;s<e.length;s++){var l=o.getDimensionIndex(e[s]);l>=0&&i.push(r[l])}return i.join(" ")}var Or=D(8811);function En(o,r){this.parent.drift(o,r)}const xa=function(o){function r(e,i,s,l){var c=o.call(this)||this;return c.updateData(e,i,s,l),c}return(0,Re.ZT)(r,o),r.prototype._createSymbol=function(e,i,s,l,c){this.removeAll();var f=(0,Tn.th)(e,-1,-1,2,2,null,c);f.attr({z2:100,culling:!0,scaleX:l[0]/2,scaleY:l[1]/2}),f.drift=En,this._symbolType=e,this.add(f)},r.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},r.prototype.getSymbolType=function(){return this._symbolType},r.prototype.getSymbolPath=function(){return this.childAt(0)},r.prototype.highlight=function(){(0,sr.fD)(this.childAt(0))},r.prototype.downplay=function(){(0,sr.Mh)(this.childAt(0))},r.prototype.setZ=function(e,i){var s=this.childAt(0);s.zlevel=e,s.z=i},r.prototype.setDraggable=function(e,i){var s=this.childAt(0);s.draggable=e,s.cursor=!i&&e?"move":s.cursor},r.prototype.updateData=function(e,i,s,l){this.silent=!1;var c=e.getItemVisual(i,"symbol")||"circle",f=e.hostModel,p=r.getSymbolSize(e,i),v=c!==this._symbolType,m=l&&l.disableAnimation;if(v){var x=e.getItemVisual(i,"symbolKeepAspect");this._createSymbol(c,e,i,p,x)}else{(T=this.childAt(0)).silent=!1;var O={scaleX:p[0]/2,scaleY:p[1]/2};m?T.attr(O):he.D(T,O,f,i),(0,he.Zi)(T)}if(this._updateCommon(e,i,p,s,l),v){var T=this.childAt(0);m||(O={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:T.style.opacity}},T.scaleX=T.scaleY=0,T.style.opacity=0,he.KZ(T,O,f,i))}m&&this.childAt(0).stopAnimation("leave")},r.prototype._updateCommon=function(e,i,s,l,c){var v,m,x,T,O,G,F,Q,ft,f=this.childAt(0),p=e.hostModel;if(l&&(v=l.emphasisItemStyle,m=l.blurItemStyle,x=l.selectItemStyle,T=l.focus,O=l.blurScope,F=l.labelStatesModels,Q=l.hoverScale,ft=l.cursorStyle,G=l.emphasisDisabled),!l||e.hasItemOption){var Tt=l&&l.itemModel?l.itemModel:e.getItemModel(i),xt=Tt.getModel("emphasis");v=xt.getModel("itemStyle").getItemStyle(),x=Tt.getModel(["select","itemStyle"]).getItemStyle(),m=Tt.getModel(["blur","itemStyle"]).getItemStyle(),T=xt.get("focus"),O=xt.get("blurScope"),G=xt.get("disabled"),F=(0,Or.k3)(Tt),Q=xt.getShallow("scale"),ft=Tt.getShallow("cursor")}var At=e.getItemVisual(i,"symbolRotate");f.attr("rotation",(At||0)*Math.PI/180||0);var It=(0,Tn.Cq)(e.getItemVisual(i,"symbolOffset"),s);It&&(f.x=It[0],f.y=It[1]),ft&&f.attr("cursor",ft);var Nt=e.getItemVisual(i,"style"),Gt=Nt.fill;if(f instanceof gt.ZP){var Wt=f.style;f.useStyle((0,_.extend)({image:Wt.image,x:Wt.x,y:Wt.y,width:Wt.width,height:Wt.height},Nt))}else f.useStyle(f.__isEmptyBrush?(0,_.extend)({},Nt):Nt),f.style.decal=null,f.setColor(Gt,c&&c.symbolInnerColor),f.style.strokeNoScale=!0;var jt=e.getItemVisual(i,"liftZ"),ee=this._z2;null!=jt?null==ee&&(this._z2=f.z2,f.z2+=jt):null!=ee&&(f.z2=ee,this._z2=null);var oe=c&&c.useNameLabel;(0,Or.ni)(f,F,{labelFetcher:p,labelDataIndex:i,defaultText:function de(Ae){return oe?e.getName(Ae):_o(e,Ae)},inheritColor:Gt,defaultOpacity:Nt.opacity}),this._sizeX=s[0]/2,this._sizeY=s[1]/2;var xe=f.ensureState("emphasis");xe.style=v,f.ensureState("select").style=x,f.ensureState("blur").style=m;var be=null==Q||!0===Q?Math.max(1.1,3/this._sizeY):isFinite(Q)&&Q>0?+Q:1;xe.scaleX=this._sizeX*be,xe.scaleY=this._sizeY*be,this.setSymbolScale(1),(0,sr.k5)(this,T,O,G)},r.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},r.prototype.fadeOut=function(e,i,s){var l=this.childAt(0),c=(0,Fr.A)(this).dataIndex,f=s&&s.animation;if(this.silent=l.silent=!0,s&&s.fadeLabel){var p=l.getTextContent();p&&he.bX(p,{style:{opacity:0}},i,{dataIndex:c,removeOpt:f,cb:function(){l.removeTextContent()}})}else l.removeTextContent();he.bX(l,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:c,cb:e,removeOpt:f})},r.getSymbolSize=function(e,i){return(0,Tn.zp)(e.getItemVisual(i,"symbolSize"))},r}(pr.Z);function Sa(o,r,e,i){return r&&!isNaN(r[0])&&!isNaN(r[1])&&!(i.isIgnore&&i.isIgnore(e))&&!(i.clipShape&&!i.clipShape.contain(r[0],r[1]))&&"none"!==o.getItemVisual(e,"symbol")}function zn(o){return null!=o&&!(0,_.isObject)(o)&&(o={isIgnore:o}),o||{}}function Mo(o){var r=o.hostModel,e=r.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:r.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:r.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:(0,Or.k3)(r),cursorStyle:r.get("cursor")}}const ka=function(){function o(r){this.group=new pr.Z,this._SymbolCtor=r||xa}return o.prototype.updateData=function(r,e){this._progressiveEls=null,e=zn(e);var i=this.group,s=r.hostModel,l=this._data,c=this._SymbolCtor,f=e.disableAnimation,p=Mo(r),v={disableAnimation:f},m=e.getSymbolPoint||function(x){return r.getItemLayout(x)};l||i.removeAll(),r.diff(l).add(function(x){var T=m(x);if(Sa(r,T,x,e)){var O=new c(r,x,p,v);O.setPosition(T),r.setItemGraphicEl(x,O),i.add(O)}}).update(function(x,T){var O=l.getItemGraphicEl(T),G=m(x);if(Sa(r,G,x,e)){var F=r.getItemVisual(x,"symbol")||"circle",Q=O&&O.getSymbolType&&O.getSymbolType();if(!O||Q&&Q!==F)i.remove(O),(O=new c(r,x,p,v)).setPosition(G);else{O.updateData(r,x,p,v);var ft={x:G[0],y:G[1]};f?O.attr(ft):he.D(O,ft,s)}i.add(O),r.setItemGraphicEl(x,O)}else i.remove(O)}).remove(function(x){var T=l.getItemGraphicEl(x);T&&T.fadeOut(function(){i.remove(T)},s)}).execute(),this._getSymbolPoint=m,this._data=r},o.prototype.updateLayout=function(){var r=this,e=this._data;e&&e.eachItemGraphicEl(function(i,s){var l=r._getSymbolPoint(s);i.setPosition(l),i.markRedraw()})},o.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=Mo(r),this._data=null,this.group.removeAll()},o.prototype.incrementalUpdate=function(r,e,i){function s(p){p.isGroup||(p.incremental=!0,p.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],i=zn(i);for(var l=r.start;l<r.end;l++){var c=e.getItemLayout(l);if(Sa(e,c,l,i)){var f=new this._SymbolCtor(e,l,this._seriesScope);f.traverse(s),f.setPosition(c),this.group.add(f),e.setItemGraphicEl(l,f),this._progressiveEls.push(f)}}},o.prototype.eachRendered=function(r){ur.traverseElements(this._progressiveEls||this.group,r)},o.prototype.remove=function(r){var e=this.group,i=this._data;i&&r?i.eachItemGraphicEl(function(s){s.fadeOut(function(){e.remove(s)},i.hostModel)}):e.removeAll()},o}();var za=D(3593);function ta(o,r,e){var i=o.getBaseAxis(),s=o.getOtherAxis(i),l=function On(o,r){var e=0,i=o.scale.getExtent();return"start"===r?e=i[0]:"end"===r?e=i[1]:(0,_.isNumber)(r)&&!isNaN(r)?e=r:i[0]>0?e=i[0]:i[1]<0&&(e=i[1]),e}(s,e),c=i.dim,f=s.dim,p=r.mapDimension(f),v=r.mapDimension(c),m="x"===f||"radius"===f?1:0,x=(0,_.map)(o.dimensions,function(G){return r.mapDimension(G)}),T=!1,O=r.getCalculationInfo("stackResultDimension");return(0,za.M)(r,x[0])&&(T=!0,x[0]=O),(0,za.M)(r,x[1])&&(T=!0,x[1]=O),{dataDimsForPoint:x,valueStart:l,valueAxisDim:f,baseAxisDim:c,stacked:!!T,valueDim:p,baseDim:v,baseDataOffset:m,stackedOverDimension:r.getCalculationInfo("stackedOverDimension")}}function Ni(o,r,e,i){var s=NaN;o.stacked&&(s=e.get(e.getCalculationInfo("stackedOverDimension"),i)),isNaN(s)&&(s=o.valueStart);var l=o.baseDataOffset,c=[];return c[l]=e.get(o.baseDim,i),c[1-l]=s,r.dataToPoint(c)}var ea=D(2448),xi=D(8481),dr=D(1617),kr=D(6846),Mr=Math.min,Un=Math.max;function un(o,r){return isNaN(o)||isNaN(r)}function dn(o,r,e,i,s,l,c,f,p){for(var v,m,x,T,O,G,F=e,Q=0;Q<i;Q++){var ft=r[2*F],Tt=r[2*F+1];if(F>=s||F<0)break;if(un(ft,Tt)){if(p){F+=l;continue}break}if(F===e)o[l>0?"moveTo":"lineTo"](ft,Tt),x=ft,T=Tt;else{var xt=ft-v,At=Tt-m;if(xt*xt+At*At<.5){F+=l;continue}if(c>0){for(var It=F+l,Nt=r[2*It],Gt=r[2*It+1];Nt===ft&&Gt===Tt&&Q<i;)Q++,Nt=r[2*(It+=l)],Gt=r[2*It+1],xt=(ft=r[2*(F+=l)])-v,At=(Tt=r[2*F+1])-m;var Wt=Q+1;if(p)for(;un(Nt,Gt)&&Wt<i;)Wt++,Nt=r[2*(It+=l)],Gt=r[2*It+1];var jt=.5,ee=0,oe=0,de=void 0,xe=void 0;if(Wt>=i||un(Nt,Gt))O=ft,G=Tt;else{ee=Nt-v,oe=Gt-m;var be=ft-v,Ae=Nt-ft,ke=Tt-m,Je=Gt-Tt,$e=void 0,fr=void 0;if("x"===f){var wr=ee>0?1:-1;O=ft-wr*($e=Math.abs(be))*c,G=Tt,de=ft+wr*(fr=Math.abs(Ae))*c,xe=Tt}else if("y"===f){var Dr=oe>0?1:-1;O=ft,G=Tt-Dr*($e=Math.abs(ke))*c,de=ft,xe=Tt+Dr*(fr=Math.abs(Je))*c}else $e=Math.sqrt(be*be+ke*ke),O=ft-ee*c*(1-(jt=(fr=Math.sqrt(Ae*Ae+Je*Je))/(fr+$e))),G=Tt-oe*c*(1-jt),xe=Tt+oe*c*jt,de=Mr(de=ft+ee*c*jt,Un(Nt,ft)),xe=Mr(xe,Un(Gt,Tt)),de=Un(de,Mr(Nt,ft)),G=Tt-(oe=(xe=Un(xe,Mr(Gt,Tt)))-Tt)*$e/fr,O=Mr(O=ft-(ee=de-ft)*$e/fr,Un(v,ft)),G=Mr(G,Un(m,Tt)),de=ft+(ee=ft-(O=Un(O,Mr(v,ft))))*fr/$e,xe=Tt+(oe=Tt-(G=Un(G,Mr(m,Tt))))*fr/$e}o.bezierCurveTo(x,T,O,G,ft,Tt),x=de,T=xe}else o.lineTo(ft,Tt)}v=ft,m=Tt,F+=l}return Q}var tn=function o(){this.smooth=0,this.smoothConstraint=!0},Hn=function(o){function r(e){var i=o.call(this,e)||this;return i.type="ec-polyline",i}return(0,Re.ZT)(r,o),r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new tn},r.prototype.buildPath=function(e,i){var s=i.points,l=0,c=s.length/2;if(i.connectNulls){for(;c>0&&un(s[2*c-2],s[2*c-1]);c--);for(;l<c&&un(s[2*l],s[2*l+1]);l++);}for(;l<c;)l+=dn(e,s,l,c,c,1,i.smooth,i.smoothMonotone,i.connectNulls)+1},r.prototype.getPointOn=function(e,i){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var f,p,l=this.path.data,c=ct.Z.CMD,v="x"===i,m=[],x=0;x<l.length;){var O=void 0,G=void 0,F=void 0,Q=void 0,ft=void 0,Tt=void 0,xt=void 0;switch(l[x++]){case c.M:f=l[x++],p=l[x++];break;case c.L:if(O=l[x++],G=l[x++],(xt=v?(e-f)/(O-f):(e-p)/(G-p))<=1&&xt>=0){var At=v?(G-p)*xt+p:(O-f)*xt+f;return v?[e,At]:[At,e]}f=O,p=G;break;case c.C:O=l[x++],G=l[x++],F=l[x++],Q=l[x++],ft=l[x++],Tt=l[x++];var It=v?(0,kr.kD)(f,O,F,ft,e,m):(0,kr.kD)(p,G,Q,Tt,e,m);if(It>0)for(var Nt=0;Nt<It;Nt++){var Gt=m[Nt];if(Gt<=1&&Gt>=0)return At=v?(0,kr.af)(p,G,Q,Tt,Gt):(0,kr.af)(f,O,F,ft,Gt),v?[e,At]:[At,e]}f=ft,p=Tt}}},r}(mt.ZP),Ps=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r}(tn),bo=function(o){function r(e){var i=o.call(this,e)||this;return i.type="ec-polygon",i}return(0,Re.ZT)(r,o),r.prototype.getDefaultShape=function(){return new Ps},r.prototype.buildPath=function(e,i){var s=i.points,l=i.stackedOnPoints,c=0,f=s.length/2,p=i.smoothMonotone;if(i.connectNulls){for(;f>0&&un(s[2*f-2],s[2*f-1]);f--);for(;c<f&&un(s[2*c],s[2*c+1]);c++);}for(;c<f;){var v=dn(e,s,c,f,f,1,i.smooth,p,i.connectNulls);dn(e,l,c+v-1,v,f,-1,i.stackedOnSmooth,p,i.connectNulls),c+=v+1,e.closePath()}},r}(mt.ZP),_r=D(4023),Br=D(4528),bi=D(785),Be=D(8301);function nl(o,r,e,i,s){var l=o.getArea(),c=l.x,f=l.y,p=l.width,v=l.height,m=e.get(["lineStyle","width"])||2;c-=m/2,f-=m/2,p+=m,v+=m,c=Math.floor(c),p=Math.round(p);var x=new Br.Z({shape:{x:c,y:f,width:p,height:v}});if(r){var T=o.getBaseAxis(),O=T.isHorizontal(),G=T.inverse;O?(G&&(x.shape.x+=p),x.shape.width=0):(G||(x.shape.y+=v),x.shape.height=0);var F=(0,_.isFunction)(s)?function(Q){s(Q,x)}:null;he.KZ(x,{shape:{width:p,height:v,x:c,y:f}},e,null,i,F)}return x}function da(o,r,e){var i=o.getArea(),s=(0,Be.NM)(i.r0,1),l=(0,Be.NM)(i.r,1),c=new bi.C({shape:{cx:(0,Be.NM)(o.cx,1),cy:(0,Be.NM)(o.cy,1),r0:s,r:l,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return r&&("angle"===o.getBaseAxis().dim?c.shape.endAngle=i.startAngle:c.shape.r=s,he.KZ(c,{shape:{endAngle:i.endAngle,r:l}},e)),c}function mo(o,r,e,i,s){return o?"polar"===o.type?da(o,r,e):"cartesian2d"===o.type?nl(o,r,e,i,s):null:null}function Oa(o,r){return o.type===r}var Mn=D(2977),oi=D(754);function Ko(o,r){if(o.length===r.length){for(var e=0;e<o.length;e++)if(o[e]!==r[e])return;return!0}}function Ln(o){for(var r=1/0,e=1/0,i=-1/0,s=-1/0,l=0;l<o.length;){var c=o[l++],f=o[l++];isNaN(c)||(r=Math.min(c,r),i=Math.max(c,i)),isNaN(f)||(e=Math.min(f,e),s=Math.max(f,s))}return[[r,e],[i,s]]}function Fn(o,r){var e=Ln(o),i=e[0],s=e[1],l=Ln(r),c=l[0],f=l[1];return Math.max(Math.abs(i[0]-c[0]),Math.abs(i[1]-c[1]),Math.abs(s[0]-f[0]),Math.abs(s[1]-f[1]))}function Po(o){return _.isNumber(o)?o:o?.5:0}function Ea(o,r,e,i){var s=r.getBaseAxis(),l="x"===s.dim||"radius"===s.dim?0:1,c=[],f=0,p=[],v=[],m=[],x=[];if(i){for(f=0;f<o.length;f+=2)!isNaN(o[f])&&!isNaN(o[f+1])&&x.push(o[f],o[f+1]);o=x}for(f=0;f<o.length-2;f+=2)switch(m[0]=o[f+2],m[1]=o[f+3],v[0]=o[f],v[1]=o[f+1],c.push(v[0],v[1]),e){case"end":p[l]=m[l],p[1-l]=v[1-l],c.push(p[0],p[1]);break;case"middle":var O=[];p[l]=O[l]=(v[l]+m[l])/2,p[1-l]=v[1-l],O[1-l]=m[1-l],c.push(p[0],p[1]),c.push(O[0],O[1]);break;default:p[l]=v[l],p[1-l]=m[1-l],c.push(p[0],p[1])}return c.push(o[f++],o[f++]),c}function zr(o,r){return isNaN(o)||isNaN(r)}function Ua(o,r){return[o[2*r],o[2*r+1]]}function io(o){if(o.get(["endLabel","show"]))return!0;for(var r=0;r<sr.L1.length;r++)if(o.get([sr.L1[r],"endLabel","show"]))return!0;return!1}function Oo(o,r,e,i){if(Oa(r,"cartesian2d")){var s=i.getModel("endLabel"),l=s.get("valueAnimation"),c=i.getData(),f={lastFrameIndex:0},p=io(i)?function(O,G){o._endLabelOnDuring(O,G,c,f,l,s,r)}:null,v=r.getBaseAxis().isHorizontal(),m=nl(r,e,i,function(){var O=o._endLabel;O&&e&&null!=f.originalX&&O.attr({x:f.originalX,y:f.originalY})},p);if(!i.get("clip",!0)){var x=m.shape,T=Math.max(x.width,x.height);v?(x.y-=T,x.height+=2*T):(x.x-=T,x.width+=2*T)}return p&&p(1,m),m}return da(r,e,i)}const qo=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.init=function(){var e=new pr.Z,i=new ka;this.group.add(i.group),this._symbolDraw=i,this._lineGroup=e},r.prototype.render=function(e,i,s){var l=this,c=e.coordinateSystem,f=this.group,p=e.getData(),v=e.getModel("lineStyle"),m=e.getModel("areaStyle"),x=p.getLayout("points")||[],T="polar"===c.type,O=this._coordSys,G=this._symbolDraw,F=this._polyline,Q=this._polygon,ft=this._lineGroup,Tt=e.get("animation"),xt=!m.isEmpty(),At=m.get("origin"),It=ta(c,p,At),Nt=xt&&function As(o,r,e){if(!e.valueDim)return[];for(var i=r.count(),s=(0,ea.o)(2*i),l=0;l<i;l++){var c=Ni(e,o,r,l);s[2*l]=c[0],s[2*l+1]=c[1]}return s}(c,p,It),Gt=e.get("showSymbol"),Wt=e.get("connectNulls"),jt=Gt&&!T&&function il(o,r,e){var i=o.get("showAllSymbol"),s="auto"===i;if(!i||s){var l=e.getAxesByScale("ordinal")[0];if(l&&(!s||!function vn(o,r){var e=o.getExtent(),i=Math.abs(e[1]-e[0])/o.scale.count();isNaN(i)&&(i=0);for(var s=r.count(),l=Math.max(1,Math.round(s/5)),c=0;c<s;c+=l)if(1.5*xa.getSymbolSize(r,c)[o.isHorizontal()?1:0]>i)return!1;return!0}(l,r))){var c=r.mapDimension(l.dim),f={};return _.each(l.getViewLabels(),function(p){var v=l.scale.getRawOrdinalNumber(p.tickValue);f[v]=1}),function(p){return!f.hasOwnProperty(r.get(c,p))}}}}(e,p,c),ee=this._data;ee&&ee.eachItemGraphicEl(function(Qn,Cn){Qn.__temp&&(f.remove(Qn),ee.setItemGraphicEl(Cn,null))}),Gt||G.remove(),f.add(ft);var de,oe=!T&&e.get("step");c&&c.getArea&&e.get("clip",!0)&&(null!=(de=c.getArea()).width?(de.x-=.1,de.y-=.1,de.width+=.2,de.height+=.2):de.r0&&(de.r0-=.5,de.r+=.5)),this._clipShapeForSymbol=de;var xe=function jo(o,r,e){var i=o.getVisual("visualMeta");if(i&&i.length&&o.count()&&"cartesian2d"===r.type){for(var s,l,c=i.length-1;c>=0;c--){var f=o.getDimensionInfo(i[c].dimension);if("x"===(s=f&&f.coordDim)||"y"===s){l=i[c];break}}if(l){var p=r.getAxis(s),v=_.map(l.stops,function(xt){return{coord:p.toGlobalCoord(p.dataToCoord(xt.value)),color:xt.color}}),m=v.length,x=l.outerColors.slice();m&&v[0].coord>v[m-1].coord&&(v.reverse(),x.reverse());var T=function Ao(o,r){var s,l,e=[],i=o.length;function c(m,x,T){var O=m.coord;return{coord:T,color:(0,oi.lerp)((T-O)/(x.coord-O),[m.color,x.color])}}for(var f=0;f<i;f++){var p=o[f],v=p.coord;if(v<0)s=p;else{if(v>r){l?e.push(c(l,p,r)):s&&e.push(c(s,p,0),c(s,p,r));break}s&&(e.push(c(s,p,0)),s=null),e.push(p),l=p}}return e}(v,"x"===s?e.getWidth():e.getHeight()),O=T.length;if(!O&&m)return v[0].coord<0?x[1]?x[1]:v[m-1].color:x[0]?x[0]:v[0].color;var F=T[0].coord-10,Q=T[O-1].coord+10,ft=Q-F;if(ft<.001)return"transparent";_.each(T,function(xt){xt.offset=(xt.coord-F)/ft}),T.push({offset:O?T[O-1].offset:.5,color:x[1]||"transparent"}),T.unshift({offset:O?T[0].offset:.5,color:x[0]||"transparent"});var Tt=new xi.Z(0,0,0,0,T,!0);return Tt[s]=F,Tt[s+"2"]=Q,Tt}}}(p,c,s)||p.getVisual("style")[p.getVisual("drawType")];if(F&&O.type===c.type&&oe===this._step){xt&&!Q?Q=this._newPolygon(x,Nt):Q&&!xt&&(ft.remove(Q),Q=this._polygon=null),T||this._initOrUpdateEndLabel(e,c,(0,Mn.Lz)(xe));var be=ft.getClipPath();if(be){var Ae=Oo(this,c,!1,e);he.KZ(be,{shape:Ae.shape},e)}else ft.setClipPath(Oo(this,c,!0,e));Gt&&G.updateData(p,{isIgnore:jt,clipShape:de,disableAnimation:!0,getSymbolPoint:function(Qn){return[x[2*Qn],x[2*Qn+1]]}}),(!Ko(this._stackedOnPoints,Nt)||!Ko(this._points,x))&&(Tt?this._doUpdateAnimation(p,Nt,c,s,oe,At,Wt):(oe&&(x=Ea(x,c,oe,Wt),Nt&&(Nt=Ea(Nt,c,oe,Wt))),F.setShape({points:x}),Q&&Q.setShape({points:x,stackedOnPoints:Nt})))}else Gt&&G.updateData(p,{isIgnore:jt,clipShape:de,disableAnimation:!0,getSymbolPoint:function(Qn){return[x[2*Qn],x[2*Qn+1]]}}),Tt&&this._initSymbolLabelAnimation(p,c,de),oe&&(x=Ea(x,c,oe,Wt),Nt&&(Nt=Ea(Nt,c,oe,Wt))),F=this._newPolyline(x),xt?Q=this._newPolygon(x,Nt):Q&&(ft.remove(Q),Q=this._polygon=null),T||this._initOrUpdateEndLabel(e,c,(0,Mn.Lz)(xe)),ft.setClipPath(Oo(this,c,!0,e));var ke=e.getModel("emphasis"),Je=ke.get("focus"),$e=ke.get("blurScope"),fr=ke.get("disabled");F.useStyle(_.defaults(v.getLineStyle(),{fill:"none",stroke:xe,lineJoin:"bevel"})),(0,sr.WO)(F,e,"lineStyle"),F.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"])&&(F.getState("emphasis").style.lineWidth=+F.style.lineWidth+1),(0,Fr.A)(F).seriesIndex=e.seriesIndex,(0,sr.k5)(F,Je,$e,fr);var Dr=Po(e.get("smooth")),cn=e.get("smoothMonotone");if(F.setShape({smooth:Dr,smoothMonotone:cn,connectNulls:Wt}),Q){var ln=p.getCalculationInfo("stackedOnSeries"),rn=0;Q.useStyle(_.defaults(m.getAreaStyle(),{fill:xe,opacity:.7,lineJoin:"bevel",decal:p.getVisual("style").decal})),ln&&(rn=Po(ln.get("smooth"))),Q.setShape({smooth:Dr,stackedOnSmooth:rn,smoothMonotone:cn,connectNulls:Wt}),(0,sr.WO)(Q,e,"areaStyle"),(0,Fr.A)(Q).seriesIndex=e.seriesIndex,(0,sr.k5)(Q,Je,$e,fr)}var Pn=function(Qn){l._changePolyState(Qn)};p.eachItemGraphicEl(function(Qn){Qn&&(Qn.onHoverStateChange=Pn)}),this._polyline.onHoverStateChange=Pn,this._data=p,this._coordSys=c,this._stackedOnPoints=Nt,this._points=x,this._step=oe,this._valueOrigin=At,e.get("triggerLineEvent")&&(this.packEventData(e,F),Q&&this.packEventData(e,Q))},r.prototype.packEventData=function(e,i){(0,Fr.A)(i).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},r.prototype.highlight=function(e,i,s,l){var c=e.getData(),f=dr.gO(c,l);if(this._changePolyState("emphasis"),!(f instanceof Array)&&null!=f&&f>=0){var p=c.getLayout("points"),v=c.getItemGraphicEl(f);if(!v){var m=p[2*f],x=p[2*f+1];if(isNaN(m)||isNaN(x)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(m,x))return;var T=e.get("zlevel")||0,O=e.get("z")||0;(v=new xa(c,f)).x=m,v.y=x,v.setZ(T,O);var G=v.getSymbolPath().getTextContent();G&&(G.zlevel=T,G.z=O,G.z2=this._polyline.z2+1),v.__temp=!0,c.setItemGraphicEl(f,v),v.stopSymbolAnimation(!0),this.group.add(v)}v.highlight()}else _r.Z.prototype.highlight.call(this,e,i,s,l)},r.prototype.downplay=function(e,i,s,l){var c=e.getData(),f=dr.gO(c,l);if(this._changePolyState("normal"),null!=f&&f>=0){var p=c.getItemGraphicEl(f);p&&(p.__temp?(c.setItemGraphicEl(f,null),this.group.remove(p)):p.downplay())}else _r.Z.prototype.downplay.call(this,e,i,s,l)},r.prototype._changePolyState=function(e){var i=this._polygon;(0,sr.Gl)(this._polyline,e),i&&(0,sr.Gl)(i,e)},r.prototype._newPolyline=function(e){var i=this._polyline;return i&&this._lineGroup.remove(i),i=new Hn({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(i),this._polyline=i,i},r.prototype._newPolygon=function(e,i){var s=this._polygon;return s&&this._lineGroup.remove(s),s=new bo({shape:{points:e,stackedOnPoints:i},segmentIgnoreThreshold:2}),this._lineGroup.add(s),this._polygon=s,s},r.prototype._initSymbolLabelAnimation=function(e,i,s){var l,c,f=i.getBaseAxis(),p=f.inverse;"cartesian2d"===i.type?(l=f.isHorizontal(),c=!1):"polar"===i.type&&(l="angle"===f.dim,c=!0);var v=e.hostModel,m=v.get("animationDuration");_.isFunction(m)&&(m=m(null));var x=v.get("animationDelay")||0,T=_.isFunction(x)?x(null):x;e.eachItemGraphicEl(function(O,G){var F=O;if(F){var ft=void 0,Tt=void 0,xt=void 0;if(s)if(c){var At=s,It=i.pointToCoord([O.x,O.y]);l?(ft=At.startAngle,Tt=At.endAngle,xt=-It[1]/180*Math.PI):(ft=At.r0,Tt=At.r,xt=It[0])}else l?(ft=s.x,Tt=s.x+s.width,xt=O.x):(ft=s.y+s.height,Tt=s.y,xt=O.y);var Gt=Tt===ft?0:(xt-ft)/(Tt-ft);p&&(Gt=1-Gt);var Wt=_.isFunction(x)?x(G):m*Gt+T,jt=F.getSymbolPath(),ee=jt.getTextContent();F.attr({scaleX:0,scaleY:0}),F.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:Wt}),ee&&ee.animateFrom({style:{opacity:0}},{duration:300,delay:Wt}),jt.disableLabelAnimation=!0}})},r.prototype._initOrUpdateEndLabel=function(e,i,s){var l=e.getModel("endLabel");if(io(e)){var c=e.getData(),f=this._polyline,p=c.getLayout("points");if(!p)return f.removeTextContent(),void(this._endLabel=null);var v=this._endLabel;v||((v=this._endLabel=new Se.ZP({z2:200})).ignoreClip=!0,f.setTextContent(this._endLabel),f.disableLabelAnimation=!0);var m=function zi(o){for(var r=o.length/2;r>0&&zr(o[2*r-2],o[2*r-1]);r--);return r-1}(p);m>=0&&((0,Or.ni)(f,(0,Or.k3)(e,"endLabel"),{inheritColor:s,labelFetcher:e,labelDataIndex:m,defaultText:function(x,T,O){return null!=O?Ms(c,O):_o(c,x)},enableTextSetter:!0},function Qo(o,r){var e=r.getBaseAxis(),i=e.isHorizontal(),s=e.inverse,l=i?s?"right":"left":"center",c=i?"middle":s?"top":"bottom";return{normal:{align:o.get("align")||l,verticalAlign:o.get("verticalAlign")||c}}}(l,i)),f.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},r.prototype._endLabelOnDuring=function(e,i,s,l,c,f,p){var v=this._endLabel,m=this._polyline;if(v){e<1&&null==l.originalX&&(l.originalX=v.x,l.originalY=v.y);var x=s.getLayout("points"),T=s.hostModel,O=T.get("connectNulls"),G=f.get("precision"),F=f.get("distance")||0,Q=p.getBaseAxis(),ft=Q.isHorizontal(),Tt=Q.inverse,xt=i.shape,At=Tt?ft?xt.x:xt.y+xt.height:ft?xt.x+xt.width:xt.y,It=(ft?F:0)*(Tt?-1:1),Nt=(ft?0:-F)*(Tt?-1:1),Gt=ft?"x":"y",Wt=function Jo(o,r,e){for(var l,c,i=o.length/2,s="x"===e?0:1,f=0,p=-1,v=0;v<i;v++)if(c=o[2*v+s],!isNaN(c)&&!isNaN(o[2*v+1-s])){if(0===v){l=c;continue}if(l<=r&&c>=r||l>=r&&c<=r){p=v;break}f=v,l=c}return{range:[f,p],t:(r-l)/(c-l)}}(x,At,Gt),jt=Wt.range,ee=jt[1]-jt[0],oe=void 0;if(ee>=1){if(ee>1&&!O){var de=Ua(x,jt[0]);v.attr({x:de[0]+It,y:de[1]+Nt}),c&&(oe=T.getRawValue(jt[0]))}else{(de=m.getPointOn(At,Gt))&&v.attr({x:de[0]+It,y:de[1]+Nt});var xe=T.getRawValue(jt[0]),be=T.getRawValue(jt[1]);c&&(oe=dr.pk(s,G,xe,be,Wt.t))}l.lastFrameIndex=jt[0]}else{var Ae=1===e||l.lastFrameIndex>0?jt[0]:0;de=Ua(x,Ae),c&&(oe=T.getRawValue(Ae)),v.attr({x:de[0]+It,y:de[1]+Nt})}c&&(0,Or.qA)(v).setLabelText(oe)}},r.prototype._doUpdateAnimation=function(e,i,s,l,c,f,p){var v=this._polyline,m=this._polygon,x=e.hostModel,T=function Yo(o,r,e,i,s,l,c,f){for(var p=function mr(o,r){var e=[];return r.diff(o).add(function(i){e.push({cmd:"+",idx:i})}).update(function(i,s){e.push({cmd:"=",idx:s,idx1:i})}).remove(function(i){e.push({cmd:"-",idx:i})}).execute(),e}(o,r),v=[],m=[],x=[],T=[],O=[],G=[],F=[],Q=ta(s,r,c),ft=o.getLayout("points")||[],Tt=r.getLayout("points")||[],xt=0;xt<p.length;xt++){var At=p[xt],It=!0,Nt=void 0,Gt=void 0;switch(At.cmd){case"=":var Wt=ft[Nt=2*At.idx],jt=ft[Nt+1],ee=Tt[Gt=2*At.idx1],oe=Tt[Gt+1];(isNaN(Wt)||isNaN(jt))&&(Wt=ee,jt=oe),v.push(Wt,jt),m.push(ee,oe),x.push(e[Nt],e[Nt+1]),T.push(i[Gt],i[Gt+1]),F.push(r.getRawIndex(At.idx1));break;case"+":var de=At.idx,xe=Q.dataDimsForPoint,be=s.dataToPoint([r.get(xe[0],de),r.get(xe[1],de)]);Gt=2*de,v.push(be[0],be[1]),m.push(Tt[Gt],Tt[Gt+1]);var Ae=Ni(Q,s,r,de);x.push(Ae[0],Ae[1]),T.push(i[Gt],i[Gt+1]),F.push(r.getRawIndex(de));break;case"-":It=!1}It&&(O.push(At),G.push(G.length))}G.sort(function(Pn,Qn){return F[Pn]-F[Qn]});var ke=v.length,Je=(0,ea.o)(ke),$e=(0,ea.o)(ke),fr=(0,ea.o)(ke),wr=(0,ea.o)(ke),Dr=[];for(xt=0;xt<G.length;xt++){var cn=G[xt],ln=2*xt,rn=2*cn;Je[ln]=v[rn],Je[ln+1]=v[rn+1],$e[ln]=m[rn],$e[ln+1]=m[rn+1],fr[ln]=x[rn],fr[ln+1]=x[rn+1],wr[ln]=T[rn],wr[ln+1]=T[rn+1],Dr[xt]=O[cn]}return{current:Je,next:$e,stackedOnCurrent:fr,stackedOnNext:wr,status:Dr}}(this._data,e,this._stackedOnPoints,i,this._coordSys,0,this._valueOrigin),O=T.current,G=T.stackedOnCurrent,F=T.next,Q=T.stackedOnNext;if(c&&(O=Ea(T.current,s,c,p),G=Ea(T.stackedOnCurrent,s,c,p),F=Ea(T.next,s,c,p),Q=Ea(T.stackedOnNext,s,c,p)),Fn(O,F)>3e3||m&&Fn(G,Q)>3e3)return v.stopAnimation(),v.setShape({points:F}),void(m&&(m.stopAnimation(),m.setShape({points:F,stackedOnPoints:Q})));v.shape.__points=T.current,v.shape.points=O;var ft={shape:{points:F}};T.current!==O&&(ft.shape.__points=T.next),v.stopAnimation(),he.D(v,ft,x),m&&(m.setShape({points:O,stackedOnPoints:G}),m.stopAnimation(),he.D(m,{shape:{stackedOnPoints:Q}},x),v.shape.points!==m.shape.points&&(m.shape.points=v.shape.points));for(var Tt=[],xt=T.status,At=0;At<xt.length;At++)if("="===xt[At].cmd){var Nt=e.getItemGraphicEl(xt[At].idx1);Nt&&Tt.push({el:Nt,ptIdx:At})}v.animators&&v.animators.length&&v.animators[0].during(function(){m&&m.dirtyShape();for(var Gt=v.shape.__points,Wt=0;Wt<Tt.length;Wt++){var jt=Tt[Wt].el,ee=2*Tt[Wt].ptIdx;jt.x=Gt[ee],jt.y=Gt[ee+1],jt.markRedraw()}})},r.prototype.remove=function(e){var i=this.group,s=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),s&&s.eachItemGraphicEl(function(l,c){l.__temp&&(i.remove(l),s.setItemGraphicEl(c,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},r.type="line",r}(_r.Z);var an=D(9104);function oo(o,r){return{seriesType:o,plan:(0,an.Z)(),reset:function(e){var i=e.getData(),s=e.coordinateSystem,c=r||e.pipelineContext.large;if(s){var f=(0,_.map)(s.dimensions,function(O){return i.mapDimension(O)}).slice(0,2),p=f.length,v=i.getCalculationInfo("stackResultDimension");(0,za.M)(i,f[0])&&(f[0]=v),(0,za.M)(i,f[1])&&(f[1]=v);var m=i.getStore(),x=i.getDimensionIndex(f[0]),T=i.getDimensionIndex(f[1]);return p&&{progress:function(O,G){for(var Q=c&&(0,ea.o)((O.end-O.start)*p),ft=[],Tt=[],xt=O.start,At=0;xt<O.end;xt++){var It=void 0;if(1===p){var Nt=m.get(x,xt);It=s.dataToPoint(Nt,null,Tt)}else ft[0]=m.get(x,xt),ft[1]=m.get(T,xt),It=s.dataToPoint(ft,null,Tt);c?(Q[At++]=It[0],Q[At++]=It[1]):G.setItemLayout(xt,It.slice())}c&&G.setLayout("points",Q)}}}}}}var so={average:function(o){for(var r=0,e=0,i=0;i<o.length;i++)isNaN(o[i])||(r+=o[i],e++);return 0===e?NaN:r/e},sum:function(o){for(var r=0,e=0;e<o.length;e++)r+=o[e]||0;return r},max:function(o){for(var r=-1/0,e=0;e<o.length;e++)o[e]>r&&(r=o[e]);return isFinite(r)?r:NaN},min:function(o){for(var r=1/0,e=0;e<o.length;e++)o[e]<r&&(r=o[e]);return isFinite(r)?r:NaN},nearest:function(o){return o[0]}},wa=function(o){return Math.round(o.length/2)};function Os(o){return{seriesType:o,reset:function(r,e,i){var s=r.getData(),l=r.get("sampling"),c=r.coordinateSystem,f=s.count();if(f>10&&"cartesian2d"===c.type&&l){var p=c.getBaseAxis(),v=c.getOtherAxis(p),m=p.getExtent(),x=i.getDevicePixelRatio(),T=Math.abs(m[1]-m[0])*(x||1),O=Math.round(f/T);if(isFinite(O)&&O>1){"lttb"===l&&r.setData(s.lttbDownSample(s.mapDimension(v.dim),1/O));var G=void 0;(0,_.isString)(l)?G=so[l]:(0,_.isFunction)(l)&&(G=l),G&&r.setData(s.downSample(s.mapDimension(v.dim),1/O,G,wa))}}}}}var Ui=D(8253),Ha=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e,i){return(0,Fa.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(e,i,s){var l=this.coordinateSystem;if(l&&l.clampData){var c=l.dataToPoint(l.clampData(e));if(s)(0,_.each)(l.getAxes(),function(x,T){if("category"===x.type){var O=x.getTicksCoords(),G=l.clampData(e)[T];i&&("x1"===i[T]||"y1"===i[T])&&(G+=1),G>O.length-1&&(G=O.length-1),G<0&&(G=0),O[G]&&(c[T]=x.toGlobalCoord(O[G].coord))}});else{var f=this.getData(),p=f.getLayout("offset"),v=f.getLayout("size"),m=l.getBaseAxis().isHorizontal()?0:1;c[m]+=p+v/2}return c}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(rr.Z);rr.Z.registerClass(Ha);const li=Ha;var Ii=D(6012);const ui=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(){return(0,Fa.Z)(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},r.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),i=this.get("largeThreshold");return i>e&&(e=i),e},r.prototype.brushSelector=function(e,i,s){return s.rect(i.getItemLayout(e))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=(0,Ii.ZL)(li.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}(li);var Si=D(4972),gn=function o(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0};const ji=function(o){function r(e){var i=o.call(this,e)||this;return i.type="sausage",i}return(0,Re.ZT)(r,o),r.prototype.getDefaultShape=function(){return new gn},r.prototype.buildPath=function(e,i){var s=i.cx,l=i.cy,c=Math.max(i.r0||0,0),f=Math.max(i.r,0),p=.5*(f-c),v=c+p,m=i.startAngle,x=i.endAngle,T=i.clockwise,O=2*Math.PI,G=T?x-m<O:m-x<O;G||(m=x-(T?O:-O));var F=Math.cos(m),Q=Math.sin(m),ft=Math.cos(x),Tt=Math.sin(x);G?(e.moveTo(F*c+s,Q*c+l),e.arc(F*v+s,Q*v+l,p,-Math.PI+m,m,!T)):e.moveTo(F*f+s,Q*f+l),e.arc(s,l,f,m,x,!T),e.arc(ft*v+s,Tt*v+l,p,x-2*Math.PI,x-Math.PI,!T),0!==c&&e.arc(s,l,c,x,m,T)},r}(mt.ZP);function ra(o,r,e){return r*Math.sin(o)*(e?-1:1)}function Nn(o,r,e){return r*Math.cos(o)*(e?1:-1)}var ts=Math.max,Eo=Math.min,Ri=function(o){function r(){var e=o.call(this)||this;return e.type=r.type,e._isFirstFrame=!0,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){this._model=e,this._removeOnRenderedListener(s),this._updateDrawMode(e);var c=e.get("coordinateSystem");("cartesian2d"===c||"polar"===c)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,i,s):this._renderNormal(e,i,s,l))},r.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},r.prototype.incrementalRender=function(e,i){this._progressiveEls=[],this._incrementalRenderLarge(e,i)},r.prototype.eachRendered=function(e){(0,ur.traverseElements)(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var i=e.pipelineContext.large;(null==this._isLargeDraw||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},r.prototype._renderNormal=function(e,i,s,l){var x,c=this.group,f=e.getData(),p=this._data,v=e.coordinateSystem,m=v.getBaseAxis();"cartesian2d"===v.type?x=m.isHorizontal():"polar"===v.type&&(x="angle"===m.dim);var T=e.isAnimationEnabled()?e:null,O=function Yl(o,r){var e=o.get("realtimeSort",!0),i=r.getBaseAxis();if(e&&"category"===i.type&&"cartesian2d"===r.type)return{baseAxis:i,otherAxis:r.getOtherAxis(i)}}(e,v);O&&this._enableRealtimeSort(O,f,s);var G=e.get("clip",!0)||O,F=function pa(o,r){var e=o.getArea&&o.getArea();if(Oa(o,"cartesian2d")){var i=o.getBaseAxis();if("category"!==i.type||!i.onBand){var s=r.getLayout("bandWidth");i.isHorizontal()?(e.x-=s,e.width+=2*s):(e.y-=s,e.height+=2*s)}}return e}(v,f);c.removeClipPath();var Q=e.get("roundCap",!0),ft=e.get("showBackground",!0),Tt=e.getModel("backgroundStyle"),xt=Tt.get("borderRadius")||0,At=[],It=this._backgroundEls,Nt=l&&l.isInitSort,Gt=l&&"changeAxisOrder"===l.type;function Wt(oe){var de=ws[v.type](f,oe),xe=function Ls(o,r,e){return new("polar"===o.type?bi.C:Br.Z)({shape:yo(r,e,o),silent:!0,z2:0})}(v,x,de);return xe.useStyle(Tt.getItemStyle()),"cartesian2d"===v.type&&xe.setShape("r",xt),At[oe]=xe,xe}f.diff(p).add(function(oe){var de=f.getItemModel(oe),xe=ws[v.type](f,oe,de);if(ft&&Wt(oe),f.hasValue(oe)&&es[v.type](xe)){var be=!1;G&&(be=Wa[v.type](F,xe));var Ae=Xn[v.type](e,f,oe,xe,x,T,m.model,!1,Q);O&&(Ae.forceLabelAnimation=!0),ul(Ae,f,oe,de,xe,e,x,"polar"===v.type),Nt?Ae.attr({shape:xe}):O?sl(O,T,Ae,xe,oe,x,!1,!1):(0,he.KZ)(Ae,{shape:xe},e,oe),f.setItemGraphicEl(oe,Ae),c.add(Ae),Ae.ignore=be}}).update(function(oe,de){var xe=f.getItemModel(oe),be=ws[v.type](f,oe,xe);if(ft){var Ae=void 0;0===It.length?Ae=Wt(de):((Ae=It[de]).useStyle(Tt.getItemStyle()),"cartesian2d"===v.type&&Ae.setShape("r",xt),At[oe]=Ae);var ke=ws[v.type](f,oe),Je=yo(x,ke,v);(0,he.D)(Ae,{shape:Je},T,oe)}var $e=p.getItemGraphicEl(de);if(f.hasValue(oe)&&es[v.type](be)){var fr=!1;if(G&&(fr=Wa[v.type](F,be))&&c.remove($e),$e?(0,he.Zi)($e):$e=Xn[v.type](e,f,oe,be,x,T,m.model,!!$e,Q),O&&($e.forceLabelAnimation=!0),Gt){var wr=$e.getTextContent();if(wr){var Dr=(0,Or.qA)(wr);null!=Dr.prevValue&&(Dr.prevValue=Dr.value)}}else ul($e,f,oe,xe,be,e,x,"polar"===v.type);Nt?$e.attr({shape:be}):O?sl(O,T,$e,be,oe,x,!0,Gt):(0,he.D)($e,{shape:be},e,oe,null),f.setItemGraphicEl(oe,$e),$e.ignore=fr,c.add($e)}else c.remove($e)}).remove(function(oe){var de=p.getItemGraphicEl(oe);de&&(0,he.XD)(de,e,oe)}).execute();var jt=this._backgroundGroup||(this._backgroundGroup=new pr.Z);jt.removeAll();for(var ee=0;ee<At.length;++ee)jt.add(At[ee]);c.add(jt),this._backgroundEls=At,this._data=f},r.prototype._renderLarge=function(e,i,s){this._clear(),Jl(e,this.group),this._updateLargeClip(e)},r.prototype._incrementalRenderLarge=function(e,i){this._removeBackground(),Jl(i,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(e){var i=e.get("clip",!0)&&mo(e.coordinateSystem,!1,e),s=this.group;i?s.setClipPath(i):s.removeClipPath()},r.prototype._enableRealtimeSort=function(e,i,s){var l=this;if(i.count()){var c=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(i,e,s),this._isFirstFrame=!1;else{var f=function(p){var v=i.getItemGraphicEl(p),m=v&&v.shape;return m&&Math.abs(c.isHorizontal()?m.height:m.width)||0};this._onRendered=function(){l._updateSortWithinSameData(i,f,c,s)},s.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(e,i,s){var l=[];return e.each(e.mapDimension(i.dim),function(c,f){var p=s(f);l.push({dataIndex:f,mappedValue:p=p??NaN,ordinalNumber:c})}),l.sort(function(c,f){return f.mappedValue-c.mappedValue}),{ordinalNumbers:(0,_.map)(l,function(c){return c.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(e,i,s){for(var l=s.scale,c=e.mapDimension(s.dim),f=Number.MAX_VALUE,p=0,v=l.getOrdinalMeta().categories.length;p<v;++p){var m=e.rawIndexOf(c,l.getRawOrdinalNumber(p)),x=m<0?Number.MIN_VALUE:i(e.indexOfRawIndex(m));if(x>f)return!0;f=x}return!1},r.prototype._isOrderDifferentInView=function(e,i){for(var s=i.scale,l=s.getExtent(),c=Math.max(0,l[0]),f=Math.min(l[1],s.getOrdinalMeta().categories.length-1);c<=f;++c)if(e.ordinalNumbers[c]!==s.getRawOrdinalNumber(c))return!0},r.prototype._updateSortWithinSameData=function(e,i,s,l){if(this._isOrderChangedWithinSameData(e,i,s)){var c=this._dataSort(e,s,i);this._isOrderDifferentInView(c,s)&&(this._removeOnRenderedListener(l),l.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",axisId:s.index,sortInfo:c}))}},r.prototype._dispatchInitSort=function(e,i,s){var l=i.baseAxis,c=this._dataSort(e,l,function(f){return e.get(e.mapDimension(i.otherAxis.dim),f)});s.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",isInitSort:!0,axisId:l.index,sortInfo:c})},r.prototype.remove=function(e,i){this._clear(this._model),this._removeOnRenderedListener(i)},r.prototype.dispose=function(e,i){this._removeOnRenderedListener(i)},r.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(e){var i=this.group,s=this._data;e&&e.isAnimationEnabled()&&s&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],s.eachItemGraphicEl(function(l){(0,he.XD)(l,e,(0,Fr.A)(l).dataIndex)})):i.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(_r.Z),Wa={cartesian2d:function(o,r){var e=r.width<0?-1:1,i=r.height<0?-1:1;e<0&&(r.x+=r.width,r.width=-r.width),i<0&&(r.y+=r.height,r.height=-r.height);var s=o.x+o.width,l=o.y+o.height,c=ts(r.x,o.x),f=Eo(r.x+r.width,s),p=ts(r.y,o.y),v=Eo(r.y+r.height,l),m=f<c,x=v<p;return r.x=m&&c>s?f:c,r.y=x&&p>l?v:p,r.width=m?0:f-c,r.height=x?0:v-p,e<0&&(r.x+=r.width,r.width=-r.width),i<0&&(r.y+=r.height,r.height=-r.height),m||x},polar:function(o,r){var e=r.r0<=r.r?1:-1;if(e<0){var i=r.r;r.r=r.r0,r.r0=i}var s=Eo(r.r,o.r),l=ts(r.r0,o.r0);r.r=s,r.r0=l;var c=s-l<0;return e<0&&(i=r.r,r.r=r.r0,r.r0=i),c}},Xn={cartesian2d:function(o,r,e,i,s,l,c,f,p){var v=new Br.Z({shape:(0,_.extend)({},i),z2:1});return v.__dataIndex=e,v.name="item",l&&(v.shape[s?"height":"width"]=0),v},polar:function(o,r,e,i,s,l,c,f,p){var v=!s&&p?ji:bi.C,m=new v({shape:i,z2:1});m.name="item";var x=Ds(s);if(m.calculateTextPosition=function Es(o,r){var e=(r=r||{}).isRoundCap;return function(i,s,l){var c=s.position;if(!c||c instanceof Array)return(0,yt.wI)(i,s,l);var f=o(c),p=null!=s.distance?s.distance:5,v=this.shape,m=v.cx,x=v.cy,T=v.r,O=v.r0,G=(T+O)/2,F=v.startAngle,Q=v.endAngle,ft=(F+Q)/2,Tt=e?Math.abs(T-O)/2:0,xt=Math.cos,At=Math.sin,It=m+T*xt(F),Nt=x+T*At(F),Gt="left",Wt="top";switch(f){case"startArc":It=m+(O-p)*xt(ft),Nt=x+(O-p)*At(ft),Gt="center",Wt="top";break;case"insideStartArc":It=m+(O+p)*xt(ft),Nt=x+(O+p)*At(ft),Gt="center",Wt="bottom";break;case"startAngle":It=m+G*xt(F)+ra(F,p+Tt,!1),Nt=x+G*At(F)+Nn(F,p+Tt,!1),Gt="right",Wt="middle";break;case"insideStartAngle":It=m+G*xt(F)+ra(F,-p+Tt,!1),Nt=x+G*At(F)+Nn(F,-p+Tt,!1),Gt="left",Wt="middle";break;case"middle":It=m+G*xt(ft),Nt=x+G*At(ft),Gt="center",Wt="middle";break;case"endArc":It=m+(T+p)*xt(ft),Nt=x+(T+p)*At(ft),Gt="center",Wt="bottom";break;case"insideEndArc":It=m+(T-p)*xt(ft),Nt=x+(T-p)*At(ft),Gt="center",Wt="top";break;case"endAngle":It=m+G*xt(Q)+ra(Q,p+Tt,!0),Nt=x+G*At(Q)+Nn(Q,p+Tt,!0),Gt="left",Wt="middle";break;case"insideEndAngle":It=m+G*xt(Q)+ra(Q,-p+Tt,!0),Nt=x+G*At(Q)+Nn(Q,-p+Tt,!0),Gt="right",Wt="middle";break;default:return(0,yt.wI)(i,s,l)}return(i=i||{}).x=It,i.y=Nt,i.align=Gt,i.verticalAlign=Wt,i}}(x,{isRoundCap:v===ji}),l){var O=s?"r":"endAngle",G={};m.shape[O]=s?0:i.startAngle,G[O]=i[O],(f?he.D:he.KZ)(m,{shape:G},l)}return m}};function sl(o,r,e,i,s,l,c,f){var p,v;l?(v={x:i.x,width:i.width},p={y:i.y,height:i.height}):(v={y:i.y,height:i.height},p={x:i.x,width:i.width}),f||(c?he.D:he.KZ)(e,{shape:p},r,s,null),(c?he.D:he.KZ)(e,{shape:v},r?o.baseAxis.model:null,s)}function wo(o,r){for(var e=0;e<r.length;e++)if(!isFinite(o[r[e]]))return!0;return!1}var ll=["x","y","width","height"],Kl=["cx","cy","r","startAngle","endAngle"],es={cartesian2d:function(o){return!wo(o,ll)},polar:function(o){return!wo(o,Kl)}},ws={cartesian2d:function(o,r,e){var i=o.getItemLayout(r),s=e?function rs(o,r){var e=o.get(["itemStyle","borderColor"]);if(!e||"none"===e)return 0;var i=o.get(["itemStyle","borderWidth"])||0,s=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),l=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(i,s,l)}(e,i):0,l=i.width>0?1:-1,c=i.height>0?1:-1;return{x:i.x+l*s/2,y:i.y+c*s/2,width:i.width-l*s,height:i.height-c*s}},polar:function(o,r,e){var i=o.getItemLayout(r);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function Ds(o){return e=o?"Arc":"Angle",function(i){switch(i){case"start":case"insideStart":case"end":case"insideEnd":return i+e;default:return i}};var e}function ul(o,r,e,i,s,l,c,f){var p=r.getItemVisual(e,"style");f||o.setShape("r",i.get(["itemStyle","borderRadius"])||0),o.useStyle(p);var v=i.getShallow("cursor");v&&o.attr("cursor",v);var m=f?c?s.r>=s.r0?"endArc":"startArc":s.endAngle>=s.startAngle?"endAngle":"startAngle":c?s.height>=0?"bottom":"top":s.width>=0?"right":"left",x=(0,Or.k3)(i);(0,Or.ni)(o,x,{labelFetcher:l,labelDataIndex:e,defaultText:_o(l.getData(),e),inheritColor:p.fill,defaultOpacity:p.opacity,defaultOutsidePosition:m});var T=o.getTextContent();if(f&&T){var O=i.get(["label","position"]);o.textConfig.inside="middle"===O||null,function Va(o,r,e,i){if((0,_.isNumber)(i))o.setTextConfig({rotation:i});else if((0,_.isArray)(r))o.setTextConfig({rotation:0});else{var p,s=o.shape,l=s.clockwise?s.startAngle:s.endAngle,c=s.clockwise?s.endAngle:s.startAngle,f=(l+c)/2,v=e(r);switch(v){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":p=f;break;case"startAngle":case"insideStartAngle":p=l;break;case"endAngle":case"insideEndAngle":p=c;break;default:return void o.setTextConfig({rotation:0})}var m=1.5*Math.PI-p;"middle"===v&&m>Math.PI/2&&m<1.5*Math.PI&&(m-=Math.PI),o.setTextConfig({rotation:m})}}(o,"outside"===O?m:O,Ds(c),i.get(["label","rotate"]))}(0,Or.pe)(T,x,l.getRawValue(e),function(F){return Ms(r,F)});var G=i.getModel(["emphasis"]);(0,sr.k5)(o,G.get("focus"),G.get("blurScope"),G.get("disabled")),(0,sr.WO)(o,i),function Do(o){return null!=o.startAngle&&null!=o.endAngle&&o.startAngle===o.endAngle}(s)&&(o.style.fill="none",o.style.stroke="none",(0,_.each)(o.states,function(F){F.style&&(F.style.fill=F.style.stroke="none")}))}var jl=function o(){},Lo=function(o){function r(e){var i=o.call(this,e)||this;return i.type="largeBar",i}return(0,Re.ZT)(r,o),r.prototype.getDefaultShape=function(){return new jl},r.prototype.buildPath=function(e,i){for(var s=i.points,l=this.baseDimIdx,c=1-this.baseDimIdx,f=[],p=[],v=this.barWidth,m=0;m<s.length;m+=3)p[l]=v,p[c]=s[m+2],f[l]=s[m+l],f[c]=s[m+c],e.rect(f[0],f[1],p[0],p[1])},r}(mt.ZP);function Jl(o,r,e,i){var s=o.getData(),l=s.getLayout("valueAxisHorizontal")?1:0,c=s.getLayout("largeDataIndices"),f=s.getLayout("size"),p=o.getModel("backgroundStyle"),v=s.getLayout("largeBackgroundPoints");if(v){var m=new Lo({shape:{points:v},incremental:!!i,silent:!0,z2:0});m.baseDimIdx=l,m.largeDataIndices=c,m.barWidth=f,m.useStyle(p.getItemStyle()),r.add(m),e&&e.push(m)}var x=new Lo({shape:{points:s.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});x.baseDimIdx=l,x.largeDataIndices=c,x.barWidth=f,r.add(x),x.useStyle(s.getVisual("style")),(0,Fr.A)(x).seriesIndex=o.seriesIndex,o.get("silent")||(x.on("mousedown",Ql),x.on("mousemove",Ql)),e&&e.push(x)}var Ql=(0,Si.P2)(function(o){var e=function Da(o,r,e){for(var i=o.baseDimIdx,s=1-i,l=o.shape.points,c=o.largeDataIndices,f=[],p=[],v=o.barWidth,m=0,x=l.length/3;m<x;m++){var T=3*m;if(p[i]=v,p[s]=l[T+2],f[i]=l[T+i],f[s]=l[T+s],p[s]<0&&(f[s]+=p[s],p[s]=-p[s]),r>=f[0]&&r<=f[0]+p[0]&&e>=f[1]&&e<=f[1]+p[1])return c[m]}return-1}(this,o.offsetX,o.offsetY);(0,Fr.A)(this).dataIndex=e>=0?e:null},30,!1);function yo(o,r,e){if(Oa(e,"cartesian2d")){var i=r,s=e.getArea();return{x:o?i.x:s.x,y:o?s.y:i.y,width:o?i.width:s.width,height:o?s.height:i.height}}return{cx:(s=e.getArea()).cx,cy:s.cy,r0:o?s.r0:r.r0,r:o?s.r:r.r,startAngle:o?r.startAngle:0,endAngle:o?r.endAngle:2*Math.PI}}const ku=Ri;var na=D(7789),sn=D(942),No=2*Math.PI,ci=Math.PI/180;function Io(o,r){return sn.ME(o.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function Ji(o,r){var e=Io(o,r),i=o.get("center"),s=o.get("radius");_.isArray(s)||(s=[0,s]);var m,x,l=(0,Be.GM)(e.width,r.getWidth()),c=(0,Be.GM)(e.height,r.getHeight()),f=Math.min(l,c),p=(0,Be.GM)(s[0],f/2),v=(0,Be.GM)(s[1],f/2),T=o.coordinateSystem;if(T){var O=T.dataToPoint(i);m=O[0]||0,x=O[1]||0}else _.isArray(i)||(i=[i,i]),m=(0,Be.GM)(i[0],l)+e.x,x=(0,Be.GM)(i[1],c)+e.y;return{cx:m,cy:x,r0:p,r:v}}function hl(o,r,e){r.eachSeriesByType(o,function(i){var s=i.getData(),l=s.mapDimension("value"),c=Io(i,e),f=Ji(i,e),p=f.cx,v=f.cy,m=f.r,x=f.r0,T=-i.get("startAngle")*ci,O=i.get("minAngle")*ci,G=0;s.each(l,function(ee){!isNaN(ee)&&G++});var F=s.getSum(l),Q=Math.PI/(F||G)*2,ft=i.get("clockwise"),Tt=i.get("roseType"),xt=i.get("stillShowZeroSum"),At=s.getDataExtent(l);At[0]=0;var It=No,Nt=0,Gt=T,Wt=ft?1:-1;if(s.setLayout({viewRect:c,r:m}),s.each(l,function(ee,oe){var de;if(isNaN(ee))s.setItemLayout(oe,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:ft,cx:p,cy:v,r0:x,r:Tt?NaN:m});else{(de="area"!==Tt?0===F&&xt?Q:ee*Q:No/G)<O?(de=O,It-=O):Nt+=ee;var xe=Gt+Wt*de;s.setItemLayout(oe,{angle:de,startAngle:Gt,endAngle:xe,clockwise:ft,cx:p,cy:v,r0:x,r:Tt?(0,Be.NU)(ee,At,[x,m]):m}),Gt=xe}}),It<No&&G)if(It<=.001){var jt=No/G;s.each(l,function(ee,oe){if(!isNaN(ee)){var de=s.getItemLayout(oe);de.angle=jt,de.startAngle=T+Wt*oe*jt,de.endAngle=T+Wt*(oe+1)*jt}})}else Q=It/Nt,Gt=T,s.each(l,function(ee,oe){if(!isNaN(ee)){var de=s.getItemLayout(oe),xe=de.angle===O?O:ee*Q;de.startAngle=Gt,de.endAngle=Gt+Wt*xe,Gt+=Wt*xe}})})}function Ro(o){return{seriesType:o,reset:function(r,e){var i=e.findComponents({mainType:"legend"});if(i&&i.length){var s=r.getData();s.filterSelf(function(l){for(var c=s.getName(l),f=0;f<i.length;f++)if(!i[f].isSelected(c))return!1;return!0})}}}}var ia=D(3628),Zt=D(9947),Ht=D(4409),Rt=D(4206),Vt=Math.PI/180;function Yt(o,r,e,i,s,l,c,f,p,v){if(!(o.length<2)){for(var T=o.length,O=0;O<T;O++)"outer"===o[O].position&&"labelLine"===o[O].labelAlignTo&&(o[O].linePoints[1][0]+=o[O].label.x-v,o[O].label.x=v);(0,Rt.GI)(o,p,p+c)&&function x(F){for(var Q={list:[],maxY:0},ft={list:[],maxY:0},Tt=0;Tt<F.length;Tt++)if("none"===F[Tt].labelAlignTo){var xt=F[Tt],At=xt.label.y>e?ft:Q,It=Math.abs(xt.label.y-e);if(It>=At.maxY){var Nt=xt.label.x-r-xt.len2*s,Gt=i+xt.len,Wt=Math.abs(Nt)<Gt?Math.sqrt(It*It/(1-Nt*Nt/Gt/Gt)):Gt;At.rB=Wt,At.maxY=It}At.list.push(xt)}m(Q),m(ft)}(o)}function m(F){for(var Q=F.rB,ft=Q*Q,Tt=0;Tt<F.list.length;Tt++){var xt=F.list[Tt],At=Math.abs(xt.label.y-e),It=i+xt.len,Nt=It*It,Gt=Math.sqrt((1-Math.abs(At*At/ft))*Nt),Wt=r+(Gt+xt.len2)*s;ve(xt,xt.targetTextWidth-(Wt-xt.label.x)*s,!0),xt.label.x=Wt}}}function ve(o,r,e){if(void 0===e&&(e=!1),null==o.labelStyleWidth){var i=o.label,s=i.style,l=o.rect,c=s.backgroundColor,f=s.padding,p=f?f[1]+f[3]:0,v=s.overflow,m=l.width+(c?0:p);if(r<m||e){var x=l.height;if(v&&v.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",r-p);var T=i.getBoundingRect();i.setStyle("width",Math.ceil(T.width)),i.setStyle("backgroundColor",c)}else{var O=r-p;i.setStyle("width",r<m?O:e?O>o.unconstrainedWidth?null:O:null)}var F=i.getBoundingRect();l.width=F.width,l.height=F.height+((i.style.margin||0)+2.1),l.y-=(l.height-x)/2}}}function He(o){return"center"===o.position}function qe(o,r,e){var i=o.get("borderRadius");if(null==i)return e?{cornerRadius:0}:null;(0,_.isArray)(i)||(i=[i,i,i,i]);var s=Math.abs(r.r||0-r.r0||0);return{cornerRadius:(0,_.map)(i,function(l){return(0,yt.GM)(l,s)})}}var yr=function(o){function r(e,i,s){var l=o.call(this)||this;l.z2=2;var c=new Se.ZP;return l.setTextContent(c),l.updateData(e,i,s,!0),l}return(0,Re.ZT)(r,o),r.prototype.updateData=function(e,i,s,l){var c=this,f=e.hostModel,p=e.getItemModel(i),v=p.getModel("emphasis"),m=e.getItemLayout(i),x=(0,_.extend)(qe(p.getModel("itemStyle"),m,!0),m);if(isNaN(x.startAngle))c.setShape(x);else{if(l){c.setShape(x);var T=f.getShallow("animationType");f.ecModel.ssr?(he.KZ(c,{scaleX:0,scaleY:0},f,{dataIndex:i,isFrom:!0}),c.originX=x.cx,c.originY=x.cy):"scale"===T?(c.shape.r=m.r0,he.KZ(c,{shape:{r:m.r}},f,i)):null!=s?(c.setShape({startAngle:s,endAngle:s}),he.KZ(c,{shape:{startAngle:m.startAngle,endAngle:m.endAngle}},f,i)):(c.shape.endAngle=m.startAngle,he.D(c,{shape:{endAngle:m.endAngle}},f,i))}else(0,he.Zi)(c),he.D(c,{shape:x},f,i);c.useStyle(e.getItemVisual(i,"style")),(0,sr.WO)(c,p);var O=(m.startAngle+m.endAngle)/2,G=f.get("selectedOffset"),F=Math.cos(O)*G,Q=Math.sin(O)*G,ft=p.getShallow("cursor");ft&&c.attr("cursor",ft),this._updateLabel(f,e,i),c.ensureState("emphasis").shape=(0,_.extend)({r:m.r+(v.get("scale")&&v.get("scaleSize")||0)},qe(v.getModel("itemStyle"),m)),(0,_.extend)(c.ensureState("select"),{x:F,y:Q,shape:qe(p.getModel(["select","itemStyle"]),m)}),(0,_.extend)(c.ensureState("blur"),{shape:qe(p.getModel(["blur","itemStyle"]),m)});var Tt=c.getTextGuideLine(),xt=c.getTextContent();Tt&&(0,_.extend)(Tt.ensureState("select"),{x:F,y:Q}),(0,_.extend)(xt.ensureState("select"),{x:F,y:Q}),(0,sr.k5)(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))}},r.prototype._updateLabel=function(e,i,s){var l=this,c=i.getItemModel(s),f=c.getModel("labelLine"),p=i.getItemVisual(s,"style"),v=p&&p.fill,m=p&&p.opacity;(0,Or.ni)(l,(0,Or.k3)(c),{labelFetcher:i.hostModel,labelDataIndex:s,inheritColor:v,defaultOpacity:m,defaultText:e.getFormattedLabel(s,"normal")||i.getName(s)});var x=l.getTextContent();l.setTextConfig({position:null,rotation:null}),x.attr({z2:10});var T=e.get(["label","position"]);if("outside"!==T&&"outer"!==T)l.removeTextGuideLine();else{var O=this.getTextGuideLine();O||(O=new ia.Z,this.setTextGuideLine(O)),(0,Ht.Iu)(this,(0,Ht.$x)(c),{stroke:v,opacity:(0,_.retrieve3)(f.get(["lineStyle","opacity"]),m,1)})}},r}(bi.C);const Me=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){var v,c=e.getData(),f=this._data,p=this.group;if(!f&&c.count()>0){for(var m=c.getItemLayout(0),x=1;isNaN(m&&m.startAngle)&&x<c.count();++x)m=c.getItemLayout(x);m&&(v=m.startAngle)}if(this._emptyCircleSector&&p.remove(this._emptyCircleSector),0===c.count()&&e.get("showEmptyCircle")){var T=new bi.C({shape:Ji(e,s)});T.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=T,p.add(T)}c.diff(f).add(function(O){var G=new yr(c,O,v);c.setItemGraphicEl(O,G),p.add(G)}).update(function(O,G){var F=f.getItemGraphicEl(G);F.updateData(c,O,v),F.off("click"),p.add(F),c.setItemGraphicEl(O,F)}).remove(function(O){var G=f.getItemGraphicEl(O);he.XD(G,e,O)}).execute(),function ze(o){var i,s,r=o.getData(),e=[],l=!1,c=(o.get("minShowLabelAngle")||0)*Vt,f=r.getLayout("viewRect"),p=r.getLayout("r"),v=f.width,m=f.x,x=f.y,T=f.height;function O(Nt){Nt.ignore=!0}r.each(function(Nt){var Gt=r.getItemGraphicEl(Nt),Wt=Gt.shape,jt=Gt.getTextContent(),ee=Gt.getTextGuideLine(),oe=r.getItemModel(Nt),de=oe.getModel("label"),xe=de.get("position")||oe.get(["emphasis","label","position"]),be=de.get("distanceToLabelLine"),Ae=de.get("alignTo"),ke=(0,Be.GM)(de.get("edgeDistance"),v),Je=de.get("bleedMargin"),$e=oe.getModel("labelLine"),fr=$e.get("length");fr=(0,Be.GM)(fr,v);var wr=$e.get("length2");if(wr=(0,Be.GM)(wr,v),Math.abs(Wt.endAngle-Wt.startAngle)<c)return(0,_.each)(jt.states,O),jt.ignore=!0,void(ee&&((0,_.each)(ee.states,O),ee.ignore=!0));if(function G(Nt){if(!Nt.ignore)return!0;for(var Gt in Nt.states)if(!1===Nt.states[Gt].ignore)return!0;return!1}(jt)){var rn,Pn,Qn,Cn,Dr=(Wt.startAngle+Wt.endAngle)/2,cn=Math.cos(Dr),ln=Math.sin(Dr);i=Wt.cx,s=Wt.cy;var nn="inside"===xe||"inner"===xe;if("center"===xe)rn=Wt.cx,Pn=Wt.cy,Cn="center";else{var Wn=(nn?(Wt.r+Wt.r0)/2*cn:Wt.r*cn)+i,kn=(nn?(Wt.r+Wt.r0)/2*ln:Wt.r*ln)+s;if(rn=Wn+3*cn,Pn=kn+3*ln,!nn){var qn=Wn+cn*(fr+p-Wt.r),ha=kn+ln*(fr+p-Wt.r),ma=qn+(cn<0?-1:1)*wr;rn="edge"===Ae?cn<0?m+ke:m+v-ke:ma+(cn<0?-be:be),Pn=ha,Qn=[[Wn,kn],[qn,ha],[ma,ha]]}Cn=nn?"center":"edge"===Ae?cn>0?"right":"left":cn>0?"left":"right"}var Qi=Math.PI,Ki=0,Ga=de.get("rotate");if((0,_.isNumber)(Ga))Ki=Ga*(Qi/180);else if("center"===xe)Ki=0;else if("radial"===Ga||!0===Ga)Ki=cn<0?-Dr+Qi:-Dr;else if("tangential"===Ga&&"outside"!==xe&&"outer"!==xe){var po=Math.atan2(cn,ln);po<0&&(po=2*Qi+po),ln>0&&(po=Qi+po),Ki=po-Qi}if(l=!!Ki,jt.x=rn,jt.y=Pn,jt.rotation=Ki,jt.setStyle({verticalAlign:"middle"}),nn){jt.setStyle({align:Cn});var Lm=jt.states.select;Lm&&(Lm.x+=jt.x,Lm.y+=jt.y)}else{var Zu=jt.getBoundingRect().clone();Zu.applyTransform(jt.getComputedTransform());var uS=(jt.style.margin||0)+2.1;Zu.y-=uS/2,Zu.height+=uS,e.push({label:jt,labelLine:ee,position:xe,len:fr,len2:wr,minTurnAngle:$e.get("minTurnAngle"),maxSurfaceAngle:$e.get("maxSurfaceAngle"),surfaceNormal:new Zt.Z(cn,ln),linePoints:Qn,textAlign:Cn,labelDistance:be,labelAlignTo:Ae,edgeDistance:ke,bleedMargin:Je,rect:Zu,unconstrainedWidth:Zu.width,labelStyleWidth:jt.style.width})}Gt.setTextConfig({inside:nn})}}),!l&&o.get("avoidLabelOverlap")&&function se(o,r,e,i,s,l,c,f){for(var p=[],v=[],m=Number.MAX_VALUE,x=-Number.MAX_VALUE,T=0;T<o.length;T++){var O=o[T].label;He(o[T])||(O.x<r?(m=Math.min(m,O.x),p.push(o[T])):(x=Math.max(x,O.x),v.push(o[T])))}for(T=0;T<o.length;T++)if(!He(G=o[T])&&G.linePoints){if(null!=G.labelStyleWidth)continue;O=G.label;var Q,F=G.linePoints;G.targetTextWidth=Q="edge"===G.labelAlignTo?O.x<r?F[2][0]-G.labelDistance-c-G.edgeDistance:c+s-G.edgeDistance-F[2][0]-G.labelDistance:"labelLine"===G.labelAlignTo?O.x<r?m-c-G.bleedMargin:c+s-x-G.bleedMargin:O.x<r?O.x-c-G.bleedMargin:c+s-O.x-G.bleedMargin,ve(G,Q)}for(Yt(v,r,e,i,1,0,l,0,f,x),Yt(p,r,e,i,-1,0,l,0,f,m),T=0;T<o.length;T++){var G;if(!He(G=o[T])&&G.linePoints){var Tt=(O=G.label).style.padding,It=G.rect.width+(O.style.backgroundColor?0:Tt?Tt[1]+Tt[3]:0),Nt=(F=G.linePoints)[1][0]-F[2][0];"edge"===G.labelAlignTo?F[2][0]=O.x<r?c+G.edgeDistance+It+G.labelDistance:c+s-G.edgeDistance-It-G.labelDistance:(F[2][0]=O.x<r?O.x+G.labelDistance:O.x-G.labelDistance,F[1][0]=F[2][0]+Nt),F[1][1]=F[2][1]=O.y}}}(e,i,s,p,v,T,m,x);for(var F=0;F<e.length;F++){var Q=e[F],ft=Q.label,Tt=Q.labelLine,xt=isNaN(ft.x)||isNaN(ft.y);if(ft){ft.setStyle({align:Q.textAlign}),xt&&((0,_.each)(ft.states,O),ft.ignore=!0);var At=ft.states.select;At&&(At.x+=ft.x,At.y+=ft.y)}if(Tt){var It=Q.linePoints;xt||!It?((0,_.each)(Tt.states,O),Tt.ignore=!0):((0,Ht.qK)(It,Q.minTurnAngle),(0,Ht._A)(It,Q.surfaceNormal,Q.maxSurfaceAngle),Tt.setShape({points:It}),ft.__hostTarget.textGuideLineConfig={anchor:new Zt.Z(It[0][0],It[0][1])})}}}(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=c)},r.prototype.dispose=function(){},r.prototype.containPoint=function(e,i){var l=i.getData().getItemLayout(0);if(l){var c=e[0]-l.cx,f=e[1]-l.cy,p=Math.sqrt(c*c+f*f);return p<=l.r&&p>=l.r0}},r.type="pie",r}(_r.Z);var Ce=D(1440),Ie=D(8997);function Ue(o,r,e){r=(0,_.isArray)(r)&&{coordDimensions:r}||(0,_.extend)({encodeDefine:o.getEncode()},r);var i=o.getSource(),s=(0,Ce.Z)(i,r).dimensions,l=new Ie.Z(s,o);return l.initData(i,e),l}var ir=D(7458);const xr=function(){function o(r,e){this._getDataWithEncodedVisual=r,this._getRawData=e}return o.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},o.prototype.containName=function(r){return this._getRawData().indexOfName(r)>=0},o.prototype.indexOfName=function(r){return this._getDataWithEncodedVisual().indexOfName(r)},o.prototype.getItemVisual=function(r,e){return this._getDataWithEncodedVisual().getItemVisual(r,e)},o}();var br=dr.Yf();const _n=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.init=function(e){o.prototype.init.apply(this,arguments),this.legendVisualProvider=new xr(_.bind(this.getData,this),_.bind(this.getRawData,this)),this._defaultLabelLine(e)},r.prototype.mergeOption=function(){o.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return Ue(this,{coordDimensions:["value"],encodeDefaulter:_.curry(ir.Ss,this)})},r.prototype.getDataParams=function(e){var i=this.getData(),s=br(i),l=s.seats;if(!l){var c=[];i.each(i.mapDimension("value"),function(p){c.push(p)}),l=s.seats=(0,Be.HD)(c,i.hostModel.get("percentPrecision"))}var f=o.prototype.getDataParams.call(this,e);return f.percent=l[e]||0,f.$vars.push("percent"),f},r.prototype._defaultLabelLine=function(e){dr.Cc(e,"labelLine",["show"]);var i=e.labelLine,s=e.emphasis.labelLine;i.show=i.show&&e.label.show,s.show=s.show&&e.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(rr.Z),jn=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e,i){return(0,Fa.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.getProgressive=function(){return this.option.progressive??(this.option.large?5e3:this.get("progressive"))},r.prototype.getProgressiveThreshold=function(){return this.option.progressiveThreshold??(this.option.large?1e4:this.get("progressiveThreshold"))},r.prototype.brushSelector=function(e,i,s){return s.point(i.getItemLayout(e))},r.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},r.type="series.scatter",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},r}(rr.Z);var bn=D(4525),ql=function o(){},Ns=function(o){function r(e){var i=o.call(this,e)||this;return i._off=0,i.hoverDataIdx=-1,i}return(0,Re.ZT)(r,o),r.prototype.getDefaultShape=function(){return new ql},r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.buildPath=function(e,i){var x,s=i.points,l=i.size,c=this.symbolProxy,f=c.shape,p=e.getContext?e.getContext():e,m=this.softClipShape;if(p&&l[0]<4)this._ctx=p;else{for(this._ctx=null,x=this._off;x<s.length;){var T=s[x++],O=s[x++];isNaN(T)||isNaN(O)||m&&!m.contain(T,O)||(f.x=T-l[0]/2,f.y=O-l[1]/2,f.width=l[0],f.height=l[1],c.buildPath(e,f,!0))}this.incremental&&(this._off=x,this.notClear=!0)}},r.prototype.afterBrush=function(){var f,e=this.shape,i=e.points,s=e.size,l=this._ctx,c=this.softClipShape;if(l){for(f=this._off;f<i.length;){var p=i[f++],v=i[f++];isNaN(p)||isNaN(v)||c&&!c.contain(p,v)||l.fillRect(p-s[0]/2,v-s[1]/2,s[0],s[1])}this.incremental&&(this._off=f,this.notClear=!0)}},r.prototype.findDataIndex=function(e,i){for(var s=this.shape,l=s.points,c=s.size,f=Math.max(c[0],4),p=Math.max(c[1],4),v=l.length/2-1;v>=0;v--){var m=2*v,x=l[m]-f/2,T=l[m+1]-p/2;if(e>=x&&i>=T&&e<=x+f&&i<=T+p)return v}return-1},r.prototype.contain=function(e,i){var s=this.transformCoordToLocal(e,i);return this.getBoundingRect().contain(e=s[0],i=s[1])?(this.hoverDataIdx=this.findDataIndex(e,i))>=0:(this.hoverDataIdx=-1,!1)},r.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var i=this.shape,s=i.points,l=i.size,c=l[0],f=l[1],p=1/0,v=1/0,m=-1/0,x=-1/0,T=0;T<s.length;){var O=s[T++],G=s[T++];p=Math.min(O,p),m=Math.max(O,m),v=Math.min(G,v),x=Math.max(G,x)}e=this._rect=new bn.Z(p-c/2,v-f/2,m-p+c,x-v+f)}return e},r}(mt.ZP);const zu=function(){function o(){this.group=new pr.Z}return o.prototype.updateData=function(r,e){this._clear();var i=this._create();i.setShape({points:r.getLayout("points")}),this._setCommon(i,r,e)},o.prototype.updateLayout=function(r){var e=r.getLayout("points");this.group.eachChild(function(i){null!=i.startIndex&&(e=new Float32Array(e.buffer,4*i.startIndex*2,2*(i.endIndex-i.startIndex))),i.setShape("points",e),i.reset()})},o.prototype.incrementalPrepareUpdate=function(r){this._clear()},o.prototype.incrementalUpdate=function(r,e,i){var s=this._newAdded[0],l=e.getLayout("points"),c=s&&s.shape.points;if(c&&c.length<2e4){var f=c.length,p=new Float32Array(f+l.length);p.set(c),p.set(l,f),s.endIndex=r.end,s.setShape({points:p})}else{this._newAdded=[];var v=this._create();v.startIndex=r.start,v.endIndex=r.end,v.incremental=!0,v.setShape({points:l}),this._setCommon(v,e,i)}},o.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},o.prototype._create=function(){var r=new Ns({cursor:"default"});return r.ignoreCoarsePointer=!0,this.group.add(r),this._newAdded.push(r),r},o.prototype._setCommon=function(r,e,i){var s=e.hostModel;i=i||{};var l=e.getVisual("symbolSize");r.setShape("size",l instanceof Array?l:[l,l]),r.softClipShape=i.clipShape||null,r.symbolProxy=(0,Tn.th)(e.getVisual("symbol"),0,0,0,0),r.setColor=r.symbolProxy.setColor;var c=r.shape.size[0]<4;r.useStyle(s.getModel("itemStyle").getItemStyle(c?["color","shadowBlur","shadowColor"]:["color"]));var f=e.getVisual("style"),p=f&&f.fill;p&&r.setColor(p);var v=(0,Fr.A)(r);v.seriesIndex=s.seriesIndex,r.on("mousemove",function(m){v.dataIndex=null;var x=r.hoverDataIdx;x>=0&&(v.dataIndex=x+(r.startIndex||0))})},o.prototype.remove=function(){this._clear()},o.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},o}(),eh=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l=e.getData();this._updateSymbolDraw(l,e).updateData(l,{clipShape:this._getClipShape(e)}),this._finished=!0},r.prototype.incrementalPrepareRender=function(e,i,s){var l=e.getData();this._updateSymbolDraw(l,e).incrementalPrepareUpdate(l),this._finished=!1},r.prototype.incrementalRender=function(e,i,s){this._symbolDraw.incrementalUpdate(e,i.getData(),{clipShape:this._getClipShape(i)}),this._finished=e.end===i.getData().count()},r.prototype.updateTransform=function(e,i,s){var l=e.getData();if(this.group.dirty(),!this._finished||l.count()>1e4)return{update:!0};var c=oo("").reset(e,i,s);c.progress&&c.progress({start:0,end:l.count(),count:l.count()},l),this._symbolDraw.updateLayout(l)},r.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},r.prototype._getClipShape=function(e){var i=e.coordinateSystem,s=i&&i.getArea&&i.getArea();return e.get("clip",!0)?s:null},r.prototype._updateSymbolDraw=function(e,i){var s=this._symbolDraw,c=i.pipelineContext.large;return(!s||c!==this._isLargeDraw)&&(s&&s.remove(),s=this._symbolDraw=c?new zu:new ka,this._isLargeDraw=c,this.group.removeAll()),this.group.add(s.group),s},r.prototype.remove=function(e,i){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},r.prototype.dispose=function(){},r.type="scatter",r}(_r.Z);var Ti=D(3785),Pi=D(2310);const wp=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.type="grid",r.dependencies=["xAxis","yAxis"],r.layoutMode="box",r.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},r}(Pi.Z);var tu=D(9896),rh=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",dr.C6).models[0]},r.type="cartesian2dAxis",r}(Pi.Z);_.mixin(rh,tu.W);var bf={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Pf=_.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},bf),nh=_.merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},bf);const eu={category:Pf,value:nh,time:_.merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},nh),log:_.defaults({logBase:10},nh)};var Np=D(872),Af={value:1,category:1,time:1,log:1};function Is(o,r,e,i){(0,_.each)(Af,function(s,l){var c=(0,_.merge)((0,_.merge)({},eu[l],!0),i,!0),f=function(p){function v(){var m=null!==p&&p.apply(this,arguments)||this;return m.type=r+"Axis."+l,m}return(0,Re.ZT)(v,p),v.prototype.mergeDefaultAndTheme=function(m,x){var T=(0,sn.YD)(this),O=T?(0,sn.tE)(m):{},G=x.getTheme();(0,_.merge)(m,G.get(l+"Axis")),(0,_.merge)(m,this.getDefaultOption()),m.type=ih(m),T&&(0,sn.dt)(m,O,T)},v.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=Np.Z.createByAxisModel(this))},v.prototype.getCategories=function(m){var x=this.option;if("category"===x.type)return m?x.data:this.__ordinalMeta.categories},v.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},v.type=r+"Axis."+l,v.defaultOption=c,v}(e);o.registerComponentModel(f)}),o.registerSubTypeDefaulter(r+"Axis",ih)}function ih(o){return o.type||(o.data?"category":"value")}var Ai=D(6122),Of=D(1491),In=D(4498),Ur=D(8544),Hu=["x","y"];function ah(o){return"interval"===o.type||"time"===o.type}const wf=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=Hu,e}return(0,Re.ZT)(r,o),r.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,i=this.getAxis("y").scale;if(ah(e)&&ah(i)){var s=e.getExtent(),l=i.getExtent(),c=this.dataToPoint([s[0],l[0]]),f=this.dataToPoint([s[1],l[1]]),p=s[1]-s[0],v=l[1]-l[0];if(p&&v){var m=(f[0]-c[0])/p,x=(f[1]-c[1])/v,G=this._transform=[m,0,0,x,c[0]-s[0]*m,c[1]-l[0]*x];this._invTransform=(0,In.invert)([],G)}}},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},r.prototype.containPoint=function(e){var i=this.getAxis("x"),s=this.getAxis("y");return i.contain(i.toLocalCoord(e[0]))&&s.contain(s.toLocalCoord(e[1]))},r.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},r.prototype.containZone=function(e,i){var s=this.dataToPoint(e),l=this.dataToPoint(i),c=this.getArea(),f=new bn.Z(s[0],s[1],l[0]-s[0],l[1]-s[1]);return c.intersect(f)},r.prototype.dataToPoint=function(e,i,s){s=s||[];var l=e[0],c=e[1];if(this._transform&&null!=l&&isFinite(l)&&null!=c&&isFinite(c))return(0,Ur.applyTransform)(s,e,this._transform);var f=this.getAxis("x"),p=this.getAxis("y");return s[0]=f.toGlobalCoord(f.dataToCoord(l,i)),s[1]=p.toGlobalCoord(p.dataToCoord(c,i)),s},r.prototype.clampData=function(e,i){var s=this.getAxis("x").scale,l=this.getAxis("y").scale,c=s.getExtent(),f=l.getExtent(),p=s.parse(e[0]),v=l.parse(e[1]);return(i=i||[])[0]=Math.min(Math.max(Math.min(c[0],c[1]),p),Math.max(c[0],c[1])),i[1]=Math.min(Math.max(Math.min(f[0],f[1]),v),Math.max(f[0],f[1])),i},r.prototype.pointToData=function(e,i){var s=[];if(this._invTransform)return(0,Ur.applyTransform)(s,e,this._invTransform);var l=this.getAxis("x"),c=this.getAxis("y");return s[0]=l.coordToData(l.toLocalCoord(e[0]),i),s[1]=c.coordToData(c.toLocalCoord(e[1]),i),s},r.prototype.getOtherAxis=function(e){return this.getAxis("x"===e.dim?"y":"x")},r.prototype.getArea=function(){var e=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),s=Math.min(e[0],e[1]),l=Math.min(i[0],i[1]),c=Math.max(e[0],e[1])-s,f=Math.max(i[0],i[1])-l;return new bn.Z(s,l,c,f)},r}(Of.Z);var Xa=D(3525);const Df=function(o){function r(e,i,s,l,c){var f=o.call(this,e,i,s)||this;return f.index=0,f.type=l||"value",f.position=c||"bottom",f}return(0,Re.ZT)(r,o),r.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},r.prototype.getGlobalExtent=function(e){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),e&&i[0]>i[1]&&i.reverse(),i},r.prototype.pointToData=function(e,i){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),i)},r.prototype.setCategorySortInfo=function(e){if("category"!==this.type)return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},r}(Xa.Z);function oh(o,r,e){e=e||{};var i=o.coordinateSystem,s=r.axis,l={},c=s.getAxesOnZeroOf()[0],f=s.position,p=c?"onZero":f,v=s.dim,m=i.getRect(),x=[m.x,m.x+m.width,m.y,m.y+m.height],T={left:0,right:1,top:0,bottom:1,onZero:2},O=r.get("offset")||0,G="x"===v?[x[2]-O,x[3]+O]:[x[0]-O,x[1]+O];if(c){var F=c.toGlobalCoord(c.dataToCoord(0));G[T.onZero]=Math.max(Math.min(F,G[1]),G[0])}l.position=["y"===v?G[T[p]]:x[0],"x"===v?G[T[p]]:x[3]],l.rotation=Math.PI/2*("x"===v?0:1),l.labelDirection=l.tickDirection=l.nameDirection={top:-1,bottom:1,left:-1,right:1}[f],l.labelOffset=c?G[T[f]]-G[T.onZero]:0,r.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),_.retrieve(e.labelInside,r.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var ft=r.get(["axisLabel","rotate"]);return l.labelRotate="top"===p?-ft:ft,l.z2=1,l}function Lf(o){return"cartesian2d"===o.get("coordinateSystem")}function sh(o){var r={xAxisModel:null,yAxisModel:null};return _.each(r,function(e,i){var s=i.replace(/Model$/,""),l=o.getReferringComponents(s,dr.C6).models[0];r[i]=l}),r}var Rs=D(3187),xo=D(98),Vu=Math.log;function Wu(o,r,e){var i=xo.Z.prototype,s=i.getTicks.call(e),l=i.getTicks.call(e,!0),c=s.length-1,f=i.getInterval.call(e),p=(0,Ai.Xv)(o,r),v=p.extent,m=p.fixMin,x=p.fixMax;if("log"===o.type){var T=Vu(o.base);v=[Vu(v[0])/T,Vu(v[1])/T]}o.setExtent(v[0],v[1]),o.calcNiceExtent({splitNumber:c,fixMin:m,fixMax:x});var O=i.getExtent.call(o);m&&(v[0]=O[0]),x&&(v[1]=O[1]);var G=i.getInterval.call(o),F=v[0],Q=v[1];if(m&&x)G=(Q-F)/c;else if(m)for(Q=v[0]+G*c;Q<v[1]&&isFinite(Q)&&isFinite(v[1]);)G=(0,Rs.r1)(G),Q=v[0]+G*c;else if(x)for(F=v[1]-G*c;F>v[0]&&isFinite(F)&&isFinite(v[0]);)G=(0,Rs.r1)(G),F=v[1]-G*c;else{o.getTicks().length-1>c&&(G=(0,Rs.r1)(G));var Tt=G*c;Q=Math.ceil(v[1]/G)*G,(F=(0,Be.NM)(Q-Tt))<0&&v[0]>=0?(F=0,Q=(0,Be.NM)(Tt)):Q>0&&v[1]<=0&&(Q=0,F=-(0,Be.NM)(Tt))}var xt=(s[0].value-l[0].value)/f,At=(s[c].value-l[c].value)/f;i.setExtent.call(o,F+G*xt,Q+G*At),i.setInterval.call(o,G),(xt||At)&&i.setNiceExtent.call(o,F+G,Q-G)}function $u(o,r){return o.getCoordSysModel()===r}function ru(o,r,e,i){e.getAxesOnZeroOf=function(){return l?[l]:[]};var l,s=o[r],c=e.model,f=c.get(["axisLine","onZero"]),p=c.get(["axisLine","onZeroAxisIndex"]);if(f){if(null!=p)Xu(s[p])&&(l=s[p]);else for(var v in s)if(s.hasOwnProperty(v)&&Xu(s[v])&&!i[m(s[v])]){l=s[v];break}l&&(i[m(l)]=!0)}function m(x){return x.dim+"_"+x.index}}function Xu(o){return o&&"category"!==o.type&&"time"!==o.type&&(0,Ai.Yb)(o)}const Ya=function(){function o(r,e,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Hu,this._initCartesian(r,e,i),this.model=r}return o.prototype.getRect=function(){return this._rect},o.prototype.update=function(r,e){var i=this._axesMap;function s(c){var f,p=(0,_.keys)(c),v=p.length;if(v){for(var m=[],x=v-1;x>=0;x--){var O=c[+p[x]],G=O.model,F=O.scale;(0,Rs.lM)(F)&&G.get("alignTicks")&&null==G.get("interval")?m.push(O):((0,Ai.Jk)(F,G),(0,Rs.lM)(F)&&(f=O))}m.length&&(f||(f=m.pop(),(0,Ai.Jk)(f.scale,f.model)),(0,_.each)(m,function(Q){Wu(Q.scale,Q.model,f.scale)}))}}this._updateScale(r,this.model),s(i.x),s(i.y);var l={};(0,_.each)(i.x,function(c){ru(i,"y",c,l)}),(0,_.each)(i.y,function(c){ru(i,"x",c,l)}),this.resize(this.model,e)},o.prototype.resize=function(r,e,i){var s=r.getBoxLayoutParams(),l=!i&&r.get("containLabel"),c=(0,sn.ME)(s,{width:e.getWidth(),height:e.getHeight()});this._rect=c;var f=this._axesList;function p(){(0,_.each)(f,function(v){var m=v.isHorizontal(),x=m?[0,c.width]:[0,c.height],T=v.inverse?1:0;v.setExtent(x[T],x[1-T]),function If(o,r){var e=o.getExtent(),i=e[0]+e[1];o.toGlobalCoord="x"===o.dim?function(s){return s+r}:function(s){return i-s+r},o.toLocalCoord="x"===o.dim?function(s){return s-r}:function(s){return i-s+r}}(v,m?c.x:c.y)})}p(),l&&((0,_.each)(f,function(v){if(!v.model.get(["axisLabel","inside"])){var m=(0,Ai.Do)(v);if(m){var x=v.isHorizontal()?"height":"width",T=v.model.get(["axisLabel","margin"]);c[x]-=m[x]+T,"top"===v.position?c.y+=m.height+T:"left"===v.position&&(c.x+=m.width+T)}}}),p()),(0,_.each)(this._coordsList,function(v){v.calcAffineTransform()})},o.prototype.getAxis=function(r,e){var i=this._axesMap[r];if(null!=i)return i[e||0]},o.prototype.getAxes=function(){return this._axesList.slice()},o.prototype.getCartesian=function(r,e){if(null!=r&&null!=e)return this._coordsMap["x"+r+"y"+e];(0,_.isObject)(r)&&(e=r.yAxisIndex,r=r.xAxisIndex);for(var s=0,l=this._coordsList;s<l.length;s++)if(l[s].getAxis("x").index===r||l[s].getAxis("y").index===e)return l[s]},o.prototype.getCartesians=function(){return this._coordsList.slice()},o.prototype.convertToPixel=function(r,e,i){var s=this._findConvertTarget(e);return s.cartesian?s.cartesian.dataToPoint(i):s.axis?s.axis.toGlobalCoord(s.axis.dataToCoord(i)):null},o.prototype.convertFromPixel=function(r,e,i){var s=this._findConvertTarget(e);return s.cartesian?s.cartesian.pointToData(i):s.axis?s.axis.coordToData(s.axis.toLocalCoord(i)):null},o.prototype._findConvertTarget=function(r){var f,p,e=r.seriesModel,i=r.xAxisModel||e&&e.getReferringComponents("xAxis",dr.C6).models[0],s=r.yAxisModel||e&&e.getReferringComponents("yAxis",dr.C6).models[0],l=r.gridModel;return e?(0,_.indexOf)(this._coordsList,f=e.coordinateSystem)<0&&(f=null):i&&s?f=this.getCartesian(i.componentIndex,s.componentIndex):i?p=this.getAxis("x",i.componentIndex):s?p=this.getAxis("y",s.componentIndex):l&&l.coordinateSystem===this&&(f=this._coordsList[0]),{cartesian:f,axis:p}},o.prototype.containPoint=function(r){var e=this._coordsList[0];if(e)return e.containPoint(r)},o.prototype._initCartesian=function(r,e,i){var s=this,l=this,c={left:!1,right:!1,top:!1,bottom:!1},f={x:{},y:{}},p={x:0,y:0};if(e.eachComponent("xAxis",v("x"),this),e.eachComponent("yAxis",v("y"),this),!p.x||!p.y)return this._axesMap={},void(this._axesList=[]);function v(m){return function(x,T){if($u(x,r)){var O=x.get("position");"x"===m?"top"!==O&&"bottom"!==O&&(O=c.bottom?"top":"bottom"):"left"!==O&&"right"!==O&&(O=c.left?"right":"left"),c[O]=!0;var G=new Df(m,(0,Ai.aG)(x),[0,0],x.get("type"),O);G.onBand="category"===G.type&&x.get("boundaryGap"),G.inverse=x.get("inverse"),x.axis=G,G.model=x,G.grid=l,G.index=T,l._axesList.push(G),f[m][T]=G,p[m]++}}}this._axesMap=f,(0,_.each)(f.x,function(m,x){(0,_.each)(f.y,function(T,O){var G="x"+x+"y"+O,F=new wf(G);F.master=s,F.model=r,s._coordsMap[G]=F,s._coordsList.push(F),F.addAxis(m),F.addAxis(T)})})},o.prototype._updateScale=function(r,e){function i(s,l){(0,_.each)((0,Ai.PY)(s,l.dim),function(c){l.scale.unionExtentFromData(s,c)})}(0,_.each)(this._axesList,function(s){if(s.scale.setExtent(1/0,-1/0),"category"===s.type){var l=s.model.get("categorySortInfo");s.scale.setSortInfo(l)}}),r.eachSeries(function(s){if(Lf(s)){var l=sh(s),c=l.xAxisModel,f=l.yAxisModel;if(!$u(c,e)||!$u(f,e))return;var p=this.getCartesian(c.componentIndex,f.componentIndex),v=s.getData(),m=p.getAxis("x"),x=p.getAxis("y");i(v,m),i(v,x)}},this)},o.prototype.getTooltipAxes=function(r){var e=[],i=[];return(0,_.each)(this.getCartesians(),function(s){var l=null!=r&&"auto"!==r?s.getAxis(r):s.getBaseAxis(),c=s.getOtherAxis(l);(0,_.indexOf)(e,l)<0&&e.push(l),(0,_.indexOf)(i,c)<0&&i.push(c)}),{baseAxes:e,otherAxes:i}},o.create=function(r,e){var i=[];return r.eachComponent("grid",function(s,l){var c=new o(s,r,e);c.name="grid_"+l,c.resize(s,e,!0),s.coordinateSystem=c,i.push(c)}),r.eachSeries(function(s){if(Lf(s)){var l=sh(s),c=l.xAxisModel,f=l.yAxisModel,p=c.getCoordSysModel();s.coordinateSystem=p.coordinateSystem.getCartesian(c.componentIndex,f.componentIndex)}}),i},o.dimensions=Hu,o}();var aa=D(541),hi=D(7838),va=Math.PI,So=function(){function o(r,e){this.group=new pr.Z,this.opt=e,this.axisModel=r,(0,_.defaults)(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new pr.Z({x:e.position[0],y:e.position[1],rotation:e.rotation});i.updateTransform(),this._transformGroup=i}return o.prototype.hasBuilder=function(r){return!!nu[r]},o.prototype.add=function(r){nu[r](this.opt,this.axisModel,this.group,this._transformGroup)},o.prototype.getGroup=function(){return this.group},o.innerTextLayout=function(r,e,i){var l,c,s=(0,Be.wW)(e-r);return(0,Be.mW)(s)?(c=i>0?"top":"bottom",l="center"):(0,Be.mW)(s-va)?(c=i>0?"bottom":"top",l="center"):(c="middle",l=s>0&&s<va?i>0?"right":"left":i>0?"left":"right"),{rotation:s,textAlign:l,textVerticalAlign:c}},o.makeAxisEventDataBase=function(r){var e={componentType:r.mainType,componentIndex:r.componentIndex};return e[r.mainType+"Index"]=r.componentIndex,e},o.isLabelSilent=function(r){var e=r.get("tooltip");return r.get("silent")||!(r.get("triggerEvent")||e&&e.show)},o}(),nu={axisLine:function(o,r,e,i){var s=r.get(["axisLine","show"]);if("auto"===s&&o.handleAutoShown&&(s=o.handleAutoShown("axisLine")),s){var l=r.axis.getExtent(),c=i.transform,f=[l[0],0],p=[l[1],0],v=f[0]>p[0];c&&((0,Ur.applyTransform)(f,f,c),(0,Ur.applyTransform)(p,p,c));var m=(0,_.extend)({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),x=new aa.Z({shape:{x1:f[0],y1:f[1],x2:p[0],y2:p[1]},style:m,strokeContainThreshold:o.strokeContainThreshold||5,silent:!0,z2:1});ur.subPixelOptimizeLine(x.shape,x.style.lineWidth),x.anid="line",e.add(x);var T=r.get(["axisLine","symbol"]);if(null!=T){var O=r.get(["axisLine","symbolSize"]);(0,_.isString)(T)&&(T=[T,T]),((0,_.isString)(O)||(0,_.isNumber)(O))&&(O=[O,O]);var G=(0,Tn.Cq)(r.get(["axisLine","symbolOffset"])||0,O),F=O[0],Q=O[1];(0,_.each)([{rotate:o.rotation+Math.PI/2,offset:G[0],r:0},{rotate:o.rotation-Math.PI/2,offset:G[1],r:Math.sqrt((f[0]-p[0])*(f[0]-p[0])+(f[1]-p[1])*(f[1]-p[1]))}],function(ft,Tt){if("none"!==T[Tt]&&null!=T[Tt]){var xt=(0,Tn.th)(T[Tt],-F/2,-Q/2,F,Q,m.stroke,!0),At=ft.r+ft.offset,It=v?p:f;xt.attr({rotation:ft.rotate,x:It[0]+At*Math.cos(o.rotation),y:It[1]-At*Math.sin(o.rotation),silent:!0,z2:11}),e.add(xt)}})}}},axisTickLabel:function(o,r,e,i){var s=function ch(o,r,e,i){var s=e.axis,l=e.getModel("axisTick"),c=l.get("show");if("auto"===c&&i.handleAutoShown&&(c=i.handleAutoShown("axisTick")),c&&!s.scale.isBlank()){for(var f=l.getModel("lineStyle"),p=i.tickDirection*l.get("length"),m=fl(s.getTicksCoords(),r.transform,p,(0,_.defaults)(f.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}),"ticks"),x=0;x<m.length;x++)o.add(m[x]);return m}}(e,i,r,o),l=function Bf(o,r,e,i){var s=e.axis;if((0,_.retrieve)(i.axisLabelShow,e.get(["axisLabel","show"]))&&!s.scale.isBlank()){var c=e.getModel("axisLabel"),f=c.get("margin"),p=s.getViewLabels(),v=((0,_.retrieve)(i.labelRotate,c.get("rotate"))||0)*va/180,m=So.innerTextLayout(i.rotation,v,i.labelDirection),x=e.getCategories&&e.getCategories(!0),T=[],O=So.isLabelSilent(e),G=e.get("triggerEvent");return(0,_.each)(p,function(F,Q){var ft="ordinal"===s.scale.type?s.scale.getRawOrdinalNumber(F.tickValue):F.tickValue,Tt=F.formattedLabel,xt=F.rawLabel,At=c;if(x&&x[ft]){var It=x[ft];(0,_.isObject)(It)&&It.textStyle&&(At=new hi.Z(It.textStyle,c,e.ecModel))}var Nt=At.getTextColor()||e.get(["axisLine","lineStyle","color"]),Gt=s.dataToCoord(ft),Wt=new Se.ZP({x:Gt,y:i.labelOffset+i.labelDirection*f,rotation:m.rotation,silent:O,z2:10+(F.level||0),style:(0,Or.Lr)(At,{text:Tt,align:At.getShallow("align",!0)||m.textAlign,verticalAlign:At.getShallow("verticalAlign",!0)||At.getShallow("baseline",!0)||m.textVerticalAlign,fill:(0,_.isFunction)(Nt)?Nt("category"===s.type?xt:"value"===s.type?ft+"":ft,Q):Nt})});if(Wt.anid="label_"+ft,G){var jt=So.makeAxisEventDataBase(e);jt.targetType="axisLabel",jt.value=xt,jt.tickIndex=Q,"category"===s.type&&(jt.dataIndex=ft),(0,Fr.A)(Wt).eventData=jt}r.add(Wt),Wt.updateTransform(),T.push(Wt),o.add(Wt),Wt.decomposeTransform()}),T}}(e,i,r,o);if(function lh(o,r,e){if(!(0,Ai.WY)(o.axis)){var i=o.get(["axisLabel","showMinLabel"]),s=o.get(["axisLabel","showMaxLabel"]),l=(r=r||[])[0],c=r[1],f=r[r.length-1],p=r[r.length-2],v=(e=e||[])[0],m=e[1],x=e[e.length-1],T=e[e.length-2];!1===i?(La(l),La(v)):ns(l,c)&&(i?(La(c),La(m)):(La(l),La(v))),!1===s?(La(f),La(x)):ns(p,f)&&(s?(La(p),La(T)):(La(f),La(x)))}}(r,l,s),function Rf(o,r,e,i){var s=e.axis,l=e.getModel("minorTick");if(l.get("show")&&!s.scale.isBlank()){var c=s.getMinorTicksCoords();if(c.length)for(var f=l.getModel("lineStyle"),p=i*l.get("length"),v=(0,_.defaults)(f.getLineStyle(),(0,_.defaults)(e.getModel("axisTick").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})),m=0;m<c.length;m++)for(var x=fl(c[m],r.transform,p,v,"minorticks_"+m),T=0;T<x.length;T++)o.add(x[T])}}(e,i,r,o.tickDirection),r.get(["axisLabel","hideOverlap"])){var c=(0,Rt.VT)((0,_.map)(l,function(f){return{label:f,priority:f.z2,defaultAttr:{ignore:f.ignore}}}));(0,Rt.yl)(c)}},axisName:function(o,r,e,i){var s=(0,_.retrieve)(o.axisName,r.get("name"));if(s){var T,G,l=r.get("nameLocation"),c=o.nameDirection,f=r.getModel("nameTextStyle"),p=r.get("nameGap")||0,v=r.axis.getExtent(),m=v[0]>v[1]?-1:1,x=["start"===l?v[0]-m*p:"end"===l?v[1]+m*p:(v[0]+v[1])/2,uh(l)?o.labelOffset+c*p:0],O=r.get("nameRotate");null!=O&&(O=O*va/180),uh(l)?T=So.innerTextLayout(o.rotation,O??o.rotation,c):(T=function Yu(o,r,e,i){var l,c,s=(0,Be.wW)(e-o),f=i[0]>i[1],p="start"===r&&!f||"start"!==r&&f;return(0,Be.mW)(s-va/2)?(c=p?"bottom":"top",l="center"):(0,Be.mW)(s-1.5*va)?(c=p?"top":"bottom",l="center"):(c="middle",l=s<1.5*va&&s>va/2?p?"left":"right":p?"right":"left"),{rotation:s,textAlign:l,textVerticalAlign:c}}(o.rotation,l,O||0,v),null!=(G=o.axisNameAvailableWidth)&&(G=Math.abs(G/Math.sin(T.rotation)),!isFinite(G)&&(G=null)));var F=f.getFont(),Q=r.get("nameTruncate",!0)||{},ft=Q.ellipsis,Tt=(0,_.retrieve)(o.nameTruncateMaxWidth,Q.maxWidth,G),xt=new Se.ZP({x:x[0],y:x[1],rotation:T.rotation,silent:So.isLabelSilent(r),style:(0,Or.Lr)(f,{text:s,font:F,overflow:"truncate",width:Tt,ellipsis:ft,fill:f.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:f.get("align")||T.textAlign,verticalAlign:f.get("verticalAlign")||T.textVerticalAlign}),z2:1});if(ur.setTooltipConfig({el:xt,componentModel:r,itemName:s}),xt.__fullText=s,xt.anid="name",r.get("triggerEvent")){var At=So.makeAxisEventDataBase(r);At.targetType="axisName",At.name=s,(0,Fr.A)(xt).eventData=At}i.add(xt),xt.updateTransform(),e.add(xt),xt.decomposeTransform()}}};function La(o){o&&(o.ignore=!0)}function ns(o,r){var e=o&&o.getBoundingRect().clone(),i=r&&r.getBoundingRect().clone();if(e&&i){var s=In.identity([]);return In.rotate(s,s,-o.rotation),e.applyTransform(In.mul([],s,o.getLocalTransform())),i.applyTransform(In.mul([],s,r.getLocalTransform())),e.intersect(i)}}function uh(o){return"middle"===o||"center"===o}function fl(o,r,e,i,s){for(var l=[],c=[],f=[],p=0;p<o.length;p++){var v=o[p].coord;c[0]=v,c[1]=0,f[0]=v,f[1]=e,r&&((0,Ur.applyTransform)(c,c,r),(0,Ur.applyTransform)(f,f,r));var m=new aa.Z({shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:i,z2:2,autoBatch:!0,silent:!0});ur.subPixelOptimizeLine(m.shape,m.style.lineWidth),m.anid=s+"_"+o[p].tickValue,l.push(m)}return l}const Vn=So;function ju(o,r){return"all"===o||(0,_.isArray)(o)&&(0,_.indexOf)(o,r)>=0||o===r}function Ff(o){var r=Ju(o);if(r){var e=r.axisPointerModel,i=r.axis.scale,s=e.option,l=e.get("status"),c=e.get("value");null!=c&&(c=i.parse(c));var f=Bo(e);null==l&&(s.status=f?"show":"hide");var p=i.getExtent().slice();p[0]>p[1]&&p.reverse(),(null==c||c>p[1])&&(c=p[1]),c<p[0]&&(c=p[0]),s.value=c,f&&(s.status=r.axis.scale.isBlank()?"hide":"show")}}function Ju(o){var r=(o.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return r&&r.axesInfo[Ka(o)]}function Bo(o){return!!o.get(["handle","show"])}function Ka(o){return o.type+"||"+o.id}var zf={};const as=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){this.axisPointerClass&&Ff(e),o.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,s,!0)},r.prototype.updateAxisPointer=function(e,i,s,l){this._doUpdateAxisPointerClass(e,s,!1)},r.prototype.remove=function(e,i){var s=this._axisPointer;s&&s.remove(i)},r.prototype.dispose=function(e,i){this._disposeAxisPointer(i),o.prototype.dispose.apply(this,arguments)},r.prototype._doUpdateAxisPointerClass=function(e,i,s){var l=r.getAxisPointerClass(this.axisPointerClass);if(l){var c=function kf(o){var r=Ju(o);return r&&r.axisPointerModel}(e);c?(this._axisPointer||(this._axisPointer=new l)).render(e,c,i,s):this._disposeAxisPointer(i)}},r.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},r.registerAxisPointerClass=function(e,i){zf[e]=i},r.getAxisPointerClass=function(e){return e&&zf[e]},r.type="axis",r}(Ti.Z);var Qu=(0,dr.Yf)();function hh(o,r,e,i){var s=e.axis;if(!s.scale.isBlank()){var l=e.getModel("splitArea"),c=l.getModel("areaStyle"),f=c.get("color"),p=i.coordinateSystem.getRect(),v=s.getTicksCoords({tickModel:l,clamp:!0});if(v.length){var m=f.length,x=Qu(o).splitAreaColors,T=_.createHashMap(),O=0;if(x)for(var G=0;G<v.length;G++){var F=x.get(v[G].tickValue);if(null!=F){O=(F+(m-1)*G)%m;break}}var Q=s.toGlobalCoord(v[0].coord),ft=c.getAreaStyle();for(f=_.isArray(f)?f:[f],G=1;G<v.length;G++){var Tt=s.toGlobalCoord(v[G].coord),xt=void 0,At=void 0,It=void 0,Nt=void 0;s.isHorizontal()?(At=p.y,Nt=p.height,Q=(xt=Q)+(It=Tt-xt)):(xt=p.x,It=p.width,Q=(At=Q)+(Nt=Tt-At));var Gt=v[G-1].tickValue;null!=Gt&&T.set(Gt,O),r.add(new Br.Z({anid:null!=Gt?"area_"+Gt:null,shape:{x:xt,y:At,width:It,height:Nt},style:_.defaults({fill:f[O]},ft),autoBatch:!0,silent:!0})),O=(O+1)%m}Qu(o).splitAreaColors=T}}}function fh(o){Qu(o).splitAreaColors=null}var pn=["axisLine","axisTickLabel","axisName"],Hf=["splitArea","splitLine","minorSplitLine"],dh=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="CartesianAxisPointer",e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new pr.Z,this.group.add(this._axisGroup),e.get("show")){var f=e.getCoordSysModel(),p=oh(f,e),v=new Vn(e,_.extend({handleAutoShown:function(x){for(var T=f.coordinateSystem.getCartesians(),O=0;O<T.length;O++)if((0,Rs.lM)(T[O].getOtherAxis(e.axis).scale))return!0;return!1}},p));_.each(pn,v.add,v),this._axisGroup.add(v.getGroup()),_.each(Hf,function(x){e.get([x,"show"])&&Vf[x](this,this._axisGroup,e,f)},this),l&&"changeAxisOrder"===l.type&&l.isInitSort||ur.groupTransition(c,this._axisGroup,e),o.prototype.render.call(this,e,i,s,l)}},r.prototype.remove=function(){fh(this)},r.type="cartesianAxis",r}(as),Vf={splitLine:function(o,r,e,i){var s=e.axis;if(!s.scale.isBlank()){var l=e.getModel("splitLine"),c=l.getModel("lineStyle"),f=c.get("color");f=_.isArray(f)?f:[f];for(var p=i.coordinateSystem.getRect(),v=s.isHorizontal(),m=0,x=s.getTicksCoords({tickModel:l}),T=[],O=[],G=c.getLineStyle(),F=0;F<x.length;F++){var Q=s.toGlobalCoord(x[F].coord);v?(T[0]=Q,T[1]=p.y,O[0]=Q,O[1]=p.y+p.height):(T[0]=p.x,T[1]=Q,O[0]=p.x+p.width,O[1]=Q);var ft=m++%f.length,xt=new aa.Z({anid:null!=x[F].tickValue?"line_"+x[F].tickValue:null,autoBatch:!0,shape:{x1:T[0],y1:T[1],x2:O[0],y2:O[1]},style:_.defaults({stroke:f[ft]},G),silent:!0});ur.subPixelOptimizeLine(xt.shape,G.lineWidth),r.add(xt)}}},minorSplitLine:function(o,r,e,i){var s=e.axis,c=e.getModel("minorSplitLine").getModel("lineStyle"),f=i.coordinateSystem.getRect(),p=s.isHorizontal(),v=s.getMinorTicksCoords();if(v.length)for(var m=[],x=[],T=c.getLineStyle(),O=0;O<v.length;O++)for(var G=0;G<v[O].length;G++){var F=s.toGlobalCoord(v[O][G].coord);p?(m[0]=F,m[1]=f.y,x[0]=F,x[1]=f.y+f.height):(m[0]=f.x,m[1]=F,x[0]=f.x+f.width,x[1]=F);var Q=new aa.Z({anid:"minor_line_"+v[O][G].tickValue,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:x[0],y2:x[1]},style:T,silent:!0});ur.subPixelOptimizeLine(Q.shape,T.lineWidth),r.add(Q)}},splitArea:function(o,r,e,i){hh(o,r,e,i)}},ph=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="xAxis",r}(dh),Wf=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=ph.type,e}return(0,Re.ZT)(r,o),r.type="yAxis",r}(dh),$f=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="grid",e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i){this.group.removeAll(),e.get("show")&&this.group.add(new Br.Z({shape:e.coordinateSystem.getRect(),style:(0,_.defaults)({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},r.type="grid",r}(Ti.Z),vh={offset:0};function gh(o){o.registerComponentView($f),o.registerComponentModel(wp),o.registerCoordinateSystem("cartesian2d",Ya),Is(o,"x",rh,vh),Is(o,"y",rh,vh),o.registerComponentView(ph),o.registerComponentView(Wf),o.registerPreprocessor(function(r){r.xAxis&&r.yAxis&&!r.grid&&(r.grid={})})}function mn(o){o.eachSeriesByType("radar",function(r){var e=r.getData(),i=[],s=r.coordinateSystem;if(s){var l=s.getIndicatorAxes();_.each(l,function(c,f){e.each(e.mapDimension(l[f].dim),function(p,v){i[v]=i[v]||[];var m=s.dataToPoint(p,f);i[v][f]=Bs(m)?m:au(s)})}),e.each(function(c){var f=_.find(i[c],function(p){return Bs(p)})||au(s);i[c].push(f.slice()),e.setItemLayout(c,i[c])})}})}function Bs(o){return!isNaN(o[0])&&!isNaN(o[1])}function au(o){return[o.cx,o.cy]}function Yf(o){var r=o.polar;if(r){_.isArray(r)||(r=[r]);var e=[];_.each(r,function(i,s){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),o.radar=o.radar||[],_.isArray(o.radar)||(o.radar=[o.radar]),o.radar.push(i)):e.push(i)}),o.polar=e}_.each(o.series,function(i){i&&"radar"===i.type&&i.polarIndex&&(i.radarIndex=i.polarIndex)})}var Jn=D(8015);const oa=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l=e.coordinateSystem,c=this.group,f=e.getData(),p=this._data;function v(T,O){var G=T.getItemVisual(O,"symbol")||"circle";if("none"!==G){var F=Tn.zp(T.getItemVisual(O,"symbolSize")),Q=Tn.th(G,-1,-1,2,2),ft=T.getItemVisual(O,"symbolRotate")||0;return Q.attr({style:{strokeNoScale:!0},z2:100,scaleX:F[0]/2,scaleY:F[1]/2,rotation:ft*Math.PI/180||0}),Q}}function m(T,O,G,F,Q,ft){G.removeAll();for(var Tt=0;Tt<O.length-1;Tt++){var xt=v(F,Q);xt&&(xt.__dimIdx=Tt,T[Tt]?(xt.setPosition(T[Tt]),ur[ft?"initProps":"updateProps"](xt,{x:O[Tt][0],y:O[Tt][1]},e,Q)):xt.setPosition(O[Tt]),G.add(xt))}}function x(T){return _.map(T,function(O){return[l.cx,l.cy]})}f.diff(p).add(function(T){var O=f.getItemLayout(T);if(O){var G=new Jn.Z,F=new ia.Z,Q={shape:{points:O}};G.shape.points=x(O),F.shape.points=x(O),he.KZ(G,Q,e,T),he.KZ(F,Q,e,T);var ft=new pr.Z,Tt=new pr.Z;ft.add(F),ft.add(G),ft.add(Tt),m(F.shape.points,O,Tt,f,T,!0),f.setItemGraphicEl(T,ft)}}).update(function(T,O){var G=p.getItemGraphicEl(O),F=G.childAt(0),Q=G.childAt(1),ft=G.childAt(2),Tt={shape:{points:f.getItemLayout(T)}};!Tt.shape.points||(m(F.shape.points,Tt.shape.points,ft,f,T,!1),(0,he.Zi)(Q),(0,he.Zi)(F),he.D(F,Tt,e),he.D(Q,Tt,e),f.setItemGraphicEl(T,G))}).remove(function(T){c.remove(p.getItemGraphicEl(T))}).execute(),f.eachItemGraphicEl(function(T,O){var G=f.getItemModel(O),F=T.childAt(0),Q=T.childAt(1),ft=T.childAt(2),Tt=f.getItemVisual(O,"style"),xt=Tt.fill;c.add(T),F.useStyle(_.defaults(G.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:xt})),(0,sr.WO)(F,G,"lineStyle"),(0,sr.WO)(Q,G,"areaStyle");var At=G.getModel("areaStyle"),It=At.isEmpty()&&At.parentModel.isEmpty();Q.ignore=It,_.each(["emphasis","select","blur"],function(Wt){var jt=G.getModel([Wt,"areaStyle"]),ee=jt.isEmpty()&&jt.parentModel.isEmpty();Q.ensureState(Wt).ignore=ee&&It}),Q.useStyle(_.defaults(At.getAreaStyle(),{fill:xt,opacity:.7,decal:Tt.decal}));var Nt=G.getModel("emphasis"),Gt=Nt.getModel("itemStyle").getItemStyle();ft.eachChild(function(Wt){if(Wt instanceof gt.ZP){var jt=Wt.style;Wt.useStyle(_.extend({image:jt.image,x:jt.x,y:jt.y,width:jt.width,height:jt.height},Tt))}else Wt.useStyle(Tt),Wt.setColor(xt),Wt.style.strokeNoScale=!0;Wt.ensureState("emphasis").style=_.clone(Gt);var oe=f.getStore().get(f.getDimensionIndex(Wt.__dimIdx),O);(null==oe||isNaN(oe))&&(oe=""),(0,Or.ni)(Wt,(0,Or.k3)(G),{labelFetcher:f.hostModel,labelDataIndex:O,labelDimIndex:Wt.__dimIdx,defaultText:oe,inheritColor:xt,defaultOpacity:Tt.opacity})}),(0,sr.k5)(T,Nt.get("focus"),Nt.get("blurScope"),Nt.get("disabled"))}),this._data=f},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.type="radar",r}(_r.Z);var ii=D(3894);const vi=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e){o.prototype.init.apply(this,arguments),this.legendVisualProvider=new xr(_.bind(this.getData,this),_.bind(this.getRawData,this))},r.prototype.getInitialData=function(e,i){return Ue(this,{generateCoord:"indicator_",generateCoordCount:1/0})},r.prototype.formatTooltip=function(e,i,s){var l=this.getData(),f=this.coordinateSystem.getIndicatorAxes(),p=this.getData().getName(e),v=""===p?this.name:p,m=(0,ii.jT)(this,e);return(0,ii.TX)("section",{header:v,sortBlocks:!0,blocks:_.map(f,function(x){var T=l.get(l.mapDimension(x.dim),e);return(0,ii.TX)("nameValue",{markerType:"subItem",markerColor:m,name:x.name,value:T,sortParam:T})})})},r.prototype.getTooltipPosition=function(e){if(null!=e)for(var i=this.getData(),s=this.coordinateSystem,l=i.getValues(_.map(s.dimensions,function(v){return i.mapDimension(v)}),e),c=0,f=l.length;c<f;c++)if(!isNaN(l[c])){var p=s.getIndicatorAxes();return s.coordToPoint(p[c].dataToCoord(l[c]),c)}},r.type="series.radar",r.dependencies=["radar"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},r}(rr.Z);var Bi=eu.value;function dl(o,r){return _.defaults({show:r},o)}const Kf=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),i=this.get("splitNumber"),s=this.get("scale"),l=this.get("axisLine"),c=this.get("axisTick"),f=this.get("axisLabel"),p=this.get("axisName"),v=this.get(["axisName","show"]),m=this.get(["axisName","formatter"]),x=this.get("axisNameGap"),T=this.get("triggerEvent"),O=_.map(this.get("indicator")||[],function(G){null!=G.max&&G.max>0&&!G.min?G.min=0:null!=G.min&&G.min<0&&!G.max&&(G.max=0);var F=p;null!=G.color&&(F=_.defaults({color:G.color},p));var Q=_.merge(_.clone(G),{boundaryGap:e,splitNumber:i,scale:s,axisLine:l,axisTick:c,axisLabel:f,name:G.text,showName:v,nameLocation:"end",nameGap:x,nameTextStyle:F,triggerEvent:T},!1);_.isString(m)?Q.name=m.replace("{value}",Q.name??""):_.isFunction(m)&&(Q.name=m(Q.name,Q));var Tt=new hi.Z(Q,null,this.ecModel);return _.mixin(Tt,tu.W.prototype),Tt.mainType="radar",Tt.componentIndex=this.componentIndex,Tt},this);this._indicatorModels=O},r.prototype.getIndicatorModels=function(){return this._indicatorModels},r.type="radar",r.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:_.merge({lineStyle:{color:"#bbb"}},Bi.axisLine),axisLabel:dl(Bi.axisLabel,!1),axisTick:dl(Bi.axisTick,!1),splitLine:dl(Bi.splitLine,!0),splitArea:dl(Bi.splitArea,!0),indicator:[]},r}(Pi.Z);var os=D(7610),_h=D(2283),jf=["axisLine","axisTickLabel","axisName"];const Jf=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},r.prototype._buildAxes=function(e){var i=e.coordinateSystem,s=i.getIndicatorAxes(),l=_.map(s,function(c){var f=c.model.get("showName")?c.name:"";return new Vn(c.model,{axisName:f,position:[i.cx,i.cy],rotation:c.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});_.each(l,function(c){_.each(jf,c.add,c),this.group.add(c.getGroup())},this)},r.prototype._buildSplitLineAndArea=function(e){var i=e.coordinateSystem,s=i.getIndicatorAxes();if(s.length){var l=e.get("shape"),c=e.getModel("splitLine"),f=e.getModel("splitArea"),p=c.getModel("lineStyle"),v=f.getModel("areaStyle"),m=c.get("show"),x=f.get("show"),T=p.get("color"),O=v.get("color"),G=_.isArray(T)?T:[T],F=_.isArray(O)?O:[O],Q=[],ft=[];if("circle"===l)for(var xt=s[0].getTicksCoords(),At=i.cx,It=i.cy,Nt=0;Nt<xt.length;Nt++)m&&Q[Tt(Q,G,Nt)].push(new os.Z({shape:{cx:At,cy:It,r:xt[Nt].coord}})),x&&Nt<xt.length-1&&ft[Tt(ft,F,Nt)].push(new _h.Z({shape:{cx:At,cy:It,r0:xt[Nt].coord,r:xt[Nt+1].coord}}));else{var Wt,jt=_.map(s,function(Ae,ke){var Je=Ae.getTicksCoords();return Wt=null==Wt?Je.length-1:Math.min(Je.length-1,Wt),_.map(Je,function($e){return i.coordToPoint($e.coord,ke)})}),ee=[];for(Nt=0;Nt<=Wt;Nt++){for(var oe=[],de=0;de<s.length;de++)oe.push(jt[de][Nt]);oe[0]&&oe.push(oe[0].slice()),m&&Q[Tt(Q,G,Nt)].push(new ia.Z({shape:{points:oe}})),x&&ee&&ft[Tt(ft,F,Nt-1)].push(new Jn.Z({shape:{points:oe.concat(ee)}})),ee=oe.slice().reverse()}}var xe=p.getLineStyle(),be=v.getAreaStyle();_.each(ft,function(Ae,ke){this.group.add(ur.mergePath(Ae,{style:_.defaults({stroke:"none",fill:F[ke%F.length]},be),silent:!0}))},this),_.each(Q,function(Ae,ke){this.group.add(ur.mergePath(Ae,{style:_.defaults({fill:"none",stroke:G[ke%G.length]},xe),silent:!0}))},this)}function Tt(Ae,ke,Je){var $e=Je%ke.length;return Ae[$e]=Ae[$e]||[],$e}},r.type="radar",r}(Ti.Z),yh=function(o){function r(e,i,s){var l=o.call(this,e,i,s)||this;return l.type="value",l.angle=0,l.name="",l}return(0,Re.ZT)(r,o),r}(Xa.Z),td=function(){function o(r,e,i){this.dimensions=[],this._model=r,this._indicatorAxes=(0,_.map)(r.getIndicatorModels(),function(s,l){var c="indicator_"+l,f=new yh(c,new xo.Z);return f.name=s.get("name"),f.model=s,s.axis=f,this.dimensions.push(c),f},this),this.resize(r,i)}return o.prototype.getIndicatorAxes=function(){return this._indicatorAxes},o.prototype.dataToPoint=function(r,e){return this.coordToPoint(this._indicatorAxes[e].dataToCoord(r),e)},o.prototype.coordToPoint=function(r,e){var s=this._indicatorAxes[e].angle;return[this.cx+r*Math.cos(s),this.cy-r*Math.sin(s)]},o.prototype.pointToData=function(r){var e=r[0]-this.cx,i=r[1]-this.cy,s=Math.sqrt(e*e+i*i);e/=s,i/=s;for(var f,l=Math.atan2(-i,e),c=1/0,p=-1,v=0;v<this._indicatorAxes.length;v++){var m=this._indicatorAxes[v],x=Math.abs(l-m.angle);x<c&&(f=m,p=v,c=x)}return[p,+(f&&f.coordToData(s))]},o.prototype.resize=function(r,e){var i=r.get("center"),s=e.getWidth(),l=e.getHeight(),c=Math.min(s,l)/2;this.cx=Be.GM(i[0],s),this.cy=Be.GM(i[1],l),this.startAngle=r.get("startAngle")*Math.PI/180;var f=r.get("radius");((0,_.isString)(f)||(0,_.isNumber)(f))&&(f=[0,f]),this.r0=Be.GM(f[0],c),this.r=Be.GM(f[1],c),(0,_.each)(this._indicatorAxes,function(p,v){p.setExtent(this.r0,this.r);var m=this.startAngle+v*Math.PI*2/this._indicatorAxes.length;m=Math.atan2(Math.sin(m),Math.cos(m)),p.angle=m},this)},o.prototype.update=function(r,e){var i=this._indicatorAxes,s=this._model;(0,_.each)(i,function(f){f.scale.setExtent(1/0,-1/0)}),r.eachSeriesByType("radar",function(f,p){if("radar"===f.get("coordinateSystem")&&r.getComponent("radar",f.get("radarIndex"))===s){var v=f.getData();(0,_.each)(i,function(m){m.scale.unionExtentFromData(v,v.mapDimension(m.dim))})}},this);var l=s.get("splitNumber"),c=new xo.Z;c.setExtent(0,l),c.setInterval(1),(0,_.each)(i,function(f,p){Wu(f.scale,f.model,c)})},o.prototype.convertToPixel=function(r,e,i){return console.warn("Not implemented."),null},o.prototype.convertFromPixel=function(r,e,i){return console.warn("Not implemented."),null},o.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},o.create=function(r,e){var i=[];return r.eachComponent("radar",function(s){var l=new o(s,r,e);i.push(l),s.coordinateSystem=l}),r.eachSeriesByType("radar",function(s){"radar"===s.get("coordinateSystem")&&(s.coordinateSystem=i[s.get("radarIndex")||0])}),i},o.dimensions=[],o}();function ed(o){o.registerCoordinateSystem("radar",td),o.registerComponentModel(Kf),o.registerComponentView(Jf),o.registerVisual({seriesType:"radar",reset:function(r){var e=r.getData();e.each(function(i){e.setItemVisual(i,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}var qu=D(7100),Ca=D(3626),ou=D(89),xh="\0_ec_interaction_mutex";function Sh(o,r){return!!lu(o)[r]}function lu(o){return o[xh]||(o[xh]={})}function ce(o,r,e,i,s){o.pointerChecker&&o.pointerChecker(i,s.originX,s.originY)&&(Ca.sT(i.event),uu(o,r,e,i,s))}function uu(o,r,e,i,s){s.isAvailableBehavior=(0,_.bind)(Rn,null,e,i),o.trigger(r,s)}function Rn(o,r,e){var i=e[o];return!o||i&&(!(0,_.isString)(i)||r.event[i+"Key"])}ou.zl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},_.noop);const Go=function(o){function r(e){var i=o.call(this)||this;i._zr=e;var s=(0,_.bind)(i._mousedownHandler,i),l=(0,_.bind)(i._mousemoveHandler,i),c=(0,_.bind)(i._mouseupHandler,i),f=(0,_.bind)(i._mousewheelHandler,i),p=(0,_.bind)(i._pinchHandler,i);return i.enable=function(v,m){this.disable(),this._opt=(0,_.defaults)((0,_.clone)(m)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==v&&(v=!0),(!0===v||"move"===v||"pan"===v)&&(e.on("mousedown",s),e.on("mousemove",l),e.on("mouseup",c)),(!0===v||"scale"===v||"zoom"===v)&&(e.on("mousewheel",f),e.on("pinch",p))},i.disable=function(){e.off("mousedown",s),e.off("mousemove",l),e.off("mouseup",c),e.off("mousewheel",f),e.off("pinch",p)},i}return(0,Re.ZT)(r,o),r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype.setPointerChecker=function(e){this.pointerChecker=e},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(e){if(!Ca.x1(e)){for(var i=e.target;i;){if(i.draggable)return;i=i.__hostTarget||i.parent}var s=e.offsetX,l=e.offsetY;this.pointerChecker&&this.pointerChecker(e,s,l)&&(this._x=s,this._y=l,this._dragging=!0)}},r.prototype._mousemoveHandler=function(e){if(this._dragging&&Rn("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!Sh(this._zr,"globalPan")){var i=e.offsetX,s=e.offsetY,l=this._x,c=this._y,f=i-l,p=s-c;this._x=i,this._y=s,this._opt.preventDefaultMouseMove&&Ca.sT(e.event),uu(this,"pan","moveOnMouseMove",e,{dx:f,dy:p,oldX:l,oldY:c,newX:i,newY:s,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(e){Ca.x1(e)||(this._dragging=!1)},r.prototype._mousewheelHandler=function(e){var i=Rn("zoomOnMouseWheel",e,this._opt),s=Rn("moveOnMouseWheel",e,this._opt),l=e.wheelDelta,c=Math.abs(l),f=e.offsetX,p=e.offsetY;if(0!==l&&(i||s)){if(i){var v=c>3?1.4:c>1?1.2:1.1;ce(this,"zoom","zoomOnMouseWheel",e,{scale:l>0?v:1/v,originX:f,originY:p,isAvailableBehavior:null})}if(s){var x=Math.abs(l);ce(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(l>0?1:-1)*(x>3?.4:x>1?.15:.05),originX:f,originY:p,isAvailableBehavior:null})}}},r.prototype._pinchHandler=function(e){Sh(this._zr,"globalPan")||ce(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},r}(qu.Z);function tc(o,r,e){var i=o.target;i.x+=r,i.y+=e,i.dirty()}function Gs(o,r,e,i){var s=o.target,l=o.zoomLimit,c=o.zoom=o.zoom||1;if(c*=r,l){var f=l.min||0;c=Math.max(Math.min(l.max||1/0,c),f)}var v=c/o.zoom;o.zoom=c,s.x-=(e-s.x)*(v-1),s.y-=(i-s.y)*(v-1),s.scaleX*=v,s.scaleY*=v,s.dirty()}var cu={axisPointer:1,tooltip:1,brush:1};function uo(o,r,e){var i=r.getComponentByElement(o.topTarget),s=i&&i.coordinateSystem;return i&&i!==e&&!cu.hasOwnProperty(i.mainType)&&s&&s.model!==e}var nd=D(3572),pl=D(2710),id=D(3033);function Zs(o){(0,_.isString)(o)&&(o=(new DOMParser).parseFromString(o,"text/xml"));var e=o;for(9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}var ec,ss={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Ch=(0,_.keys)(ss),vl={"alignment-baseline":"textBaseline","stop-color":"stopColor"},rc=(0,_.keys)(vl),hu=function(){function o(){this._defs={},this._root=null}return o.prototype.parse=function(r,e){e=e||{};var i=Zs(r);this._defsUsePending=[];var s=new pr.Z;this._root=s;var m,x,l=[],c=i.getAttribute("viewBox")||"",f=parseFloat(i.getAttribute("width")||e.width),p=parseFloat(i.getAttribute("height")||e.height);isNaN(f)&&(f=null),isNaN(p)&&(p=null),Vi(i,s,null,!0,!1);for(var v=i.firstChild;v;)this._parseNode(v,s,l,null,!1,!1),v=v.nextSibling;if(function _l(o,r){for(var e=0;e<r.length;e++){var i=r[e];i[0].style[i[1]]=o[i[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],c){var T=ic(c);T.length>=4&&(m={x:parseFloat(T[0]||0),y:parseFloat(T[1]||0),width:parseFloat(T[2]),height:parseFloat(T[3])})}if(m&&null!=f&&null!=p&&(x=oc(m,{x:0,y:0,width:f,height:p}),!e.ignoreViewBox)){var O=s;(s=new pr.Z).add(O),O.scaleX=O.scaleY=x.scale,O.x=x.x,O.y=x.y}return!e.ignoreRootClip&&null!=f&&null!=p&&s.setClipPath(new Br.Z({shape:{x:0,y:0,width:f,height:p}})),{root:s,width:f,height:p,viewBoxRect:m,viewBoxTransform:x,named:l}},o.prototype._parseNode=function(r,e,i,s,l,c){var p,f=r.nodeName.toLowerCase(),v=s;if("defs"===f&&(l=!0),"text"===f&&(c=!0),"defs"===f||"switch"===f)p=e;else{if(!l){var m=ec[f];if(m&&(0,_.hasOwn)(ec,f)){p=m.call(this,r,e);var x=r.getAttribute("name");if(x){var T={name:x,namedFrom:null,svgNodeTagLower:f,el:p};i.push(T),"g"===f&&(v=T)}else s&&i.push({name:s.name,namedFrom:s,svgNodeTagLower:f,el:p});e.add(p)}}var O=ls[f];if(O&&(0,_.hasOwn)(ls,f)){var G=O.call(this,r),F=r.getAttribute("id");F&&(this._defs[F]=G)}}if(p&&p.isGroup)for(var Q=r.firstChild;Q;)1===Q.nodeType?this._parseNode(Q,p,i,v,l,c):3===Q.nodeType&&c&&this._parseText(Q,p),Q=Q.nextSibling},o.prototype._parseText=function(r,e){var i=new V.Z({style:{text:r.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Na(e,i),Vi(r,i,this._defsUsePending,!1,!1),function Mh(o,r){var e=r.__selfStyle;if(e){var i=e.textBaseline,s=i;i&&"auto"!==i&&"baseline"!==i?"before-edge"===i||"text-before-edge"===i?s="top":"after-edge"===i||"text-after-edge"===i?s="bottom":("central"===i||"mathematical"===i)&&(s="middle"):s="alphabetic",o.style.textBaseline=s}var l=r.__inheritedStyle;if(l){var c=l.textAlign,f=c;c&&("middle"===c&&(f="center"),o.style.textAlign=f)}}(i,e);var s=i.style,l=s.fontSize;l&&l<9&&(s.fontSize=9,i.scaleX*=l/9,i.scaleY*=l/9);var c=(s.fontSize||s.fontFamily)&&[s.fontStyle,s.fontWeight,(s.fontSize||12)+"px",s.fontFamily||"sans-serif"].join(" ");s.font=c;var f=i.getBoundingRect();return this._textX+=f.width,e.add(i),i},o.internalField=void(ec={g:function(r,e){var i=new pr.Z;return Na(e,i),Vi(r,i,this._defsUsePending,!1,!1),i},rect:function(r,e){var i=new Br.Z;return Na(e,i),Vi(r,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(r.getAttribute("x")||"0"),y:parseFloat(r.getAttribute("y")||"0"),width:parseFloat(r.getAttribute("width")||"0"),height:parseFloat(r.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(r,e){var i=new os.Z;return Na(e,i),Vi(r,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),r:parseFloat(r.getAttribute("r")||"0")}),i.silent=!0,i},line:function(r,e){var i=new aa.Z;return Na(e,i),Vi(r,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(r.getAttribute("x1")||"0"),y1:parseFloat(r.getAttribute("y1")||"0"),x2:parseFloat(r.getAttribute("x2")||"0"),y2:parseFloat(r.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(r,e){var i=new nd.Z;return Na(e,i),Vi(r,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),rx:parseFloat(r.getAttribute("rx")||"0"),ry:parseFloat(r.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(r,e){var s,i=r.getAttribute("points");i&&(s=gl(i));var l=new Jn.Z({shape:{points:s||[]},silent:!0});return Na(e,l),Vi(r,l,this._defsUsePending,!1,!1),l},polyline:function(r,e){var s,i=r.getAttribute("points");i&&(s=gl(i));var l=new ia.Z({shape:{points:s||[]},silent:!0});return Na(e,l),Vi(r,l,this._defsUsePending,!1,!1),l},image:function(r,e){var i=new gt.ZP;return Na(e,i),Vi(r,i,this._defsUsePending,!1,!1),i.setStyle({image:r.getAttribute("xlink:href")||r.getAttribute("href"),x:+r.getAttribute("x"),y:+r.getAttribute("y"),width:+r.getAttribute("width"),height:+r.getAttribute("height")}),i.silent=!0,i},text:function(r,e){var i=r.getAttribute("x")||"0",s=r.getAttribute("y")||"0",l=r.getAttribute("dx")||"0",c=r.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(l),this._textY=parseFloat(s)+parseFloat(c);var f=new pr.Z;return Na(e,f),Vi(r,f,this._defsUsePending,!1,!0),f},tspan:function(r,e){var i=r.getAttribute("x"),s=r.getAttribute("y");null!=i&&(this._textX=parseFloat(i)),null!=s&&(this._textY=parseFloat(s));var l=r.getAttribute("dx")||"0",c=r.getAttribute("dy")||"0",f=new pr.Z;return Na(e,f),Vi(r,f,this._defsUsePending,!1,!0),this._textX+=parseFloat(l),this._textY+=parseFloat(c),f},path:function(r,e){var i=r.getAttribute("d")||"",s=(0,pl.iR)(i);return Na(e,s),Vi(r,s,this._defsUsePending,!1,!1),s.silent=!0,s}}),o}(),ls={lineargradient:function(o){var r=parseInt(o.getAttribute("x1")||"0",10),e=parseInt(o.getAttribute("y1")||"0",10),i=parseInt(o.getAttribute("x2")||"10",10),s=parseInt(o.getAttribute("y2")||"0",10),l=new xi.Z(r,e,i,s);return us(o,l),cs(o,l),l},radialgradient:function(o){var r=parseInt(o.getAttribute("cx")||"0",10),e=parseInt(o.getAttribute("cy")||"0",10),i=parseInt(o.getAttribute("r")||"0",10),s=new id.Z(r,e,i);return us(o,s),cs(o,s),s}};function us(o,r){"userSpaceOnUse"===o.getAttribute("gradientUnits")&&(r.global=!0)}function cs(o,r){for(var e=o.firstChild;e;){if(1===e.nodeType&&"stop"===e.nodeName.toLocaleLowerCase()){var s,i=e.getAttribute("offset");s=i&&i.indexOf("%")>0?parseInt(i,10)/100:i?parseFloat(i):0;var l={};Zo(e,l,l);var c=l.stopColor||e.getAttribute("stop-color")||"#000000";r.colorStops.push({offset:s,color:c})}e=e.nextSibling}}function Na(o,r){o&&o.__inheritedStyle&&(r.__inheritedStyle||(r.__inheritedStyle={}),(0,_.defaults)(r.__inheritedStyle,o.__inheritedStyle))}function gl(o){for(var r=ic(o),e=[],i=0;i<r.length;i+=2){var s=parseFloat(r[i]),l=parseFloat(r[i+1]);e.push([s,l])}return e}function Vi(o,r,e,i,s){var l=r,c=l.__inheritedStyle=l.__inheritedStyle||{},f={};1===o.nodeType&&(function Ph(o,r){var e=o.getAttribute("transform");if(e){e=e.replace(/,/g," ");var i=[],s=null;e.replace(gi,function(x,T,O){return i.push(T,O),""});for(var l=i.length-1;l>0;l-=2){var f=i[l-1],p=ic(i[l]);switch(s=s||In.create(),f){case"translate":In.translate(s,s,[parseFloat(p[0]),parseFloat(p[1]||"0")]);break;case"scale":In.scale(s,s,[parseFloat(p[0]),parseFloat(p[1]||p[0])]);break;case"rotate":In.rotate(s,s,-parseFloat(p[0])*yl);break;case"skewX":var v=Math.tan(parseFloat(p[0])*yl);In.mul(s,[1,0,v,1,0,0],s);break;case"skewY":var m=Math.tan(parseFloat(p[0])*yl);In.mul(s,[1,m,0,1,0,0],s);break;case"matrix":s[0]=parseFloat(p[0]),s[1]=parseFloat(p[1]),s[2]=parseFloat(p[2]),s[3]=parseFloat(p[3]),s[4]=parseFloat(p[4]),s[5]=parseFloat(p[5])}}r.setLocalTransform(s)}}(o,r),Zo(o,c,f),i||function fu(o,r,e){for(var i=0;i<Ch.length;i++)null!=(l=o.getAttribute(s=Ch[i]))&&(r[ss[s]]=l);for(i=0;i<rc.length;i++){var s,l;null!=(l=o.getAttribute(s=rc[i]))&&(e[vl[s]]=l)}}(o,c,f)),l.style=l.style||{},null!=c.fill&&(l.style.fill=nc(l,"fill",c.fill,e)),null!=c.stroke&&(l.style.stroke=nc(l,"stroke",c.stroke,e)),(0,_.each)(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(p){null!=c[p]&&(l.style[p]=parseFloat(c[p]))}),(0,_.each)(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(p){null!=c[p]&&(l.style[p]=c[p])}),s&&(l.__selfStyle=f),c.lineDash&&(l.style.lineDash=(0,_.map)(ic(c.lineDash),function(p){return parseFloat(p)})),("hidden"===c.visibility||"collapse"===c.visibility)&&(l.invisible=!0),"none"===c.display&&(l.ignore=!0)}var bh=/^url\(\s*#(.*?)\)/;function nc(o,r,e,i){var s=e&&e.match(bh);if(!s)return"none"===e&&(e=null),e;var l=(0,_.trim)(s[1]);i.push([o,r,l])}var ml=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function ic(o){return o.match(ml)||[]}var gi=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,yl=Math.PI/180,ac=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Zo(o,r,e){var i=o.getAttribute("style");if(i){ac.lastIndex=0;for(var s;null!=(s=ac.exec(i));){var l=s[1],c=(0,_.hasOwn)(ss,l)?ss[l]:null;c&&(r[c]=s[2]);var f=(0,_.hasOwn)(vl,l)?vl[l]:null;f&&(e[f]=s[2])}}}function oc(o,r){var s=Math.min(r.width/o.width,r.height/o.height);return{scale:s,x:-(o.x+o.width/2)*s+(r.x+r.width/2),y:-(o.y+o.height/2)*s+(r.y+r.height/2)}}for(var du=D(3392),Fs=(0,_.createHashMap)(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),hs=function(){function o(r,e){this.type="geoSVG",this._usedGraphicMap=(0,_.createHashMap)(),this._freedGraphics=[],this._mapName=r,this._parsedXML=Zs(e)}return o.prototype.load=function(){var r=this._firstGraphic;if(!r){r=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(r),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=function ad(o){var r=[],e=(0,_.createHashMap)();return(0,_.each)(o,function(i){if(null==i.namedFrom){var s=new du.Im(i.name,i.el);r.push(s),e.set(i.name,s)}}),{regions:r,regionsMap:e}}(r.named),s=e.regionsMap;this._regions=e.regions,this._regionsMap=s}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},o.prototype._buildGraphic=function(r){var e,i;try{e=r&&function sc(o,r){return(new hu).parse(o,r)}(r,{ignoreViewBox:!0,ignoreRootClip:!0})||{},(0,_.assert)(null!=(i=e.root))}catch(Q){throw new Error("Invalid svg format\n"+Q.message)}var s=new pr.Z;s.add(i),s.isGeoSVGGraphicRoot=!0;var l=e.width,c=e.height,f=e.viewBoxRect,p=this._boundingRect;if(!p){var v=void 0,m=void 0,x=void 0,T=void 0;if(null!=l?(v=0,x=l):f&&(v=f.x,x=f.width),null!=c?(m=0,T=c):f&&(m=f.y,T=f.height),null==v||null==m){var O=i.getBoundingRect();null==v&&(v=O.x,x=O.width),null==m&&(m=O.y,T=O.height)}p=this._boundingRect=new bn.Z(v,m,x,T)}if(f){var G=oc(f,p);i.scaleX=i.scaleY=G.scale,i.x=G.x,i.y=G.y}s.setClipPath(new Br.Z({shape:p.plain()}));var F=[];return(0,_.each)(e.named,function(Q){null!=Fs.get(Q.svgNodeTagLower)&&(F.push(Q),function Ah(o){o.silent=!1,o.isGroup&&o.traverse(function(r){r.silent=!1})}(Q.el))}),{root:s,boundingRect:p,named:F}},o.prototype.useGraphic=function(r){var e=this._usedGraphicMap,i=e.get(r);return i||(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(r,i),i)},o.prototype.freeGraphic=function(r){var e=this._usedGraphicMap,i=e.get(r);i&&(e.removeKey(r),this._freedGraphics.push(i))},o}(),lc=D(3153),uc=[126,25],co=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],fs=0;fs<co.length;fs++)for(var ds=0;ds<co[fs].length;ds++)co[fs][ds][0]/=10.5,co[fs][ds][1]/=-14,co[fs][ds][0]+=uc[0],co[fs][ds][1]+=uc[1];var od=D(9356),sd=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],vs=function(){function o(r,e,i){this.type="geoJSON",this._parsedMap=(0,_.createHashMap)(),this._mapName=r,this._specialAreas=i,this._geoJSON=function fc(o){return(0,_.isString)(o)?typeof JSON<"u"&&JSON.parse?JSON.parse(o):new Function("return ("+o+");")():o}(e)}return o.prototype.load=function(r,e){var i=this._parsedMap.get(e=e||"name");if(!i){var s=this._parseToRegions(e);i=this._parsedMap.set(e,{regions:s,boundingRect:hc(s)})}var l=(0,_.createHashMap)(),c=[];return(0,_.each)(i.regions,function(f){var p=f.name;r&&(0,_.hasOwn)(r,p)&&(f=f.cloneShallow(p=r[p])),c.push(f),l.set(p,f)}),{regions:c,boundingRect:i.boundingRect||new bn.Z(0,0,0,0),regionsMap:l}},o.prototype._parseToRegions=function(r){var s,e=this._mapName,i=this._geoJSON;try{s=i?(0,lc.Z)(i,r):[]}catch(l){throw new Error("Invalid geoJson format\n"+l.message)}return function Eh(o,r){if("china"===o){for(var e=0;e<r.length;e++)if("\u5357\u6d77\u8bf8\u5c9b"===r[e].name)return;r.push(new du.Ni("\u5357\u6d77\u8bf8\u5c9b",_.map(co,function(i){return{type:"polygon",exterior:i}}),uc))}}(e,s),(0,_.each)(s,function(l){var c=l.name;(0,od.Z)(e,l),function cc(o,r){"china"===o&&"\u53f0\u6e7e"===r.name&&r.geometries.push({type:"polygon",exterior:sd[0]})}(e,l);var f=this._specialAreas&&this._specialAreas[c];f&&l.transformTo(f.left,f.top,f.width,f.height)},this),s},o.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},o}();function hc(o){for(var r,e=0;e<o.length;e++){var i=o[e].getBoundingRect();(r=r||i.clone()).union(i)}return r}var xl=(0,_.createHashMap)();const Ia_getGeoResource=function(o){return xl.get(o)},Ia_load=function(o,r,e){var i=xl.get(o);if(i)return i.load(r,e)};var Sl=D(7587),Ma=D(4081),dc=["rect","circle","line","ellipse","polygon","polyline","path"],wh=_.createHashMap(dc),pu=_.createHashMap(dc.concat(["g"])),Dh=_.createHashMap(dc.concat(["g"])),Tl=(0,dr.Yf)();function pc(o){var r=o.getItemStyle(),e=o.get("areaColor");return null!=e&&(r.fill=e),r}function ks(o){var r=o.style;r&&(r.stroke=r.stroke||r.fill,r.fill=null)}function gc(o,r,e,i){var s=i.getModel("itemStyle"),l=i.getModel(["emphasis","itemStyle"]),c=i.getModel(["blur","itemStyle"]),f=i.getModel(["select","itemStyle"]),p=pc(s),v=pc(l),m=pc(f),x=pc(c),T=o.data;if(T){var O=T.getItemVisual(e,"style"),G=T.getItemVisual(e,"decal");o.isVisualEncodedByVisualMap&&O.fill&&(p.fill=O.fill),G&&(p.decal=(0,Sl.I)(G,o.api))}r.setStyle(p),r.style.strokeNoScale=!0,r.ensureState("emphasis").style=v,r.ensureState("select").style=m,r.ensureState("blur").style=x,(0,sr.MA)(r)}function vu(o,r,e,i,s,l,c){var f=o.data,p=o.isGeo,v=f&&isNaN(f.get(f.mapDimension("value"),l)),m=f&&f.getItemLayout(l);if(p||v||m&&m.showLabel){var x=p?e:l,T=void 0;(!f||l>=0)&&(T=s);var O=c?{normal:{align:"center",verticalAlign:"middle"}}:null;(0,Or.ni)(r,(0,Or.k3)(i),{labelFetcher:T,labelDataIndex:x,defaultText:e},O);var G=r.getTextContent();if(G&&(Tl(G).ignore=G.ignore,r.textConfig&&c)){var F=r.getBoundingRect().clone();r.textConfig.layoutRect=F,r.textConfig.position=[(c[0]-F.x)/F.width*100+"%",(c[1]-F.y)/F.height*100+"%"]}r.disableLabelAnimation=!0}else r.removeTextContent(),r.removeTextConfig(),r.disableLabelAnimation=null}function _c(o,r,e,i,s,l){o.data?o.data.setItemGraphicEl(l,r):(0,Fr.A)(r).eventData={componentType:"geo",componentIndex:s.componentIndex,geoIndex:s.componentIndex,name:e,region:i&&i.option||{}}}function Lh(o,r,e,i,s){o.data||ur.setTooltipConfig({el:r,componentModel:s,itemName:e,itemTooltipOption:i.get("tooltip")})}function H(o,r,e,i,s){r.highDownSilentOnTouch=!!s.get("selectedMode");var l=i.getModel("emphasis"),c=l.get("focus");return(0,sr.k5)(r,c,l.get("blurScope"),l.get("disabled")),o.isGeo&&(0,sr.th)(r,s,e),c}function Lt(o,r,e){var s,i=[];function l(){s=[]}function c(){s.length&&(i.push(s),s=[])}var f=r({polygonStart:l,polygonEnd:c,lineStart:l,lineEnd:c,point:function(p,v){isFinite(p)&&isFinite(v)&&s.push([p,v])},sphere:function(){}});return!e&&f.polygonStart(),_.each(o,function(p){f.lineStart();for(var v=0;v<p.length;v++)f.point(p[v][0],p[v][1]);f.lineEnd()}),!e&&f.polygonEnd(),i}const E=function(){function o(r){var e=new pr.Z;this.uid=(0,Ii.Kr)("ec_map_draw"),this._controller=new Go(r.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new pr.Z),e.add(this._svgGroup=new pr.Z)}return o.prototype.draw=function(r,e,i,s,l){var c="geo"===r.mainType,f=r.getData&&r.getData();c&&e.eachComponent({mainType:"series",subType:"map"},function(ft){!f&&ft.getHostGeoModel()===r&&(f=ft.getData())});var p=r.coordinateSystem,v=this._regionsGroup,m=this.group,x=p.getTransformInfo(),T=x.raw,O=x.roam;!v.childAt(0)||l?(m.x=O.x,m.y=O.y,m.scaleX=O.scaleX,m.scaleY=O.scaleY,m.dirty()):he.D(m,O,r);var F=f&&f.getVisual("visualMeta")&&f.getVisual("visualMeta").length>0,Q={api:i,geo:p,mapOrGeoModel:r,data:f,isVisualEncodedByVisualMap:F,isGeo:c,transformInfoRaw:T};"geoJSON"===p.resourceType?this._buildGeoJSON(Q):"geoSVG"===p.resourceType&&this._buildSVG(Q),this._updateController(r,e,i),this._updateMapSelectHandler(r,v,i,s)},o.prototype._buildGeoJSON=function(r){var e=this._regionsGroupByName=_.createHashMap(),i=_.createHashMap(),s=this._regionsGroup,l=r.transformInfoRaw,c=r.mapOrGeoModel,f=r.data,p=r.geo.projection,v=p&&p.stream;function m(O,G){return G&&(O=G(O)),O&&[O[0]*l.scaleX+l.x,O[1]*l.scaleY+l.y]}function x(O){for(var G=[],F=!v&&p&&p.project,Q=0;Q<O.length;++Q){var ft=m(O[Q],F);ft&&G.push(ft)}return G}function T(O){return{shape:{points:x(O)}}}s.removeAll(),_.each(r.geo.regions,function(O){var G=O.name,F=e.get(G),Q=i.get(G)||{},ft=Q.dataIdx,Tt=Q.regionModel;F||(F=e.set(G,new pr.Z),s.add(F),ft=f?f.indexOfName(G):null,Tt=r.isGeo?c.getRegionModel(G):f?f.getItemModel(ft):null,i.set(G,{dataIdx:ft,regionModel:Tt}));var xt=[],At=[];_.each(O.geometries,function(Gt){if("polygon"===Gt.type){var Wt=[Gt.exterior].concat(Gt.interiors||[]);v&&(Wt=Lt(Wt,v)),_.each(Wt,function(ee){xt.push(new Jn.Z(T(ee)))})}else{var jt=Gt.points;v&&(jt=Lt(jt,v,!0)),_.each(jt,function(ee){At.push(new ia.Z(T(ee)))})}});var It=m(O.getCenter(),p&&p.project);function Nt(Gt,Wt){if(Gt.length){var jt=new dt.Z({culling:!0,segmentIgnoreThreshold:1,shape:{paths:Gt}});F.add(jt),gc(r,jt,ft,Tt),vu(r,jt,G,Tt,c,ft,It),Wt&&(ks(jt),_.each(jt.states,ks))}}Nt(xt),Nt(At,!0)}),e.each(function(O,G){var F=i.get(G),ft=F.regionModel;_c(r,O,G,ft,c,F.dataIdx),Lh(r,O,G,ft,c),H(r,O,G,ft,c)},this)},o.prototype._buildSVG=function(r){var e=r.geo.map,i=r.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var s=this._svgDispatcherMap=_.createHashMap(),l=!1;_.each(this._svgGraphicRecord.named,function(c){var f=c.name,p=r.mapOrGeoModel,v=r.data,m=c.svgNodeTagLower,x=c.el,T=v?v.indexOfName(f):null,O=p.getRegionModel(f);null!=wh.get(m)&&x instanceof Ma.ZP&&gc(r,x,T,O),x instanceof Ma.ZP&&(x.culling=!0),x.z2EmphasisLift=0,c.namedFrom||(null!=Dh.get(m)&&vu(r,x,f,O,p,T,null),_c(r,x,f,O,p,T),Lh(r,x,f,O,p),null==pu.get(m))||("self"===H(r,x,f,O,p)&&(l=!0),(s.get(f)||s.set(f,[])).push(x))},this),this._enableBlurEntireSVG(l,r)},o.prototype._enableBlurEntireSVG=function(r,e){if(r&&e.isGeo){var s=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(l){if(!l.isGroup){(0,sr.MA)(l);var c=l.ensureState("blur").style||{};null==c.opacity&&null!=s&&(c.opacity=s),l.ensureState("emphasis")}})}},o.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},o.prototype.findHighDownDispatchers=function(r,e){if(null==r)return[];var i=e.coordinateSystem;if("geoJSON"===i.resourceType){var s=this._regionsGroupByName;if(s){var l=s.get(r);return l?[l]:[]}}else if("geoSVG"===i.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(r)||[]},o.prototype._svgResourceChanged=function(r){return this._svgMapName!==r},o.prototype._useSVG=function(r){var e=Ia_getGeoResource(r);if(e&&"geoSVG"===e.type){var i=e.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=r}},o.prototype._freeSVG=function(){var r=this._svgMapName;if(null!=r){var e=Ia_getGeoResource(r);e&&"geoSVG"===e.type&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},o.prototype._updateController=function(r,e,i){var s=r.coordinateSystem,l=this._controller,c=this._controllerHost;c.zoomLimit=r.get("scaleLimit"),c.zoom=s.getZoom(),l.enable(r.get("roam")||!1);var f=r.mainType;function p(){var v={type:"geoRoam",componentType:f};return v[f+"Id"]=r.id,v}l.off("pan").on("pan",function(v){this._mouseDownFlag=!1,tc(c,v.dx,v.dy),i.dispatchAction(_.extend(p(),{dx:v.dx,dy:v.dy,animation:{duration:0}}))},this),l.off("zoom").on("zoom",function(v){this._mouseDownFlag=!1,Gs(c,v.scale,v.originX,v.originY),i.dispatchAction(_.extend(p(),{zoom:v.scale,originX:v.originX,originY:v.originY,animation:{duration:0}}))},this),l.setPointerChecker(function(v,m,x){return s.containPoint([m,x])&&!uo(v,i,r)})},o.prototype.resetForLabelLayout=function(){this.group.traverse(function(r){var e=r.getTextContent();e&&(e.ignore=Tl(e).ignore)})},o.prototype._updateMapSelectHandler=function(r,e,i,s){var l=this;e.off("mousedown"),e.off("click"),r.get("selectedMode")&&(e.on("mousedown",function(){l._mouseDownFlag=!0}),e.on("click",function(c){!l._mouseDownFlag||(l._mouseDownFlag=!1)}))},o}(),Bt=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){if(!l||"mapToggleSelect"!==l.type||l.from!==this.uid){var c=this.group;if(c.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&l&&"geoRoam"===l.type&&this._mapDraw.resetForLabelLayout(),l&&"geoRoam"===l.type&&"series"===l.componentType&&l.seriesId===e.id)(f=this._mapDraw)&&c.add(f.group);else if(e.needsDrawMap){var f=this._mapDraw||new E(s);c.add(f.group),f.draw(e,i,s,this,l),this._mapDraw=f}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&i.getComponent("legend")&&this._renderSymbols(e,i,s)}}},r.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},r.prototype._renderSymbols=function(e,i,s){var l=e.originalData,c=this.group;l.each(l.mapDimension("value"),function(f,p){if(!isNaN(f)){var v=l.getItemLayout(p);if(v&&v.point){var m=v.point,x=v.offset,T=new os.Z({style:{fill:e.getData().getVisual("style").fill},shape:{cx:m[0]+9*x,cy:m[1],r:3},silent:!0,z2:8+(x?0:sr.zr+1)});if(!x){var O=e.mainSeries.getData(),G=l.getName(p),F=O.indexOfName(G),Q=l.getItemModel(p),ft=Q.getModel("label"),Tt=O.getItemGraphicEl(F);(0,Or.ni)(T,(0,Or.k3)(Q),{labelFetcher:{getFormattedLabel:function(xt,At){return e.getFormattedLabel(F,At)}},defaultText:G}),T.disableLabelAnimation=!0,ft.get("position")||T.setTextConfig({position:"bottom"}),Tt.onHoverStateChange=function(xt){(0,sr.Gl)(T,xt)}}c.add(T)}}})},r.type="map",r}(_r.Z),_e=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(i){if(null!=i){var s=this.getData().getName(i),l=this.coordinateSystem,c=l.getRegion(s);return c&&l.dataToPoint(c.getCenter())}},e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e){for(var i=Ue(this,{coordDimensions:["value"],encodeDefaulter:_.curry(ir.Ss,this)}),s=_.createHashMap(),l=[],c=0,f=i.count();c<f;c++){var p=i.getName(c);s.set(p,!0)}var v=Ia_load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return _.each(v.regions,function(m){var x=m.name;s.get(x)||l.push(x)}),i.appendValues([],l),i},r.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},r.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},r.prototype.getRawValue=function(e){var i=this.getData();return i.get(i.mapDimension("value"),e)},r.prototype.getRegionModel=function(e){var i=this.getData();return i.getItemModel(i.indexOfName(e))},r.prototype.formatTooltip=function(e,i,s){for(var l=this.getData(),c=this.getRawValue(e),f=l.getName(e),p=this.seriesGroup,v=[],m=0;m<p.length;m++){var x=p[m].originalData.indexOfName(f),T=l.mapDimension("value");isNaN(p[m].originalData.get(T,x))||v.push(p[m].name)}return(0,ii.TX)("section",{header:v.join(", "),noHeader:!v.length,blocks:[(0,ii.TX)("nameValue",{name:f,value:c})]})},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.getLegendIcon=function(e){var i=e.icon||"roundRect",s=(0,Tn.th)(i,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return s.setStyle(e.itemStyle),s.style.stroke="none",i.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),s},r.type="series.map",r.dependencies=["geo"],r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},r}(rr.Z);function Xe(o){var r={};o.eachSeriesByType("map",function(e){var i=e.getHostGeoModel(),s=i?"o"+i.id:"i"+e.getMapType();(r[s]=r[s]||[]).push(e)}),_.each(r,function(e,i){for(var s=function Ee(o,r){var e={};return _.each(o,function(i){i.each(i.mapDimension("value"),function(s,l){var c="ec-"+i.getName(l);e[c]=e[c]||[],isNaN(s)||e[c].push(s)})}),o[0].map(o[0].mapDimension("value"),function(i,s){for(var l="ec-"+o[0].getName(s),c=0,f=1/0,p=-1/0,v=e[l].length,m=0;m<v;m++)f=Math.min(f,e[l][m]),p=Math.max(p,e[l][m]),c+=e[l][m];return 0===v?NaN:"min"===r?f:"max"===r?p:"average"===r?c/v:c})}(_.map(e,function(c){return c.getData()}),e[0].get("mapValueCalculation")),l=0;l<e.length;l++)e[l].originalData=e[l].getData();for(l=0;l<e.length;l++)e[l].seriesGroup=e,e[l].needsDrawMap=0===l&&!e[l].getHostGeoModel(),e[l].setData(s.cloneShallow()),e[l].mainSeries=e[0]})}function je(o){var r={};o.eachSeriesByType("map",function(e){var i=e.getMapType();if(!e.getHostGeoModel()&&!r[i]){var s={};_.each(e.seriesGroup,function(c){var f=c.coordinateSystem,p=c.originalData;c.get("showLegendSymbol")&&o.getComponent("legend")&&p.each(p.mapDimension("value"),function(v,m){var x=p.getName(m),T=f.getRegion(x);if(T&&!isNaN(v)){var O=s[x]||0,G=f.dataToPoint(T.getCenter());s[x]=O+1,p.setItemLayout(m,{point:G,offset:O})}})});var l=e.getData();l.each(function(c){var f=l.getName(c),p=l.getItemLayout(c)||{};p.showLabel=!s[f],l.setItemLayout(c,p)}),r[i]=!0}})}var hr=Ur.applyTransform;function fn(o){var r=o.seriesModel;return r?r.coordinateSystem:null}const ei=function(o){function r(e){var i=o.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new vt.ZP,i._rawTransformable=new vt.ZP,i.name=e,i}return(0,Re.ZT)(r,o),r.prototype.setBoundingRect=function(e,i,s,l){return this._rect=new bn.Z(e,i,s,l),this._rect},r.prototype.getBoundingRect=function(){return this._rect},r.prototype.setViewRect=function(e,i,s,l){this._transformTo(e,i,s,l),this._viewRect=new bn.Z(e,i,s,l)},r.prototype._transformTo=function(e,i,s,l){var c=this.getBoundingRect(),f=this._rawTransformable;f.transform=c.calculateTransform(new bn.Z(e,i,s,l));var p=f.parent;f.parent=null,f.decomposeTransform(),f.parent=p,this._updateTransform()},r.prototype.setCenter=function(e,i){!e||(this._center=[(0,Be.GM)(e[0],i.getWidth()),(0,Be.GM)(e[1],i.getHeight())],this._updateCenterAndZoom())},r.prototype.setZoom=function(e){e=e||1;var i=this.zoomLimit;i&&(null!=i.max&&(e=Math.min(i.max,e)),null!=i.min&&(e=Math.max(i.min,e))),this._zoom=e,this._updateCenterAndZoom()},r.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},r.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},r.prototype.getZoom=function(){return this._zoom||1},r.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},r.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,s=this.getDefaultCenter(),l=this.getCenter(),c=this.getZoom();l=Ur.applyTransform([],l,e),s=Ur.applyTransform([],s,e),i.originX=l[0],i.originY=l[1],i.x=s[0]-l[0],i.y=s[1]-l[1],i.scaleX=i.scaleY=c,this._updateTransform()},r.prototype._updateTransform=function(){var e=this._roamTransformable,i=this._rawTransformable;i.parent=e,e.updateTransform(),i.updateTransform(),In.copy(this.transform||(this.transform=[]),i.transform||In.create()),this._rawTransform=i.getLocalTransform(),this.invTransform=this.invTransform||[],In.invert(this.invTransform,this.transform),this.decomposeTransform()},r.prototype.getTransformInfo=function(){var e=this._rawTransformable,i=this._roamTransformable,s=new vt.ZP;return s.transform=i.transform,s.decomposeTransform(),{roam:{x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},r.prototype.getViewRect=function(){return this._viewRect},r.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},r.prototype.dataToPoint=function(e,i,s){var l=i?this._rawTransform:this.transform;return s=s||[],l?hr(s,e,l):Ur.copy(s,e)},r.prototype.pointToData=function(e){var i=this.invTransform;return i?hr([],e,i):[e[0],e[1]]},r.prototype.convertToPixel=function(e,i,s){var l=fn(i);return l===this?l.dataToPoint(s):null},r.prototype.convertFromPixel=function(e,i,s){var l=fn(i);return l===this?l.pointToData(s):null},r.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},r.dimensions=["x","y"],r}(vt.ZP);var _i={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},hn=["lng","lat"],Wi=function(o){function r(e,i,s){var l=o.call(this,e)||this;l.dimensions=hn,l.type="geo",l._nameCoordMap=_.createHashMap(),l.map=i;var T,c=s.projection,f=Ia_load(i,s.nameMap,s.nameProperty),p=Ia_getGeoResource(i),m=(l.resourceType=p?p.type:null,l.regions=f.regions),x=_i[p.type];if(l._regionsMap=f.regionsMap,l.regions=f.regions,l.projection=c,c)for(var O=0;O<m.length;O++){var G=m[O].getBoundingRect(c);(T=T||G.clone()).union(G)}else T=f.boundingRect;return l.setBoundingRect(T.x,T.y,T.width,T.height),l.aspectScale=c?1:_.retrieve2(s.aspectScale,x.aspectScale),l._invertLongitute=!c&&x.invertLongitute,l}return(0,Re.ZT)(r,o),r.prototype._transformTo=function(e,i,s,l){var c=this.getBoundingRect(),f=this._invertLongitute;c=c.clone(),f&&(c.y=-c.y-c.height);var p=this._rawTransformable;p.transform=c.calculateTransform(new bn.Z(e,i,s,l));var v=p.parent;p.parent=null,p.decomposeTransform(),p.parent=v,f&&(p.scaleY=-p.scaleY),this._updateTransform()},r.prototype.getRegion=function(e){return this._regionsMap.get(e)},r.prototype.getRegionByCoord=function(e){for(var i=this.regions,s=0;s<i.length;s++){var l=i[s];if("geoJSON"===l.type&&l.contain(e))return i[s]}},r.prototype.addGeoCoord=function(e,i){this._nameCoordMap.set(e,i)},r.prototype.getGeoCoord=function(e){var i=this._regionsMap.get(e);return this._nameCoordMap.get(e)||i&&i.getCenter()},r.prototype.dataToPoint=function(e,i,s){if(_.isString(e)&&(e=this.getGeoCoord(e)),e){var l=this.projection;return l&&(e=l.project(e)),e&&this.projectedToPoint(e,i,s)}},r.prototype.pointToData=function(e){var i=this.projection;return i&&(e=i.unproject(e)),e&&this.pointToProjected(e)},r.prototype.pointToProjected=function(e){return o.prototype.pointToData.call(this,e)},r.prototype.projectedToPoint=function(e,i,s){return o.prototype.dataToPoint.call(this,e,i,s)},r.prototype.convertToPixel=function(e,i,s){var l=Sn(i);return l===this?l.dataToPoint(s):null},r.prototype.convertFromPixel=function(e,i,s){var l=Sn(i);return l===this?l.pointToData(s):null},r}(ei);function Sn(o){var r=o.geoModel,e=o.seriesModel;return r?r.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",dr.C6).models[0]||{}).coordinateSystem:null}_.mixin(Wi,ei);const sa=Wi;function la(o,r){var e=o.get("boundingCoords");if(null!=e){var i=e[0],s=e[1];if(isFinite(i[0])&&isFinite(i[1])&&isFinite(s[0])&&isFinite(s[1])){var l=this.projection;if(l){var c=i[0],f=i[1],p=s[0],v=s[1];i=[1/0,1/0],s=[-1/0,-1/0];var m=function(Nt,Gt,Wt,jt){for(var ee=Wt-Nt,oe=jt-Gt,de=0;de<=100;de++){var xe=de/100,be=l.project([Nt+ee*xe,Gt+oe*xe]);Ur.min(i,i,be),Ur.max(s,s,be)}};m(c,f,p,f),m(p,f,p,v),m(p,v,c,v),m(c,v,p,f)}this.setBoundingRect(i[0],i[1],s[0]-i[0],s[1]-i[1])}}var Tt,xt,At,x=this.getBoundingRect(),T=o.get("layoutCenter"),O=o.get("layoutSize"),G=r.getWidth(),F=r.getHeight(),Q=x.width/x.height*this.aspectScale,ft=!1;if(T&&O&&(Tt=[Be.GM(T[0],G),Be.GM(T[1],F)],xt=Be.GM(O,Math.min(G,F)),!isNaN(Tt[0])&&!isNaN(Tt[1])&&!isNaN(xt)&&(ft=!0)),ft)At={},Q>1?(At.width=xt,At.height=xt/Q):(At.height=xt,At.width=xt*Q),At.y=Tt[1]-At.height/2,At.x=Tt[0]-At.width/2;else{var It=o.getBoxLayoutParams();It.aspect=Q,At=sn.ME(It,{width:G,height:F})}this.setViewRect(At.x,At.y,At.width,At.height),this.setCenter(o.get("center"),r),this.setZoom(o.get("zoom"))}const ho=new(function(){function o(){this.dimensions=hn}return o.prototype.create=function(r,e){var i=[];function s(c){return{nameProperty:c.get("nameProperty"),aspectScale:c.get("aspectScale"),projection:c.get("projection")}}r.eachComponent("geo",function(c,f){var p=c.get("map"),v=new sa(p+f,p,_.extend({nameMap:c.get("nameMap")},s(c)));v.zoomLimit=c.get("scaleLimit"),i.push(v),c.coordinateSystem=v,v.model=c,v.resize=la,v.resize(c,e)}),r.eachSeries(function(c){if("geo"===c.get("coordinateSystem")){var p=c.get("geoIndex")||0;c.coordinateSystem=i[p]}});var l={};return r.eachSeriesByType("map",function(c){if(!c.getHostGeoModel()){var f=c.getMapType();l[f]=l[f]||[],l[f].push(c)}}),_.each(l,function(c,f){var p=_.map(c,function(m){return m.get("nameMap")}),v=new sa(f,f,_.extend({nameMap:_.mergeAll(p)},s(c[0])));v.zoomLimit=_.retrieve.apply(null,_.map(c,function(m){return m.get("scaleLimit")})),i.push(v),v.resize=la,v.resize(c[0],e),_.each(c,function(m){m.coordinateSystem=v,function ba(o,r){_.each(r.get("geoCoord"),function(e,i){o.addGeoCoord(i,e)})}(v,m)})}),i},o.prototype.getFilledRegions=function(r,e,i,s){for(var l=(r||[]).slice(),c=_.createHashMap(),f=0;f<l.length;f++)c.set(l[f].name,l[f]);var p=Ia_load(e,i,s);return _.each(p.regions,function(v){var m=v.name;!c.get(m)&&l.push({name:m})}),l},o}()),zs=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i,s){var l=Ia_getGeoResource(e.map);if(l&&"geoJSON"===l.type){var c=e.itemStyle=e.itemStyle||{};"color"in c||(c.color="#eee")}this.mergeDefaultAndTheme(e,s),dr.Cc(e,"label",["show"])},r.prototype.optionUpdated=function(){var e=this,i=this.option;i.regions=ho.getFilledRegions(i.regions,i.map,i.nameMap,i.nameProperty);var s={};this._optionModelMap=_.reduce(i.regions||[],function(l,c){var f=c.name;return f&&(l.set(f,new hi.Z(c,e,e.ecModel)),c.selected&&(s[f]=!0)),l},_.createHashMap()),i.selectedMap||(i.selectedMap=s)},r.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new hi.Z(null,this,this.ecModel)},r.prototype.getFormattedLabel=function(e,i){var l=this.getRegionModel(e).get("normal"===i?["label","formatter"]:["emphasis","label","formatter"]),c={name:e};return _.isFunction(l)?(c.status=i,l(c)):_.isString(l)?l.replace("{a}",e??""):void 0},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.select=function(e){var i=this.option,s=i.selectedMode;s&&("multiple"!==s&&(i.selectedMap=null),(i.selectedMap||(i.selectedMap={}))[e]=!0)},r.prototype.unSelect=function(e){var i=this.option.selectedMap;i&&(i[e]=!1)},r.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},r.prototype.isSelected=function(e){var i=this.option.selectedMap;return!(!i||!i[e])},r.type="geo",r.layoutMode="box",r.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},r}(Pi.Z);function gs(o,r){return o.pointToProjected?o.pointToProjected(r):o.pointToData(r)}function Zn(o,r,e,i){var s=o.getZoom(),l=o.getCenter(),c=r.zoom,f=o.projectedToPoint?o.projectedToPoint(l):o.dataToPoint(l);if(null!=r.dx&&null!=r.dy&&(f[0]-=r.dx,f[1]-=r.dy,o.setCenter(gs(o,f),i)),null!=c){if(e){var p=e.min||0;c=Math.max(Math.min(s*c,e.max||1/0),p)/s}o.scaleX*=c,o.scaleY*=c;var x=(r.originY-o.y)*(c-1);o.x-=(r.originX-o.x)*(c-1),o.y-=x,o.updateTransform(),o.setCenter(gs(o,f),i),o.setZoom(c*s)}return{center:o.getCenter(),zoom:o.getZoom()}}var Cl=D(3237);const Nh=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.focusBlurEnabled=!0,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i){this._api=i},r.prototype.render=function(e,i,s,l){if(this._model=e,!e.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new E(s));var c=this._mapDraw;c.draw(e,i,s,this,l),c.group.on("click",this._handleRegionClick,this),c.group.silent=e.get("silent"),this.group.add(c.group),this.updateSelectStatus(e,i,s)},r.prototype._handleRegionClick=function(e){var i;(0,Cl.o)(e.target,function(s){return null!=(i=(0,Fr.A)(s).eventData)},!0),i&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:i.name})},r.prototype.updateSelectStatus=function(e,i,s){var l=this;this._mapDraw.group.traverse(function(c){var f=(0,Fr.A)(c).eventData;if(f)return l._model.isSelected(f.name)?s.enterSelect(c):s.leaveSelect(c),!0})},r.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},r.type="geo",r}(Ti.Z);function yc(o,r,e){!function(o,r,e){if(r.svg){var i=new hs(o,r.svg);xl.set(o,i)}else{var s=r.geoJson||r.geoJSON;s&&!r.features?e=r.specialAreas:s=r,i=new vs(o,s,e),xl.set(o,i)}}(o,r,e)}function gu(o){function r(e,i){i.update="geo:updateSelectStatus",o.registerAction(i,function(s,l){var c={},f=[];return l.eachComponent({mainType:"geo",query:s},function(p){p[e](s.name),(0,_.each)(p.coordinateSystem.regions,function(x){c[x.name]=p.isSelected(x.name)||!1});var m=[];(0,_.each)(c,function(x,T){c[T]&&m.push(T)}),f.push({geoIndex:p.componentIndex,name:m})}),{selected:c,allSelected:f,name:s.name}})}o.registerCoordinateSystem("geo",ho),o.registerComponentModel(zs),o.registerComponentView(Nh),o.registerImpl("registerMap",yc),o.registerImpl("getMap",function(e){return function(o){var r=xl.get(o);return r&&"geoJSON"===r.type&&r.getMapForUser()}(e)}),r("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),r("select",{type:"geoSelect",event:"geoselected"}),r("unSelect",{type:"geoUnSelect",event:"geounselected"}),o.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,i,s){var l=e.componentType||"series";i.eachComponent({mainType:l,query:e},function(c){var f=c.coordinateSystem;if("geo"===f.type){var p=Zn(f,e,c.get("scaleLimit"),s);c.setCenter&&c.setCenter(p.center),c.setZoom&&c.setZoom(p.zoom),"series"===l&&(0,_.each)(c.seriesGroup,function(v){v.setCenter(p.center),v.setZoom(p.zoom)})}})})}var xc=D(1838);function Bh(o,r){var e=o.isExpand?o.children:[],i=o.parentNode.children,s=o.hierNode.i?i[o.hierNode.i-1]:null;if(e.length){!function Fh(o){for(var r=o.children,e=r.length,i=0,s=0;--e>=0;){var l=r[e];l.hierNode.prelim+=i,l.hierNode.modifier+=i,i+=l.hierNode.shift+(s+=l.hierNode.change)}}(o);var l=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;s?(o.hierNode.prelim=s.hierNode.prelim+r(o,s),o.hierNode.modifier=o.hierNode.prelim-l):o.hierNode.prelim=l}else s&&(o.hierNode.prelim=s.hierNode.prelim+r(o,s));o.parentNode.hierNode.defaultAncestor=function kh(o,r,e,i){if(r){for(var s=o,l=o,c=l.parentNode.children[0],f=r,p=s.hierNode.modifier,v=l.hierNode.modifier,m=c.hierNode.modifier,x=f.hierNode.modifier;f=Ml(f),l=Tc(l),f&&l;){s=Ml(s),c=Tc(c),s.hierNode.ancestor=o;var T=f.hierNode.prelim+x-l.hierNode.prelim-v+i(f,l);T>0&&(Uh(zh(f,o,e),o,T),v+=T,p+=T),x+=f.hierNode.modifier,v+=l.hierNode.modifier,p+=s.hierNode.modifier,m+=c.hierNode.modifier}f&&!Ml(s)&&(s.hierNode.thread=f,s.hierNode.modifier+=x-p),l&&!Tc(c)&&(c.hierNode.thread=l,c.hierNode.modifier+=v-m,e=o)}return e}(o,s,o.parentNode.hierNode.defaultAncestor||i[0],r)}function Gh(o){o.setLayout({x:o.hierNode.prelim+o.parentNode.hierNode.modifier},!0),o.hierNode.modifier+=o.parentNode.hierNode.modifier}function Sc(o){return arguments.length?o:_s}function Fo(o,r){return o-=Math.PI/2,{x:r*Math.cos(o),y:r*Math.sin(o)}}function Ml(o){var r=o.children;return r.length&&o.isExpand?r[r.length-1]:o.hierNode.thread}function Tc(o){var r=o.children;return r.length&&o.isExpand?r[0]:o.hierNode.thread}function zh(o,r,e){return o.hierNode.ancestor.parentNode===r.parentNode?o.hierNode.ancestor:e}function Uh(o,r,e){var i=e/(r.hierNode.i-o.hierNode.i);r.hierNode.change-=i,r.hierNode.shift+=e,r.hierNode.modifier+=e,r.hierNode.prelim+=e,o.hierNode.change+=i}function _s(o,r){return o.parentNode===r.parentNode?1:2}var bl=D(3020),Cc=function o(){this.parentPoint=[],this.childPoints=[]},Mc=function(o){function r(e){return o.call(this,e)||this}return(0,Re.ZT)(r,o),r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Cc},r.prototype.buildPath=function(e,i){var s=i.childPoints,l=s.length,c=i.parentPoint,f=s[0],p=s[l-1];if(1===l)return e.moveTo(c[0],c[1]),void e.lineTo(f[0],f[1]);var v=i.orient,m="TB"===v||"BT"===v?0:1,x=1-m,T=(0,Be.GM)(i.forkPosition,1),O=[];O[m]=c[m],O[x]=c[x]+(p[x]-c[x])*T,e.moveTo(c[0],c[1]),e.lineTo(O[0],O[1]),e.moveTo(f[0],f[1]),O[m]=f[m],e.lineTo(O[0],O[1]),O[m]=p[m],e.lineTo(O[0],O[1]),e.lineTo(p[0],p[1]);for(var G=1;G<l-1;G++){var F=s[G];e.moveTo(F[0],F[1]),O[m]=F[m],e.lineTo(O[0],O[1])}},r}(mt.ZP);function ja(o,r){var e=o.getItemLayout(r);return e&&!isNaN(e.x)&&!isNaN(e.y)}function bc(o,r,e,i,s){var l=!e,c=o.tree.getNodeByDataIndex(r),f=c.getModel(),p=c.getVisual("style").fill,v=!1===c.isExpand&&0!==c.children.length?p:"#fff",m=o.tree.root,x=c.parentNode===m?c:c.parentNode||c,T=o.getItemGraphicEl(x.dataIndex),O=x.getLayout(),G=T?{x:T.__oldX,y:T.__oldY,rawX:T.__radialOldRawX,rawY:T.__radialOldRawY}:O,F=c.getLayout();l?((e=new xa(o,r,null,{symbolInnerColor:v,useNameLabel:!0})).x=G.x,e.y=G.y):e.updateData(o,r,null,{symbolInnerColor:v,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=F.rawX,e.__radialRawY=F.rawY,i.add(e),o.setItemGraphicEl(r,e),e.__oldX=e.x,e.__oldY=e.y,he.D(e,{x:F.x,y:F.y},s);var Q=e.getSymbolPath();if("radial"===s.get("layout")){var ft=m.children[0],Tt=ft.getLayout(),xt=ft.children.length,At=void 0,It=void 0;if(F.x===Tt.x&&!0===c.isExpand&&ft.children.length){var Nt={x:(ft.children[0].getLayout().x+ft.children[xt-1].getLayout().x)/2,y:(ft.children[0].getLayout().y+ft.children[xt-1].getLayout().y)/2};(At=Math.atan2(Nt.y-Tt.y,Nt.x-Tt.x))<0&&(At=2*Math.PI+At),(It=Nt.x<Tt.x)&&(At-=Math.PI)}else(At=Math.atan2(F.y-Tt.y,F.x-Tt.x))<0&&(At=2*Math.PI+At),0===c.children.length||0!==c.children.length&&!1===c.isExpand?(It=F.x<Tt.x)&&(At-=Math.PI):(It=F.x>Tt.x)||(At-=Math.PI);var Gt=It?"left":"right",Wt=f.getModel("label"),jt=Wt.get("rotate"),ee=jt*(Math.PI/180),oe=Q.getTextContent();oe&&(Q.setTextConfig({position:Wt.get("position")||Gt,rotation:null==jt?-At:ee,origin:"center"}),oe.setStyle("verticalAlign","middle"))}var de=f.get(["emphasis","focus"]),xe="relative"===de?_.concatArray(c.getAncestorsIndices(),c.getDescendantIndices()):"ancestor"===de?c.getAncestorsIndices():"descendant"===de?c.getDescendantIndices():null;xe&&((0,Fr.A)(e).focus=xe),function Vh(o,r,e,i,s,l,c,f){var p=r.getModel(),v=o.get("edgeShape"),m=o.get("layout"),x=o.getOrient(),T=o.get(["lineStyle","curveness"]),O=o.get("edgeForkPosition"),G=p.getModel("lineStyle").getLineStyle(),F=i.__edge;if("curve"===v)r.parentNode&&r.parentNode!==e&&(F||(F=i.__edge=new xc.Z({shape:ud(m,x,T,s,s)})),he.D(F,{shape:ud(m,x,T,l,c)},o));else if("polyline"===v&&"orthogonal"===m&&r!==e&&r.children&&0!==r.children.length&&!0===r.isExpand){for(var Q=r.children,ft=[],Tt=0;Tt<Q.length;Tt++){var xt=Q[Tt].getLayout();ft.push([xt.x,xt.y])}F||(F=i.__edge=new Mc({shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]],orient:x,forkPosition:O}})),he.D(F,{shape:{parentPoint:[c.x,c.y],childPoints:ft}},o)}F&&("polyline"!==v||r.isExpand)&&(F.useStyle(_.defaults({strokeNoScale:!0,fill:null},G)),(0,sr.WO)(F,p,"lineStyle"),(0,sr.MA)(F),f.add(F))}(s,c,m,e,G,O,F,i),e.__edge&&(e.onHoverStateChange=function(be){if("blur"!==be){var Ae=c.parentNode&&o.getItemGraphicEl(c.parentNode.dataIndex);Ae&&Ae.hoverState===sr.CX||(0,sr.Gl)(e.__edge,be)}})}function Ja(o,r,e,i,s){var c=Qr(r.tree.root,o),f=c.source,p=c.sourceLayout,v=r.getItemGraphicEl(o.dataIndex);if(v){var m=r.getItemGraphicEl(f.dataIndex),T=v.__edge||(!1===f.isExpand||1===f.children.length?m.__edge:void 0),O=i.get("edgeShape"),G=i.get("layout"),F=i.get("orient"),Q=i.get(["lineStyle","curveness"]);T&&("curve"===O?he.bX(T,{shape:ud(G,F,Q,p,p),style:{opacity:0}},i,{cb:function(){e.remove(T)},removeOpt:s}):"polyline"===O&&"orthogonal"===i.get("layout")&&he.bX(T,{shape:{parentPoint:[p.x,p.y],childPoints:[[p.x,p.y]]},style:{opacity:0}},i,{cb:function(){e.remove(T)},removeOpt:s}))}}function Qr(o,r){for(var i,e=r.parentNode===o?r:r.parentNode||r;null==(i=e.getLayout());)e=e.parentNode===o?e:e.parentNode||e;return{source:e,sourceLayout:i}}function ld(o,r,e,i,s){var l=o.tree.getNodeByDataIndex(r),f=Qr(o.tree.root,l).sourceLayout,p={duration:s.get("animationDurationUpdate"),easing:s.get("animationEasingUpdate")};he.bX(e,{x:f.x+1,y:f.y+1},s,{cb:function(){i.remove(e),o.setItemGraphicEl(r,null)},removeOpt:p}),e.fadeOut(null,o.hostModel,{fadeLabel:!0,animation:p}),l.children.forEach(function(v){Ja(v,o,i,s,p)}),Ja(l,o,i,s,p)}function ud(o,r,e,i,s){var l,c,f,p,v,m,x,T;if("radial"===o){m=s.rawX,T=s.rawY;var O=Fo(v=i.rawX,x=i.rawY),G=Fo(v,x+(T-x)*e),F=Fo(m,T+(x-T)*e),Q=Fo(m,T);return{x1:O.x||0,y1:O.y||0,x2:Q.x||0,y2:Q.y||0,cpx1:G.x||0,cpy1:G.y||0,cpx2:F.x||0,cpy2:F.y||0}}return v=i.x,x=i.y,m=s.x,T=s.y,("LR"===r||"RL"===r)&&(l=v+(m-v)*e,c=x,f=m+(v-m)*e,p=T),("TB"===r||"BT"===r)&&(l=v,c=x+(T-x)*e,f=m,p=T+(x-T)*e),{x1:v,y1:x,x2:m,y2:T,cpx1:l,cpy1:c,cpx2:f,cpy2:p}}const cd=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e._mainGroup=new pr.Z,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i){this._controller=new Go(i.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},r.prototype.render=function(e,i,s){var l=e.getData(),c=e.layoutInfo,f=this._mainGroup;"radial"===e.get("layout")?(f.x=c.x+c.width/2,f.y=c.y+c.height/2):(f.x=c.x,f.y=c.y),this._updateViewCoordSys(e,s),this._updateController(e,i,s);var v=this._data;l.diff(v).add(function(m){ja(l,m)&&bc(l,m,null,f,e)}).update(function(m,x){var T=v.getItemGraphicEl(x);ja(l,m)?bc(l,m,T,f,e):T&&ld(v,x,T,f,e)}).remove(function(m){var x=v.getItemGraphicEl(m);x&&ld(v,m,x,f,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&l.eachItemGraphicEl(function(m,x){m.off("click").on("click",function(){s.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:x})})}),this._data=l},r.prototype._updateViewCoordSys=function(e,i){var s=e.getData(),l=[];s.each(function(x){var T=s.getItemLayout(x);T&&!isNaN(T.x)&&!isNaN(T.y)&&l.push([+T.x,+T.y])});var c=[],f=[];bl.zk(l,c,f);var p=this._min,v=this._max;f[0]-c[0]==0&&(c[0]=p?p[0]:c[0]-1,f[0]=v?v[0]:f[0]+1),f[1]-c[1]==0&&(c[1]=p?p[1]:c[1]-1,f[1]=v?v[1]:f[1]+1);var m=e.coordinateSystem=new ei;m.zoomLimit=e.get("scaleLimit"),m.setBoundingRect(c[0],c[1],f[0]-c[0],f[1]-c[1]),m.setCenter(e.get("center"),i),m.setZoom(e.get("zoom")),this.group.attr({x:m.x,y:m.y,scaleX:m.scaleX,scaleY:m.scaleY}),this._min=c,this._max=f},r.prototype._updateController=function(e,i,s){var l=this,c=this._controller,f=this._controllerHost,p=this.group;c.setPointerChecker(function(v,m,x){var T=p.getBoundingRect();return T.applyTransform(p.transform),T.contain(m,x)&&!uo(v,s,e)}),c.enable(e.get("roam")),f.zoomLimit=e.get("scaleLimit"),f.zoom=e.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(v){tc(f,v.dx,v.dy),s.dispatchAction({seriesId:e.id,type:"treeRoam",dx:v.dx,dy:v.dy})}).on("zoom",function(v){Gs(f,v.scale,v.originX,v.originY),s.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:v.scale,originX:v.originX,originY:v.originY}),l._updateNodeAndLinkScale(e),s.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(e){var i=e.getData(),s=this._getNodeGlobalScale(e);i.eachItemGraphicEl(function(l,c){l.setSymbolScale(s)})},r.prototype._getNodeGlobalScale=function(e){var i=e.coordinateSystem;if("view"!==i.type)return 1;var s=this._nodeScaleRatio,l=i.scaleX||1;return((i.getZoom()-1)*s+1)/l},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},r.type="tree",r}(_r.Z);var Bp=D(8446),_u=function(){function o(r,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=r||"",this.hostTree=e}return o.prototype.isRemoved=function(){return this.dataIndex<0},o.prototype.eachNode=function(r,e,i){_.isFunction(r)&&(i=e,e=r,r=null),_.isString(r=r||{})&&(r={order:r});var c,s=r.order||"preorder",l=this[r.attr||"children"];"preorder"===s&&(c=e.call(i,this));for(var f=0;!c&&f<l.length;f++)l[f].eachNode(r,e,i);"postorder"===s&&e.call(i,this)},o.prototype.updateDepthAndHeight=function(r){var e=0;this.depth=r;for(var i=0;i<this.children.length;i++){var s=this.children[i];s.updateDepthAndHeight(r+1),s.height>e&&(e=s.height)}this.height=e+1},o.prototype.getNodeById=function(r){if(this.getId()===r)return this;for(var e=0,i=this.children,s=i.length;e<s;e++){var l=i[e].getNodeById(r);if(l)return l}},o.prototype.contains=function(r){if(r===this)return!0;for(var e=0,i=this.children,s=i.length;e<s;e++){var l=i[e].contains(r);if(l)return l}},o.prototype.getAncestors=function(r){for(var e=[],i=r?this:this.parentNode;i;)e.push(i),i=i.parentNode;return e.reverse(),e},o.prototype.getAncestorsIndices=function(){for(var r=[],e=this;e;)r.push(e.dataIndex),e=e.parentNode;return r.reverse(),r},o.prototype.getDescendantIndices=function(){var r=[];return this.eachNode(function(e){r.push(e.dataIndex)}),r},o.prototype.getValue=function(r){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(r||"value"),this.dataIndex)},o.prototype.setLayout=function(r,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,r,e)},o.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},o.prototype.getModel=function(r){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(r)},o.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},o.prototype.setVisual=function(r,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,r,e)},o.prototype.getVisual=function(r){return this.hostTree.data.getItemVisual(this.dataIndex,r)},o.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},o.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},o.prototype.getChildIndex=function(){if(this.parentNode){for(var r=this.parentNode.children,e=0;e<r.length;++e)if(r[e]===this)return e;return-1}return-1},o.prototype.isAncestorOf=function(r){for(var e=r.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},o.prototype.isDescendantOf=function(r){return r!==this&&r.isAncestorOf(this)},o}();const hd=function(){function o(r){this.type="tree",this._nodes=[],this.hostModel=r}return o.prototype.eachNode=function(r,e,i){this.root.eachNode(r,e,i)},o.prototype.getNodeByDataIndex=function(r){var e=this.data.getRawIndex(r);return this._nodes[e]},o.prototype.getNodeById=function(r){return this.root.getNodeById(r)},o.prototype.update=function(){for(var r=this.data,e=this._nodes,i=0,s=e.length;i<s;i++)e[i].dataIndex=-1;for(i=0,s=r.count();i<s;i++)e[r.getRawIndex(i)].dataIndex=i},o.prototype.clearLayouts=function(){this.data.clearItemLayouts()},o.createTree=function(r,e,i){var s=new o(e),l=[],c=1;!function f(m,x){var T=m.value;c=Math.max(c,_.isArray(T)?T.length:1),l.push(m);var O=new _u((0,dr.U5)(m.name,""),s);x?function Pc(o,r){o.parentNode!==r&&(r.children.push(o),o.parentNode=r)}(O,x):s.root=O,s._nodes.push(O);var G=m.children;if(G)for(var F=0;F<G.length;F++)f(G[F],O)}(r),s.root.updateDepthAndHeight(0);var p=(0,Ce.Z)(l,{coordDimensions:["value"],dimensionsCount:c}).dimensions,v=new Ie.Z(p,e);return v.initData(l),i&&i(v),(0,Bp.Z)({mainData:v,struct:s,structAttr:"tree"}),s.update(),s},o}();function Ac(o,r,e){if(o&&_.indexOf(r,o.type)>=0){var i=e.getData().tree.root,s=o.targetNode;if(_.isString(s)&&(s=i.getNodeById(s)),s&&i.contains(s))return{node:s};var l=o.targetNodeId;if(null!=l&&(s=i.getNodeById(l)))return{node:s}}}function Gp(o){for(var r=[];o;)(o=o.parentNode)&&r.push(o);return r.reverse()}function fd(o,r){var e=Gp(o);return _.indexOf(e,r)>=0}function Oc(o,r){for(var e=[];o;){var i=o.dataIndex;e.push({name:o.name,dataIndex:i,value:r.getRawValue(i)}),o=o.parentNode}return e.reverse(),e}const yn=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e){var i={name:e.name,children:e.data},l=new hi.Z(e.leaves||{},this,this.ecModel),c=hd.createTree(i,this,function f(x){x.wrapMethod("getItemModel",function(T,O){var G=c.getNodeByDataIndex(O);return G&&G.children.length&&G.isExpand||(T.parentModel=l),T})}),p=0;c.eachNode("preorder",function(x){x.depth>p&&(p=x.depth)});var m=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:p;return c.root.eachNode("preorder",function(x){var T=x.hostTree.data.getRawDataItem(x.dataIndex);x.isExpand=T&&null!=T.collapsed?!T.collapsed:x.depth<=m}),c.data},r.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.formatTooltip=function(e,i,s){for(var l=this.getData().tree,c=l.root.children[0],f=l.getNodeByDataIndex(e),p=f.getValue(),v=f.name;f&&f!==c;)v=f.parentNode.name+"."+v,f=f.parentNode;return(0,ii.TX)("nameValue",{name:v,value:p,noValue:isNaN(p)||null==p})},r.prototype.getDataParams=function(e){var i=o.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(e);return i.treeAncestors=Oc(s,this),i.collapsed=!s.isExpand,i},r.type="series.tree",r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},r}(rr.Z);function Pl(o,r){for(var i,e=[o];i=e.pop();)if(r(i),i.isExpand){var s=i.children;if(s.length)for(var l=s.length-1;l>=0;l--)e.push(s[l])}}function mg(o,r){o.eachSeriesByType("tree",function(e){!function di(o,r){var e=function Zh(o,r){return sn.ME(o.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}(o,r);o.layoutInfo=e;var i=o.get("layout"),s=0,l=0,c=null;"radial"===i?(s=2*Math.PI,l=Math.min(e.height,e.width)/2,c=Sc(function(xt,At){return(xt.parentNode===At.parentNode?1:2)/xt.depth})):(s=e.width,l=e.height,c=Sc());var f=o.getData().tree.root,p=f.children[0];if(p){(function Rh(o){var r=o;r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var i,s,e=[r];i=e.pop();)if(s=i.children,i.isExpand&&s.length)for(var c=s.length-1;c>=0;c--){var f=s[c];f.hierNode={defaultAncestor:null,ancestor:f,prelim:0,modifier:0,change:0,shift:0,i:c,thread:null},e.push(f)}})(f),function _g(o,r,e){for(var l,i=[o],s=[];l=i.pop();)if(s.push(l),l.isExpand){var c=l.children;if(c.length)for(var f=0;f<c.length;f++)i.push(c[f])}for(;l=s.pop();)r(l,e)}(p,Bh,c),f.hierNode.modifier=-p.hierNode.prelim,Pl(p,Gh);var v=p,m=p,x=p;Pl(p,function(xt){var At=xt.getLayout().x;At<v.getLayout().x&&(v=xt),At>m.getLayout().x&&(m=xt),xt.depth>x.depth&&(x=xt)});var T=v===m?1:c(v,m)/2,O=T-v.getLayout().x,G=0,F=0,Q=0,ft=0;if("radial"===i)G=s/(m.getLayout().x+T+O),F=l/(x.depth-1||1),Pl(p,function(xt){var At=Fo(Q=(xt.getLayout().x+O)*G,ft=(xt.depth-1)*F);xt.setLayout({x:At.x,y:At.y,rawX:Q,rawY:ft},!0)});else{var Tt=o.getOrient();"RL"===Tt||"LR"===Tt?(F=l/(m.getLayout().x+T+O),G=s/(x.depth-1||1),Pl(p,function(xt){ft=(xt.getLayout().x+O)*F,xt.setLayout({x:Q="LR"===Tt?(xt.depth-1)*G:s-(xt.depth-1)*G,y:ft},!0)})):("TB"===Tt||"BT"===Tt)&&(G=s/(m.getLayout().x+T+O),F=l/(x.depth-1||1),Pl(p,function(xt){Q=(xt.getLayout().x+O)*G,xt.setLayout({x:Q,y:ft="TB"===Tt?(xt.depth-1)*F:l-(xt.depth-1)*F},!0)}))}}}(e,r)})}function Zp(o){o.eachSeriesByType("tree",function(r){var e=r.getData();e.tree.eachNode(function(s){var c=s.getModel().getModel("itemStyle").getItemStyle(),f=e.ensureUniqueItemVisual(s.dataIndex,"style");(0,_.extend)(f,c)})})}var Fp=["treemapZoomToNode","treemapRender","treemapMove"],pd=D(7522);function vd(o){var r=o.getData(),i={};r.tree.eachNode(function(s){for(var l=s;l&&l.depth>1;)l=l.parentNode;var c=(0,pd.i)(o.ecModel,l.name||l.dataIndex+"",i);s.setVisual("decal",c)})}function gd(o){var r=0;_.each(o.children,function(i){gd(i);var s=i.value;_.isArray(s)&&(s=s[0]),r+=s});var e=o.value;_.isArray(e)&&(e=e[0]),(null==e||isNaN(e))&&(e=r),e<0&&(e=0),_.isArray(o.value)?o.value[0]=e:o.value=e}const _d=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.preventUsingHoverLayer=!0,e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e,i){var s={name:e.name,children:e.data};gd(s);var l=e.levels||[],c=this.designatedVisualItemStyle={},f=new hi.Z({itemStyle:c},this,i);l=e.levels=function Tg(o,r){var e=(0,dr.kF)(r.get("color")),i=(0,dr.kF)(r.get(["aria","decal","decals"]));if(e){var s,l;_.each(o=o||[],function(f){var p=new hi.Z(f),v=p.get("color"),m=p.get("decal");(p.get(["itemStyle","color"])||v&&"none"!==v)&&(s=!0),(p.get(["itemStyle","decal"])||m&&"none"!==m)&&(l=!0)});var c=o[0]||(o[0]={});return s||(c.color=e.slice()),!l&&i&&(c.decal=i.slice()),o}}(l,i);var p=_.map(l||[],function(x){return new hi.Z(x,f,i)},this),v=hd.createTree(s,this,function m(x){x.wrapMethod("getItemModel",function(T,O){var G=v.getNodeByDataIndex(O);return T.parentModel=(G?p[G.depth]:null)||f,T})});return v.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.formatTooltip=function(e,i,s){var l=this.getData(),c=this.getRawValue(e),f=l.getName(e);return(0,ii.TX)("nameValue",{name:f,value:c})},r.prototype.getDataParams=function(e){var i=o.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(e);return i.treeAncestors=Oc(s,this),i.treePathInfo=i.treeAncestors,i},r.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},_.extend(this.layoutInfo,e)},r.prototype.mapIdToIndex=function(e){var i=this._idIndexMap;i||(i=this._idIndexMap=_.createHashMap(),this._idIndexMapCount=0);var s=i.get(e);return null==s&&i.set(e,s=this._idIndexMapCount++),s},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var i=this.getRawData().tree.root;(!e||e!==i&&!i.contains(e))&&(this._viewRoot=i)},r.prototype.enableAriaDecal=function(){vd(this)},r.type="series.treemap",r.layoutMode="box",r.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},r}(rr.Z);var Hs=D(2936);function Mg(o,r,e,i,s,l){var c=[[s?o:o-5,r],[o+e,r],[o+e,r+i],[s?o:o-5,r+i]];return!l&&c.splice(2,0,[o+e+5,r+i/2]),!s&&c.push([o,r+i/2]),c}function bg(o,r,e){(0,Fr.A)(o).eventData={componentType:"series",componentSubType:"treemap",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&Oc(e,r)}}const Pg=function(){function o(r){this.group=new pr.Z,r.add(this.group)}return o.prototype.render=function(r,e,i,s){var l=r.getModel("breadcrumb"),c=this.group;if(c.removeAll(),l.get("show")&&i){var f=l.getModel("itemStyle"),p=l.getModel("emphasis"),v=f.getModel("textStyle"),m=p.getModel(["itemStyle","textStyle"]),x={pos:{left:l.get("left"),right:l.get("right"),top:l.get("top"),bottom:l.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:l.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,x,v),this._renderContent(r,x,f,p,v,m,s),sn.p$(c,x.pos,x.box)}},o.prototype._prepare=function(r,e,i){for(var s=r;s;s=s.parentNode){var l=(0,dr.U5)(s.getModel().get("name"),""),c=i.getTextRect(l),f=Math.max(c.width+16,e.emptyItemWidth);e.totalWidth+=f+8,e.renderList.push({node:s,text:l,width:f})}},o.prototype._renderContent=function(r,e,i,s,l,c,f){for(var p=0,v=e.emptyItemWidth,m=r.get(["breadcrumb","height"]),x=sn.lq(e.pos,e.box),T=e.totalWidth,O=e.renderList,G=s.getModel("itemStyle").getItemStyle(),F=O.length-1;F>=0;F--){var Q=O[F],ft=Q.node,Tt=Q.width,xt=Q.text;T>x.width&&(T-=Tt-v,Tt=v,xt=null);var At=new Jn.Z({shape:{points:Mg(p,0,Tt,m,F===O.length-1,0===F)},style:(0,_.defaults)(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new Se.ZP({style:(0,Or.Lr)(l,{text:xt})}),textConfig:{position:"inside"},z2:1e4*sr.zr,onclick:(0,_.curry)(f,ft)});At.disableLabelAnimation=!0,At.getTextContent().ensureState("emphasis").style=(0,Or.Lr)(c,{text:xt}),At.ensureState("emphasis").style=G,(0,sr.k5)(At,s.get("focus"),s.get("blurScope"),s.get("disabled")),this.group.add(At),bg(At,r,ft),p+=Tt+8}},o.prototype.remove=function(){this.group.removeAll()},o}();var mu=function(){function o(){this._storage=[],this._elExistsMap={}}return o.prototype.add=function(r,e,i,s,l){return!this._elExistsMap[r.id]&&(this._elExistsMap[r.id]=!0,this._storage.push({el:r,target:e,duration:i,delay:s,easing:l}),!0)},o.prototype.finished=function(r){return this._finishedCallback=r,this},o.prototype.start=function(){for(var r=this,e=this._storage.length,i=function(){--e<=0&&(r._storage.length=0,r._elExistsMap={},r._finishedCallback&&r._finishedCallback())},s=0,l=this._storage.length;s<l;s++){var c=this._storage[s];c.el.animateTo(c.target,{duration:c.duration,delay:c.delay,easing:c.easing,setToFinal:!0,done:i,aborted:i})}return this},o}(),Al=D(7005),yd=pr.Z,Hp=Br.Z,yu="upperLabel",Ec=10*sr.zr,Ag=2*sr.zr,Og=3*sr.zr,Ol=(0,Al.Z)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Vp=function(o){var r=Ol(o);return r.stroke=r.fill=r.lineWidth=null,r},Wh=(0,dr.Yf)();const Lg=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e._state="ready",e._storage={nodeGroup:[],background:[],content:[]},e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){var c=i.findComponents({mainType:"series",subType:"treemap",query:l});if(!((0,_.indexOf)(c,e)<0)){this.seriesModel=e,this.api=s,this.ecModel=i;var p=Ac(l,["treemapZoomToNode","treemapRootToNode"],e),v=l&&l.type,m=e.layoutInfo,x=!this._oldTree,T=this._storage,O="treemapRootToNode"===v&&p&&T?{rootNodeGroup:T.nodeGroup[p.node.getRawIndex()],direction:l.direction}:null,G=this._giveContainerGroup(m),F=e.get("animation"),Q=this._doRender(G,e,O);!F||x||v&&"treemapZoomToNode"!==v&&"treemapRootToNode"!==v?Q.renderFinally():this._doAnimation(G,Q,e,O),this._resetController(s),this._renderBreadcrumb(e,s,p)}},r.prototype._giveContainerGroup=function(e){var i=this._containerGroup;return i||(i=this._containerGroup=new yd,this._initEvents(i),this.group.add(i)),i.x=e.x,i.y=e.y,i},r.prototype._doRender=function(e,i,s){var l=i.getData().tree,c=this._oldTree,f={nodeGroup:[],background:[],content:[]},p={nodeGroup:[],background:[],content:[]},v=this._storage,m=[];function x(Q,ft,Tt,xt){return function wg(o,r,e,i,s,l,c,f,p,v){if(c){var m=c.getLayout(),x=o.getData(),T=c.getModel();if(x.setItemGraphicEl(c.dataIndex,null),m&&m.isInView){var O=m.width,G=m.height,F=m.borderWidth,Q=m.invisible,ft=c.getRawIndex(),Tt=f&&f.getRawIndex(),xt=c.viewChildren,At=m.upperHeight,It=xt&&xt.length,Nt=T.getModel("itemStyle"),Gt=T.getModel(["emphasis","itemStyle"]),Wt=T.getModel(["blur","itemStyle"]),jt=T.getModel(["select","itemStyle"]),ee=Nt.get("borderRadius")||0,oe=rn("nodeGroup",yd);if(oe){if(p.add(oe),oe.x=m.x||0,oe.y=m.y||0,oe.markRedraw(),Wh(oe).nodeWidth=O,Wh(oe).nodeHeight=G,m.isAboveViewRoot)return oe;var de=rn("background",Hp,v,Ag);de&&function fr(Cn,nn,Wn){var kn=(0,Fr.A)(nn);if(kn.dataIndex=c.dataIndex,kn.seriesIndex=o.seriesIndex,nn.setShape({x:0,y:0,width:O,height:G,r:ee}),Q)Dr(nn);else{nn.invisible=!1;var qn=c.getVisual("style"),ha=qn.stroke,ma=Vp(Nt);ma.fill=ha;var Ci=Ol(Gt);Ci.fill=Gt.get("borderColor");var Qi=Ol(Wt);Qi.fill=Wt.get("borderColor");var Ki=Ol(jt);Ki.fill=jt.get("borderColor"),Wn?cn(nn,ha,qn.opacity,{x:F,y:0,width:O-2*F,height:At}):nn.removeTextContent(),nn.setStyle(ma),nn.ensureState("emphasis").style=Ci,nn.ensureState("blur").style=Qi,nn.ensureState("select").style=Ki,(0,sr.MA)(nn)}Cn.add(nn)}(oe,de,It&&m.upperLabelHeight);var xe=T.getModel("emphasis"),be=xe.get("focus"),Ae=xe.get("blurScope"),ke=xe.get("disabled"),Je="ancestor"===be?c.getAncestorsIndices():"descendant"===be?c.getDescendantIndices():be;if(It)(0,sr.Av)(oe)&&(0,sr.Nj)(oe,!1),de&&((0,sr.Nj)(de,!ke),x.setItemGraphicEl(c.dataIndex,de),(0,sr.Ib)(de,Je,Ae));else{var $e=rn("content",Hp,v,Og);$e&&function wr(Cn,nn){var Wn=(0,Fr.A)(nn);Wn.dataIndex=c.dataIndex,Wn.seriesIndex=o.seriesIndex;var kn=Math.max(O-2*F,0),qn=Math.max(G-2*F,0);if(nn.culling=!0,nn.setShape({x:F,y:F,width:kn,height:qn,r:ee}),Q)Dr(nn);else{nn.invisible=!1;var ha=c.getVisual("style"),ma=ha.fill,Ci=Vp(Nt);Ci.fill=ma,Ci.decal=ha.decal;var Qi=Ol(Gt),Ki=Ol(Wt),Ga=Ol(jt);cn(nn,ma,ha.opacity,null),nn.setStyle(Ci),nn.ensureState("emphasis").style=Qi,nn.ensureState("blur").style=Ki,nn.ensureState("select").style=Ga,(0,sr.MA)(nn)}Cn.add(nn)}(oe,$e),de.disableMorphing=!0,de&&(0,sr.Av)(de)&&(0,sr.Nj)(de,!1),(0,sr.Nj)(oe,!ke),x.setItemGraphicEl(c.dataIndex,oe),(0,sr.Ib)(oe,Je,Ae)}return oe}}}function Dr(Cn){!Cn.invisible&&l.push(Cn)}function cn(Cn,nn,Wn,kn){var qn=T.getModel(kn?yu:"label"),ha=(0,dr.U5)(T.get("name"),null),ma=qn.getShallow("show");(0,Or.ni)(Cn,(0,Or.k3)(T,kn?yu:"label"),{defaultText:ma?ha:null,inheritColor:nn,defaultOpacity:Wn,labelFetcher:o,labelDataIndex:c.dataIndex});var Ci=Cn.getTextContent();if(Ci){var Qi=Ci.style,Ki=(0,_.normalizeCssArray)(Qi.padding||0);kn&&(Cn.setTextConfig({layoutRect:kn}),Ci.disableLabelLayout=!0),Ci.beforeUpdate=function(){var Wl=Math.max((kn?kn.width:Cn.shape.width)-Ki[1]-Ki[3],0),po=Math.max((kn?kn.height:Cn.shape.height)-Ki[0]-Ki[2],0);(Qi.width!==Wl||Qi.height!==po)&&Ci.setStyle({width:Wl,height:po})},Qi.truncateMinChar=2,Qi.lineOverflow="truncate",ln(Qi,kn,m);var Ga=Ci.getState("emphasis");ln(Ga?Ga.style:null,kn,m)}}function ln(Cn,nn,Wn){var kn=Cn?Cn.text:null;if(!nn&&Wn.isLeafRoot&&null!=kn){var qn=o.get("drillDownIcon",!0);Cn.text=qn?qn+" "+kn:kn}}function rn(Cn,nn,Wn,kn){var qn=null!=Tt&&e[Cn][Tt],ha=s[Cn];return qn?(e[Cn][Tt]=null,function Pn(Cn,nn){var Wn=Cn[ft]={};nn instanceof yd?(Wn.oldX=nn.x,Wn.oldY=nn.y):Wn.oldShape=(0,_.extend)({},nn.shape)}(ha,qn)):Q||((qn=new nn)instanceof Ma.ZP&&(qn.z2=function Dg(o,r){return o*Ec+r}(Wn,kn)),function Qn(Cn,nn){var Wn=Cn[ft]={},kn=c.parentNode,qn=nn instanceof pr.Z;if(kn&&(!i||"drillDown"===i.direction)){var ha=0,ma=0,Ci=s.background[kn.getRawIndex()];!i&&Ci&&Ci.oldShape&&(ha=Ci.oldShape.width,ma=Ci.oldShape.height),qn?(Wn.oldX=0,Wn.oldY=ma):Wn.oldShape={x:ha,y:ma,width:0,height:0}}Wn.fadein=!qn}(ha,qn)),r[Cn][ft]=qn}}(i,p,v,s,f,m,Q,ft,Tt,xt)}!function O(Q,ft,Tt,xt,At){function It(Gt){return Gt.getId()}function Nt(Gt,Wt){var jt=null!=Gt?Q[Gt]:null,ee=null!=Wt?ft[Wt]:null,oe=x(jt,ee,Tt,At);oe&&O(jt&&jt.viewChildren||[],ee&&ee.viewChildren||[],oe,xt,At+1)}xt?(ft=Q,(0,_.each)(Q,function(Gt,Wt){!Gt.isRemoved()&&Nt(Wt,Wt)})):new Hs.Z(ft,Q,It,It).add(Nt).update(Nt).remove((0,_.curry)(Nt,null)).execute()}(l.root?[l.root]:[],c&&c.root?[c.root]:[],e,l===c||!c,0);var T=function G(Q){var ft={nodeGroup:[],background:[],content:[]};return Q&&(0,_.each)(Q,function(Tt,xt){var At=ft[xt];(0,_.each)(Tt,function(It){It&&(At.push(It),Wh(It).willDelete=!0)})}),ft}(v);return this._oldTree=l,this._storage=p,{lastsForAnimation:f,willDeleteEls:T,renderFinally:function F(){(0,_.each)(T,function(Q){(0,_.each)(Q,function(ft){ft.parent&&ft.parent.remove(ft)})}),(0,_.each)(m,function(Q){Q.invisible=!0,Q.dirty()})}}},r.prototype._doAnimation=function(e,i,s,l){var c=s.get("animationDurationUpdate"),f=s.get("animationEasing"),p=((0,_.isFunction)(c)?0:c)||0,v=((0,_.isFunction)(f)?null:f)||"cubicOut",m=function Up(){return new mu}();(0,_.each)(i.willDeleteEls,function(x,T){(0,_.each)(x,function(O,G){if(!O.invisible){var Q,F=O.parent,ft=Wh(F);if(l&&"drillDown"===l.direction)Q=F===l.rootNodeGroup?{shape:{x:0,y:0,width:ft.nodeWidth,height:ft.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var Tt=0,xt=0;ft.willDelete||(Tt=ft.nodeWidth/2,xt=ft.nodeHeight/2),Q="nodeGroup"===T?{x:Tt,y:xt,style:{opacity:0}}:{shape:{x:Tt,y:xt,width:0,height:0},style:{opacity:0}}}Q&&m.add(O,Q,p,0,v)}})}),(0,_.each)(this._storage,function(x,T){(0,_.each)(x,function(O,G){var F=i.lastsForAnimation[T][G],Q={};!F||(O instanceof pr.Z?null!=F.oldX&&(Q.x=O.x,Q.y=O.y,O.x=F.oldX,O.y=F.oldY):(F.oldShape&&(Q.shape=(0,_.extend)({},O.shape),O.setShape(F.oldShape)),F.fadein?(O.setStyle("opacity",0),Q.style={opacity:1}):1!==O.style.opacity&&(Q.style={opacity:1})),m.add(O,Q,p,0,v))})},this),this._state="animating",m.finished((0,_.bind)(function(){this._state="ready",i.renderFinally()},this)).start()},r.prototype._resetController=function(e){var i=this._controller;i||((i=this._controller=new Go(e.getZr())).enable(this.seriesModel.get("roam")),i.on("pan",(0,_.bind)(this._onPan,this)),i.on("zoom",(0,_.bind)(this._onZoom,this)));var s=new bn.Z(0,0,e.getWidth(),e.getHeight());i.setPointerChecker(function(l,c,f){return s.contain(c,f)})},r.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},r.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var i=this.seriesModel.getData().tree.root;if(!i)return;var s=i.getLayout();if(!s)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x+e.dx,y:s.y+e.dy,width:s.width,height:s.height}})}},r.prototype._onZoom=function(e){var i=e.originX,s=e.originY;if("animating"!==this._state){var l=this.seriesModel.getData().tree.root;if(!l)return;var c=l.getLayout();if(!c)return;var f=new bn.Z(c.x,c.y,c.width,c.height),p=this.seriesModel.layoutInfo;i-=p.x,s-=p.y;var v=In.create();In.translate(v,v,[-i,-s]),In.scale(v,v,[e.scale,e.scale]),In.translate(v,v,[i,s]),f.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:f.x,y:f.y,width:f.width,height:f.height}})}},r.prototype._initEvents=function(e){var i=this;e.on("click",function(s){if("ready"===i._state){var l=i.seriesModel.get("nodeClick",!0);if(l){var c=i.findTarget(s.offsetX,s.offsetY);if(c){var f=c.node;if(f.getLayout().isLeafRoot)i._rootToNode(c);else if("zoomToNode"===l)i._zoomToNode(c);else if("link"===l){var p=f.hostTree.data.getItemModel(f.dataIndex),v=p.get("link",!0),m=p.get("target",!0)||"blank";v&&(0,Mn.MI)(v,m)}}}}},this)},r.prototype._renderBreadcrumb=function(e,i,s){var l=this;s||(s=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(i.getWidth()/2,i.getHeight()/2))||(s={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new Pg(this.group))).render(e,i,s.node,function(c){"animating"!==l._state&&(fd(e.getViewRoot(),c)?l._rootToNode({node:c}):l._zoomToNode({node:c}))})},r.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},r.prototype.dispose=function(){this._clearController()},r.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},r.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},r.prototype.findTarget=function(e,i){var s;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(c){var f=this._storage.background[c.getRawIndex()];if(f){var p=f.transformCoordToLocal(e,i),v=f.shape;if(!(v.x<=p[0]&&p[0]<=v.x+v.width&&v.y<=p[1]&&p[1]<=v.y+v.height))return!1;s={node:c,offsetX:p[0],offsetY:p[1]}}},this),s},r.type="treemap",r}(_r.Z);var El=_.each,Ng=_.isObject,Td=function(){function o(r){var e=r.mappingMethod,i=r.type,s=this.option=_.clone(r);this.type=i,this.mappingMethod=e,this._normalizeData=Cd[e];var l=o.visualHandlers[i];this.applyVisual=l.applyVisual,this.getColorMapper=l.getColorMapper,this._normalizedToVisual=l._normalizedToVisual[e],"piecewise"===e?($h(s),function Pa(o){var r=o.pieceList;o.hasSpecialVisual=!1,_.each(r,function(e,i){e.originIndex=i,null!=e.visual&&(o.hasSpecialVisual=!0)})}(s)):"category"===e?s.categories?function Dl(o){var r=o.categories,e=o.categoryMap={},i=o.visual;if(El(r,function(c,f){e[c]=f}),!_.isArray(i)){var s=[];_.isObject(i)?El(i,function(c,f){s[e[f]??-1]=c}):s[-1]=i,i=Yh(o,s)}for(var l=r.length-1;l>=0;l--)null==i[l]&&(delete e[r[l]],r.pop())}(s):$h(s,!0):(_.assert("linear"!==e||s.dataExtent),$h(s))}return o.prototype.mapValueToVisual=function(r){var e=this._normalizeData(r);return this._normalizedToVisual(e,r)},o.prototype.getNormalizer=function(){return _.bind(this._normalizeData,this)},o.listVisualTypes=function(){return _.keys(o.visualHandlers)},o.isValidType=function(r){return o.visualHandlers.hasOwnProperty(r)},o.eachVisual=function(r,e,i){_.isObject(r)?_.each(r,e,i):e.call(i,r)},o.mapVisual=function(r,e,i){var s,l=_.isArray(r)?[]:_.isObject(r)?{}:(s=!0,null);return o.eachVisual(r,function(c,f){var p=e.call(i,c,f);s?l=p:l[f]=p}),l},o.retrieveVisuals=function(r){var i,e={};return r&&El(o.visualHandlers,function(s,l){r.hasOwnProperty(l)&&(e[l]=r[l],i=!0)}),i?e:null},o.prepareVisualTypes=function(r){if(_.isArray(r))r=r.slice();else{if(!Ng(r))return[];var e=[];El(r,function(i,s){e.push(s)}),r=e}return r.sort(function(i,s){return"color"===s&&"color"!==i&&0===i.indexOf("color")?1:-1}),r},o.dependsOn=function(r,e){return"color"===e?!(!r||0!==r.indexOf(e)):r===e},o.findPieceIndex=function(r,e,i){for(var s,l=1/0,c=0,f=e.length;c<f;c++){var p=e[c].value;if(null!=p){if(p===r||_.isString(p)&&p===r+"")return c;i&&T(p,c)}}for(c=0,f=e.length;c<f;c++){var v=e[c],m=v.interval,x=v.close;if(m){if(m[0]===-1/0){if(Nc(x[1],r,m[1]))return c}else if(m[1]===1/0){if(Nc(x[0],m[0],r))return c}else if(Nc(x[0],m[0],r)&&Nc(x[1],r,m[1]))return c;i&&T(m[0],c),i&&T(m[1],c)}}if(i)return r===1/0?e.length-1:r===-1/0?0:s;function T(O,G){var F=Math.abs(O-r);F<l&&(l=F,s=G)}},o.visualHandlers={color:{applyVisual:Dc("color"),getColorMapper:function(){var r=this.option;return _.bind("category"===r.mappingMethod?function(e,i){return!i&&(e=this._normalizeData(e)),Su.call(this,e)}:function(e,i,s){var l=!!s;return!i&&(e=this._normalizeData(e)),s=oi.fastLerp(e,r.parsedVisual,s),l?s:oi.stringify(s,"rgba")},this)},_normalizedToVisual:{linear:function(r){return oi.stringify(oi.fastLerp(r,this.option.parsedVisual),"rgba")},category:Su,piecewise:function(r,e){var i=Lc.call(this,e);return null==i&&(i=oi.stringify(oi.fastLerp(r,this.option.parsedVisual),"rgba")),i},fixed:Vs}},colorHue:Xh(function(r,e){return oi.modifyHSL(r,e)}),colorSaturation:Xh(function(r,e){return oi.modifyHSL(r,null,e)}),colorLightness:Xh(function(r,e){return oi.modifyHSL(r,null,null,e)}),colorAlpha:Xh(function(r,e){return oi.modifyAlpha(r,e)}),decal:{applyVisual:Dc("decal"),_normalizedToVisual:{linear:null,category:Su,piecewise:null,fixed:null}},opacity:{applyVisual:Dc("opacity"),_normalizedToVisual:Ll([0,1])},liftZ:{applyVisual:Dc("liftZ"),_normalizedToVisual:{linear:Vs,category:Vs,piecewise:Vs,fixed:Vs}},symbol:{applyVisual:function(r,e,i){i("symbol",this.mapValueToVisual(r))},_normalizedToVisual:{linear:xu,category:Su,piecewise:function(r,e){var i=Lc.call(this,e);return null==i&&(i=xu.call(this,r)),i},fixed:Vs}},symbolSize:{applyVisual:Dc("symbolSize"),_normalizedToVisual:Ll([0,1])}},o}();function $h(o,r){var e=o.visual,i=[];_.isObject(e)?El(e,function(l){i.push(l)}):null!=e&&i.push(e),!r&&1===i.length&&!{color:1,symbol:1}.hasOwnProperty(o.type)&&(i[1]=i[0]),Yh(o,i)}function Xh(o){return{applyVisual:function(r,e,i){var s=this.mapValueToVisual(r);i("color",o(e("color"),s))},_normalizedToVisual:Ll([0,1])}}function xu(o){var r=this.option.visual;return r[Math.round((0,Be.NU)(o,[0,1],[0,r.length-1],!0))]||{}}function Dc(o){return function(r,e,i){i(o,this.mapValueToVisual(r))}}function Su(o){var r=this.option.visual;return r[this.option.loop&&-1!==o?o%r.length:o]}function Vs(){return this.option.visual[0]}function Ll(o){return{linear:function(r){return(0,Be.NU)(r,o,this.option.visual,!0)},category:Su,piecewise:function(r,e){var i=Lc.call(this,e);return null==i&&(i=(0,Be.NU)(r,o,this.option.visual,!0)),i},fixed:Vs}}function Lc(o){var r=this.option,e=r.pieceList;if(r.hasSpecialVisual){var s=e[Td.findPieceIndex(o,e)];if(s&&s.visual)return s.visual[this.type]}}function Yh(o,r){return o.visual=r,"color"===o.type&&(o.parsedVisual=_.map(r,function(e){return oi.parse(e)||[0,0,0,1]})),r}var Cd={linear:function(o){return(0,Be.NU)(o,this.option.dataExtent,[0,1],!0)},piecewise:function(o){var r=this.option.pieceList,e=Td.findPieceIndex(o,r,!0);if(null!=e)return(0,Be.NU)(e,[0,r.length-1],[0,1],!0)},category:function(o){return(this.option.categories?this.option.categoryMap[o]:o)??-1},fixed:_.noop};function Nc(o,r,e){return o?r<=e:r<e}const Gi=Td;var Ic=(0,dr.Yf)();const Tu={seriesType:"treemap",reset:function(o){var e=o.getData().tree.root;e.isRemoved()||bd(e,{},o.getViewRoot().getAncestors(),o)}};function bd(o,r,e,i){var s=o.getModel(),l=o.getLayout(),c=o.hostTree.data;if(l&&!l.invisible&&l.isInView){var T,f=s.getModel("itemStyle"),p=function Wp(o,r,e){var i=(0,_.extend)({},r),s=e.designatedVisualItemStyle;return(0,_.each)(["color","colorAlpha","colorSaturation"],function(l){s[l]=r[l];var c=o.get(l);s[l]=null,null!=c&&(i[l]=c)}),i}(f,r,i),v=c.ensureUniqueItemVisual(o.dataIndex,"style"),m=f.get("borderColor"),x=f.get("borderColorSaturation");null!=x&&(m=function Ad(o,r){return null!=r?(0,oi.modifyHSL)(r,null,null,o):null}(x,T=Pd(p))),v.stroke=m;var O=o.viewChildren;if(O&&O.length){var G=function Ig(o,r,e,i,s,l){if(l&&l.length){var c=wi(r,"color")||null!=s.color&&"none"!==s.color&&(wi(r,"colorAlpha")||wi(r,"colorSaturation"));if(c){var f=r.get("visualMin"),p=r.get("visualMax"),v=e.dataExtent.slice();null!=f&&f<v[0]&&(v[0]=f),null!=p&&p>v[1]&&(v[1]=p);var m=r.get("colorMappingBy"),x={type:c.name,dataExtent:v,visual:c.range};"color"!==x.type||"index"!==m&&"id"!==m?x.mappingMethod="linear":(x.mappingMethod="category",x.loop=!0);var T=new Gi(x);return Ic(T).drColorMappingBy=m,T}}}(0,s,l,0,p,O);(0,_.each)(O,function(F,Q){if(F.depth>=e.length||F===e[F.depth]){var ft=function $i(o,r,e,i,s,l){var c=(0,_.extend)({},r);if(s){var f=s.type,p="color"===f&&Ic(s).drColorMappingBy,v="index"===p?i:"id"===p?l.mapIdToIndex(e.getId()):e.getValue(o.get("visualDimension"));c[f]=s.mapValueToVisual(v)}return c}(s,p,F,Q,G,i);bd(F,ft,e,i)}})}else T=Pd(p),v.fill=T}}function Pd(o){var r=Od(o,"color");if(r){var e=Od(o,"colorAlpha"),i=Od(o,"colorSaturation");return i&&(r=(0,oi.modifyHSL)(r,null,null,i)),e&&(r=(0,oi.modifyAlpha)(r,e)),r}}function Od(o,r){var e=o[r];if(null!=e&&"none"!==e)return e}function wi(o,r){var e=o.get(r);return(0,_.isArray)(e)&&e.length?{name:r,range:e}:null}var Cu=Math.max,Rc=Math.min,Ws=_.retrieve,Bc=_.each,Aa=["itemStyle","borderWidth"],Ed=["itemStyle","gapWidth"],Kh=["upperLabel","show"],Rg=["upperLabel","height"];const Bg={seriesType:"treemap",reset:function(o,r,e,i){var s=e.getWidth(),l=e.getHeight(),c=o.option,f=sn.ME(o.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),p=c.size||[],v=(0,Be.GM)(Ws(f.width,p[0]),s),m=(0,Be.GM)(Ws(f.height,p[1]),l),x=i&&i.type,O=Ac(i,["treemapZoomToNode","treemapRootToNode"],o),G="treemapRender"===x||"treemapMove"===x?i.rootRect:null,F=o.getViewRoot(),Q=Gp(F);if("treemapMove"!==x){var ft="treemapZoomToNode"===x?function kg(o,r,e,i,s){var l=(r||{}).node,c=[i,s];if(!l||l===e)return c;for(var f,p=i*s,v=p*o.option.zoomToNodeRatio;f=l.parentNode;){for(var m=0,x=f.children,T=0,O=x.length;T<O;T++)m+=x[T].getValue();var G=l.getValue();if(0===G)return c;v*=m/G;var F=f.getModel(),Q=F.get(Aa);(v+=4*Q*Q+(3*Q+Math.max(Q,Ld(F)))*Math.pow(v,.5))>Be.YM&&(v=Be.YM),l=f}v<p&&(v=p);var Tt=Math.pow(v/p,.5);return[i*Tt,s*Tt]}(o,O,F,v,m):G?[G.width,G.height]:[v,m],Tt=c.sort;Tt&&"asc"!==Tt&&"desc"!==Tt&&(Tt="desc");var xt={squareRatio:c.squareRatio,sort:Tt,leafDepth:c.leafDepth};F.hostTree.clearLayouts();var At={x:0,y:0,width:ft[0],height:ft[1],area:ft[0]*ft[1]};F.setLayout(At),$p(F,xt,!1,0),At=F.getLayout(),Bc(Q,function(Nt,Gt){var Wt=(Q[Gt+1]||F).getValue();Nt.setLayout(_.extend({dataExtent:[Wt,Wt],borderWidth:0,upperHeight:0},At))})}var It=o.getData().tree.root;It.setLayout(function zg(o,r,e){if(r)return{x:r.x,y:r.y};var i={x:0,y:0};if(!e)return i;var s=e.node,l=s.getLayout();if(!l)return i;for(var c=[l.width/2,l.height/2],f=s;f;){var p=f.getLayout();c[0]+=p.x,c[1]+=p.y,f=f.parentNode}return{x:o.width/2-c[0],y:o.height/2-c[1]}}(f,G,O),!0),o.setLayoutInfo(f),Ug(It,new bn.Z(-f.x,-f.y,s,l),Q,F,0)}};function $p(o,r,e,i){var s,l;if(!o.isRemoved()){var c=o.getLayout();s=c.width,l=c.height;var f=o.getModel(),p=f.get(Aa),v=f.get(Ed)/2,m=Ld(f),x=Math.max(p,m),T=p-v,O=x-v;o.setLayout({borderWidth:p,upperHeight:x,upperLabelHeight:m},!0);var G=(s=Cu(s-2*T,0))*(l=Cu(l-T-O,0)),F=function Gg(o,r,e,i,s,l){var c=o.children||[],f=i.sort;"asc"!==f&&"desc"!==f&&(f=null);var p=null!=i.leafDepth&&i.leafDepth<=l;if(s&&!p)return o.viewChildren=[];c=_.filter(c,function(O){return!O.isRemoved()}),function Mu(o,r){r&&o.sort(function(e,i){var s="asc"===r?e.getValue()-i.getValue():i.getValue()-e.getValue();return 0===s?"asc"===r?e.dataIndex-i.dataIndex:i.dataIndex-e.dataIndex:s})}(c,f);var v=function Fg(o,r,e){for(var i=0,s=0,l=r.length;s<l;s++)i+=r[s].getValue();var f,c=o.get("visualDimension");return r&&r.length?"value"===c&&e?(f=[r[r.length-1].getValue(),r[0].getValue()],"asc"===e&&f.reverse()):(f=[1/0,-1/0],Bc(r,function(p){var v=p.getValue(c);v<f[0]&&(f[0]=v),v>f[1]&&(f[1]=v)})):f=[NaN,NaN],{sum:i,dataExtent:f}}(r,c,f);if(0===v.sum)return o.viewChildren=[];if(v.sum=function Zg(o,r,e,i,s){if(!i)return e;for(var l=o.get("visibleMin"),c=s.length,f=c,p=c-1;p>=0;p--){var v=s["asc"===i?c-p-1:p].getValue();v/e*r<l&&(f=p,e-=v)}return s.splice("asc"===i?0:f,c-f),e}(r,e,v.sum,f,c),0===v.sum)return o.viewChildren=[];for(var m=0,x=c.length;m<x;m++){var T=c[m].getValue()/v.sum*e;c[m].setLayout({area:T})}return p&&(c.length&&o.setLayout({isLeafRoot:!0},!0),c.length=0),o.viewChildren=c,o.setLayout({dataExtent:v.dataExtent},!0),c}(o,f,G,r,e,i);if(F.length){var Q={x:T,y:O,width:s,height:l},ft=Rc(s,l),Tt=1/0,xt=[];xt.area=0;for(var At=0,It=F.length;At<It;){var Nt=F[At];xt.push(Nt),xt.area+=Nt.getLayout().area;var Gt=wd(xt,ft,r.squareRatio);Gt<=Tt?(At++,Tt=Gt):(xt.area-=xt.pop().getLayout().area,Dd(xt,ft,Q,v,!1),ft=Rc(Q.width,Q.height),xt.length=xt.area=0,Tt=1/0)}if(xt.length&&Dd(xt,ft,Q,v,!0),!e){var Wt=f.get("childrenVisibleMin");null!=Wt&&G<Wt&&(e=!0)}for(At=0,It=F.length;At<It;At++)$p(F[At],r,e,i+1)}}}function wd(o,r,e){for(var i=0,s=1/0,l=0,c=void 0,f=o.length;l<f;l++)(c=o[l].getLayout().area)&&(c<s&&(s=c),c>i&&(i=c));var p=o.area*o.area,v=r*r*e;return p?Cu(v*i/p,p/(v*s)):1/0}function Dd(o,r,e,i,s){var l=r===e.width?0:1,c=1-l,f=["x","y"],p=["width","height"],v=e[f[l]],m=r?o.area/r:0;(s||m>e[p[c]])&&(m=e[p[c]]);for(var x=0,T=o.length;x<T;x++){var O=o[x],G={},F=m?O.getLayout().area/m:0,Q=G[p[c]]=Cu(m-2*i,0),ft=e[f[l]]+e[p[l]]-v,Tt=x===T-1||ft<F?ft:F,xt=G[p[l]]=Cu(Tt-2*i,0);G[f[c]]=e[f[c]]+Rc(i,Q/2),G[f[l]]=v+Rc(i,xt/2),v+=Tt,O.setLayout(G,!0)}e[f[c]]+=m,e[p[c]]-=m}function Ug(o,r,e,i,s){var l=o.getLayout(),c=e[s],f=c&&c===o;if(!(c&&!f||s===e.length&&o!==i)){o.setLayout({isInView:!0,invisible:!f&&!r.intersect(l),isAboveViewRoot:f},!0);var p=new bn.Z(r.x-l.x,r.y-l.y,r.width,r.height);Bc(o.viewChildren||[],function(v){Ug(v,p,e,i,s+1)})}}function Ld(o){return o.get(Kh)?o.get(Rg):0}function Yp(o){var r=o.findComponents({mainType:"legend"});!r||!r.length||o.eachSeriesByType("graph",function(e){var i=e.getCategoriesData(),l=e.getGraph().data,c=i.mapArray(i.getName);l.filterSelf(function(f){var v=l.getItemModel(f).getShallow("category");if(null!=v){(0,_.isNumber)(v)&&(v=c[v]);for(var m=0;m<r.length;m++)if(!r[m].isSelected(v))return!1}return!0})})}function Kp(o){var r={};o.eachSeriesByType("graph",function(e){var i=e.getCategoriesData(),s=e.getData(),l={};i.each(function(c){var f=i.getName(c);l["ec-"+f]=c;var p=i.getItemModel(c),v=p.getModel("itemStyle").getItemStyle();v.fill||(v.fill=e.getColorFromPalette(f,r)),i.setItemVisual(c,"style",v);for(var m=["symbol","symbolSize","symbolKeepAspect"],x=0;x<m.length;x++){var T=p.getShallow(m[x],!0);null!=T&&i.setItemVisual(c,m[x],T)}}),i.count()&&s.each(function(c){var p=s.getItemModel(c).getShallow("category");if(null!=p){(0,_.isString)(p)&&(p=l["ec-"+p]);var v=i.getItemVisual(p,"style"),m=s.ensureUniqueItemVisual(c,"style");(0,_.extend)(m,v);for(var x=["symbol","symbolSize","symbolKeepAspect"],T=0;T<x.length;T++)s.setItemVisual(c,x[T],i.getItemVisual(p,x[T]))}})})}function Gc(o){return o instanceof Array||(o=[o,o]),o}function Nl(o){o.eachSeriesByType("graph",function(r){var e=r.getGraph(),i=r.getEdgeData(),s=Gc(r.get("edgeSymbol")),l=Gc(r.get("edgeSymbolSize"));i.setVisual("fromSymbol",s&&s[0]),i.setVisual("toSymbol",s&&s[1]),i.setVisual("fromSymbolSize",l&&l[0]),i.setVisual("toSymbolSize",l&&l[1]),i.setVisual("style",r.getModel("lineStyle").getLineStyle()),i.each(function(c){var f=i.getItemModel(c),p=e.getEdgeByIndex(c),v=Gc(f.getShallow("symbol",!0)),m=Gc(f.getShallow("symbolSize",!0)),x=f.getModel("lineStyle").getLineStyle(),T=i.ensureUniqueItemVisual(c,"style");switch((0,_.extend)(T,x),T.stroke){case"source":var O=p.node1.getVisual("style");T.stroke=O&&O.fill;break;case"target":O=p.node2.getVisual("style"),T.stroke=O&&O.fill}v[0]&&p.setVisual("fromSymbol",v[0]),v[1]&&p.setVisual("toSymbol",v[1]),m[0]&&p.setVisual("fromSymbolSize",m[0]),m[1]&&p.setVisual("toSymbolSize",m[1])})})}var Zc=function(o){return o.get("autoCurveness")||null},Qa=function(o,r){var e=Zc(o),i=20,s=[];if(_.isNumber(e))i=e;else if(_.isArray(e))return void(o.__curvenessList=e);r>i&&(i=r);var l=i%2?i+2:i+3;s=[];for(var c=0;c<l;c++)s.push((c%2?c+1:c)/10*(c%2?-1:1));o.__curvenessList=s},qa=function(o,r,e){var i=[o.id,o.dataIndex].join("."),s=[r.id,r.dataIndex].join(".");return[e.uid,i,s].join("--\x3e")},Id=function(o){var r=o.split("--\x3e");return[r[0],r[2],r[1]].join("--\x3e")},ms=function(o,r){var e=r.__edgeMap;return e[o]?e[o].length:0};function Rd(o,r,e,i){var s=Zc(r),l=_.isArray(s);if(!s)return null;var c=function(o,r){var e=qa(o.node1,o.node2,r);return r.__edgeMap[e]}(o,r);if(!c)return null;for(var f=-1,p=0;p<c.length;p++)if(c[p]===e){f=p;break}var v=function(o,r){return ms(qa(o.node1,o.node2,r),r)+ms(qa(o.node2,o.node1,r),r)}(o,r);Qa(r,v),o.lineStyle=o.lineStyle||{};var m=qa(o.node1,o.node2,r),x=r.__curvenessList,T=l||v%2?0:1;if(c.isForward)return x[T+f];var O=Id(m),G=ms(O,r),F=x[f+G+T];return i?l?s&&0===s[0]?(G+T)%2?F:-F:((G%2?0:1)+T)%2?F:-F:(G+T)%2?F:-F:x[f+G+T]}function Qp(o){var r=o.coordinateSystem;if(!r||"view"===r.type){var e=o.getGraph();e.eachNode(function(i){var s=i.getModel();i.setLayout([+s.get("x"),+s.get("y")])}),Bd(e,o)}}function Bd(o,r){o.eachEdge(function(e,i){var s=_.retrieve3(e.getModel().get(["lineStyle","curveness"]),-Rd(e,r,i,!0),0),l=Ur.clone(e.node1.getLayout()),c=Ur.clone(e.node2.getLayout()),f=[l,c];+s&&f.push([(l[0]+c[0])/2-(l[1]-c[1])*s,(l[1]+c[1])/2-(c[0]-l[0])*s]),e.setLayout(f)})}function jh(o,r){o.eachSeriesByType("graph",function(e){var i=e.get("layout"),s=e.coordinateSystem;if(s&&"view"!==s.type){var l=e.getData(),c=[];(0,_.each)(s.dimensions,function(T){c=c.concat(l.mapDimensionsAll(T))});for(var f=0;f<l.count();f++){for(var p=[],v=!1,m=0;m<c.length;m++){var x=l.get(c[m],f);isNaN(x)||(v=!0),p.push(x)}l.setItemLayout(f,v?s.dataToPoint(p):[NaN,NaN])}Bd(l.graph,e)}else(!i||"none"===i)&&Qp(e)})}function Fc(o){var r=o.coordinateSystem;if("view"!==r.type)return 1;var e=o.option.nodeScaleRatio,i=r.scaleX;return((r.getZoom()-1)*e+1)/i}function kc(o){var r=o.getVisual("symbolSize");return r instanceof Array&&(r=(r[0]+r[1])/2),+r}var qp=Math.PI,Gd=[];function Zd(o,r,e,i){var s=o.coordinateSystem;if(!s||"view"===s.type){var l=s.getBoundingRect(),c=o.getData(),f=c.graph,p=l.width/2+l.x,v=l.height/2+l.y,m=Math.min(l.width,l.height)/2,x=c.count();if(c.setLayout({cx:p,cy:v}),x){if(e){var T=s.pointToData(i),F=[T[0]-p,T[1]-v];Ur.normalize(F,F),Ur.scale(F,F,m),e.setLayout([p+F[0],v+F[1]],!0),tv(e,o.get(["circular","rotateLabel"]),p,v)}Wg[r](o,f,c,m,p,v,x),f.eachEdge(function(ft,Tt){var Nt,xt=_.retrieve3(ft.getModel().get(["lineStyle","curveness"]),Rd(ft,o,Tt),0),At=Ur.clone(ft.node1.getLayout()),It=Ur.clone(ft.node2.getLayout());+xt&&(Nt=[p*(xt*=3)+(At[0]+It[0])/2*(1-xt),v*xt+(At[1]+It[1])/2*(1-xt)]),ft.setLayout([At,It,Nt])})}}}var Wg={value:function(o,r,e,i,s,l,c){var f=0,p=e.getSum("value"),v=2*Math.PI/(p||c);r.eachNode(function(m){var x=m.getValue("value"),T=v*(p?x:1)/2;f+=T,m.setLayout([i*Math.cos(f)+s,i*Math.sin(f)+l]),f+=T})},symbolSize:function(o,r,e,i,s,l,c){var f=0;Gd.length=c;var p=Fc(o);r.eachNode(function(x){var T=kc(x);isNaN(T)&&(T=2),T<0&&(T=0),T*=p;var O=Math.asin(T/2/i);isNaN(O)&&(O=qp/2),Gd[x.dataIndex]=O,f+=2*O});var v=(2*qp-f)/c/2,m=0;r.eachNode(function(x){var T=v+Gd[x.dataIndex];m+=T,(!x.getLayout()||!x.getLayout().fixed)&&x.setLayout([i*Math.cos(m)+s,i*Math.sin(m)+l]),m+=T})}};function tv(o,r,e,i){var s=o.getGraphicEl();if(s){var c=o.getModel().get(["label","rotate"])||0,f=s.getSymbolPath();if(r){var p=o.getLayout(),v=Math.atan2(p[1]-i,p[0]-e);v<0&&(v=2*Math.PI+v);var m=p[0]<e;m&&(v-=Math.PI);var x=m?"left":"right";f.setTextConfig({rotation:-v,position:x,origin:"center"});var T=f.ensureState("emphasis");_.extend(T.textConfig||(T.textConfig={}),{position:x})}else f.setTextConfig({rotation:c*=Math.PI/180})}}function $g(o){o.eachSeriesByType("graph",function(r){"circular"===r.get("layout")&&Zd(r,"symbolSize")})}var Il=Ur.scaleAndAdd;function Yg(o){o.eachSeriesByType("graph",function(r){var e=r.coordinateSystem;if(!e||"view"===e.type)if("force"===r.get("layout")){var i=r.preservedPoints||{},s=r.getGraph(),l=s.data,c=s.edgeData,f=r.getModel("force"),p=f.get("initLayout");r.preservedPoints?l.each(function(xt){var At=l.getId(xt);l.setItemLayout(xt,i[At]||[NaN,NaN])}):p&&"none"!==p?"circular"===p&&Zd(r,"value"):Qp(r);var v=l.getDataExtent("value"),m=c.getDataExtent("value"),x=f.get("repulsion"),T=f.get("edgeLength"),O=_.isArray(x)?x:[x,x],G=_.isArray(T)?T:[T,T];G=[G[1],G[0]];var F=l.mapArray("value",function(xt,At){var It=l.getItemLayout(At),Nt=(0,Be.NU)(xt,v,O);return isNaN(Nt)&&(Nt=(O[0]+O[1])/2),{w:Nt,rep:Nt,fixed:l.getItemModel(At).get("fixed"),p:!It||isNaN(It[0])||isNaN(It[1])?null:It}}),Q=c.mapArray("value",function(xt,At){var It=s.getEdgeByIndex(At),Nt=(0,Be.NU)(xt,m,G);isNaN(Nt)&&(Nt=(G[0]+G[1])/2);var Gt=It.getModel(),Wt=_.retrieve3(It.getModel().get(["lineStyle","curveness"]),-Rd(It,r,At,!0),0);return{n1:F[It.node1.dataIndex],n2:F[It.node2.dataIndex],d:Nt,curveness:Wt,ignoreForceLayout:Gt.get("ignoreForceLayout")}}),ft=e.getBoundingRect(),Tt=function Xg(o,r,e){for(var i=o,s=r,l=e.rect,c=l.width,f=l.height,p=[l.x+c/2,l.y+f/2],v=e.gravity??.1,m=0;m<i.length;m++){var x=i[m];x.p||(x.p=Ur.create(c*(Math.random()-.5)+p[0],f*(Math.random()-.5)+p[1])),x.pp=Ur.clone(x.p),x.edges=null}var G,F,T=e.friction??.6,O=T;return{warmUp:function(){O=.8*T},setFixed:function(Q){i[Q].fixed=!0},setUnfixed:function(Q){i[Q].fixed=!1},beforeStep:function(Q){G=Q},afterStep:function(Q){F=Q},step:function(Q){G&&G(i,s);for(var ft=[],Tt=i.length,xt=0;xt<s.length;xt++){var At=s[xt];if(!At.ignoreForceLayout){Ur.sub(ft,(Nt=At.n2).p,(It=At.n1).p);var Gt=Ur.len(ft)-At.d,Wt=Nt.w/(It.w+Nt.w);isNaN(Wt)&&(Wt=0),Ur.normalize(ft,ft),!It.fixed&&Il(It.p,It.p,ft,Wt*Gt*O),!Nt.fixed&&Il(Nt.p,Nt.p,ft,-(1-Wt)*Gt*O)}}for(xt=0;xt<Tt;xt++)(jt=i[xt]).fixed||(Ur.sub(ft,p,jt.p),Il(jt.p,jt.p,ft,v*O));for(xt=0;xt<Tt;xt++)for(var It=i[xt],ee=xt+1;ee<Tt;ee++){var Nt;Ur.sub(ft,(Nt=i[ee]).p,It.p),0===(Gt=Ur.len(ft))&&(Ur.set(ft,Math.random()-.5,Math.random()-.5),Gt=1);var oe=(It.rep+Nt.rep)/Gt/Gt;!It.fixed&&Il(It.pp,It.pp,ft,oe),!Nt.fixed&&Il(Nt.pp,Nt.pp,ft,-oe)}var de=[];for(xt=0;xt<Tt;xt++){var jt;(jt=i[xt]).fixed||(Ur.sub(de,jt.p,jt.pp),Il(jt.p,jt.p,de,O),Ur.copy(jt.pp,jt.p))}var xe=(O*=.992)<.01;F&&F(i,s,xe),Q&&Q(xe)}}}(F,Q,{rect:ft,gravity:f.get("gravity"),friction:f.get("friction")});Tt.beforeStep(function(xt,At){for(var It=0,Nt=xt.length;It<Nt;It++)xt[It].fixed&&Ur.copy(xt[It].p,s.getNodeByIndex(It).getLayout())}),Tt.afterStep(function(xt,At,It){for(var Nt=0,Gt=xt.length;Nt<Gt;Nt++)xt[Nt].fixed||s.getNodeByIndex(Nt).setLayout(xt[Nt].p),i[l.getId(Nt)]=xt[Nt].p;for(Nt=0,Gt=At.length;Nt<Gt;Nt++){var Wt=At[Nt],jt=s.getEdgeByIndex(Nt),ee=Wt.n1.p,oe=Wt.n2.p,de=jt.getLayout();(de=de?de.slice():[])[0]=de[0]||[],de[1]=de[1]||[],Ur.copy(de[0],ee),Ur.copy(de[1],oe),+Wt.curveness&&(de[2]=[(ee[0]+oe[0])/2-(ee[1]-oe[1])*Wt.curveness,(ee[1]+oe[1])/2-(oe[0]-ee[0])*Wt.curveness]),jt.setLayout(de)}}),r.forceLayout=Tt,r.preservedPoints=i,Tt.step()}else r.forceLayout=null})}function jg(o,r){var e=[];return o.eachSeriesByType("graph",function(i){var s=i.get("coordinateSystem");if(!s||"view"===s){var l=i.getData(),c=l.mapArray(function(Q){var ft=l.getItemModel(Q);return[+ft.get("x"),+ft.get("y")]}),f=[],p=[];bl.zk(c,f,p),p[0]-f[0]==0&&(p[0]+=1,f[0]-=1),p[1]-f[1]==0&&(p[1]+=1,f[1]-=1);var v=(p[0]-f[0])/(p[1]-f[1]),m=function Kg(o,r,e){var i=(0,_.extend)(o.getBoxLayoutParams(),{aspect:e});return(0,sn.ME)(i,{width:r.getWidth(),height:r.getHeight()})}(i,r,v);isNaN(v)&&(f=[m.x,m.y],p=[m.x+m.width,m.y+m.height]);var x=p[0]-f[0],T=p[1]-f[1],O=m.width,G=m.height,F=i.coordinateSystem=new ei;F.zoomLimit=i.get("scaleLimit"),F.setBoundingRect(f[0],f[1],x,T),F.setViewRect(m.x,m.y,O,G),F.setCenter(i.get("center"),r),F.setZoom(i.get("zoom")),e.push(F)}}),e}var Jh=aa.Z.prototype,Qh=xc.Z.prototype,ev=function o(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function Fd(o){return isNaN(+o.cpx1)||isNaN(+o.cpy1)}!function(o){(0,Re.ZT)(function r(){return null!==o&&o.apply(this,arguments)||this},o)}(ev);const Qg=function(o){function r(e){var i=o.call(this,e)||this;return i.type="ec-line",i}return(0,Re.ZT)(r,o),r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new ev},r.prototype.buildPath=function(e,i){Fd(i)?Jh.buildPath.call(this,e,i):Qh.buildPath.call(this,e,i)},r.prototype.pointAt=function(e){return Fd(this.shape)?Jh.pointAt.call(this,e):Qh.pointAt.call(this,e)},r.prototype.tangentAt=function(e){var i=this.shape,s=Fd(i)?[i.x2-i.x1,i.y2-i.y1]:Qh.tangentAt.call(this,e);return Ur.normalize(s,s)},r}(mt.ZP);var kd=["fromSymbol","toSymbol"];function zd(o){return"_"+o+"Type"}function qh(o,r,e){var i=r.getItemVisual(e,o);if(i&&"none"!==i){var s=r.getItemVisual(e,o+"Size"),l=r.getItemVisual(e,o+"Rotate"),c=r.getItemVisual(e,o+"Offset"),f=r.getItemVisual(e,o+"KeepAspect"),p=Tn.zp(s),v=Tn.Cq(c||0,p),m=Tn.th(i,-p[0]/2+v[0],-p[1]/2+v[1],p[0],p[1],null,f);return m.__specifiedRotation=null==l||isNaN(l)?void 0:+l*Math.PI/180||0,m.name=o,m}}function ko(o,r){o.x1=r[0][0],o.y1=r[0][1],o.x2=r[1][0],o.y2=r[1][1],o.percent=1;var e=r[2];e?(o.cpx1=e[0],o.cpy1=e[1]):(o.cpx1=NaN,o.cpy1=NaN)}const Ud=function(o){function r(e,i,s){var l=o.call(this)||this;return l._createLine(e,i,s),l}return(0,Re.ZT)(r,o),r.prototype._createLine=function(e,i,s){var l=e.hostModel,f=function qg(o){var r=new Qg({name:"line",subPixelOptimize:!0});return ko(r.shape,o),r}(e.getItemLayout(i));f.shape.percent=0,he.KZ(f,{shape:{percent:1}},l,i),this.add(f),(0,_.each)(kd,function(p){var v=qh(p,e,i);this.add(v),this[zd(p)]=e.getItemVisual(i,p)},this),this._updateCommonStl(e,i,s)},r.prototype.updateData=function(e,i,s){var l=e.hostModel,c=this.childOfName("line"),f=e.getItemLayout(i),p={shape:{}};ko(p.shape,f),he.D(c,p,l,i),(0,_.each)(kd,function(v){var m=e.getItemVisual(i,v),x=zd(v);if(this[x]!==m){this.remove(this.childOfName(v));var T=qh(v,e,i);this.add(T)}this[x]=m},this),this._updateCommonStl(e,i,s)},r.prototype.getLinePath=function(){return this.childAt(0)},r.prototype._updateCommonStl=function(e,i,s){var l=e.hostModel,c=this.childOfName("line"),f=s&&s.emphasisLineStyle,p=s&&s.blurLineStyle,v=s&&s.selectLineStyle,m=s&&s.labelStatesModels,x=s&&s.emphasisDisabled,T=s&&s.focus,O=s&&s.blurScope;if(!s||e.hasItemOption){var G=e.getItemModel(i),F=G.getModel("emphasis");f=F.getModel("lineStyle").getLineStyle(),p=G.getModel(["blur","lineStyle"]).getLineStyle(),v=G.getModel(["select","lineStyle"]).getLineStyle(),x=F.get("disabled"),T=F.get("focus"),O=F.get("blurScope"),m=(0,Or.k3)(G)}var Q=e.getItemVisual(i,"style"),ft=Q.stroke;c.useStyle(Q),c.style.fill=null,c.style.strokeNoScale=!0,c.ensureState("emphasis").style=f,c.ensureState("blur").style=p,c.ensureState("select").style=v,(0,_.each)(kd,function(Nt){var Gt=this.childOfName(Nt);if(Gt){Gt.setColor(ft),Gt.style.opacity=Q.opacity;for(var Wt=0;Wt<sr.L1.length;Wt++){var jt=sr.L1[Wt],ee=c.getState(jt);if(ee){var oe=ee.style||{},de=Gt.ensureState(jt),xe=de.style||(de.style={});null!=oe.stroke&&(xe[Gt.__isEmptyBrush?"stroke":"fill"]=oe.stroke),null!=oe.opacity&&(xe.opacity=oe.opacity)}}Gt.markRedraw()}},this);var Tt=l.getRawValue(i);(0,Or.ni)(this,m,{labelDataIndex:i,labelFetcher:{getFormattedLabel:function(Nt,Gt){return l.getFormattedLabel(Nt,Gt,e.dataType)}},inheritColor:ft||"#000",defaultOpacity:Q.opacity,defaultText:(null==Tt?e.getName(i):isFinite(Tt)?(0,Be.NM)(Tt):Tt)+""});var xt=this.getTextContent();if(xt){var At=m.normal;xt.__align=xt.style.align,xt.__verticalAlign=xt.style.verticalAlign,xt.__position=At.get("position")||"middle";var It=At.get("distance");(0,_.isArray)(It)||(It=[It,It]),xt.__labelDistance=It}this.setTextConfig({position:null,local:!0,inside:!1}),(0,sr.k5)(this,T,O,x)},r.prototype.highlight=function(){(0,sr.fD)(this)},r.prototype.downplay=function(){(0,sr.Mh)(this)},r.prototype.updateLayout=function(e,i){this.setLinePoints(e.getItemLayout(i))},r.prototype.setLinePoints=function(e){var i=this.childOfName("line");ko(i.shape,e),i.dirty()},r.prototype.beforeUpdate=function(){var e=this,i=e.childOfName("fromSymbol"),s=e.childOfName("toSymbol"),l=e.getTextContent();if(i||s||l&&!l.ignore){for(var c=1,f=this.parent;f;)f.scaleX&&(c/=f.scaleX),f=f.parent;var p=e.childOfName("line");if(this.__dirty||p.__dirty){var v=p.shape.percent,m=p.pointAt(0),x=p.pointAt(v),T=Ur.sub([],x,m);if(Ur.normalize(T,T),i&&(i.setPosition(m),O(i,0),i.scaleX=i.scaleY=c*v,i.markRedraw()),s&&(s.setPosition(x),O(s,1),s.scaleX=s.scaleY=c*v,s.markRedraw()),l&&!l.ignore){l.x=l.y=0,l.originX=l.originY=0;var G=void 0,F=void 0,Q=l.__labelDistance,ft=Q[0]*c,Tt=Q[1]*c,xt=v/2,At=p.tangentAt(xt),It=[At[1],-At[0]],Nt=p.pointAt(xt);It[1]>0&&(It[0]=-It[0],It[1]=-It[1]);var Gt=At[0]<0?-1:1;if("start"!==l.__position&&"end"!==l.__position){var Wt=-Math.atan2(At[1],At[0]);x[0]<m[0]&&(Wt=Math.PI+Wt),l.rotation=Wt}var jt=void 0;switch(l.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":jt=-Tt,F="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":jt=Tt,F="top";break;default:jt=0,F="middle"}switch(l.__position){case"end":l.x=T[0]*ft+x[0],l.y=T[1]*Tt+x[1],G=T[0]>.8?"left":T[0]<-.8?"right":"center",F=T[1]>.8?"top":T[1]<-.8?"bottom":"middle";break;case"start":l.x=-T[0]*ft+m[0],l.y=-T[1]*Tt+m[1],G=T[0]>.8?"right":T[0]<-.8?"left":"center",F=T[1]>.8?"bottom":T[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":l.x=ft*Gt+m[0],l.y=m[1]+jt,G=At[0]<0?"right":"left",l.originX=-ft*Gt,l.originY=-jt;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":l.x=Nt[0],l.y=Nt[1]+jt,G="center",l.originY=-jt;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":l.x=-ft*Gt+x[0],l.y=x[1]+jt,G=At[0]>=0?"right":"left",l.originX=ft*Gt,l.originY=-jt}l.scaleX=l.scaleY=c,l.setStyle({verticalAlign:l.__verticalAlign||F,align:l.__align||G})}}}function O(ee,oe){var de=ee.__specifiedRotation;if(null==de){var xe=p.tangentAt(oe);ee.attr("rotation",(1===oe?-1:1)*Math.PI/2-Math.atan2(xe[1],xe[0]))}else ee.attr("rotation",de)}},r}(pr.Z);function iv(o){var r=o.hostModel,e=r.getModel("emphasis");return{lineStyle:r.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:r.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:r.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:(0,Or.k3)(r)}}function ys(o){return isNaN(o[0])||isNaN(o[1])}function Rl(o){return o&&!ys(o[0])&&!ys(o[1])}const zc=function(){function o(r){this.group=new pr.Z,this._LineCtor=r||Ud}return o.prototype.updateData=function(r){var e=this;this._progressiveEls=null;var i=this,s=i.group,l=i._lineData;i._lineData=r,l||s.removeAll();var c=iv(r);r.diff(l).add(function(f){e._doAdd(r,f,c)}).update(function(f,p){e._doUpdate(l,r,p,f,c)}).remove(function(f){s.remove(l.getItemGraphicEl(f))}).execute()},o.prototype.updateLayout=function(){var r=this._lineData;!r||r.eachItemGraphicEl(function(e,i){e.updateLayout(r,i)},this)},o.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=iv(r),this._lineData=null,this.group.removeAll()},o.prototype.incrementalUpdate=function(r,e){function i(f){!f.isGroup&&!function Im(o){return o.animators&&o.animators.length>0}(f)&&(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var s=r.start;s<r.end;s++)if(Rl(e.getItemLayout(s))){var c=new this._LineCtor(e,s,this._seriesScope);c.traverse(i),this.group.add(c),e.setItemGraphicEl(s,c),this._progressiveEls.push(c)}},o.prototype.remove=function(){this.group.removeAll()},o.prototype.eachRendered=function(r){ur.traverseElements(this._progressiveEls||this.group,r)},o.prototype._doAdd=function(r,e,i){if(Rl(r.getItemLayout(e))){var l=new this._LineCtor(r,e,i);r.setItemGraphicEl(e,l),this.group.add(l)}},o.prototype._doUpdate=function(r,e,i,s,l){var c=r.getItemGraphicEl(i);Rl(e.getItemLayout(s))?(c?c.updateData(e,s,l):c=new this._LineCtor(e,s,l),e.setItemGraphicEl(s,c),this.group.add(c)):this.group.remove(c)},o}();var _a=[],$s=[],Uc=[],xs=kr.Zm,Bl=Ur.distSquare,av=Math.abs;function Hd(o,r,e){for(var f,i=o[0],s=o[1],l=o[2],c=1/0,p=e*e,v=.1,m=.1;m<=.9;m+=.1)_a[0]=xs(i[0],s[0],l[0],m),_a[1]=xs(i[1],s[1],l[1],m),(x=av(Bl(_a,r)-p))<c&&(c=x,f=m);for(var T=0;T<32;T++){var O=f+v;$s[0]=xs(i[0],s[0],l[0],f),$s[1]=xs(i[1],s[1],l[1],f),Uc[0]=xs(i[0],s[0],l[0],O),Uc[1]=xs(i[1],s[1],l[1],O);var x=Bl($s,r)-p;if(av(x)<.01)break;var G=Bl(Uc,r)-p;v/=2,x<0?G>=0?f+=v:f-=v:G>=0?f-=v:f+=v}return f}function Vd(o,r){var e=[],i=kr.Lx,s=[[],[],[]],l=[[],[]],c=[];r/=2,o.eachEdge(function(f,p){var v=f.getLayout(),m=f.getVisual("fromSymbol"),x=f.getVisual("toSymbol");v.__original||(v.__original=[Ur.clone(v[0]),Ur.clone(v[1])],v[2]&&v.__original.push(Ur.clone(v[2])));var T=v.__original;if(null!=v[2]){if(Ur.copy(s[0],T[0]),Ur.copy(s[1],T[2]),Ur.copy(s[2],T[1]),m&&"none"!==m){var O=kc(f.node1),G=Hd(s,T[0],O*r);i(s[0][0],s[1][0],s[2][0],G,e),s[0][0]=e[3],s[1][0]=e[4],i(s[0][1],s[1][1],s[2][1],G,e),s[0][1]=e[3],s[1][1]=e[4]}x&&"none"!==x&&(O=kc(f.node2),G=Hd(s,T[1],O*r),i(s[0][0],s[1][0],s[2][0],G,e),s[1][0]=e[1],s[2][0]=e[2],i(s[0][1],s[1][1],s[2][1],G,e),s[1][1]=e[1],s[2][1]=e[2]),Ur.copy(v[0],s[0]),Ur.copy(v[1],s[2]),Ur.copy(v[2],s[1])}else Ur.copy(l[0],T[0]),Ur.copy(l[1],T[1]),Ur.sub(c,l[1],l[0]),Ur.normalize(c,c),m&&"none"!==m&&(O=kc(f.node1),Ur.scaleAndAdd(l[0],l[0],c,O*r)),x&&"none"!==x&&(O=kc(f.node2),Ur.scaleAndAdd(l[1],l[1],c,-O*r)),Ur.copy(v[0],l[0]),Ur.copy(v[1],l[1])})}function ov(o){return"view"===o.type}const sv=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i){var s=new ka,l=new zc,c=this.group;this._controller=new Go(i.getZr()),this._controllerHost={target:c},c.add(s.group),c.add(l.group),this._symbolDraw=s,this._lineDraw=l,this._firstRender=!0},r.prototype.render=function(e,i,s){var l=this,c=e.coordinateSystem;this._model=e;var f=this._symbolDraw,p=this._lineDraw,v=this.group;if(ov(c)){var m={x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY};this._firstRender?v.attr(m):he.D(v,m,e)}Vd(e.getGraph(),Fc(e));var x=e.getData();f.updateData(x);var T=e.getEdgeData();p.updateData(T),this._updateNodeAndLinkScale(),this._updateController(e,i,s),clearTimeout(this._layoutTimeout);var O=e.forceLayout,G=e.get(["force","layoutAnimation"]);O&&this._startForceLayoutIteration(O,G);var F=e.get("layout");x.graph.eachNode(function(xt){var At=xt.dataIndex,It=xt.getGraphicEl(),Nt=xt.getModel();if(It){It.off("drag").off("dragend");var Gt=Nt.get("draggable");Gt&&It.on("drag",function(jt){switch(F){case"force":O.warmUp(),!l._layouting&&l._startForceLayoutIteration(O,G),O.setFixed(At),x.setItemLayout(At,[It.x,It.y]);break;case"circular":x.setItemLayout(At,[It.x,It.y]),xt.setLayout({fixed:!0},!0),Zd(e,"symbolSize",xt,[jt.offsetX,jt.offsetY]),l.updateLayout(e);break;default:x.setItemLayout(At,[It.x,It.y]),Bd(e.getGraph(),e),l.updateLayout(e)}}).on("dragend",function(){O&&O.setUnfixed(At)}),It.setDraggable(Gt,!!Nt.get("cursor")),"adjacency"===Nt.get(["emphasis","focus"])&&((0,Fr.A)(It).focus=xt.getAdjacentDataIndices())}}),x.graph.eachEdge(function(xt){var At=xt.getGraphicEl(),It=xt.getModel().get(["emphasis","focus"]);!At||"adjacency"===It&&((0,Fr.A)(At).focus={edge:[xt.dataIndex],node:[xt.node1.dataIndex,xt.node2.dataIndex]})});var Q="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),ft=x.getLayout("cx"),Tt=x.getLayout("cy");x.graph.eachNode(function(xt){tv(xt,Q,ft,Tt)}),this._firstRender=!1},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype._startForceLayoutIteration=function(e,i){var s=this;!function l(){e.step(function(c){s.updateLayout(s._model),(s._layouting=!c)&&(i?s._layoutTimeout=setTimeout(l,16):l())})}()},r.prototype._updateController=function(e,i,s){var l=this,c=this._controller,f=this._controllerHost,p=this.group;c.setPointerChecker(function(v,m,x){var T=p.getBoundingRect();return T.applyTransform(p.transform),T.contain(m,x)&&!uo(v,s,e)}),ov(e.coordinateSystem)?(c.enable(e.get("roam")),f.zoomLimit=e.get("scaleLimit"),f.zoom=e.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(v){tc(f,v.dx,v.dy),s.dispatchAction({seriesId:e.id,type:"graphRoam",dx:v.dx,dy:v.dy})}).on("zoom",function(v){Gs(f,v.scale,v.originX,v.originY),s.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:v.scale,originX:v.originX,originY:v.originY}),l._updateNodeAndLinkScale(),Vd(e.getGraph(),Fc(e)),l._lineDraw.updateLayout(),s.updateLabelLayout()})):c.disable()},r.prototype._updateNodeAndLinkScale=function(){var e=this._model,i=e.getData(),s=Fc(e);i.eachItemGraphicEl(function(l,c){l&&l.setSymbolScale(s)})},r.prototype.updateLayout=function(e){Vd(e.getGraph(),Fc(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},r.prototype.remove=function(e,i){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},r.type="graph",r}(_r.Z);var Wd=D(6677),lv=D(1792);function Ss(o,r,e,i,s){for(var l=new Wd.ZP(i),c=0;c<o.length;c++)l.addNode(_.retrieve(o[c].id,o[c].name,c),c);var f=[],p=[],v=0;for(c=0;c<r.length;c++){var m=r[c],x=m.source,T=m.target;l.addEdge(x,T,v)&&(p.push(m),f.push(_.retrieve((0,dr.U5)(m.id,null),x+" > "+T)),v++)}var G,O=e.get("coordinateSystem");if("cartesian2d"===O||"polar"===O)G=(0,Fa.Z)(o,e);else{var F=lv.Z.get(O),Q=F&&F.dimensions||[];_.indexOf(Q,"value")<0&&Q.concat(["value"]);var ft=(0,Ce.Z)(o,{coordDimensions:Q,encodeDefine:e.getEncode()}).dimensions;(G=new Ie.Z(ft,e)).initData(o)}var Tt=new Ie.Z(["value"],e);return Tt.initData(p,f),s&&s(G,Tt),(0,Bp.Z)({mainData:G,struct:l,structAttr:"graph",datas:{node:G,edge:Tt},datasAttr:{node:"data",edge:"edgeData"}}),l.update(),l}var uv=D(4867);const r_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e){o.prototype.init.apply(this,arguments);var i=this;function s(){return i._categoriesData}this.legendVisualProvider=new xr(s,s),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},r.prototype.mergeOption=function(e){o.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},r.prototype.mergeDefaultAndTheme=function(e){o.prototype.mergeDefaultAndTheme.apply(this,arguments),(0,dr.Cc)(e,"edgeLabel",["show"])},r.prototype.getInitialData=function(e,i){var s=e.edges||e.links||[],l=e.data||e.nodes||[],c=this;if(l&&s){!function Hg(o){!Zc(o)||(o.__curvenessList=[],o.__edgeMap={},Qa(o))}(this);var f=Ss(l,s,this,!0,function p(v,m){v.wrapMethod("getItemModel",function(G){var ft=c._categoriesModels[G.getShallow("category")];return ft&&(ft.parentModel=G.parentModel,G.parentModel=ft),G});var x=hi.Z.prototype.getModel;function T(G,F){var Q=x.call(this,G,F);return Q.resolveParentPath=O,Q}function O(G){if(G&&("label"===G[0]||"label"===G[1])){var F=G.slice();return"label"===G[0]?F[0]="edgeLabel":"label"===G[1]&&(F[1]="edgeLabel"),F}return G}m.wrapMethod("getItemModel",function(G){return G.resolveParentPath=O,G.getModel=T,G})});return _.each(f.edges,function(v){!function Vg(o,r,e,i){if(Zc(e)){var s=qa(o,r,e),l=e.__edgeMap,c=l[Id(s)];l[s]&&!c?l[s].isForward=!0:c&&l[s]&&(c.isForward=!0,l[s].isForward=!1),l[s]=l[s]||[],l[s].push(i)}}(v.node1,v.node2,this,v.dataIndex)},this),f.data}},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.getCategoriesData=function(){return this._categoriesData},r.prototype.formatTooltip=function(e,i,s){if("edge"===s){var l=this.getData(),c=this.getDataParams(e,s),f=l.graph.getEdgeByIndex(e),p=l.getName(f.node1.dataIndex),v=l.getName(f.node2.dataIndex),m=[];return null!=p&&m.push(p),null!=v&&m.push(v),(0,ii.TX)("nameValue",{name:m.join(" > "),value:c.value,noValue:null==c.value})}return(0,uv.w)({series:this,dataIndex:e,multipleSeries:i})},r.prototype._updateCategoriesData=function(){var e=_.map(this.option.categories||[],function(s){return null!=s.value?s:_.extend({value:0},s)}),i=new Ie.Z(["value"],this);i.initData(e),this._categoriesData=i,this._categoriesModels=i.mapArray(function(s){return i.getItemModel(s)})},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.isAnimationEnabled=function(){return o.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},r.type="series.graph",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(rr.Z);var n_={type:"graphRoam",event:"graphRoam",update:"none"},Hc=function o(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0};const a_=function(o){function r(e){var i=o.call(this,e)||this;return i.type="pointer",i}return(0,Re.ZT)(r,o),r.prototype.getDefaultShape=function(){return new Hc},r.prototype.buildPath=function(e,i){var s=Math.cos,l=Math.sin,c=i.r,f=i.width,p=i.angle,v=i.x-s(p)*f*(f>=c/3?1:2),m=i.y-l(p)*f*(f>=c/3?1:2);p=i.angle-Math.PI/2,e.moveTo(v,m),e.lineTo(i.x+s(p)*f,i.y+l(p)*f),e.lineTo(i.x+s(i.angle)*c,i.y+l(i.angle)*c),e.lineTo(i.x-s(p)*f,i.y-l(p)*f),e.lineTo(v,m)},r}(mt.ZP);function tf(o,r){var e=null==o?"":o+"";return r&&((0,_.isString)(r)?e=r.replace("{value}",e):(0,_.isFunction)(r)&&(e=r(o))),e}const l_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){this.group.removeAll();var l=e.get(["axisLine","lineStyle","color"]),c=function o_(o,r){var e=o.get("center"),i=r.getWidth(),s=r.getHeight(),l=Math.min(i,s);return{cx:(0,Be.GM)(e[0],r.getWidth()),cy:(0,Be.GM)(e[1],r.getHeight()),r:(0,Be.GM)(o.get("radius"),l/2)}}(e,s);this._renderMain(e,i,s,l,c),this._data=e.getData()},r.prototype.dispose=function(){},r.prototype._renderMain=function(e,i,s,l,c){var f=this.group,p=e.get("clockwise"),v=-e.get("startAngle")/180*Math.PI,m=-e.get("endAngle")/180*Math.PI,x=e.getModel("axisLine"),O=x.get("roundCap")?ji:bi.C,G=x.get("show"),F=x.getModel("lineStyle"),Q=F.get("width"),ft=[v,m];(0,ct.L)(ft,!p);for(var Tt=(m=ft[1])-(v=ft[0]),xt=v,At=[],It=0;G&&It<l.length;It++){var Gt=new O({shape:{startAngle:xt,endAngle:m=v+Tt*Math.min(Math.max(l[It][0],0),1),cx:c.cx,cy:c.cy,clockwise:p,r0:c.r-Q,r:c.r},silent:!0});Gt.setStyle({fill:l[It][1]}),Gt.setStyle(F.getLineStyle(["color","width"])),At.push(Gt),xt=m}At.reverse(),(0,_.each)(At,function(jt){return f.add(jt)});var Wt=function(jt){if(jt<=0)return l[0][1];var ee;for(ee=0;ee<l.length;ee++)if(l[ee][0]>=jt&&(0===ee?0:l[ee-1][0])<jt)return l[ee][1];return l[ee-1][1]};this._renderTicks(e,i,s,Wt,c,v,m,p,Q),this._renderTitleAndDetail(e,i,s,Wt,c),this._renderAnchor(e,c),this._renderPointer(e,i,s,Wt,c,v,m,p,Q)},r.prototype._renderTicks=function(e,i,s,l,c,f,p,v,m){for(var be,Ae,x=this.group,T=c.cx,O=c.cy,G=c.r,F=+e.get("min"),Q=+e.get("max"),ft=e.getModel("splitLine"),Tt=e.getModel("axisTick"),xt=e.getModel("axisLabel"),At=e.get("splitNumber"),It=Tt.get("splitNumber"),Nt=(0,Be.GM)(ft.get("length"),G),Gt=(0,Be.GM)(Tt.get("length"),G),Wt=f,jt=(p-f)/At,ee=jt/It,oe=ft.getModel("lineStyle").getLineStyle(),de=Tt.getModel("lineStyle").getLineStyle(),xe=ft.get("distance"),ke=0;ke<=At;ke++){if(be=Math.cos(Wt),Ae=Math.sin(Wt),ft.get("show")){var $e=new aa.Z({shape:{x1:be*(G-(Je=xe?xe+m:m))+T,y1:Ae*(G-Je)+O,x2:be*(G-Nt-Je)+T,y2:Ae*(G-Nt-Je)+O},style:oe,silent:!0});"auto"===oe.stroke&&$e.setStyle({stroke:l(ke/At)}),x.add($e)}if(xt.get("show")){var Je=xt.get("distance")+xe,fr=tf((0,Be.NM)(ke/At*(Q-F)+F),xt.get("formatter")),wr=l(ke/At),Dr=be*(G-Nt-Je)+T,cn=Ae*(G-Nt-Je)+O,ln=xt.get("rotate"),rn=0;"radial"===ln?(rn=-Wt+2*Math.PI)>Math.PI/2&&(rn+=Math.PI):"tangential"===ln?rn=-Wt-Math.PI/2:(0,_.isNumber)(ln)&&(rn=ln*Math.PI/180),x.add(new Se.ZP(0===rn?{style:(0,Or.Lr)(xt,{text:fr,x:Dr,y:cn,verticalAlign:Ae<-.8?"top":Ae>.8?"bottom":"middle",align:be<-.4?"left":be>.4?"right":"center"},{inheritColor:wr}),silent:!0}:{style:(0,Or.Lr)(xt,{text:fr,x:Dr,y:cn,verticalAlign:"middle",align:"center"},{inheritColor:wr}),silent:!0,originX:Dr,originY:cn,rotation:rn}))}if(Tt.get("show")&&ke!==At){Je=(Je=Tt.get("distance"))?Je+m:m;for(var Pn=0;Pn<=It;Pn++){be=Math.cos(Wt),Ae=Math.sin(Wt);var Qn=new aa.Z({shape:{x1:be*(G-Je)+T,y1:Ae*(G-Je)+O,x2:be*(G-Gt-Je)+T,y2:Ae*(G-Gt-Je)+O},silent:!0,style:de});"auto"===de.stroke&&Qn.setStyle({stroke:l((ke+Pn/It)/At)}),x.add(Qn),Wt+=ee}Wt-=ee}else Wt+=jt}},r.prototype._renderPointer=function(e,i,s,l,c,f,p,v,m){var x=this.group,T=this._data,O=this._progressEls,G=[],F=e.get(["pointer","show"]),Q=e.getModel("progress"),ft=Q.get("show"),Tt=e.getData(),xt=Tt.mapDimension("value"),At=+e.get("min"),It=+e.get("max"),Nt=[At,It],Gt=[f,p];function Wt(ee,oe){var Dr,xe=Tt.getItemModel(ee).getModel("pointer"),be=(0,Be.GM)(xe.get("width"),c.r),Ae=(0,Be.GM)(xe.get("length"),c.r),ke=e.get(["pointer","icon"]),Je=xe.get("offsetCenter"),$e=(0,Be.GM)(Je[0],c.r),fr=(0,Be.GM)(Je[1],c.r),wr=xe.get("keepAspect");return(Dr=ke?(0,Tn.th)(ke,$e-be/2,fr-Ae,be,Ae,null,wr):new a_({shape:{angle:-Math.PI/2,width:be,r:Ae,x:$e,y:fr}})).rotation=-(oe+Math.PI/2),Dr.x=c.cx,Dr.y=c.cy,Dr}function jt(ee,oe){var xe=Q.get("roundCap")?ji:bi.C,be=Q.get("overlap"),Ae=be?Q.get("width"):m/Tt.count(),$e=new xe({shape:{startAngle:f,endAngle:oe,cx:c.cx,cy:c.cy,clockwise:v,r0:be?c.r-Ae:c.r-(ee+1)*Ae,r:be?c.r:c.r-ee*Ae}});return be&&($e.z2=It-Tt.get(xt,ee)%It),$e}(ft||F)&&(Tt.diff(T).add(function(ee){var oe=Tt.get(xt,ee);if(F){var de=Wt(ee,f);he.KZ(de,{rotation:-((isNaN(+oe)?Gt[0]:(0,Be.NU)(oe,Nt,Gt,!0))+Math.PI/2)},e),x.add(de),Tt.setItemGraphicEl(ee,de)}if(ft){var xe=jt(ee,f),be=Q.get("clip");he.KZ(xe,{shape:{endAngle:(0,Be.NU)(oe,Nt,Gt,be)}},e),x.add(xe),(0,Fr.Q)(e.seriesIndex,Tt.dataType,ee,xe),G[ee]=xe}}).update(function(ee,oe){var de=Tt.get(xt,ee);if(F){var xe=T.getItemGraphicEl(oe),be=xe?xe.rotation:f,Ae=Wt(ee,be);Ae.rotation=be,he.D(Ae,{rotation:-((isNaN(+de)?Gt[0]:(0,Be.NU)(de,Nt,Gt,!0))+Math.PI/2)},e),x.add(Ae),Tt.setItemGraphicEl(ee,Ae)}if(ft){var ke=O[oe],$e=jt(ee,ke?ke.shape.endAngle:f),fr=Q.get("clip");he.D($e,{shape:{endAngle:(0,Be.NU)(de,Nt,Gt,fr)}},e),x.add($e),(0,Fr.Q)(e.seriesIndex,Tt.dataType,ee,$e),G[ee]=$e}}).execute(),Tt.each(function(ee){var oe=Tt.getItemModel(ee),de=oe.getModel("emphasis"),xe=de.get("focus"),be=de.get("blurScope"),Ae=de.get("disabled");if(F){var ke=Tt.getItemGraphicEl(ee),Je=Tt.getItemVisual(ee,"style"),$e=Je.fill;if(ke instanceof gt.ZP){var fr=ke.style;ke.useStyle((0,_.extend)({image:fr.image,x:fr.x,y:fr.y,width:fr.width,height:fr.height},Je))}else ke.useStyle(Je),"pointer"!==ke.type&&ke.setColor($e);ke.setStyle(oe.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===ke.style.fill&&ke.setStyle("fill",l((0,Be.NU)(Tt.get(xt,ee),Nt,[0,1],!0))),ke.z2EmphasisLift=0,(0,sr.WO)(ke,oe),(0,sr.k5)(ke,xe,be,Ae)}if(ft){var wr=G[ee];wr.useStyle(Tt.getItemVisual(ee,"style")),wr.setStyle(oe.getModel(["progress","itemStyle"]).getItemStyle()),wr.z2EmphasisLift=0,(0,sr.WO)(wr,oe),(0,sr.k5)(wr,xe,be,Ae)}}),this._progressEls=G)},r.prototype._renderAnchor=function(e,i){var s=e.getModel("anchor");if(s.get("show")){var c=s.get("size"),f=s.get("icon"),p=s.get("offsetCenter"),v=s.get("keepAspect"),m=(0,Tn.th)(f,i.cx-c/2+(0,Be.GM)(p[0],i.r),i.cy-c/2+(0,Be.GM)(p[1],i.r),c,c,null,v);m.z2=s.get("showAbove")?1:0,m.setStyle(s.getModel("itemStyle").getItemStyle()),this.group.add(m)}},r.prototype._renderTitleAndDetail=function(e,i,s,l,c){var f=this,p=e.getData(),v=p.mapDimension("value"),m=+e.get("min"),x=+e.get("max"),T=new pr.Z,O=[],G=[],F=e.isAnimationEnabled(),Q=e.get(["pointer","showAbove"]);p.diff(this._data).add(function(ft){O[ft]=new Se.ZP({silent:!0}),G[ft]=new Se.ZP({silent:!0})}).update(function(ft,Tt){O[ft]=f._titleEls[Tt],G[ft]=f._detailEls[Tt]}).execute(),p.each(function(ft){var Tt=p.getItemModel(ft),xt=p.get(v,ft),At=new pr.Z,It=l((0,Be.NU)(xt,[m,x],[0,1],!0)),Nt=Tt.getModel("title");if(Nt.get("show")){var Gt=Nt.get("offsetCenter"),Wt=c.cx+(0,Be.GM)(Gt[0],c.r),jt=c.cy+(0,Be.GM)(Gt[1],c.r);(ee=O[ft]).attr({z2:Q?0:2,style:(0,Or.Lr)(Nt,{x:Wt,y:jt,text:p.getName(ft),align:"center",verticalAlign:"middle"},{inheritColor:It})}),At.add(ee)}var oe=Tt.getModel("detail");if(oe.get("show")){var de=oe.get("offsetCenter"),xe=c.cx+(0,Be.GM)(de[0],c.r),be=c.cy+(0,Be.GM)(de[1],c.r),Ae=(0,Be.GM)(oe.get("width"),c.r),ke=(0,Be.GM)(oe.get("height"),c.r),Je=e.get(["progress","show"])?p.getItemVisual(ft,"style").fill:It,ee=G[ft],$e=oe.get("formatter");ee.attr({z2:Q?0:2,style:(0,Or.Lr)(oe,{x:xe,y:be,text:tf(xt,$e),width:isNaN(Ae)?null:Ae,height:isNaN(ke)?null:ke,align:"center",verticalAlign:"middle"},{inheritColor:Je})}),(0,Or.pe)(ee,{normal:oe},xt,function(wr){return tf(wr,$e)}),F&&(0,Or.tD)(ee,ft,p,e,{getFormattedLabel:function(wr,Dr,cn,ln,rn,Pn){return tf(Pn?Pn.interpolatedValue:xt,$e)}}),At.add(ee)}T.add(At)}),this.group.add(T),this._titleEls=O,this._detailEls=G},r.type="gauge",r}(_r.Z),c_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="itemStyle",e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e,i){return Ue(this,["value"])},r.type="series.gauge",r.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},r}(rr.Z);var $d=["itemStyle","opacity"],cv=function(o){function r(e,i){var s=o.call(this)||this,l=s,c=new ia.Z,f=new Se.ZP;return l.setTextContent(f),s.setTextGuideLine(c),s.updateData(e,i,!0),s}return(0,Re.ZT)(r,o),r.prototype.updateData=function(e,i,s){var l=this,c=e.hostModel,f=e.getItemModel(i),p=e.getItemLayout(i),v=f.getModel("emphasis"),m=f.get($d);m=m??1,s||(0,he.Zi)(l),l.useStyle(e.getItemVisual(i,"style")),l.style.lineJoin="round",s?(l.setShape({points:p.points}),l.style.opacity=0,he.KZ(l,{style:{opacity:m}},c,i)):he.D(l,{style:{opacity:m},shape:{points:p.points}},c,i),(0,sr.WO)(l,f),this._updateLabel(e,i),(0,sr.k5)(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},r.prototype._updateLabel=function(e,i){var s=this,l=this.getTextGuideLine(),c=s.getTextContent(),f=e.hostModel,p=e.getItemModel(i),m=e.getItemLayout(i).label,x=e.getItemVisual(i,"style"),T=x.fill;(0,Or.ni)(c,(0,Or.k3)(p),{labelFetcher:e.hostModel,labelDataIndex:i,defaultOpacity:x.opacity,defaultText:e.getName(i)},{normal:{align:m.textAlign,verticalAlign:m.verticalAlign}}),s.setTextConfig({local:!0,inside:!!m.inside,insideStroke:T,outsideFill:T});var O=m.linePoints;l.setShape({points:O}),s.textGuideLineConfig={anchor:O?new Zt.Z(O[0][0],O[0][1]):null},he.D(c,{style:{x:m.x,y:m.y}},f,i),c.attr({rotation:m.rotation,originX:m.x,originY:m.y,z2:10}),(0,Ht.Iu)(s,(0,Ht.$x)(p),{stroke:T})},r}(Jn.Z);const d_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.ignoreLabelLineUpdate=!0,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l=e.getData(),c=this._data,f=this.group;l.diff(c).add(function(p){var v=new cv(l,p);l.setItemGraphicEl(p,v),f.add(v)}).update(function(p,v){var m=c.getItemGraphicEl(v);m.updateData(l,p),f.add(m),l.setItemGraphicEl(p,m)}).remove(function(p){var v=c.getItemGraphicEl(p);he.XD(v,e,p)}).execute(),this._data=l},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.prototype.dispose=function(){},r.type="funnel",r}(_r.Z),v_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e){o.prototype.init.apply(this,arguments),this.legendVisualProvider=new xr(_.bind(this.getData,this),_.bind(this.getRawData,this)),this._defaultLabelLine(e)},r.prototype.getInitialData=function(e,i){return Ue(this,{coordDimensions:["value"],encodeDefaulter:_.curry(ir.Ss,this)})},r.prototype._defaultLabelLine=function(e){(0,dr.Cc)(e,"labelLine",["show"]);var i=e.labelLine,s=e.emphasis.labelLine;i.show=i.show&&e.label.show,s.show=s.show&&e.emphasis.label.show},r.prototype.getDataParams=function(e){var i=this.getData(),s=o.prototype.getDataParams.call(this,e),l=i.mapDimension("value"),c=i.getSum(l);return s.percent=c?+(i.get(l,e)/c*100).toFixed(2):0,s.$vars.push("percent"),s},r.type="series.funnel",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(rr.Z);function bu(o,r){o.eachSeriesByType("funnel",function(e){var i=e.getData(),s=i.mapDimension("value"),l=e.get("sort"),c=function Xd(o,r){return sn.ME(o.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}(e,r),f=e.get("orient"),p=c.width,v=c.height,m=function g_(o,r){for(var e=o.mapDimension("value"),i=o.mapArray(e,function(p){return p}),s=[],l="ascending"===r,c=0,f=o.count();c<f;c++)s[c]=c;return(0,_.isFunction)(r)?s.sort(r):"none"!==r&&s.sort(function(p,v){return l?i[p]-i[v]:i[v]-i[p]}),s}(i,l),x=c.x,T=c.y,O="horizontal"===f?[(0,Be.GM)(e.get("minSize"),v),(0,Be.GM)(e.get("maxSize"),v)]:[(0,Be.GM)(e.get("minSize"),p),(0,Be.GM)(e.get("maxSize"),p)],G=i.getDataExtent(s),F=e.get("min"),Q=e.get("max");null==F&&(F=Math.min(G[0],0)),null==Q&&(Q=G[1]);var ft=e.get("funnelAlign"),Tt=e.get("gap"),At=(("horizontal"===f?p:v)-Tt*(i.count()-1))/i.count(),It=function(be,Ae){if("horizontal"===f){var ke=i.get(s,be)||0,Je=(0,Be.NU)(ke,[F,Q],O,!0),$e=void 0;switch(ft){case"top":$e=T;break;case"center":$e=T+(v-Je)/2;break;case"bottom":$e=T+(v-Je)}return[[Ae,$e],[Ae,$e+Je]]}var Dr,fr=i.get(s,be)||0,wr=(0,Be.NU)(fr,[F,Q],O,!0);switch(ft){case"left":Dr=x;break;case"center":Dr=x+(p-wr)/2;break;case"right":Dr=x+p-wr}return[[Dr,Ae],[Dr+wr,Ae]]};"ascending"===l&&(At=-At,Tt=-Tt,"horizontal"===f?x+=p:T+=v,m=m.reverse());for(var Nt=0;Nt<m.length;Nt++){var Gt=m[Nt],Wt=m[Nt+1],jt=i.getItemModel(Gt);if("horizontal"===f){var ee=jt.get(["itemStyle","width"]);null==ee?ee=At:(ee=(0,Be.GM)(ee,p),"ascending"===l&&(ee=-ee));var oe=It(Gt,x),de=It(Wt,x+ee);x+=ee+Tt,i.setItemLayout(Gt,{points:oe.concat(de.slice().reverse())})}else{var xe=jt.get(["itemStyle","height"]);null==xe?xe=At:(xe=(0,Be.GM)(xe,v),"ascending"===l&&(xe=-xe)),oe=It(Gt,T),de=It(Wt,T+xe),T+=xe+Tt,i.setItemLayout(Gt,{points:oe.concat(de.slice().reverse())})}}!function Yd(o){var e=o.hostModel.get("orient");o.each(function(i){var x,T,O,G,s=o.getItemModel(i),c=s.getModel("label").get("position"),f=s.getModel("labelLine"),p=o.getItemLayout(i),v=p.points,m="inner"===c||"inside"===c||"center"===c||"insideLeft"===c||"insideRight"===c;if(m)"insideLeft"===c?(T=(v[0][0]+v[3][0])/2+5,O=(v[0][1]+v[3][1])/2,x="left"):"insideRight"===c?(T=(v[1][0]+v[2][0])/2-5,O=(v[1][1]+v[2][1])/2,x="right"):(T=(v[0][0]+v[1][0]+v[2][0]+v[3][0])/4,O=(v[0][1]+v[1][1]+v[2][1]+v[3][1])/4,x="center"),G=[[T,O],[T,O]];else{var F=void 0,Q=void 0,ft=void 0,Tt=void 0,xt=f.get("length");"left"===c?(Q=(v[3][1]+v[0][1])/2,T=(ft=(F=(v[3][0]+v[0][0])/2)-xt)-5,x="right"):"right"===c?(Q=(v[1][1]+v[2][1])/2,T=(ft=(F=(v[1][0]+v[2][0])/2)+xt)+5,x="left"):"top"===c?(F=(v[3][0]+v[0][0])/2,O=(Tt=(Q=(v[3][1]+v[0][1])/2)-xt)-5,x="center"):"bottom"===c?(F=(v[1][0]+v[2][0])/2,O=(Tt=(Q=(v[1][1]+v[2][1])/2)+xt)+5,x="center"):"rightTop"===c?(F="horizontal"===e?v[3][0]:v[1][0],Q="horizontal"===e?v[3][1]:v[1][1],"horizontal"===e?(O=(Tt=Q-xt)-5,x="center"):(T=(ft=F+xt)+5,x="top")):"rightBottom"===c?(F=v[2][0],Q=v[2][1],"horizontal"===e?(O=(Tt=Q+xt)+5,x="center"):(T=(ft=F+xt)+5,x="bottom")):"leftTop"===c?(F=v[0][0],Q="horizontal"===e?v[0][1]:v[1][1],"horizontal"===e?(O=(Tt=Q-xt)-5,x="center"):(T=(ft=F-xt)-5,x="right")):"leftBottom"===c?(F="horizontal"===e?v[1][0]:v[3][0],Q="horizontal"===e?v[1][1]:v[2][1],"horizontal"===e?(O=(Tt=Q+xt)+5,x="center"):(T=(ft=F-xt)-5,x="right")):(F=(v[1][0]+v[2][0])/2,Q=(v[1][1]+v[2][1])/2,"horizontal"===e?(O=(Tt=Q+xt)+5,x="center"):(T=(ft=F+xt)+5,x="left")),"horizontal"===e?T=ft=F:O=Tt=Q,G=[[F,Q],[ft,Tt]]}p.label={linePoints:G,x:T,y:O,verticalAlign:"middle",textAlign:x,inside:m}})}(i)})}function fv(o,r,e,i){for(var s=[],l=0;l<e.length;l++){var c=e[l],f=o.get(o.mapDimension(c),r);m_(f,i.getAxis(c).type)||s.push(i.dataToPoint(f,c))}return s}function pi(o,r,e,i,s){var l=fv(o,e,i,s),c=new ia.Z({shape:{points:l},z2:10});return r.add(c),o.setItemGraphicEl(e,c),c}function dv(o){var r=o.get("smooth",!0);return!0===r&&(r=.3),r=(0,Be.FK)(r),(0,_.eqNaN)(r)&&(r=0),{smooth:r}}function Wc(o,r,e,i){o.useStyle(r.getItemVisual(e,"style")),o.style.fill=null,o.setShape("smooth",i.smooth);var s=r.getItemModel(e),l=s.getModel("emphasis");(0,sr.WO)(o,s,"lineStyle"),(0,sr.k5)(o,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function m_(o,r){return"category"===r?null==o:null==o||isNaN(o)}const y_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e._dataGroup=new pr.Z,e._initialized=!1,e}return(0,Re.ZT)(r,o),r.prototype.init=function(){this.group.add(this._dataGroup)},r.prototype.render=function(e,i,s,l){this._progressiveEls=null;var c=this._dataGroup,f=e.getData(),p=this._data,v=e.coordinateSystem,m=v.dimensions,x=dv(e);if(f.diff(p).add(function T(Q){Wc(pi(f,c,Q,m,v),f,Q,x)}).update(function O(Q,ft){var Tt=p.getItemGraphicEl(ft),xt=fv(f,Q,m,v);f.setItemGraphicEl(Q,Tt),he.D(Tt,{shape:{points:xt}},e,Q),(0,he.Zi)(Tt),Wc(Tt,f,Q,x)}).remove(function G(Q){var ft=p.getItemGraphicEl(Q);c.remove(ft)}).execute(),!this._initialized){this._initialized=!0;var F=function hv(o,r,e){var i=o.model,s=o.getRect(),l=new Br.Z({shape:{x:s.x,y:s.y,width:s.width,height:s.height}}),c="horizontal"===i.get("layout")?"width":"height";return l.setShape(c,0),he.KZ(l,{shape:{width:s.width,height:s.height}},r,e),l}(v,e,function(){setTimeout(function(){c.removeClipPath()})});c.setClipPath(F)}this._data=f},r.prototype.incrementalPrepareRender=function(e,i,s){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},r.prototype.incrementalRender=function(e,i,s){for(var l=i.getData(),c=i.coordinateSystem,f=c.dimensions,p=dv(i),v=this._progressiveEls=[],m=e.start;m<e.end;m++){var x=pi(l,this._dataGroup,m,f,c);x.incremental=!0,Wc(x,l,m,p),v.push(x)}},r.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},r.type="parallel",r}(_r.Z);function S_(o){var r=o.ecModel.getComponent("parallel",o.get("parallelIndex"));if(r){var e={};return(0,_.each)(r.dimensions,function(i){var s=function T_(o){return+o.replace("dim","")}(i);e[i]=s}),e}}const C_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e,i){return(0,Fa.Z)(null,this,{useEncodeDefaulter:(0,_.bind)(S_,null,this)})},r.prototype.getRawIndicesByActiveState=function(e){var i=this.coordinateSystem,s=this.getData(),l=[];return i.eachActiveState(s,function(c,f){e===c&&l.push(s.getRawIndex(f))}),l},r.type="series.parallel",r.dependencies=["parallel"],r.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},r}(rr.Z);var M_=["lineStyle","opacity"];const P_={seriesType:"parallel",reset:function(o,r){var e=o.coordinateSystem,i={normal:o.get(["lineStyle","opacity"]),active:o.get("activeOpacity"),inactive:o.get("inactiveOpacity")};return{progress:function(s,l){e.eachActiveState(l,function(c,f){var p=i[c];if("normal"===c&&l.hasItemOption){var v=l.getItemModel(f).get(M_,!0);null!=v&&(p=v)}l.ensureUniqueItemVisual(f,"style").opacity=p},s.start,s.end)}}}};function A_(o){(function O_(o){if(!o.parallel){var r=!1;_.each(o.series,function(e){e&&"parallel"===e.type&&(r=!0)}),r&&(o.parallel=[{}])}})(o),function Kd(o){var r=dr.kF(o.parallelAxis);_.each(r,function(e){if(_.isObject(e)){var i=e.parallelIndex||0,s=dr.kF(o.parallel)[i];s&&s.parallelAxisDefault&&_.merge(e,s.parallelAxisDefault,!1)}})}(o)}var w_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){this._model=e,this._api=s,this._handlers||(this._handlers={},(0,_.each)(jd,function(l,c){s.getZr().on(c,this._handlers[c]=(0,_.bind)(l,this))},this)),(0,Si.T9)(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},r.prototype.dispose=function(e,i){(0,Si.ZH)(this,"_throttledDispatchExpand"),(0,_.each)(this._handlers,function(s,l){i.getZr().off(l,s)}),this._handlers=null},r.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},r.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction((0,_.extend)({type:"parallelAxisExpand"},e))},r.type="parallel",r}(Ti.Z),jd={mousedown:function(o){rf(this,"click")&&(this._mouseDownPoint=[o.offsetX,o.offsetY])},mouseup:function(o){var r=this._mouseDownPoint;if(rf(this,"click")&&r){var e=[o.offsetX,o.offsetY];if(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)>5)return;var s=this._model.coordinateSystem.getSlidedAxisExpandWindow([o.offsetX,o.offsetY]);"none"!==s.behavior&&this._dispatchExpand({axisExpandWindow:s.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(o){if(!this._mouseDownPoint&&rf(this,"mousemove")){var r=this._model,e=r.coordinateSystem.getSlidedAxisExpandWindow([o.offsetX,o.offsetY]),i=e.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(r.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:e.axisExpandWindow,animation:"jump"===i?null:{duration:0}})}}};function rf(o,r){var e=o._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===r}const pv=w_,L_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(){o.prototype.init.apply(this,arguments),this.mergeOption({})},r.prototype.mergeOption=function(e){e&&_.merge(this.option,e,!0),this._initDimensions()},r.prototype.contains=function(e,i){var s=e.get("parallelIndex");return null!=s&&i.getComponent("parallel",s)===this},r.prototype.setAxisExpand=function(e){_.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(i){e.hasOwnProperty(i)&&(this.option[i]=e[i])},this)},r.prototype._initDimensions=function(){var e=this.dimensions=[],i=this.parallelAxisIndex=[],s=_.filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(l){return(l.get("parallelIndex")||0)===this.componentIndex},this);_.each(s,function(l){e.push("dim"+l.get("dim")),i.push(l.componentIndex)})},r.type="parallel",r.dependencies=["parallelAxis"],r.layoutMode="box",r.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},r}(Pi.Z),N_=function(o){function r(e,i,s,l,c){var f=o.call(this,e,i,s)||this;return f.type=l||"value",f.axisIndex=c,f}return(0,Re.ZT)(r,o),r.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},r}(Xa.Z);function Gl(o,r,e,i,s,l){o=o||0;var c=e[1]-e[0];if(null!=s&&(s=Zl(s,[0,c])),null!=l&&(l=Math.max(l,s??0)),"all"===i){var f=Math.abs(r[1]-r[0]);f=Zl(f,[0,c]),s=l=Zl(f,[s,l]),i=0}r[0]=Zl(r[0],e),r[1]=Zl(r[1],e);var p=nf(r,i);r[i]+=o;var x,v=s||0,m=e.slice();return p.sign<0?m[0]+=v:m[1]-=v,r[i]=Zl(r[i],m),x=nf(r,i),null!=s&&(x.sign!==p.sign||x.span<s)&&(r[1-i]=r[i]+p.sign*s),x=nf(r,i),null!=l&&x.span>l&&(r[1-i]=r[i]+x.sign*l),r}function nf(o,r){var e=o[r]-o[1-r];return{span:Math.abs(e),sign:e>0?-1:e<0?1:r?-1:1}}function Zl(o,r){return Math.min(null!=r[1]?r[1]:1/0,Math.max(null!=r[0]?r[0]:-1/0,o))}var Qd=_.each,af=Math.min,Pu=Math.max,vv=Math.floor,I_=Math.ceil,Di=Be.NM,gv=Math.PI;function Fl(o,r){return af(Pu(o,r[0]),r[1])}function _v(o,r){var e=r.layoutLength/(r.axisCount-1);return{position:e*o,axisNameAvailableWidth:e,axisLabelShow:!0}}function qd(o,r){var f,m,i=r.axisExpandWidth,l=r.axisCollapseWidth,c=r.winInnerIndices,p=l,v=!1;return o<c[0]?(f=o*l,m=l):o<=c[1]?(f=r.axisExpandWindow0Pos+o*i-r.axisExpandWindow[0],p=i,v=!0):(f=r.layoutLength-(r.axisCount-1-o)*l,m=l),{position:f,axisNameAvailableWidth:p,axisLabelShow:v,nameTruncateMaxWidth:m}}const Xs=function(){function o(r,e,i){this.type="parallel",this._axesMap=_.createHashMap(),this._axesLayout={},this.dimensions=r.dimensions,this._model=r,this._init(r,e,i)}return o.prototype._init=function(r,e,i){var l=r.parallelAxisIndex;Qd(r.dimensions,function(c,f){var p=l[f],v=e.getComponent("parallelAxis",p),m=this._axesMap.set(c,new N_(c,Ai.aG(v),[0,0],v.get("type"),p));m.onBand="category"===m.type&&v.get("boundaryGap"),m.inverse=v.get("inverse"),v.axis=m,m.model=v,m.coordinateSystem=v.coordinateSystem=this},this)},o.prototype.update=function(r,e){this._updateAxesFromSeries(this._model,r)},o.prototype.containPoint=function(r){var e=this._makeLayoutInfo(),i=e.axisBase,s=e.layoutBase,l=e.pixelDimIndex,c=r[1-l],f=r[l];return c>=i&&c<=i+e.axisLength&&f>=s&&f<=s+e.layoutLength},o.prototype.getModel=function(){return this._model},o.prototype._updateAxesFromSeries=function(r,e){e.eachSeries(function(i){if(r.contains(i,e)){var s=i.getData();Qd(this.dimensions,function(l){var c=this._axesMap.get(l);c.scale.unionExtentFromData(s,s.mapDimension(l)),Ai.Jk(c.scale,c.model)},this)}},this)},o.prototype.resize=function(r,e){this._rect=sn.ME(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},o.prototype.getRect=function(){return this._rect},o.prototype._makeLayoutInfo=function(){var G,r=this._model,e=this._rect,i=["x","y"],s=["width","height"],l=r.get("layout"),c="horizontal"===l?0:1,f=e[s[c]],p=[0,f],v=this.dimensions.length,m=Fl(r.get("axisExpandWidth"),p),x=Fl(r.get("axisExpandCount")||0,[0,v]),T=r.get("axisExpandable")&&v>3&&v>x&&x>1&&m>0&&f>0,O=r.get("axisExpandWindow");O?(G=Fl(O[1]-O[0],p),O[1]=O[0]+G):(G=Fl(m*(x-1),p),(O=[m*(r.get("axisExpandCenter")||vv(v/2))-G/2])[1]=O[0]+G);var Q=(f-G)/(v-x);Q<3&&(Q=0);var ft=[vv(Di(O[0]/m,1))+1,I_(Di(O[1]/m,1))-1];return{layout:l,pixelDimIndex:c,layoutBase:e[i[c]],layoutLength:f,axisBase:e[i[1-c]],axisLength:e[s[1-c]],axisExpandable:T,axisExpandWidth:m,axisCollapseWidth:Q,axisExpandWindow:O,axisCount:v,winInnerIndices:ft,axisExpandWindow0Pos:Q/m*O[0]}},o.prototype._layoutAxes=function(){var r=this._rect,e=this._axesMap,i=this.dimensions,s=this._makeLayoutInfo(),l=s.layout;e.each(function(c){var f=[0,s.axisLength],p=c.inverse?1:0;c.setExtent(f[p],f[1-p])}),Qd(i,function(c,f){var p=(s.axisExpandable?qd:_v)(f,s),v={horizontal:{x:p.position,y:s.axisLength},vertical:{x:0,y:p.position}},x=[v[l].x+r.x,v[l].y+r.y],T={horizontal:gv/2,vertical:0}[l],O=In.create();In.rotate(O,O,T),In.translate(O,O,x),this._axesLayout[c]={position:x,rotation:T,transform:O,axisNameAvailableWidth:p.axisNameAvailableWidth,axisLabelShow:p.axisLabelShow,nameTruncateMaxWidth:p.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},o.prototype.getAxis=function(r){return this._axesMap.get(r)},o.prototype.dataToPoint=function(r,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(r),e)},o.prototype.eachActiveState=function(r,e,i,s){null==i&&(i=0),null==s&&(s=r.count());var l=this._axesMap,c=this.dimensions,f=[],p=[];_.each(c,function(Q){f.push(r.mapDimension(Q)),p.push(l.get(Q).model)});for(var v=this.hasAxisBrushed(),m=i;m<s;m++){var x=void 0;if(v){x="active";for(var T=r.getValues(f,m),O=0,G=c.length;O<G;O++)if("inactive"===p[O].getActiveState(T[O])){x="inactive";break}}else x="normal";e(x,m)}},o.prototype.hasAxisBrushed=function(){for(var r=this.dimensions,e=this._axesMap,i=!1,s=0,l=r.length;s<l;s++)"normal"!==e.get(r[s]).model.getActiveState()&&(i=!0);return i},o.prototype.axisCoordToPoint=function(r,e){return ur.applyTransform([r,0],this._axesLayout[e].transform)},o.prototype.getAxisLayout=function(r){return _.clone(this._axesLayout[r])},o.prototype.getSlidedAxisExpandWindow=function(r){var e=this._makeLayoutInfo(),i=e.pixelDimIndex,s=e.axisExpandWindow.slice(),l=s[1]-s[0],c=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(r))return{behavior:"none",axisExpandWindow:s};var p,f=r[i]-e.layoutBase-e.axisExpandWindow0Pos,v="slide",m=e.axisCollapseWidth,x=this._model.get("axisExpandSlideTriggerArea"),T=null!=x[0];if(m)T&&m&&f<l*x[0]?(v="jump",p=f-l*x[2]):T&&m&&f>l*(1-x[0])?(v="jump",p=f-l*(1-x[2])):(p=f-l*x[1])>=0&&(p=f-l*(1-x[1]))<=0&&(p=0),(p*=e.axisExpandWidth/m)?Gl(p,s,c,"all"):v="none";else{var O=s[1]-s[0];(s=[Pu(0,c[1]*f/O-O/2)])[1]=af(c[1],s[0]+O),s[0]=s[1]-O}return{axisExpandWindow:s,behavior:v}},o}(),Ks={create:function Ys(o,r){var e=[];return o.eachComponent("parallel",function(i,s){var l=new Xs(i,o,r);l.name="parallel_"+s,l.resize(i,r),i.coordinateSystem=l,l.model=i,e.push(l)}),o.eachSeries(function(i){if("parallel"===i.get("coordinateSystem")){var s=i.getReferringComponents("parallel",dr.C6).models[0];i.coordinateSystem=s.coordinateSystem}}),e}};var Au=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.activeIntervals=[],e}return(0,Re.ZT)(r,o),r.prototype.getAreaSelectStyle=function(){return(0,Al.Z)([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},r.prototype.setActiveIntervals=function(e){var i=this.activeIntervals=_.clone(e);if(i)for(var s=i.length-1;s>=0;s--)Be.dt(i[s])},r.prototype.getActiveState=function(e){var i=this.activeIntervals;if(!i.length)return"normal";if(null==e||isNaN(+e))return"inactive";if(1===i.length){var s=i[0];if(s[0]<=e&&e<=s[1])return"active"}else for(var l=0,c=i.length;l<c;l++)if(i[l][0]<=e&&e<=i[l][1])return"active";return"inactive"},r}(Pi.Z);_.mixin(Au,tu.W);const tp=Au;var js=!0,$c=Math.min,Ou=Math.max,mv=Math.pow,Sv="globalPan",B_={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},G_={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},ep={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Z_=0,F_=function(o){function r(e){var i=o.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=e,i.group=new pr.Z,i._uid="brushController_"+Z_++,(0,_.each)(H_,function(s,l){this._handlers[l]=(0,_.bind)(s,this)},i),i}return(0,Re.ZT)(r,o),r.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},r.prototype._doEnableBrush=function(e){var i=this._zr;this._enableGlobalPan||function en(o,r,e){lu(o)[r]=e}(i,Sv,this._uid),(0,_.each)(this._handlers,function(s,l){i.on(l,s)}),this._brushType=e.brushType,this._brushOption=(0,_.merge)((0,_.clone)(ep),e,!0)},r.prototype._doDisableBrush=function(){var e=this._zr;(function su(o,r,e){var i=lu(o);i[r]===e&&(i[r]=null)})(e,Sv,this._uid),(0,_.each)(this._handlers,function(i,s){e.off(s,i)}),this._brushType=this._brushOption=null},r.prototype.setPanels=function(e){if(e&&e.length){var i=this._panels={};(0,_.each)(e,function(s){i[s.panelId]=(0,_.clone)(s)})}else this._panels=null;return this},r.prototype.mount=function(e){this._enableGlobalPan=(e=e||{}).enableGlobalPan;var i=this.group;return this._zr.add(i),i.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=i.getLocalTransform(),this},r.prototype.updateCovers=function(e){e=(0,_.map)(e,function(T){return(0,_.merge)((0,_.clone)(ep),T,!0)});var s=this._covers,l=this._covers=[],c=this,f=this._creatingCover;return new Hs.Z(s,e,function v(T,O){return p(T.__brushOption,O)},p).add(m).update(m).remove(function x(T){s[T]!==f&&c.group.remove(s[T])}).execute(),this;function p(T,O){return(null!=T.id?T.id:"\0-brush-index-"+O)+"-"+T.brushType}function m(T,O){var G=e[T];if(null!=O&&s[O]===f)l[T]=s[O];else{var F=l[T]=null!=O?(s[O].__brushOption=G,s[O]):Cv(c,Tv(c,G));of(c,F)}}},r.prototype.unmount=function(){return this.enableBrush(!1),sf(this),this._zr.remove(this.group),this},r.prototype.dispose=function(){this.unmount(),this.off()},r}(qu.Z);function Tv(o,r){var e=Xc[r.brushType].createCover(o,r);return e.__brushOption=r,rp(e,r),o.group.add(e),e}function Cv(o,r){var e=np(r);return e.endCreating&&(e.endCreating(o,r),rp(r,r.__brushOption)),r}function Mv(o,r){var e=r.__brushOption;np(r).updateCoverShape(o,r,e.range,e)}function rp(o,r){var e=r.z;null==e&&(e=1e4),o.traverse(function(i){i.z=e,i.z2=e})}function of(o,r){np(r).updateCommon(o,r),Mv(o,r)}function np(o){return Xc[o.__brushOption.brushType]}function ip(o,r,e){var i=o._panels;if(!i)return js;var s,l=o._transform;return(0,_.each)(i,function(c){c.isTargetByCursor(r,e,l)&&(s=c)}),s}function bv(o,r){var e=o._panels;if(!e)return js;var i=r.__brushOption.panelId;return null!=i?e[i]:js}function sf(o){var r=o._covers,e=r.length;return(0,_.each)(r,function(i){o.group.remove(i)},o),r.length=0,!!e}function kl(o,r){var e=(0,_.map)(o._covers,function(i){var s=i.__brushOption,l=(0,_.clone)(s.range);return{brushType:s.brushType,panelId:s.panelId,range:l}});o.trigger("brush",{areas:e,isEnd:!!r.isEnd,removeOnClick:!!r.removeOnClick})}function Pv(o){var r=o.length-1;return r<0&&(r=0),[o[0],o[r]]}function Av(o,r,e,i){var s=new pr.Z;return s.add(new Br.Z({name:"main",style:ap(e),silent:!0,draggable:!0,cursor:"move",drift:(0,_.curry)(sp,o,r,s,["n","s","w","e"]),ondragend:(0,_.curry)(kl,r,{isEnd:!0})})),(0,_.each)(i,function(l){s.add(new Br.Z({name:l.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:(0,_.curry)(sp,o,r,s,l),ondragend:(0,_.curry)(kl,r,{isEnd:!0})}))}),s}function Ov(o,r,e,i){var s=i.brushStyle.lineWidth||0,l=Ou(s,6),c=e[0][0],f=e[1][0],p=c-s/2,v=f-s/2,m=e[0][1],x=e[1][1],T=m-l+s/2,O=x-l+s/2,G=m-c,F=x-f,Q=G+s,ft=F+s;Ba(o,r,"main",c,f,G,F),i.transformable&&(Ba(o,r,"w",p,v,l,ft),Ba(o,r,"e",T,v,l,ft),Ba(o,r,"n",p,v,Q,l),Ba(o,r,"s",p,O,Q,l),Ba(o,r,"nw",p,v,l,l),Ba(o,r,"ne",T,v,l,l),Ba(o,r,"sw",p,O,l,l),Ba(o,r,"se",T,O,l,l))}function lf(o,r){var e=r.__brushOption,i=e.transformable,s=r.childAt(0);s.useStyle(ap(e)),s.attr({silent:!i,cursor:i?"move":"default"}),(0,_.each)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(l){var c=r.childOfName(l.join("")),f=1===l.length?op(o,l[0]):function wv(o,r){var e=[op(o,r[0]),op(o,r[1])];return("e"===e[0]||"w"===e[0])&&e.reverse(),e.join("")}(o,l);c&&c.attr({silent:!i,invisible:!i,cursor:i?G_[f]+"-resize":null})})}function Ba(o,r,e,i,s,l,c){var f=r.childOfName(e);f&&f.setShape(function z_(o){var r=$c(o[0][0],o[1][0]),e=$c(o[0][1],o[1][1]);return{x:r,y:e,width:Ou(o[0][0],o[1][0])-r,height:Ou(o[0][1],o[1][1])-e}}(up(o,r,[[i,s],[i+l,s+c]])))}function ap(o){return(0,_.defaults)({strokeNoScale:!0},o.brushStyle)}function Ev(o,r,e,i){var s=[$c(o,e),$c(r,i)],l=[Ou(o,e),Ou(r,i)];return[[s[0],l[0]],[s[1],l[1]]]}function op(o,r){var s=ur.transformDirection({w:"left",e:"right",n:"top",s:"bottom"}[r],function k_(o){return ur.getTransform(o.group)}(o));return{left:"w",right:"e",top:"n",bottom:"s"}[s]}function sp(o,r,e,i,s,l){var c=e.__brushOption,f=o.toRectRange(c.range),p=lp(r,s,l);(0,_.each)(i,function(v){var m=B_[v];f[m[0]][m[1]]+=p[m[0]]}),c.range=o.fromRectRange(Ev(f[0][0],f[1][0],f[0][1],f[1][1])),of(r,e),kl(r,{isEnd:!1})}function Js(o,r,e,i){var s=r.__brushOption.range,l=lp(o,e,i);(0,_.each)(s,function(c){c[0]+=l[0],c[1]+=l[1]}),of(o,r),kl(o,{isEnd:!1})}function lp(o,r,e){var i=o.group,s=i.transformCoordToLocal(r,e),l=i.transformCoordToLocal(0,0);return[s[0]-l[0],s[1]-l[1]]}function up(o,r,e){var i=bv(o,r);return i&&i!==js?i.clipPath(e,o._transform):(0,_.clone)(e)}function cp(o){var r=o.event;r.preventDefault&&r.preventDefault()}function hp(o,r,e){return o.childOfName("main").contain(r,e)}function Dv(o,r,e,i){var f,s=o._creatingCover,l=o._creatingPanel,c=o._brushOption;if(o._track.push(e.slice()),function zl(o){var r=o._track;if(!r.length)return!1;var e=r[r.length-1],i=r[0],s=e[0]-i[0],l=e[1]-i[1];return mv(s*s+l*l,.5)>6}(o)||s){if(l&&!s){"single"===c.brushMode&&sf(o);var p=(0,_.clone)(c);p.brushType=Eu(p.brushType,l),p.panelId=l===js?null:l.panelId,s=o._creatingCover=Tv(o,p),o._covers.push(s)}if(s){var v=Xc[Eu(o._brushType,l)];s.__brushOption.range=v.getCreatingRange(up(o,s,o._track)),i&&(Cv(o,s),v.updateCommon(o,s)),Mv(o,s),f={isEnd:i}}}else i&&"single"===c.brushMode&&c.removeOnClick&&ip(o,r,e)&&sf(o)&&(f={isEnd:i,removeOnClick:!0});return f}function Eu(o,r){return"auto"===o?r.defaultBrushType:o}var H_={mousedown:function(o){if(this._dragging)Li(this,o);else if(!o.target||!o.target.draggable){cp(o);var r=this.group.transformCoordToLocal(o.offsetX,o.offsetY);this._creatingCover=null,(this._creatingPanel=ip(this,o,r))&&(this._dragging=!0,this._track=[r.slice()])}},mousemove:function(o){var i=this.group.transformCoordToLocal(o.offsetX,o.offsetY);if(function U_(o,r,e){if(o._brushType&&!function Lv(o,r,e){var i=o._zr;return r<0||r>i.getWidth()||e<0||e>i.getHeight()}(o,r.offsetX,r.offsetY)){var i=o._zr,s=o._covers,l=ip(o,r,e);if(!o._dragging)for(var c=0;c<s.length;c++){var f=s[c].__brushOption;if(l&&(l===js||f.panelId===l.panelId)&&Xc[f.brushType].contain(s[c],e[0],e[1]))return}l&&i.setCursorStyle("crosshair")}}(this,o,i),this._dragging){cp(o);var s=Dv(this,o,i,!1);s&&kl(this,s)}},mouseup:function(o){Li(this,o)}};function Li(o,r){if(o._dragging){cp(r);var s=o.group.transformCoordToLocal(r.offsetX,r.offsetY),l=Dv(o,r,s,!0);o._dragging=!1,o._track=[],o._creatingCover=null,l&&kl(o,l)}}var Xc={lineX:fp(0),lineY:fp(1),rect:{createCover:function(o,r){function e(i){return i}return Av({toRectRange:e,fromRectRange:e},o,r,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(o){var r=Pv(o);return Ev(r[1][0],r[1][1],r[0][0],r[0][1])},updateCoverShape:function(o,r,e,i){Ov(o,r,e,i)},updateCommon:lf,contain:hp},polygon:{createCover:function(o,r){var e=new pr.Z;return e.add(new ia.Z({name:"main",style:ap(r),silent:!0})),e},getCreatingRange:function(o){return o},endCreating:function(o,r){r.remove(r.childAt(0)),r.add(new Jn.Z({name:"main",draggable:!0,drift:(0,_.curry)(Js,o,r),ondragend:(0,_.curry)(kl,o,{isEnd:!0})}))},updateCoverShape:function(o,r,e,i){r.childAt(0).setShape({points:up(o,r,e)})},updateCommon:lf,contain:hp}};function fp(o){return{createCover:function(r,e){return Av({toRectRange:function(i){var s=[i,[0,100]];return o&&s.reverse(),s},fromRectRange:function(i){return i[o]}},r,e,[[["w"],["e"]],[["n"],["s"]]][o])},getCreatingRange:function(r){var e=Pv(r);return[$c(e[0][o],e[1][o]),Ou(e[0][o],e[1][o])]},updateCoverShape:function(r,e,i,s){var l,c=bv(r,e);if(c!==js&&c.getLinearBrushOtherExtent)l=c.getLinearBrushOtherExtent(o);else{var f=r._zr;l=[0,[f.getWidth(),f.getHeight()][1-o]]}var p=[i,l];o&&p.reverse(),Ov(r,e,p,s)},updateCommon:lf,contain:hp}}const dp=F_;function uf(o){return o=pp(o),function(r){return ur.clipPointsByRect(r,o)}}function Xi(o,r){return o=pp(o),function(e){var i=r??e,l=i?o.x:o.y;return[l,l+((i?o.width:o.height)||0)]}}function cf(o,r,e){var i=pp(o);return function(s,l){return i.contain(l[0],l[1])&&!uo(s,r,e)}}function pp(o){return bn.Z.create(o)}var Bm=["axisLine","axisTickLabel","axisName"];const V_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i){o.prototype.init.apply(this,arguments),(this._brushController=new dp(i.getZr())).on("brush",_.bind(this._onBrush,this))},r.prototype.render=function(e,i,s,l){if(!function Kc(o,r,e){return e&&"axisAreaSelect"===e.type&&r.findComponents({mainType:"parallelAxis",query:e})[0]===o}(e,i,l)){this.axisModel=e,this.api=s,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new pr.Z,this.group.add(this._axisGroup),e.get("show")){var f=function Nv(o,r){return r.getComponent("parallel",o.get("parallelIndex"))}(e,i),p=f.coordinateSystem,v=e.getAreaSelectStyle(),m=v.width,T=p.getAxisLayout(e.axis.dim),O=_.extend({strokeContainThreshold:m},T),G=new Vn(e,O);_.each(Bm,G.add,G),this._axisGroup.add(G.getGroup()),this._refreshBrushController(O,v,e,f,m,s),ur.groupTransition(c,this._axisGroup,e)}}},r.prototype._refreshBrushController=function(e,i,s,l,c,f){var p=s.axis.getExtent(),v=p[1]-p[0],m=Math.min(30,.1*Math.abs(v)),x=bn.Z.create({x:p[0],y:-c/2,width:v,height:c});x.x-=m,x.width+=2*m,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:uf(x),isTargetByCursor:cf(x,f,l),getLinearBrushOtherExtent:Xi(x,0)}]).enableBrush({brushType:"lineX",brushStyle:i,removeOnClick:!0}).updateCovers(function to(o){var r=o.axis;return _.map(o.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[r.dataToCoord(e[0],!0),r.dataToCoord(e[1],!0)]}})}(s))},r.prototype._onBrush=function(e){var s=this.axisModel,l=s.axis,c=_.map(e.areas,function(f){return[l.coordToData(f.range[0],!0),l.coordToData(f.range[1],!0)]});(!s.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:s.id,intervals:c})},r.prototype.dispose=function(){this._brushController.dispose()},r.type="parallelAxis",r}(Ti.Z);var W_={type:"axisAreaSelect",event:"axisAreaSelected"},hf={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Iv(o){o.registerComponentView(pv),o.registerComponentModel(L_),o.registerCoordinateSystem("parallel",Ks),o.registerPreprocessor(A_),o.registerComponentModel(tp),o.registerComponentView(V_),Is(o,"parallel",tp,hf),function $_(o){o.registerAction(W_,function(r,e){e.eachComponent({mainType:"parallelAxis",query:r},function(i){i.axis.model.setActiveIntervals(r.intervals)})}),o.registerAction("parallelAxisExpand",function(r,e){e.eachComponent({mainType:"parallel",query:r},function(i){i.setAxisExpand(r)})})}(o)}var ff=function o(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},Y_=function(o){function r(e){return o.call(this,e)||this}return(0,Re.ZT)(r,o),r.prototype.getDefaultShape=function(){return new ff},r.prototype.buildPath=function(e,i){var s=i.extent;e.moveTo(i.x1,i.y1),e.bezierCurveTo(i.cpx1,i.cpy1,i.cpx2,i.cpy2,i.x2,i.y2),"vertical"===i.orient?(e.lineTo(i.x2+s,i.y2),e.bezierCurveTo(i.cpx2+s,i.cpy2,i.cpx1+s,i.cpy1,i.x1+s,i.y1)):(e.lineTo(i.x2,i.y2+s),e.bezierCurveTo(i.cpx2,i.cpy2+s,i.cpx1,i.cpy1+s,i.x1,i.y1+s)),e.closePath()},r.prototype.highlight=function(){(0,sr.fD)(this)},r.prototype.downplay=function(){(0,sr.Mh)(this)},r}(mt.ZP);const J_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e._focusAdjacencyDisabled=!1,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l=this,c=e.getGraph(),f=this.group,p=e.layoutInfo,v=p.width,m=p.height,x=e.getData(),T=e.getData("edge"),O=e.get("orient");this._model=e,f.removeAll(),f.x=p.x,f.y=p.y,c.eachEdge(function(G){var F=new Y_,Q=(0,Fr.A)(F);Q.dataIndex=G.dataIndex,Q.seriesIndex=e.seriesIndex,Q.dataType="edge";var xe,be,Ae,ke,Je,$e,fr,wr,ft=G.getModel(),Tt=ft.getModel("lineStyle"),xt=Tt.get("curveness"),At=G.node1.getLayout(),It=G.node1.getModel(),Nt=It.get("localX"),Gt=It.get("localY"),Wt=G.node2.getLayout(),jt=G.node2.getModel(),ee=jt.get("localX"),oe=jt.get("localY"),de=G.getLayout();switch(F.shape.extent=Math.max(1,de.dy),F.shape.orient=O,"vertical"===O?(Je=xe=(null!=Nt?Nt*v:At.x)+de.sy,$e=(be=(null!=Gt?Gt*m:At.y)+At.dy)*(1-xt)+(ke=null!=oe?oe*m:Wt.y)*xt,fr=Ae=(null!=ee?ee*v:Wt.x)+de.ty,wr=be*xt+ke*(1-xt)):(Je=(xe=(null!=Nt?Nt*v:At.x)+At.dx)*(1-xt)+(Ae=null!=ee?ee*v:Wt.x)*xt,$e=be=(null!=Gt?Gt*m:At.y)+de.sy,fr=xe*xt+Ae*(1-xt),wr=ke=(null!=oe?oe*m:Wt.y)+de.ty),F.setShape({x1:xe,y1:be,x2:Ae,y2:ke,cpx1:Je,cpy1:$e,cpx2:fr,cpy2:wr}),F.useStyle(Tt.getItemStyle()),F.style.fill){case"source":F.style.fill=G.node1.getVisual("color"),F.style.decal=G.node1.getVisual("style").decal;break;case"target":F.style.fill=G.node2.getVisual("color"),F.style.decal=G.node2.getVisual("style").decal;break;case"gradient":var Dr=G.node1.getVisual("color"),cn=G.node2.getVisual("color");(0,_.isString)(Dr)&&(0,_.isString)(cn)&&(F.style.fill=new xi.Z(0,0,+("horizontal"===O),+("vertical"===O),[{color:Dr,offset:0},{color:cn,offset:1}]))}(0,Or.ni)(F,(0,Or.k3)(ft,"edgeLabel"),{labelFetcher:e,labelDataIndex:G.dataIndex,defaultText:""+ft.get("value")}),F.setTextConfig({position:"inside"});var ln=ft.getModel("emphasis");(0,sr.WO)(F,ft,"lineStyle",function(Pn){return Pn.getItemStyle()}),f.add(F),T.setItemGraphicEl(G.dataIndex,F);var rn=ln.get("focus");(0,sr.k5)(F,"adjacency"===rn?G.getAdjacentDataIndices():rn,ln.get("blurScope"),ln.get("disabled")),(0,Fr.A)(F).dataType="edge"}),c.eachNode(function(G){var F=G.getLayout(),Q=G.getModel(),ft=Q.get("localX"),Tt=Q.get("localY"),xt=Q.getModel("emphasis"),At=new Br.Z({shape:{x:null!=ft?ft*v:F.x,y:null!=Tt?Tt*m:F.y,width:F.dx,height:F.dy},style:Q.getModel("itemStyle").getItemStyle(),z2:10});(0,Or.ni)(At,(0,Or.k3)(Q),{labelFetcher:e,labelDataIndex:G.dataIndex,defaultText:G.id}),At.disableLabelAnimation=!0,At.setStyle("fill",G.getVisual("color")),At.setStyle("decal",G.getVisual("style").decal),(0,sr.WO)(At,Q),f.add(At),x.setItemGraphicEl(G.dataIndex,At),(0,Fr.A)(At).dataType="node";var It=xt.get("focus");(0,sr.k5)(At,"adjacency"===It?G.getAdjacentDataIndices():It,xt.get("blurScope"),xt.get("disabled"))}),x.eachItemGraphicEl(function(G,F){x.getItemModel(F).get("draggable")&&(G.drift=function(ft,Tt){l._focusAdjacencyDisabled=!0,this.shape.x+=ft,this.shape.y+=Tt,this.dirty(),s.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:x.getRawIndex(F),localX:this.shape.x/v,localY:this.shape.y/m})},G.ondragend=function(){l._focusAdjacencyDisabled=!1},G.draggable=!0,G.cursor="move")}),!this._data&&e.isAnimationEnabled()&&f.setClipPath(function j_(o,r,e){var i=new Br.Z({shape:{x:o.x-10,y:o.y-10,width:0,height:o.height+20}});return he.KZ(i,{shape:{width:o.width+20}},r,e),i}(f.getBoundingRect(),e,function(){f.removeClipPath()})),this._data=e.getData()},r.prototype.dispose=function(){},r.type="sankey",r}(_r.Z),q_=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e,i){var s=e.edges||e.links,l=e.data||e.nodes,c=e.levels;this.levelModels=[];for(var f=this.levelModels,p=0;p<c.length;p++)null!=c[p].depth&&c[p].depth>=0&&(f[c[p].depth]=new hi.Z(c[p],this,i));if(l&&s)return Ss(l,s,this,!0,function m(x,T){x.wrapMethod("getItemModel",function(O,G){var F=O.parentModel,Q=F.getData().getItemLayout(G);if(Q){var Tt=F.levelModels[Q.depth];Tt&&(O.parentModel=Tt)}return O}),T.wrapMethod("getItemModel",function(O,G){var F=O.parentModel,ft=F.getGraph().getEdgeByIndex(G).node1.getLayout();if(ft){var xt=F.levelModels[ft.depth];xt&&(O.parentModel=xt)}return O})}).data},r.prototype.setNodePosition=function(e,i){var l=(this.option.data||this.option.nodes)[e];l.localX=i[0],l.localY=i[1]},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.formatTooltip=function(e,i,s){function l(O){return isNaN(O)||null==O}if("edge"===s){var c=this.getDataParams(e,s),f=c.data,p=c.value;return(0,ii.TX)("nameValue",{name:f.source+" -- "+f.target,value:p,noValue:l(p)})}var x=this.getGraph().getNodeByIndex(e).getLayout().value,T=this.getDataParams(e,s).data.name;return(0,ii.TX)("nameValue",{name:null!=T?T+"":null,value:x,noValue:l(x)})},r.prototype.optionUpdated=function(){},r.prototype.getDataParams=function(e,i){var s=o.prototype.getDataParams.call(this,e,i);if(null==s.value&&"node"===i){var c=this.getGraph().getNodeByIndex(e).getLayout().value;s.value=c}return s},r.type="series.sankey",r.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},r}(rr.Z);function vp(o,r){o.eachSeriesByType("sankey",function(e){var i=e.get("nodeWidth"),s=e.get("nodeGap"),l=function t0(o,r){return sn.ME(o.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}(e,r);e.layoutInfo=l;var c=l.width,f=l.height,p=e.getGraph(),v=p.nodes,m=p.edges;!function r0(o){_.each(o,function(r){var e=qs(r.outEdges,pf),i=qs(r.inEdges,pf),s=r.getValue()||0,l=Math.max(e,i,s);r.setLayout({value:l},!0)})}(v),function e0(o,r,e,i,s,l,c,f,p){(function Rv(o,r,e,i,s,l,c){for(var f=[],p=[],v=[],m=[],x=0,T=0;T<r.length;T++)f[T]=1;for(T=0;T<o.length;T++)p[T]=o[T].inEdges.length,0===p[T]&&v.push(o[T]);for(var O=-1;v.length;){for(var G=0;G<v.length;G++){var F=v[G],Q=F.hostGraph.data.getRawDataItem(F.dataIndex),ft=null!=Q.depth&&Q.depth>=0;ft&&Q.depth>O&&(O=Q.depth),F.setLayout({depth:ft?Q.depth:x},!0),F.setLayout("vertical"===l?{dy:e}:{dx:e},!0);for(var Tt=0;Tt<F.outEdges.length;Tt++){var xt=F.outEdges[Tt];f[r.indexOf(xt)]=0;var It=xt.node2;0==--p[o.indexOf(It)]&&m.indexOf(It)<0&&m.push(It)}}++x,v=m,m=[]}for(T=0;T<f.length;T++)if(1===f[T])throw new Error("Sankey is a DAG, the original data has cycle!");var Gt=O>x-1?O:x-1;c&&"left"!==c&&function n0(o,r,e,i){if("right"===r){for(var s=[],l=o,c=0;l.length;){for(var f=0;f<l.length;f++){var p=l[f];p.setLayout({skNodeHeight:c},!0);for(var v=0;v<p.inEdges.length;v++){var m=p.inEdges[v];s.indexOf(m.node1)<0&&s.push(m.node1)}}l=s,s=[],++c}_.each(o,function(x){df(x)||x.setLayout({depth:Math.max(0,i-x.getLayout().skNodeHeight)},!0)})}else"justify"===r&&function i0(o,r){_.each(o,function(e){!df(e)&&!e.outEdges.length&&e.setLayout({depth:r},!0)})}(o,i)}(o,c,0,Gt),function a0(o,r,e){_.each(o,function(i){var s=i.getLayout().depth*r;i.setLayout("vertical"===e?{y:s}:{x:s},!0)})}(o,"vertical"===l?(s-e)/Gt:(i-e)/Gt,l)})(o,r,e,s,l,f,p),function Bv(o,r,e,i,s,l,c){var f=function o0(o,r){var e=[],i="vertical"===r?"y":"x",s=(0,dr.pv)(o,function(l){return l.getLayout()[i]});return s.keys.sort(function(l,c){return l-c}),_.each(s.keys,function(l){e.push(s.buckets.get(l))}),e}(o,c);(function s0(o,r,e,i,s,l){var c=1/0;_.each(o,function(f){var p=f.length,v=0;_.each(f,function(x){v+=x.getLayout().value});var m="vertical"===l?(i-(p-1)*s)/v:(e-(p-1)*s)/v;m<c&&(c=m)}),_.each(o,function(f){_.each(f,function(p,v){var m=p.getLayout().value*c;"vertical"===l?(p.setLayout({x:v},!0),p.setLayout({dx:m},!0)):(p.setLayout({y:v},!0),p.setLayout({dy:m},!0))})}),_.each(r,function(f){var p=+f.getValue()*c;f.setLayout({dy:p},!0)})})(f,r,e,i,s,c),gp(f,s,e,i,c);for(var p=1;l>0;l--)l0(f,p*=.99,c),gp(f,s,e,i,c),h0(f,p,c),gp(f,s,e,i,c)}(o,r,l,s,i,c,f),function f0(o,r){var e="vertical"===r?"x":"y";_.each(o,function(i){i.outEdges.sort(function(s,l){return s.node2.getLayout()[e]-l.node2.getLayout()[e]}),i.inEdges.sort(function(s,l){return s.node1.getLayout()[e]-l.node1.getLayout()[e]})}),_.each(o,function(i){var s=0,l=0;_.each(i.outEdges,function(c){c.setLayout({sy:s},!0),s+=c.getLayout().dy}),_.each(i.inEdges,function(c){c.setLayout({ty:l},!0),l+=c.getLayout().dy})})}(o,f)}(v,m,i,s,c,f,0!==_.filter(v,function(F){return 0===F.getLayout().value}).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))})}function df(o){var r=o.hostGraph.data.getRawDataItem(o.dataIndex);return null!=r.depth&&r.depth>=0}function gp(o,r,e,i,s){var l="vertical"===s?"x":"y";_.each(o,function(c){c.sort(function(F,Q){return F.getLayout()[l]-Q.getLayout()[l]});for(var f,p,v,m=0,x=c.length,T="vertical"===s?"dx":"dy",O=0;O<x;O++)(v=m-(p=c[O]).getLayout()[l])>0&&(f=p.getLayout()[l]+v,p.setLayout("vertical"===s?{x:f}:{y:f},!0)),m=p.getLayout()[l]+p.getLayout()[T]+r;if((v=m-r-("vertical"===s?i:e))>0)for(f=p.getLayout()[l]-v,p.setLayout("vertical"===s?{x:f}:{y:f},!0),m=f,O=x-2;O>=0;--O)(v=(p=c[O]).getLayout()[l]+p.getLayout()[T]+r-m)>0&&(f=p.getLayout()[l]-v,p.setLayout("vertical"===s?{x:f}:{y:f},!0)),m=p.getLayout()[l]})}function l0(o,r,e){_.each(o.slice().reverse(),function(i){_.each(i,function(s){if(s.outEdges.length){var l=qs(s.outEdges,Gv,e)/qs(s.outEdges,pf);if(isNaN(l)){var c=s.outEdges.length;l=c?qs(s.outEdges,Zv,e)/c:0}if("vertical"===e){var f=s.getLayout().x+(l-Qs(s,e))*r;s.setLayout({x:f},!0)}else{var p=s.getLayout().y+(l-Qs(s,e))*r;s.setLayout({y:p},!0)}}})})}function Gv(o,r){return Qs(o.node2,r)*o.getValue()}function Zv(o,r){return Qs(o.node2,r)}function u0(o,r){return Qs(o.node1,r)*o.getValue()}function c0(o,r){return Qs(o.node1,r)}function Qs(o,r){return"vertical"===r?o.getLayout().x+o.getLayout().dx/2:o.getLayout().y+o.getLayout().dy/2}function pf(o){return o.getValue()}function qs(o,r,e){for(var i=0,s=o.length,l=-1;++l<s;){var c=+r(o[l],e);isNaN(c)||(i+=c)}return i}function h0(o,r,e){_.each(o,function(i){_.each(i,function(s){if(s.inEdges.length){var l=qs(s.inEdges,u0,e)/qs(s.inEdges,pf);if(isNaN(l)){var c=s.inEdges.length;l=c?qs(s.inEdges,c0,e)/c:0}if("vertical"===e){var f=s.getLayout().x+(l-Qs(s,e))*r;s.setLayout({x:f},!0)}else{var p=s.getLayout().y+(l-Qs(s,e))*r;s.setLayout({y:p},!0)}}})})}function t(o){o.eachSeriesByType("sankey",function(r){var e=r.getGraph(),i=e.nodes,s=e.edges;if(i.length){var l=1/0,c=-1/0;_.each(i,function(f){var p=f.getLayout().value;p<l&&(l=p),p>c&&(c=p)}),_.each(i,function(f){var v=new Gi({type:"color",mappingMethod:"linear",dataExtent:[l,c],visual:r.get("color")}).mapValueToVisual(f.getLayout().value),m=f.getModel().get(["itemStyle","color"]);null!=m?(f.setVisual("color",m),f.setVisual("style",{fill:m})):(f.setVisual("color",v),f.setVisual("style",{fill:v}))})}s.length&&_.each(s,function(f){var p=f.getModel().get("lineStyle");f.setVisual("style",p)})})}var u=D(2747),h=function(){function o(){}return o.prototype.getInitialData=function(r,e){var i,p,s=e.getComponent("xAxis",this.get("xAxisIndex")),l=e.getComponent("yAxis",this.get("yAxisIndex")),c=s.get("type"),f=l.get("type");"category"===c?(r.layout="horizontal",i=s.getOrdinalMeta(),p=!0):"category"===f?(r.layout="vertical",i=l.getOrdinalMeta(),p=!0):r.layout=r.layout||"horizontal";var v=["x","y"],m="horizontal"===r.layout?0:1,x=this._baseAxisDim=v[m],T=v[1-m],O=[s,l],G=O[m].get("type"),F=O[1-m].get("type"),Q=r.data;if(Q&&p){var ft=[];_.each(Q,function(At,It){var Nt;_.isArray(At)?(Nt=At.slice(),At.unshift(It)):_.isArray(At.value)?((Nt=_.extend({},At)).value=Nt.value.slice(),At.value.unshift(It)):Nt=At,ft.push(Nt)}),r.data=ft}var Tt=this.defaultValueDimensions,xt=[{name:x,type:(0,u.T)(G),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:T,type:(0,u.T)(F),dimsDef:Tt.slice()}];return Ue(this,{coordDimensions:xt,dimensionsCount:Tt.length+1,encodeDefaulter:_.curry(ir.pY,xt,this)})},o.prototype.getBaseAxis=function(){var r=this._baseAxisDim;return this.ecModel.getComponent(r+"Axis",this.get(r+"AxisIndex")).axis},o}(),d=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return(0,Re.ZT)(r,o),r.type="series.boxplot",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},r}(rr.Z);(0,_.mixin)(d,h,!0);const g=d;var y=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l=e.getData(),c=this.group,f=this._data;this._data||c.removeAll();var p="horizontal"===e.get("layout")?1:0;l.diff(f).add(function(v){if(l.hasValue(v)){var x=L(l.getItemLayout(v),l,v,p,!0);l.setItemGraphicEl(v,x),c.add(x)}}).update(function(v,m){var x=f.getItemGraphicEl(m);if(l.hasValue(v)){var T=l.getItemLayout(v);x?((0,he.Zi)(x),W(T,x,l,v)):x=L(T,l,v,p),c.add(x),l.setItemGraphicEl(v,x)}else c.remove(x)}).remove(function(v){var m=f.getItemGraphicEl(v);m&&c.remove(m)}).execute(),this._data=l},r.prototype.remove=function(e){var i=this.group,s=this._data;this._data=null,s&&s.eachItemGraphicEl(function(l){l&&i.remove(l)})},r.type="boxplot",r}(_r.Z),S=function o(){},b=function(o){function r(e){var i=o.call(this,e)||this;return i.type="boxplotBoxPath",i}return(0,Re.ZT)(r,o),r.prototype.getDefaultShape=function(){return new S},r.prototype.buildPath=function(e,i){var s=i.points,l=0;for(e.moveTo(s[l][0],s[l][1]),l++;l<4;l++)e.lineTo(s[l][0],s[l][1]);for(e.closePath();l<s.length;l++)e.moveTo(s[l][0],s[l][1]),l++,e.lineTo(s[l][0],s[l][1])},r}(mt.ZP);function L(o,r,e,i,s){var l=o.ends,c=new b({shape:{points:s?ut(l,i,o):l}});return W(o,c,r,e,s),c}function W(o,r,e,i,s){(0,ur[s?"initProps":"updateProps"])(r,{shape:{points:o.ends}},e.hostModel,i),r.useStyle(e.getItemVisual(i,"style")),r.style.strokeNoScale=!0,r.z2=100;var f=e.getItemModel(i),p=f.getModel("emphasis");(0,sr.WO)(r,f),(0,sr.k5)(r,p.get("focus"),p.get("blurScope"),p.get("disabled"))}function ut(o,r,e){return _.map(o,function(i){return(i=i.slice())[r]=e.initBaseline,i})}const bt=y;var Ct=_.each;function Et(o){var r=function Dt(o){var r=[],e=[];return o.eachSeriesByType("boxplot",function(i){var s=i.getBaseAxis(),l=_.indexOf(e,s);l<0&&(e[l=e.length]=s,r[l]={axis:s,seriesModels:[]}),r[l].seriesModels.push(i)}),r}(o);Ct(r,function(e){var i=e.seriesModels;!i.length||(function zt(o){var f,r=o.axis,e=o.seriesModels,i=e.length,s=o.boxWidthList=[],l=o.boxOffsetList=[],c=[];if("category"===r.type)f=r.getBandWidth();else{var p=0;Ct(e,function(G){p=Math.max(p,G.getData().count())});var v=r.getExtent();f=Math.abs(v[1]-v[0])/p}Ct(e,function(G){var F=G.get("boxWidth");_.isArray(F)||(F=[F,F]),c.push([(0,Be.GM)(F[0],f)||0,(0,Be.GM)(F[1],f)||0])});var m=.8*f-2,x=m/i*.3,T=(m-x*(i-1))/i,O=T/2-m/2;Ct(e,function(G,F){l.push(O),O+=x+T,s.push(Math.min(Math.max(T,c[F][0]),c[F][1]))})}(e),Ct(i,function(s,l){!function $t(o,r,e){var i=o.coordinateSystem,s=o.getData(),l=e/2,c="horizontal"===o.get("layout")?0:1,f=1-c,p=["x","y"],v=s.mapDimension(p[c]),m=s.mapDimensionsAll(p[f]);if(!(null==v||m.length<5))for(var x=0;x<s.count();x++){var T=s.get(v,x),O=xt(T,m[2],x),G=xt(T,m[0],x),F=xt(T,m[1],x),Q=xt(T,m[3],x),ft=xt(T,m[4],x),Tt=[];At(Tt,F,!1),At(Tt,Q,!0),Tt.push(G,F,ft,Q),It(Tt,G),It(Tt,ft),It(Tt,O),s.setItemLayout(x,{initBaseline:O[f],ends:Tt})}function xt(Nt,Gt,Wt){var oe,jt=s.get(Gt,Wt),ee=[];return ee[c]=Nt,ee[f]=jt,isNaN(Nt)||isNaN(jt)?oe=[NaN,NaN]:(oe=i.dataToPoint(ee))[c]+=r,oe}function At(Nt,Gt,Wt){var jt=Gt.slice(),ee=Gt.slice();jt[c]+=l,ee[c]-=l,Wt?Nt.push(jt,ee):Nt.push(ee,jt)}function It(Nt,Gt){var Wt=Gt.slice(),jt=Gt.slice();Wt[c]-=l,jt[c]+=l,Nt.push(Wt,jt)}}(s,e.boxOffsetList[l],e.boxWidthList[l])}))})}var Jt=D(9723),qt=D(4143),me={type:"echarts:boxplot",transform:function(r){var e=r.upstream;e.sourceFormat!==qt.XD&&(0,Jt._y)("");var s=function ae(o,r){for(var e=[],i=[],s=(r=r||{}).boundIQR,l="none"===s||0===s,c=0;c<o.length;c++){var f=(0,Be.dt)(o[c].slice()),p=(0,Be.VR)(f,.25),v=(0,Be.VR)(f,.5),m=(0,Be.VR)(f,.75),x=f[0],T=f[f.length-1],O=(s??1.5)*(m-p),G=l?x:Math.max(x,p-O),F=l?T:Math.min(T,m+O),Q=r.itemNameFormatter,ft=(0,_.isFunction)(Q)?Q({value:c}):(0,_.isString)(Q)?Q.replace("{value}",c+""):c+"";e.push([ft,G,p,v,m,F]);for(var Tt=0;Tt<f.length;Tt++){var xt=f[Tt];(xt<G||xt>F)&&i.push([ft,xt])}}return{boxData:e,outliers:i}}(e.getRawData(),r.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:s.boxData},{data:s.outliers}]}},Ge=["color","borderColor"],Oe=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},r.prototype.incrementalPrepareRender=function(e,i,s){this._clear(),this._updateDrawMode(e)},r.prototype.incrementalRender=function(e,i,s,l){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,i):this._incrementalRenderNormal(e,i)},r.prototype.eachRendered=function(e){ur.traverseElements(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var i=e.pipelineContext.large;(null==this._isLargeDraw||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},r.prototype._renderNormal=function(e){var i=e.getData(),s=this._data,l=this.group,c=i.getLayout("isSimpleBox"),f=e.get("clip",!0),p=e.coordinateSystem,v=p.getArea&&p.getArea();this._data||l.removeAll(),i.diff(s).add(function(m){if(i.hasValue(m)){var x=i.getItemLayout(m);if(f&&lr(v,x))return;var T=Ke(x,0,!0);he.KZ(T,{shape:{points:x.ends}},e,m),vr(T,i,m,c),l.add(T),i.setItemGraphicEl(m,T)}}).update(function(m,x){var T=s.getItemGraphicEl(x);if(i.hasValue(m)){var O=i.getItemLayout(m);f&&lr(v,O)?l.remove(T):(T?(he.D(T,{shape:{points:O.ends}},e,m),(0,he.Zi)(T)):T=Ke(O),vr(T,i,m,c),l.add(T),i.setItemGraphicEl(m,T))}else l.remove(T)}).remove(function(m){var x=s.getItemGraphicEl(m);x&&l.remove(x)}).execute(),this._data=i},r.prototype._renderLarge=function(e){this._clear(),Wr(e,this.group);var i=e.get("clip",!0)?mo(e.coordinateSystem,!1,e):null;i?this.group.setClipPath(i):this.group.removeClipPath()},r.prototype._incrementalRenderNormal=function(e,i){for(var c,s=i.getData(),l=s.getLayout("isSimpleBox");null!=(c=e.next());){var p=Ke(s.getItemLayout(c));vr(p,s,c,l),p.incremental=!0,this.group.add(p),this._progressiveEls.push(p)}},r.prototype._incrementalRenderLarge=function(e,i){Wr(i,this.group,this._progressiveEls,!0)},r.prototype.remove=function(e){this._clear()},r.prototype._clear=function(){this.group.removeAll(),this._data=null},r.type="candlestick",r}(_r.Z),We=function o(){},ar=function(o){function r(e){var i=o.call(this,e)||this;return i.type="normalCandlestickBox",i}return(0,Re.ZT)(r,o),r.prototype.getDefaultShape=function(){return new We},r.prototype.buildPath=function(e,i){var s=i.points;this.__simpleBox?(e.moveTo(s[4][0],s[4][1]),e.lineTo(s[6][0],s[6][1])):(e.moveTo(s[0][0],s[0][1]),e.lineTo(s[1][0],s[1][1]),e.lineTo(s[2][0],s[2][1]),e.lineTo(s[3][0],s[3][1]),e.closePath(),e.moveTo(s[4][0],s[4][1]),e.lineTo(s[5][0],s[5][1]),e.moveTo(s[6][0],s[6][1]),e.lineTo(s[7][0],s[7][1]))},r}(mt.ZP);function Ke(o,r,e){var i=o.ends;return new ar({shape:{points:e?nr(i,o):i},z2:100})}function lr(o,r){for(var e=!0,i=0;i<r.ends.length;i++)if(o.contain(r.ends[i][0],r.ends[i][1])){e=!1;break}return e}function vr(o,r,e,i){var s=r.getItemModel(e);o.useStyle(r.getItemVisual(e,"style")),o.style.strokeNoScale=!0,o.__simpleBox=i,(0,sr.WO)(o,s)}function nr(o,r){return _.map(o,function(e){return(e=e.slice())[1]=r.initBaseline,e})}var Sr=function o(){},Er=function(o){function r(e){var i=o.call(this,e)||this;return i.type="largeCandlestickBox",i}return(0,Re.ZT)(r,o),r.prototype.getDefaultShape=function(){return new Sr},r.prototype.buildPath=function(e,i){for(var s=i.points,l=0;l<s.length;)if(this.__sign===s[l++]){var c=s[l++];e.moveTo(c,s[l++]),e.lineTo(c,s[l++])}else l+=3},r}(mt.ZP);function Wr(o,r,e,i){var s=o.getData(),l=s.getLayout("largePoints"),c=new Er({shape:{points:l},__sign:1,ignoreCoarsePointer:!0});r.add(c);var f=new Er({shape:{points:l},__sign:-1,ignoreCoarsePointer:!0});r.add(f);var p=new Er({shape:{points:l},__sign:0,ignoreCoarsePointer:!0});r.add(p),Tr(1,c,o),Tr(-1,f,o),Tr(0,p,o),i&&(c.incremental=!0,f.incremental=!0),e&&e.push(c,f)}function Tr(o,r,e,i){var s=e.get(["itemStyle",o>0?"borderColor":"borderColor0"])||e.get(["itemStyle",o>0?"color":"color0"]);0===o&&(s=e.get(["itemStyle","borderColorDoji"]));var l=e.getModel("itemStyle").getItemStyle(Ge);r.useStyle(l),r.style.fill=null,r.style.stroke=s}const wn=Oe;var Gr=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return(0,Re.ZT)(r,o),r.prototype.getShadowDim=function(){return"open"},r.prototype.brushSelector=function(e,i,s){var l=i.getItemLayout(e);return l&&s.rect(l.brushRect)},r.type="series.candlestick",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},r}(rr.Z);(0,_.mixin)(Gr,h,!0);const Kn=Gr;function Dn(o){!o||!_.isArray(o.series)||_.each(o.series,function(r){_.isObject(r)&&"k"===r.type&&(r.type="candlestick")})}var ri=["itemStyle","borderColor"],ni=["itemStyle","borderColor0"],xn=["itemStyle","borderColorDoji"],Zi=["itemStyle","color"],mi=["itemStyle","color0"];const ua={seriesType:"candlestick",plan:(0,an.Z)(),performRawSeries:!0,reset:function(o,r){function e(l,c){return c.get(l>0?Zi:mi)}function i(l,c){return c.get(0===l?xn:l>0?ri:ni)}if(!r.isSeriesFiltered(o))return!o.pipelineContext.large&&{progress:function(l,c){for(var f;null!=(f=l.next());){var p=c.getItemModel(f),v=c.getItemLayout(f).sign,m=p.getItemStyle();m.fill=e(v,p),m.stroke=i(v,p)||m.fill;var x=c.ensureUniqueItemVisual(f,"style");(0,_.extend)(x,m)}}}}};function Fi(o,r,e,i,s,l){return e>i?-1:e<i?1:l?0:r>0?o.get(s,r-1)<=i?1:-1:1}const ki={seriesType:"candlestick",plan:(0,an.Z)(),reset:function(o){var r=o.coordinateSystem,e=o.getData(),i=function jc(o,r){var i,e=o.getBaseAxis(),s="category"===e.type?e.getBandWidth():(i=e.getExtent(),Math.abs(i[1]-i[0])/r.count()),l=(0,Be.GM)((0,_.retrieve2)(o.get("barMaxWidth"),s),s),c=(0,Be.GM)((0,_.retrieve2)(o.get("barMinWidth"),1),s),f=o.get("barWidth");return null!=f?(0,Be.GM)(f,s):Math.max(Math.min(s/2,l),c)}(o,e),c=["x","y"],f=e.getDimensionIndex(e.mapDimension(c[0])),p=(0,_.map)(e.mapDimensionsAll(c[1]),e.getDimensionIndex,e),v=p[0],m=p[1],x=p[2],T=p[3];if(e.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(f<0||p.length<4))return{progress:o.pipelineContext.large?function G(F,Q){for(var xt,Nt,ft=(0,ea.o)(4*F.count),Tt=0,At=[],It=[],Gt=Q.getStore(),Wt=!!o.get(["itemStyle","borderColorDoji"]);null!=(Nt=F.next());){var jt=Gt.get(f,Nt),ee=Gt.get(v,Nt),oe=Gt.get(m,Nt),de=Gt.get(x,Nt),xe=Gt.get(T,Nt);isNaN(jt)||isNaN(de)||isNaN(xe)?(ft[Tt++]=NaN,Tt+=3):(ft[Tt++]=Fi(Gt,Nt,ee,oe,m,Wt),At[0]=jt,At[1]=de,xt=r.dataToPoint(At,null,It),ft[Tt++]=xt?xt[0]:NaN,ft[Tt++]=xt?xt[1]:NaN,At[1]=xe,xt=r.dataToPoint(At,null,It),ft[Tt++]=xt?xt[1]:NaN)}Q.setLayout("largePoints",ft)}:function O(F,Q){for(var ft,Tt=Q.getStore();null!=(ft=F.next());){var xt=Tt.get(f,ft),At=Tt.get(v,ft),It=Tt.get(m,ft),Nt=Tt.get(x,ft),Gt=Tt.get(T,ft),Wt=Math.min(At,It),jt=Math.max(At,It),ee=Je(Wt,xt),oe=Je(jt,xt),de=Je(Nt,xt),xe=Je(Gt,xt),be=[];$e(be,oe,0),$e(be,ee,1),be.push(wr(xe),wr(oe),wr(de),wr(ee));var ke=!!Q.getItemModel(ft).get(["itemStyle","borderColorDoji"]);Q.setItemLayout(ft,{sign:Fi(Tt,ft,At,It,m,ke),initBaseline:At>It?oe[1]:ee[1],ends:be,brushRect:(Dr=Nt,cn=Gt,ln=xt,rn=void 0,Pn=void 0,rn=Je(Dr,ln),Pn=Je(cn,ln),rn[0]-=i/2,Pn[0]-=i/2,{x:rn[0],y:rn[1],width:i,height:Pn[1]-rn[1]})})}var Dr,cn,ln,rn,Pn;function Je(Dr,cn){var ln=[];return ln[0]=cn,ln[1]=Dr,isNaN(cn)||isNaN(Dr)?[NaN,NaN]:r.dataToPoint(ln)}function $e(Dr,cn,ln){var rn=cn.slice(),Pn=cn.slice();rn[0]=(0,ur.subPixelOptimize)(rn[0]+i/2,1,!1),Pn[0]=(0,ur.subPixelOptimize)(Pn[0]-i/2,1,!0),ln?Dr.push(rn,Pn):Dr.push(Pn,rn)}function wr(Dr){return Dr[0]=(0,ur.subPixelOptimize)(Dr[0],1),Dr}}}}};function ca(o,r){var e=r.rippleEffectColor||r.color;o.eachChild(function(i){i.attr({z:r.z,zlevel:r.zlevel,style:{stroke:"stroke"===r.brushType?e:null,fill:"fill"===r.brushType?e:null}})})}const cS=function(o){function r(e,i){var s=o.call(this)||this,l=new xa(e,i),c=new pr.Z;return s.add(l),s.add(c),s.updateData(e,i),s}return(0,Re.ZT)(r,o),r.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},r.prototype.startEffectAnimation=function(e){for(var i=e.symbolType,s=e.color,l=e.rippleNumber,c=this.childAt(1),f=0;f<l;f++){var p=(0,Tn.th)(i,-1,-1,2,2,s);p.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var v=-f/l*e.period+e.effectOffset;p.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(v).start(),p.animateStyle(!0).when(e.period,{opacity:0}).delay(v).start(),c.add(p)}ca(c,e)},r.prototype.updateEffectAnimation=function(e){for(var i=this._effectCfg,s=this.childAt(1),l=["symbolType","period","rippleScale","rippleNumber"],c=0;c<l.length;c++){var f=l[c];if(i[f]!==e[f])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}ca(s,e)},r.prototype.highlight=function(){(0,sr.fD)(this)},r.prototype.downplay=function(){(0,sr.Mh)(this)},r.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},r.prototype.updateData=function(e,i){var s=this,l=e.hostModel;this.childAt(0).updateData(e,i);var c=this.childAt(1),f=e.getItemModel(i),p=e.getItemVisual(i,"symbol"),v=(0,Tn.zp)(e.getItemVisual(i,"symbolSize")),m=e.getItemVisual(i,"style"),x=m&&m.fill,T=f.getModel("emphasis");c.setScale(v),c.traverse(function(Q){Q.setStyle("fill",x)});var O=(0,Tn.Cq)(e.getItemVisual(i,"symbolOffset"),v);O&&(c.x=O[0],c.y=O[1]);var G=e.getItemVisual(i,"symbolRotate");c.rotation=(G||0)*Math.PI/180||0;var F={};F.showEffectOn=l.get("showEffectOn"),F.rippleScale=f.get(["rippleEffect","scale"]),F.brushType=f.get(["rippleEffect","brushType"]),F.period=1e3*f.get(["rippleEffect","period"]),F.effectOffset=i/e.count(),F.z=l.getShallow("z")||0,F.zlevel=l.getShallow("zlevel")||0,F.symbolType=p,F.color=x,F.rippleEffectColor=f.get(["rippleEffect","color"]),F.rippleNumber=f.get(["rippleEffect","number"]),"render"===F.showEffectOn?(this._effectCfg?this.updateEffectAnimation(F):this.startEffectAnimation(F),this._effectCfg=F):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(Q){"emphasis"===Q?"render"!==F.showEffectOn&&s.startEffectAnimation(F):"normal"===Q&&"render"!==F.showEffectOn&&s.stopEffectAnimation()}),this._effectCfg=F,(0,sr.k5)(this,T.get("focus"),T.get("blurScope"),T.get("disabled"))},r.prototype.fadeOut=function(e){e&&e()},r}(pr.Z),fS=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(){this._symbolDraw=new ka(cS)},r.prototype.render=function(e,i,s){var l=e.getData(),c=this._symbolDraw;c.updateData(l,{clipShape:this._getClipShape(e)}),this.group.add(c.group)},r.prototype._getClipShape=function(e){var i=e.coordinateSystem,s=i&&i.getArea&&i.getArea();return e.get("clip",!0)?s:null},r.prototype.updateTransform=function(e,i,s){var l=e.getData();this.group.dirty();var c=oo("").reset(e,i,s);c.progress&&c.progress({start:0,end:l.count(),count:l.count()},l),this._symbolDraw.updateLayout()},r.prototype._updateGroupTransform=function(e){var i=e.coordinateSystem;i&&i.getRoamTransform&&(this.group.transform=In.clone(i.getRoamTransform()),this.group.decomposeTransform())},r.prototype.remove=function(e,i){this._symbolDraw&&this._symbolDraw.remove(!0)},r.type="effectScatter",r}(_r.Z),pS=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e,i){return(0,Fa.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.brushSelector=function(e,i,s){return s.point(i.getItemLayout(e))},r.type="series.effectScatter",r.dependencies=["grid","polar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},r}(rr.Z),Gm=function(o){function r(e,i,s){var l=o.call(this)||this;return l.add(l.createLine(e,i,s)),l._updateEffectSymbol(e,i),l}return(0,Re.ZT)(r,o),r.prototype.createLine=function(e,i,s){return new Ud(e,i,s)},r.prototype._updateEffectSymbol=function(e,i){var l=e.getItemModel(i).getModel("effect"),c=l.get("symbolSize"),f=l.get("symbol");_.isArray(c)||(c=[c,c]);var p=e.getItemVisual(i,"style"),v=l.get("color")||p&&p.stroke,m=this.childAt(1);this._symbolType!==f&&(this.remove(m),(m=(0,Tn.th)(f,-.5,-.5,1,1,v)).z2=100,m.culling=!0,this.add(m)),m&&(m.setStyle("shadowColor",v),m.setStyle(l.getItemStyle(["color"])),m.scaleX=c[0],m.scaleY=c[1],m.setColor(v),this._symbolType=f,this._symbolScale=c,this._updateEffectAnimation(e,l,i))},r.prototype._updateEffectAnimation=function(e,i,s){var l=this.childAt(1);if(l){var c=e.getItemLayout(s),f=1e3*i.get("period"),p=i.get("loop"),v=i.get("roundTrip"),m=i.get("constantSpeed"),x=_.retrieve(i.get("delay"),function(O){return O/e.count()*f/3});if(l.ignore=!0,this._updateAnimationPoints(l,c),m>0&&(f=this._getLineLength(l)/m*1e3),f!==this._period||p!==this._loop||v!==this._roundTrip){l.stopAnimation();var T=void 0;T=_.isFunction(x)?x(s):x,l.__t>0&&(T=-f*l.__t),this._animateSymbol(l,f,T,p,v)}this._period=f,this._loop=p,this._roundTrip=v}},r.prototype._animateSymbol=function(e,i,s,l,c){if(i>0){e.__t=0;var f=this,p=e.animate("",l).when(c?2*i:i,{__t:c?2:1}).delay(s).during(function(){f._updateSymbolPosition(e)});l||p.done(function(){f.remove(e)}),p.start()}},r.prototype._getLineLength=function(e){return Ur.dist(e.__p1,e.__cp1)+Ur.dist(e.__cp1,e.__p2)},r.prototype._updateAnimationPoints=function(e,i){e.__p1=i[0],e.__p2=i[1],e.__cp1=i[2]||[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]},r.prototype.updateData=function(e,i,s){this.childAt(0).updateData(e,i,s),this._updateEffectSymbol(e,i)},r.prototype._updateSymbolPosition=function(e){var i=e.__p1,s=e.__p2,l=e.__cp1,c=e.__t<1?e.__t:2-e.__t,f=[e.x,e.y],p=f.slice(),v=kr.Zm,m=kr.AZ;f[0]=v(i[0],l[0],s[0],c),f[1]=v(i[1],l[1],s[1],c);var x=e.__t<1?m(i[0],l[0],s[0],c):m(s[0],l[0],i[0],1-c),T=e.__t<1?m(i[1],l[1],s[1],c):m(s[1],l[1],i[1],1-c);e.rotation=-Math.atan2(T,x)-Math.PI/2,("line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)&&(void 0!==e.__lastT&&e.__lastT<e.__t?(e.scaleY=1.05*Ur.dist(p,f),1===c&&(f[0]=p[0]+(f[0]-p[0])/2,f[1]=p[1]+(f[1]-p[1])/2)):e.scaleY=1===e.__lastT?2*Ur.dist(i,f):this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=f[0],e.y=f[1]},r.prototype.updateLayout=function(e,i){this.childAt(0).updateLayout(e,i);var s=e.getItemModel(i).getModel("effect");this._updateEffectAnimation(e,s,i)},r}(pr.Z),Zm=function(o){function r(e,i,s){var l=o.call(this)||this;return l._createPolyline(e,i,s),l}return(0,Re.ZT)(r,o),r.prototype._createPolyline=function(e,i,s){var l=e.getItemLayout(i),c=new ia.Z({shape:{points:l}});this.add(c),this._updateCommonStl(e,i,s)},r.prototype.updateData=function(e,i,s){var l=e.hostModel,c=this.childAt(0),f={shape:{points:e.getItemLayout(i)}};he.D(c,f,l,i),this._updateCommonStl(e,i,s)},r.prototype._updateCommonStl=function(e,i,s){var l=this.childAt(0),c=e.getItemModel(i),f=s&&s.emphasisLineStyle,p=s&&s.focus,v=s&&s.blurScope,m=s&&s.emphasisDisabled;if(!s||e.hasItemOption){var x=c.getModel("emphasis");f=x.getModel("lineStyle").getLineStyle(),m=x.get("disabled"),p=x.get("focus"),v=x.get("blurScope")}l.useStyle(e.getItemVisual(i,"style")),l.style.fill=null,l.style.strokeNoScale=!0,l.ensureState("emphasis").style=f,(0,sr.k5)(this,p,v,m)},r.prototype.updateLayout=function(e,i){this.childAt(0).setShape("points",e.getItemLayout(i))},r}(pr.Z),yS=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return(0,Re.ZT)(r,o),r.prototype.createLine=function(e,i,s){return new Zm(e,i,s)},r.prototype._updateAnimationPoints=function(e,i){this._points=i;for(var s=[0],l=0,c=1;c<i.length;c++)l+=Ur.dist(i[c-1],i[c]),s.push(l);if(0!==l){for(c=0;c<s.length;c++)s[c]/=l;this._offsets=s,this._length=l}else this._length=0},r.prototype._getLineLength=function(){return this._length},r.prototype._updateSymbolPosition=function(e){var i=e.__t<1?e.__t:2-e.__t,s=this._points,l=this._offsets,c=s.length;if(l){var p,f=this._lastFrame;if(i<this._lastFramePercent){for(p=Math.min(f+1,c-1);p>=0&&!(l[p]<=i);p--);p=Math.min(p,c-2)}else{for(p=f;p<c&&!(l[p]>i);p++);p=Math.min(p-1,c-2)}var m=(i-l[p])/(l[p+1]-l[p]),x=s[p],T=s[p+1];e.x=x[0]*(1-m)+m*T[0],e.y=x[1]*(1-m)+m*T[1],e.rotation=-Math.atan2(e.__t<1?T[1]-x[1]:x[1]-T[1],e.__t<1?T[0]-x[0]:x[0]-T[0])-Math.PI/2,this._lastFrame=p,this._lastFramePercent=i,e.ignore=!1}},r}(Gm);var Fm=D(31),xS=D(7538),SS=function o(){this.polyline=!1,this.curveness=0,this.segs=[]},TS=function(o){function r(e){var i=o.call(this,e)||this;return i._off=0,i.hoverDataIdx=-1,i}return(0,Re.ZT)(r,o),r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new SS},r.prototype.buildPath=function(e,i){var c,s=i.segs,l=i.curveness;if(i.polyline)for(c=this._off;c<s.length;){var f=s[c++];if(f>0){e.moveTo(s[c++],s[c++]);for(var p=1;p<f;p++)e.lineTo(s[c++],s[c++])}}else for(c=this._off;c<s.length;){var v=s[c++],m=s[c++],x=s[c++],T=s[c++];e.moveTo(v,m),l>0?e.quadraticCurveTo((v+x)/2-(m-T)*l,(m+T)/2-(x-v)*l,x,T):e.lineTo(x,T)}this.incremental&&(this._off=c,this.notClear=!0)},r.prototype.findDataIndex=function(e,i){var s=this.shape,l=s.segs,c=s.curveness,f=this.style.lineWidth;if(s.polyline)for(var p=0,v=0;v<l.length;){var m=l[v++];if(m>0)for(var x=l[v++],T=l[v++],O=1;O<m;O++){var G=l[v++],F=l[v++];if(Fm.m(x,T,G,F,f,e,i))return p}p++}else for(p=0,v=0;v<l.length;){if(x=l[v++],T=l[v++],G=l[v++],F=l[v++],c>0){if(xS.m(x,T,(x+G)/2-(T-F)*c,(T+F)/2-(G-x)*c,G,F,f,e,i))return p}else if(Fm.m(x,T,G,F,f,e,i))return p;p++}return-1},r.prototype.contain=function(e,i){var s=this.transformCoordToLocal(e,i);return this.getBoundingRect().contain(e=s[0],i=s[1])?(this.hoverDataIdx=this.findDataIndex(e,i))>=0:(this.hoverDataIdx=-1,!1)},r.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var s=this.shape.segs,l=1/0,c=1/0,f=-1/0,p=-1/0,v=0;v<s.length;){var m=s[v++],x=s[v++];l=Math.min(m,l),f=Math.max(m,f),c=Math.min(x,c),p=Math.max(x,p)}e=this._rect=new bn.Z(l,c,f,p)}return e},r}(mt.ZP);const MS=function(){function o(){this.group=new pr.Z}return o.prototype.updateData=function(r){this._clear();var e=this._create();e.setShape({segs:r.getLayout("linesPoints")}),this._setCommon(e,r)},o.prototype.incrementalPrepareUpdate=function(r){this.group.removeAll(),this._clear()},o.prototype.incrementalUpdate=function(r,e){var i=this._newAdded[0],s=e.getLayout("linesPoints"),l=i&&i.shape.segs;if(l&&l.length<2e4){var c=l.length,f=new Float32Array(c+s.length);f.set(l),f.set(s,c),i.setShape({segs:f})}else{this._newAdded=[];var p=this._create();p.incremental=!0,p.setShape({segs:s}),this._setCommon(p,e),p.__startIndex=r.start}},o.prototype.remove=function(){this._clear()},o.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},o.prototype._create=function(){var r=new TS({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(r),this.group.add(r),r},o.prototype._setCommon=function(r,e,i){var s=e.hostModel;r.setShape({polyline:s.get("polyline"),curveness:s.get(["lineStyle","curveness"])}),r.useStyle(s.getModel("lineStyle").getLineStyle()),r.style.strokeNoScale=!0;var l=e.getVisual("style");l&&l.stroke&&r.setStyle("stroke",l.stroke),r.setStyle("fill",null);var c=(0,Fr.A)(r);c.seriesIndex=s.seriesIndex,r.on("mousemove",function(f){c.dataIndex=null;var p=r.hoverDataIdx;p>0&&(c.dataIndex=p+r.__startIndex)})},o.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},o}(),km={seriesType:"lines",plan:(0,an.Z)(),reset:function(o){var r=o.coordinateSystem;if(r){var e=o.get("polyline"),i=o.pipelineContext.large;return{progress:function(s,l){var c=[];if(i){var f=void 0,p=s.end-s.start;if(e){for(var v=0,m=s.start;m<s.end;m++)v+=o.getLineCoordsCount(m);f=new Float32Array(p+2*v)}else f=new Float32Array(4*p);var x=0,T=[];for(m=s.start;m<s.end;m++){var O=o.getLineCoords(m,c);e&&(f[x++]=O);for(var G=0;G<O;G++)T=r.dataToPoint(c[G],!1,T),f[x++]=T[0],f[x++]=T[1]}l.setLayout("linesPoints",f)}else for(m=s.start;m<s.end;m++){var F=l.getItemModel(m),Q=(O=o.getLineCoords(m,c),[]);if(e)for(var ft=0;ft<O;ft++)Q.push(r.dataToPoint(c[ft]));else{Q[0]=r.dataToPoint(c[0]),Q[1]=r.dataToPoint(c[1]);var Tt=F.get(["lineStyle","curveness"]);+Tt&&(Q[2]=[(Q[0][0]+Q[1][0])/2-(Q[0][1]-Q[1][1])*Tt,(Q[0][1]+Q[1][1])/2-(Q[1][0]-Q[0][0])*Tt])}l.setItemLayout(m,Q)}}}}}},AS=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l=e.getData(),c=this._updateLineDraw(l,e),f=e.get("zlevel"),p=e.get(["effect","trailLength"]),v=s.getZr(),m="svg"===v.painter.getType();m||v.painter.getLayer(f).clear(!0),null!=this._lastZlevel&&!m&&v.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&p>0&&(m||v.configLayer(f,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(p/10+.9,1),0)})),c.updateData(l);var x=e.get("clip",!0)&&mo(e.coordinateSystem,!1,e);x?this.group.setClipPath(x):this.group.removeClipPath(),this._lastZlevel=f,this._finished=!0},r.prototype.incrementalPrepareRender=function(e,i,s){var l=e.getData();this._updateLineDraw(l,e).incrementalPrepareUpdate(l),this._clearLayer(s),this._finished=!1},r.prototype.incrementalRender=function(e,i,s){this._lineDraw.incrementalUpdate(e,i.getData()),this._finished=e.end===i.getData().count()},r.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},r.prototype.updateTransform=function(e,i,s){var l=e.getData(),c=e.pipelineContext;if(!this._finished||c.large||c.progressiveRender)return{update:!0};var f=km.reset(e,i,s);f.progress&&f.progress({start:0,end:l.count(),count:l.count()},l),this._lineDraw.updateLayout(),this._clearLayer(s)},r.prototype._updateLineDraw=function(e,i){var s=this._lineDraw,l=this._showEffect(i),c=!!i.get("polyline"),p=i.pipelineContext.large;return(!s||l!==this._hasEffet||c!==this._isPolyline||p!==this._isLargeDraw)&&(s&&s.remove(),s=this._lineDraw=p?new MS:new zc(c?l?yS:Zm:l?Gm:Ud),this._hasEffet=l,this._isPolyline=c,this._isLargeDraw=p),this.group.add(s.group),s},r.prototype._showEffect=function(e){return!!e.get(["effect","show"])},r.prototype._clearLayer=function(e){var i=e.getZr();"svg"!==i.painter.getType()&&null!=this._lastZlevel&&i.painter.getLayer(this._lastZlevel).clear(!0)},r.prototype.remove=function(e,i){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(i)},r.prototype.dispose=function(e,i){this.remove(e,i)},r.type="lines",r}(_r.Z);var OS=typeof Uint32Array>"u"?Array:Uint32Array,ES=typeof Float64Array>"u"?Array:Float64Array;function zm(o){var r=o.data;r&&r[0]&&r[0][0]&&r[0][0].coord&&(o.data=(0,_.map)(r,function(e){var s={coords:[e[0].coord,e[1].coord]};return e[0].name&&(s.fromName=e[0].name),e[1].name&&(s.toName=e[1].name),(0,_.mergeAll)([s,e[0],e[1]])}))}const DS=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return(0,Re.ZT)(r,o),r.prototype.init=function(e){e.data=e.data||[],zm(e);var i=this._processFlatCoordsArray(e.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(e.data=new Float32Array(i.count)),o.prototype.init.apply(this,arguments)},r.prototype.mergeOption=function(e){if(zm(e),e.data){var i=this._processFlatCoordsArray(e.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(e.data=new Float32Array(i.count))}o.prototype.mergeOption.apply(this,arguments)},r.prototype.appendData=function(e){var i=this._processFlatCoordsArray(e.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=(0,_.concatArray)(this._flatCoords,i.flatCoords),this._flatCoordsOffset=(0,_.concatArray)(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),e.data=new Float32Array(i.count)),this.getRawData().appendData(e.data)},r.prototype._getCoordsFromItemModel=function(e){var i=this.getData().getItemModel(e);return i.option instanceof Array?i.option:i.getShallow("coords")},r.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},r.prototype.getLineCoords=function(e,i){if(this._flatCoordsOffset){for(var s=this._flatCoordsOffset[2*e],l=this._flatCoordsOffset[2*e+1],c=0;c<l;c++)i[c]=i[c]||[],i[c][0]=this._flatCoords[s+2*c],i[c][1]=this._flatCoords[s+2*c+1];return l}var f=this._getCoordsFromItemModel(e);for(c=0;c<f.length;c++)i[c]=i[c]||[],i[c][0]=f[c][0],i[c][1]=f[c][1];return f.length},r.prototype._processFlatCoordsArray=function(e){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),(0,_.isNumber)(e[0])){for(var s=e.length,l=new OS(s),c=new ES(s),f=0,p=0,v=0,m=0;m<s;){v++;var x=e[m++];l[p++]=f+i,l[p++]=x;for(var T=0;T<x;T++){var O=e[m++],G=e[m++];c[f++]=O,c[f++]=G}}return{flatCoordsOffset:new Uint32Array(l.buffer,0,p),flatCoords:c,count:v}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},r.prototype.getInitialData=function(e,i){var l=new Ie.Z(["value"],this);return l.hasItemOption=!1,l.initData(e.data,[],function(c,f,p,v){if(c instanceof Array)return NaN;l.hasItemOption=!0;var m=c.value;return null!=m?m instanceof Array?m[v]:m:void 0}),l},r.prototype.formatTooltip=function(e,i,s){var c=this.getData().getItemModel(e),f=c.get("name");if(f)return f;var p=c.get("fromName"),v=c.get("toName"),m=[];return null!=p&&m.push(p),null!=v&&m.push(v),(0,ii.TX)("nameValue",{name:m.join(" > ")})},r.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},r.prototype.getProgressive=function(){return this.option.progressive??(this.option.large?1e4:this.get("progressive"))},r.prototype.getProgressiveThreshold=function(){return this.option.progressiveThreshold??(this.option.large?2e4:this.get("progressiveThreshold"))},r.prototype.getZLevelKey=function(){var e=this.getModel("effect"),i=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&i>0?i+"":""},r.type="series.lines",r.dependencies=["grid","polar","geo","calendar"],r.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},r}(rr.Z);function Fv(o){return o instanceof Array||(o=[o,o]),o}const NS={seriesType:"lines",reset:function(o){var r=Fv(o.get("symbol")),e=Fv(o.get("symbolSize")),i=o.getData();return i.setVisual("fromSymbol",r&&r[0]),i.setVisual("toSymbol",r&&r[1]),i.setVisual("fromSymbolSize",e&&e[0]),i.setVisual("toSymbolSize",e&&e[1]),{dataEach:i.hasItemOption?function s(l,c){var f=l.getItemModel(c),p=Fv(f.getShallow("symbol",!0)),v=Fv(f.getShallow("symbolSize",!0));p[0]&&l.setItemVisual(c,"fromSymbol",p[0]),p[1]&&l.setItemVisual(c,"toSymbol",p[1]),v[0]&&l.setItemVisual(c,"fromSymbolSize",v[0]),v[1]&&l.setItemVisual(c,"toSymbolSize",v[1])}:null}}},GS=function(){function o(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var r=De.qW.createCanvas();this.canvas=r}return o.prototype.update=function(r,e,i,s,l,c){var f=this._getBrush(),p=this._getGradient(l,"inRange"),v=this._getGradient(l,"outOfRange"),m=this.pointSize+this.blurSize,x=this.canvas,T=x.getContext("2d"),O=r.length;x.width=e,x.height=i;for(var G=0;G<O;++G){var F=r[G],Q=F[0],ft=F[1],xt=s(F[2]);T.globalAlpha=xt,T.drawImage(f,Q-m,ft-m)}if(!x.width||!x.height)return x;for(var At=T.getImageData(0,0,x.width,x.height),It=At.data,Nt=0,Gt=It.length,Wt=this.minOpacity,ee=this.maxOpacity-Wt;Nt<Gt;){xt=It[Nt+3]/256;var oe=4*Math.floor(255*xt);if(xt>0){var de=c(xt)?p:v;xt>0&&(xt=xt*ee+Wt),It[Nt++]=de[oe],It[Nt++]=de[oe+1],It[Nt++]=de[oe+2],It[Nt++]=de[oe+3]*xt*256}else Nt+=4}return T.putImageData(At,0,0),x},o.prototype._getBrush=function(){var r=this._brushCanvas||(this._brushCanvas=De.qW.createCanvas()),e=this.pointSize+this.blurSize,i=2*e;r.width=i,r.height=i;var s=r.getContext("2d");return s.clearRect(0,0,i,i),s.shadowOffsetX=i,s.shadowBlur=this.blurSize,s.shadowColor="#000",s.beginPath(),s.arc(-e,e,this.pointSize,0,2*Math.PI,!0),s.closePath(),s.fill(),r},o.prototype._getGradient=function(r,e){for(var i=this._gradientPixels,s=i[e]||(i[e]=new Uint8ClampedArray(1024)),l=[0,0,0,0],c=0,f=0;f<256;f++)r[e](f/255,!0,l),s[c++]=l[0],s[c++]=l[1],s[c++]=l[2],s[c++]=l[3];return s},o}();function Um(o){var r=o.dimensions;return"lng"===r[0]&&"lat"===r[1]}const zS=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l;i.eachComponent("visualMap",function(f){f.eachTargetSeries(function(p){p===e&&(l=f)})}),this._progressiveEls=null,this.group.removeAll();var c=e.coordinateSystem;"cartesian2d"===c.type||"calendar"===c.type?this._renderOnCartesianAndCalendar(e,s,0,e.getData().count()):Um(c)&&this._renderOnGeo(c,e,l,s)},r.prototype.incrementalPrepareRender=function(e,i,s){this.group.removeAll()},r.prototype.incrementalRender=function(e,i,s,l){var c=i.coordinateSystem;c&&(Um(c)?this.render(i,s,l):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(i,l,e.start,e.end,!0)))},r.prototype.eachRendered=function(e){ur.traverseElements(this._progressiveEls||this.group,e)},r.prototype._renderOnCartesianAndCalendar=function(e,i,s,l,c){var v,m,x,T,f=e.coordinateSystem,p=Oa(f,"cartesian2d");if(p){var O=f.getAxis("x"),G=f.getAxis("y");v=O.getBandWidth()+.5,m=G.getBandWidth()+.5,x=O.scale.getExtent(),T=G.scale.getExtent()}for(var F=this.group,Q=e.getData(),ft=e.getModel(["emphasis","itemStyle"]).getItemStyle(),Tt=e.getModel(["blur","itemStyle"]).getItemStyle(),xt=e.getModel(["select","itemStyle"]).getItemStyle(),At=e.get(["itemStyle","borderRadius"]),It=(0,Or.k3)(e),Nt=e.getModel("emphasis"),Gt=Nt.get("focus"),Wt=Nt.get("blurScope"),jt=Nt.get("disabled"),ee=p?[Q.mapDimension("x"),Q.mapDimension("y"),Q.mapDimension("value")]:[Q.mapDimension("time"),Q.mapDimension("value")],oe=s;oe<l;oe++){var de=void 0,xe=Q.getItemVisual(oe,"style");if(p){var be=Q.get(ee[0],oe),Ae=Q.get(ee[1],oe);if(isNaN(Q.get(ee[2],oe))||isNaN(be)||isNaN(Ae)||be<x[0]||be>x[1]||Ae<T[0]||Ae>T[1])continue;var ke=f.dataToPoint([be,Ae]);de=new Br.Z({shape:{x:ke[0]-v/2,y:ke[1]-m/2,width:v,height:m},style:xe})}else{if(isNaN(Q.get(ee[1],oe)))continue;de=new Br.Z({z2:1,shape:f.dataToRect([Q.get(ee[0],oe)]).contentShape,style:xe})}if(Q.hasItemOption){var Je=Q.getItemModel(oe),$e=Je.getModel("emphasis");ft=$e.getModel("itemStyle").getItemStyle(),Tt=Je.getModel(["blur","itemStyle"]).getItemStyle(),xt=Je.getModel(["select","itemStyle"]).getItemStyle(),At=Je.get(["itemStyle","borderRadius"]),Gt=$e.get("focus"),Wt=$e.get("blurScope"),jt=$e.get("disabled"),It=(0,Or.k3)(Je)}de.shape.r=At;var fr=e.getRawValue(oe),wr="-";fr&&null!=fr[2]&&(wr=fr[2]+""),(0,Or.ni)(de,It,{labelFetcher:e,labelDataIndex:oe,defaultOpacity:xe.opacity,defaultText:wr}),de.ensureState("emphasis").style=ft,de.ensureState("blur").style=Tt,de.ensureState("select").style=xt,(0,sr.k5)(de,Gt,Wt,jt),de.incremental=c,c&&(de.states.emphasis.hoverLayer=!0),F.add(de),Q.setItemGraphicEl(oe,de),this._progressiveEls&&this._progressiveEls.push(de)}},r.prototype._renderOnGeo=function(e,i,s,l){var c=s.targetVisuals.inRange,f=s.targetVisuals.outOfRange,p=i.getData(),v=this._hmLayer||this._hmLayer||new GS;v.blurSize=i.get("blurSize"),v.pointSize=i.get("pointSize"),v.minOpacity=i.get("minOpacity"),v.maxOpacity=i.get("maxOpacity");var m=e.getViewRect().clone(),x=e.getRoamTransform();m.applyTransform(x);var T=Math.max(m.x,0),O=Math.max(m.y,0),G=Math.min(m.width+m.x,l.getWidth()),F=Math.min(m.height+m.y,l.getHeight()),Q=G-T,ft=F-O,Tt=[p.mapDimension("lng"),p.mapDimension("lat"),p.mapDimension("value")],xt=p.mapArray(Tt,function(Gt,Wt,jt){var ee=e.dataToPoint([Gt,Wt]);return ee[0]-=T,ee[1]-=O,ee.push(jt),ee}),At=s.getExtent(),It="visualMap.continuous"===s.type?function FS(o,r){var e=o[1]-o[0];return r=[(r[0]-o[0])/e,(r[1]-o[0])/e],function(i){return i>=r[0]&&i<=r[1]}}(At,s.option.range):function ZS(o,r,e){var i=o[1]-o[0],s=(r=_.map(r,function(c){return{interval:[(c.interval[0]-o[0])/i,(c.interval[1]-o[0])/i]}})).length,l=0;return function(c){var f;for(f=l;f<s;f++)if((p=r[f].interval)[0]<=c&&c<=p[1]){l=f;break}if(f===s)for(f=l-1;f>=0;f--){var p;if((p=r[f].interval)[0]<=c&&c<=p[1]){l=f;break}}return f>=0&&f<s&&e[f]}}(At,s.getPieceList(),s.option.selected);v.update(xt,Q,ft,c.color.getNormalizer(),{inRange:c.color.getColorMapper(),outOfRange:f.color.getColorMapper()},It);var Nt=new gt.ZP({style:{width:Q,height:ft,x:T,y:O,image:v.canvas},silent:!0});this.group.add(Nt)},r.type="heatmap",r}(_r.Z),HS=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e,i){return(0,Fa.Z)(null,this,{generateCoord:"value"})},r.prototype.preventIncremental=function(){var e=lv.Z.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},r.type="series.heatmap",r.dependencies=["grid","geo","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},r}(rr.Z);var WS=["itemStyle","borderWidth"],Hm=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],d0=new os.Z;function Vm(o,r,e,i){var s=o.getItemLayout(r),l=e.get("symbolRepeat"),c=e.get("symbolClip"),f=e.get("symbolPosition")||"start",v=(e.get("symbolRotate")||0)*Math.PI/180||0,m=e.get("symbolPatternSize")||2,x=e.isAnimationEnabled(),T={dataIndex:r,layout:s,itemModel:e,symbolType:o.getItemVisual(r,"symbol")||"circle",style:o.getItemVisual(r,"style"),symbolClip:c,symbolRepeat:l,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:m,rotation:v,animationModel:x?e:null,hoverScale:x&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};(function XS(o,r,e,i,s){var m,l=i.valueDim,c=o.get("symbolBoundingData"),f=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),p=f.toGlobalCoord(f.dataToCoord(0)),v=1-+(e[l.wh]<=0);if(_.isArray(c)){var x=[p0(f,c[0])-p,p0(f,c[1])-p];x[1]<x[0]&&x.reverse(),m=x[v]}else m=null!=c?p0(f,c)-p:r?i.coordSysExtent[l.index][v]-p:e[l.wh];s.boundingLength=m,r&&(s.repeatCutLength=e[l.wh]),s.pxSign=m>0?1:-1})(e,l,s,i,T),function YS(o,r,e,i,s,l,c,f,p,v){var G,m=p.valueDim,x=p.categoryDim,T=Math.abs(e[x.wh]),O=o.getItemVisual(r,"symbolSize");(G=_.isArray(O)?O.slice():null==O?["100%","100%"]:[O,O])[x.index]=(0,Be.GM)(G[x.index],T),G[m.index]=(0,Be.GM)(G[m.index],i?T:Math.abs(l)),v.symbolSize=G,(v.symbolScale=[G[0]/f,G[1]/f])[m.index]*=(p.isHorizontal?-1:1)*c}(o,r,s,l,0,T.boundingLength,T.pxSign,m,i,T),function KS(o,r,e,i,s){var l=o.get(WS)||0;l&&(d0.attr({scaleX:r[0],scaleY:r[1],rotation:e}),d0.updateTransform(),l/=d0.getLineScale(),l*=r[i.valueDim.index]),s.valueLineWidth=l||0}(e,T.symbolScale,v,i,T);var O=T.symbolSize,G=(0,Tn.Cq)(e.get("symbolOffset"),O);return function jS(o,r,e,i,s,l,c,f,p,v,m,x){var T=m.categoryDim,O=m.valueDim,G=x.pxSign,F=Math.max(r[O.index]+f,0),Q=F;if(i){var ft=Math.abs(p),Tt=_.retrieve(o.get("symbolMargin"),"15%")+"",xt=!1;Tt.lastIndexOf("!")===Tt.length-1&&(xt=!0,Tt=Tt.slice(0,Tt.length-1));var At=(0,Be.GM)(Tt,r[O.index]),It=Math.max(F+2*At,0),Nt=xt?0:2*At,Gt=(0,Be.kE)(i),Wt=Gt?i:e1((ft+Nt)/It);It=F+2*(At=(ft-Wt*F)/2/(xt?Wt:Math.max(Wt-1,1))),Nt=xt?0:2*At,!Gt&&"fixed"!==i&&(Wt=v?e1((Math.abs(v)+Nt)/It):0),Q=Wt*It-Nt,x.repeatTimes=Wt,x.symbolMargin=At}var ee=G*(Q/2),oe=x.pathPosition=[];oe[T.index]=e[T.wh]/2,oe[O.index]="start"===c?ee:"end"===c?p-ee:p/2,l&&(oe[0]+=l[0],oe[1]+=l[1]);var de=x.bundlePosition=[];de[T.index]=e[T.xy],de[O.index]=e[O.xy];var xe=x.barRectShape=_.extend({},e);xe[O.wh]=G*Math.max(Math.abs(e[O.wh]),Math.abs(oe[O.index]+ee)),xe[T.wh]=e[T.wh];var be=x.clipShape={};be[T.xy]=-e[T.xy],be[T.wh]=m.ecSize[T.wh],be[O.xy]=0,be[O.wh]=e[O.wh]}(e,O,s,l,0,G,f,T.valueLineWidth,T.boundingLength,T.repeatCutLength,i,T),T}function p0(o,r){return o.toGlobalCoord(o.dataToCoord(o.scale.parse(r)))}function Wm(o){var r=o.symbolPatternSize,e=(0,Tn.th)(o.symbolType,-r/2,-r/2,r,r);return e.attr({culling:!0}),"image"!==e.type&&e.setStyle({strokeNoScale:!0}),e}function $m(o,r,e,i){var s=o.__pictorialBundle,f=e.pathPosition,p=r.valueDim,v=e.repeatTimes||0,m=0,x=e.symbolSize[r.valueDim.index]+e.valueLineWidth+2*e.symbolMargin;for(v0(o,function(F){F.__pictorialAnimationIndex=m,F.__pictorialRepeatTimes=v,m<v?vf(F,null,G(m),e,i):vf(F,null,{scaleX:0,scaleY:0},e,i,function(){s.remove(F)}),m++});m<v;m++){var T=Wm(e);T.__pictorialAnimationIndex=m,T.__pictorialRepeatTimes=v,s.add(T);var O=G(m);vf(T,{x:O.x,y:O.y,scaleX:0,scaleY:0},{scaleX:O.scaleX,scaleY:O.scaleY,rotation:O.rotation},e,i)}function G(F){var Q=f.slice(),ft=e.pxSign,Tt=F;return("start"===e.symbolRepeatDirection?ft>0:ft<0)&&(Tt=v-1-F),Q[p.index]=x*(Tt-v/2+.5)+f[p.index],{x:Q[0],y:Q[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function Xm(o,r,e,i){var s=o.__pictorialBundle,l=o.__pictorialMainPath;l?vf(l,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,i):(l=o.__pictorialMainPath=Wm(e),s.add(l),vf(l,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,i))}function Ym(o,r,e){var i=_.extend({},r.barRectShape),s=o.__pictorialBarRect;s?vf(s,null,{shape:i},r,e):((s=o.__pictorialBarRect=new Br.Z({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,o.add(s))}function Km(o,r,e,i){if(e.symbolClip){var s=o.__pictorialClipPath,l=_.extend({},e.clipShape),c=r.valueDim,f=e.animationModel,p=e.dataIndex;if(s)he.D(s,{shape:l},f,p);else{l[c.wh]=0,s=new Br.Z({shape:l}),o.__pictorialBundle.setClipPath(s),o.__pictorialClipPath=s;var v={};v[c.wh]=e.clipShape[c.wh],ur[i?"updateProps":"initProps"](s,{shape:v},f,p)}}}function jm(o,r){var e=o.getItemModel(r);return e.getAnimationDelayParams=JS,e.isAnimationEnabled=QS,e}function JS(o){return{index:o.__pictorialAnimationIndex,count:o.__pictorialRepeatTimes}}function QS(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Jm(o,r,e,i){var s=new pr.Z,l=new pr.Z;return s.add(l),s.__pictorialBundle=l,l.x=e.bundlePosition[0],l.y=e.bundlePosition[1],e.symbolRepeat?$m(s,r,e):Xm(s,0,e),Ym(s,e,i),Km(s,r,e,i),s.__pictorialShapeStr=qm(o,e),s.__pictorialSymbolMeta=e,s}function Qm(o,r,e,i){var s=i.__pictorialBarRect;s&&s.removeTextContent();var l=[];v0(i,function(c){l.push(c)}),i.__pictorialMainPath&&l.push(i.__pictorialMainPath),i.__pictorialClipPath&&(e=null),_.each(l,function(c){he.bX(c,{scaleX:0,scaleY:0},e,r,function(){i.parent&&i.parent.remove(i)})}),o.setItemGraphicEl(r,null)}function qm(o,r){return[o.getItemVisual(r.dataIndex,"symbol")||"none",!!r.symbolRepeat,!!r.symbolClip].join(":")}function v0(o,r,e){_.each(o.__pictorialBundle.children(),function(i){i!==o.__pictorialBarRect&&r.call(e,i)})}function vf(o,r,e,i,s,l){r&&o.attr(r),i.symbolClip&&!s?e&&o.attr(e):e&&ur[s?"updateProps":"initProps"](o,e,i.animationModel,i.dataIndex,l)}function t1(o,r,e){var i=e.dataIndex,s=e.itemModel,l=s.getModel("emphasis"),c=l.getModel("itemStyle").getItemStyle(),f=s.getModel(["blur","itemStyle"]).getItemStyle(),p=s.getModel(["select","itemStyle"]).getItemStyle(),v=s.getShallow("cursor"),m=l.get("focus"),x=l.get("blurScope"),T=l.get("scale");v0(o,function(F){if(F instanceof gt.ZP){var Q=F.style;F.useStyle(_.extend({image:Q.image,x:Q.x,y:Q.y,width:Q.width,height:Q.height},e.style))}else F.useStyle(e.style);var ft=F.ensureState("emphasis");ft.style=c,T&&(ft.scaleX=1.1*F.scaleX,ft.scaleY=1.1*F.scaleY),F.ensureState("blur").style=f,F.ensureState("select").style=p,v&&(F.cursor=v),F.z2=e.z2});var O=r.valueDim.posDesc[+(e.boundingLength>0)];(0,Or.ni)(o.__pictorialBarRect,(0,Or.k3)(s),{labelFetcher:r.seriesModel,labelDataIndex:i,defaultText:_o(r.seriesModel.getData(),i),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:O}),(0,sr.k5)(o,m,x,l.get("disabled"))}function e1(o){var r=Math.round(o);return Math.abs(o-r)<1e-4?r:Math.ceil(o)}const tT=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l=this.group,c=e.getData(),f=this._data,p=e.coordinateSystem,m=p.getBaseAxis().isHorizontal(),x=p.master.getRect(),T={ecSize:{width:s.getWidth(),height:s.getHeight()},seriesModel:e,coordSys:p,coordSysExtent:[[x.x,x.x+x.width],[x.y,x.y+x.height]],isHorizontal:m,valueDim:Hm[+m],categoryDim:Hm[1-+m]};return c.diff(f).add(function(O){if(c.hasValue(O)){var G=jm(c,O),F=Vm(c,O,G,T),Q=Jm(c,T,F);c.setItemGraphicEl(O,Q),l.add(Q),t1(Q,T,F)}}).update(function(O,G){var F=f.getItemGraphicEl(G);if(c.hasValue(O)){var Q=jm(c,O),ft=Vm(c,O,Q,T),Tt=qm(c,ft);F&&Tt!==F.__pictorialShapeStr&&(l.remove(F),c.setItemGraphicEl(O,null),F=null),F?function qS(o,r,e){he.D(o.__pictorialBundle,{x:e.bundlePosition[0],y:e.bundlePosition[1]},e.animationModel,e.dataIndex),e.symbolRepeat?$m(o,r,e,!0):Xm(o,0,e,!0),Ym(o,e,!0),Km(o,r,e,!0)}(F,T,ft):F=Jm(c,T,ft,!0),c.setItemGraphicEl(O,F),F.__pictorialSymbolMeta=ft,l.add(F),t1(F,T,ft)}else l.remove(F)}).remove(function(O){var G=f.getItemGraphicEl(O);G&&Qm(f,O,G.__pictorialSymbolMeta.animationModel,G)}).execute(),this._data=c,this.group},r.prototype.remove=function(e,i){var s=this.group,l=this._data;e.get("animation")?l&&l.eachItemGraphicEl(function(c){Qm(l,(0,Fr.A)(c).dataIndex,e,c)}):s.removeAll()},r.type="pictorialBar",r}(_r.Z),rT=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e){return e.stack=null,o.prototype.getInitialData.apply(this,arguments)},r.type="series.pictorialBar",r.dependencies=["grid"],r.defaultOption=(0,Ii.ZL)(li.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),r}(li),oT=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e._layers=[],e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l=e.getData(),c=this,f=this.group,p=e.getLayerSeries(),v=l.getLayout("layoutInfo"),m=v.rect,x=v.boundaryGap;function T(Q){return Q.name}f.x=0,f.y=m.y+x[0];var O=new Hs.Z(this._layersSeries||[],p,T,T),G=[];function F(Q,ft,Tt){var xt=c._layers;if("remove"!==Q){for(var Nt,At=[],It=[],Gt=p[ft].indices,Wt=0;Wt<Gt.length;Wt++){var jt=l.getItemLayout(Gt[Wt]),ee=jt.x,oe=jt.y0,de=jt.y;At.push(ee,oe),It.push(ee,oe+de),Nt=l.getItemVisual(Gt[Wt],"style")}var xe,be=l.getItemLayout(Gt[0]),ke=e.getModel("label").get("margin"),Je=e.getModel("emphasis");if("add"===Q){var $e=G[ft]=new pr.Z;xe=new bo({shape:{points:At,stackedOnPoints:It,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),$e.add(xe),f.add($e),e.isAnimationEnabled()&&xe.setClipPath(function aT(o,r,e){var i=new Br.Z({shape:{x:o.x-10,y:o.y-10,width:0,height:o.height+20}});return he.KZ(i,{shape:{x:o.x-50,width:o.width+100,height:o.height+20}},r,e),i}(xe.getBoundingRect(),e,function(){xe.removeClipPath()}))}else xe=($e=xt[Tt]).childAt(0),f.add($e),G[ft]=$e,he.D(xe,{shape:{points:At,stackedOnPoints:It}},e),(0,he.Zi)(xe);(0,Or.ni)(xe,(0,Or.k3)(e),{labelDataIndex:Gt[Wt-1],defaultText:l.getName(Gt[Wt-1]),inheritColor:Nt.fill},{normal:{verticalAlign:"middle"}}),xe.setTextConfig({position:null,local:!0});var fr=xe.getTextContent();fr&&(fr.x=be.x-ke,fr.y=be.y0+be.y/2),xe.useStyle(Nt),l.setItemGraphicEl(ft,xe),(0,sr.WO)(xe,e),(0,sr.k5)(xe,Je.get("focus"),Je.get("blurScope"),Je.get("disabled"))}else f.remove(xt[ft])}O.add((0,_.bind)(F,this,"add")).update((0,_.bind)(F,this,"update")).remove((0,_.bind)(F,this,"remove")).execute(),this._layersSeries=p,this._layers=G},r.type="themeRiver",r}(_r.Z),lT=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e){o.prototype.init.apply(this,arguments),this.legendVisualProvider=new xr(_.bind(this.getData,this),_.bind(this.getRawData,this))},r.prototype.fixData=function(e){var i=e.length,s={},l=(0,dr.pv)(e,function(T){return s.hasOwnProperty(T[0]+"")||(s[T[0]+""]=-1),T[2]}),c=[];l.buckets.each(function(T,O){c.push({name:O,dataList:T})});for(var f=c.length,p=0;p<f;++p){for(var v=c[p].name,m=0;m<c[p].dataList.length;++m)s[x=c[p].dataList[m][0]+""]=p;for(var x in s)s.hasOwnProperty(x)&&s[x]!==p&&(s[x]=p,e[i]=[x,0,v],i++)}return e},r.prototype.getInitialData=function(e,i){for(var l=this.getReferringComponents("singleAxis",dr.C6).models[0].get("type"),c=_.filter(e.data,function(G){return void 0!==G[2]}),f=this.fixData(c||[]),p=[],v=this.nameMap=_.createHashMap(),m=0,x=0;x<f.length;++x)p.push(f[x][2]),v.get(f[x][2])||(v.set(f[x][2],m),m++);var T=(0,Ce.Z)(f,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,u.T)(l)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,O=new Ie.Z(T,this);return O.initData(f),O},r.prototype.getLayerSeries=function(){for(var e=this.getData(),i=e.count(),s=[],l=0;l<i;++l)s[l]=l;var c=e.mapDimension("single"),f=(0,dr.pv)(s,function(v){return e.get("name",v)}),p=[];return f.buckets.each(function(v,m){v.sort(function(x,T){return e.get(c,x)-e.get(c,T)}),p.push({name:m,indices:v})}),p},r.prototype.getAxisTooltipData=function(e,i,s){_.isArray(e)||(e=e?[e]:[]);for(var v,l=this.getData(),c=this.getLayerSeries(),f=[],p=c.length,m=0;m<p;++m){for(var x=Number.MAX_VALUE,T=-1,O=c[m].indices.length,G=0;G<O;++G){var F=l.get(e[0],c[m].indices[G]),Q=Math.abs(F-i);Q<=x&&(v=F,x=Q,T=c[m].indices[G])}f.push(T)}return{dataIndices:f,nestestValue:v}},r.prototype.formatTooltip=function(e,i,s){var l=this.getData(),c=l.getName(e),f=l.get(l.mapDimension("value"),e);return(0,ii.TX)("nameValue",{name:c,value:f})},r.type="series.themeRiver",r.dependencies=["singleAxis"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},r}(rr.Z);function uT(o,r){o.eachSeriesByType("themeRiver",function(e){var i=e.getData(),s=e.coordinateSystem,l={},c=s.getRect();l.rect=c;var f=e.get("boundaryGap"),p=s.getAxis();l.boundaryGap=f,"horizontal"===p.orient?(f[0]=Be.GM(f[0],c.height),f[1]=Be.GM(f[1],c.height),r1(i,e,c.height-f[0]-f[1])):(f[0]=Be.GM(f[0],c.width),f[1]=Be.GM(f[1],c.width),r1(i,e,c.width-f[0]-f[1])),i.setLayout("layoutInfo",l)})}function r1(o,r,e){if(o.count())for(var O,i=r.coordinateSystem,s=r.getLayerSeries(),l=o.mapDimension("single"),c=o.mapDimension("value"),f=_.map(s,function(Q){return _.map(Q.indices,function(ft){var Tt=i.dataToPoint(o.get(l,ft));return Tt[1]=o.get(c,ft),Tt})}),p=function cT(o){for(var r=o.length,e=o[0].length,i=[],s=[],l=0,c=0;c<e;++c){for(var f=0,p=0;p<r;++p)f+=o[p][c][1];f>l&&(l=f),i.push(f)}for(var v=0;v<e;++v)s[v]=(l-i[v])/2;l=0;for(var m=0;m<e;++m){var x=i[m]+s[m];x>l&&(l=x)}return{y0:s,max:l}}(f),v=p.y0,m=e/p.max,x=s.length,T=s[0].indices.length,G=0;G<T;++G){o.setItemLayout(s[0].indices[G],{layerIndex:0,x:f[0][G][0],y0:O=v[G]*m,y:f[0][G][1]*m});for(var F=1;F<x;++F)o.setItemLayout(s[F].indices[G],{layerIndex:F,x:f[F][G][0],y0:O+=f[F-1][G][1]*m,y:f[F][G][1]*m})}}const n1=function(o){function r(e,i,s,l){var c=o.call(this)||this;c.z2=2,c.textConfig={inside:!0},(0,Fr.A)(c).seriesIndex=i.seriesIndex;var f=new Se.ZP({z2:4,silent:e.getModel().get(["label","silent"])});return c.setTextContent(f),c.updateData(!0,e,i,s,l),c}return(0,Re.ZT)(r,o),r.prototype.updateData=function(e,i,s,l,c){this.node=i,i.piece=this,s=s||this._seriesModel,l=l||this._ecModel;var f=this;(0,Fr.A)(f).dataIndex=i.dataIndex;var p=i.getModel(),v=p.getModel("emphasis"),m=i.getLayout(),x=_.extend({},m);x.label=null;var T=i.getVisual("style");T.lineJoin="bevel";var O=i.getVisual("decal");O&&(T.decal=(0,Sl.I)(O,c));var G=qe(p.getModel("itemStyle"),x,!0);_.extend(x,G),_.each(sr.L1,function(Tt){var xt=f.ensureState(Tt),At=p.getModel([Tt,"itemStyle"]);xt.style=At.getItemStyle();var It=qe(At,x);It&&(xt.shape=It)}),e?(f.setShape(x),f.shape.r=m.r0,he.D(f,{shape:{r:m.r}},s,i.dataIndex)):(he.D(f,{shape:x},s),(0,he.Zi)(f)),f.useStyle(T),this._updateLabel(s);var F=p.getShallow("cursor");F&&f.attr("cursor",F),this._seriesModel=s||this._seriesModel,this._ecModel=l||this._ecModel;var Q=v.get("focus"),ft="ancestor"===Q?i.getAncestorsIndices():"descendant"===Q?i.getDescendantIndices():Q;(0,sr.k5)(this,ft,v.get("blurScope"),v.get("disabled"))},r.prototype._updateLabel=function(e){var i=this,s=this.node.getModel(),l=s.getModel("label"),c=this.node.getLayout(),f=c.endAngle-c.startAngle,p=(c.startAngle+c.endAngle)/2,v=Math.cos(p),m=Math.sin(p),x=this,T=x.getTextContent(),O=this.node.dataIndex,G=l.get("minAngle")/180*Math.PI,F=l.get("show")&&!(null!=G&&Math.abs(f)<G);function Q(ft,Tt){return ft.get(Tt)??l.get(Tt)}T.ignore=!F,_.each(sr.qc,function(ft){var Tt=s.getModel("normal"===ft?"label":[ft,"label"]),xt="normal"===ft,At=xt?T:T.ensureState(ft),It=e.getFormattedLabel(O,ft);xt&&(It=It||i.node.name),At.style=(0,Or.Lr)(Tt,{},null,"normal"!==ft,!0),It&&(At.style.text=It);var Nt=Tt.get("show");null!=Nt&&!xt&&(At.ignore=!Nt);var Gt=Q(Tt,"position"),Wt=xt?x:x.states[ft],jt=Wt.style.fill;Wt.textConfig={outsideFill:"inherit"===Tt.get("color")?jt:null,inside:"outside"!==Gt};var ee,oe=Q(Tt,"distance")||0,de=Q(Tt,"align");"outside"===Gt?(ee=c.r+oe,de=p>Math.PI/2?"right":"left"):de&&"center"!==de?"left"===de?(ee=c.r0+oe,p>Math.PI/2&&(de="right")):"right"===de&&(ee=c.r-oe,p>Math.PI/2&&(de="left")):(ee=f===2*Math.PI&&0===c.r0?0:(c.r+c.r0)/2,de="center"),At.style.align=de,At.style.verticalAlign=Q(Tt,"verticalAlign")||"middle",At.x=ee*v+c.cx,At.y=ee*m+c.cy;var xe=Q(Tt,"rotate"),be=0;"radial"===xe?(be=-p)<-Math.PI/2&&(be+=Math.PI):"tangential"===xe?(be=Math.PI/2-p)>Math.PI/2?be-=Math.PI:be<-Math.PI/2&&(be+=Math.PI):_.isNumber(xe)&&(be=xe*Math.PI/180),At.rotation=be}),T.dirtyStyle()},r}(bi.C);var _0="sunburstRootToNode",i1="sunburstHighlight";const mT=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){var c=this;this.seriesModel=e,this.api=s,this.ecModel=i;var f=e.getData(),p=f.tree.root,v=e.getViewRoot(),m=this.group,x=e.get("renderLabelForZeroData"),T=[];v.eachNode(function(Tt){T.push(Tt)}),function G(Tt,xt){function At(Nt){return Nt.getId()}function It(Nt,Gt){!function F(Tt,xt){if(!x&&Tt&&!Tt.getValue()&&(Tt=null),Tt!==p&&xt!==p)if(xt&&xt.piece)Tt?(xt.piece.updateData(!1,Tt,e,i,s),f.setItemGraphicEl(Tt.dataIndex,xt.piece)):function Q(Tt){!Tt||Tt.piece&&(m.remove(Tt.piece),Tt.piece=null)}(xt);else if(Tt){var At=new n1(Tt,e,i,s);m.add(At),f.setItemGraphicEl(Tt.dataIndex,At)}}(null==Nt?null:Tt[Nt],null==Gt?null:xt[Gt])}0===Tt.length&&0===xt.length||new Hs.Z(xt,Tt,At,At).add(It).update(It).remove(_.curry(It,null)).execute()}(T,this._oldChildren||[]),function ft(Tt,xt){xt.depth>0?(c.virtualPiece?c.virtualPiece.updateData(!1,Tt,e,i,s):(c.virtualPiece=new n1(Tt,e,i,s),m.add(c.virtualPiece)),xt.piece.off("click"),c.virtualPiece.on("click",function(At){c._rootToNode(xt.parentNode)})):c.virtualPiece&&(m.remove(c.virtualPiece),c.virtualPiece=null)}(p,v),this._initEvents(),this._oldChildren=T},r.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(i){var s=!1;e.seriesModel.getViewRoot().eachNode(function(c){if(!s&&c.piece&&c.piece===i.target){var f=c.getModel().get("nodeClick");if("rootToNode"===f)e._rootToNode(c);else if("link"===f){var p=c.getModel(),v=p.get("link");if(v){var m=p.get("target",!0)||"_blank";(0,Mn.MI)(v,m)}}s=!0}})})},r.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:_0,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},r.prototype.containPoint=function(e,i){var l=i.getData().getItemLayout(0);if(l){var c=e[0]-l.cx,f=e[1]-l.cy,p=Math.sqrt(c*c+f*f);return p<=l.r&&p>=l.r0}},r.type="sunburst",r}(_r.Z);function a1(o){var r=0;_.each(o.children,function(i){a1(i);var s=i.value;_.isArray(s)&&(s=s[0]),r+=s});var e=o.value;_.isArray(e)&&(e=e[0]),(null==e||isNaN(e))&&(e=r),e<0&&(e=0),_.isArray(o.value)?o.value[0]=e:o.value=e}const xT=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.ignoreStyleOnData=!0,e}return(0,Re.ZT)(r,o),r.prototype.getInitialData=function(e,i){var s={name:e.name,children:e.data};a1(s);var l=this._levelModels=_.map(e.levels||[],function(p){return new hi.Z(p,this,i)},this),c=hd.createTree(s,this,function f(p){p.wrapMethod("getItemModel",function(v,m){var x=c.getNodeByDataIndex(m),T=l[x.depth];return T&&(v.parentModel=T),v})});return c.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.getDataParams=function(e){var i=o.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(e);return i.treePathInfo=Oc(s,this),i},r.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var i=this.getRawData().tree.root;(!e||e!==i&&!i.contains(e))&&(this._viewRoot=i)},r.prototype.enableAriaDecal=function(){vd(this)},r.type="series.sunburst",r.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},r}(rr.Z);var o1=Math.PI/180;function ST(o,r,e){r.eachSeriesByType(o,function(i){var s=i.get("center"),l=i.get("radius");_.isArray(l)||(l=[0,l]),_.isArray(s)||(s=[s,s]);var c=e.getWidth(),f=e.getHeight(),p=Math.min(c,f),v=(0,Be.GM)(s[0],c),m=(0,Be.GM)(s[1],f),x=(0,Be.GM)(l[0],p/2),T=(0,Be.GM)(l[1],p/2),O=-i.get("startAngle")*o1,G=i.get("minAngle")*o1,F=i.getData().tree.root,Q=i.getViewRoot(),ft=Q.depth,Tt=i.get("sort");null!=Tt&&s1(Q,Tt);var xt=0;_.each(Q.children,function(ke){!isNaN(ke.getValue())&&xt++});var At=Q.getValue(),It=Math.PI/(At||xt)*2,Nt=Q.depth>0,Wt=(T-x)/(Q.height-(Nt?-1:1)||1),jt=i.get("clockwise"),ee=i.get("stillShowZeroSum"),oe=jt?1:-1,de=function(ke,Je){if(ke){var $e=Je;if(ke!==F){var fr=ke.getValue(),wr=0===At&&ee?It:fr*It;wr<G&&(wr=G),$e=Je+oe*wr;var Dr=ke.depth-ft-(Nt?-1:1),cn=x+Wt*Dr,ln=x+Wt*(Dr+1),rn=i.getLevelModel(ke);if(rn){var Pn=rn.get("r0",!0),Qn=rn.get("r",!0),Cn=rn.get("radius",!0);null!=Cn&&(Pn=Cn[0],Qn=Cn[1]),null!=Pn&&(cn=(0,Be.GM)(Pn,p/2)),null!=Qn&&(ln=(0,Be.GM)(Qn,p/2))}ke.setLayout({angle:wr,startAngle:Je,endAngle:$e,clockwise:jt,cx:v,cy:m,r0:cn,r:ln})}if(ke.children&&ke.children.length){var nn=0;_.each(ke.children,function(Wn){nn+=de(Wn,Je+nn)})}return $e-Je}};if(Nt){var Ae=2*Math.PI;F.setLayout({angle:Ae,startAngle:O,endAngle:O+Ae,clockwise:jt,cx:v,cy:m,r0:x,r:x+Wt})}de(Q,O)})}function s1(o,r){var e=o.children||[];o.children=function TT(o,r){if(_.isFunction(r)){var e=_.map(o,function(s,l){var c=s.getValue();return{params:{depth:s.depth,height:s.height,dataIndex:s.dataIndex,getValue:function(){return c}},index:l}});return e.sort(function(s,l){return r(s.params,l.params)}),_.map(e,function(s){return o[s.index]})}var i="asc"===r;return o.sort(function(s,l){var c=(s.getValue()-l.getValue())*(i?1:-1);return 0===c?(s.dataIndex-l.dataIndex)*(i?-1:1):c})}(e,r),e.length&&_.each(o.children,function(i){s1(i,r)})}function CT(o){var r={};o.eachSeriesByType("sunburst",function(i){var s=i.getData(),l=s.tree;l.eachNode(function(c){var p=c.getModel().getModel("itemStyle").getItemStyle();p.fill||(p.fill=function e(i,s,l){for(var c=i;c&&c.depth>1;)c=c.parentNode;var f=s.getColorFromPalette(c.name||c.dataIndex+"",r);return i.depth>1&&(0,_.isString)(f)&&(f=(0,oi.lift)(f,(i.depth-1)/(l-1)*.5)),f}(c,i,l.root.height));var v=s.ensureUniqueItemVisual(c.dataIndex,"style");(0,_.extend)(v,p)})})}var l1={color:"fill",borderColor:"stroke"},bT={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Ul=(0,dr.Yf)();const AT=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},r.prototype.getInitialData=function(e,i){return(0,Fa.Z)(null,this)},r.prototype.getDataParams=function(e,i,s){var l=o.prototype.getDataParams.call(this,e,i);return s&&(l.info=Ul(s).info),l},r.type="series.custom",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},r}(rr.Z);function OT(o,r){return r=r||[0,0],_.map(["x","y"],function(e,i){var s=this.getAxis(e),l=r[i],c=o[i]/2;return"category"===s.type?s.getBandWidth():Math.abs(s.dataToCoord(l-c)-s.dataToCoord(l+c))},this)}function wT(o,r){return r=r||[0,0],_.map([0,1],function(e){var i=r[e],s=o[e]/2,l=[],c=[];return l[e]=i-s,c[e]=i+s,l[1-e]=c[1-e]=r[1-e],Math.abs(this.dataToPoint(l)[e]-this.dataToPoint(c)[e])},this)}function LT(o,r){var e=this.getAxis(),i=r instanceof Array?r[0]:r,s=(o instanceof Array?o[0]:o)/2;return"category"===e.type?e.getBandWidth():Math.abs(e.dataToCoord(i-s)-e.dataToCoord(i+s))}function IT(o,r){return r=r||[0,0],_.map(["Radius","Angle"],function(e,i){var l=this["get"+e+"Axis"](),c=r[i],f=o[i]/2,p="category"===l.type?l.getBandWidth():Math.abs(l.dataToCoord(c-f)-l.dataToCoord(c+f));return"Angle"===e&&(p=p*Math.PI/180),p},this)}function u1(o,r,e,i){return o&&(o.legacy||!1!==o.legacy&&!e&&!i&&"tspan"!==r&&("text"===r||(0,_.hasOwn)(o,"text")))}function c1(o,r,e){var s,l,c,i=o;if("text"===r)c=i;else{c={},(0,_.hasOwn)(i,"text")&&(c.text=i.text),(0,_.hasOwn)(i,"rich")&&(c.rich=i.rich),(0,_.hasOwn)(i,"textFill")&&(c.fill=i.textFill),(0,_.hasOwn)(i,"textStroke")&&(c.stroke=i.textStroke),(0,_.hasOwn)(i,"fontFamily")&&(c.fontFamily=i.fontFamily),(0,_.hasOwn)(i,"fontSize")&&(c.fontSize=i.fontSize),(0,_.hasOwn)(i,"fontStyle")&&(c.fontStyle=i.fontStyle),(0,_.hasOwn)(i,"fontWeight")&&(c.fontWeight=i.fontWeight),l={type:"text",style:c,silent:!0},s={};var f=(0,_.hasOwn)(i,"textPosition");e?s.position=f?i.textPosition:"inside":f&&(s.position=i.textPosition),(0,_.hasOwn)(i,"textPosition")&&(s.position=i.textPosition),(0,_.hasOwn)(i,"textOffset")&&(s.offset=i.textOffset),(0,_.hasOwn)(i,"textRotation")&&(s.rotation=i.textRotation),(0,_.hasOwn)(i,"textDistance")&&(s.distance=i.textDistance)}return h1(c,o),(0,_.each)(c.rich,function(p){h1(p,p)}),{textConfig:s,textContent:l}}function h1(o,r){!r||(r.font=r.textFont||r.font,(0,_.hasOwn)(r,"textStrokeWidth")&&(o.lineWidth=r.textStrokeWidth),(0,_.hasOwn)(r,"textAlign")&&(o.align=r.textAlign),(0,_.hasOwn)(r,"textVerticalAlign")&&(o.verticalAlign=r.textVerticalAlign),(0,_.hasOwn)(r,"textLineHeight")&&(o.lineHeight=r.textLineHeight),(0,_.hasOwn)(r,"textWidth")&&(o.width=r.textWidth),(0,_.hasOwn)(r,"textHeight")&&(o.height=r.textHeight),(0,_.hasOwn)(r,"textBackgroundColor")&&(o.backgroundColor=r.textBackgroundColor),(0,_.hasOwn)(r,"textPadding")&&(o.padding=r.textPadding),(0,_.hasOwn)(r,"textBorderColor")&&(o.borderColor=r.textBorderColor),(0,_.hasOwn)(r,"textBorderWidth")&&(o.borderWidth=r.textBorderWidth),(0,_.hasOwn)(r,"textBorderRadius")&&(o.borderRadius=r.textBorderRadius),(0,_.hasOwn)(r,"textBoxShadowColor")&&(o.shadowColor=r.textBoxShadowColor),(0,_.hasOwn)(r,"textBoxShadowBlur")&&(o.shadowBlur=r.textBoxShadowBlur),(0,_.hasOwn)(r,"textBoxShadowOffsetX")&&(o.shadowOffsetX=r.textBoxShadowOffsetX),(0,_.hasOwn)(r,"textBoxShadowOffsetY")&&(o.shadowOffsetY=r.textBoxShadowOffsetY))}function f1(o,r,e){var i=o;i.textPosition=i.textPosition||e.position||"inside",null!=e.offset&&(i.textOffset=e.offset),null!=e.rotation&&(i.textRotation=e.rotation),null!=e.distance&&(i.textDistance=e.distance);var s=i.textPosition.indexOf("inside")>=0,l=o.fill||"#000";d1(i,r);var c=null==i.textFill;return s?c&&(i.textFill=e.insideFill||"#fff",!i.textStroke&&e.insideStroke&&(i.textStroke=e.insideStroke),!i.textStroke&&(i.textStroke=l),null==i.textStrokeWidth&&(i.textStrokeWidth=2)):(c&&(i.textFill=o.fill||e.outsideFill||"#000"),!i.textStroke&&e.outsideStroke&&(i.textStroke=e.outsideStroke)),i.text=r.text,i.rich=r.rich,(0,_.each)(r.rich,function(f){d1(f,f)}),i}function d1(o,r){!r||((0,_.hasOwn)(r,"fill")&&(o.textFill=r.fill),(0,_.hasOwn)(r,"stroke")&&(o.textStroke=r.fill),(0,_.hasOwn)(r,"lineWidth")&&(o.textStrokeWidth=r.lineWidth),(0,_.hasOwn)(r,"font")&&(o.font=r.font),(0,_.hasOwn)(r,"fontStyle")&&(o.fontStyle=r.fontStyle),(0,_.hasOwn)(r,"fontWeight")&&(o.fontWeight=r.fontWeight),(0,_.hasOwn)(r,"fontSize")&&(o.fontSize=r.fontSize),(0,_.hasOwn)(r,"fontFamily")&&(o.fontFamily=r.fontFamily),(0,_.hasOwn)(r,"align")&&(o.textAlign=r.align),(0,_.hasOwn)(r,"verticalAlign")&&(o.textVerticalAlign=r.verticalAlign),(0,_.hasOwn)(r,"lineHeight")&&(o.textLineHeight=r.lineHeight),(0,_.hasOwn)(r,"width")&&(o.textWidth=r.width),(0,_.hasOwn)(r,"height")&&(o.textHeight=r.height),(0,_.hasOwn)(r,"backgroundColor")&&(o.textBackgroundColor=r.backgroundColor),(0,_.hasOwn)(r,"padding")&&(o.textPadding=r.padding),(0,_.hasOwn)(r,"borderColor")&&(o.textBorderColor=r.borderColor),(0,_.hasOwn)(r,"borderWidth")&&(o.textBorderWidth=r.borderWidth),(0,_.hasOwn)(r,"borderRadius")&&(o.textBorderRadius=r.borderRadius),(0,_.hasOwn)(r,"shadowColor")&&(o.textBoxShadowColor=r.shadowColor),(0,_.hasOwn)(r,"shadowBlur")&&(o.textBoxShadowBlur=r.shadowBlur),(0,_.hasOwn)(r,"shadowOffsetX")&&(o.textBoxShadowOffsetX=r.shadowOffsetX),(0,_.hasOwn)(r,"shadowOffsetY")&&(o.textBoxShadowOffsetY=r.shadowOffsetY),(0,_.hasOwn)(r,"textShadowColor")&&(o.textShadowColor=r.textShadowColor),(0,_.hasOwn)(r,"textShadowBlur")&&(o.textShadowBlur=r.textShadowBlur),(0,_.hasOwn)(r,"textShadowOffsetX")&&(o.textShadowOffsetX=r.textShadowOffsetX),(0,_.hasOwn)(r,"textShadowOffsetY")&&(o.textShadowOffsetY=r.textShadowOffsetY))}var GT=D(1694),p1={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},v1=(0,_.keys)(p1),kv=((0,_.reduce)(vt.dN,function(o,r){return o[r]=1,o},{}),vt.dN.join(", "),["","style","shape","extra"]),gf=(0,dr.Yf)();function m0(o,r,e,i,s){var l=o+"Animation",c=(0,he.ke)(o,i,s)||{},f=gf(r).userDuring;return c.duration>0&&(c.during=f?(0,_.bind)(UT,{el:r,userDuring:f}):null,c.setToFinal=!0,c.scope=o),(0,_.extend)(c,e[l]),c}function zv(o,r,e,i){var s=(i=i||{}).dataIndex,l=i.isInit,c=i.clearStyle,f=e.isAnimationEnabled(),p=gf(o),v=r.style;p.userDuring=r.during;var m={},x={};if(function VT(o,r,e){for(var i=0;i<v1.length;i++){var s=v1[i],l=p1[s],c=r[s];c&&(e[l[0]]=c[0],e[l[1]]=c[1])}for(i=0;i<vt.dN.length;i++){var f=vt.dN[i];null!=r[f]&&(e[f]=r[f])}}(0,r,x),m1("shape",r,x),m1("extra",r,x),!l&&f&&(function HT(o,r,e){for(var i=r.transition,s=Jc(i)?vt.dN:(0,dr.kF)(i||[]),l=0;l<s.length;l++){var c=s[l];"style"!==c&&"shape"!==c&&"extra"!==c&&(e[c]=o[c])}}(o,r,m),_1("shape",o,r,m),_1("extra",o,r,m),function WT(o,r,e,i){if(e){var l,s=o.style;if(s){var c=e.transition,f=r.transition;if(c&&!Jc(c)){var p=(0,dr.kF)(c);!l&&(l=i.style={});for(var v=0;v<p.length;v++)l[m=p[v]]=s[m]}else if(o.getAnimationStyleProps&&(Jc(f)||Jc(c)||(0,_.indexOf)(f,"style")>=0)){var T=o.getAnimationStyleProps(),O=T?T.style:null;if(O){!l&&(l=i.style={});var G=(0,_.keys)(e);for(v=0;v<G.length;v++){var m;O[m=G[v]]&&(l[m]=s[m])}}}}}}(o,r,v,m)),x.style=v,function ZT(o,r,e){var i=r.style;if(!o.isGroup&&i){if(e){o.useStyle({});for(var s=o.animators,l=0;l<s.length;l++){var c=s[l];"style"===c.targetName&&c.changeTarget(o.style)}}o.setStyle(i)}r&&(r.style=null,r&&o.attr(r),r.style=i)}(o,x,c),function kT(o,r){(0,_.hasOwn)(r,"silent")&&(o.silent=r.silent),(0,_.hasOwn)(r,"ignore")&&(o.ignore=r.ignore),o instanceof Ma.ZP&&(0,_.hasOwn)(r,"invisible")&&(o.invisible=r.invisible),o instanceof mt.ZP&&(0,_.hasOwn)(r,"autoBatch")&&(o.autoBatch=r.autoBatch)}(o,r),f)if(l){var T={};(0,_.each)(kv,function(G){var F=G?r[G]:r;F&&F.enterFrom&&(G&&(T[G]=T[G]||{}),(0,_.extend)(G?T[G]:T,F.enterFrom))});var O=m0("enter",o,r,e,s);O.duration>0&&o.animateFrom(T,O)}else!function FT(o,r,e,i,s){if(s){var l=m0("update",o,r,i,e);l.duration>0&&o.animateFrom(s,l)}}(o,r,s||0,e,m);g1(o,r),v?o.dirty():o.markRedraw()}function g1(o,r){for(var e=gf(o).leaveToProps,i=0;i<kv.length;i++){var s=kv[i],l=s?r[s]:r;l&&l.leaveTo&&(e||(e=gf(o).leaveToProps={}),s&&(e[s]=e[s]||{}),(0,_.extend)(s?e[s]:e,l.leaveTo))}}function Uv(o,r,e,i){if(o){var s=o.parent,l=gf(o).leaveToProps;if(l){var c=m0("update",o,r,e,0);c.done=function(){s.remove(o),i&&i()},o.animateTo(l,c)}else s.remove(o),i&&i()}}function Jc(o){return"all"===o}var tl={},zT={setTransform:function(o,r){return tl.el[o]=r,this},getTransform:function(o){return tl.el[o]},setShape:function(o,r){var e=tl.el;return(e.shape||(e.shape={}))[o]=r,e.dirtyShape&&e.dirtyShape(),this},getShape:function(o){var r=tl.el.shape;if(r)return r[o]},setStyle:function(o,r){var e=tl.el,i=e.style;return i&&(i[o]=r,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(o){var r=tl.el.style;if(r)return r[o]},setExtra:function(o,r){return(tl.el.extra||(tl.el.extra={}))[o]=r,this},getExtra:function(o){var r=tl.el.extra;if(r)return r[o]}};function UT(){var o=this,r=o.el;if(r){var e=gf(r).userDuring,i=o.userDuring;if(e!==i)return void(o.el=o.userDuring=null);tl.el=r,i(zT)}}function _1(o,r,e,i){var s=e[o];if(s){var c,l=r[o];if(l){var f=e.transition,p=s.transition;if(p)if(!c&&(c=i[o]={}),Jc(p))(0,_.extend)(c,l);else for(var v=(0,dr.kF)(p),m=0;m<v.length;m++)c[x=v[m]]=T=l[x];else if(Jc(f)||(0,_.indexOf)(f,o)>=0){!c&&(c=i[o]={});var O=(0,_.keys)(l);for(m=0;m<O.length;m++){var x,T;$T(s[x=O[m]],T=l[x])&&(c[x]=T)}}}}}function m1(o,r,e){var i=r[o];if(i)for(var s=e[o]={},l=(0,_.keys)(i),c=0;c<l.length;c++){var f=l[c];s[f]=(0,GT.V)(i[f])}}function $T(o,r){return(0,_.isArrayLike)(o)?o!==r:null!=o&&isFinite(o)}var y1=(0,dr.Yf)(),XT=["percent","easing","shape","style","extra"];function x1(o){o.stopAnimation("keyframe"),o.attr(y1(o))}function Hv(o,r,e){if(e.isAnimationEnabled()&&r){if((0,_.isArray)(r))return void(0,_.each)(r,function(f){Hv(o,f,e)});var i=r.keyframes,s=r.duration;if(e&&null==s){var l=(0,he.ke)("enter",e,0);s=l&&l.duration}if(i&&s){var c=y1(o);(0,_.each)(kv,function(f){var p;f&&!o[f]||(i.sort(function(m,x){return m.percent-x.percent}),(0,_.each)(i,function(m){var x=o.animators,T=f?m[f]:m;if(T){var O=(0,_.keys)(T);if(f||(O=(0,_.filter)(O,function(Q){return(0,_.indexOf)(XT,Q)<0})),O.length){p||((p=o.animate(f,r.loop,!0)).scope="keyframe");for(var G=0;G<x.length;G++)x[G]!==p&&x[G].targetName===p.targetName&&x[G].stopTracks(O);f&&(c[f]=c[f]||{});var F=f?c[f]:c;(0,_.each)(O,function(Q){F[Q]=((f?o[f]:o)||{})[Q]}),p.whenWithKeys(s*m.percent,T,O,m.easing)}}}),p&&p.delay(r.delay||0).duration(s).start(r.easing))})}}}var Hl="emphasis",wu="normal",y0="blur",x0="select",Du=[wu,Hl,y0,x0],S0={normal:["itemStyle"],emphasis:[Hl,"itemStyle"],blur:[y0,"itemStyle"],select:[x0,"itemStyle"]},T0={normal:["label"],emphasis:[Hl,"label"],blur:[y0,"label"],select:[x0,"label"]},YT=["x","y"],Uo={normal:{},emphasis:{},blur:{},select:{}},jT={cartesian2d:function ET(o){var r=o.master.getRect();return{coordSys:{type:"cartesian2d",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(e){return o.dataToPoint(e)},size:_.bind(OT,o)}}},geo:function DT(o){var r=o.getBoundingRect();return{coordSys:{type:"geo",x:r.x,y:r.y,width:r.width,height:r.height,zoom:o.getZoom()},api:{coord:function(e){return o.dataToPoint(e)},size:_.bind(wT,o)}}},single:function NT(o){var r=o.getRect();return{coordSys:{type:"singleAxis",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(e){return o.dataToPoint(e)},size:(0,_.bind)(LT,o)}}},polar:function RT(o){var r=o.getRadiusAxis(),e=o.getAngleAxis(),i=r.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:o.cx,cy:o.cy,r:i[1],r0:i[0]},api:{coord:function(s){var l=r.dataToRadius(s[0]),c=e.dataToAngle(s[1]),f=o.coordToPoint([l,c]);return f.push(l,c*Math.PI/180),f},size:_.bind(IT,o)}}},calendar:function BT(o){var r=o.getRect(),e=o.getRangeInfo();return{coordSys:{type:"calendar",x:r.x,y:r.y,width:r.width,height:r.height,cellWidth:o.getCellWidth(),cellHeight:o.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(i,s){return o.dataToPoint(i,s)}}}}};function C0(o){return o instanceof mt.ZP}function M0(o){return o instanceof Ma.ZP}const qT=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){this._progressiveEls=null;var c=this._data,f=e.getData(),p=this.group,v=T1(e,f,i,s);c||p.removeAll(),f.diff(c).add(function(x){A0(s,null,x,v(x,l),e,p,f)}).remove(function(x){var T=c.getItemGraphicEl(x);T&&Uv(T,Ul(T).option,e)}).update(function(x,T){var O=c.getItemGraphicEl(T);A0(s,O,x,v(x,l),e,p,f)}).execute();var m=e.get("clip",!0)?mo(e.coordinateSystem,!1,e):null;m?p.setClipPath(m):p.removeClipPath(),this._data=f},r.prototype.incrementalPrepareRender=function(e,i,s){this.group.removeAll(),this._data=null},r.prototype.incrementalRender=function(e,i,s,l,c){var f=i.getData(),p=T1(i,f,s,l),v=this._progressiveEls=[];function m(O){O.isGroup||(O.incremental=!0,O.ensureState("emphasis").hoverLayer=!0)}for(var x=e.start;x<e.end;x++){var T=A0(null,null,x,p(x,c),i,this.group,f);T&&(T.traverse(m),v.push(T))}},r.prototype.eachRendered=function(e){ur.traverseElements(this._progressiveEls||this.group,e)},r.prototype.filterForExposedEvent=function(e,i,s,l){var c=i.element;if(null==c||s.name===c)return!0;for(;(s=s.__hostTarget||s.parent)&&s!==this.group;)if(s.name===c)return!0;return!1},r.type="custom",r}(_r.Z);function b0(o){var e,r=o.type;if("path"===r){var i=o.shape,s=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,l=A1(i);e=ur.makePath(l,null,s,i.layout||"center"),Ul(e).customPathData=l}else if("image"===r)e=new gt.ZP({}),Ul(e).customImagePath=o.style.image;else if("text"===r)e=new Se.ZP({});else if("group"===r)e=new pr.Z;else{if("compoundPath"===r)throw new Error('"compoundPath" is not supported yet.');var c=ur.getShapeClass(r);c||(0,Jt._y)(""),e=new c}return Ul(e).customGraphicType=r,e.name=o.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function P0(o,r,e,i,s,l,c){x1(r);var f=s&&s.normal.cfg;f&&r.setTextConfig(f),i&&null==i.transition&&(i.transition=YT);var p=i&&i.style;if(p){if("text"===r.type){var v=p;(0,_.hasOwn)(v,"textFill")&&(v.fill=v.textFill),(0,_.hasOwn)(v,"textStroke")&&(v.stroke=v.textStroke)}var m=void 0,x=C0(r)?p.decal:null;o&&x&&(x.dirty=!0,m=(0,Sl.I)(x,o)),p.__decalPattern=m}M0(r)&&p&&(m=p.__decalPattern)&&(p.decal=m),zv(r,i,l,{dataIndex:e,isInit:c,clearStyle:!0}),Hv(r,i.keyframeAnimation,l)}function S1(o,r,e,i,s){var l=r.isGroup?null:r,c=s&&s[o].cfg;if(l){var f=l.ensureState(o);if(!1===i){var p=l.getState(o);p&&(p.style=null)}else f.style=i||null;c&&(f.textConfig=c),(0,sr.MA)(l)}}function e2(o,r,e){var i=e===wu,s=i?r:Vv(r,e),l=s?s.z2:null;null!=l&&((i?o:o.ensureState(e)).z2=l||0)}function T1(o,r,e,i){var s=o.get("renderItem"),l=o.coordinateSystem,c={};l&&(c=l.prepareCustoms?l.prepareCustoms(l):jT[l.type](l));for(var v,m,f=(0,_.defaults)({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function At(be,Ae){return null==Ae&&(Ae=v),r.getStore().get(r.getDimensionIndex(be||0),Ae)},style:function Nt(be,Ae){null==Ae&&(Ae=v);var ke=r.getItemVisual(Ae,"style"),Je=ke&&ke.fill,$e=ke&&ke.opacity,fr=Tt(Ae,wu).getItemStyle();null!=Je&&(fr.fill=Je),null!=$e&&(fr.opacity=$e);var wr={inheritColor:(0,_.isString)(Je)?Je:"#000"},Dr=xt(Ae,wu),cn=Or.Lr(Dr,null,wr,!1,!0);cn.text=Dr.getShallow("show")?(0,_.retrieve2)(o.getFormattedLabel(Ae,wu),_o(r,Ae)):null;var ln=Or.nC(Dr,wr,!1);return jt(be,fr),fr=f1(fr,cn,ln),be&&Wt(fr,be),fr.legacy=!0,fr},ordinalRawValue:function It(be,Ae){null==Ae&&(Ae=v);var ke=r.getDimensionInfo(be=be||0);if(!ke){var Je=r.getDimensionIndex(be);return Je>=0?r.getStore().get(Je,Ae):void 0}var $e=r.get(ke.name,Ae),fr=ke&&ke.ordinalMeta;return fr?fr.categories[$e]:$e},styleEmphasis:function Gt(be,Ae){null==Ae&&(Ae=v);var ke=Tt(Ae,Hl).getItemStyle(),Je=xt(Ae,Hl),$e=Or.Lr(Je,null,null,!0,!0);$e.text=Je.getShallow("show")?(0,_.retrieve3)(o.getFormattedLabel(Ae,Hl),o.getFormattedLabel(Ae,wu),_o(r,Ae)):null;var fr=Or.nC(Je,null,!0);return jt(be,ke),ke=f1(ke,$e,fr),be&&Wt(ke,be),ke.legacy=!0,ke},visual:function ee(be,Ae){if(null==Ae&&(Ae=v),(0,_.hasOwn)(l1,be)){var ke=r.getItemVisual(Ae,"style");return ke?ke[l1[be]]:null}if((0,_.hasOwn)(bT,be))return r.getItemVisual(Ae,be)},barLayout:function oe(be){if("cartesian2d"===l.type){var Ae=l.getBaseAxis();return(0,Ui.Gk)((0,_.defaults)({axis:Ae},be))}},currentSeriesIndices:function de(){return e.getCurrentSeriesIndices()},font:function xe(be){return Or.qT(be,e)}},c.api||{}),p={context:{},seriesId:o.id,seriesName:o.name,seriesIndex:o.seriesIndex,coordSys:c.coordSys,dataInsideLength:r.count(),encode:r2(o.getData())},x={},T={},O={},G={},F=0;F<Du.length;F++){var Q=Du[F];O[Q]=o.getModel(S0[Q]),G[Q]=o.getModel(T0[Q])}function ft(be){return be===v?m||(m=r.getItemModel(be)):r.getItemModel(be)}function Tt(be,Ae){return r.hasItemOption?be===v?x[Ae]||(x[Ae]=ft(be).getModel(S0[Ae])):ft(be).getModel(S0[Ae]):O[Ae]}function xt(be,Ae){return r.hasItemOption?be===v?T[Ae]||(T[Ae]=ft(be).getModel(T0[Ae])):ft(be).getModel(T0[Ae]):G[Ae]}return function(be,Ae){return v=be,m=null,x={},T={},s&&s((0,_.defaults)({dataIndexInside:be,dataIndex:r.getRawIndex(be),actionType:Ae?Ae.type:null},p),f)};function Wt(be,Ae){for(var ke in Ae)(0,_.hasOwn)(Ae,ke)&&(be[ke]=Ae[ke])}function jt(be,Ae){be&&(be.textFill&&(Ae.textFill=be.textFill),be.textPosition&&(Ae.textPosition=be.textPosition))}}function r2(o){var r={};return(0,_.each)(o.dimensions,function(e){var i=o.getDimensionInfo(e);if(!i.isExtraCoord){var s=i.coordDim;(r[s]=r[s]||[])[i.coordDimIndex]=o.getDimensionIndex(e)}}),r}function A0(o,r,e,i,s,l,c){if(i){var f=O0(o,r,e,i,s,l);return f&&c.setItemGraphicEl(e,f),f&&(0,sr.k5)(f,i.focus,i.blurScope,i.emphasisDisabled),f}l.remove(r)}function O0(o,r,e,i,s,l){var c=-1,f=r;r&&C1(r,i,s)&&(c=(0,_.indexOf)(l.childrenRef(),r),r=null);var p=!r,v=r;v?v.clearStates():(v=b0(i),f&&function JT(o,r){r.copyTransform(o),M0(r)&&M0(o)&&(r.setStyle(o.style),r.z=o.z,r.z2=o.z2,r.zlevel=o.zlevel,r.invisible=o.invisible,r.ignore=o.ignore,C0(r)&&C0(o)&&r.setShape(o.shape))}(f,v)),!1===i.morph?v.disableMorphing=!0:v.disableMorphing&&(v.disableMorphing=!1),Uo.normal.cfg=Uo.normal.conOpt=Uo.emphasis.cfg=Uo.emphasis.conOpt=Uo.blur.cfg=Uo.blur.conOpt=Uo.select.cfg=Uo.select.conOpt=null,Uo.isLegacy=!1,function i2(o,r,e,i,s,l){if(!o.isGroup){M1(e,null,l),M1(e,Hl,l);var c=l.normal.conOpt;if(null!=c||null!=l.emphasis.conOpt||null!=l.select.conOpt||null!=l.blur.conOpt){var m=o.getTextContent();if(!1===c)m&&o.removeTextContent();else{c=l.normal.conOpt=c||{type:"text"},m?m.clearStates():(m=b0(c),o.setTextContent(m)),P0(null,m,r,c,null,i,s);for(var x=c&&c.style,T=0;T<Du.length;T++){var O=Du[T];if(O!==wu)S1(O,m,0,E0(c,l[O].conOpt,O),null)}x?m.dirty():m.markRedraw()}}}}(v,e,i,s,p,Uo),function n2(o,r,e,i,s){var l=e.clipPath;if(!1===l)o&&o.getClipPath()&&o.removeClipPath();else if(l){var c=o.getClipPath();c&&C1(c,l,i)&&(c=null),c||(c=b0(l),o.setClipPath(c)),P0(null,c,r,l,null,i,s)}}(v,e,i,s,p),P0(o,v,e,i,Uo,s,p),(0,_.hasOwn)(i,"info")&&(Ul(v).info=i.info);for(var m=0;m<Du.length;m++){var x=Du[m];if(x!==wu)S1(x,v,0,E0(i,Vv(i,x),x),Uo)}return function t2(o,r,e){if(!o.isGroup){var i=o,l=e.currentZLevel;i.z=e.currentZ,i.zlevel=l;var c=r.z2;null!=c&&(i.z2=c||0);for(var f=0;f<Du.length;f++)e2(i,r,Du[f])}}(v,i,s),"group"===i.type&&function a2(o,r,e,i,s){var l=i.children,c=l?l.length:0,f=i.$mergeChildren,p="byName"===f||i.diffChildrenByName,v=!1===f;if(c||p||v){if(p)return void function s2(o){new Hs.Z(o.oldChildren,o.newChildren,b1,b1,o).add(P1).update(P1).remove(l2).execute()}({api:o,oldChildren:r.children()||[],newChildren:l||[],dataIndex:e,seriesModel:s,group:r});v&&r.removeAll();for(var m=0;m<c;m++){var x=l[m],T=r.childAt(m);x?(null==x.ignore&&(x.ignore=!1),O0(o,T,e,x,s,r)):T.ignore=!0}for(var O=r.childCount()-1;O>=m;O--){var G=r.childAt(O);o2(r,G,s)}}}(o,v,e,i,s),c>=0?l.replaceAt(v,c):l.add(v),v}function C1(o,r,e){var i=Ul(o),s=r.type,l=r.shape,c=r.style;return e.isUniversalTransitionEnabled()||null!=s&&s!==i.customGraphicType||"path"===s&&function u2(o){return o&&((0,_.hasOwn)(o,"pathData")||(0,_.hasOwn)(o,"d"))}(l)&&A1(l)!==i.customPathData||"image"===s&&(0,_.hasOwn)(c,"image")&&c.image!==i.customImagePath}function M1(o,r,e){var i=r?Vv(o,r):o,s=r?E0(o,i,Hl):o.style,l=o.type,c=i?i.textConfig:null,f=o.textContent,p=f?r?Vv(f,r):f:null;if(s&&(e.isLegacy||u1(s,l,!!c,!!p))){e.isLegacy=!0;var v=c1(s,l,!r);!c&&v.textConfig&&(c=v.textConfig),!p&&v.textContent&&(p=v.textContent)}!r&&p&&!p.type&&(p.type="text");var x=r?e[r]:e.normal;x.cfg=c,x.conOpt=p}function Vv(o,r){return r?o?o[r]:null:o}function E0(o,r,e){var i=r&&r.style;return null==i&&e===Hl&&o&&(i=o.styleEmphasis),i}function o2(o,r,e){r&&Uv(r,Ul(o).option,e)}function b1(o,r){return(o&&o.name)??"e\0\0"+r}function P1(o,r){var e=this.context;O0(e.api,null!=r?e.oldChildren[r]:null,e.dataIndex,null!=o?e.newChildren[o]:null,e.seriesModel,e.group)}function l2(o){var r=this.context,e=r.oldChildren[o];e&&Uv(e,Ul(e).option,r.seriesModel)}function A1(o){return o&&(o.pathData||o.d)}var Qc=(0,dr.Yf)(),O1=_.clone,w0=_.bind;function E1(o,r,e,i){w1(Qc(e).lastProp,i)||(Qc(e).lastProp=i,r?he.D(e,i,o):(e.stopAnimation(),e.attr(i)))}function w1(o,r){if(_.isObject(o)&&_.isObject(r)){var e=!0;return _.each(r,function(i,s){e=e&&w1(o[s],i)}),!!e}return o===r}function D1(o,r){o[r.get(["label","show"])?"show":"hide"]()}function D0(o){return{x:o.x||0,y:o.y||0,rotation:o.rotation||0}}function L1(o,r,e){var i=r.get("z"),s=r.get("zlevel");o&&o.traverse(function(l){"group"!==l.type&&(null!=i&&(l.z=i),null!=s&&(l.zlevel=s),l.silent=e)})}const L0=function(){function o(){this._dragging=!1,this.animationThreshold=15}return o.prototype.render=function(r,e,i,s){var l=e.get("value"),c=e.get("status");if(this._axisModel=r,this._axisPointerModel=e,this._api=i,s||this._lastValue!==l||this._lastStatus!==c){this._lastValue=l,this._lastStatus=c;var f=this._group,p=this._handle;if(!c||"hide"===c)return f&&f.hide(),void(p&&p.hide());f&&f.show(),p&&p.show();var v={};this.makeElOption(v,l,r,e,i);var m=v.graphicKey;m!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=m;var x=this._moveAnimation=this.determineAnimation(r,e);if(f){var T=_.curry(E1,e,x);this.updatePointerEl(f,v,T),this.updateLabelEl(f,v,T,e)}else f=this._group=new pr.Z,this.createPointerEl(f,v,r,e),this.createLabelEl(f,v,r,e),i.getZr().add(f);L1(f,e,!0),this._renderHandle(l)}},o.prototype.remove=function(r){this.clear(r)},o.prototype.dispose=function(r){this.clear(r)},o.prototype.determineAnimation=function(r,e){var i=e.get("animation"),s=r.axis,l="category"===s.type,c=e.get("snap");if(!c&&!l)return!1;if("auto"===i||null==i){var f=this.animationThreshold;if(l&&s.getBandWidth()>f)return!0;if(c){var p=Ju(r).seriesDataCount,v=s.getExtent();return Math.abs(v[0]-v[1])/p>f}return!1}return!0===i},o.prototype.makeElOption=function(r,e,i,s,l){},o.prototype.createPointerEl=function(r,e,i,s){var l=e.pointer;if(l){var c=Qc(r).pointerEl=new ur[l.type](O1(e.pointer));r.add(c)}},o.prototype.createLabelEl=function(r,e,i,s){if(e.label){var l=Qc(r).labelEl=new Se.ZP(O1(e.label));r.add(l),D1(l,s)}},o.prototype.updatePointerEl=function(r,e,i){var s=Qc(r).pointerEl;s&&e.pointer&&(s.setStyle(e.pointer.style),i(s,{shape:e.pointer.shape}))},o.prototype.updateLabelEl=function(r,e,i,s){var l=Qc(r).labelEl;l&&(l.setStyle(e.label.style),i(l,{x:e.label.x,y:e.label.y}),D1(l,s))},o.prototype._renderHandle=function(r){if(!this._dragging&&this.updateHandleTransform){var f,e=this._axisPointerModel,i=this._api.getZr(),s=this._handle,l=e.getModel("handle"),c=e.get("status");if(!l.get("show")||!c||"hide"===c)return s&&i.remove(s),void(this._handle=null);this._handle||(f=!0,s=this._handle=ur.createIcon(l.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(v){Ca.sT(v.event)},onmousedown:w0(this._onHandleDragMove,this,0,0),drift:w0(this._onHandleDragMove,this),ondragend:w0(this._onHandleDragEnd,this)}),i.add(s)),L1(s,e,!1),s.setStyle(l.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var p=l.get("size");_.isArray(p)||(p=[p,p]),s.scaleX=p[0]/2,s.scaleY=p[1]/2,Si.T9(this,"_doDispatchAxisPointer",l.get("throttle")||0,"fixRate"),this._moveHandleToValue(r,f)}},o.prototype._moveHandleToValue=function(r,e){E1(this._axisPointerModel,!e&&this._moveAnimation,this._handle,D0(this.getHandleTransform(r,this._axisModel,this._axisPointerModel)))},o.prototype._onHandleDragMove=function(r,e){var i=this._handle;if(i){this._dragging=!0;var s=this.updateHandleTransform(D0(i),[r,e],this._axisModel,this._axisPointerModel);this._payloadInfo=s,i.stopAnimation(),i.attr(D0(s)),Qc(i).lastProp=null,this._doDispatchAxisPointer()}},o.prototype._doDispatchAxisPointer=function(){if(this._handle){var e=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},o.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},o.prototype.clear=function(r){this._lastValue=null,this._lastStatus=null;var e=r.getZr(),i=this._group,s=this._handle;e&&i&&(this._lastGraphicKey=null,i&&e.remove(i),s&&e.remove(s),this._group=null,this._handle=null,this._payloadInfo=null),Si.ZH(this,"_doDispatchAxisPointer")},o.prototype.doClear=function(){},o.prototype.buildLabel=function(r,e,i){return{x:r[i=i||0],y:r[1-i],width:e[i],height:e[1-i]}},o}();function N0(o){var i,r=o.get("type"),e=o.getModel(r+"Style");return"line"===r?(i=e.getLineStyle()).fill=null:"shadow"===r&&((i=e.getAreaStyle()).stroke=null),i}function N1(o,r,e,i,s){var c=I1(e.get("value"),r.axis,r.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),f=e.getModel("label"),p=Mn.MY(f.get("padding")||0),v=f.getFont(),m=yt.lP(c,v),x=s.position,T=m.width+p[1]+p[3],O=m.height+p[0]+p[2],G=s.align;"right"===G&&(x[0]-=T),"center"===G&&(x[0]-=T/2);var F=s.verticalAlign;"bottom"===F&&(x[1]-=O),"middle"===F&&(x[1]-=O/2),function f2(o,r,e,i){var s=i.getWidth(),l=i.getHeight();o[0]=Math.min(o[0]+r,s)-r,o[1]=Math.min(o[1]+e,l)-e,o[0]=Math.max(o[0],0),o[1]=Math.max(o[1],0)}(x,T,O,i);var Q=f.get("backgroundColor");(!Q||"auto"===Q)&&(Q=r.get(["axisLine","lineStyle","color"])),o.label={x:x[0],y:x[1],style:(0,Or.Lr)(f,{text:c,font:v,fill:f.getTextColor(),padding:p,backgroundColor:Q}),z2:10}}function I1(o,r,e,i,s){o=r.scale.parse(o);var l=r.scale.getLabel({value:o},{precision:s.precision}),c=s.formatter;if(c){var f={value:Ai.DX(r,{value:o}),axisDimension:r.dim,axisIndex:r.index,seriesData:[]};_.each(i,function(p){var v=e.getSeriesByIndex(p.seriesIndex),x=v&&v.getDataParams(p.dataIndexInside);x&&f.seriesData.push(x)}),_.isString(c)?l=c.replace("{value}",l):_.isFunction(c)&&(l=c(f))}return l}function I0(o,r,e){var i=In.create();return In.rotate(i,i,e.rotation),In.translate(i,i,e.position),ur.applyTransform([o.dataToCoord(r),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],i)}function R1(o,r,e,i,s,l){var c=Vn.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=s.get(["label","margin"]),N1(r,i,s,l,{position:I0(i.axis,o,e),align:c.textAlign,verticalAlign:c.textVerticalAlign})}function R0(o,r,e){return{x1:o[e=e||0],y1:o[1-e],x2:r[e],y2:r[1-e]}}function B1(o,r,e){return{x:o[e=e||0],y:o[1-e],width:r[e],height:r[1-e]}}function G1(o,r,e,i,s,l){return{cx:o,cy:r,r0:e,r:i,startAngle:s,endAngle:l,clockwise:!0}}var d2=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.makeElOption=function(e,i,s,l,c){var f=s.axis,p=f.grid,v=l.get("type"),m=Z1(p,f).getOtherAxis(f).getGlobalExtent(),x=f.toGlobalCoord(f.dataToCoord(i,!0));if(v&&"none"!==v){var T=N0(l),O=p2[v](f,x,m);O.style=T,e.graphicKey=O.type,e.pointer=O}R1(i,e,oh(p.model,s),s,l,c)},r.prototype.getHandleTransform=function(e,i,s){var l=oh(i.axis.grid.model,i,{labelInside:!1});l.labelMargin=s.get(["handle","margin"]);var c=I0(i.axis,e,l);return{x:c[0],y:c[1],rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(e,i,s,l){var c=s.axis,f=c.grid,p=c.getGlobalExtent(!0),v=Z1(f,c).getOtherAxis(c).getGlobalExtent(),m="x"===c.dim?0:1,x=[e.x,e.y];x[m]+=i[m],x[m]=Math.min(p[1],x[m]),x[m]=Math.max(p[0],x[m]);var T=(v[1]+v[0])/2,O=[T,T];return O[m]=x[m],{x:x[0],y:x[1],rotation:e.rotation,cursorPoint:O,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][m]}},r}(L0);function Z1(o,r){var e={};return e[r.dim+"AxisIndex"]=r.index,o.getCartesian(e)}var p2={line:function(o,r,e){return{type:"Line",subPixelOptimize:!0,shape:R0([r,e[0]],[r,e[1]],F1(o))}},shadow:function(o,r,e){var i=Math.max(1,o.getBandWidth());return{type:"Rect",shape:B1([r-i/2,e[0]],[i,e[1]-e[0]],F1(o))}}};function F1(o){return"x"===o.dim?0:1}const v2=d2,_2=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="axisPointer",r.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},r}(Pi.Z);var eo=D(1156),Vl=(0,dr.Yf)(),m2=_.each;function k1(o,r,e){if(!eo.Z.node){var i=r.getZr();Vl(i).records||(Vl(i).records={}),function y2(o,r){function e(i,s){o.on(i,function(l){var c=function T2(o){var r={showTip:[],hideTip:[]},e=function(i){var s=r[i.type];s?s.push(i):(i.dispatchAction=e,o.dispatchAction(i))};return{dispatchAction:e,pendings:r}}(r);m2(Vl(o).records,function(f){f&&s(f,l,c.dispatchAction)}),function x2(o,r){var s,e=o.showTip.length,i=o.hideTip.length;e?s=o.showTip[e-1]:i&&(s=o.hideTip[i-1]),s&&(s.dispatchAction=null,r.dispatchAction(s))}(c.pendings,r)})}Vl(o).initialized||(Vl(o).initialized=!0,e("click",_.curry(z1,"click")),e("mousemove",_.curry(z1,"mousemove")),e("globalout",S2))}(i,r),(Vl(i).records[o]||(Vl(i).records[o]={})).handler=e}}function S2(o,r,e){o.handler("leave",null,e)}function z1(o,r,e,i){r.handler(o,e,i)}function B0(o,r){if(!eo.Z.node){var e=r.getZr();(Vl(e).records||{})[o]&&(Vl(e).records[o]=null)}}const M2=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l=i.getComponent("tooltip"),c=e.get("triggerOn")||l&&l.get("triggerOn")||"mousemove|click";k1("axisPointer",s,function(f,p,v){"none"!==c&&("leave"===f||c.indexOf(f)>=0)&&v({type:"updateAxisPointer",currTrigger:f,x:p&&p.offsetX,y:p&&p.offsetY})})},r.prototype.remove=function(e,i){B0("axisPointer",i)},r.prototype.dispose=function(e,i){B0("axisPointer",i)},r.type="axisPointer",r}(Ti.Z);function U1(o,r){var s,e=[],i=o.seriesIndex;if(null==i||!(s=r.getSeriesByIndex(i)))return{point:[]};var l=s.getData(),c=dr.gO(l,o);if(null==c||c<0||_.isArray(c))return{point:[]};var f=l.getItemGraphicEl(c),p=s.coordinateSystem;if(s.getTooltipPosition)e=s.getTooltipPosition(c)||[];else if(p&&p.dataToPoint)if(o.isStacked){var v=p.getBaseAxis(),x=p.getOtherAxis(v).dim,O="x"===x||"radius"===x?1:0,G=l.mapDimension(v.dim),F=[];F[O]=l.get(G,c),F[1-O]=l.get(l.getCalculationInfo("stackResultDimension"),c),e=p.dataToPoint(F)||[]}else e=p.dataToPoint(l.getValues(_.map(p.dimensions,function(ft){return l.mapDimension(ft)}),c))||[];else if(f){var Q=f.getBoundingRect().clone();Q.applyTransform(f.transform),e=[Q.x+Q.width/2,Q.y+Q.height/2]}return{point:e,el:f}}var H1=(0,dr.Yf)();function b2(o,r,e){var i=o.currTrigger,s=[o.x,o.y],l=o,c=o.dispatchAction||(0,_.bind)(e.dispatchAction,e),f=r.getComponent("axisPointer").coordSysAxesInfo;if(f){Wv(s)&&(s=U1({seriesIndex:l.seriesIndex,dataIndex:l.dataIndex},r).point);var p=Wv(s),v=l.axesInfo,m=f.axesInfo,x="leave"===i||Wv(s),T={},O={},G={list:[],map:{}},F={showPointer:(0,_.curry)(A2,O),showTooltip:(0,_.curry)(O2,G)};(0,_.each)(f.coordSysMap,function(ft,Tt){var xt=p||ft.containPoint(s);(0,_.each)(f.coordSysAxesInfo[Tt],function(At,It){var Nt=At.axis,Gt=function L2(o,r){for(var e=0;e<(o||[]).length;e++){var i=o[e];if(r.axis.dim===i.axisDim&&r.axis.model.componentIndex===i.axisIndex)return i}}(v,At);if(!x&&xt&&(!v||Gt)){var Wt=Gt&&Gt.value;null==Wt&&!p&&(Wt=Nt.pointToData(s)),null!=Wt&&V1(At,Wt,F,!1,T)}})});var Q={};return(0,_.each)(m,function(ft,Tt){var xt=ft.linkGroup;xt&&!O[Tt]&&(0,_.each)(xt.axesInfo,function(At,It){var Nt=O[It];if(At!==ft&&Nt){var Gt=Nt.value;xt.mapper&&(Gt=ft.axis.scale.parse(xt.mapper(Gt,W1(At),W1(ft)))),Q[ft.key]=Gt}})}),(0,_.each)(Q,function(ft,Tt){V1(m[Tt],ft,F,!0,T)}),function E2(o,r,e){var i=e.axesInfo=[];(0,_.each)(r,function(s,l){var c=s.axisPointerModel.option,f=o[l];f?(!s.useHandle&&(c.status="show"),c.value=f.value,c.seriesDataIndices=(f.payloadBatch||[]).slice()):!s.useHandle&&(c.status="hide"),"show"===c.status&&i.push({axisDim:s.axis.dim,axisIndex:s.axis.model.componentIndex,value:c.value})})}(O,m,T),function w2(o,r,e,i){if(!Wv(r)&&o.list.length){var s=((o.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:r[0],y:r[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:s.dataIndexInside,dataIndex:s.dataIndex,seriesIndex:s.seriesIndex,dataByCoordSys:o.list})}else i({type:"hideTip"})}(G,s,o,c),function D2(o,r,e){var i=e.getZr(),s="axisPointerLastHighlights",l=H1(i)[s]||{},c=H1(i)[s]={};(0,_.each)(o,function(v,m){var x=v.axisPointerModel.option;"show"===x.status&&(0,_.each)(x.seriesDataIndices,function(T){c[T.seriesIndex+" | "+T.dataIndex]=T})});var f=[],p=[];(0,_.each)(l,function(v,m){!c[m]&&p.push(v)}),(0,_.each)(c,function(v,m){!l[m]&&f.push(v)}),p.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:p}),f.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:f})}(m,0,e),T}}function V1(o,r,e,i,s){var l=o.axis;if(!l.scale.isBlank()&&l.containData(r)){if(!o.involveSeries)return void e.showPointer(o,r);var c=function P2(o,r){var e=r.axis,i=e.dim,s=o,l=[],c=Number.MAX_VALUE,f=-1;return(0,_.each)(r.seriesModels,function(p,v){var x,T,m=p.getData().mapDimensionsAll(i);if(p.getAxisTooltipData){var O=p.getAxisTooltipData(m,o,e);T=O.dataIndices,x=O.nestestValue}else{if(!(T=p.getData().indicesOfNearest(m[0],o,"category"===e.type?.5:null)).length)return;x=p.getData().get(m[0],T[0])}if(null!=x&&isFinite(x)){var G=o-x,F=Math.abs(G);F<=c&&((F<c||G>=0&&f<0)&&(c=F,f=G,s=x,l.length=0),(0,_.each)(T,function(Q){l.push({seriesIndex:p.seriesIndex,dataIndexInside:Q,dataIndex:p.getData().getRawIndex(Q)})}))}}),{payloadBatch:l,snapToValue:s}}(r,o),f=c.payloadBatch,p=c.snapToValue;f[0]&&null==s.seriesIndex&&(0,_.extend)(s,f[0]),!i&&o.snap&&l.containData(p)&&null!=p&&(r=p),e.showPointer(o,r,f),e.showTooltip(o,c,p)}}function A2(o,r,e,i){o[r.key]={value:e,payloadBatch:i}}function O2(o,r,e,i){var s=e.payloadBatch,l=r.axis,c=l.model,f=r.axisPointerModel;if(r.triggerTooltip&&s.length){var p=r.coordSys.model,v=Ka(p),m=o.map[v];m||(m=o.map[v]={coordSysId:p.id,coordSysIndex:p.componentIndex,coordSysType:p.type,coordSysMainType:p.mainType,dataByAxis:[]},o.list.push(m)),m.dataByAxis.push({axisDim:l.dim,axisIndex:c.componentIndex,axisType:c.type,axisId:c.id,value:i,valueLabelOpt:{precision:f.get(["label","precision"]),formatter:f.get(["label","formatter"])},seriesDataIndices:s.slice()})}}function W1(o){var r=o.axis.model,e={},i=e.axisDim=o.axis.dim;return e.axisIndex=e[i+"AxisIndex"]=r.componentIndex,e.axisName=e[i+"AxisName"]=r.name,e.axisId=e[i+"AxisId"]=r.id,e}function Wv(o){return!o||null==o[0]||isNaN(o[0])||null==o[1]||isNaN(o[1])}function mp(o){as.registerAxisPointerClass("CartesianAxisPointer",v2),o.registerComponentModel(_2),o.registerComponentView(M2),o.registerPreprocessor(function(r){if(r){(!r.axisPointer||0===r.axisPointer.length)&&(r.axisPointer={});var e=r.axisPointer.link;e&&!(0,_.isArray)(e)&&(r.axisPointer.link=[e])}}),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,function(r,e){r.getComponent("axisPointer").coordSysAxesInfo=function Gf(o,r){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function Zf(o,r,e){var i=r.getComponent("tooltip"),s=r.getComponent("axisPointer"),l=s.get("link",!0)||[],c=[];(0,_.each)(e.getCoordinateSystems(),function(f){if(f.axisPointerEnabled){var p=Ka(f.model),v=o.coordSysAxesInfo[p]={};o.coordSysMap[p]=f;var x=f.model.getModel("tooltip",i);if((0,_.each)(f.getAxes(),(0,_.curry)(F,!1,null)),f.getTooltipAxes&&i&&x.get("show")){var T="axis"===x.get("trigger"),O="cross"===x.get(["axisPointer","type"]),G=f.getTooltipAxes(x.get(["axisPointer","axis"]));(T||O)&&(0,_.each)(G.baseAxes,(0,_.curry)(F,!O||"cross",T)),O&&(0,_.each)(G.otherAxes,(0,_.curry)(F,"cross",!1))}}function F(Q,ft,Tt){var xt=Tt.model.getModel("axisPointer",s),At=xt.get("show");if(At&&("auto"!==At||Q||Bo(xt))){null==ft&&(ft=xt.get("triggerTooltip")),xt=Q?function is(o,r,e,i,s,l){var c=r.getModel("axisPointer"),p={};(0,_.each)(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(T){p[T]=(0,_.clone)(c.get(T))}),p.snap="category"!==o.type&&!!l,"cross"===c.get("type")&&(p.type="line");var v=p.label||(p.label={});if(null==v.show&&(v.show=!1),"cross"===s){var m=c.get(["label","show"]);if(v.show=m??!0,!l){var x=p.lineStyle=c.get("crossStyle");x&&(0,_.defaults)(v,x.textStyle)}}return o.model.getModel("axisPointer",new hi.Z(p,e,i))}(Tt,x,s,r,Q,ft):xt;var It=xt.get("snap"),Nt=Ka(Tt.model),Gt=ft||It||"category"===Tt.type,Wt=o.axesInfo[Nt]={key:Nt,axis:Tt,coordSys:f,axisPointerModel:xt,triggerTooltip:ft,involveSeries:Gt,snap:It,useHandle:Bo(xt),seriesModels:[],linkGroup:null};v[Nt]=Wt,o.seriesInvolved=o.seriesInvolved||Gt;var jt=function iu(o,r){for(var e=r.model,i=r.dim,s=0;s<o.length;s++){var l=o[s]||{};if(ju(l[i+"AxisId"],e.id)||ju(l[i+"AxisIndex"],e.componentIndex)||ju(l[i+"AxisName"],e.name))return s}}(l,Tt);if(null!=jt){var ee=c[jt]||(c[jt]={axesInfo:{}});ee.axesInfo[Nt]=Wt,ee.mapper=l[jt].mapper,Wt.linkGroup=ee}}}})}(e,o,r),e.seriesInvolved&&function Ku(o,r){r.eachSeries(function(e){var i=e.coordinateSystem,s=e.get(["tooltip","trigger"],!0),l=e.get(["tooltip","show"],!0);!i||"none"===s||!1===s||"item"===s||!1===l||!1===e.get(["axisPointer","show"],!0)||(0,_.each)(o.coordSysAxesInfo[Ka(i.model)],function(c){var f=c.axis;i.getAxis(f.dim)===f&&(c.seriesModels.push(e),null==c.seriesDataCount&&(c.seriesDataCount=0),c.seriesDataCount+=e.getData().count())})})}(e,o),e}(r,e)}),o.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},b2)}var I2=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.makeElOption=function(e,i,s,l,c){var f=s.axis;"angle"===f.dim&&(this.animationThreshold=Math.PI/18);var p=f.polar,m=p.getOtherAxis(f).getExtent(),x=f.dataToCoord(i),T=l.get("type");if(T&&"none"!==T){var O=N0(l),G=B2[T](f,p,x,m);G.style=O,e.graphicKey=G.type,e.pointer=G}var Q=function R2(o,r,e,i,s){var l=r.axis,c=l.dataToCoord(o),f=i.getAngleAxis().getExtent()[0];f=f/180*Math.PI;var v,m,x,p=i.getRadiusAxis().getExtent();if("radius"===l.dim){var T=In.create();In.rotate(T,T,f),In.translate(T,T,[i.cx,i.cy]),v=ur.applyTransform([c,-s],T);var O=r.getModel("axisLabel").get("rotate")||0,G=Vn.innerTextLayout(f,O*Math.PI/180,-1);m=G.textAlign,x=G.textVerticalAlign}else{var F=p[1];v=i.coordToPoint([F+s,c]);var Q=i.cx,ft=i.cy;m=Math.abs(v[0]-Q)/F<.3?"center":v[0]>Q?"left":"right",x=Math.abs(v[1]-ft)/F<.3?"middle":v[1]>ft?"top":"bottom"}return{position:v,align:m,verticalAlign:x}}(i,s,0,p,l.get(["label","margin"]));N1(e,s,l,c,Q)},r}(L0),B2={line:function(o,r,e,i){return"angle"===o.dim?{type:"Line",shape:R0(r.coordToPoint([i[0],e]),r.coordToPoint([i[1],e]))}:{type:"Circle",shape:{cx:r.cx,cy:r.cy,r:e}}},shadow:function(o,r,e,i){var s=Math.max(1,o.getBandWidth()),l=Math.PI/180;return"angle"===o.dim?{type:"Sector",shape:G1(r.cx,r.cy,i[0],i[1],(-e-s/2)*l,(s/2-e)*l)}:{type:"Sector",shape:G1(r.cx,r.cy,e-s/2,e+s/2,0,2*Math.PI)}}};const G2=I2,F2=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.findAxisModel=function(e){var i;return this.ecModel.eachComponent(e,function(l){l.getCoordSysModel()===this&&(i=l)},this),i},r.type="polar",r.dependencies=["radiusAxis","angleAxis"],r.defaultOption={z:0,center:["50%","50%"],radius:"80%"},r}(Pi.Z);var G0=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",dr.C6).models[0]},r.type="polarAxis",r}(Pi.Z);_.mixin(G0,tu.W);var k2=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="angleAxis",r}(G0),z2=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="radiusAxis",r}(G0),Z0=function(o){function r(e,i){return o.call(this,"radius",e,i)||this}return(0,Re.ZT)(r,o),r.prototype.pointToData=function(e,i){return this.polar.pointToData(e,i)["radius"===this.dim?0:1]},r}(Xa.Z);Z0.prototype.dataToRadius=Xa.Z.prototype.dataToCoord,Z0.prototype.radiusToData=Xa.Z.prototype.coordToData;const U2=Z0;var H2=(0,dr.Yf)(),F0=function(o){function r(e,i){return o.call(this,"angle",e,i||[0,360])||this}return(0,Re.ZT)(r,o),r.prototype.pointToData=function(e,i){return this.polar.pointToData(e,i)["radius"===this.dim?0:1]},r.prototype.calculateCategoryInterval=function(){var e=this,i=e.getLabelModel(),s=e.scale,l=s.getExtent(),c=s.count();if(l[1]-l[0]<1)return 0;var f=l[0],p=e.dataToCoord(f+1)-e.dataToCoord(f),v=Math.abs(p),m=yt.lP(null==f?"":f+"",i.getFont(),"center","top"),T=Math.max(m.height,7)/v;isNaN(T)&&(T=1/0);var O=Math.max(0,Math.floor(T)),G=H2(e.model),F=G.lastAutoInterval,Q=G.lastTickCount;return null!=F&&null!=Q&&Math.abs(F-O)<=1&&Math.abs(Q-c)<=1&&F>O?O=F:(G.lastTickCount=c,G.lastAutoInterval=O),O},r}(Xa.Z);F0.prototype.dataToAngle=Xa.Z.prototype.dataToCoord,F0.prototype.angleToData=Xa.Z.prototype.coordToData;const V2=F0;var $1=["radius","angle"];function X1(o){var r=o.seriesModel,e=o.polarModel;return e&&e.coordinateSystem||r&&r.coordinateSystem}const $2=function(){function o(r){this.dimensions=$1,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new U2,this._angleAxis=new V2,this.axisPointerEnabled=!0,this.name=r||"",this._radiusAxis.polar=this._angleAxis.polar=this}return o.prototype.containPoint=function(r){var e=this.pointToCoord(r);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},o.prototype.containData=function(r){return this._radiusAxis.containData(r[0])&&this._angleAxis.containData(r[1])},o.prototype.getAxis=function(r){return this["_"+r+"Axis"]},o.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},o.prototype.getAxesByScale=function(r){var e=[],i=this._angleAxis,s=this._radiusAxis;return i.scale.type===r&&e.push(i),s.scale.type===r&&e.push(s),e},o.prototype.getAngleAxis=function(){return this._angleAxis},o.prototype.getRadiusAxis=function(){return this._radiusAxis},o.prototype.getOtherAxis=function(r){var e=this._angleAxis;return r===e?this._radiusAxis:e},o.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},o.prototype.getTooltipAxes=function(r){var e=null!=r&&"auto"!==r?this.getAxis(r):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},o.prototype.dataToPoint=function(r,e){return this.coordToPoint([this._radiusAxis.dataToRadius(r[0],e),this._angleAxis.dataToAngle(r[1],e)])},o.prototype.pointToData=function(r,e){var i=this.pointToCoord(r);return[this._radiusAxis.radiusToData(i[0],e),this._angleAxis.angleToData(i[1],e)]},o.prototype.pointToCoord=function(r){var e=r[0]-this.cx,i=r[1]-this.cy,s=this.getAngleAxis(),l=s.getExtent(),c=Math.min(l[0],l[1]),f=Math.max(l[0],l[1]);s.inverse?c=f-360:f=c+360;var p=Math.sqrt(e*e+i*i);e/=p,i/=p;for(var v=Math.atan2(-i,e)/Math.PI*180,m=v<c?1:-1;v<c||v>f;)v+=360*m;return[p,v]},o.prototype.coordToPoint=function(r){var e=r[0],i=r[1]/180*Math.PI;return[Math.cos(i)*e+this.cx,-Math.sin(i)*e+this.cy]},o.prototype.getArea=function(){var r=this.getAngleAxis(),i=this.getRadiusAxis().getExtent().slice();i[0]>i[1]&&i.reverse();var s=r.getExtent(),l=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:i[0],r:i[1],startAngle:-s[0]*l,endAngle:-s[1]*l,clockwise:r.inverse,contain:function(c,f){var p=c-this.cx,v=f-this.cy,m=p*p+v*v-1e-4,x=this.r,T=this.r0;return m<=x*x&&m>=T*T}}},o.prototype.convertToPixel=function(r,e,i){return X1(e)===this?this.dataToPoint(i):null},o.prototype.convertFromPixel=function(r,e,i){return X1(e)===this?this.pointToData(i):null},o}();function Y2(o,r){var e=this,i=e.getAngleAxis(),s=e.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),s.scale.setExtent(1/0,-1/0),o.eachSeries(function(f){if(f.coordinateSystem===e){var p=f.getData();_.each((0,Ai.PY)(p,"radius"),function(v){s.scale.unionExtentFromData(p,v)}),_.each((0,Ai.PY)(p,"angle"),function(v){i.scale.unionExtentFromData(p,v)})}}),(0,Ai.Jk)(i.scale,i.model),(0,Ai.Jk)(s.scale,s.model),"category"===i.type&&!i.onBand){var l=i.getExtent(),c=360/i.scale.count();i.inverse?l[1]+=c:l[1]-=c,i.setExtent(l[0],l[1])}}function Y1(o,r){if(o.type=r.get("type"),o.scale=(0,Ai.aG)(r),o.onBand=r.get("boundaryGap")&&"category"===o.type,o.inverse=r.get("inverse"),function K2(o){return"angleAxis"===o.mainType}(r)){o.inverse=o.inverse!==r.get("clockwise");var e=r.get("startAngle");o.setExtent(e,e+(o.inverse?-360:360))}r.axis=o,o.model=r}const J2={dimensions:$1,create:function(o,r){var e=[];return o.eachComponent("polar",function(i,s){var l=new $2(s+"");l.update=Y2;var c=l.getRadiusAxis(),f=l.getAngleAxis(),p=i.findAxisModel("radiusAxis"),v=i.findAxisModel("angleAxis");Y1(c,p),Y1(f,v),function X2(o,r,e){var i=r.get("center"),s=e.getWidth(),l=e.getHeight();o.cx=(0,Be.GM)(i[0],s),o.cy=(0,Be.GM)(i[1],l);var c=o.getRadiusAxis(),f=Math.min(s,l)/2,p=r.get("radius");null==p?p=[0,"100%"]:_.isArray(p)||(p=[0,p]);var v=[(0,Be.GM)(p[0],f),(0,Be.GM)(p[1],f)];c.inverse?c.setExtent(v[1],v[0]):c.setExtent(v[0],v[1])}(l,i,r),e.push(l),i.coordinateSystem=l,l.model=i}),o.eachSeries(function(i){if("polar"===i.get("coordinateSystem")){var s=i.getReferringComponents("polar",dr.C6).models[0];i.coordinateSystem=s.coordinateSystem}}),e}};var Q2=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function $v(o,r,e){r[1]>r[0]&&(r=r.slice().reverse());var i=o.coordToPoint([r[0],e]),s=o.coordToPoint([r[1],e]);return{x1:i[0],y1:i[1],x2:s[0],y2:s[1]}}function Xv(o){return o.getRadiusAxis().inverse?0:1}function K1(o){var r=o[0],e=o[o.length-1];r&&e&&Math.abs(Math.abs(r.coord-e.coord)-360)<1e-4&&o.pop()}var q2=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="PolarAxisPointer",e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i){if(this.group.removeAll(),e.get("show")){var s=e.axis,l=s.polar,c=l.getRadiusAxis().getExtent(),f=s.getTicksCoords(),p=s.getMinorTicksCoords(),v=_.map(s.getViewLabels(),function(m){m=_.clone(m);var x=s.scale,T="ordinal"===x.type?x.getRawOrdinalNumber(m.tickValue):m.tickValue;return m.coord=s.dataToCoord(T),m});K1(v),K1(f),_.each(Q2,function(m){e.get([m,"show"])&&(!s.scale.isBlank()||"axisLine"===m)&&tC[m](this.group,e,l,f,p,c,v)},this)}},r.type="angleAxis",r}(as),tC={axisLine:function(o,r,e,i,s,l){var v,c=r.getModel(["axisLine","lineStyle"]),f=Xv(e),p=f?0:1;(v=0===l[p]?new os.Z({shape:{cx:e.cx,cy:e.cy,r:l[f]},style:c.getLineStyle(),z2:1,silent:!0}):new _h.Z({shape:{cx:e.cx,cy:e.cy,r:l[f],r0:l[p]},style:c.getLineStyle(),z2:1,silent:!0})).style.fill=null,o.add(v)},axisTick:function(o,r,e,i,s,l){var c=r.getModel("axisTick"),f=(c.get("inside")?-1:1)*c.get("length"),p=l[Xv(e)],v=_.map(i,function(m){return new aa.Z({shape:$v(e,[p,p+f],m.coord)})});o.add(ur.mergePath(v,{style:_.defaults(c.getModel("lineStyle").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})}))},minorTick:function(o,r,e,i,s,l){if(s.length){for(var c=r.getModel("axisTick"),f=r.getModel("minorTick"),p=(c.get("inside")?-1:1)*f.get("length"),v=l[Xv(e)],m=[],x=0;x<s.length;x++)for(var T=0;T<s[x].length;T++)m.push(new aa.Z({shape:$v(e,[v,v+p],s[x][T].coord)}));o.add(ur.mergePath(m,{style:_.defaults(f.getModel("lineStyle").getLineStyle(),_.defaults(c.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(o,r,e,i,s,l,c){var f=r.getCategories(!0),p=r.getModel("axisLabel"),v=p.get("margin"),m=r.get("triggerEvent");_.each(c,function(x,T){var O=p,G=x.tickValue,F=l[Xv(e)],Q=e.coordToPoint([F+v,x.coord]),ft=e.cx,Tt=e.cy,xt=Math.abs(Q[0]-ft)/F<.3?"center":Q[0]>ft?"left":"right",At=Math.abs(Q[1]-Tt)/F<.3?"middle":Q[1]>Tt?"top":"bottom";if(f&&f[G]){var It=f[G];_.isObject(It)&&It.textStyle&&(O=new hi.Z(It.textStyle,p,p.ecModel))}var Nt=new Se.ZP({silent:Vn.isLabelSilent(r),style:(0,Or.Lr)(O,{x:Q[0],y:Q[1],fill:O.getTextColor()||r.get(["axisLine","lineStyle","color"]),text:x.formattedLabel,align:xt,verticalAlign:At})});if(o.add(Nt),m){var Gt=Vn.makeAxisEventDataBase(r);Gt.targetType="axisLabel",Gt.value=x.rawLabel,(0,Fr.A)(Nt).eventData=Gt}},this)},splitLine:function(o,r,e,i,s,l){var f=r.getModel("splitLine").getModel("lineStyle"),p=f.get("color"),v=0;p=p instanceof Array?p:[p];for(var m=[],x=0;x<i.length;x++){var T=v++%p.length;m[T]=m[T]||[],m[T].push(new aa.Z({shape:$v(e,l,i[x].coord)}))}for(x=0;x<m.length;x++)o.add(ur.mergePath(m[x],{style:_.defaults({stroke:p[x%p.length]},f.getLineStyle()),silent:!0,z:r.get("z")}))},minorSplitLine:function(o,r,e,i,s,l){if(s.length){for(var f=r.getModel("minorSplitLine").getModel("lineStyle"),p=[],v=0;v<s.length;v++)for(var m=0;m<s[v].length;m++)p.push(new aa.Z({shape:$v(e,l,s[v][m].coord)}));o.add(ur.mergePath(p,{style:f.getLineStyle(),silent:!0,z:r.get("z")}))}},splitArea:function(o,r,e,i,s,l){if(i.length){var f=r.getModel("splitArea").getModel("areaStyle"),p=f.get("color"),v=0;p=p instanceof Array?p:[p];for(var m=[],x=Math.PI/180,T=-i[0].coord*x,O=Math.min(l[0],l[1]),G=Math.max(l[0],l[1]),F=r.get("clockwise"),Q=1,ft=i.length;Q<=ft;Q++){var Tt=Q===ft?i[0].coord:i[Q].coord,xt=v++%p.length;m[xt]=m[xt]||[],m[xt].push(new bi.C({shape:{cx:e.cx,cy:e.cy,r0:O,r:G,startAngle:T,endAngle:-Tt*x,clockwise:F},silent:!0})),T=-Tt*x}for(Q=0;Q<m.length;Q++)o.add(ur.mergePath(m[Q],{style:_.defaults({fill:p[Q%p.length]},f.getAreaStyle()),silent:!0}))}}};const eC=q2;var rC=["axisLine","axisTickLabel","axisName"],nC=["splitLine","splitArea","minorSplitLine"],iC=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="PolarAxisPointer",e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i){if(this.group.removeAll(),e.get("show")){var s=this._axisGroup,l=this._axisGroup=new pr.Z;this.group.add(l);var c=e.axis,f=c.polar,p=f.getAngleAxis(),v=c.getTicksCoords(),m=c.getMinorTicksCoords(),x=p.getExtent()[0],T=c.getExtent(),O=function oC(o,r,e){return{position:[o.cx,o.cy],rotation:e/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:r.getModel("axisLabel").get("rotate"),z2:1}}(f,e,x),G=new Vn(e,O);_.each(rC,G.add,G),l.add(G.getGroup()),ur.groupTransition(s,l,e),_.each(nC,function(F){e.get([F,"show"])&&!c.scale.isBlank()&&aC[F](this.group,e,f,x,T,v,m)},this)}},r.type="radiusAxis",r}(as),aC={splitLine:function(o,r,e,i,s,l){var f=r.getModel("splitLine").getModel("lineStyle"),p=f.get("color"),v=0;p=p instanceof Array?p:[p];for(var m=[],x=0;x<l.length;x++){var T=v++%p.length;m[T]=m[T]||[],m[T].push(new os.Z({shape:{cx:e.cx,cy:e.cy,r:Math.max(l[x].coord,0)}}))}for(x=0;x<m.length;x++)o.add(ur.mergePath(m[x],{style:_.defaults({stroke:p[x%p.length],fill:null},f.getLineStyle()),silent:!0}))},minorSplitLine:function(o,r,e,i,s,l,c){if(c.length){for(var p=r.getModel("minorSplitLine").getModel("lineStyle"),v=[],m=0;m<c.length;m++)for(var x=0;x<c[m].length;x++)v.push(new os.Z({shape:{cx:e.cx,cy:e.cy,r:c[m][x].coord}}));o.add(ur.mergePath(v,{style:_.defaults({fill:null},p.getLineStyle()),silent:!0}))}},splitArea:function(o,r,e,i,s,l){if(l.length){var f=r.getModel("splitArea").getModel("areaStyle"),p=f.get("color"),v=0;p=p instanceof Array?p:[p];for(var m=[],x=l[0].coord,T=1;T<l.length;T++){var O=v++%p.length;m[O]=m[O]||[],m[O].push(new bi.C({shape:{cx:e.cx,cy:e.cy,r0:x,r:l[T].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),x=l[T].coord}for(T=0;T<m.length;T++)o.add(ur.mergePath(m[T],{style:_.defaults({fill:p[T%p.length]},f.getAreaStyle()),silent:!0}))}}};const sC=iC;function j1(o){return o.get("stack")||"__ec_stack_"+o.seriesIndex}function J1(o,r){return r.dim+o.model.componentIndex}const cC=function lC(o,r,e){var i={},s=function uC(o){var r={};_.each(o,function(i,s){var l=i.getData(),c=i.coordinateSystem,f=c.getBaseAxis(),p=J1(c,f),v=f.getExtent(),m="category"===f.type?f.getBandWidth():Math.abs(v[1]-v[0])/l.count(),x=r[p]||{bandWidth:m,remainedWidth:m,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},T=x.stacks;r[p]=x;var O=j1(i);T[O]||x.autoWidthCount++,T[O]=T[O]||{width:0,maxWidth:0};var G=(0,Be.GM)(i.get("barWidth"),m),F=(0,Be.GM)(i.get("barMaxWidth"),m),Q=i.get("barGap"),ft=i.get("barCategoryGap");G&&!T[O].width&&(G=Math.min(x.remainedWidth,G),T[O].width=G,x.remainedWidth-=G),F&&(T[O].maxWidth=F),null!=Q&&(x.gap=Q),null!=ft&&(x.categoryGap=ft)});var e={};return _.each(r,function(i,s){e[s]={};var l=i.stacks,f=(0,Be.GM)(i.categoryGap,i.bandWidth),p=(0,Be.GM)(i.gap,1),v=i.remainedWidth,m=i.autoWidthCount,x=(v-f)/(m+(m-1)*p);x=Math.max(x,0),_.each(l,function(F,Q){var ft=F.maxWidth;ft&&ft<x&&(ft=Math.min(ft,v),F.width&&(ft=Math.min(ft,F.width)),v-=ft,F.width=ft,m--)}),x=(v-f)/(m+(m-1)*p),x=Math.max(x,0);var O,T=0;_.each(l,function(F,Q){F.width||(F.width=x),O=F,T+=F.width*(1+p)}),O&&(T-=O.width*p);var G=-T/2;_.each(l,function(F,Q){e[s][Q]=e[s][Q]||{offset:G,width:F.width},G+=F.width*(1+p)})}),e}(_.filter(r.getSeriesByType(o),function(l){return!r.isSeriesFiltered(l)&&l.coordinateSystem&&"polar"===l.coordinateSystem.type}));r.eachSeriesByType(o,function(l){if("polar"===l.coordinateSystem.type){var c=l.getData(),f=l.coordinateSystem,p=f.getBaseAxis(),v=J1(f,p),m=j1(l),x=s[v][m],T=x.offset,O=x.width,G=f.getOtherAxis(p),F=l.coordinateSystem.cx,Q=l.coordinateSystem.cy,ft=l.get("barMinHeight")||0,Tt=l.get("barMinAngle")||0;i[m]=i[m]||[];for(var xt=c.mapDimension(G.dim),At=c.mapDimension(p.dim),It=(0,za.M)(c,xt),Nt="radius"!==p.dim||!l.get("roundCap",!0),Gt=G.dataToCoord(0),Wt=0,jt=c.count();Wt<jt;Wt++){var ee=c.get(xt,Wt),oe=c.get(At,Wt),de=ee>=0?"p":"n",xe=Gt;It&&(i[m][oe]||(i[m][oe]={p:Gt,n:Gt}),xe=i[m][oe][de]);var be=void 0,Ae=void 0,ke=void 0,Je=void 0;if("radius"===G.dim){var $e=G.dataToCoord(ee)-Gt,fr=p.dataToCoord(oe);Math.abs($e)<ft&&($e=($e<0?-1:1)*ft),be=xe,Ae=xe+$e,Je=(ke=fr-T)-O,It&&(i[m][oe][de]=Ae)}else{var wr=G.dataToCoord(ee,Nt)-Gt,Dr=p.dataToCoord(oe);Math.abs(wr)<Tt&&(wr=(wr<0?-1:1)*Tt),Ae=(be=Dr+T)+O,ke=xe,Je=xe+wr,It&&(i[m][oe][de]=Je)}c.setItemLayout(Wt,{cx:F,cy:Q,r0:be,r:Ae,startAngle:-ke*Math.PI/180,endAngle:-Je*Math.PI/180,clockwise:ke>=Je})}}})};var hC={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},fC={splitNumber:5},dC=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="polar",r}(Ti.Z);function k0(o,r){r=r||{};var i=o.axis,s={},l=i.position,c=i.orient,f=o.coordinateSystem.getRect(),p=[f.x,f.x+f.width,f.y,f.y+f.height],v={horizontal:{top:p[2],bottom:p[3]},vertical:{left:p[0],right:p[1]}};s.position=["vertical"===c?v.vertical[l]:p[0],"horizontal"===c?v.horizontal[l]:p[3]],s.rotation=Math.PI/2*{horizontal:0,vertical:1}[c],s.labelDirection=s.tickDirection=s.nameDirection={top:-1,bottom:1,right:1,left:-1}[l],o.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),_.retrieve(r.labelInside,o.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var T=r.rotate;return null==T&&(T=o.get(["axisLabel","rotate"])),s.labelRotation="top"===l?-T:T,s.z2=1,s}var vC=["axisLine","axisTickLabel","axisName"],gC=["splitArea","splitLine"],_C=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="SingleAxisPointer",e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){var c=this.group;c.removeAll();var f=this._axisGroup;this._axisGroup=new pr.Z;var p=k0(e),v=new Vn(e,p);_.each(vC,v.add,v),c.add(this._axisGroup),c.add(v.getGroup()),_.each(gC,function(m){e.get([m,"show"])&&mC[m](this,this.group,this._axisGroup,e)},this),ur.groupTransition(f,this._axisGroup,e),o.prototype.render.call(this,e,i,s,l)},r.prototype.remove=function(){fh(this)},r.type="singleAxis",r}(as),mC={splitLine:function(o,r,e,i){var s=i.axis;if(!s.scale.isBlank()){var l=i.getModel("splitLine"),c=l.getModel("lineStyle"),f=c.get("color");f=f instanceof Array?f:[f];for(var p=c.get("width"),v=i.coordinateSystem.getRect(),m=s.isHorizontal(),x=[],T=0,O=s.getTicksCoords({tickModel:l}),G=[],F=[],Q=0;Q<O.length;++Q){var ft=s.toGlobalCoord(O[Q].coord);m?(G[0]=ft,G[1]=v.y,F[0]=ft,F[1]=v.y+v.height):(G[0]=v.x,G[1]=ft,F[0]=v.x+v.width,F[1]=ft);var Tt=new aa.Z({shape:{x1:G[0],y1:G[1],x2:F[0],y2:F[1]},silent:!0});ur.subPixelOptimizeLine(Tt.shape,p);var xt=T++%f.length;x[xt]=x[xt]||[],x[xt].push(Tt)}var At=c.getLineStyle(["color"]);for(Q=0;Q<x.length;++Q)r.add(ur.mergePath(x[Q],{style:_.defaults({stroke:f[Q%f.length]},At),silent:!0}))}},splitArea:function(o,r,e,i){hh(o,e,i,i)}};const yC=_C;var Q1=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.getCoordSysModel=function(){return this},r.type="singleAxis",r.layoutMode="box",r.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},r}(Pi.Z);(0,_.mixin)(Q1,tu.W.prototype);const z0=Q1,SC=function(o){function r(e,i,s,l,c){var f=o.call(this,e,i,s)||this;return f.type=l||"value",f.position=c||"bottom",f}return(0,Re.ZT)(r,o),r.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},r.prototype.pointToData=function(e,i){return this.coordinateSystem.pointToData(e)[0]},r}(Xa.Z);var q1=["single"];function ty(o){var r=o.seriesModel,e=o.singleAxisModel;return e&&e.coordinateSystem||r&&r.coordinateSystem}const CC=function(){function o(r,e,i){this.type="single",this.dimension="single",this.dimensions=q1,this.axisPointerEnabled=!0,this.model=r,this._init(r,e,i)}return o.prototype._init=function(r,e,i){var l=new SC(this.dimension,Ai.aG(r),[0,0],r.get("type"),r.get("position"));l.onBand="category"===l.type&&r.get("boundaryGap"),l.inverse=r.get("inverse"),l.orient=r.get("orient"),r.axis=l,l.model=r,l.coordinateSystem=this,this._axis=l},o.prototype.update=function(r,e){r.eachSeries(function(i){if(i.coordinateSystem===this){var s=i.getData();(0,_.each)(s.mapDimensionsAll(this.dimension),function(l){this._axis.scale.unionExtentFromData(s,l)},this),Ai.Jk(this._axis.scale,this._axis.model)}},this)},o.prototype.resize=function(r,e){this._rect=(0,sn.ME)({left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},o.prototype.getRect=function(){return this._rect},o.prototype._adjustAxis=function(){var r=this._rect,e=this._axis,i=e.isHorizontal(),s=i?[0,r.width]:[0,r.height],l=e.inverse?1:0;e.setExtent(s[l],s[1-l]),this._updateAxisTransform(e,i?r.x:r.y)},o.prototype._updateAxisTransform=function(r,e){var i=r.getExtent(),s=i[0]+i[1],l=r.isHorizontal();r.toGlobalCoord=l?function(c){return c+e}:function(c){return s-c+e},r.toLocalCoord=l?function(c){return c-e}:function(c){return s-c+e}},o.prototype.getAxis=function(){return this._axis},o.prototype.getBaseAxis=function(){return this._axis},o.prototype.getAxes=function(){return[this._axis]},o.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},o.prototype.containPoint=function(r){var e=this.getRect(),i=this.getAxis();return"horizontal"===i.orient?i.contain(i.toLocalCoord(r[0]))&&r[1]>=e.y&&r[1]<=e.y+e.height:i.contain(i.toLocalCoord(r[1]))&&r[0]>=e.y&&r[0]<=e.y+e.height},o.prototype.pointToData=function(r){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(r["horizontal"===e.orient?0:1]))]},o.prototype.dataToPoint=function(r){var e=this.getAxis(),i=this.getRect(),s=[],l="horizontal"===e.orient?0:1;return r instanceof Array&&(r=r[0]),s[l]=e.toGlobalCoord(e.dataToCoord(+r)),s[1-l]=0===l?i.y+i.height/2:i.x+i.width/2,s},o.prototype.convertToPixel=function(r,e,i){return ty(e)===this?this.dataToPoint(i):null},o.prototype.convertFromPixel=function(r,e,i){return ty(e)===this?this.pointToData(i):null},o}(),PC={create:function MC(o,r){var e=[];return o.eachComponent("singleAxis",function(i,s){var l=new CC(i,o,r);l.name="single_"+s,l.resize(i,r),i.coordinateSystem=l,e.push(l)}),o.eachSeries(function(i){if("singleAxis"===i.get("coordinateSystem")){var s=i.getReferringComponents("singleAxis",dr.C6).models[0];i.coordinateSystem=s&&s.coordinateSystem}}),e},dimensions:q1};var ey=["x","y"],AC=["width","height"],OC=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.makeElOption=function(e,i,s,l,c){var f=s.axis,p=f.coordinateSystem,v=U0(p,1-Yv(f)),m=p.dataToPoint(i)[0],x=l.get("type");if(x&&"none"!==x){var T=N0(l),O=EC[x](f,m,v);O.style=T,e.graphicKey=O.type,e.pointer=O}R1(i,e,k0(s),s,l,c)},r.prototype.getHandleTransform=function(e,i,s){var l=k0(i,{labelInside:!1});l.labelMargin=s.get(["handle","margin"]);var c=I0(i.axis,e,l);return{x:c[0],y:c[1],rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(e,i,s,l){var c=s.axis,f=c.coordinateSystem,p=Yv(c),v=U0(f,p),m=[e.x,e.y];m[p]+=i[p],m[p]=Math.min(v[1],m[p]),m[p]=Math.max(v[0],m[p]);var x=U0(f,1-p),T=(x[1]+x[0])/2,O=[T,T];return O[p]=m[p],{x:m[0],y:m[1],rotation:e.rotation,cursorPoint:O,tooltipOption:{verticalAlign:"middle"}}},r}(L0),EC={line:function(o,r,e){return{type:"Line",subPixelOptimize:!0,shape:R0([r,e[0]],[r,e[1]],Yv(o))}},shadow:function(o,r,e){var i=o.getBandWidth();return{type:"Rect",shape:B1([r-i/2,e[0]],[i,e[1]-e[0]],Yv(o))}}};function Yv(o){return o.isHorizontal()?0:1}function U0(o,r){var e=o.getRect();return[e[ey[r]],e[ey[r]]+e[AC[r]]]}const wC=OC;var DC=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="single",r}(Ti.Z);function ry(o,r){var i,e=o.cellSize;1===(i=_.isArray(e)?e:o.cellSize=[e,e]).length&&(i[1]=i[0]);var s=_.map([0,1],function(l){return(0,sn.QM)(r,l)&&(i[l]="auto"),null!=i[l]&&"auto"!==i[l]});(0,sn.dt)(o,r,{type:"box",ignoreSize:s})}const IC=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i,s){var l=(0,sn.tE)(e);o.prototype.init.apply(this,arguments),ry(e,l)},r.prototype.mergeOption=function(e){o.prototype.mergeOption.apply(this,arguments),ry(this.option,e)},r.prototype.getCellSize=function(){return this.option.cellSize},r.type="calendar",r.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},r}(Pi.Z);var ny=D(2575);const BC=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l=this.group;l.removeAll();var c=e.coordinateSystem,f=c.getRangeInfo(),p=c.getOrient(),v=i.getLocaleModel();this._renderDayRect(e,f,l),this._renderLines(e,f,p,l),this._renderYearText(e,f,p,l),this._renderMonthText(e,v,p,l),this._renderWeekText(e,v,f,p,l)},r.prototype._renderDayRect=function(e,i,s){for(var l=e.coordinateSystem,c=e.getModel("itemStyle").getItemStyle(),f=l.getCellWidth(),p=l.getCellHeight(),v=i.start.time;v<=i.end.time;v=l.getNextNDay(v,1).time){var m=l.dataToRect([v],!1).tl,x=new Br.Z({shape:{x:m[0],y:m[1],width:f,height:p},cursor:"default",style:c});s.add(x)}},r.prototype._renderLines=function(e,i,s,l){var c=this,f=e.coordinateSystem,p=e.getModel(["splitLine","lineStyle"]).getLineStyle(),v=e.get(["splitLine","show"]),m=p.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var x=i.start,T=0;x.time<=i.end.time;T++){G(x.formatedDate),0===T&&(x=f.getDateInfo(i.start.y+"-"+i.start.m));var O=x.date;O.setMonth(O.getMonth()+1),x=f.getDateInfo(O)}function G(F){c._firstDayOfMonth.push(f.getDateInfo(F)),c._firstDayPoints.push(f.dataToRect([F],!1).tl);var Q=c._getLinePointsOfOneWeek(e,F,s);c._tlpoints.push(Q[0]),c._blpoints.push(Q[Q.length-1]),v&&c._drawSplitline(Q,p,l)}G(f.getNextNDay(i.end.time,1).formatedDate),v&&this._drawSplitline(c._getEdgesPoints(c._tlpoints,m,s),p,l),v&&this._drawSplitline(c._getEdgesPoints(c._blpoints,m,s),p,l)},r.prototype._getEdgesPoints=function(e,i,s){var l=[e[0].slice(),e[e.length-1].slice()],c="horizontal"===s?0:1;return l[0][c]=l[0][c]-i/2,l[1][c]=l[1][c]+i/2,l},r.prototype._drawSplitline=function(e,i,s){var l=new ia.Z({z2:20,shape:{points:e},style:i});s.add(l)},r.prototype._getLinePointsOfOneWeek=function(e,i,s){for(var l=e.coordinateSystem,c=l.getDateInfo(i),f=[],p=0;p<7;p++){var v=l.getNextNDay(c.time,p),m=l.dataToRect([v.time],!1);f[2*v.day]=m.tl,f[2*v.day+1]=m["horizontal"===s?"bl":"tr"]}return f},r.prototype._formatterLabel=function(e,i){return(0,_.isString)(e)&&e?(0,Mn.wx)(e,i):(0,_.isFunction)(e)?e(i):i.nameMap},r.prototype._yearTextPositionControl=function(e,i,s,l,c){var f=i[0],p=i[1],v=["center","bottom"];"bottom"===l?(p+=c,v=["center","top"]):"left"===l?f-=c:"right"===l?(f+=c,v=["center","top"]):p-=c;var m=0;return("left"===l||"right"===l)&&(m=Math.PI/2),{rotation:m,x:f,y:p,style:{align:v[0],verticalAlign:v[1]}}},r.prototype._renderYearText=function(e,i,s,l){var c=e.getModel("yearLabel");if(c.get("show")){var f=c.get("margin"),p=c.get("position");p||(p="horizontal"!==s?"top":"left");var v=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],m=(v[0][0]+v[1][0])/2,x=(v[0][1]+v[1][1])/2,T="horizontal"===s?0:1,O={top:[m,v[T][1]],bottom:[m,v[1-T][1]],left:[v[1-T][0],x],right:[v[T][0],x]},G=i.start.y;+i.end.y>+i.start.y&&(G=G+"-"+i.end.y);var F=c.get("formatter"),ft=this._formatterLabel(F,{start:i.start.y,end:i.end.y,nameMap:G}),Tt=new Se.ZP({z2:30,style:(0,Or.Lr)(c,{text:ft})});Tt.attr(this._yearTextPositionControl(Tt,O[p],s,p,f)),l.add(Tt)}},r.prototype._monthTextPositionControl=function(e,i,s,l,c){var f="left",p="top",v=e[0],m=e[1];return"horizontal"===s?(m+=c,i&&(f="center"),"start"===l&&(p="bottom")):(v+=c,i&&(p="middle"),"start"===l&&(f="right")),{x:v,y:m,align:f,verticalAlign:p}},r.prototype._renderMonthText=function(e,i,s,l){var c=e.getModel("monthLabel");if(c.get("show")){var f=c.get("nameMap"),p=c.get("margin"),v=c.get("position"),m=c.get("align"),x=[this._tlpoints,this._blpoints];(!f||(0,_.isString)(f))&&(f&&(i=(0,ny.G8)(f)||i),f=i.get(["time","monthAbbr"])||[]);var T="start"===v?0:1,O="horizontal"===s?0:1;p="start"===v?-p:p;for(var G="center"===m,F=0;F<x[T].length-1;F++){var Q=x[T][F].slice(),ft=this._firstDayOfMonth[F];G&&(Q[O]=(this._firstDayPoints[F][O]+x[0][F+1][O])/2);var xt=c.get("formatter"),At=f[+ft.m-1],It={yyyy:ft.y,yy:(ft.y+"").slice(2),MM:ft.m,M:+ft.m,nameMap:At},Nt=this._formatterLabel(xt,It),Gt=new Se.ZP({z2:30,style:(0,_.extend)((0,Or.Lr)(c,{text:Nt}),this._monthTextPositionControl(Q,G,s,v,p))});l.add(Gt)}}},r.prototype._weekTextPositionControl=function(e,i,s,l,c){var f="center",p="middle",v=e[0],m=e[1],x="start"===s;return"horizontal"===i?(v=v+l+(x?1:-1)*c[0]/2,f=x?"right":"left"):(m=m+l+(x?1:-1)*c[1]/2,p=x?"bottom":"top"),{x:v,y:m,align:f,verticalAlign:p}},r.prototype._renderWeekText=function(e,i,s,l,c){var f=e.getModel("dayLabel");if(f.get("show")){var p=e.coordinateSystem,v=f.get("position"),m=f.get("nameMap"),x=f.get("margin"),T=p.getFirstDayOfWeek();m&&!(0,_.isString)(m)||(m&&(i=(0,ny.G8)(m)||i),m=i.get(["time","dayOfWeekShort"])||(0,_.map)(i.get(["time","dayOfWeekAbbr"]),function(It){return It[0]}));var G=p.getNextNDay(s.end.time,7-s.lweek).time,F=[p.getCellWidth(),p.getCellHeight()];x=(0,Be.GM)(x,Math.min(F[1],F[0])),"start"===v&&(G=p.getNextNDay(s.start.time,-(7+s.fweek)).time,x=-x);for(var Q=0;Q<7;Q++){var xt,ft=p.getNextNDay(G,Q),Tt=p.dataToRect([ft.time],!1).center;xt=Math.abs((Q+T)%7);var At=new Se.ZP({z2:30,style:(0,_.extend)((0,Or.Lr)(f,{text:m[xt]}),this._weekTextPositionControl(Tt,l,v,x,F))});c.add(At)}}},r.type="calendar",r}(Ti.Z);var H0=864e5;function iy(o){var r=o.calendarModel,e=o.seriesModel;return r?r.coordinateSystem:e?e.coordinateSystem:null}const ZC=function(){function o(r,e,i){this.type="calendar",this.dimensions=o.dimensions,this.getDimensionsInfo=o.getDimensionsInfo,this._model=r}return o.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},o.prototype.getRangeInfo=function(){return this._rangeInfo},o.prototype.getModel=function(){return this._model},o.prototype.getRect=function(){return this._rect},o.prototype.getCellWidth=function(){return this._sw},o.prototype.getCellHeight=function(){return this._sh},o.prototype.getOrient=function(){return this._orient},o.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},o.prototype.getDateInfo=function(r){var e=(r=Be.sG(r)).getFullYear(),i=r.getMonth()+1,s=i<10?"0"+i:""+i,l=r.getDate(),c=l<10?"0"+l:""+l,f=r.getDay();return{y:e+"",m:s,d:c,day:f=Math.abs((f+7-this.getFirstDayOfWeek())%7),time:r.getTime(),formatedDate:e+"-"+s+"-"+c,date:r}},o.prototype.getNextNDay=function(r,e){return 0===(e=e||0)||(r=new Date(this.getDateInfo(r).time)).setDate(r.getDate()+e),this.getDateInfo(r)},o.prototype.update=function(r,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,s=["width","height"],l=this._model.getCellSize().slice(),c=this._model.getBoxLayoutParams(),f="horizontal"===this._orient?[i,7]:[7,i];_.each([0,1],function(x){m(l,x)&&(c[s[x]]=l[x]*f[x])});var p={width:e.getWidth(),height:e.getHeight()},v=this._rect=sn.ME(c,p);function m(x,T){return null!=x[T]&&"auto"!==x[T]}_.each([0,1],function(x){m(l,x)||(l[x]=v[s[x]]/f[x])}),this._sw=l[0],this._sh=l[1]},o.prototype.dataToPoint=function(r,e){_.isArray(r)&&(r=r[0]),null==e&&(e=!0);var i=this.getDateInfo(r),s=this._rangeInfo;if(e&&!(i.time>=s.start.time&&i.time<s.end.time+H0))return[NaN,NaN];var c=i.day,f=this._getRangeInfo([s.start.time,i.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+c*this._sw+this._sw/2,this._rect.y+f*this._sh+this._sh/2]:[this._rect.x+f*this._sw+this._sw/2,this._rect.y+c*this._sh+this._sh/2]},o.prototype.pointToData=function(r){var e=this.pointToDate(r);return e&&e.time},o.prototype.dataToRect=function(r,e){var i=this.dataToPoint(r,e);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},o.prototype.pointToDate=function(r){var e=Math.floor((r[0]-this._rect.x)/this._sw)+1,i=Math.floor((r[1]-this._rect.y)/this._sh)+1,s=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(i,e-1,s):this._getDateByWeeksAndDay(e,i-1,s)},o.prototype.convertToPixel=function(r,e,i){var s=iy(e);return s===this?s.dataToPoint(i):null},o.prototype.convertFromPixel=function(r,e,i){var s=iy(e);return s===this?s.pointToData(i):null},o.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},o.prototype._initRangeOption=function(){var e,r=this._model.get("range");if(_.isArray(r)&&1===r.length&&(r=r[0]),_.isArray(r))e=r;else{var i=r.toString();if(/^\d{4}$/.test(i)&&(e=[i+"-01-01",i+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(i)){var s=this.getDateInfo(i),l=s.date;l.setMonth(l.getMonth()+1);var c=this.getNextNDay(l,-1);e=[s.formatedDate,c.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(i)&&(e=[i,i])}if(!e)return r;var f=this._getRangeInfo(e);return f.start.time>f.end.time&&e.reverse(),e},o.prototype._getRangeInfo=function(r){var i,e=[this.getDateInfo(r[0]),this.getDateInfo(r[1])];e[0].time>e[1].time&&(i=!0,e.reverse());var s=Math.floor(e[1].time/H0)-Math.floor(e[0].time/H0)+1,l=new Date(e[0].time),c=l.getDate(),f=e[1].date.getDate();l.setDate(c+s-1);var p=l.getDate();if(p!==f)for(var v=l.getTime()-e[1].time>0?1:-1;(p=l.getDate())!==f&&(l.getTime()-e[1].time)*v>0;)s-=v,l.setDate(p-v);var m=Math.floor((s+e[0].day+6)/7),x=i?1-m:m-1;return i&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:s,weeks:m,nthWeek:x,fweek:e[0].day,lweek:e[1].day}},o.prototype._getDateByWeeksAndDay=function(r,e,i){var s=this._getRangeInfo(i);if(r>s.weeks||0===r&&e<s.fweek||r===s.weeks&&e>s.lweek)return null;var l=7*(r-1)-s.fweek+e,c=new Date(s.start.time);return c.setDate(+s.start.d+l),this.getDateInfo(c)},o.create=function(r,e){var i=[];return r.eachComponent("calendar",function(s){var l=new o(s,r,e);i.push(l),s.coordinateSystem=l}),r.eachSeries(function(s){"calendar"===s.get("coordinateSystem")&&(s.coordinateSystem=i[s.get("calendarIndex")||0])}),i},o.dimensions=["time","value"],o}();function ay(o,r){var e;return _.each(r,function(i){null!=o[i]&&"auto"!==o[i]&&(e=!0)}),e}var oy=["transition","enterFrom","leaveTo"],UC=oy.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Kv(o,r,e){if(e&&(!o[e]&&r[e]&&(o[e]={}),o=o[e],r=r[e]),o&&r)for(var i=e?oy:UC,s=0;s<i.length;s++){var l=i[s];null==o[l]&&null!=r[l]&&(o[l]=r[l])}}var VC=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.preventAutoZ=!0,e}return(0,Re.ZT)(r,o),r.prototype.mergeOption=function(e,i){var s=this.option.elements;this.option.elements=null,o.prototype.mergeOption.call(this,e,i),this.option.elements=s},r.prototype.optionUpdated=function(e,i){var s=this.option,l=(i?s:e).elements,c=s.elements=i?[]:s.elements,f=[];this._flatten(l,f,null);var p=dr.ab(c,f,"normalMerge"),v=this._elOptionsToUpdate=[];_.each(p,function(m,x){var T=m.newOption;!T||(v.push(T),function kC(o,r){var e=o.existing;if(r.id=o.keyInfo.id,!r.type&&e&&(r.type=e.type),null==r.parentId){var i=r.parentOption;i?r.parentId=i.id:e&&(r.parentId=e.parentId)}r.parentOption=null}(m,T),function zC(o,r,e){var i=_.extend({},e),s=o[r],l=e.$action||"merge";"merge"===l?s?(_.merge(s,i,!0),(0,sn.dt)(s,i,{ignoreSize:!0}),(0,sn.QT)(e,s),Kv(e,s),Kv(e,s,"shape"),Kv(e,s,"style"),Kv(e,s,"extra"),e.clipPath=s.clipPath):o[r]=i:"replace"===l?o[r]=i:"remove"===l&&s&&(o[r]=null)}(c,x,T),function HC(o,r){if(o&&(o.hv=r.hv=[ay(r,["left","right"]),ay(r,["top","bottom"])],"group"===o.type)){var e=o,i=r;null==e.width&&(e.width=i.width=0),null==e.height&&(e.height=i.height=0)}}(c[x],T))},this),s.elements=_.filter(c,function(m){return m&&delete m.$action,null!=m})},r.prototype._flatten=function(e,i,s){_.each(e,function(l){if(l){s&&(l.parentOption=s),i.push(l);var c=l.children;c&&c.length&&this._flatten(c,i,l),delete l.children}},this)},r.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},r.type="graphic",r.defaultOption={elements:[]},r}(Pi.Z),sy={path:null,compoundPath:null,group:pr.Z,image:gt.ZP,text:Se.ZP},Ho=dr.Yf(),WC=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(){this._elMap=_.createHashMap()},r.prototype.render=function(e,i,s){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,s)},r.prototype._updateElements=function(e){var i=e.useElOptionsToUpdate();if(i){var s=this._elMap,l=this.group,c=e.get("z"),f=e.get("zlevel");_.each(i,function(p){var v=dr.U5(p.id,null),m=null!=v?s.get(v):null,x=dr.U5(p.parentId,null),T=null!=x?s.get(x):l,O=p.type,G=p.style;"text"===O&&G&&p.hv&&p.hv[1]&&(G.textVerticalAlign=G.textBaseline=G.verticalAlign=G.align=null);var F=p.textContent,Q=p.textConfig;if(G&&u1(G,O,!!Q,!!F)){var ft=c1(G,O,!0);!Q&&ft.textConfig&&(Q=p.textConfig=ft.textConfig),!F&&ft.textContent&&(F=ft.textContent)}var Tt=function $C(o){return o=_.extend({},o),_.each(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(sn.gN),function(r){delete o[r]}),o}(p),xt=p.$action||"merge",At="merge"===xt,It="replace"===xt;if(At){var Gt=m;(Nt=!m)?Gt=ly(v,T,p.type,s):(Gt&&(Ho(Gt).isNew=!1),x1(Gt)),Gt&&(zv(Gt,Tt,e,{isInit:Nt}),uy(Gt,p,c,f))}else if(It){jv(m,p,s,e);var Wt=ly(v,T,p.type,s);Wt&&(zv(Wt,Tt,e,{isInit:!0}),uy(Wt,p,c,f))}else"remove"===xt&&(g1(m,p),jv(m,p,s,e));var jt=s.get(v);if(jt&&F)if(At){var ee=jt.getTextContent();ee?ee.attr(F):jt.setTextContent(new Se.ZP(F))}else It&&jt.setTextContent(new Se.ZP(F));if(jt){var oe=p.clipPath;if(oe){var de=oe.type,xe=void 0,Nt=!1;if(At){var be=jt.getClipPath();xe=(Nt=!be||Ho(be).type!==de)?V0(de):be}else It&&(Nt=!0,xe=V0(de));jt.setClipPath(xe),zv(xe,oe,e,{isInit:Nt}),Hv(xe,oe.keyframeAnimation,e)}var Ae=Ho(jt);jt.setTextConfig(Q),Ae.option=p,function XC(o,r,e){var i=(0,Fr.A)(o).eventData;!o.silent&&!o.ignore&&!i&&(i=(0,Fr.A)(o).eventData={componentType:"graphic",componentIndex:r.componentIndex,name:o.name}),i&&(i.info=e.info)}(jt,e,p),ur.setTooltipConfig({el:jt,componentModel:e,itemName:jt.name,itemTooltipOption:p.tooltip}),Hv(jt,p.keyframeAnimation,e)}})}},r.prototype._relocate=function(e,i){for(var s=e.option.elements,l=this.group,c=this._elMap,f=i.getWidth(),p=i.getHeight(),v=["x","y"],m=0;m<s.length;m++)if((O=null!=(T=dr.U5((x=s[m]).id,null))?c.get(T):null)&&O.isGroup){var F=(G=O.parent)===l,Q=Ho(O),ft=Ho(G);Q.width=(0,Be.GM)(Q.option.width,F?f:ft.width)||0,Q.height=(0,Be.GM)(Q.option.height,F?p:ft.height)||0}for(m=s.length-1;m>=0;m--){var x,T,O;if(O=null!=(T=dr.U5((x=s[m]).id,null))?c.get(T):null){ft=Ho(G=O.parent);var G,xt={},At=sn.p$(O,x,G===l?{width:f,height:p}:{width:ft.width,height:ft.height},null,{hv:x.hv,boundingMode:x.bounding},xt);if(!Ho(O).isNew&&At){for(var It=x.transition,Nt={},Gt=0;Gt<v.length;Gt++){var Wt=v[Gt],jt=xt[Wt];It&&(Jc(It)||_.indexOf(It,Wt)>=0)?Nt[Wt]=jt:O[Wt]=jt}(0,he.D)(O,Nt,e,0)}else O.attr(xt)}}},r.prototype._clear=function(){var e=this,i=this._elMap;i.each(function(s){jv(s,Ho(s).option,i,e._lastGraphicModel)}),this._elMap=_.createHashMap()},r.prototype.dispose=function(){this._clear()},r.type="graphic",r}(Ti.Z);function V0(o){var e=new(_.hasOwn(sy,o)?sy[o]:ur.getShapeClass(o))({});return Ho(e).type=o,e}function ly(o,r,e,i){var s=V0(e);return r.add(s),i.set(o,s),Ho(s).id=o,Ho(s).isNew=!0,s}function jv(o,r,e,i){o&&o.parent&&("group"===o.type&&o.traverse(function(l){jv(l,r,e,i)}),Uv(o,r,i),e.removeKey(Ho(o).id))}function uy(o,r,e,i){o.isGroup||_.each([["cursor",Ma.ZP.prototype.cursor],["zlevel",i||0],["z",e||0],["z2",0]],function(s){var l=s[0];_.hasOwn(r,l)?o[l]=_.retrieve2(r[l],s[1]):null==o[l]&&(o[l]=s[1])}),_.each(_.keys(r),function(s){if(0===s.indexOf("on")){var l=r[s];o[s]=_.isFunction(l)?l:null}}),_.hasOwn(r,"draggable")&&(o.draggable=r.draggable),null!=r.name&&(o.name=r.name),null!=r.id&&(o.id=r.id)}var cy=["x","y","radius","angle","single"],KC=["cartesian2d","polar","singleAxis"];function Lu(o){return o+"Axis"}function hy(o){var r=o.ecModel,e={infoList:[],infoMap:(0,_.createHashMap)()};return o.eachTargetAxis(function(i,s){var l=r.getComponent(Lu(i),s);if(l){var c=l.getCoordSysModel();if(c){var f=c.uid,p=e.infoMap.get(f);p||(e.infoList.push(p={model:c,axisModels:[]}),e.infoMap.set(f,p)),p.axisModels.push(l)}}}),e}var W0=function(){function o(){this.indexList=[],this.indexMap=[]}return o.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},o}();function fy(o){var r={};return(0,_.each)(["start","end","startValue","endValue","throttle"],function(e){o.hasOwnProperty(e)&&(r[e]=o[e])}),r}const yp=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i,s){var l=fy(e);this.settledOption=l,this.mergeDefaultAndTheme(e,s),this._doInit(l)},r.prototype.mergeOption=function(e){var i=fy(e);(0,_.merge)(this.option,e,!0),(0,_.merge)(this.settledOption,i,!0),this._doInit(i)},r.prototype._doInit=function(e){var i=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var s=this.settledOption;(0,_.each)([["start","startValue"],["end","endValue"]],function(l,c){"value"===this._rangePropMode[c]&&(i[l[0]]=s[l[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var e=this.get("orient",!0),i=this._targetAxisInfoMap=(0,_.createHashMap)();this._fillSpecifiedTargetAxis(i)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(i,this._orient)),this._noTarget=!0,i.each(function(l){l.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(e){var i=!1;return(0,_.each)(cy,function(s){var l=this.getReferringComponents(Lu(s),dr.iP);if(l.specified){i=!0;var c=new W0;(0,_.each)(l.models,function(f){c.add(f.componentIndex)}),e.set(s,c)}},this),i},r.prototype._fillAutoTargetAxisByOrient=function(e,i){var s=this.ecModel,l=!0;if(l){var c="vertical"===i?"y":"x";p(s.findComponents({mainType:c+"Axis"}),c)}function p(v,m){var x=v[0];if(x){var T=new W0;if(T.add(x.componentIndex),e.set(m,T),l=!1,"x"===m||"y"===m){var O=x.getReferringComponents("grid",dr.C6).models[0];O&&(0,_.each)(v,function(G){x.componentIndex!==G.componentIndex&&O===G.getReferringComponents("grid",dr.C6).models[0]&&T.add(G.componentIndex)})}}}l&&p(s.findComponents({mainType:"singleAxis",filter:function(m){return m.get("orient",!0)===i}}),"single"),l&&(0,_.each)(cy,function(v){if(l){var m=s.findComponents({mainType:Lu(v),filter:function(T){return"category"===T.get("type",!0)}});if(m[0]){var x=new W0;x.add(m[0].componentIndex),e.set(v,x),l=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(i){!e&&(e=i)},this),"y"===e?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var i=this.ecModel.option;this.option.throttle=i.animation&&i.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(e){var i=this._rangePropMode,s=this.get("rangeMode");(0,_.each)([["start","startValue"],["end","endValue"]],function(l,c){var f=null!=e[l[0]],p=null!=e[l[1]];f&&!p?i[c]="percent":!f&&p?i[c]="value":s?i[c]=s[c]:f&&(i[c]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(i,s){null==e&&(e=this.ecModel.getComponent(Lu(i),s))},this),e},r.prototype.eachTargetAxis=function(e,i){this._targetAxisInfoMap.each(function(s,l){(0,_.each)(s.indexList,function(c){e.call(i,l,c)})})},r.prototype.getAxisProxy=function(e,i){var s=this.getAxisModel(e,i);if(s)return s.__dzAxisProxy},r.prototype.getAxisModel=function(e,i){var s=this._targetAxisInfoMap.get(e);if(s&&s.indexMap[i])return this.ecModel.getComponent(Lu(e),i)},r.prototype.setRawRange=function(e){var i=this.option,s=this.settledOption;(0,_.each)([["start","startValue"],["end","endValue"]],function(l){(null!=e[l[0]]||null!=e[l[1]])&&(i[l[0]]=s[l[0]]=e[l[0]],i[l[1]]=s[l[1]]=e[l[1]])},this),this._updateRangeUse(e)},r.prototype.setCalculatedRange=function(e){var i=this.option;(0,_.each)(["start","startValue","end","endValue"],function(s){i[s]=e[s]})},r.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},r.prototype.getValueRange=function(e,i){if(null!=e||null!=i)return this.getAxisProxy(e,i).getDataValueWindow();var s=this.findRepresentativeAxisProxy();return s?s.getDataValueWindow():void 0},r.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var i,s=this._targetAxisInfoMap.keys(),l=0;l<s.length;l++)for(var c=s[l],f=this._targetAxisInfoMap.get(c),p=0;p<f.indexList.length;p++){var v=this.getAxisProxy(c,f.indexList[p]);if(v.hostedBy(this))return v;i||(i=v)}return i},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(Pi.Z),tM=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="dataZoom.select",r}(yp),$0=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){this.dataZoomModel=e,this.ecModel=i,this.api=s},r.type="dataZoom",r}(Ti.Z),nM=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="dataZoom.select",r}($0);var iM=D(3697),_f=_.each,dy=Be.dt;const sM=function(){function o(r,e,i,s){this._dimName=r,this._axisIndex=e,this.ecModel=s,this._dataZoomModel=i}return o.prototype.hostedBy=function(r){return this._dataZoomModel===r},o.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},o.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},o.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(e){if(function jC(o){var r=o.get("coordinateSystem");return(0,_.indexOf)(KC,r)>=0}(e)){var i=Lu(this._dimName),s=e.getReferringComponents(i,dr.C6).models[0];s&&this._axisIndex===s.componentIndex&&r.push(e)}},this),r},o.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},o.prototype.getMinMaxSpan=function(){return _.clone(this._minMaxSpan)},o.prototype.calculateDataWindow=function(r){var v,e=this._dataExtent,s=this.getAxisModel().axis.scale,l=this._dataZoomModel.getRangePropMode(),c=[0,100],f=[],p=[];_f(["start","end"],function(T,O){var G=r[T],F=r[T+"Value"];"percent"===l[O]?(null==G&&(G=c[O]),F=s.parse(Be.NU(G,c,e))):(v=!0,F=null==F?e[O]:s.parse(F),G=Be.NU(F,e,c)),p[O]=null==F||isNaN(F)?e[O]:F,f[O]=null==G||isNaN(G)?c[O]:G}),dy(p),dy(f);var m=this._minMaxSpan;function x(T,O,G,F,Q){var ft=Q?"Span":"ValueSpan";Gl(0,T,G,"all",m["min"+ft],m["max"+ft]);for(var Tt=0;Tt<2;Tt++)O[Tt]=Be.NU(T[Tt],G,F,!0),Q&&(O[Tt]=s.parse(O[Tt]))}return v?x(p,f,e,c,!1):x(f,p,c,e,!0),{valueWindow:p,percentWindow:f}},o.prototype.reset=function(r){if(r===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function oM(o,r,e){var i=[1/0,-1/0];_f(e,function(c){(0,Ai.AH)(i,c.getData(),r)});var s=o.getAxisModel(),l=(0,iM.Qw)(s.axis.scale,s,i).calculate();return[l.min,l.max]}(this,this._dimName,e),this._updateMinMaxSpan();var i=this.calculateDataWindow(r.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,this._setAxisModel()}},o.prototype.filterData=function(r,e){if(r===this._dataZoomModel){var i=this._dimName,s=this.getTargetSeriesModels(),l=r.get("filterMode"),c=this._valueWindow;"none"!==l&&_f(s,function(p){var v=p.getData(),m=v.mapDimensionsAll(i);if(m.length){if("weakFilter"===l){var x=v.getStore(),T=_.map(m,function(O){return v.getDimensionIndex(O)},v);v.filterSelf(function(O){for(var G,F,Q,ft=0;ft<m.length;ft++){var Tt=x.get(T[ft],O),xt=!isNaN(Tt),At=Tt<c[0],It=Tt>c[1];if(xt&&!At&&!It)return!0;xt&&(Q=!0),At&&(G=!0),It&&(F=!0)}return Q&&G&&F})}else _f(m,function(O){if("empty"===l)p.setData(v=v.map(O,function(F){return function f(p){return p>=c[0]&&p<=c[1]}(F)?F:NaN}));else{var G={};G[O]=c,v.selectRange(G)}});_f(m,function(O){v.setApproximateExtent(c,O)})}})}},o.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},e=this._dataZoomModel,i=this._dataExtent;_f(["min","max"],function(s){var l=e.get(s+"Span"),c=e.get(s+"ValueSpan");null!=c&&(c=this.getAxisModel().axis.scale.parse(c)),null!=c?l=Be.NU(i[0]+c,i,[0,100],!0):null!=l&&(c=Be.NU(l,[0,100],i,!0)-i[0]),r[s+"Span"]=l,r[s+"ValueSpan"]=c},this)},o.prototype._setAxisModel=function(){var r=this.getAxisModel(),e=this._percentWindow,i=this._valueWindow;if(e){var s=Be.M9(i,[0,500]);s=Math.min(s,20);var l=r.axis.scale.rawExtentInfo;0!==e[0]&&l.setDeterminedMinMax("min",+i[0].toFixed(s)),100!==e[1]&&l.setDeterminedMinMax("max",+i[1].toFixed(s)),l.freeze()}},o}(),uM={getTargetSeries:function(o){function r(s){o.eachComponent("dataZoom",function(l){l.eachTargetAxis(function(c,f){var p=o.getComponent(Lu(c),f);s(c,f,p,l)})})}r(function(s,l,c,f){c.__dzAxisProxy=null});var e=[];r(function(s,l,c,f){c.__dzAxisProxy||(c.__dzAxisProxy=new sM(s,l,f,o),e.push(c.__dzAxisProxy))});var i=(0,_.createHashMap)();return(0,_.each)(e,function(s){(0,_.each)(s.getTargetSeriesModels(),function(l){i.set(l.uid,l)})}),i},overallReset:function(o,r){o.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(i,s){e.getAxisProxy(i,s).reset(e)}),e.eachTargetAxis(function(i,s){e.getAxisProxy(i,s).filterData(e,r)})}),o.eachComponent("dataZoom",function(e){var i=e.findRepresentativeAxisProxy();if(i){var s=i.getDataPercentWindow(),l=i.getDataValueWindow();e.setCalculatedRange({start:s[0],end:s[1],startValue:l[0],endValue:l[1]})}})}};var py=!1;function X0(o){py||(py=!0,o.registerProcessor(o.PRIORITY.PROCESSOR.FILTER,uM),function cM(o){o.registerAction("dataZoom",function(r,e){var i=function JC(o,r){var l,e=(0,_.createHashMap)(),i=[],s=(0,_.createHashMap)();o.eachComponent({mainType:"dataZoom",query:r},function(m){s.get(m.uid)||f(m)});do{l=!1,o.eachComponent("dataZoom",c)}while(l);function c(m){!s.get(m.uid)&&function p(m){var x=!1;return m.eachTargetAxis(function(T,O){var G=e.get(T);G&&G[O]&&(x=!0)}),x}(m)&&(f(m),l=!0)}function f(m){s.set(m.uid,!0),i.push(m),function v(m){m.eachTargetAxis(function(x,T){(e.get(x)||e.set(x,[]))[T]=!0})}(m)}return i}(e,r);(0,_.each)(i,function(s){s.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}(o),o.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function hM(o){o.registerComponentModel(tM),o.registerComponentView(nM),X0(o)}var Vo=function o(){},vy={};function mf(o,r){vy[o]=r}function gy(o){return vy[o]}const dM=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.optionUpdated=function(){o.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;_.each(this.option.feature,function(i,s){var l=gy(s);l&&(l.getDefaultOption&&(l.defaultOption=l.getDefaultOption(e)),_.merge(i,l.defaultOption))})},r.type="toolbox",r.layoutMode={type:"box",ignoreSize:!0},r.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},r}(Pi.Z);function _y(o,r){var e=Mn.MY(r.get("padding")),i=r.getItemStyle(["color","opacity"]);return i.fill=r.get("backgroundColor"),new Br.Z({shape:{x:o.x-e[3],y:o.y-e[0],width:o.width+e[1]+e[3],height:o.height+e[0]+e[2],r:r.get("borderRadius")},style:i,silent:!0,z2:-1})}const _M=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){var c=this.group;if(c.removeAll(),e.get("show")){var f=+e.get("itemSize"),p="vertical"===e.get("orient"),v=e.get("feature")||{},m=this._features||(this._features={}),x=[];_.each(v,function(G,F){x.push(F)}),new Hs.Z(this._featureNames||[],x).add(T).update(T).remove(_.curry(T,null)).execute(),this._featureNames=x,function pM(o,r,e){var i=r.getBoxLayoutParams(),s=r.get("padding"),l={width:e.getWidth(),height:e.getHeight()},c=(0,sn.ME)(i,l,s);(0,sn.BZ)(r.get("orient"),o,r.get("itemGap"),c.width,c.height),(0,sn.p$)(o,i,l,s)}(c,e,s),c.add(_y(c.getBoundingRect(),e)),p||c.eachChild(function(G){var F=G.__title,Q=G.ensureState("emphasis"),ft=Q.textConfig||(Q.textConfig={}),Tt=G.getTextContent(),xt=Tt&&Tt.ensureState("emphasis");if(xt&&!_.isFunction(xt)&&F){var At=xt.style||(xt.style={}),It=yt.lP(F,Se.ZP.makeFont(At)),Nt=G.x+c.x,Wt=!1;G.y+c.y+f+It.height>s.getHeight()&&(ft.position="top",Wt=!0);var jt=Wt?-5-It.height:f+10;Nt+It.width/2>s.getWidth()?(ft.position=["100%",jt],At.align="right"):Nt-It.width/2<0&&(ft.position=[0,jt],At.align="left")}})}function T(G,F){var At,Q=x[G],ft=x[F],Tt=v[Q],xt=new hi.Z(Tt,e,e.ecModel);if(l&&null!=l.newTitle&&l.featureName===Q&&(Tt.title=l.newTitle),Q&&!ft){if(function gM(o){return 0===o.indexOf("my")}(Q))At={onclick:xt.option.onclick,featureName:Q};else{var It=gy(Q);if(!It)return;At=new It}m[Q]=At}else if(!(At=m[ft]))return;At.uid=(0,Ii.Kr)("toolbox-feature"),At.model=xt,At.ecModel=i,At.api=s;var Nt=At instanceof Vo;Q||!ft?!xt.get("show")||Nt&&At.unusable?Nt&&At.remove&&At.remove(i,s):(function O(G,F,Q){var It,Nt,ft=G.getModel("iconStyle"),Tt=G.getModel(["emphasis","iconStyle"]),xt=F instanceof Vo&&F.getIcons?F.getIcons():G.get("icon"),At=G.get("title")||{};_.isString(xt)?(It={})[Q]=xt:It=xt,_.isString(At)?(Nt={})[Q]=At:Nt=At;var Gt=G.iconPaths={};_.each(It,function(Wt,jt){var ee=ur.createIcon(Wt,{},{x:-f/2,y:-f/2,width:f,height:f});ee.setStyle(ft.getItemStyle()),ee.ensureState("emphasis").style=Tt.getItemStyle();var de=new Se.ZP({style:{text:Nt[jt],align:Tt.get("textAlign"),borderRadius:Tt.get("textBorderRadius"),padding:Tt.get("textPadding"),fill:null},ignore:!0});ee.setTextContent(de),ur.setTooltipConfig({el:ee,componentModel:e,itemName:jt,formatterParamsExtra:{title:Nt[jt]}}),ee.__title=Nt[jt],ee.on("mouseover",function(){var xe=Tt.getItemStyle(),be=p?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";de.setStyle({fill:Tt.get("textFill")||xe.fill||xe.stroke||"#000",backgroundColor:Tt.get("textBackgroundColor")}),ee.setTextConfig({position:Tt.get("textPosition")||be}),de.ignore=!e.get("showTitle"),s.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==G.get(["iconStatus",jt])&&s.leaveEmphasis(this),de.hide()}),("emphasis"===G.get(["iconStatus",jt])?sr.fD:sr.Mh)(ee),c.add(ee),ee.on("click",_.bind(F.onclick,F,i,s,jt)),Gt[jt]=ee})}(xt,At,Q),xt.setIconStatus=function(Gt,Wt){var jt=this.option,ee=this.iconPaths;jt.iconStatus=jt.iconStatus||{},jt.iconStatus[Gt]=Wt,ee[Gt]&&("emphasis"===Wt?sr.fD:sr.Mh)(ee[Gt])},At instanceof Vo&&At.render&&At.render(xt,i,s,l)):Nt&&At.dispose&&At.dispose(i,s)}},r.prototype.updateView=function(e,i,s,l){_.each(this._features,function(c){c instanceof Vo&&c.updateView&&c.updateView(c.model,i,s,l)})},r.prototype.remove=function(e,i){_.each(this._features,function(s){s instanceof Vo&&s.remove&&s.remove(e,i)}),this.group.removeAll()},r.prototype.dispose=function(e,i){_.each(this._features,function(s){s instanceof Vo&&s.dispose&&s.dispose(e,i)})},r.type="toolbox",r}(Ti.Z),yM=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.onclick=function(e,i){var s=this.model,l=s.get("name")||e.get("title.0.text")||"echarts",c="svg"===i.getZr().painter.getType(),f=c?"svg":s.get("type",!0)||"png",p=i.getConnectedDataURL({type:f,backgroundColor:s.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:s.get("connectedBackgroundColor"),excludeComponents:s.get("excludeComponents"),pixelRatio:s.get("pixelRatio")}),v=eo.Z.browser;if((0,_.isFunction)(MouseEvent)&&(v.newEdge||!v.ie&&!v.edge)){var m=document.createElement("a");m.download=l+"."+f,m.target="_blank",m.href=p;var x=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});m.dispatchEvent(x)}else if(window.navigator.msSaveOrOpenBlob||c){var T=p.split(","),O=T[0].indexOf("base64")>-1,G=c?decodeURIComponent(T[1]):T[1];O&&(G=window.atob(G));var F=l+"."+f;if(window.navigator.msSaveOrOpenBlob){for(var Q=G.length,ft=new Uint8Array(Q);Q--;)ft[Q]=G.charCodeAt(Q);var Tt=new Blob([ft]);window.navigator.msSaveOrOpenBlob(Tt,F)}else{var xt=document.createElement("iframe");document.body.appendChild(xt);var At=xt.contentWindow,It=At.document;It.open("image/svg+xml","replace"),It.write(G),It.close(),At.focus(),It.execCommand("SaveAs",!0,F),document.body.removeChild(xt)}}else{var Nt=s.get("lang"),Gt='<body style="margin:0;"><img src="'+p+'" style="max-width:100%;" title="'+(Nt&&Nt[0]||"")+'" /></body>',Wt=window.open();Wt.document.write(Gt),Wt.document.title=l}},r.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},r}(Vo);var my="__ec_magicType_stack__",xM=[["line","bar"],["stack"]],SM=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.getIcons=function(){var e=this.model,i=e.get("icon"),s={};return _.each(e.get("type"),function(l){i[l]&&(s[l]=i[l])}),s},r.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},r.prototype.onclick=function(e,i,s){var l=this.model,c=l.get(["seriesIndex",s]);if(yy[s]){var f={series:[]};_.each(xM,function(x){_.indexOf(x,s)>=0&&_.each(x,function(T){l.setIconStatus(T,"normal")})}),l.setIconStatus(s,"emphasis"),e.eachComponent({mainType:"series",query:null==c?null:{seriesIndex:c}},function(x){var G=yy[s](x.subType,x.id,x,l);G&&(_.defaults(G,x.option),f.series.push(G));var F=x.coordinateSystem;if(F&&"cartesian2d"===F.type&&("line"===s||"bar"===s)){var Q=F.getAxesByScale("ordinal")[0];if(Q){var Tt=Q.dim+"Axis",At=x.getReferringComponents(Tt,dr.C6).models[0].componentIndex;f[Tt]=f[Tt]||[];for(var It=0;It<=At;It++)f[Tt][At]=f[Tt][At]||{};f[Tt][At].boundaryGap="bar"===s}}});var v,m=s;"stack"===s&&(v=_.merge({stack:l.option.title.tiled,tiled:l.option.title.stack},l.option.title),"emphasis"!==l.get(["iconStatus",s])&&(m="tiled")),i.dispatchAction({type:"changeMagicType",currentType:m,newOption:f,newTitle:v,featureName:"magicType"})}},r}(Vo),yy={line:function(o,r,e,i){if("bar"===o)return _.merge({id:r,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(o,r,e,i){if("line"===o)return _.merge({id:r,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(o,r,e,i){var s=e.get("stack")===my;if("line"===o||"bar"===o)return i.setIconStatus("stack",s?"normal":"emphasis"),_.merge({id:r,stack:s?"":my},i.get(["option","stack"])||{},!0)}};ou.zl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(o,r){r.mergeOption(o.newOption)});const TM=SM;var Jv=new Array(60).join("-");function MM(o){var r=[];return _.each(o,function(e,i){var s=e.categoryAxis,c=e.valueAxis.dim,f=[" "].concat(_.map(e.series,function(O){return O.name})),p=[s.model.getCategories()];_.each(e.series,function(O){var G=O.getRawData();p.push(O.getRawData().mapArray(G.mapDimension(c),function(F){return F}))});for(var v=[f.join("\t")],m=0;m<p[0].length;m++){for(var x=[],T=0;T<p.length;T++)x.push(p[T][m]);v.push(x.join("\t"))}r.push(v.join("\n"))}),r.join("\n\n"+Jv+"\n\n")}function bM(o){return _.map(o,function(r){var e=r.getRawData(),i=[r.name],s=[];return e.each(e.dimensions,function(){for(var l=arguments.length,c=arguments[l-1],f=e.getName(c),p=0;p<l-1;p++)s[p]=arguments[p];i.push((f?f+"\t":"")+s.join("\t"))}),i.join("\n")}).join("\n\n"+Jv+"\n\n")}function Qv(o){return o.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Y0=new RegExp("[\t]+","g");var DM=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.onclick=function(e,i){setTimeout(function(){i.dispatchAction({type:"hideTip"})});var s=i.getDom(),l=this.model;this._dom&&s.removeChild(this._dom);var c=document.createElement("div");c.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",c.style.backgroundColor=l.get("backgroundColor")||"#fff";var f=document.createElement("h4"),p=l.get("lang")||[];f.innerHTML=p[0]||l.get("title"),f.style.cssText="margin:10px 20px",f.style.color=l.get("textColor");var v=document.createElement("div"),m=document.createElement("textarea");v.style.cssText="overflow:auto";var x=l.get("optionToContent"),T=l.get("contentToOption"),O=function PM(o){var r=function CM(o){var r={},e=[],i=[];return o.eachRawSeries(function(s){var l=s.coordinateSystem;if(!l||"cartesian2d"!==l.type&&"polar"!==l.type)e.push(s);else{var c=l.getBaseAxis();if("category"===c.type){var f=c.dim+"_"+c.index;r[f]||(r[f]={categoryAxis:c,valueAxis:l.getOtherAxis(c),series:[]},i.push({axisDim:c.dim,axisIndex:c.index})),r[f].series.push(s)}else e.push(s)}}),{seriesGroupByCategoryAxis:r,other:e,meta:i}}(o);return{value:_.filter([MM(r.seriesGroupByCategoryAxis),bM(r.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join("\n\n"+Jv+"\n\n"),meta:r.meta}}(e);if(_.isFunction(x)){var G=x(i.getOption());_.isString(G)?v.innerHTML=G:_.isDom(G)&&v.appendChild(G)}else{m.readOnly=l.get("readOnly");var F=m.style;F.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",F.color=l.get("textColor"),F.borderColor=l.get("textareaBorderColor"),F.backgroundColor=l.get("textareaColor"),m.value=O.value,v.appendChild(m)}var Q=O.meta,ft=document.createElement("div");ft.style.cssText="position:absolute;bottom:5px;left:0;right:0";var Tt="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",xt=document.createElement("div"),At=document.createElement("div");Tt+=";background-color:"+l.get("buttonColor"),Tt+=";color:"+l.get("buttonTextColor");var It=this;function Nt(){s.removeChild(c),It._dom=null}(0,Ca.Oo)(xt,"click",Nt),(0,Ca.Oo)(At,"click",function(){if(null==T&&null!=x||null!=T&&null==x)Nt();else{var Gt;try{Gt=_.isFunction(T)?T(v,i.getOption()):function wM(o,r){var e=o.split(new RegExp("\n*"+Jv+"\n*","g")),i={series:[]};return _.each(e,function(s,l){if(function AM(o){if(o.slice(0,o.indexOf("\n")).indexOf("\t")>=0)return!0}(s)){var c=function OM(o){for(var r=o.split(/\n+/g),e=Qv(r.shift()).split(Y0),i=[],s=_.map(e,function(p){return{name:p,data:[]}}),l=0;l<r.length;l++){var c=Qv(r[l]).split(Y0);i.push(c.shift());for(var f=0;f<c.length;f++)s[f]&&(s[f].data[l]=c[f])}return{series:s,categories:i}}(s),f=r[l],p=f.axisDim+"Axis";f&&(i[p]=i[p]||[],i[p][f.axisIndex]={data:c.categories},i.series=i.series.concat(c.series))}else c=function EM(o){for(var r=o.split(/\n+/g),e=Qv(r.shift()),i=[],s=0;s<r.length;s++){var l=Qv(r[s]);if(l){var c=l.split(Y0),f="",p=void 0,v=!1;isNaN(c[0])?(v=!0,f=c[0],c=c.slice(1),i[s]={name:f,value:[]},p=i[s].value):p=i[s]=[];for(var m=0;m<c.length;m++)p.push(+c[m]);1===p.length&&(v?i[s].value=p[0]:i[s]=p[0])}}return{name:e,data:i}}(s),i.series.push(c)}),i}(m.value,Q)}catch(Wt){throw Nt(),new Error("Data view format error "+Wt)}Gt&&i.dispatchAction({type:"changeDataView",newOption:Gt}),Nt()}}),xt.innerHTML=p[1],At.innerHTML=p[2],At.style.cssText=xt.style.cssText=Tt,!l.get("readOnly")&&ft.appendChild(At),ft.appendChild(xt),c.appendChild(f),c.appendChild(v),c.appendChild(ft),v.style.height=s.clientHeight-80+"px",s.appendChild(c),this._dom=c},r.prototype.remove=function(e,i){this._dom&&i.getDom().removeChild(this._dom)},r.prototype.dispose=function(e,i){this.remove(e,i)},r.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},r}(Vo);function LM(o,r){return _.map(o,function(e,i){var s=r&&r[i];if(_.isObject(s)&&!_.isArray(s)){_.isObject(e)&&!_.isArray(e)||(e={value:e});var c=null!=s.name&&null==e.name;return e=_.defaults(e,s),c&&delete e.name,e}return e})}ou.zl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(o,r){var e=[];_.each(o.newOption.series,function(i){var s=r.getSeriesByName(i.name)[0];if(s){var l=s.get("data");e.push({name:i.name,data:LM(i.data,l)})}else e.push(_.extend({type:"scatter"},i))}),r.mergeOption(_.defaults({series:e},o.newOption))});const NM=DM;var xy=_.each,Sy=(0,dr.Yf)();function K0(o){var r=Sy(o);return r.snapshots||(r.snapshots=[{}]),r.snapshots}var ZM=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.onclick=function(e,i){(function BM(o){Sy(o).snapshots=null})(e),i.dispatchAction({type:"restore",from:this.uid})},r.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},r}(Vo);ou.zl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(o,r){r.resetOption("recreate")});const FM=ZM;var kM=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],zM=function(){function o(r,e,i){var s=this;this._targetInfoList=[];var l=Ty(e,r);(0,_.each)(UM,function(c,f){(!i||!i.include||(0,_.indexOf)(i.include,f)>=0)&&c(l,s._targetInfoList)})}return o.prototype.setOutputRanges=function(r,e){return this.matchOutputRanges(r,e,function(i,s,l){if((i.coordRanges||(i.coordRanges=[])).push(s),!i.coordRange){i.coordRange=s;var c=J0[i.brushType](0,l,s);i.__rangeOffset={offset:Py[i.brushType](c.values,i.range,[1,1]),xyMinMax:c.xyMinMax}}}),r},o.prototype.matchOutputRanges=function(r,e,i){(0,_.each)(r,function(s){var l=this.findTargetInfo(s,e);l&&!0!==l&&(0,_.each)(l.coordSyses,function(c){var f=J0[s.brushType](1,c,s.range,!0);i(s,f.values,c,e)})},this)},o.prototype.setInputRanges=function(r,e){(0,_.each)(r,function(i){var s=this.findTargetInfo(i,e);if(i.range=i.range||[],s&&!0!==s){i.panelId=s.panelId;var l=J0[i.brushType](0,s.coordSys,i.coordRange),c=i.__rangeOffset;i.range=c?Py[i.brushType](l.values,c.offset,function HM(o,r){var e=Oy(o),i=Oy(r),s=[e[0]/i[0],e[1]/i[1]];return isNaN(s[0])&&(s[0]=1),isNaN(s[1])&&(s[1]=1),s}(l.xyMinMax,c.xyMinMax)):l.values}},this)},o.prototype.makePanelOpts=function(r,e){return(0,_.map)(this._targetInfoList,function(i){var s=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:e?e(i):null,clipPath:uf(s),isTargetByCursor:cf(s,r,i.coordSysModel),getLinearBrushOtherExtent:Xi(s)}})},o.prototype.controlSeries=function(r,e,i){var s=this.findTargetInfo(r,i);return!0===s||s&&(0,_.indexOf)(s.coordSyses,e.coordinateSystem)>=0},o.prototype.findTargetInfo=function(r,e){for(var i=this._targetInfoList,s=Ty(e,r),l=0;l<i.length;l++){var c=i[l],f=r.panelId;if(f){if(c.panelId===f)return c}else for(var p=0;p<Cy.length;p++)if(Cy[p](s,c))return c}return!0},o}();function j0(o){return o[0]>o[1]&&o.reverse(),o}function Ty(o,r){return(0,dr.pm)(o,r,{includeMainTypes:kM})}var UM={grid:function(o,r){var e=o.xAxisModels,i=o.yAxisModels,s=o.gridModels,l=(0,_.createHashMap)(),c={},f={};!e&&!i&&!s||((0,_.each)(e,function(p){var v=p.axis.grid.model;l.set(v.id,v),c[v.id]=!0}),(0,_.each)(i,function(p){var v=p.axis.grid.model;l.set(v.id,v),f[v.id]=!0}),(0,_.each)(s,function(p){l.set(p.id,p),c[p.id]=!0,f[p.id]=!0}),l.each(function(p){var m=[];(0,_.each)(p.coordinateSystem.getCartesians(),function(x,T){((0,_.indexOf)(e,x.getAxis("x").model)>=0||(0,_.indexOf)(i,x.getAxis("y").model)>=0)&&m.push(x)}),r.push({panelId:"grid--"+p.id,gridModel:p,coordSysModel:p,coordSys:m[0],coordSyses:m,getPanelRect:My.grid,xAxisDeclared:c[p.id],yAxisDeclared:f[p.id]})}))},geo:function(o,r){(0,_.each)(o.geoModels,function(e){var i=e.coordinateSystem;r.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:i,coordSyses:[i],getPanelRect:My.geo})})}},Cy=[function(o,r){var e=o.xAxisModel,i=o.yAxisModel,s=o.gridModel;return!s&&e&&(s=e.axis.grid.model),!s&&i&&(s=i.axis.grid.model),s&&s===r.gridModel},function(o,r){var e=o.geoModel;return e&&e===r.geoModel}],My={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var o=this.coordSys,r=o.getBoundingRect().clone();return r.applyTransform(ur.getTransform(o)),r}},J0={lineX:(0,_.curry)(by,0),lineY:(0,_.curry)(by,1),rect:function(o,r,e,i){var s=o?r.pointToData([e[0][0],e[1][0]],i):r.dataToPoint([e[0][0],e[1][0]],i),l=o?r.pointToData([e[0][1],e[1][1]],i):r.dataToPoint([e[0][1],e[1][1]],i),c=[j0([s[0],l[0]]),j0([s[1],l[1]])];return{values:c,xyMinMax:c}},polygon:function(o,r,e,i){var s=[[1/0,-1/0],[1/0,-1/0]];return{values:(0,_.map)(e,function(c){var f=o?r.pointToData(c,i):r.dataToPoint(c,i);return s[0][0]=Math.min(s[0][0],f[0]),s[1][0]=Math.min(s[1][0],f[1]),s[0][1]=Math.max(s[0][1],f[0]),s[1][1]=Math.max(s[1][1],f[1]),f}),xyMinMax:s}}};function by(o,r,e,i){var s=e.getAxis(["x","y"][o]),l=j0((0,_.map)([0,1],function(f){return r?s.coordToData(s.toLocalCoord(i[f]),!0):s.toGlobalCoord(s.dataToCoord(i[f]))})),c=[];return c[o]=l,c[1-o]=[NaN,NaN],{values:l,xyMinMax:c}}var Py={lineX:(0,_.curry)(Ay,0),lineY:(0,_.curry)(Ay,1),rect:function(o,r,e){return[[o[0][0]-e[0]*r[0][0],o[0][1]-e[0]*r[0][1]],[o[1][0]-e[1]*r[1][0],o[1][1]-e[1]*r[1][1]]]},polygon:function(o,r,e){return(0,_.map)(o,function(i,s){return[i[0]-e[0]*r[s][0],i[1]-e[1]*r[s][1]]})}};function Ay(o,r,e,i){return[r[0]-i[o]*e[0],r[1]-i[o]*e[1]]}function Oy(o){return o?[o[0][1]-o[0][0],o[1][1]-o[1][0]]:[NaN,NaN]}const Q0=zM;var VM=D(332),q0=_.each,WM=(0,dr.g0)("toolbox-dataZoom_"),$M=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s,l){this._brushController||(this._brushController=new dp(s.getZr()),this._brushController.on("brush",_.bind(this._onBrush,this)).mount()),function KM(o,r,e,i,s){var l=e._isZoomActive;i&&"takeGlobalCursor"===i.type&&(l="dataZoomSelect"===i.key&&i.dataZoomSelectActive),e._isZoomActive=l,o.setIconStatus("zoom",l?"emphasis":"normal");var f=new Q0(tm(o),r,{include:["grid"]}).makePanelOpts(s,function(p){return p.xAxisDeclared&&!p.yAxisDeclared?"lineX":!p.xAxisDeclared&&p.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(f).enableBrush(!(!l||!f.length)&&{brushType:"auto",brushStyle:o.getModel("brushStyle").getItemStyle()})}(e,i,this,l,s),function YM(o,r){o.setIconStatus("back",function GM(o){return K0(o).length}(r)>1?"emphasis":"normal")}(e,i)},r.prototype.onclick=function(e,i,s){XM[s].call(this)},r.prototype.remove=function(e,i){this._brushController&&this._brushController.unmount()},r.prototype.dispose=function(e,i){this._brushController&&this._brushController.dispose()},r.prototype._onBrush=function(e){var i=e.areas;if(e.isEnd&&i.length){var s={},l=this.ecModel;this._brushController.updateCovers([]),new Q0(tm(this.model),l,{include:["grid"]}).matchOutputRanges(i,l,function(v,m,x){if("cartesian2d"===x.type){var T=v.brushType;"rect"===T?(f("x",x,m[0]),f("y",x,m[1])):f({lineX:"x",lineY:"y"}[T],x,m)}}),function IM(o,r){var e=K0(o);xy(r,function(i,s){for(var l=e.length-1;l>=0&&!e[l][s];l--);if(l<0){var f=o.queryComponents({mainType:"dataZoom",subType:"select",id:s})[0];if(f){var p=f.getPercentRange();e[0][s]={dataZoomId:s,start:p[0],end:p[1]}}}}),e.push(r)}(l,s),this._dispatchZoomAction(s)}function f(v,m,x){var T=m.getAxis(v),O=T.model,G=function p(v,m,x){var T;return x.eachComponent({mainType:"dataZoom",subType:"select"},function(O){O.getAxisModel(v,m.componentIndex)&&(T=O)}),T}(v,O,l),F=G.findRepresentativeAxisProxy(O).getMinMaxSpan();(null!=F.minValueSpan||null!=F.maxValueSpan)&&(x=Gl(0,x.slice(),T.scale.getExtent(),0,F.minValueSpan,F.maxValueSpan)),G&&(s[G.id]={dataZoomId:G.id,startValue:x[0],endValue:x[1]})}},r.prototype._dispatchZoomAction=function(e){var i=[];q0(e,function(s,l){i.push(_.clone(s))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})},r.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},r}(Vo),XM={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function RM(o){var r=K0(o),e=r[r.length-1];r.length>1&&r.pop();var i={};return xy(e,function(s,l){for(var c=r.length-1;c>=0;c--)if(s=r[c][l]){i[l]=s;break}}),i}(this.ecModel))}};function tm(o){var r={xAxisIndex:o.get("xAxisIndex",!0),yAxisIndex:o.get("yAxisIndex",!0),xAxisId:o.get("xAxisId",!0),yAxisId:o.get("yAxisId",!0)};return null==r.xAxisIndex&&null==r.xAxisId&&(r.xAxisIndex="all"),null==r.yAxisIndex&&null==r.yAxisId&&(r.yAxisIndex="all"),r}(0,VM.f)("dataZoom",function(o){var r=o.getComponent("toolbox",0),e=["feature","dataZoom"];if(r&&null!=r.get(e)){var i=r.getModel(e),s=[],l=tm(i),c=(0,dr.pm)(o,l);return q0(c.xAxisModels,function(p){return f(p,"xAxis","xAxisIndex")}),q0(c.yAxisModels,function(p){return f(p,"yAxis","yAxisIndex")}),s}function f(p,v,m){var x=p.componentIndex,T={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:WM+v+x};T[m]=x,s.push(T)}});const jM=$M,qM=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="tooltip",r.dependencies=["axisPointer"],r.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},r}(Pi.Z);function Ey(o){var r=o.get("confine");return null!=r?!!r:"richText"===o.get("renderMode")}function wy(o){if(eo.Z.domSupported)for(var r=document.documentElement.style,e=0,i=o.length;e<i;e++)if(o[e]in r)return o[e]}var Dy=wy(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function Ly(o,r){if(!o)return r;r=(0,Mn.zW)(r,!0);var e=o.indexOf(r);return(o=-1===e?r:"-"+o.slice(0,e)+"-"+r).toLowerCase()}var rb=Ly(wy(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),em=Ly(Dy,"transform"),nb="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(eo.Z.transform3dSupported?"will-change:transform;":"");function Ny(o,r,e){var i=o.toFixed(0)+"px",s=r.toFixed(0)+"px";if(!eo.Z.transformSupported)return e?"top:"+s+";left:"+i+";":[["top",s],["left",i]];var l=eo.Z.transform3dSupported,c="translate"+(l?"3d":"")+"("+i+","+s+(l?",0":"")+")";return e?"top:0;left:0;"+em+":"+c+";":[["top",0],["left",0],[Dy,c]]}function Iy(o,r,e,i,s){var l=r&&r.painter;if(e){var c=l&&l.getViewportRoot();c&&(0,U.YB)(o,c,document.body,i,s)}else{o[0]=i,o[1]=s;var f=l&&l.getViewportRootOffset();f&&(o[0]+=f.offsetLeft,o[1]+=f.offsetTop)}o[2]=o[0]/r.getWidth(),o[3]=o[1]/r.getHeight()}const cb=function(){function o(r,e,i){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,eo.Z.wxa)return null;var s=document.createElement("div");s.domBelongToZr=!0,this.el=s;var l=this._zr=e.getZr(),c=this._appendToBody=i&&i.appendToBody;Iy(this._styleCoord,l,c,e.getWidth()/2,e.getHeight()/2),c?document.body.appendChild(s):r.appendChild(s),this._container=r;var f=this;s.onmouseenter=function(){f._enterable&&(clearTimeout(f._hideTimeout),f._show=!0),f._inContent=!0},s.onmousemove=function(p){if(p=p||window.event,!f._enterable){var v=l.handler,m=l.painter.getViewportRoot();(0,Ca.OD)(m,p,!0),v.dispatch("mousemove",p)}},s.onmouseleave=function(){f._inContent=!1,f._enterable&&f._show&&f.hideLater(f._hideDelay)}}return o.prototype.update=function(r){var e=this._container,i=function eb(o,r){var e=o.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(o);return e?r?e[r]:e:null}(e,"position"),s=e.style;"absolute"!==s.position&&"absolute"!==i&&(s.position="relative"),r.get("alwaysShowContent")&&this._moveIfResized(),this.el.className=r.get("className")||""},o.prototype.show=function(r,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,s=i.style,l=this._styleCoord;i.innerHTML?s.cssText=nb+function lb(o,r,e){var i=[],s=o.get("transitionDuration"),l=o.get("backgroundColor"),c=o.get("shadowBlur"),f=o.get("shadowColor"),p=o.get("shadowOffsetX"),v=o.get("shadowOffsetY"),m=o.getModel("textStyle"),x=(0,ii.d_)(o,"html");return i.push("box-shadow:"+p+"px "+v+"px "+c+"px "+f),r&&s&&i.push(function ob(o,r){var e="cubic-bezier(0.23,1,0.32,1)",i=" "+o/2+"s "+e,s="opacity"+i+",visibility"+i;return r||(i=" "+o+"s "+e,s+=eo.Z.transformSupported?","+em+i:",left"+i+",top"+i),rb+":"+s}(s,e)),l&&i.push("background-color:"+l),(0,_.each)(["width","color","radius"],function(O){var G="border-"+O,F=(0,Mn.zW)(G),Q=o.get(F);null!=Q&&i.push(G+":"+Q+("color"===O?"":"px"))}),i.push(function sb(o){var r=[],e=o.get("fontSize"),i=o.getTextColor();i&&r.push("color:"+i),r.push("font:"+o.getFont()),e&&r.push("line-height:"+Math.round(3*e/2)+"px");var s=o.get("textShadowColor"),l=o.get("textShadowBlur")||0,c=o.get("textShadowOffsetX")||0,f=o.get("textShadowOffsetY")||0;return s&&l&&r.push("text-shadow:"+c+"px "+f+"px "+l+"px "+s),(0,_.each)(["decoration","align"],function(p){var v=o.get(p);v&&r.push("text-"+p+":"+v)}),r.join(";")}(m)),null!=x&&i.push("padding:"+(0,Mn.MY)(x).join("px ")+"px"),i.join(";")+";"}(r,!this._firstShow,this._longHide)+Ny(l[0],l[1],!0)+"border-color:"+(0,Mn.Lz)(e)+";"+(r.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):s.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},o.prototype.setContent=function(r,e,i,s,l){var c=this.el;if(null!=r){var f="";if((0,_.isString)(l)&&"item"===i.get("trigger")&&!Ey(i)&&(f=function ab(o,r,e){if(!(0,_.isString)(e)||"inside"===e)return"";var i=o.get("backgroundColor"),s=o.get("borderWidth");r=(0,Mn.Lz)(r);var v,l=function ib(o){return"left"===o?"right":"right"===o?"left":"top"===o?"bottom":"top"}(e),c=Math.max(1.5*Math.round(s),6),f="",p=em+":";(0,_.indexOf)(["left","right"],l)>-1?(f+="top:50%",p+="translateY(-50%) rotate("+(v="left"===l?-225:-45)+"deg)"):(f+="left:50%",p+="translateX(-50%) rotate("+(v="top"===l?225:45)+"deg)");var m=v*Math.PI/180,x=c+s,T=x*Math.abs(Math.cos(m))+x*Math.abs(Math.sin(m)),G=r+" solid "+s+"px;";return'<div style="'+["position:absolute;width:"+c+"px;height:"+c+"px;z-index:-1;",(f+=";"+l+":-"+Math.round(100*((T-Math.SQRT2*s)/2+Math.SQRT2*s-(T-x)/2))/100+"px")+";"+p+";","border-bottom:"+G,"border-right:"+G,"background-color:"+i+";"].join("")+'"></div>'}(i,s,l)),(0,_.isString)(r))c.innerHTML=r+f;else if(r){c.innerHTML="",(0,_.isArray)(r)||(r=[r]);for(var p=0;p<r.length;p++)(0,_.isDom)(r[p])&&r[p].parentNode!==c&&c.appendChild(r[p]);if(f&&c.childNodes.length){var v=document.createElement("div");v.innerHTML=f,c.appendChild(v)}}}else c.innerHTML=""},o.prototype.setEnterable=function(r){this._enterable=r},o.prototype.getSize=function(){var r=this.el;return[r.offsetWidth,r.offsetHeight]},o.prototype.moveTo=function(r,e){var i=this._styleCoord;if(Iy(i,this._zr,this._appendToBody,r,e),null!=i[0]&&null!=i[1]){var s=this.el.style,l=Ny(i[0],i[1]);(0,_.each)(l,function(c){s[c[0]]=c[1]})}},o.prototype._moveIfResized=function(){var e=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),e*this._zr.getHeight())},o.prototype.hide=function(){var r=this,e=this.el.style;e.visibility="hidden",e.opacity="0",eo.Z.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return r._longHide=!0},500)},o.prototype.hideLater=function(r){this._show&&(!this._inContent||!this._enterable)&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout((0,_.bind)(this.hide,this),r)):this.hide())},o.prototype.isShow=function(){return this._show},o.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},o}();function Nu(o){return Math.max(0,o)}function Ry(o){var r=Nu(o.shadowBlur||0),e=Nu(o.shadowOffsetX||0),i=Nu(o.shadowOffsetY||0);return{left:Nu(r-e),right:Nu(r+e),top:Nu(r-i),bottom:Nu(r+i)}}function By(o,r,e,i){o[0]=e,o[1]=i,o[2]=o[0]/r.getWidth(),o[3]=o[1]/r.getHeight()}const fb=function(){function o(r){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=r.getZr(),By(this._styleCoord,this._zr,r.getWidth()/2,r.getHeight()/2)}return o.prototype.update=function(r){r.get("alwaysShowContent")&&this._moveIfResized()},o.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},o.prototype.setContent=function(r,e,i,s,l){var c=this;_.isObject(r)&&(0,Jt._y)(""),this.el&&this._zr.remove(this.el);var f=i.getModel("textStyle");this.el=new Se.ZP({style:{rich:e.richTextStyles,text:r,lineHeight:22,borderWidth:1,borderColor:s,textShadowColor:f.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:(0,ii.d_)(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),_.each(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(v){c.el.style[v]=i.get(v)}),_.each(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(v){c.el.style[v]=f.get(v)||0}),this._zr.add(this.el);var p=this;this.el.on("mouseover",function(){p._enterable&&(clearTimeout(p._hideTimeout),p._show=!0),p._inContent=!0}),this.el.on("mouseout",function(){p._enterable&&p._show&&p.hideLater(p._hideDelay),p._inContent=!1})},o.prototype.setEnterable=function(r){this._enterable=r},o.prototype.getSize=function(){var r=this.el,e=this.el.getBoundingRect(),i=Ry(r.style);return[e.width+i.left+i.right,e.height+i.top+i.bottom]},o.prototype.moveTo=function(r,e){var i=this.el;if(i){var s=this._styleCoord;By(s,this._zr,r,e),r=s[0],e=s[1];var l=i.style,c=Nu(l.borderWidth||0),f=Ry(l);i.x=r+c+f.left,i.y=e+c+f.top,i.markRedraw()}},o.prototype._moveIfResized=function(){var e=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),e*this._zr.getHeight())},o.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},o.prototype.hideLater=function(r){this._show&&(!this._inContent||!this._enterable)&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(_.bind(this.hide,this),r)):this.hide())},o.prototype.isShow=function(){return this._show},o.prototype.dispose=function(){this._zr.remove(this.el)},o}();var db=D(8086),qv=D(8488),pb=new Br.Z({shape:{x:-1,y:-1,width:2,height:2}});function xp(o,r,e){var s,i=r.ecModel;e?(s=new hi.Z(e,i,i),s=new hi.Z(r.option,s,i)):s=r;for(var l=o.length-1;l>=0;l--){var c=o[l];c&&(c instanceof hi.Z&&(c=c.get("tooltip",!0)),(0,_.isString)(c)&&(c={formatter:c}),c&&(s=new hi.Z(c,s,i)))}return s}function Gy(o,r){return o.dispatchAction||(0,_.bind)(r.dispatchAction,r)}function Zy(o){return"center"===o||"middle"===o}const xb=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i){if(!eo.Z.node&&i.getDom()){var s=e.getComponent("tooltip"),l=this._renderMode=(0,dr.U9)(s.get("renderMode"));this._tooltipContent="richText"===l?new fb(i):new cb(i.getDom(),i,{appendToBody:s.get("appendToBody",!0)})}},r.prototype.render=function(e,i,s){if(!eo.Z.node&&s.getDom()){this.group.removeAll(),this._tooltipModel=e,this._ecModel=i,this._api=s,this._alwaysShowContent=e.get("alwaysShowContent");var l=this._tooltipContent;l.update(e),l.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&e.get("transitionDuration")?(0,Si.T9)(this,"_updatePosition",50,"fixRate"):(0,Si.ZH)(this,"_updatePosition")}},r.prototype._initGlobalListener=function(){var i=this._tooltipModel.get("triggerOn");k1("itemTooltip",this._api,(0,_.bind)(function(s,l,c){"none"!==i&&(i.indexOf(s)>=0?this._tryShow(l,c):"leave"===s&&this._hide(c))},this))},r.prototype._keepShow=function(){var e=this._tooltipModel,i=this._ecModel,s=this._api,l=e.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==l&&"click"!==l){var c=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!s.isDisposed()&&c.manuallyShowTip(e,i,s,{x:c._lastX,y:c._lastY,dataByCoordSys:c._lastDataByCoordSys})})}},r.prototype.manuallyShowTip=function(e,i,s,l){if(l.from!==this.uid&&!eo.Z.node&&s.getDom()){var c=Gy(l,s);this._ticket="";var f=l.dataByCoordSys,p=function yb(o,r,e){var i=(0,dr.zH)(o).queryOptionMap,s=i.keys()[0];if(s&&"series"!==s){var p,c=(0,dr.HZ)(r,s,i.get(s),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(c&&(e.getViewOfComponentModel(c).group.traverse(function(v){var m=(0,Fr.A)(v).tooltipConfig;if(m&&m.name===o.name)return p=v,!0}),p))return{componentMainType:s,componentIndex:c.componentIndex,el:p}}}(l,i,s);if(p){var v=p.el.getBoundingRect().clone();v.applyTransform(p.el.transform),this._tryShow({offsetX:v.x+v.width/2,offsetY:v.y+v.height/2,target:p.el,position:l.position,positionDefault:"bottom"},c)}else if(l.tooltip&&null!=l.x&&null!=l.y){var m=pb;m.x=l.x,m.y=l.y,m.update(),(0,Fr.A)(m).tooltipConfig={name:null,option:l.tooltip},this._tryShow({offsetX:l.x,offsetY:l.y,target:m},c)}else if(f)this._tryShow({offsetX:l.x,offsetY:l.y,position:l.position,dataByCoordSys:f,tooltipOption:l.tooltipOption},c);else if(null!=l.seriesIndex){if(this._manuallyAxisShowTip(e,i,s,l))return;var x=U1(l,i),T=x.point[0],O=x.point[1];null!=T&&null!=O&&this._tryShow({offsetX:T,offsetY:O,target:x.el,position:l.position,positionDefault:"bottom"},c)}else null!=l.x&&null!=l.y&&(s.dispatchAction({type:"updateAxisPointer",x:l.x,y:l.y}),this._tryShow({offsetX:l.x,offsetY:l.y,position:l.position,target:s.getZr().findHover(l.x,l.y).target},c))}},r.prototype.manuallyHideTip=function(e,i,s,l){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,l.from!==this.uid&&this._hide(Gy(l,s))},r.prototype._manuallyAxisShowTip=function(e,i,s,l){var c=l.seriesIndex,f=l.dataIndex,p=i.getComponent("axisPointer").coordSysAxesInfo;if(null!=c&&null!=f&&null!=p){var v=i.getSeriesByIndex(c);if(v&&"axis"===xp([v.getData().getItemModel(f),v,(v.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return s.dispatchAction({type:"updateAxisPointer",seriesIndex:c,dataIndex:f,position:l.position}),!0}},r.prototype._tryShow=function(e,i){var s=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var c=e.dataByCoordSys;if(c&&c.length)this._showAxisTooltip(c,e);else if(s){var f,p;this._lastDataByCoordSys=null,(0,Cl.o)(s,function(v){return null!=(0,Fr.A)(v).dataIndex?(f=v,!0):null!=(0,Fr.A)(v).tooltipConfig?(p=v,!0):void 0},!0),f?this._showSeriesItemTooltip(e,f,i):p?this._showComponentItemTooltip(e,p,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},r.prototype._showOrMove=function(e,i){var s=e.get("showDelay");i=(0,_.bind)(i,this),clearTimeout(this._showTimout),s>0?this._showTimout=setTimeout(i,s):i()},r.prototype._showAxisTooltip=function(e,i){var s=this._ecModel,l=this._tooltipModel,c=[i.offsetX,i.offsetY],f=xp([i.tooltipOption],l),p=this._renderMode,v=[],m=(0,ii.TX)("section",{blocks:[],noHeader:!0}),x=[],T=new ii.iv;(0,_.each)(e,function(Tt){(0,_.each)(Tt.dataByAxis,function(xt){var At=s.getComponent(xt.axisDim+"Axis",xt.axisIndex),It=xt.value;if(At&&null!=It){var Nt=I1(It,At.axis,s,xt.seriesDataIndices,xt.valueLabelOpt),Gt=(0,ii.TX)("section",{header:Nt,noHeader:!(0,_.trim)(Nt),sortBlocks:!0,blocks:[]});m.blocks.push(Gt),(0,_.each)(xt.seriesDataIndices,function(Wt){var jt=s.getSeriesByIndex(Wt.seriesIndex),ee=Wt.dataIndexInside,oe=jt.getDataParams(ee);if(!(oe.dataIndex<0)){oe.axisDim=xt.axisDim,oe.axisIndex=xt.axisIndex,oe.axisType=xt.axisType,oe.axisId=xt.axisId,oe.axisValue=Ai.DX(At.axis,{value:It}),oe.axisValueLabel=Nt,oe.marker=T.makeTooltipMarker("item",(0,Mn.Lz)(oe.color),p);var de=(0,qv.f)(jt.formatTooltip(ee,!0,null)),xe=de.frag;if(xe){var be=xp([jt],l).get("valueFormatter");Gt.blocks.push(be?(0,_.extend)({valueFormatter:be},xe):xe)}de.text&&x.push(de.text),v.push(oe)}})}})}),m.blocks.reverse(),x.reverse();var O=i.position,G=f.get("order"),F=(0,ii.BY)(m,T,p,G,s.get("useUTC"),f.get("textStyle"));F&&x.unshift(F);var ft=x.join("richText"===p?"\n\n":"<br/>");this._showOrMove(f,function(){this._updateContentNotChangedOnAxis(e,v)?this._updatePosition(f,O,c[0],c[1],this._tooltipContent,v):this._showTooltipContent(f,ft,v,Math.random()+"",c[0],c[1],O,null,T)})},r.prototype._showSeriesItemTooltip=function(e,i,s){var l=this._ecModel,c=(0,Fr.A)(i),f=c.seriesIndex,p=l.getSeriesByIndex(f),v=c.dataModel||p,m=c.dataIndex,x=c.dataType,T=v.getData(x),O=this._renderMode,G=e.positionDefault,F=xp([T.getItemModel(m),v,p&&(p.coordinateSystem||{}).model],this._tooltipModel,G?{position:G}:null),Q=F.get("trigger");if(null==Q||"item"===Q){var ft=v.getDataParams(m,x),Tt=new ii.iv;ft.marker=Tt.makeTooltipMarker("item",(0,Mn.Lz)(ft.color),O);var xt=(0,qv.f)(v.formatTooltip(m,!1,x)),At=F.get("order"),It=F.get("valueFormatter"),Nt=xt.frag,Gt=Nt?(0,ii.BY)(It?(0,_.extend)({valueFormatter:It},Nt):Nt,Tt,O,At,l.get("useUTC"),F.get("textStyle")):xt.text,Wt="item_"+v.name+"_"+m;this._showOrMove(F,function(){this._showTooltipContent(F,Gt,ft,Wt,e.offsetX,e.offsetY,e.position,e.target,Tt)}),s({type:"showTip",dataIndexInside:m,dataIndex:T.getRawIndex(m),seriesIndex:f,from:this.uid})}},r.prototype._showComponentItemTooltip=function(e,i,s){var l=(0,Fr.A)(i),f=l.tooltipConfig.option||{};(0,_.isString)(f)&&(f={content:f,formatter:f});var v=[f],m=this._ecModel.getComponent(l.componentMainType,l.componentIndex);m&&v.push(m),v.push({formatter:f.content});var x=e.positionDefault,T=xp(v,this._tooltipModel,x?{position:x}:null),O=T.get("content"),G=Math.random()+"",F=new ii.iv;this._showOrMove(T,function(){var Q=(0,_.clone)(T.get("formatterParams")||{});this._showTooltipContent(T,O,Q,G,e.offsetX,e.offsetY,e.position,i,F)}),s({type:"showTip",from:this.uid})},r.prototype._showTooltipContent=function(e,i,s,l,c,f,p,v,m){if(this._ticket="",e.get("showContent")&&e.get("show")){var x=this._tooltipContent;x.setEnterable(e.get("enterable"));var T=e.get("formatter");p=p||e.get("position");var O=i,F=this._getNearestPoint([c,f],s,e.get("trigger"),e.get("borderColor")).color;if(T)if((0,_.isString)(T)){var Q=e.ecModel.get("useUTC"),ft=(0,_.isArray)(s)?s[0]:s;O=T,ft&&ft.axisType&&ft.axisType.indexOf("time")>=0&&(O=(0,db.WU)(ft.axisValue,O,Q)),O=(0,Mn.kF)(O,s,!0)}else if((0,_.isFunction)(T)){var xt=(0,_.bind)(function(At,It){At===this._ticket&&(x.setContent(It,m,e,F,p),this._updatePosition(e,p,c,f,x,s,v))},this);this._ticket=l,O=T(s,l,xt)}else O=T;x.setContent(O,m,e,F,p),x.show(e,F),this._updatePosition(e,p,c,f,x,s,v)}},r.prototype._getNearestPoint=function(e,i,s,l){return"axis"===s||(0,_.isArray)(i)?{color:l||("html"===this._renderMode?"#fff":"none")}:(0,_.isArray)(i)?void 0:{color:l||i.color||i.borderColor}},r.prototype._updatePosition=function(e,i,s,l,c,f,p){var v=this._api.getWidth(),m=this._api.getHeight();i=i||e.get("position");var x=c.getSize(),T=e.get("align"),O=e.get("verticalAlign"),G=p&&p.getBoundingRect().clone();if(p&&G.applyTransform(p.transform),(0,_.isFunction)(i)&&(i=i([s,l],f,c.el,G,{viewSize:[v,m],contentSize:x.slice()})),(0,_.isArray)(i))s=(0,Be.GM)(i[0],v),l=(0,Be.GM)(i[1],m);else if((0,_.isObject)(i)){var F=i;F.width=x[0],F.height=x[1];var Q=(0,sn.ME)(F,{width:v,height:m});s=Q.x,l=Q.y,T=null,O=null}else if((0,_.isString)(i)&&p){var ft=function mb(o,r,e,i){var s=e[0],l=e[1],c=Math.ceil(Math.SQRT2*i)+8,f=0,p=0,v=r.width,m=r.height;switch(o){case"inside":f=r.x+v/2-s/2,p=r.y+m/2-l/2;break;case"top":f=r.x+v/2-s/2,p=r.y-l-c;break;case"bottom":f=r.x+v/2-s/2,p=r.y+m+c;break;case"left":f=r.x-s-c,p=r.y+m/2-l/2;break;case"right":f=r.x+v+c,p=r.y+m/2-l/2}return[f,p]}(i,G,x,e.get("borderWidth"));s=ft[0],l=ft[1]}else ft=function gb(o,r,e,i,s,l,c){var f=e.getSize(),p=f[0],v=f[1];return null!=l&&(o+p+l+2>i?o-=p+l:o+=l),null!=c&&(r+v+c>s?r-=v+c:r+=c),[o,r]}(s,l,c,v,m,T?null:20,O?null:20),s=ft[0],l=ft[1];T&&(s-=Zy(T)?x[0]/2:"right"===T?x[0]:0),O&&(l-=Zy(O)?x[1]/2:"bottom"===O?x[1]:0),Ey(e)&&(ft=function _b(o,r,e,i,s){var l=e.getSize(),c=l[0],f=l[1];return o=Math.min(o+c,i)-c,r=Math.min(r+f,s)-f,[o=Math.max(o,0),r=Math.max(r,0)]}(s,l,c,v,m),s=ft[0],l=ft[1]),c.moveTo(s,l)},r.prototype._updateContentNotChangedOnAxis=function(e,i){var s=this._lastDataByCoordSys,l=this._cbParamsList,c=!!s&&s.length===e.length;return c&&(0,_.each)(s,function(f,p){var v=f.dataByAxis||[],x=(e[p]||{}).dataByAxis||[];(c=c&&v.length===x.length)&&(0,_.each)(v,function(T,O){var G=x[O]||{},F=T.seriesDataIndices||[],Q=G.seriesDataIndices||[];(c=c&&T.value===G.value&&T.axisType===G.axisType&&T.axisId===G.axisId&&F.length===Q.length)&&(0,_.each)(F,function(ft,Tt){var xt=Q[Tt];c=c&&ft.seriesIndex===xt.seriesIndex&&ft.dataIndex===xt.dataIndex}),l&&(0,_.each)(T.seriesDataIndices,function(ft){var Tt=ft.seriesIndex,xt=i[Tt],At=l[Tt];xt&&At&&At.data!==xt.data&&(c=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=i,!!c},r.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},r.prototype.dispose=function(e,i){eo.Z.node||!i.getDom()||((0,Si.ZH)(this,"_updatePosition"),this._tooltipContent.dispose(),B0("itemTooltip",i))},r.type="tooltip",r}(Ti.Z);var Tb=["rect","polygon","keep","clear"];function Cb(o,r){var e=(0,dr.kF)(o?o.brush:[]);if(e.length){var i=[];_.each(e,function(p){var v=p.hasOwnProperty("toolbox")?p.toolbox:[];v instanceof Array&&(i=i.concat(v))});var s=o&&o.toolbox;_.isArray(s)&&(s=s[0]),s||(o.toolbox=[s={feature:{}}]);var l=s.feature||(s.feature={}),c=l.brush||(l.brush={}),f=c.type||(c.type=[]);f.push.apply(f,i),function Mb(o){var r={};_.each(o,function(e){r[e]=1}),o.length=0,_.each(r,function(e,i){o.push(i)})}(f),r&&!f.length&&f.push.apply(f,Tb)}}var Iu=D(2332),Fy=_.each;function ky(o){if(o)for(var r in o)if(o.hasOwnProperty(r))return!0}function rm(o,r,e){var i={};return Fy(r,function(l){var c=i[l]=function s(){var l=function(){};return l.prototype.__hidden=l.prototype,new l}();Fy(o[l],function(f,p){if(Gi.isValidType(p)){var v={type:p,visual:f};e&&e(v,l),c[p]=new Gi(v),"opacity"===p&&((v=_.clone(v)).type="colorAlpha",c.__hidden.__alphaForOpacity=new Gi(v))}})}),i}function zy(o,r,e){var i;_.each(e,function(s){r.hasOwnProperty(s)&&ky(r[s])&&(i=!0)}),i&&_.each(e,function(s){r.hasOwnProperty(s)&&ky(r[s])?o[s]=_.clone(r[s]):delete o[s]})}var Sp=D(1244),Uy={lineX:Hy(0),lineY:Hy(1),rect:{point:function(o,r,e){return o&&e.boundingRect.contain(o[0],o[1])},rect:function(o,r,e){return o&&e.boundingRect.intersect(o)}},polygon:{point:function(o,r,e){return o&&e.boundingRect.contain(o[0],o[1])&&Sp.X(e.range,o[0],o[1])},rect:function(o,r,e){var i=e.range;if(!o||i.length<=1)return!1;var s=o.x,l=o.y,c=o.width,f=o.height,p=i[0];return!!(Sp.X(i,s,l)||Sp.X(i,s+c,l)||Sp.X(i,s,l+f)||Sp.X(i,s+c,l+f)||bn.Z.create(o).contain(p[0],p[1])||(0,ur.linePolygonIntersect)(s,l,s+c,l,i)||(0,ur.linePolygonIntersect)(s,l,s,l+f,i)||(0,ur.linePolygonIntersect)(s+c,l,s+c,l+f,i)||(0,ur.linePolygonIntersect)(s,l+f,s+c,l+f,i))||void 0}}};function Hy(o){var r=["x","y"],e=["width","height"];return{point:function(i,s,l){if(i)return Tp(i[o],l.range)},rect:function(i,s,l){if(i){var c=l.range,f=[i[r[o]],i[r[o]]+i[e[o]]];return f[1]<f[0]&&f.reverse(),Tp(f[0],c)||Tp(f[1],c)||Tp(c[0],f)||Tp(c[1],f)}}}}function Tp(o,r){return r[0]<=o&&o<=r[1]}var Vy=["inBrush","outOfBrush"],nm="__ecBrushSelect",im="__ecInBrushSelectEvent";function Wy(o){o.eachComponent({mainType:"brush"},function(r){(r.brushTargetManager=new Q0(r.option,o)).setInputRanges(r.areas,o)})}function Ob(o,r,e){var s,l,i=[];o.eachComponent({mainType:"brush"},function(c){e&&"takeGlobalCursor"===e.type&&c.setBrushOption("brush"===e.key?e.brushOption:{brushType:!1})}),Wy(o),o.eachComponent({mainType:"brush"},function(c,f){var p={brushId:c.id,brushIndex:f,brushName:c.name,areas:_.clone(c.areas),selected:[]};i.push(p);var v=c.option,m=v.brushLink,x=[],T=[],O=[],G=!1;f||(s=v.throttleType,l=v.throttleDelay);var F=_.map(c.areas,function(It){var Nt=Lb[It.brushType],Gt=_.defaults({boundingRect:Nt?Nt(It):void 0},It);return Gt.selectors=function Ab(o){var r=o.brushType,e={point:function(i){return Uy[r].point(i,e,o)},rect:function(i){return Uy[r].rect(i,e,o)}};return e}(Gt),Gt}),Q=rm(c.option,Vy,function(It){It.mappingMethod="fixed"});function ft(It){return"all"===m||!!x[It]}function Tt(It){return!!It.length}_.isArray(m)&&_.each(m,function(It){x[It]=1}),o.eachSeries(function(It,Nt){var Gt=O[Nt]=[];"parallel"===It.subType?function xt(It,Nt){var Gt=It.coordinateSystem;G=G||Gt.hasAxisBrushed(),ft(Nt)&&Gt.eachActiveState(It.getData(),function(Wt,jt){"active"===Wt&&(T[jt]=1)})}(It,Nt):function At(It,Nt,Gt){if(It.brushSelector&&!function Db(o,r){var e=o.option.seriesIndex;return null!=e&&"all"!==e&&(_.isArray(e)?_.indexOf(e,r)<0:r!==e)}(c,Nt)&&(_.each(F,function(jt){c.brushTargetManager.controlSeries(jt,It,o)&&Gt.push(jt),G=G||Tt(Gt)}),ft(Nt)&&Tt(Gt))){var Wt=It.getData();Wt.each(function(jt){$y(It,Gt,Wt,jt)&&(T[jt]=1)})}}(It,Nt,Gt)}),o.eachSeries(function(It,Nt){var Gt={seriesId:It.id,seriesIndex:Nt,seriesName:It.name,dataIndex:[]};p.selected.push(Gt);var Wt=O[Nt],jt=It.getData(),ee=ft(Nt)?function(oe){return T[oe]?(Gt.dataIndex.push(jt.getRawIndex(oe)),"inBrush"):"outOfBrush"}:function(oe){return $y(It,Wt,jt,oe)?(Gt.dataIndex.push(jt.getRawIndex(oe)),"inBrush"):"outOfBrush"};(ft(Nt)?G:Tt(Wt))&&function bb(o,r,e,i,s,l){var f,c={};function p(x){return(0,Iu.Or)(e,f,x)}function v(x,T){(0,Iu.LZ)(e,f,x,T)}function m(x,T){var O=e.getRawDataItem(f=null==l?x:T);if(!O||!1!==O.visualMap)for(var G=i.call(s,x),F=r[G],Q=c[G],ft=0,Tt=Q.length;ft<Tt;ft++){var xt=Q[ft];F[xt]&&F[xt].applyVisual(x,p,v)}}_.each(o,function(x){var T=Gi.prepareVisualTypes(r[x]);c[x]=T}),null==l?e.each(m):e.each([l],m)}(Vy,Q,jt,ee)})}),function Eb(o,r,e,i,s){if(s){var l=o.getZr();l[im]||(l[nm]||(l[nm]=wb),Si.T9(l,nm,e,r)(o,i))}}(r,s,l,i,e)}function wb(o,r){if(!o.isDisposed()){var e=o.getZr();e[im]=!0,o.dispatchAction({type:"brushSelect",batch:r}),e[im]=!1}}function $y(o,r,e,i){for(var s=0,l=r.length;s<l;s++){var c=r[s];if(o.brushSelector(i,e,c.selectors,c))return!0}}var Lb={rect:function(o){return Xy(o.range)},polygon:function(o){for(var r,e=o.range,i=0,s=e.length;i<s;i++){var l=e[i];l[0]<(r=r||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(r[0][0]=l[0]),l[0]>r[0][1]&&(r[0][1]=l[0]),l[1]<r[1][0]&&(r[1][0]=l[1]),l[1]>r[1][1]&&(r[1][1]=l[1])}return r&&Xy(r)}};function Xy(o){return new bn.Z(o[0][0],o[1][0],o[0][1]-o[0][0],o[1][1]-o[1][0])}const Ib=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i){this.ecModel=e,this.api=i,(this._brushController=new dp(i.getZr())).on("brush",_.bind(this._onBrush,this)).mount()},r.prototype.render=function(e,i,s,l){this.model=e,this._updateController(e,i,s,l)},r.prototype.updateTransform=function(e,i,s,l){Wy(i),this._updateController(e,i,s,l)},r.prototype.updateVisual=function(e,i,s,l){this.updateTransform(e,i,s,l)},r.prototype.updateView=function(e,i,s,l){this._updateController(e,i,s,l)},r.prototype._updateController=function(e,i,s,l){(!l||l.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(s)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},r.prototype.dispose=function(){this._brushController.dispose()},r.prototype._onBrush=function(e){var i=this.model.id,s=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:_.clone(s),$from:i}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:i,areas:_.clone(s),$from:i})},r.type="brush",r}(Ti.Z);function Yy(o,r){return _.merge({brushType:o.brushType,brushMode:o.brushMode,transformable:o.transformable,brushStyle:new hi.Z(o.brushStyle).getItemStyle(),removeOnClick:o.removeOnClick,z:o.z},r,!0)}const Gb=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.areas=[],e.brushOption={},e}return(0,Re.ZT)(r,o),r.prototype.optionUpdated=function(e,i){var s=this.option;!i&&zy(s,e,["inBrush","outOfBrush"]);var l=s.inBrush=s.inBrush||{};s.outOfBrush=s.outOfBrush||{color:"#ddd"},l.hasOwnProperty("liftZ")||(l.liftZ=5)},r.prototype.setAreas=function(e){!e||(this.areas=_.map(e,function(i){return Yy(this.option,i)},this))},r.prototype.setBrushOption=function(e){this.brushOption=Yy(this.option,e),this.brushType=this.brushOption.brushType},r.type="brush",r.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],r.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},r}(Pi.Z);var Zb=["rect","polygon","lineX","lineY","keep","clear"];const kb=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){var l,c,f;i.eachComponent({mainType:"brush"},function(p){l=p.brushType,c=p.brushOption.brushMode||"single",f=f||!!p.areas.length}),this._brushType=l,this._brushMode=c,_.each(e.get("type",!0),function(p){e.setIconStatus(p,("keep"===p?"multiple"===c:"clear"===p?f:p===l)?"emphasis":"normal")})},r.prototype.updateView=function(e,i,s){this.render(e,i,s)},r.prototype.getIcons=function(){var e=this.model,i=e.get("icon",!0),s={};return _.each(e.get("type",!0),function(l){i[l]&&(s[l]=i[l])}),s},r.prototype.onclick=function(e,i,s){var l=this._brushType,c=this._brushMode;"clear"===s?(i.dispatchAction({type:"axisAreaSelect",intervals:[]}),i.dispatchAction({type:"brush",command:"clear",areas:[]})):i.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===s?l:l!==s&&s,brushMode:"keep"===s?"multiple"===c?"single":"multiple":c}})},r.getDefaultOption=function(e){return{show:!0,type:Zb.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])}},r}(Vo);var Ub=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.layoutMode={type:"box",ignoreSize:!0},e}return(0,Re.ZT)(r,o),r.type="title",r.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},r}(Pi.Z),Hb=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){if(this.group.removeAll(),e.get("show")){var l=this.group,c=e.getModel("textStyle"),f=e.getModel("subtextStyle"),p=e.get("textAlign"),v=_.retrieve2(e.get("textBaseline"),e.get("textVerticalAlign")),m=new Se.ZP({style:(0,Or.Lr)(c,{text:e.get("text"),fill:c.getTextColor()},{disableBox:!0}),z2:10}),x=m.getBoundingRect(),T=e.get("subtext"),O=new Se.ZP({style:(0,Or.Lr)(f,{text:T,fill:f.getTextColor(),y:x.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),G=e.get("link"),F=e.get("sublink"),Q=e.get("triggerEvent",!0);m.silent=!G&&!Q,O.silent=!F&&!Q,G&&m.on("click",function(){(0,Mn.MI)(G,"_"+e.get("target"))}),F&&O.on("click",function(){(0,Mn.MI)(F,"_"+e.get("subtarget"))}),(0,Fr.A)(m).eventData=(0,Fr.A)(O).eventData=Q?{componentType:"title",componentIndex:e.componentIndex}:null,l.add(m),T&&l.add(O);var ft=l.getBoundingRect(),Tt=e.getBoxLayoutParams();Tt.width=ft.width,Tt.height=ft.height;var xt=(0,sn.ME)(Tt,{width:s.getWidth(),height:s.getHeight()},e.get("padding"));p||("middle"===(p=e.get("left")||e.get("right"))&&(p="center"),"right"===p?xt.x+=xt.width:"center"===p&&(xt.x+=xt.width/2)),v||("center"===(v=e.get("top")||e.get("bottom"))&&(v="middle"),"bottom"===v?xt.y+=xt.height:"middle"===v&&(xt.y+=xt.height/2),v=v||"top"),l.x=xt.x,l.y=xt.y,l.markRedraw();var At={align:p,verticalAlign:v};m.setStyle(At),O.setStyle(At),ft=l.getBoundingRect();var It=xt.margin,Nt=e.getItemStyle(["color","opacity"]);Nt.fill=e.get("backgroundColor");var Gt=new Br.Z({shape:{x:ft.x-It[3],y:ft.y-It[0],width:ft.width+It[1]+It[3],height:ft.height+It[0]+It[2],r:e.get("borderRadius")},style:Nt,subPixelOptimize:!0,silent:!0});l.add(Gt)}},r.type="title",r}(Ti.Z);const Ky=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.layoutMode="box",e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i,s){this.mergeDefaultAndTheme(e,s),this._initData()},r.prototype.mergeOption=function(e){o.prototype.mergeOption.apply(this,arguments),this._initData()},r.prototype.setCurrentIndex=function(e){null==e&&(e=this.option.currentIndex);var i=this._data.count();this.option.loop?e=(e%i+i)%i:(e>=i&&(e=i-1),e<0&&(e=0)),this.option.currentIndex=e},r.prototype.getCurrentIndex=function(){return this.option.currentIndex},r.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},r.prototype.setPlayState=function(e){this.option.autoPlay=!!e},r.prototype.getPlayState=function(){return!!this.option.autoPlay},r.prototype._initData=function(){var c,e=this.option,i=e.data||[],s=e.axisType,l=this._names=[];"category"===s?(c=[],(0,_.each)(i,function(v,m){var T,x=(0,dr.U5)((0,dr.C4)(v),"");(0,_.isObject)(v)?(T=(0,_.clone)(v)).value=m:T=m,c.push(T),l.push(x)})):c=i,(this._data=new Ie.Z([{name:"value",type:{category:"ordinal",time:"time",value:"number"}[s]||"number"}],this)).initData(c,l)},r.prototype.getData=function(){return this._data},r.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},r.type="timeline",r.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},r}(Pi.Z);var jy=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="timeline.slider",r.defaultOption=(0,Ii.ZL)(Ky.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),r}(Ky);(0,_.mixin)(jy,qv.X.prototype);const $b=jy,Yb=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="timeline",r}(Ti.Z),jb=function(o){function r(e,i,s,l){var c=o.call(this,e,i,s)||this;return c.type=l||"value",c}return(0,Re.ZT)(r,o),r.prototype.getLabelModel=function(){return this.model.getModel("label")},r.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},r}(Xa.Z);var Jb=D(7140),Qb=D(1395),am=Math.PI,Jy=(0,dr.Yf)();function Qy(o,r,e,i,s,l){var c=r.get("color");if(s)s.setColor(c),e.add(s),l&&l.onUpdate(s);else{var f=o.get("symbol");(s=(0,Tn.th)(f,-1,-1,2,2,c)).setStyle("strokeNoScale",!0),e.add(s),l&&l.onCreate(s)}var p=r.getItemStyle(["color"]);s.setStyle(p),i=(0,_.merge)({rectHover:!0,z2:100},i,!0);var v=(0,Tn.zp)(o.get("symbolSize"));i.scaleX=v[0]/2,i.scaleY=v[1]/2;var m=(0,Tn.Cq)(o.get("symbolOffset"),v);m&&(i.x=(i.x||0)+m[0],i.y=(i.y||0)+m[1]);var x=o.get("symbolRotate");return i.rotation=(x||0)*Math.PI/180||0,s.attr(i),s.updateTransform(),s}function qy(o,r,e,i,s,l){if(!o.dragging){var c=s.getModel("checkpointStyle"),f=i.dataToCoord(s.getData().get("value",e));if(l||!c.get("animation",!0))o.attr({x:f,y:0}),r&&r.attr({shape:{x2:f}});else{var p={duration:c.get("animationDuration",!0),easing:c.get("animationEasing",!0)};o.stopAnimation(null,!0),o.animateTo({x:f,y:0},p),r&&r.animateTo({shape:{x2:f}},p)}}}const nP=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i){this.api=i},r.prototype.render=function(e,i,s){if(this.model=e,this.api=s,this.ecModel=i,this.group.removeAll(),e.get("show",!0)){var l=this._layout(e,s),c=this._createGroup("_mainGroup"),f=this._createGroup("_labelGroup"),p=this._axis=this._createAxis(l,e);e.formatTooltip=function(v){var m=p.scale.getLabel({value:v});return(0,ii.TX)("nameValue",{noName:!0,value:m})},(0,_.each)(["AxisLine","AxisTick","Control","CurrentPointer"],function(v){this["_render"+v](l,c,p,e)},this),this._renderAxisLabel(l,f,p,e),this._position(l,e)}this._doPlayStop(),this._updateTicksStatus()},r.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},r.prototype.dispose=function(){this._clearTimer()},r.prototype._layout=function(e,i){var f,s=e.get(["label","position"]),l=e.get("orient"),c=function eP(o,r){return sn.ME(o.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()},o.get("padding"))}(e,i),p={horizontal:"center",vertical:(f=null==s||"auto"===s?"horizontal"===l?c.y+c.height/2<i.getHeight()/2?"-":"+":c.x+c.width/2<i.getWidth()/2?"+":"-":(0,_.isString)(s)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[l][s]:s)>=0||"+"===f?"left":"right"},v={horizontal:f>=0||"+"===f?"top":"bottom",vertical:"middle"},m={horizontal:0,vertical:am/2},x="vertical"===l?c.height:c.width,T=e.getModel("controlStyle"),O=T.get("show",!0),G=O?T.get("itemSize"):0,F=O?T.get("itemGap"):0,Q=G+F,ft=e.get(["label","rotate"])||0;ft=ft*am/180;var Tt,xt,At,It=T.get("position",!0),Nt=O&&T.get("showPlayBtn",!0),Gt=O&&T.get("showPrevBtn",!0),Wt=O&&T.get("showNextBtn",!0),jt=0,ee=x;"left"===It||"bottom"===It?(Nt&&(Tt=[0,0],jt+=Q),Gt&&(xt=[jt,0],jt+=Q),Wt&&(At=[ee-G,0],ee-=Q)):(Nt&&(Tt=[ee-G,0],ee-=Q),Gt&&(xt=[0,0],jt+=Q),Wt&&(At=[ee-G,0],ee-=Q));var oe=[jt,ee];return e.get("inverse")&&oe.reverse(),{viewRect:c,mainLength:x,orient:l,rotation:m[l],labelRotation:ft,labelPosOpt:f,labelAlign:e.get(["label","align"])||p[l],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||v[l],playPosition:Tt,prevBtnPosition:xt,nextBtnPosition:At,axisExtent:oe,controlSize:G,controlGap:F}},r.prototype._position=function(e,i){var s=this._mainGroup,l=this._labelGroup,c=e.viewRect;if("vertical"===e.orient){var f=In.create(),p=c.x,v=c.y+c.height;In.translate(f,f,[-p,-v]),In.rotate(f,f,-am/2),In.translate(f,f,[p,v]),(c=c.clone()).applyTransform(f)}var m=Tt(c),x=Tt(s.getBoundingRect()),T=Tt(l.getBoundingRect()),O=[s.x,s.y],G=[l.x,l.y];G[0]=O[0]=m[0][0];var Q,F=e.labelPosOpt;function ft(At){At.originX=m[0][0]-At.x,At.originY=m[1][0]-At.y}function Tt(At){return[[At.x,At.x+At.width],[At.y,At.y+At.height]]}function xt(At,It,Nt,Gt,Wt){At[Gt]+=Nt[Gt][Wt]-It[Gt][Wt]}null==F||(0,_.isString)(F)?(xt(O,x,m,1,Q="+"===F?0:1),xt(G,T,m,1,1-Q)):(xt(O,x,m,1,Q=F>=0?0:1),G[1]=O[1]+F),s.setPosition(O),l.setPosition(G),s.rotation=l.rotation=e.rotation,ft(s),ft(l)},r.prototype._createAxis=function(e,i){var s=i.getData(),l=i.get("axisType"),c=function tP(o,r){if(r=r||o.get("type"))switch(r){case"category":return new Jb.Z({ordinalMeta:o.getCategories(),extent:[1/0,-1/0]});case"time":return new Qb.Z({locale:o.ecModel.getLocaleModel(),useUTC:o.ecModel.get("useUTC")});default:return new xo.Z}}(i,l);c.getTicks=function(){return s.mapArray(["value"],function(v){return{value:v}})};var f=s.getDataExtent("value");c.setExtent(f[0],f[1]),c.calcNiceTicks();var p=new jb("value",c,e.axisExtent,l);return p.model=i,p},r.prototype._createGroup=function(e){var i=this[e]=new pr.Z;return this.group.add(i),i},r.prototype._renderAxisLine=function(e,i,s,l){var c=s.getExtent();if(l.get(["lineStyle","show"])){var f=new aa.Z({shape:{x1:c[0],y1:0,x2:c[1],y2:0},style:(0,_.extend)({lineCap:"round"},l.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});i.add(f);var p=this._progressLine=new aa.Z({shape:{x1:c[0],x2:this._currentPointer?this._currentPointer.x:c[0],y1:0,y2:0},style:(0,_.defaults)({lineCap:"round",lineWidth:f.style.lineWidth},l.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});i.add(p)}},r.prototype._renderAxisTick=function(e,i,s,l){var c=this,f=l.getData(),p=s.scale.getTicks();this._tickSymbols=[],(0,_.each)(p,function(v){var m=s.dataToCoord(v.value),x=f.getItemModel(v.value),T=x.getModel("itemStyle"),O=x.getModel(["emphasis","itemStyle"]),G=x.getModel(["progress","itemStyle"]),F={x:m,y:0,onclick:(0,_.bind)(c._changeTimeline,c,v.value)},Q=Qy(x,T,i,F);Q.ensureState("emphasis").style=O.getItemStyle(),Q.ensureState("progress").style=G.getItemStyle(),(0,sr.vF)(Q);var ft=(0,Fr.A)(Q);x.get("tooltip")?(ft.dataIndex=v.value,ft.dataModel=l):ft.dataIndex=ft.dataModel=null,c._tickSymbols.push(Q)})},r.prototype._renderAxisLabel=function(e,i,s,l){var c=this;if(s.getLabelModel().get("show")){var p=l.getData(),v=s.getViewLabels();this._tickLabels=[],(0,_.each)(v,function(m){var x=m.tickValue,T=p.getItemModel(x),O=T.getModel("label"),G=T.getModel(["emphasis","label"]),F=T.getModel(["progress","label"]),Q=s.dataToCoord(m.tickValue),ft=new Se.ZP({x:Q,y:0,rotation:e.labelRotation-e.rotation,onclick:(0,_.bind)(c._changeTimeline,c,x),silent:!1,style:(0,Or.Lr)(O,{text:m.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});ft.ensureState("emphasis").style=(0,Or.Lr)(G),ft.ensureState("progress").style=(0,Or.Lr)(F),i.add(ft),(0,sr.vF)(ft),Jy(ft).dataIndex=x,c._tickLabels.push(ft)})}},r.prototype._renderControl=function(e,i,s,l){var c=e.controlSize,f=e.rotation,p=l.getModel("controlStyle").getItemStyle(),v=l.getModel(["emphasis","controlStyle"]).getItemStyle(),m=l.getPlayState(),x=l.get("inverse",!0);function T(O,G,F,Q){if(O){var ft=(0,yt.GM)((0,_.retrieve2)(l.get(["controlStyle",G+"BtnSize"]),c),c),xt=function rP(o,r,e,i){var s=i.style,l=ur.createIcon(o.get(["controlStyle",r]),i||{},new bn.Z(e[0],e[1],e[2],e[3]));return s&&l.setStyle(s),l}(l,G+"Icon",[0,-ft/2,ft,ft],{x:O[0],y:O[1],originX:c/2,originY:0,rotation:Q?-f:0,rectHover:!0,style:p,onclick:F});xt.ensureState("emphasis").style=v,i.add(xt),(0,sr.vF)(xt)}}T(e.nextBtnPosition,"next",(0,_.bind)(this._changeTimeline,this,x?"-":"+")),T(e.prevBtnPosition,"prev",(0,_.bind)(this._changeTimeline,this,x?"+":"-")),T(e.playPosition,m?"stop":"play",(0,_.bind)(this._handlePlayClick,this,!m),!0)},r.prototype._renderCurrentPointer=function(e,i,s,l){var c=l.getData(),f=l.getCurrentIndex(),p=c.getItemModel(f).getModel("checkpointStyle"),v=this;this._currentPointer=Qy(p,p,this._mainGroup,{},this._currentPointer,{onCreate:function(x){x.draggable=!0,x.drift=(0,_.bind)(v._handlePointerDrag,v),x.ondragend=(0,_.bind)(v._handlePointerDragend,v),qy(x,v._progressLine,f,s,l,!0)},onUpdate:function(x){qy(x,v._progressLine,f,s,l)}})},r.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},r.prototype._handlePointerDrag=function(e,i,s){this._clearTimer(),this._pointerChangeTimeline([s.offsetX,s.offsetY])},r.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},r.prototype._pointerChangeTimeline=function(e,i){var s=this._toAxisCoord(e)[0],c=Be.dt(this._axis.getExtent().slice());s>c[1]&&(s=c[1]),s<c[0]&&(s=c[0]),this._currentPointer.x=s,this._currentPointer.markRedraw();var f=this._progressLine;f&&(f.shape.x2=s,f.dirty());var p=this._findNearestTick(s),v=this.model;(i||p!==v.getCurrentIndex()&&v.get("realtime"))&&this._changeTimeline(p)},r.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var i=e.model;e._changeTimeline(i.getCurrentIndex()+(i.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},r.prototype._toAxisCoord=function(e){var i=this._mainGroup.getLocalTransform();return ur.applyTransform(e,i,!0)},r.prototype._findNearestTick=function(e){var l,i=this.model.getData(),s=1/0,c=this._axis;return i.each(["value"],function(f,p){var v=c.dataToCoord(f),m=Math.abs(v-e);m<s&&(s=m,l=p)}),l},r.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},r.prototype._changeTimeline=function(e){var i=this.model.getCurrentIndex();"+"===e?e=i+1:"-"===e&&(e=i-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},r.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),i=this._tickSymbols,s=this._tickLabels;if(i)for(var l=0;l<i.length;l++)i&&i[l]&&i[l].toggleState("progress",l<e);if(s)for(l=0;l<s.length;l++)s&&s[l]&&s[l].toggleState("progress",Jy(s[l]).dataIndex<=e)},r.type="timeline.slider",r}(Yb);function aP(o){var r=o&&o.timeline;_.isArray(r)||(r=r?[r]:[]),_.each(r,function(e){!e||function oP(o){var r=o.type,e={number:"value",time:"time"};if(e[r]&&(o.axisType=e[r],delete o.type),tx(o),qc(o,"controlPosition")){var i=o.controlStyle||(o.controlStyle={});qc(i,"position")||(i.position=o.controlPosition),"none"===i.position&&!qc(i,"show")&&(i.show=!1,delete i.position),delete o.controlPosition}_.each(o.data||[],function(s){_.isObject(s)&&!_.isArray(s)&&(!qc(s,"value")&&qc(s,"name")&&(s.value=s.name),tx(s))})}(e)})}function tx(o){var r=o.itemStyle||(o.itemStyle={}),e=r.emphasis||(r.emphasis={}),i=o.label||o.label||{},s=i.normal||(i.normal={}),l={normal:1,emphasis:1};_.each(i,function(c,f){!l[f]&&!qc(s,f)&&(s[f]=c)}),e.label&&!qc(i,"emphasis")&&(i.emphasis=e.label,delete e.label)}function qc(o,r){return o.hasOwnProperty(r)}function om(o,r){if(!o)return!1;for(var e=(0,_.isArray)(o)?o:[o],i=0;i<e.length;i++)if(e[i]&&e[i][r])return!0;return!1}function tg(o){(0,dr.Cc)(o,"label",["show"])}var eg=(0,dr.Yf)(),ex=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.createdBySelf=!1,e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i,s){this.mergeDefaultAndTheme(e,s),this._mergeOption(e,s,!1,!0)},r.prototype.isAnimationEnabled=function(){if(eo.Z.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},r.prototype.mergeOption=function(e,i){this._mergeOption(e,i,!1,!1)},r.prototype._mergeOption=function(e,i,s,l){var c=this.mainType;s||i.eachSeries(function(f){var p=f.get(this.mainType,!0),v=eg(f)[c];p&&p.data?(v?v._mergeOption(p,i,!0):(l&&tg(p),_.each(p.data,function(m){m instanceof Array?(tg(m[0]),tg(m[1])):tg(m)}),v=this.createMarkerModelFromSeries(p,this,i),_.extend(v,{mainType:this.mainType,seriesIndex:f.seriesIndex,name:f.name,createdBySelf:!0}),v.__hostSeries=f),eg(f)[c]=v):eg(f)[c]=null},this)},r.prototype.formatTooltip=function(e,i,s){var l=this.getData(),c=this.getRawValue(e),f=l.getName(e);return(0,ii.TX)("section",{header:this.name,blocks:[(0,ii.TX)("nameValue",{name:f,value:c,noName:!f,noValue:null==c})]})},r.prototype.getData=function(){return this._data},r.prototype.setData=function(e){this._data=e},r.getMarkerModelFromSeries=function(e,i){return eg(e)[i]},r.type="marker",r.dependencies=["series","grid","polar","geo"],r}(Pi.Z);_.mixin(ex,qv.X.prototype);const Ru=ex,uP=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.createMarkerModelFromSeries=function(e,i,s){return new r(e,i,s)},r.type="markPoint",r.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},r}(Ru);var Bu=D(6566);function sm(o){return!(isNaN(parseFloat(o.x))&&isNaN(parseFloat(o.y)))}function rg(o,r,e,i,s,l){var c=[],p=(0,za.M)(r,i)?r.getCalculationInfo("stackResultDimension"):i,v=um(r,p,o),m=r.indicesOfNearest(p,v)[0];c[s]=r.get(e,m),c[l]=r.get(p,m);var x=r.get(i,m),T=Be.p8(r.get(i,m));return(T=Math.min(T,20))>=0&&(c[l]=+c[l].toFixed(T)),[c,x]}var lm={min:(0,_.curry)(rg,"min"),max:(0,_.curry)(rg,"max"),average:(0,_.curry)(rg,"average"),median:(0,_.curry)(rg,"median")};function Cp(o,r){if(r){var e=o.getData(),i=o.coordinateSystem,s=i.dimensions;if(!function cP(o){return!isNaN(parseFloat(o.x))&&!isNaN(parseFloat(o.y))}(r)&&!(0,_.isArray)(r.coord)&&i){var l=rx(r,e,i,o);if((r=(0,_.clone)(r)).type&&lm[r.type]&&l.baseAxis&&l.valueAxis){var c=(0,_.indexOf)(s,l.baseAxis.dim),f=(0,_.indexOf)(s,l.valueAxis.dim),p=lm[r.type](e,l.baseDataDim,l.valueDataDim,c,f);r.coord=p[0],r.value=p[1]}else r.coord=[null!=r.xAxis?r.xAxis:r.radiusAxis,null!=r.yAxis?r.yAxis:r.angleAxis]}if(null==r.coord)r.coord=[];else for(var v=r.coord,m=0;m<2;m++)lm[v[m]]&&(v[m]=um(e,e.mapDimension(s[m]),v[m]));return r}}function rx(o,r,e,i){var s={};return null!=o.valueIndex||null!=o.valueDim?(s.valueDataDim=null!=o.valueIndex?r.getDimension(o.valueIndex):o.valueDim,s.valueAxis=e.getAxis(function hP(o,r){var e=o.getData().getDimensionInfo(r);return e&&e.coordDim}(i,s.valueDataDim)),s.baseAxis=e.getOtherAxis(s.valueAxis),s.baseDataDim=r.mapDimension(s.baseAxis.dim)):(s.baseAxis=i.getBaseAxis(),s.valueAxis=e.getOtherAxis(s.baseAxis),s.baseDataDim=r.mapDimension(s.baseAxis.dim),s.valueDataDim=r.mapDimension(s.valueAxis.dim)),s}function Mp(o,r){return!(o&&o.containData&&r.coord&&!sm(r))||o.containData(r.coord)}function nx(o,r){return o?function(e,i,s,l){return(0,Bu.yQ)(l<2?e.coord&&e.coord[l]:e.value,r[l])}:function(e,i,s,l){return(0,Bu.yQ)(e.value,r[l])}}function um(o,r,e){if("average"===e){var i=0,s=0;return o.each(r,function(l,c){isNaN(l)||(i+=l,s++)}),i/s}return"median"===e?o.getMedian(r):o.getDataExtent(r)["max"===e?1:0]}var cm=(0,dr.Yf)();const hm=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.init=function(){this.markerGroupMap=(0,_.createHashMap)()},r.prototype.render=function(e,i,s){var l=this,c=this.markerGroupMap;c.each(function(f){cm(f).keep=!1}),i.eachSeries(function(f){var p=Ru.getMarkerModelFromSeries(f,l.type);p&&l.renderSeries(f,p,i,s)}),c.each(function(f){!cm(f).keep&&l.group.remove(f.group)})},r.prototype.markKeep=function(e){cm(e).keep=!0},r.prototype.toggleBlurSeries=function(e,i){var s=this;(0,_.each)(e,function(l){var c=Ru.getMarkerModelFromSeries(l,s.type);c&&c.getData().eachItemGraphicEl(function(p){p&&(i?(0,sr.SX)(p):(0,sr.VP)(p))})})},r.type="marker",r}(Ti.Z);function ix(o,r,e){var i=r.coordinateSystem;o.each(function(s){var c,l=o.getItemModel(s),f=Be.GM(l.get("x"),e.getWidth()),p=Be.GM(l.get("y"),e.getHeight());if(isNaN(f)||isNaN(p)){if(r.getMarkerPosition)c=r.getMarkerPosition(o.getValues(o.dimensions,s));else if(i){var v=o.get(i.dimensions[0],s),m=o.get(i.dimensions[1],s);c=i.dataToPoint([v,m])}}else c=[f,p];isNaN(f)||(c[0]=f),isNaN(p)||(c[1]=p),o.setItemLayout(s,c)})}const gP=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.updateTransform=function(e,i,s){i.eachSeries(function(l){var c=Ru.getMarkerModelFromSeries(l,"markPoint");c&&(ix(c.getData(),l,s),this.markerGroupMap.get(l.id).updateLayout())},this)},r.prototype.renderSeries=function(e,i,s,l){var c=e.coordinateSystem,f=e.id,p=e.getData(),v=this.markerGroupMap,m=v.get(f)||v.set(f,new ka),x=function vP(o,r,e){var i;i=o?(0,_.map)(o&&o.dimensions,function(f){var p=r.getData().getDimensionInfo(r.getData().mapDimension(f))||{};return(0,_.extend)((0,_.extend)({},p),{name:f,ordinalMeta:null})}):[{name:"value",type:"float"}];var s=new Ie.Z(i,e),l=(0,_.map)(e.get("data"),(0,_.curry)(Cp,r));o&&(l=(0,_.filter)(l,(0,_.curry)(Mp,o)));var c=nx(!!o,i);return s.initData(l,null,c),s}(c,e,i);i.setData(x),ix(i.getData(),e,l),x.each(function(T){var O=x.getItemModel(T),G=O.getShallow("symbol"),F=O.getShallow("symbolSize"),Q=O.getShallow("symbolRotate"),ft=O.getShallow("symbolOffset"),Tt=O.getShallow("symbolKeepAspect");if((0,_.isFunction)(G)||(0,_.isFunction)(F)||(0,_.isFunction)(Q)||(0,_.isFunction)(ft)){var xt=i.getRawValue(T),At=i.getDataParams(T);(0,_.isFunction)(G)&&(G=G(xt,At)),(0,_.isFunction)(F)&&(F=F(xt,At)),(0,_.isFunction)(Q)&&(Q=Q(xt,At)),(0,_.isFunction)(ft)&&(ft=ft(xt,At))}var It=O.getModel("itemStyle").getItemStyle(),Nt=(0,Iu.UL)(p,"color");It.fill||(It.fill=Nt),x.setItemVisual(T,{symbol:G,symbolSize:F,symbolRotate:Q,symbolOffset:ft,symbolKeepAspect:Tt,style:It})}),m.updateData(x),this.group.add(m.group),x.eachItemGraphicEl(function(T){T.traverse(function(O){(0,Fr.A)(O).dataModel=i})}),this.markKeep(m),m.group.silent=i.get("silent")||e.get("silent")},r.type="markPoint",r}(hm),yP=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.createMarkerModelFromSeries=function(e,i,s){return new r(e,i,s)},r.type="markLine",r.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},r}(Ru);var ng=(0,dr.Yf)(),xP=function(o,r,e,i){var l,s=o.getData();if((0,_.isArray)(i))l=i;else{var c=i.type;if("min"===c||"max"===c||"average"===c||"median"===c||null!=i.xAxis||null!=i.yAxis){var f=void 0,p=void 0;if(null!=i.yAxis||null!=i.xAxis)f=r.getAxis(null!=i.yAxis?"y":"x"),p=(0,_.retrieve)(i.yAxis,i.xAxis);else{var v=rx(i,s,r,o);f=v.valueAxis,p=um(s,(0,za.IR)(s,v.valueDataDim),c)}var x="x"===f.dim?0:1,T=1-x,O=(0,_.clone)(i),G={coord:[]};O.type=null,O.coord=[],O.coord[T]=-1/0,G.coord[T]=1/0;var F=e.get("precision");F>=0&&(0,_.isNumber)(p)&&(p=+p.toFixed(Math.min(F,20))),O.coord[x]=G.coord[x]=p,l=[O,G,{type:c,valueIndex:i.valueIndex,value:p}]}else l=[]}var Q=[Cp(o,l[0]),Cp(o,l[1]),(0,_.extend)({},l[2])];return Q[2].type=Q[2].type||null,(0,_.merge)(Q[2],Q[0]),(0,_.merge)(Q[2],Q[1]),Q};function ig(o){return!isNaN(o)&&!isFinite(o)}function ax(o,r,e,i){var s=1-o,l=i.dimensions[o];return ig(r[s])&&ig(e[s])&&r[o]===e[o]&&i.getAxis(l).containData(r[o])}function SP(o,r){if("cartesian2d"===o.type){var e=r[0].coord,i=r[1].coord;if(e&&i&&(ax(1,e,i,o)||ax(0,e,i,o)))return!0}return Mp(o,r[0])&&Mp(o,r[1])}function fm(o,r,e,i,s){var f,l=i.coordinateSystem,c=o.getItemModel(r),p=Be.GM(c.get("x"),s.getWidth()),v=Be.GM(c.get("y"),s.getHeight());if(isNaN(p)||isNaN(v)){if(i.getMarkerPosition)f=i.getMarkerPosition(o.getValues(o.dimensions,r));else{var x=o.get((m=l.dimensions)[0],r),T=o.get(m[1],r);f=l.dataToPoint([x,T])}if(Oa(l,"cartesian2d")){var m,O=l.getAxis("x"),G=l.getAxis("y");ig(o.get((m=l.dimensions)[0],r))?f[0]=O.toGlobalCoord(O.getExtent()[e?0:1]):ig(o.get(m[1],r))&&(f[1]=G.toGlobalCoord(G.getExtent()[e?0:1]))}isNaN(p)||(f[0]=p),isNaN(v)||(f[1]=v)}else f=[p,v];o.setItemLayout(r,f)}const MP=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.updateTransform=function(e,i,s){i.eachSeries(function(l){var c=Ru.getMarkerModelFromSeries(l,"markLine");if(c){var f=c.getData(),p=ng(c).from,v=ng(c).to;p.each(function(m){fm(p,m,!0,l,s),fm(v,m,!1,l,s)}),f.each(function(m){f.setItemLayout(m,[p.getItemLayout(m),v.getItemLayout(m)])}),this.markerGroupMap.get(l.id).updateLayout()}},this)},r.prototype.renderSeries=function(e,i,s,l){var c=e.coordinateSystem,f=e.id,p=e.getData(),v=this.markerGroupMap,m=v.get(f)||v.set(f,new zc);this.group.add(m.group);var x=function CP(o,r,e){var i;i=o?(0,_.map)(o&&o.dimensions,function(v){var m=r.getData().getDimensionInfo(r.getData().mapDimension(v))||{};return(0,_.extend)((0,_.extend)({},m),{name:v,ordinalMeta:null})}):[{name:"value",type:"float"}];var s=new Ie.Z(i,e),l=new Ie.Z(i,e),c=new Ie.Z([],e),f=(0,_.map)(e.get("data"),(0,_.curry)(xP,r,o,e));o&&(f=(0,_.filter)(f,(0,_.curry)(SP,o)));var p=nx(!!o,i);return s.initData((0,_.map)(f,function(v){return v[0]}),null,p),l.initData((0,_.map)(f,function(v){return v[1]}),null,p),c.initData((0,_.map)(f,function(v){return v[2]})),c.hasItemOption=!0,{from:s,to:l,line:c}}(c,e,i),T=x.from,O=x.to,G=x.line;ng(i).from=T,ng(i).to=O,i.setData(G);var F=i.get("symbol"),Q=i.get("symbolSize"),ft=i.get("symbolRotate"),Tt=i.get("symbolOffset");function xt(At,It,Nt){var Gt=At.getItemModel(It);fm(At,It,Nt,e,l);var Wt=Gt.getModel("itemStyle").getItemStyle();null==Wt.fill&&(Wt.fill=(0,Iu.UL)(p,"color")),At.setItemVisual(It,{symbolKeepAspect:Gt.get("symbolKeepAspect"),symbolOffset:(0,_.retrieve2)(Gt.get("symbolOffset",!0),Tt[Nt?0:1]),symbolRotate:(0,_.retrieve2)(Gt.get("symbolRotate",!0),ft[Nt?0:1]),symbolSize:(0,_.retrieve2)(Gt.get("symbolSize"),Q[Nt?0:1]),symbol:(0,_.retrieve2)(Gt.get("symbol",!0),F[Nt?0:1]),style:Wt})}(0,_.isArray)(F)||(F=[F,F]),(0,_.isArray)(Q)||(Q=[Q,Q]),(0,_.isArray)(ft)||(ft=[ft,ft]),(0,_.isArray)(Tt)||(Tt=[Tt,Tt]),x.from.each(function(At){xt(T,At,!0),xt(O,At,!1)}),G.each(function(At){var It=G.getItemModel(At).getModel("lineStyle").getLineStyle();G.setItemLayout(At,[T.getItemLayout(At),O.getItemLayout(At)]),null==It.stroke&&(It.stroke=T.getItemVisual(At,"style").fill),G.setItemVisual(At,{fromSymbolKeepAspect:T.getItemVisual(At,"symbolKeepAspect"),fromSymbolOffset:T.getItemVisual(At,"symbolOffset"),fromSymbolRotate:T.getItemVisual(At,"symbolRotate"),fromSymbolSize:T.getItemVisual(At,"symbolSize"),fromSymbol:T.getItemVisual(At,"symbol"),toSymbolKeepAspect:O.getItemVisual(At,"symbolKeepAspect"),toSymbolOffset:O.getItemVisual(At,"symbolOffset"),toSymbolRotate:O.getItemVisual(At,"symbolRotate"),toSymbolSize:O.getItemVisual(At,"symbolSize"),toSymbol:O.getItemVisual(At,"symbol"),style:It})}),m.updateData(G),x.line.eachItemGraphicEl(function(At){(0,Fr.A)(At).dataModel=i,At.traverse(function(It){(0,Fr.A)(It).dataModel=i})}),this.markKeep(m),m.group.silent=i.get("silent")||e.get("silent")},r.type="markLine",r}(hm),AP=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.createMarkerModelFromSeries=function(e,i,s){return new r(e,i,s)},r.type="markArea",r.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},r}(Ru);var ag=(0,dr.Yf)(),OP=function(o,r,e,i){var s=i[0],l=i[1];if(s&&l){var c=Cp(o,s),f=Cp(o,l),p=c.coord,v=f.coord;p[0]=(0,_.retrieve)(p[0],-1/0),p[1]=(0,_.retrieve)(p[1],-1/0),v[0]=(0,_.retrieve)(v[0],1/0),v[1]=(0,_.retrieve)(v[1],1/0);var m=(0,_.mergeAll)([{},c,f]);return m.coord=[c.coord,f.coord],m.x0=c.x,m.y0=c.y,m.x1=f.x,m.y1=f.y,m}};function og(o){return!isNaN(o)&&!isFinite(o)}function ox(o,r,e,i){var s=1-o;return og(r[s])&&og(e[s])}function EP(o,r){var e=r.coord[0],i=r.coord[1],s={coord:e,x:r.x0,y:r.y0},l={coord:i,x:r.x1,y:r.y1};return Oa(o,"cartesian2d")?!(!e||!i||!ox(1,e,i)&&!ox(0,e,i))||function fP(o,r,e){return!(o&&o.containZone&&r.coord&&e.coord&&!sm(r)&&!sm(e))||o.containZone(r.coord,e.coord)}(o,s,l):Mp(o,s)||Mp(o,l)}function sx(o,r,e,i,s){var f,l=i.coordinateSystem,c=o.getItemModel(r),p=Be.GM(c.get(e[0]),s.getWidth()),v=Be.GM(c.get(e[1]),s.getHeight());if(isNaN(p)||isNaN(v)){if(i.getMarkerPosition){var m=o.getValues(["x0","y0"],r),x=o.getValues(["x1","y1"],r),T=l.clampData(m),O=l.clampData(x),G=[];G[0]="x0"===e[0]?T[0]>O[0]?x[0]:m[0]:T[0]>O[0]?m[0]:x[0],G[1]="y0"===e[1]?T[1]>O[1]?x[1]:m[1]:T[1]>O[1]?m[1]:x[1],f=i.getMarkerPosition(G,e,!0)}else{var ft=[F=o.get(e[0],r),Q=o.get(e[1],r)];l.clampData&&l.clampData(ft,ft),f=l.dataToPoint(ft,!0)}if(Oa(l,"cartesian2d")){var Tt=l.getAxis("x"),xt=l.getAxis("y"),F=o.get(e[0],r),Q=o.get(e[1],r);og(F)?f[0]=Tt.toGlobalCoord(Tt.getExtent()["x0"===e[0]?0:1]):og(Q)&&(f[1]=xt.toGlobalCoord(xt.getExtent()["y0"===e[1]?0:1]))}isNaN(p)||(f[0]=p),isNaN(v)||(f[1]=v)}else f=[p,v];return f}var lx=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];const LP=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.updateTransform=function(e,i,s){i.eachSeries(function(l){var c=Ru.getMarkerModelFromSeries(l,"markArea");if(c){var f=c.getData();f.each(function(p){var v=(0,_.map)(lx,function(x){return sx(f,p,x,l,s)});f.setItemLayout(p,v),f.getItemGraphicEl(p).setShape("points",v)})}},this)},r.prototype.renderSeries=function(e,i,s,l){var c=e.coordinateSystem,f=e.id,p=e.getData(),v=this.markerGroupMap,m=v.get(f)||v.set(f,{group:new pr.Z});this.group.add(m.group),this.markKeep(m);var x=function DP(o,r,e){var i,s;if(o){var c=(0,_.map)(o&&o.dimensions,function(v){var m=r.getData(),x=m.getDimensionInfo(m.mapDimension(v))||{};return(0,_.extend)((0,_.extend)({},x),{name:v,ordinalMeta:null})});s=(0,_.map)(["x0","y0","x1","y1"],function(v,m){return{name:v,type:c[m%2].type}}),i=new Ie.Z(s,e)}else i=new Ie.Z(s=[{name:"value",type:"float"}],e);var f=(0,_.map)(e.get("data"),(0,_.curry)(OP,r,o,e));o&&(f=(0,_.filter)(f,(0,_.curry)(EP,o)));var p=o?function(v,m,x,T){var O=v.coord[Math.floor(T/2)][T%2];return(0,Bu.yQ)(O,s[T])}:function(v,m,x,T){return(0,Bu.yQ)(v.value,s[T])};return i.initData(f,null,p),i.hasItemOption=!0,i}(c,e,i);i.setData(x),x.each(function(T){var O=(0,_.map)(lx,function(Wt){return sx(x,T,Wt,e,l)}),G=c.getAxis("x").scale,F=c.getAxis("y").scale,Q=G.getExtent(),ft=F.getExtent(),Tt=[G.parse(x.get("x0",T)),G.parse(x.get("x1",T))],xt=[F.parse(x.get("y0",T)),F.parse(x.get("y1",T))];Be.dt(Tt),Be.dt(xt),x.setItemLayout(T,{points:O,allClipped:!!(Q[0]>Tt[1]||Q[1]<Tt[0]||ft[0]>xt[1]||ft[1]<xt[0])});var Nt=x.getItemModel(T).getModel("itemStyle").getItemStyle(),Gt=(0,Iu.UL)(p,"color");Nt.fill||(Nt.fill=Gt,(0,_.isString)(Nt.fill)&&(Nt.fill=oi.modifyAlpha(Nt.fill,.4))),Nt.stroke||(Nt.stroke=Gt),x.setItemVisual(T,"style",Nt)}),x.diff(ag(m).data).add(function(T){var O=x.getItemLayout(T);if(!O.allClipped){var G=new Jn.Z({shape:{points:O.points}});x.setItemGraphicEl(T,G),m.group.add(G)}}).update(function(T,O){var G=ag(m).data.getItemGraphicEl(O),F=x.getItemLayout(T);F.allClipped?G&&m.group.remove(G):(G?he.D(G,{shape:{points:F.points}},i,T):G=new Jn.Z({shape:{points:F.points}}),x.setItemGraphicEl(T,G),m.group.add(G))}).remove(function(T){var O=ag(m).data.getItemGraphicEl(T);m.group.remove(O)}).execute(),x.eachItemGraphicEl(function(T,O){var G=x.getItemModel(O),F=x.getItemVisual(O,"style");T.useStyle(x.getItemVisual(O,"style")),(0,Or.ni)(T,(0,Or.k3)(G),{labelFetcher:i,labelDataIndex:O,defaultText:x.getName(O)||"",inheritColor:(0,_.isString)(F.fill)?oi.modifyAlpha(F.fill,1):"#000"}),(0,sr.WO)(T,G),(0,sr.k5)(T,null,null,G.get(["emphasis","disabled"])),(0,Fr.A)(T).dataModel=i}),ag(m).data=x,m.group.silent=i.get("silent")||e.get("silent")},r.type="markArea",r}(hm),dm=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.layoutMode={type:"box",ignoreSize:!0},e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i,s){this.mergeDefaultAndTheme(e,s),e.selected=e.selected||{},this._updateSelector(e)},r.prototype.mergeOption=function(e,i){o.prototype.mergeOption.call(this,e,i),this._updateSelector(e)},r.prototype._updateSelector=function(e){var i=e.selector,s=this.ecModel;!0===i&&(i=e.selector=["all","inverse"]),_.isArray(i)&&_.each(i,function(l,c){_.isString(l)&&(l={type:l}),i[c]=_.merge(l,function(o,r){return"all"===r?{type:"all",title:o.getLocaleModel().get(["legend","selector","all"])}:"inverse"===r?{type:"inverse",title:o.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(s,l.type))})},r.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var i=!1,s=0;s<e.length;s++){var l=e[s].get("name");if(this.isSelected(l)){this.select(l),i=!0;break}}!i&&this.select(e[0].get("name"))}},r.prototype._updateData=function(e){var i=[],s=[];e.eachRawSeries(function(p){var m;if(s.push(p.name),p.legendVisualProvider){var T=p.legendVisualProvider.getAllNames();e.isSeriesFiltered(p)||(s=s.concat(T)),T.length?i=i.concat(T):m=!0}else m=!0;m&&(0,dr.yu)(p)&&i.push(p.name)}),this._availableNames=s;var l=this.get("data")||i,c=_.createHashMap(),f=_.map(l,function(p){return(_.isString(p)||_.isNumber(p))&&(p={name:p}),c.get(p.name)?null:(c.set(p.name,!0),new hi.Z(p,this,this.ecModel))},this);this._data=_.filter(f,function(p){return!!p})},r.prototype.getData=function(){return this._data},r.prototype.select=function(e){var i=this.option.selected;"single"===this.get("selectedMode")&&_.each(this._data,function(c){i[c.get("name")]=!1}),i[e]=!0},r.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},r.prototype.toggleSelected=function(e){var i=this.option.selected;i.hasOwnProperty(e)||(i[e]=!0),this[i[e]?"unSelect":"select"](e)},r.prototype.allSelect=function(){var i=this.option.selected;_.each(this._data,function(s){i[s.get("name",!0)]=!0})},r.prototype.inverseSelect=function(){var i=this.option.selected;_.each(this._data,function(s){var l=s.get("name",!0);i.hasOwnProperty(l)||(i[l]=!0),i[l]=!i[l]})},r.prototype.isSelected=function(e){var i=this.option.selected;return!(i.hasOwnProperty(e)&&!i[e])&&_.indexOf(this._availableNames,e)>=0},r.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},r.type="legend.plain",r.dependencies=["series"],r.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},r}(Pi.Z);var xf=_.curry,pm=_.each,sg=pr.Z;function ux(o,r,e,i){gm(o,r,e,i),e.dispatchAction({type:"legendToggleSelect",name:o??r}),vm(o,r,e,i)}function cx(o){for(var e,r=o.getZr().storage.getDisplayList(),i=0,s=r.length;i<s&&!(e=r[i].states.emphasis);)i++;return e&&e.hoverLayer}function vm(o,r,e,i){cx(e)||e.dispatchAction({type:"highlight",seriesName:o,name:r,excludeSeriesId:i})}function gm(o,r,e,i){cx(e)||e.dispatchAction({type:"downplay",seriesName:o,name:r,excludeSeriesId:i})}const hx=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.newlineDisabled=!1,e}return(0,Re.ZT)(r,o),r.prototype.init=function(){this.group.add(this._contentGroup=new sg),this.group.add(this._selectorGroup=new sg),this._isFirstRender=!0},r.prototype.getContentGroup=function(){return this._contentGroup},r.prototype.getSelectorGroup=function(){return this._selectorGroup},r.prototype.render=function(e,i,s){var l=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var c=e.get("align"),f=e.get("orient");(!c||"auto"===c)&&(c="right"===e.get("left")&&"vertical"===f?"right":"left");var p=e.get("selector",!0),v=e.get("selectorPosition",!0);p&&(!v||"auto"===v)&&(v="horizontal"===f?"end":"start"),this.renderInner(c,e,i,s,p,f,v);var m=e.getBoxLayoutParams(),x={width:s.getWidth(),height:s.getHeight()},T=e.get("padding"),O=sn.ME(m,x,T),G=this.layoutInner(e,c,O,l,p,v),F=sn.ME(_.defaults({width:G.width,height:G.height},m),x,T);this.group.x=F.x-G.x,this.group.y=F.y-G.y,this.group.markRedraw(),this.group.add(this._backgroundEl=_y(G,e))}},r.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},r.prototype.renderInner=function(e,i,s,l,c,f,p){var v=this.getContentGroup(),m=_.createHashMap(),x=i.get("selectedMode"),T=[];s.eachRawSeries(function(O){!O.get("legendHoverLink")&&T.push(O.id)}),pm(i.getData(),function(O,G){var F=O.get("name");if(!this.newlineDisabled&&(""===F||"\n"===F)){var Q=new sg;return Q.newline=!0,void v.add(Q)}var ft=s.getSeriesByName(F)[0];if(!m.get(F))if(ft){var Tt=ft.getData(),xt=Tt.getVisual("legendLineStyle")||{},At=Tt.getVisual("legendIcon"),It=Tt.getVisual("style");this._createItem(ft,F,G,O,i,e,xt,It,At,x,l).on("click",xf(ux,F,null,l,T)).on("mouseover",xf(vm,ft.name,null,l,T)).on("mouseout",xf(gm,ft.name,null,l,T)),m.set(F,!0)}else s.eachRawSeries(function(Gt){if(!m.get(F)&&Gt.legendVisualProvider){var Wt=Gt.legendVisualProvider;if(!Wt.containName(F))return;var jt=Wt.indexOfName(F),ee=Wt.getItemVisual(jt,"style"),oe=Wt.getItemVisual(jt,"legendIcon"),de=(0,oi.parse)(ee.fill);de&&0===de[3]&&(de[3]=.2,ee=_.extend(_.extend({},ee),{fill:(0,oi.stringify)(de,"rgba")})),this._createItem(Gt,F,G,O,i,e,{},ee,oe,x,l).on("click",xf(ux,null,F,l,T)).on("mouseover",xf(vm,null,F,l,T)).on("mouseout",xf(gm,null,F,l,T)),m.set(F,!0)}},this)},this),c&&this._createSelector(c,i,l,f,p)},r.prototype._createSelector=function(e,i,s,l,c){var f=this.getSelectorGroup();pm(e,function(v){var m=v.type,x=new Se.ZP({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){s.dispatchAction({type:"all"===m?"legendAllSelect":"legendInverseSelect"})}});f.add(x);var T=i.getModel("selectorLabel"),O=i.getModel(["emphasis","selectorLabel"]);(0,Or.ni)(x,{normal:T,emphasis:O},{defaultText:v.title}),(0,sr.vF)(x)})},r.prototype._createItem=function(e,i,s,l,c,f,p,v,m,x,T){var O=e.visualDrawType,G=c.get("itemWidth"),F=c.get("itemHeight"),Q=c.isSelected(i),ft=l.get("symbolRotate"),Tt=l.get("symbolKeepAspect"),xt=l.get("icon"),At=function GP(o,r,e,i,s,l,c){function f(Q,ft){"auto"===Q.lineWidth&&(Q.lineWidth=ft.lineWidth>0?2:0),pm(Q,function(Tt,xt){"inherit"===Q[xt]&&(Q[xt]=ft[xt])})}var p=r.getModel("itemStyle"),v=p.getItemStyle(),m=0===o.lastIndexOf("empty",0)?"fill":"stroke",x=p.getShallow("decal");v.decal=x&&"inherit"!==x?(0,Sl.I)(x,c):i.decal,"inherit"===v.fill&&(v.fill=i[s]),"inherit"===v.stroke&&(v.stroke=i[m]),"inherit"===v.opacity&&(v.opacity=("fill"===s?i:e).opacity),f(v,i);var T=r.getModel("lineStyle"),O=T.getLineStyle();if(f(O,e),"auto"===v.fill&&(v.fill=i.fill),"auto"===v.stroke&&(v.stroke=i.fill),"auto"===O.stroke&&(O.stroke=i.fill),!l){var G=r.get("inactiveBorderWidth");v.lineWidth="auto"===G?i.lineWidth>0&&v[m]?2:0:v.lineWidth,v.fill=r.get("inactiveColor"),v.stroke=r.get("inactiveBorderColor"),O.stroke=T.get("inactiveColor"),O.lineWidth=T.get("inactiveWidth")}return{itemStyle:v,lineStyle:O}}(m=xt||m||"roundRect",l,p,v,O,Q,T),It=new sg,Nt=l.getModel("textStyle");if(!_.isFunction(e.getLegendIcon)||xt&&"inherit"!==xt){var Gt="inherit"===xt&&e.getData().getVisual("symbol")?"inherit"===ft?e.getData().getVisual("symbolRotate"):ft:0;It.add(function ZP(o){var r=o.icon||"roundRect",e=(0,Tn.th)(r,0,0,o.itemWidth,o.itemHeight,o.itemStyle.fill,o.symbolKeepAspect);return e.setStyle(o.itemStyle),e.rotation=(o.iconRotate||0)*Math.PI/180,e.setOrigin([o.itemWidth/2,o.itemHeight/2]),r.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}({itemWidth:G,itemHeight:F,icon:m,iconRotate:Gt,itemStyle:At.itemStyle,lineStyle:At.lineStyle,symbolKeepAspect:Tt}))}else It.add(e.getLegendIcon({itemWidth:G,itemHeight:F,icon:m,iconRotate:ft,itemStyle:At.itemStyle,lineStyle:At.lineStyle,symbolKeepAspect:Tt}));var Wt="left"===f?G+5:-5,jt=f,ee=c.get("formatter"),oe=i;_.isString(ee)&&ee?oe=ee.replace("{name}",i??""):_.isFunction(ee)&&(oe=ee(i));var de=l.get("inactiveColor");It.add(new Se.ZP({style:(0,Or.Lr)(Nt,{text:oe,x:Wt,y:F/2,fill:Q?Nt.getTextColor():de,align:jt,verticalAlign:"middle"})}));var xe=new Br.Z({shape:It.getBoundingRect(),invisible:!0}),be=l.getModel("tooltip");return be.get("show")&&ur.setTooltipConfig({el:xe,componentModel:c,itemName:i,itemTooltipOption:be.option}),It.add(xe),It.eachChild(function(Ae){Ae.silent=!0}),xe.silent=!x,this.getContentGroup().add(It),(0,sr.vF)(It),It.__legendDataIndex=s,It},r.prototype.layoutInner=function(e,i,s,l,c,f){var p=this.getContentGroup(),v=this.getSelectorGroup();sn.BZ(e.get("orient"),p,e.get("itemGap"),s.width,s.height);var m=p.getBoundingRect(),x=[-m.x,-m.y];if(v.markRedraw(),p.markRedraw(),c){sn.BZ("horizontal",v,e.get("selectorItemGap",!0));var T=v.getBoundingRect(),O=[-T.x,-T.y],G=e.get("selectorButtonGap",!0),F=e.getOrient().index,Q=0===F?"width":"height",ft=0===F?"height":"width",Tt=0===F?"y":"x";"end"===f?O[F]+=m[Q]+G:x[F]+=T[Q]+G,O[1-F]+=m[ft]/2-T[ft]/2,v.x=O[0],v.y=O[1],p.x=x[0],p.y=x[1];var xt={x:0,y:0};return xt[Q]=m[Q]+G+T[Q],xt[ft]=Math.max(m[ft],T[ft]),xt[Tt]=Math.min(0,T[Tt]+O[1-F]),xt}return p.x=x[0],p.y=x[1],this.group.getBoundingRect()},r.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},r.type="legend.plain",r}(Ti.Z);function FP(o){var r=o.findComponents({mainType:"legend"});r&&r.length&&o.filterSeries(function(e){for(var i=0;i<r.length;i++)if(!r[i].isSelected(e.name))return!1;return!0})}function bp(o,r,e){var l,i={},s="toggleSelected"===o;return e.eachComponent("legend",function(c){s&&null!=l?c[l?"select":"unSelect"](r.name):"allSelect"===o||"inverseSelect"===o?c[o]():(c[o](r.name),l=c.isSelected(r.name));var f=c.getData();(0,_.each)(f,function(p){var v=p.get("name");if("\n"!==v&&""!==v){var m=c.isSelected(v);i[v]=i.hasOwnProperty(v)?i[v]&&m:m}})}),"allSelect"===o||"inverseSelect"===o?{selected:i}:{name:r.name,selected:i}}function fx(o){o.registerComponentModel(dm),o.registerComponentView(hx),o.registerProcessor(o.PRIORITY.PROCESSOR.SERIES_FILTER,FP),o.registerSubTypeDefaulter("legend",function(){return"plain"}),function kP(o){o.registerAction("legendToggleSelect","legendselectchanged",(0,_.curry)(bp,"toggleSelected")),o.registerAction("legendAllSelect","legendselectall",(0,_.curry)(bp,"allSelect")),o.registerAction("legendInverseSelect","legendinverseselect",(0,_.curry)(bp,"inverseSelect")),o.registerAction("legendSelect","legendselected",(0,_.curry)(bp,"select")),o.registerAction("legendUnSelect","legendunselected",(0,_.curry)(bp,"unSelect"))}(o)}function dx(o,r,e){var s=[1,1];s[o.getOrient().index]=0,(0,sn.dt)(r,e,{type:"box",ignoreSize:!!s})}const UP=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},r.prototype.init=function(e,i,s){var l=(0,sn.tE)(e);o.prototype.init.call(this,e,i,s),dx(this,e,l)},r.prototype.mergeOption=function(e,i){o.prototype.mergeOption.call(this,e,i),dx(this,this.option,e)},r.type="legend.scroll",r.defaultOption=(0,Ii.ZL)(dm.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),r}(dm);var px=pr.Z,_m=["width","height"],mm=["x","y"];const VP=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.newlineDisabled=!0,e._currentIndex=0,e}return(0,Re.ZT)(r,o),r.prototype.init=function(){o.prototype.init.call(this),this.group.add(this._containerGroup=new px),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new px)},r.prototype.resetInner=function(){o.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},r.prototype.renderInner=function(e,i,s,l,c,f,p){var v=this;o.prototype.renderInner.call(this,e,i,s,l,c,f,p);var m=this._controllerGroup,x=i.get("pageIconSize",!0),T=_.isArray(x)?x:[x,x];G("pagePrev",0);var O=i.getModel("pageTextStyle");function G(F,Q){var ft=F+"DataIndex",Tt=ur.createIcon(i.get("pageIcons",!0)[i.getOrient().name][Q],{onclick:_.bind(v._pageGo,v,ft,i,l)},{x:-T[0]/2,y:-T[1]/2,width:T[0],height:T[1]});Tt.name=F,m.add(Tt)}m.add(new Se.ZP({name:"pageText",style:{text:"xx/xx",fill:O.getTextColor(),font:O.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),G("pageNext",1)},r.prototype.layoutInner=function(e,i,s,l,c,f){var p=this.getSelectorGroup(),v=e.getOrient().index,m=_m[v],x=mm[v],T=_m[1-v],O=mm[1-v];c&&sn.BZ("horizontal",p,e.get("selectorItemGap",!0));var G=e.get("selectorButtonGap",!0),F=p.getBoundingRect(),Q=[-F.x,-F.y],ft=_.clone(s);c&&(ft[m]=s[m]-F[m]-G);var Tt=this._layoutContentAndController(e,l,ft,v,m,T,O,x);if(c){if("end"===f)Q[v]+=Tt[m]+G;else{var xt=F[m]+G;Q[v]-=xt,Tt[x]-=xt}Tt[m]+=F[m]+G,Q[1-v]+=Tt[O]+Tt[T]/2-F[T]/2,Tt[T]=Math.max(Tt[T],F[T]),Tt[O]=Math.min(Tt[O],F[O]+Q[1-v]),p.x=Q[0],p.y=Q[1],p.markRedraw()}return Tt},r.prototype._layoutContentAndController=function(e,i,s,l,c,f,p,v){var m=this.getContentGroup(),x=this._containerGroup,T=this._controllerGroup;sn.BZ(e.get("orient"),m,e.get("itemGap"),l?s.width:null,l?null:s.height),sn.BZ("horizontal",T,e.get("pageButtonItemGap",!0));var O=m.getBoundingRect(),G=T.getBoundingRect(),F=this._showController=O[c]>s[c],Q=[-O.x,-O.y];i||(Q[l]=m[v]);var ft=[0,0],Tt=[-G.x,-G.y],xt=_.retrieve2(e.get("pageButtonGap",!0),e.get("itemGap",!0));F&&("end"===e.get("pageButtonPosition",!0)?Tt[l]+=s[c]-G[c]:ft[l]+=G[c]+xt),Tt[1-l]+=O[f]/2-G[f]/2,m.setPosition(Q),x.setPosition(ft),T.setPosition(Tt);var It={x:0,y:0};if(It[c]=F?s[c]:O[c],It[f]=Math.max(O[f],G[f]),It[p]=Math.min(0,G[p]+Tt[1-l]),x.__rectSize=s[c],F){var Nt={x:0,y:0};Nt[c]=Math.max(s[c]-G[c]-xt,0),Nt[f]=It[f],x.setClipPath(new Br.Z({shape:Nt})),x.__rectSize=Nt[c]}else T.eachChild(function(Wt){Wt.attr({invisible:!0,silent:!0})});var Gt=this._getPageInfo(e);return null!=Gt.pageIndex&&he.D(m,{x:Gt.contentPosition[0],y:Gt.contentPosition[1]},F?e:null),this._updatePageInfoView(e,Gt),It},r.prototype._pageGo=function(e,i,s){var l=this._getPageInfo(i)[e];null!=l&&s.dispatchAction({type:"legendScroll",scrollDataIndex:l,legendId:i.id})},r.prototype._updatePageInfoView=function(e,i){var s=this._controllerGroup;_.each(["pagePrev","pageNext"],function(m){var T=null!=i[m+"DataIndex"],O=s.childOfName(m);O&&(O.setStyle("fill",e.get(T?"pageIconColor":"pageIconInactiveColor",!0)),O.cursor=T?"pointer":"default")});var l=s.childOfName("pageText"),c=e.get("pageFormatter"),f=i.pageIndex,p=null!=f?f+1:0,v=i.pageCount;l&&c&&l.setStyle("text",_.isString(c)?c.replace("{current}",null==p?"":p+"").replace("{total}",null==v?"":v+""):c({current:p,total:v}))},r.prototype._getPageInfo=function(e){var i=e.get("scrollDataIndex",!0),s=this.getContentGroup(),l=this._containerGroup.__rectSize,c=e.getOrient().index,f=_m[c],p=mm[c],v=this._findTargetItemIndex(i),m=s.children(),x=m[v],T=m.length,O=T?1:0,G={contentPosition:[s.x,s.y],pageCount:O,pageIndex:O-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!x)return G;var F=At(x);G.contentPosition[c]=-F.s;for(var Q=v+1,ft=F,Tt=F,xt=null;Q<=T;++Q)(!(xt=At(m[Q]))&&Tt.e>ft.s+l||xt&&!It(xt,ft.s))&&(ft=Tt.i>ft.i?Tt:xt)&&(null==G.pageNextDataIndex&&(G.pageNextDataIndex=ft.i),++G.pageCount),Tt=xt;for(Q=v-1,ft=F,Tt=F,xt=null;Q>=-1;--Q)(!(xt=At(m[Q]))||!It(Tt,xt.s))&&ft.i<Tt.i&&(Tt=ft,null==G.pagePrevDataIndex&&(G.pagePrevDataIndex=ft.i),++G.pageCount,++G.pageIndex),ft=xt;return G;function At(Nt){if(Nt){var Gt=Nt.getBoundingRect(),Wt=Gt[p]+Nt[p];return{s:Wt,e:Wt+Gt[f],i:Nt.__legendDataIndex}}}function It(Nt,Gt){return Nt.e>=Gt&&Nt.s<=Gt+l}},r.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild(function(c,f){var p=c.__legendDataIndex;null==l&&null!=p&&(l=f),p===e&&(i=f)}),i??l):0;var i,l},r.type="legend.scroll",r}(hx);function $P(o){(0,B.D)(fx),o.registerComponentModel(UP),o.registerComponentView(VP),function WP(o){o.registerAction("legendScroll","legendscroll",function(r,e){var i=r.scrollDataIndex;null!=i&&e.eachComponent({mainType:"legend",subType:"scroll",query:r},function(s){s.setScrollDataIndex(i)})})}(o)}const KP=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="dataZoom.inside",r.defaultOption=(0,Ii.ZL)(yp.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(yp);var ym=(0,dr.Yf)();function jP(o,r,e){ym(o).coordSysRecordMap.each(function(i){var s=i.dataZoomInfoMap.get(r.uid);s&&(s.getRange=e)})}function vx(o,r){if(r){o.removeKey(r.model.uid);var e=r.controller;e&&e.dispose()}}function qP(o,r){o.isDisposed()||o.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function tA(o,r,e,i){return o.coordinateSystem.containPoint([e,i])}var nA=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return(0,Re.ZT)(r,o),r.prototype.render=function(e,i,s){o.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),jP(s,e,{pan:(0,_.bind)(xm.pan,this),zoom:(0,_.bind)(xm.zoom,this),scrollMove:(0,_.bind)(xm.scrollMove,this)}))},r.prototype.dispose=function(){this._clear(),o.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){(function JP(o,r){for(var e=ym(o).coordSysRecordMap,i=e.keys(),s=0;s<i.length;s++){var c=e.get(i[s]),f=c.dataZoomInfoMap;if(f){var p=r.uid;f.get(p)&&(f.removeKey(p),f.keys().length||vx(e,c))}}})(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}($0),xm={zoom:function(o,r,e,i){var s=this.range,l=s.slice(),c=o.axisModels[0];if(c){var f=Sm[r](null,[i.originX,i.originY],c,e,o),p=(f.signal>0?f.pixelStart+f.pixelLength-f.pixel:f.pixel-f.pixelStart)/f.pixelLength*(l[1]-l[0])+l[0],v=Math.max(1/i.scale,0);l[0]=(l[0]-p)*v+p,l[1]=(l[1]-p)*v+p;var m=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Gl(0,l,[0,100],0,m.minSpan,m.maxSpan),this.range=l,s[0]!==l[0]||s[1]!==l[1])return l}},pan:gx(function(o,r,e,i,s,l){var c=Sm[i]([l.oldX,l.oldY],[l.newX,l.newY],r,s,e);return c.signal*(o[1]-o[0])*c.pixel/c.pixelLength}),scrollMove:gx(function(o,r,e,i,s,l){return Sm[i]([0,0],[l.scrollDelta,l.scrollDelta],r,s,e).signal*(o[1]-o[0])*l.scrollDelta})};function gx(o){return function(r,e,i,s){var l=this.range,c=l.slice(),f=r.axisModels[0];if(f&&(Gl(o(c,f,r,e,i,s),c,[0,100],"all"),this.range=c,l[0]!==c[0]||l[1]!==c[1]))return c}}var Sm={grid:function(o,r,e,i,s){var l=e.axis,c={},f=s.model.coordinateSystem.getRect();return o=o||[0,0],"x"===l.dim?(c.pixel=r[0]-o[0],c.pixelLength=f.width,c.pixelStart=f.x,c.signal=l.inverse?1:-1):(c.pixel=r[1]-o[1],c.pixelLength=f.height,c.pixelStart=f.y,c.signal=l.inverse?-1:1),c},polar:function(o,r,e,i,s){var l=e.axis,c={},f=s.model.coordinateSystem,p=f.getRadiusAxis().getExtent(),v=f.getAngleAxis().getExtent();return o=o?f.pointToCoord(o):[0,0],r=f.pointToCoord(r),"radiusAxis"===e.mainType?(c.pixel=r[0]-o[0],c.pixelLength=p[1]-p[0],c.pixelStart=p[0],c.signal=l.inverse?1:-1):(c.pixel=r[1]-o[1],c.pixelLength=v[1]-v[0],c.pixelStart=v[0],c.signal=l.inverse?-1:1),c},singleAxis:function(o,r,e,i,s){var l=e.axis,c=s.model.coordinateSystem.getRect(),f={};return o=o||[0,0],"horizontal"===l.orient?(f.pixel=r[0]-o[0],f.pixelLength=c.width,f.pixelStart=c.x,f.signal=l.inverse?1:-1):(f.pixel=r[1]-o[1],f.pixelLength=c.height,f.pixelStart=c.y,f.signal=l.inverse?-1:1),f}};const iA=nA;function _x(o){X0(o),o.registerComponentModel(KP),o.registerComponentView(iA),function rA(o){o.registerProcessor(o.PRIORITY.PROCESSOR.FILTER,function(r,e){var i=ym(e),s=i.coordSysRecordMap||(i.coordSysRecordMap=(0,_.createHashMap)());s.each(function(l){l.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(l){var c=hy(l);(0,_.each)(c.infoList,function(f){var p=f.model.uid,v=s.get(p)||s.set(p,function QP(o,r){var e={model:r,containsPoint:(0,_.curry)(tA,r),dispatchAction:(0,_.curry)(qP,o),dataZoomInfoMap:null,controller:null},i=e.controller=new Go(o.getZr());return(0,_.each)(["pan","zoom","scrollMove"],function(s){i.on(s,function(l){var c=[];e.dataZoomInfoMap.each(function(f){if(l.isAvailableBehavior(f.model.option)){var p=(f.getRange||{})[s],v=p&&p(f.dzReferCoordSysInfo,e.model.mainType,e.controller,l);!f.model.get("disabled",!0)&&v&&c.push({dataZoomId:f.model.id,start:v[0],end:v[1]})}}),c.length&&e.dispatchAction(c)})}),e}(e,f.model));(v.dataZoomInfoMap||(v.dataZoomInfoMap=(0,_.createHashMap)())).set(l.uid,{dzReferCoordSysInfo:f,model:l,getRange:null})})}),s.each(function(l){var f,c=l.controller,p=l.dataZoomInfoMap;if(p){var v=p.keys()[0];null!=v&&(f=p.get(v))}if(f){var m=function eA(o){var r,e="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},s=!0;return o.each(function(l){var c=l.model,f=!c.get("disabled",!0)&&(!c.get("zoomLock",!0)||"move");i[e+f]>i[e+r]&&(r=f),s=s&&c.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!s}}}(p);c.enable(m.controlType,m.opt),c.setPointerChecker(l.containsPoint),Si.T9(l,"dispatchAction",f.model.get("throttle",!0),"fixRate")}else vx(s,l)})})}(o)}const oA=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=(0,Ii.ZL)(yp.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),r}(yp);var Pp=Br.Z,Ap="horizontal",yx="vertical",cA=["line","bar","candlestick","scatter"],hA={easing:"cubicOut",duration:100,delay:0};function xx(o){return"vertical"===o?"ns-resize":"ew-resize"}const pA=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e._displayables={},e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i){this.api=i,this._onBrush=(0,_.bind)(this._onBrush,this),this._onBrushEnd=(0,_.bind)(this._onBrushEnd,this)},r.prototype.render=function(e,i,s,l){if(o.prototype.render.apply(this,arguments),Si.T9(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show"))return e.noTarget()?(this._clear(),void this.group.removeAll()):((!l||"dataZoom"!==l.type||l.from!==this.uid)&&this._buildView(),void this._updateView());this.group.removeAll()},r.prototype.dispose=function(){this._clear(),o.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Si.ZH(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var i=this._displayables.sliderGroup=new pr.Z;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(i),this._positionGroup()},r.prototype._resetLocation=function(){var e=this.dataZoomModel,i=this.api,l=e.get("brushSelect")?7:0,c=this._findCoordRect(),f={width:i.getWidth(),height:i.getHeight()},p=this._orient===Ap?{right:f.width-c.x-c.width,top:f.height-30-7-l,width:c.width,height:30}:{right:7,top:c.y,width:30,height:c.height},v=sn.tE(e.option);(0,_.each)(["right","top","width","height"],function(x){"ph"===v[x]&&(v[x]=p[x])});var m=sn.ME(v,f);this._location={x:m.x,y:m.y},this._size=[m.width,m.height],this._orient===yx&&this._size.reverse()},r.prototype._positionGroup=function(){var e=this.group,i=this._location,s=this._orient,l=this.dataZoomModel.getFirstTargetAxisModel(),c=l&&l.get("inverse"),f=this._displayables.sliderGroup,p=(this._dataShadowInfo||{}).otherAxisInverse;f.attr(s!==Ap||c?s===Ap&&c?{scaleY:p?1:-1,scaleX:-1}:s!==yx||c?{scaleY:p?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:p?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:p?1:-1,scaleX:1});var v=e.getBoundingRect([f]);e.x=i.x-v.x,e.y=i.y-v.y,e.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var e=this.dataZoomModel,i=this._size,s=this._displayables.sliderGroup,l=e.get("brushSelect");s.add(new Pp({silent:!0,shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var c=new Pp({shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:"transparent"},z2:0,onclick:(0,_.bind)(this._onClickPanel,this)}),f=this.api.getZr();l?(c.on("mousedown",this._onBrushStart,this),c.cursor="crosshair",f.on("mousemove",this._onBrush),f.on("mouseup",this._onBrushEnd)):(f.off("mousemove",this._onBrush),f.off("mouseup",this._onBrushEnd)),s.add(c)},r.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var i=this._size,s=this._shadowSize||[],l=e.series,c=l.getRawData(),f=l.getShadowDim&&l.getShadowDim(),p=f&&c.getDimensionInfo(f)?l.getShadowDim():e.otherDim;if(null!=p){var v=this._shadowPolygonPts,m=this._shadowPolylinePts;if(c!==this._shadowData||p!==this._shadowDim||i[0]!==s[0]||i[1]!==s[1]){var x=c.getDataExtent(p),T=.3*(x[1]-x[0]);x=[x[0]-T,x[1]+T];var At,O=[0,i[1]],F=[[i[0],0],[0,0]],Q=[],ft=i[0]/(c.count()-1),Tt=0,xt=Math.round(c.count()/i[0]);c.each([p],function(jt,ee){if(xt>0&&ee%xt)Tt+=ft;else{var oe=null==jt||isNaN(jt)||""===jt,de=oe?0:(0,Be.NU)(jt,x,O,!0);oe&&!At&&ee?(F.push([F[F.length-1][0],0]),Q.push([Q[Q.length-1][0],0])):!oe&&At&&(F.push([Tt,0]),Q.push([Tt,0])),F.push([Tt,de]),Q.push([Tt,de]),Tt+=ft,At=oe}}),v=this._shadowPolygonPts=F,m=this._shadowPolylinePts=Q}this._shadowData=c,this._shadowDim=p,this._shadowSize=[i[0],i[1]];for(var ee,oe,de,xe,It=this.dataZoomModel,Gt=0;Gt<3;Gt++){var Wt=(ee=void 0,oe=void 0,void 0,void 0,ee=It.getModel(1===Gt?"selectedDataBackground":"dataBackground"),oe=new pr.Z,de=new Jn.Z({shape:{points:v},segmentIgnoreThreshold:1,style:ee.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),xe=new ia.Z({shape:{points:m},segmentIgnoreThreshold:1,style:ee.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),oe.add(de),oe.add(xe),oe);this._displayables.sliderGroup.add(Wt),this._displayables.dataShadowSegs.push(Wt)}}}},r.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,i=e.get("showDataShadow");if(!1!==i){var s,l=this.ecModel;return e.eachTargetAxis(function(c,f){var p=e.getAxisProxy(c,f).getTargetSeriesModels();(0,_.each)(p,function(v){if(!(s||!0!==i&&(0,_.indexOf)(cA,v.get("type"))<0)){var T,m=l.getComponent(Lu(c),f).axis,x=function dA(o){return{x:"y",y:"x",radius:"angle",angle:"radius"}[o]}(c),O=v.coordinateSystem;null!=x&&O.getOtherAxis&&(T=O.getOtherAxis(m).inverse),x=v.getData().mapDimension(x),s={thisAxis:m,series:v,thisDim:c,otherDim:x,otherAxisInverse:T}}},this)},this),s}},r.prototype._renderHandle=function(){var e=this.group,i=this._displayables,s=i.handles=[null,null],l=i.handleLabels=[null,null],c=this._displayables.sliderGroup,f=this._size,p=this.dataZoomModel,v=this.api,m=p.get("borderRadius")||0,x=p.get("brushSelect"),T=i.filler=new Pp({silent:x,style:{fill:p.get("fillerColor")},textConfig:{position:"inside"}});c.add(T),c.add(new Pp({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:f[0],height:f[1],r:m},style:{stroke:p.get("dataBackgroundColor")||p.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),(0,_.each)([0,1],function(xt){var At=p.get("handleIcon");!Tn.Pw[At]&&At.indexOf("path://")<0&&At.indexOf("image://")<0&&(At="path://"+At);var It=(0,Tn.th)(At,-1,0,2,2,null,!0);It.attr({cursor:xx(this._orient),draggable:!0,drift:(0,_.bind)(this._onDragMove,this,xt),ondragend:(0,_.bind)(this._onDragEnd,this),onmouseover:(0,_.bind)(this._showDataInfo,this,!0),onmouseout:(0,_.bind)(this._showDataInfo,this,!1),z2:5});var Nt=It.getBoundingRect(),Gt=p.get("handleSize");this._handleHeight=(0,Be.GM)(Gt,this._size[1]),this._handleWidth=Nt.width/Nt.height*this._handleHeight,It.setStyle(p.getModel("handleStyle").getItemStyle()),It.style.strokeNoScale=!0,It.rectHover=!0,It.ensureState("emphasis").style=p.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,sr.vF)(It);var Wt=p.get("handleColor");null!=Wt&&(It.style.fill=Wt),c.add(s[xt]=It);var jt=p.getModel("textStyle");e.add(l[xt]=new Se.ZP({silent:!0,invisible:!0,style:(0,Or.Lr)(jt,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:jt.getTextColor(),font:jt.getFont()}),z2:10}))},this);var O=T;if(x){var G=(0,Be.GM)(p.get("moveHandleSize"),f[1]),F=i.moveHandle=new Br.Z({style:p.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:f[1]-.5,height:G}}),Q=.8*G,ft=i.moveHandleIcon=(0,Tn.th)(p.get("moveHandleIcon"),-Q/2,-Q/2,Q,Q,"#fff",!0);ft.silent=!0,ft.y=f[1]+G/2-.5,F.ensureState("emphasis").style=p.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var Tt=Math.min(f[1]/2,Math.max(G,10));(O=i.moveZone=new Br.Z({invisible:!0,shape:{y:f[1]-Tt,height:G+Tt}})).on("mouseover",function(){v.enterEmphasis(F)}).on("mouseout",function(){v.leaveEmphasis(F)}),c.add(F),c.add(ft),c.add(O)}O.attr({draggable:!0,cursor:xx(this._orient),drift:(0,_.bind)(this._onDragMove,this,"all"),ondragstart:(0,_.bind)(this._showDataInfo,this,!0),ondragend:(0,_.bind)(this._onDragEnd,this),onmouseover:(0,_.bind)(this._showDataInfo,this,!0),onmouseout:(0,_.bind)(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),i=this._getViewExtent();this._handleEnds=[(0,Be.NU)(e[0],[0,100],i,!0),(0,Be.NU)(e[1],[0,100],i,!0)]},r.prototype._updateInterval=function(e,i){var s=this.dataZoomModel,l=this._handleEnds,c=this._getViewExtent(),f=s.findRepresentativeAxisProxy().getMinMaxSpan(),p=[0,100];Gl(i,l,c,s.get("zoomLock")?"all":e,null!=f.minSpan?(0,Be.NU)(f.minSpan,p,c,!0):null,null!=f.maxSpan?(0,Be.NU)(f.maxSpan,p,c,!0):null);var v=this._range,m=this._range=(0,Be.dt)([(0,Be.NU)(l[0],c,p,!0),(0,Be.NU)(l[1],c,p,!0)]);return!v||v[0]!==m[0]||v[1]!==m[1]},r.prototype._updateView=function(e){var i=this._displayables,s=this._handleEnds,l=(0,Be.dt)(s.slice()),c=this._size;(0,_.each)([0,1],function(O){var F=this._handleHeight;i.handles[O].attr({scaleX:F/2,scaleY:F/2,x:s[O]+(O?-1:1),y:c[1]/2-F/2})},this),i.filler.setShape({x:l[0],y:0,width:l[1]-l[0],height:c[1]});var f={x:l[0],width:l[1]-l[0]};i.moveHandle&&(i.moveHandle.setShape(f),i.moveZone.setShape(f),i.moveZone.getBoundingRect(),i.moveHandleIcon&&i.moveHandleIcon.attr("x",f.x+f.width/2));for(var p=i.dataShadowSegs,v=[0,l[0],l[1],c[0]],m=0;m<p.length;m++){var x=p[m],T=x.getClipPath();T||(T=new Br.Z,x.setClipPath(T)),T.setShape({x:v[m],y:0,width:v[m+1]-v[m],height:c[1]})}this._updateDataInfo(e)},r.prototype._updateDataInfo=function(e){var i=this.dataZoomModel,s=this._displayables,l=s.handleLabels,c=this._orient,f=["",""];if(i.get("showDetail")){var p=i.findRepresentativeAxisProxy();if(p){var v=p.getAxisModel().axis,m=this._range,x=e?p.calculateDataWindow({start:m[0],end:m[1]}).valueWindow:p.getDataValueWindow();f=[this._formatLabel(x[0],v),this._formatLabel(x[1],v)]}}var T=(0,Be.dt)(this._handleEnds.slice());function O(G){var F=ur.getTransform(s.handles[G].parent,this.group),Q=ur.transformDirection(0===G?"right":"left",F),ft=this._handleWidth/2+5,Tt=ur.applyTransform([T[G]+(0===G?-ft:ft),this._size[1]/2],F);l[G].setStyle({x:Tt[0],y:Tt[1],verticalAlign:c===Ap?"middle":Q,align:c===Ap?Q:"center",text:f[G]})}O.call(this,0),O.call(this,1)},r.prototype._formatLabel=function(e,i){var s=this.dataZoomModel,l=s.get("labelFormatter"),c=s.get("labelPrecision");(null==c||"auto"===c)&&(c=i.getPixelPrecision());var f=null==e||isNaN(e)?"":"category"===i.type||"time"===i.type?i.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(c,20));return(0,_.isFunction)(l)?l(e,f):(0,_.isString)(l)?l.replace("{value}",f):f},r.prototype._showDataInfo=function(e){var i=this._displayables,s=i.handleLabels;s[0].attr("invisible",!(e=this._dragging||e)),s[1].attr("invisible",!e),i.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](i.moveHandle,1)},r.prototype._onDragMove=function(e,i,s,l){this._dragging=!0,Ca.sT(l.event);var c=this._displayables.sliderGroup.getLocalTransform(),f=ur.applyTransform([i,s],c,!0),p=this._updateInterval(e,f[0]),v=this.dataZoomModel.get("realtime");this._updateView(!v),p&&v&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(e){var i=this._size,s=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(s[0]<0||s[0]>i[0]||s[1]<0||s[1]>i[1])){var l=this._handleEnds,f=this._updateInterval("all",s[0]-(l[0]+l[1])/2);this._updateView(),f&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(e){this._brushStart=new Zt.Z(e.offsetX,e.offsetY),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(e){if(this._brushing){var i=this._displayables.brushRect;if(this._brushing=!1,i){i.attr("ignore",!0);var s=i.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(s.width)<5)){var c=this._getViewExtent(),f=[0,100];this._range=(0,Be.dt)([(0,Be.NU)(s.x,c,f,!0),(0,Be.NU)(s.x+s.width,c,f,!0)]),this._handleEnds=[s.x,s.x+s.width],this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(e){this._brushing&&(Ca.sT(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},r.prototype._updateBrushRect=function(e,i){var s=this._displayables,c=s.brushRect;c||(c=s.brushRect=new Pp({silent:!0,style:this.dataZoomModel.getModel("brushStyle").getItemStyle()}),s.sliderGroup.add(c)),c.attr("ignore",!1);var f=this._brushStart,p=this._displayables.sliderGroup,v=p.transformCoordToLocal(e,i),m=p.transformCoordToLocal(f.x,f.y),x=this._size;v[0]=Math.max(Math.min(x[0],v[0]),0),c.setShape({x:m[0],y:0,width:v[0]-m[0],height:x[1]})},r.prototype._dispatchZoomAction=function(e){var i=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?hA:null,start:i[0],end:i[1]})},r.prototype._findCoordRect=function(){var e,i=hy(this.dataZoomModel).infoList;if(!e&&i.length){var s=i[0].model.coordinateSystem;e=s.getRect&&s.getRect()}if(!e){var l=this.api.getWidth(),c=this.api.getHeight();e={x:.2*l,y:.2*c,width:.6*l,height:.6*c}}return e},r.type="dataZoom.slider",r}($0);function Sx(o){o.registerComponentModel(oA),o.registerComponentView(pA),X0(o)}var gA={get:function(o,r,e){var i=_.clone((_A[o]||{})[r]);return e&&_.isArray(i)?i[i.length-1]:i}},_A={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const Tx=gA;var Cx=Gi.mapVisual,mA=Gi.eachVisual,yA=_.isArray,Mx=_.each,xA=Be.dt,SA=Be.NU;const lg=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i,s){this.mergeDefaultAndTheme(e,s)},r.prototype.optionUpdated=function(e,i){!i&&zy(this.option,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(e){var i=this.stateList;e=_.bind(e,this),this.controllerVisuals=rm(this.option.controller,i,e),this.targetVisuals=rm(this.option.target,i,e)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,i=[];return null==e||"all"===e?this.ecModel.eachSeries(function(s,l){i.push(l)}):i=dr.kF(e),i},r.prototype.eachTargetSeries=function(e,i){_.each(this.getTargetSeriesIndices(),function(s){var l=this.ecModel.getSeriesByIndex(s);l&&e.call(i,l)},this)},r.prototype.isTargetSeries=function(e){var i=!1;return this.eachTargetSeries(function(s){s===e&&(i=!0)}),i},r.prototype.formatValueText=function(e,i,s){var v,l=this.option,c=l.precision,f=this.dataBound,p=l.formatter;s=s||["<",">"],_.isArray(e)&&(e=e.slice(),v=!0);var m=i?e:v?[x(e[0]),x(e[1])]:x(e);return _.isString(p)?p.replace("{value}",v?m[0]:m).replace("{value2}",v?m[1]:m):_.isFunction(p)?v?p(e[0],e[1]):p(e):v?e[0]===f[0]?s[0]+" "+m[1]:e[1]===f[1]?s[1]+" "+m[0]:m[0]+" - "+m[1]:m;function x(T){return T===f[0]?"min":T===f[1]?"max":(+T).toFixed(Math.min(c,20))}},r.prototype.resetExtent=function(){var e=this.option,i=xA([e.min,e.max]);this._dataExtent=i},r.prototype.getDataDimensionIndex=function(e){var i=this.option.dimension;if(null!=i)return e.getDimensionIndex(i);for(var s=e.dimensions,l=s.length-1;l>=0;l--){var f=e.getDimensionInfo(s[l]);if(!f.isCalculationCoord)return f.storeDimIndex}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var e=this.ecModel,i=this.option,s={inRange:i.inRange,outOfRange:i.outOfRange},l=i.target||(i.target={}),c=i.controller||(i.controller={});_.merge(l,s),_.merge(c,s);var f=this.isCategory();function p(x){yA(i.color)&&!x.inRange&&(x.inRange={color:i.color.slice().reverse()}),x.inRange=x.inRange||{color:e.get("gradientColor")}}p.call(this,l),p.call(this,c),function v(x,T,O){var G=x[T],F=x[O];G&&!F&&(F=x[O]={},Mx(G,function(Q,ft){if(Gi.isValidType(ft)){var Tt=Tx.get(ft,"inactive",f);null!=Tt&&(F[ft]=Tt,"color"===ft&&!F.hasOwnProperty("opacity")&&!F.hasOwnProperty("colorAlpha")&&(F.opacity=[0,0]))}}))}.call(this,l,"inRange","outOfRange"),function m(x){var T=(x.inRange||{}).symbol||(x.outOfRange||{}).symbol,O=(x.inRange||{}).symbolSize||(x.outOfRange||{}).symbolSize,G=this.get("inactiveColor"),Q=this.getItemSymbol()||"roundRect";Mx(this.stateList,function(ft){var Tt=this.itemSize,xt=x[ft];xt||(xt=x[ft]={color:f?G:[G]}),null==xt.symbol&&(xt.symbol=T&&_.clone(T)||(f?Q:[Q])),null==xt.symbolSize&&(xt.symbolSize=O&&_.clone(O)||(f?Tt[0]:[Tt[0],Tt[0]])),xt.symbol=Cx(xt.symbol,function(Nt){return"none"===Nt?Q:Nt});var At=xt.symbolSize;if(null!=At){var It=-1/0;mA(At,function(Nt){Nt>It&&(It=Nt)}),xt.symbolSize=Cx(At,function(Nt){return SA(Nt,[0,It],[0,Tt[0]],!0)})}},this)}.call(this,c)},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(e){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(e){return null},r.prototype.getVisualMeta=function(e){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},r}(Pi.Z);var bx=[20,140];function Px(o,r,e){if(e[0]===e[1])return e.slice();for(var s=(e[1]-e[0])/200,l=e[0],c=[],f=0;f<=200&&l<e[1];f++)c.push(l),l+=s;return c.push(e[1]),c}const MA=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.optionUpdated=function(e,i){o.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(s){s.mappingMethod="linear",s.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){o.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=bx[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=bx[1])},r.prototype._resetRange=function(){var e=this.getExtent(),i=this.option.range;!i||i.auto?(e.auto=1,this.option.range=e):_.isArray(i)&&(i[0]>i[1]&&i.reverse(),i[0]=Math.max(i[0],e[0]),i[1]=Math.min(i[1],e[1]))},r.prototype.completeVisualOption=function(){o.prototype.completeVisualOption.apply(this,arguments),_.each(this.stateList,function(e){var i=this.option.controller[e].symbolSize;i&&i[0]!==i[1]&&(i[0]=i[1]/3)},this)},r.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},r.prototype.getSelected=function(){var e=this.getExtent(),i=Be.dt((this.get("range")||[]).slice());return i[0]>e[1]&&(i[0]=e[1]),i[1]>e[1]&&(i[1]=e[1]),i[0]<e[0]&&(i[0]=e[0]),i[1]<e[0]&&(i[1]=e[0]),i},r.prototype.getValueState=function(e){var i=this.option.range,s=this.getExtent();return(i[0]<=s[0]||i[0]<=e)&&(i[1]>=s[1]||e<=i[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var i=[];return this.eachTargetSeries(function(s){var l=[],c=s.getData();c.each(this.getDataDimensionIndex(c),function(f,p){e[0]<=f&&f<=e[1]&&l.push(p)},this),i.push({seriesId:s.id,dataIndex:l})},this),i},r.prototype.getVisualMeta=function(e){var i=Px(0,0,this.getExtent()),s=Px(0,0,this.option.range.slice()),l=[];function c(O,G){l.push({value:O,color:e(O,G)})}for(var f=0,p=0,v=s.length,m=i.length;p<m&&(!s.length||i[p]<=s[0]);p++)i[p]<s[f]&&c(i[p],"outOfRange");for(var x=1;f<v;f++,x=0)x&&l.length&&c(s[f],"outOfRange"),c(s[f],"inRange");for(x=1;p<m;p++)(!s.length||s[s.length-1]<i[p])&&(x&&(l.length&&c(l[l.length-1].value,"outOfRange"),x=0),c(i[p],"outOfRange"));var T=l.length;return{stops:l,outerColors:[T?l[0].color:"transparent",T?l[T-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=(0,Ii.ZL)(lg.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),r}(lg),Ax=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return(0,Re.ZT)(r,o),r.prototype.init=function(e,i){this.ecModel=e,this.api=i},r.prototype.render=function(e,i,s,l){this.visualMapModel=e,!1!==e.get("show")?this.doRender(e,i,s,l):this.group.removeAll()},r.prototype.renderBackground=function(e){var i=this.visualMapModel,s=Mn.MY(i.get("padding")||0),l=e.getBoundingRect();e.add(new Br.Z({z2:-1,silent:!0,shape:{x:l.x-s[3],y:l.y-s[0],width:l.width+s[3]+s[1],height:l.height+s[0]+s[2]},style:{fill:i.get("backgroundColor"),stroke:i.get("borderColor"),lineWidth:i.get("borderWidth")}}))},r.prototype.getControllerVisual=function(e,i,s){var l=(s=s||{}).forceState,c=this.visualMapModel,f={};if("color"===i){var p=c.get("contentColor");f.color=p}function v(O){return f[O]}function m(O,G){f[O]=G}var x=c.controllerVisuals[l||c.getValueState(e)],T=Gi.prepareVisualTypes(x);return _.each(T,function(O){var G=x[O];s.convertOpacityToAlpha&&"opacity"===O&&(O="colorAlpha",G=x.__alphaForOpacity),Gi.dependsOn(O,i)&&G&&G.applyVisual(e,v,m)}),f[i]},r.prototype.positionGroup=function(e){var s=this.api;sn.p$(e,this.visualMapModel.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})},r.prototype.doRender=function(e,i,s,l){},r.type="visualMap",r}(Ti.Z);var Ox=[["left","right","width"],["top","bottom","height"]];function Ex(o,r,e){var i=o.option,s=i.align;if(null!=s&&"auto"!==s)return s;for(var l={width:r.getWidth(),height:r.getHeight()},c="horizontal"===i.orient?1:0,f=Ox[c],p=[0,null,10],v={},m=0;m<3;m++)v[Ox[1-c][m]]=p[m],v[f[m]]=2===m?e[0]:i[f[m]];var x=[["x","width",3],["y","height",0]][c],T=(0,sn.ME)(v,l,i.padding);return f[(T.margin[x[2]]||0)+T[x[0]]+.5*T[x[1]]<.5*l[x[1]]?0:1]}function ug(o,r){return _.each(o||[],function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(r?r.componentIndex:"")}),o}var el=Be.NU,PA=_.each,Dx=Math.min,Cm=Math.max;function Lx(o,r,e,i){return new Jn.Z({shape:{points:o},draggable:!!e,cursor:r,drift:e,onmousemove:function(s){Ca.sT(s.event)},ondragend:i})}function Nx(o){return!!(o.get("hoverLinkOnHandle")??o.get("realtime"))}function Ix(o){return"vertical"===o?"ns-resize":"ew-resize"}const DA=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return(0,Re.ZT)(r,o),r.prototype.doRender=function(e,i,s,l){this._api=s,(!l||"selectDataRange"!==l.type||l.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,i=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(i);var s=e.get("text");this._renderEndsText(i,s,0),this._renderEndsText(i,s,1),this._updateView(!0),this.renderBackground(i),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(i)},r.prototype._renderEndsText=function(e,i,s){if(i){var l=i[1-s];l=null!=l?l+"":"";var c=this.visualMapModel,f=c.get("textGap"),p=c.itemSize,v=this._shapes.mainGroup,m=this._applyTransform([p[0]/2,0===s?-f:p[1]+f],v),x=this._applyTransform(0===s?"bottom":"top",v),T=this._orient;this.group.add(new Se.ZP({style:(0,Or.Lr)(this.visualMapModel.textStyleModel,{x:m[0],y:m[1],verticalAlign:"horizontal"===T?"middle":x,align:"horizontal"===T?x:"center",text:l})}))}},r.prototype._renderBar=function(e){var i=this.visualMapModel,s=this._shapes,l=i.itemSize,c=this._orient,f=this._useHandle,p=Ex(i,this.api,l),v=s.mainGroup=this._createBarGroup(p),m=new pr.Z;v.add(m),m.add(s.outOfRange=Lx()),m.add(s.inRange=Lx(null,f?Ix(this._orient):null,_.bind(this._dragHandle,this,"all",!1),_.bind(this._dragHandle,this,"all",!0))),m.setClipPath(new Br.Z({shape:{x:0,y:0,width:l[0],height:l[1],r:3}}));var x=i.textStyleModel.getTextRect("\u56fd"),T=Cm(x.width,x.height);f&&(s.handleThumbs=[],s.handleLabels=[],s.handleLabelPoints=[],this._createHandle(i,v,0,l,T,c),this._createHandle(i,v,1,l,T,c)),this._createIndicator(i,v,l,T,c),e.add(v)},r.prototype._createHandle=function(e,i,s,l,c,f){var p=_.bind(this._dragHandle,this,s,!1),v=_.bind(this._dragHandle,this,s,!0),m=(0,yt.GM)(e.get("handleSize"),l[0]),x=(0,Tn.th)(e.get("handleIcon"),-m/2,-m/2,m,m,null,!0),T=Ix(this._orient);x.attr({cursor:T,draggable:!0,drift:p,ondragend:v,onmousemove:function(ft){Ca.sT(ft.event)}}),x.x=l[0]/2,x.useStyle(e.getModel("handleStyle").getItemStyle()),x.setStyle({strokeNoScale:!0,strokeFirst:!0}),x.style.lineWidth*=2,x.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,sr.Nj)(x,!0),i.add(x);var G=new Se.ZP({cursor:T,draggable:!0,drift:p,onmousemove:function(ft){Ca.sT(ft.event)},ondragend:v,style:(0,Or.Lr)(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});G.ensureState("blur").style={opacity:.1},G.stateTransition={duration:200},this.group.add(G);var F=[m,0],Q=this._shapes;Q.handleThumbs[s]=x,Q.handleLabelPoints[s]=F,Q.handleLabels[s]=G},r.prototype._createIndicator=function(e,i,s,l,c){var f=(0,yt.GM)(e.get("indicatorSize"),s[0]),p=(0,Tn.th)(e.get("indicatorIcon"),-f/2,-f/2,f,f,null,!0);p.attr({cursor:"move",invisible:!0,silent:!0,x:s[0]/2});var v=e.getModel("indicatorStyle").getItemStyle();if(p instanceof gt.ZP){var m=p.style;p.useStyle(_.extend({image:m.image,x:m.x,y:m.y,width:m.width,height:m.height},v))}else p.useStyle(v);i.add(p);var T=new Se.ZP({silent:!0,invisible:!0,style:(0,Or.Lr)(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});this.group.add(T);var O=[("horizontal"===c?l/2:6)+s[0]/2,0],G=this._shapes;G.indicator=p,G.indicatorLabel=T,G.indicatorLabelPoint=O,this._firstShowIndicator=!0},r.prototype._dragHandle=function(e,i,s,l){if(this._useHandle){if(this._dragging=!i,!i){var c=this._applyTransform([s,l],this._shapes.mainGroup,!0);this._updateInterval(e,c[1]),this._hideIndicator(),this._updateView()}i===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),i?!this._hovering&&this._clearHoverLinkToSeries():Nx(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},r.prototype._resetInterval=function(){var e=this.visualMapModel,i=this._dataInterval=e.getSelected(),s=e.getExtent(),l=[0,e.itemSize[1]];this._handleEnds=[el(i[0],s,l,!0),el(i[1],s,l,!0)]},r.prototype._updateInterval=function(e,i){var s=this.visualMapModel,l=this._handleEnds,c=[0,s.itemSize[1]];Gl(i=i||0,l,c,e,0);var f=s.getExtent();this._dataInterval=[el(l[0],c,f,!0),el(l[1],c,f,!0)]},r.prototype._updateView=function(e){var i=this.visualMapModel,s=i.getExtent(),l=this._shapes,c=[0,i.itemSize[1]],f=e?c:this._handleEnds,p=this._createBarVisual(this._dataInterval,s,f,"inRange"),v=this._createBarVisual(s,s,c,"outOfRange");l.inRange.setStyle({fill:p.barColor}).setShape("points",p.barPoints),l.outOfRange.setStyle({fill:v.barColor}).setShape("points",v.barPoints),this._updateHandle(f,p)},r.prototype._createBarVisual=function(e,i,s,l){var c={forceState:l,convertOpacityToAlpha:!0},f=this._makeColorGradient(e,c),p=[this.getControllerVisual(e[0],"symbolSize",c),this.getControllerVisual(e[1],"symbolSize",c)],v=this._createBarPoints(s,p);return{barColor:new xi.Z(0,0,0,1,f),barPoints:v,handlesColor:[f[0].color,f[f.length-1].color]}},r.prototype._makeColorGradient=function(e,i){var l=[],c=(e[1]-e[0])/100;l.push({color:this.getControllerVisual(e[0],"color",i),offset:0});for(var f=1;f<100;f++){var p=e[0]+c*f;if(p>e[1])break;l.push({color:this.getControllerVisual(p,"color",i),offset:f/100})}return l.push({color:this.getControllerVisual(e[1],"color",i),offset:1}),l},r.prototype._createBarPoints=function(e,i){var s=this.visualMapModel.itemSize;return[[s[0]-i[0],e[0]],[s[0],e[0]],[s[0],e[1]],[s[0]-i[1],e[1]]]},r.prototype._createBarGroup=function(e){var i=this._orient,s=this.visualMapModel.get("inverse");return new pr.Z("horizontal"!==i||s?"horizontal"===i&&s?{scaleX:"bottom"===e?-1:1,rotation:-Math.PI/2}:"vertical"!==i||s?{scaleX:"left"===e?1:-1}:{scaleX:"left"===e?1:-1,scaleY:-1}:{scaleX:"bottom"===e?1:-1,rotation:Math.PI/2})},r.prototype._updateHandle=function(e,i){if(this._useHandle){var s=this._shapes,l=this.visualMapModel,c=s.handleThumbs,f=s.handleLabels,p=l.itemSize,v=l.getExtent();PA([0,1],function(m){var x=c[m];x.setStyle("fill",i.handlesColor[m]),x.y=e[m];var T=el(e[m],[0,p[1]],v,!0),O=this.getControllerVisual(T,"symbolSize");x.scaleX=x.scaleY=O/p[0],x.x=p[0]-O/2;var G=ur.applyTransform(s.handleLabelPoints[m],ur.getTransform(x,this.group));f[m].setStyle({x:G[0],y:G[1],text:l.formatValueText(this._dataInterval[m]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",s.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(e,i,s,l){var c=this.visualMapModel,f=c.getExtent(),p=c.itemSize,v=[0,p[1]],m=this._shapes,x=m.indicator;if(x){x.attr("invisible",!1);var O=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0}),G=this.getControllerVisual(e,"symbolSize"),F=el(e,f,v,!0),Q=p[0]-G/2,ft={x:x.x,y:x.y};x.y=F,x.x=Q;var Tt=ur.applyTransform(m.indicatorLabelPoint,ur.getTransform(x,this.group)),xt=m.indicatorLabel;xt.attr("invisible",!1);var At=this._applyTransform("left",m.mainGroup),Nt="horizontal"===this._orient;xt.setStyle({text:(s||"")+c.formatValueText(i),verticalAlign:Nt?At:"middle",align:Nt?"center":At});var Gt={x:Q,y:F,style:{fill:O}},Wt={style:{x:Tt[0],y:Tt[1]}};if(c.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var jt={duration:100,easing:"cubicInOut",additive:!0};x.x=ft.x,x.y=ft.y,x.animateTo(Gt,jt),xt.animateTo(Wt,jt)}else x.attr(Gt),xt.attr(Wt);this._firstShowIndicator=!1;var ee=this._shapes.handleLabels;if(ee)for(var oe=0;oe<ee.length;oe++)this._api.enterBlur(ee[oe])}},r.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(i){if(e._hovering=!0,!e._dragging){var s=e.visualMapModel.itemSize,l=e._applyTransform([i.offsetX,i.offsetY],e._shapes.mainGroup,!0,!0);l[1]=Dx(Cm(0,l[1]),s[1]),e._doHoverLinkToSeries(l[1],0<=l[0]&&l[0]<=s[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(e,i){var s=this.visualMapModel;if(s.option.hoverLink){var c=[0,s.itemSize[1]],f=s.getExtent();e=Dx(Cm(c[0],e),c[1]);var p=function wA(o,r,e){var i=6,s=o.get("hoverLinkDataSize");return s&&(i=el(s,r,e,!0)/2),i}(s,f,c),v=[e-p,e+p],m=el(e,c,f,!0),x=[el(v[0],c,f,!0),el(v[1],c,f,!0)];v[0]<c[0]&&(x[0]=-1/0),v[1]>c[1]&&(x[1]=1/0),i&&(x[0]===-1/0?this._showIndicator(m,x[1],"< ",p):x[1]===1/0?this._showIndicator(m,x[0],"> ",p):this._showIndicator(m,m,"\u2248 ",p));var T=this._hoverLinkDataIndices,O=[];(i||Nx(s))&&(O=this._hoverLinkDataIndices=s.findTargetDataIndices(x));var G=dr.XI(T,O);this._dispatchHighDown("downplay",ug(G[0],s)),this._dispatchHighDown("highlight",ug(G[1],s))}},r.prototype._hoverLinkFromSeriesMouseOver=function(e){var i;if((0,Cl.o)(e.target,function(p){var v=(0,Fr.A)(p);if(null!=v.dataIndex)return i=v,!0},!0),i){var s=this.ecModel.getSeriesByIndex(i.seriesIndex),l=this.visualMapModel;if(l.isTargetSeries(s)){var c=s.getData(i.dataType),f=c.getStore().get(l.getDataDimensionIndex(c),i.dataIndex);isNaN(f)||this._showIndicator(f,f)}}},r.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var i=this._shapes.handleLabels;if(i)for(var s=0;s<i.length;s++)this._api.leaveBlur(i[s])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",ug(e,this.visualMapModel)),e.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(e,i,s,l){var c=ur.getTransform(i,l?null:this.group);return _.isArray(e)?ur.applyTransform(e,c,s):ur.transformDirection(e,c,s)},r.prototype._dispatchHighDown=function(e,i){i&&i.length&&this.api.dispatchAction({type:e,batch:i})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(Ax);var LA={type:"selectDataRange",event:"dataRangeSelected",update:"update"},NA=function(o,r){r.eachComponent({mainType:"visualMap",query:o},function(e){e.setSelected(o.selected)})},IA=[{createOnAllSeries:!0,reset:function(o,r){var e=[];return r.eachComponent("visualMap",function(i){var s=o.pipelineContext;!i.isTargetSeries(o)||s&&s.large||e.push(function Pb(o,r,e,i){var s={};return _.each(o,function(l){var c=Gi.prepareVisualTypes(r[l]);s[l]=c}),{progress:function(c,f){var p;function v(It){return(0,Iu.Or)(f,x,It)}function m(It,Nt){(0,Iu.LZ)(f,x,It,Nt)}null!=i&&(p=f.getDimensionIndex(i));for(var x,T=f.getStore();null!=(x=c.next());){var O=f.getRawDataItem(x);if(!O||!1!==O.visualMap)for(var G=null!=i?T.get(p,x):x,F=e(G),Q=r[F],ft=s[F],Tt=0,xt=ft.length;Tt<xt;Tt++){var At=ft[Tt];Q[At]&&Q[At].applyVisual(G,v,m)}}}}}(i.stateList,i.targetVisuals,_.bind(i.getValueState,i),i.getDataDimensionIndex(o.getData())))}),e}},{createOnAllSeries:!0,reset:function(o,r){var e=o.getData(),i=[];r.eachComponent("visualMap",function(s){if(s.isTargetSeries(o)){var l=s.getVisualMeta(_.bind(RA,null,o,s))||{stops:[],outerColors:[]},c=s.getDataDimensionIndex(e);c>=0&&(l.dimension=c,i.push(l))}}),o.getData().setVisual("visualMeta",i)}}];function RA(o,r,e,i){for(var s=r.targetVisuals[i],l=Gi.prepareVisualTypes(s),c={color:(0,Iu.UL)(o.getData(),"color")},f=0,p=l.length;f<p;f++){var v=l[f],m=s["opacity"===v?"__alphaForOpacity":v];m&&m.applyVisual(e,x,T)}return c.color;function x(O){return c[O]}function T(O,G){c[O]=G}}var Rx=_.each;function BA(o){var r=o&&o.visualMap;_.isArray(r)||(r=r?[r]:[]),Rx(r,function(e){if(e){Sf(e,"splitList")&&!Sf(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var i=e.pieces;i&&_.isArray(i)&&Rx(i,function(s){_.isObject(s)&&(Sf(s,"start")&&!Sf(s,"min")&&(s.min=s.start),Sf(s,"end")&&!Sf(s,"max")&&(s.max=s.end))})}})}function Sf(o,r){return o&&o.hasOwnProperty&&o.hasOwnProperty(r)}var Bx=!1;function Gx(o){Bx||(Bx=!0,o.registerSubTypeDefaulter("visualMap",function(r){return r.categories||(r.pieces?r.pieces.length>0:r.splitNumber>0)&&!r.calculable?"piecewise":"continuous"}),o.registerAction(LA,NA),(0,_.each)(IA,function(r){o.registerVisual(o.PRIORITY.VISUAL.COMPONENT,r)}),o.registerPreprocessor(BA))}function Zx(o){o.registerComponentModel(MA),o.registerComponentView(DA),Gx(o)}var GA=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e._pieceList=[],e}return(0,Re.ZT)(r,o),r.prototype.optionUpdated=function(e,i){o.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var s=this._mode=this._determineMode();this._pieceList=[],ZA[this._mode].call(this,this._pieceList),this._resetSelected(e,i);var l=this.option.categories;this.resetVisual(function(c,f){"categories"===s?(c.mappingMethod="category",c.categories=_.clone(l)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=_.map(this._pieceList,function(p){return p=_.clone(p),"inRange"!==f&&(p.visual=null),p}))})},r.prototype.completeVisualOption=function(){var e=this.option,i={},s=Gi.listVisualTypes(),l=this.isCategory();function c(f,p,v){return f&&f[p]&&f[p].hasOwnProperty(v)}_.each(e.pieces,function(f){_.each(s,function(p){f.hasOwnProperty(p)&&(i[p]=1)})}),_.each(i,function(f,p){var v=!1;_.each(this.stateList,function(m){v=v||c(e,m,p)||c(e.target,m,p)},this),!v&&_.each(this.stateList,function(m){(e[m]||(e[m]={}))[p]=Tx.get(p,"inRange"===m?"active":"inactive",l)})},this),o.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(e,i){var s=this.option,l=this._pieceList,c=(i?s:e).selected||{};if(s.selected=c,_.each(l,function(p,v){var m=this.getSelectedMapKey(p);c.hasOwnProperty(m)||(c[m]=!0)},this),"single"===s.selectedMode){var f=!1;_.each(l,function(p,v){var m=this.getSelectedMapKey(p);c[m]&&(f?c[m]=!1:f=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(e){this.option.selected=_.clone(e)},r.prototype.getValueState=function(e){var i=Gi.findPieceIndex(e,this._pieceList);return null!=i&&this.option.selected[this.getSelectedMapKey(this._pieceList[i])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var i=[],s=this._pieceList;return this.eachTargetSeries(function(l){var c=[],f=l.getData();f.each(this.getDataDimensionIndex(f),function(p,v){Gi.findPieceIndex(p,s)===e&&c.push(v)},this),i.push({seriesId:l.id,dataIndex:c})},this),i},r.prototype.getRepresentValue=function(e){var i;if(this.isCategory())i=e.value;else if(null!=e.value)i=e.value;else{var s=e.interval||[];i=s[0]===-1/0&&s[1]===1/0?0:(s[0]+s[1])/2}return i},r.prototype.getVisualMeta=function(e){if(!this.isCategory()){var i=[],s=["",""],l=this,f=this._pieceList.slice();if(f.length){var p=f[0].interval[0];p!==-1/0&&f.unshift({interval:[-1/0,p]}),(p=f[f.length-1].interval[1])!==1/0&&f.push({interval:[p,1/0]})}else f.push({interval:[-1/0,1/0]});var v=-1/0;return _.each(f,function(m){var x=m.interval;x&&(x[0]>v&&c([v,x[0]],"outOfRange"),c(x.slice()),v=x[1])},this),{stops:i,outerColors:s}}function c(m,x){var T=l.getRepresentValue({interval:m});x||(x=l.getValueState(T));var O=e(T,x);m[0]===-1/0?s[0]=O:m[1]===1/0?s[1]=O:i.push({value:m[0],color:O},{value:m[1],color:O})}},r.type="visualMap.piecewise",r.defaultOption=(0,Ii.ZL)(lg.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(lg),ZA={splitNumber:function(o){var r=this.option,e=Math.min(r.precision,20),i=this.getExtent(),s=r.splitNumber;s=Math.max(parseInt(s,10),1),r.splitNumber=s;for(var l=(i[1]-i[0])/s;+l.toFixed(e)!==l&&e<5;)e++;r.precision=e,l=+l.toFixed(e),r.minOpen&&o.push({interval:[-1/0,i[0]],close:[0,0]});for(var c=0,f=i[0];c<s;f+=l,c++)o.push({interval:[f,c===s-1?i[1]:f+l],close:[1,1]});r.maxOpen&&o.push({interval:[i[1],1/0],close:[0,0]}),(0,Be.nR)(o),_.each(o,function(v,m){v.index=m,v.text=this.formatValueText(v.interval)},this)},categories:function(o){var r=this.option;_.each(r.categories,function(e){o.push({text:this.formatValueText(e,!0),value:e})},this),Fx(r,o)},pieces:function(o){var r=this.option;_.each(r.pieces,function(e,i){_.isObject(e)||(e={value:e});var s={text:"",index:i};if(null!=e.label&&(s.text=e.label),e.hasOwnProperty("value")){var l=s.value=e.value;s.interval=[l,l],s.close=[1,1]}else{for(var c=s.interval=[],f=s.close=[0,0],p=[1,0,1],v=[-1/0,1/0],m=[],x=0;x<2;x++){for(var T=[["gte","gt","min"],["lte","lt","max"]][x],O=0;O<3&&null==c[x];O++)c[x]=e[T[O]],f[x]=p[O],m[x]=2===O;null==c[x]&&(c[x]=v[x])}m[0]&&c[1]===1/0&&(f[0]=0),m[1]&&c[0]===-1/0&&(f[1]=0),c[0]===c[1]&&f[0]&&f[1]&&(s.value=c[0])}s.visual=Gi.retrieveVisuals(e),o.push(s)},this),Fx(r,o),(0,Be.nR)(o),_.each(o,function(e){var i=e.close;e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,[["<","\u2264"][i[1]],[">","\u2265"][i[0]]])},this)}};function Fx(o,r){var e=o.inverse;("vertical"===o.orient?!e:e)&&r.reverse()}const FA=GA,zA=function(o){function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=r.type,e}return(0,Re.ZT)(r,o),r.prototype.doRender=function(){var e=this.group;e.removeAll();var i=this.visualMapModel,s=i.get("textGap"),l=i.textStyleModel,c=l.getFont(),f=l.getTextColor(),p=this._getItemAlign(),v=i.itemSize,m=this._getViewData(),x=m.endsText,T=_.retrieve(i.get("showLabel",!0),!x);x&&this._renderEndsText(e,x[0],v,T,p),_.each(m.viewPieceList,function(O){var G=O.piece,F=new pr.Z;F.onclick=_.bind(this._onItemClick,this,G),this._enableHoverLink(F,O.indexInModelPieceList);var Q=i.getRepresentValue(G);if(this._createItemSymbol(F,Q,[0,0,v[0],v[1]]),T){var ft=this.visualMapModel.getValueState(Q);F.add(new Se.ZP({style:{x:"right"===p?-s:v[0]+s,y:v[1]/2,text:G.text,verticalAlign:"middle",align:p,font:c,fill:f,opacity:"outOfRange"===ft?.5:1}}))}e.add(F)},this),x&&this._renderEndsText(e,x[1],v,T,p),sn.BZ(i.get("orient"),e,i.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},r.prototype._enableHoverLink=function(e,i){var s=this;e.on("mouseover",function(){return l("highlight")}).on("mouseout",function(){return l("downplay")});var l=function(c){var f=s.visualMapModel;f.option.hoverLink&&s.api.dispatchAction({type:c,batch:ug(f.findTargetDataIndices(i),f)})}},r.prototype._getItemAlign=function(){var e=this.visualMapModel,i=e.option;if("vertical"===i.orient)return Ex(e,this.api,e.itemSize);var s=i.align;return(!s||"auto"===s)&&(s="left"),s},r.prototype._renderEndsText=function(e,i,s,l,c){if(i){var f=new pr.Z;f.add(new Se.ZP({style:(0,Or.Lr)(this.visualMapModel.textStyleModel,{x:l?"right"===c?s[0]:0:s[0]/2,y:s[1]/2,verticalAlign:"middle",align:l?c:"center",text:i})})),e.add(f)}},r.prototype._getViewData=function(){var e=this.visualMapModel,i=_.map(e.getPieceList(),function(f,p){return{piece:f,indexInModelPieceList:p}}),s=e.get("text"),l=e.get("orient"),c=e.get("inverse");return("horizontal"===l?c:!c)?i.reverse():s&&(s=s.slice().reverse()),{viewPieceList:i,endsText:s}},r.prototype._createItemSymbol=function(e,i,s){e.add((0,Tn.th)(this.getControllerVisual(i,"symbol"),s[0],s[1],s[2],s[3],this.getControllerVisual(i,"color")))},r.prototype._onItemClick=function(e){var i=this.visualMapModel,s=i.option,l=s.selectedMode;if(l){var c=_.clone(s.selected),f=i.getSelectedMapKey(e);"single"===l||!0===l?(c[f]=!0,_.each(c,function(p,v){c[v]=v===f})):c[f]=!c[f],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:c})}},r.type="visualMap.piecewise",r}(Ax);function kx(o){o.registerComponentModel(FA),o.registerComponentView(zA),Gx(o)}var HA={label:{enabled:!0},decal:{show:!1}},zx=(0,dr.Yf)(),VA={};function WA(o,r){var e=o.getModel("aria");if(e.get("enabled")){var i=_.clone(HA);_.merge(i.label,o.getLocaleModel().get("aria"),!1),_.merge(e.option,i,!1),function s(){if(e.getModel("decal").get("show")){var x=_.createHashMap();o.eachSeries(function(T){if(!T.isColorBySeries()){var O=x.get(T.type);O||x.set(T.type,O={}),zx(T).scope=O}}),o.eachRawSeries(function(T){if(!o.isSeriesFiltered(T))if(_.isFunction(T.enableAriaDecal))T.enableAriaDecal();else{var O=T.getData();if(T.isColorBySeries()){var Tt=(0,pd.i)(T.ecModel,T.name,VA,o.getSeriesCount()),xt=O.getVisual("decal");O.setVisual("decal",At(xt,Tt))}else{var G=T.getRawData(),F={},Q=zx(T).scope;O.each(function(It){var Nt=O.getRawIndex(It);F[Nt]=It});var ft=G.count();G.each(function(It){var Nt=F[It],Gt=G.getName(It)||It+"",Wt=(0,pd.i)(T.ecModel,Gt,Q,ft),jt=O.getItemVisual(Nt,"decal");O.setItemVisual(Nt,"decal",At(jt,Wt))})}}function At(It,Nt){var Gt=It?_.extend(_.extend({},Nt),It):Nt;return Gt.dirty=!0,Gt}})}}(),function l(){var v=o.getLocaleModel().get("aria"),m=e.getModel("label");if(m.option=_.defaults(m.option,v),m.get("enabled")){var x=r.getZr().dom;if(m.get("description"))return void x.setAttribute("aria-label",m.get("description"));var Q,T=o.getSeriesCount(),O=m.get(["data","maxCount"])||10,G=m.get(["series","maxCount"])||10,F=Math.min(T,G);if(!(T<1)){var ft=function f(){var v=o.get("title");return v&&v.length&&(v=v[0]),v&&v.text}();if(ft)Q=c(m.get(["general","withTitle"]),{title:ft});else Q=m.get(["general","withoutTitle"]);var xt=[];Q+=c(m.get(T>1?["series","multiple","prefix"]:["series","single","prefix"]),{seriesCount:T}),o.eachSeries(function(Wt,jt){if(jt<F){var ee=void 0,de=Wt.get("name")?"withName":"withoutName";ee=c(ee=m.get(T>1?["series","multiple",de]:["series","single",de]),{seriesId:Wt.seriesIndex,seriesName:Wt.get("name"),seriesType:p(Wt.subType)});var xe=Wt.getData();xe.count()>O?ee+=c(m.get(["data","partialData"]),{displayCnt:O}):ee+=m.get(["data","allData"]);for(var Ae=m.get(["data","separator","middle"]),ke=m.get(["data","separator","end"]),Je=[],$e=0;$e<xe.count();$e++)if($e<O){var fr=xe.getName($e),wr=xe.getValues($e),Dr=m.get(["data",fr?"withName":"withoutName"]);Je.push(c(Dr,{name:fr,value:wr.join(Ae)}))}ee+=Je.join(Ae)+ke,xt.push(ee)}});var It=m.getModel(["series","multiple","separator"]),Nt=It.get("middle"),Gt=It.get("end");Q+=xt.join(Nt)+Gt,x.setAttribute("aria-label",Q)}}}()}function c(v,m){if(!_.isString(v))return v;var x=v;return _.each(m,function(T,O){x=x.replace(new RegExp("\\{\\s*"+O+"\\s*\\}","g"),T)}),x}function p(v){return o.getLocaleModel().get(["series","typeNames"])[v]||"\u81ea\u5b9a\u4e49\u56fe"}}function $A(o){if(o&&o.aria){var r=o.aria;null!=r.show&&(r.enabled=r.show),r.label=r.label||{},_.each(["description","general","series","data"],function(e){null!=r[e]&&(r.label[e]=r[e])})}}var Ux={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},YA=function(){function o(r){null==(this._condVal=(0,_.isString)(r)?new RegExp(r):(0,_.isRegExp)(r)?r:null)&&(0,Jt._y)("")}return o.prototype.evaluate=function(r){var e=typeof r;return(0,_.isString)(e)?this._condVal.test(r):!!(0,_.isNumber)(e)&&this._condVal.test(r+"")},o}(),KA=function(){function o(){}return o.prototype.evaluate=function(){return this.value},o}(),jA=function(){function o(){}return o.prototype.evaluate=function(){for(var r=this.children,e=0;e<r.length;e++)if(!r[e].evaluate())return!1;return!0},o}(),JA=function(){function o(){}return o.prototype.evaluate=function(){for(var r=this.children,e=0;e<r.length;e++)if(r[e].evaluate())return!0;return!1},o}(),QA=function(){function o(){}return o.prototype.evaluate=function(){return!this.child.evaluate()},o}(),qA=function(){function o(){}return o.prototype.evaluate=function(){for(var r=!!this.valueParser,i=(0,this.getValue)(this.valueGetterParam),s=r?this.valueParser(i):null,l=0;l<this.subCondList.length;l++)if(!this.subCondList[l].evaluate(r?s:i))return!1;return!0},o}();function Mm(o,r){if(!0===o||!1===o){var e=new KA;return e.value=o,e}return Vx(o)||(0,Jt._y)(""),o.and?Hx("and",o,r):o.or?Hx("or",o,r):o.not?function tO(o,r){var e=o.not;Vx(e)||(0,Jt._y)("");var s=new QA;return s.child=Mm(e,r),s.child||(0,Jt._y)(""),s}(o,r):function eO(o,r){for(var i=r.prepareGetValue(o),s=[],l=(0,_.keys)(o),c=o.parser,f=c?(0,Bu.o2)(c):null,p=0;p<l.length;p++){var v=l[p];if("parser"!==v&&!r.valueGetterAttrMap.get(v)){var m=(0,_.hasOwn)(Ux,v)?Ux[v]:v,x=o[v],T=f?f(x):x,O=(0,Bu.tR)(m,T)||"reg"===m&&new YA(T);O||(0,Jt._y)(""),s.push(O)}}s.length||(0,Jt._y)("");var G=new qA;return G.valueGetterParam=i,G.valueParser=f,G.getValue=r.getValue,G.subCondList=s,G}(o,r)}function Hx(o,r,e){var i=r[o];(0,_.isArray)(i)||(0,Jt._y)(""),i.length||(0,Jt._y)("");var l="and"===o?new jA:new JA;return l.children=(0,_.map)(i,function(c){return Mm(c,e)}),l.children.length||(0,Jt._y)(""),l}function Vx(o){return(0,_.isObject)(o)&&!(0,_.isArrayLike)(o)}var rO=function(){function o(r,e){this._cond=Mm(r,e)}return o.prototype.evaluate=function(){return this._cond.evaluate()},o}(),iO={type:"echarts:filter",transform:function(o){for(var e,r=o.upstream,i=function nO(o,r){return new rO(o,r)}(o.config,{valueGetterAttrMap:(0,_.createHashMap)({dimension:!0}),prepareGetValue:function(f){var v=f.dimension;(0,_.hasOwn)(f,"dimension")||(0,Jt._y)("");var m=r.getDimensionInfo(v);return m||(0,Jt._y)(""),{dimIdx:m.index}},getValue:function(f){return r.retrieveValueFromItem(e,f.dimIdx)}}),s=[],l=0,c=r.count();l<c;l++)e=r.getRawDataItem(l),i.evaluate()&&s.push(e);return{data:s}}},aO={type:"echarts:sort",transform:function(o){var r=o.upstream,i="",s=(0,dr.kF)(o.config);s.length||(0,Jt._y)(i);var l=[];(0,_.each)(s,function(m){var x=m.dimension,T=m.order,O=m.parser,G=m.incomparable;null==x&&(0,Jt._y)(i),"asc"!==T&&"desc"!==T&&(0,Jt._y)(i),G&&"min"!==G&&"max"!==G&&(0,Jt._y)(""),"asc"!==T&&"desc"!==T&&(0,Jt._y)("");var ft=r.getDimensionInfo(x);ft||(0,Jt._y)(i);var Tt=O?(0,Bu.o2)(O):null;O&&!Tt&&(0,Jt._y)(i),l.push({dimIdx:ft.index,parser:Tt,comparator:new Bu.ID(T,G)})});var c=r.sourceFormat;c!==qt.XD&&c!==qt.qb&&(0,Jt._y)(i);for(var f=[],p=0,v=r.count();p<v;p++)f.push(r.getRawDataItem(p));return f.sort(function(m,x){for(var T=0;T<l.length;T++){var O=l[T],G=r.retrieveValueFromItem(m,O.dimIdx),F=r.retrieveValueFromItem(x,O.dimIdx);O.parser&&(G=O.parser(G),F=O.parser(F));var Q=O.comparator.evaluate(G,F);if(0!==Q)return Q}return 0}),{data:f}}},sO=D(3808),rl=ct.Z.CMD;function Tf(o,r){return Math.abs(o-r)<1e-5}function bm(o){var s,xe,be,Ae,ke,Je,$e,fr,wr,Dr,cn,ln,rn,Pn,nn,Wn,kn,qn,r=o.data,e=o.len(),i=[],l=0,c=0,f=0,p=0;function v(xe,be){s&&s.length>2&&i.push(s),s=[xe,be]}function m(xe,be,Ae,ke){Tf(xe,Ae)&&Tf(be,ke)||s.push(xe,be,Ae,ke,Ae,ke)}for(var T,O,G,F,Q=0;Q<e;){var ft=r[Q++],Tt=1===Q;switch(Tt&&(f=l=r[Q],p=c=r[Q+1],(ft===rl.L||ft===rl.C||ft===rl.Q)&&(s=[f,p])),ft){case rl.M:l=f=r[Q++],c=p=r[Q++],v(f,p);break;case rl.L:m(l,c,T=r[Q++],O=r[Q++]),l=T,c=O;break;case rl.C:s.push(r[Q++],r[Q++],r[Q++],r[Q++],l=r[Q++],c=r[Q++]);break;case rl.Q:T=r[Q++],O=r[Q++],G=r[Q++],F=r[Q++],s.push(l+2/3*(T-l),c+2/3*(O-c),G+2/3*(T-G),F+2/3*(O-F),G,F),l=G,c=F;break;case rl.A:var xt=r[Q++],At=r[Q++],It=r[Q++],Nt=r[Q++],Gt=r[Q++],Wt=r[Q++]+Gt;Q+=1;var jt=!r[Q++];T=Math.cos(Gt)*It+xt,O=Math.sin(Gt)*Nt+At,Tt?v(f=T,p=O):m(l,c,T,O),l=Math.cos(Wt)*It+xt,c=Math.sin(Wt)*Nt+At;for(var ee=(jt?-1:1)*Math.PI/2,oe=Gt;jt?oe>Wt:oe<Wt;oe+=ee){xe=oe,be=jt?Math.max(oe+ee,Wt):Math.min(oe+ee,Wt),Ae=xt,ke=At,Je=It,$e=Nt,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,fr=Math.abs(be-xe),wr=4*Math.tan(fr/4)/3,Dr=be<xe?-1:1,cn=Math.cos(xe),ln=Math.sin(xe),rn=Math.cos(be),Pn=Math.sin(be),s.push(cn*Je+Ae-(kn=Je*wr*Dr)*ln,ln*$e+ke+(qn=$e*wr*Dr)*cn,(nn=rn*Je+Ae)+kn*Pn,(Wn=Pn*$e+ke)-qn*rn,nn,Wn)}break;case rl.R:f=l=r[Q++],p=c=r[Q++],T=f+r[Q++],O=p+r[Q++],v(T,p),m(T,p,T,O),m(T,O,f,O),m(f,O,f,p),m(f,p,T,p);break;case rl.Z:s&&m(l,c,f,p),l=f,c=p}}return s&&s.length>2&&i.push(s),i}function Pm(o,r,e,i,s,l,c,f,p,v){if(Tf(o,e)&&Tf(r,i)&&Tf(s,c)&&Tf(l,f))p.push(c,f);else{var m=2/v,x=m*m,T=c-o,O=f-r,G=Math.sqrt(T*T+O*O);T/=G,O/=G;var F=e-o,Q=i-r,ft=s-c,Tt=l-f,xt=F*F+Q*Q,At=ft*ft+Tt*Tt;if(xt<x&&At<x)p.push(c,f);else{var It=T*F+O*Q,Nt=-T*ft-O*Tt;if(xt-It*It<x&&It>=0&&At-Nt*Nt<x&&Nt>=0)p.push(c,f);else{var jt=[],ee=[];(0,kr.Vz)(o,e,s,c,.5,jt),(0,kr.Vz)(r,i,l,f,.5,ee),Pm(jt[0],ee[0],jt[1],ee[1],jt[2],ee[2],jt[3],ee[3],p,v),Pm(jt[4],ee[4],jt[5],ee[5],jt[6],ee[6],jt[7],ee[7],p,v)}}}}function Wx(o,r,e){var l=Math.abs(o[r]/o[1-r]),c=Math.ceil(Math.sqrt(l*e)),f=Math.floor(e/c);0===f&&(f=1,c=e);for(var p=[],v=0;v<c;v++)p.push(f);var x=e-c*f;if(x>0)for(v=0;v<x;v++)p[v%c]+=1;return p}function $x(o,r,e){for(var i=o.r0,s=o.r,l=o.startAngle,f=Math.abs(o.endAngle-l),p=f*s,v=s-i,m=p>Math.abs(v),x=Wx([p,v],m?0:1,r),T=(m?f:v)/x.length,O=0;O<x.length;O++)for(var G=(m?v:f)/x[O],F=0;F<x[O];F++){var Q={};m?(Q.startAngle=l+T*O,Q.endAngle=l+T*(O+1),Q.r0=i+G*F,Q.r=i+G*(F+1)):(Q.startAngle=l+G*F,Q.endAngle=l+G*(F+1),Q.r0=i+T*O,Q.r=i+T*(O+1)),Q.clockwise=o.clockwise,Q.cx=o.cx,Q.cy=o.cy,e.push(Q)}}function Xx(o,r,e,i){return o*i-e*r}function cO(o,r,e,i,s,l,c,f){var p=e-o,v=i-r,m=c-s,x=f-l,T=Xx(m,x,p,v);if(Math.abs(T)<1e-6)return null;var F=Xx(o-s,r-l,m,x)/T;return F<0||F>1?null:new Zt.Z(F*p+o,F*v+r)}function hO(o,r,e){var i=new Zt.Z;Zt.Z.sub(i,e,r),i.normalize();var s=new Zt.Z;return Zt.Z.sub(s,o,r),s.dot(i)}function Cf(o,r){var e=o[o.length-1];e&&e[0]===r[0]&&e[1]===r[1]||o.push(r)}function Yx(o){var r=o.points,e=[],i=[];(0,bl.zk)(r,e,i);var s=new bn.Z(e[0],e[1],i[0]-e[0],i[1]-e[1]),l=s.width,c=s.height,f=s.x,p=s.y,v=new Zt.Z,m=new Zt.Z;return l>c?(v.x=m.x=f+l/2,v.y=p,m.y=p+c):(v.y=m.y=p+c/2,v.x=f,m.x=f+l),function fO(o,r,e){for(var i=o.length,s=[],l=0;l<i;l++){var c=o[l],f=o[(l+1)%i],p=cO(c[0],c[1],f[0],f[1],r.x,r.y,e.x,e.y);p&&s.push({projPt:hO(p,r,e),pt:p,idx:l})}if(s.length<2)return[{points:o},{points:o}];s.sort(function(Q,ft){return Q.projPt-ft.projPt});var v=s[0],m=s[s.length-1];if(m.idx<v.idx){var x=v;v=m,m=x}var T=[v.pt.x,v.pt.y],O=[m.pt.x,m.pt.y],G=[T],F=[O];for(l=v.idx+1;l<=m.idx;l++)Cf(G,o[l].slice());for(Cf(G,O),Cf(G,T),l=m.idx+1;l<=v.idx+i;l++)Cf(F,o[l%i].slice());return Cf(F,T),Cf(F,O),[{points:G},{points:F}]}(r,v,m)}function cg(o,r,e,i){if(1===e)i.push(r);else{var s=Math.floor(e/2),l=o(r);cg(o,l[0],s,i),cg(o,l[1],e-s,i)}return i}function pO(o,r){r.setStyle(o.style),r.z=o.z,r.z2=o.z2,r.zlevel=o.zlevel}function _O(o,r){var e=o.length,i=r.length;if(e===i)return[o,r];for(var s=[],l=[],c=e<i?o:r,f=Math.min(e,i),p=Math.abs(i-e)/6,m=Math.ceil(p/((f-2)/6))+1,x=[c[0],c[1]],T=p,O=2;O<f;){var G=c[O-2],F=c[O-1],Q=c[O++],ft=c[O++],Tt=c[O++],xt=c[O++],At=c[O++],It=c[O++];if(T<=0)x.push(Q,ft,Tt,xt,At,It);else{for(var Nt=Math.min(T,m-1)+1,Gt=1;Gt<=Nt;Gt++){var Wt=Gt/Nt;(0,kr.Vz)(G,Q,Tt,At,Wt,s),(0,kr.Vz)(F,ft,xt,It,Wt,l),x.push(s[1],l[1],s[2],l[2],G=s[3],F=l[3]),Q=s[5],ft=l[5],Tt=s[6],xt=l[6]}T-=Nt-1}}return c===o?[x,r]:[o,x]}function Kx(o,r){for(var e=o.length,i=o[e-2],s=o[e-1],l=[],c=0;c<r.length;)l[c++]=i,l[c++]=s;return l}function jx(o){for(var r=0,e=0,i=0,s=o.length,l=0,c=s-2;l<s;c=l,l+=2){var f=o[c],p=o[c+1],v=o[l],m=o[l+1],x=f*m-v*p;r+=x,e+=(f+v)*x,i+=(p+m)*x}return 0===r?[o[0]||0,o[1]||0]:[e/r/3,i/r/3,r]}function yO(o,r,e,i){for(var s=(o.length-2)/6,l=1/0,c=0,f=o.length,p=f-2,v=0;v<s;v++){for(var m=6*v,x=0,T=0;T<f;T+=2){var O=0===T?m:(m+T-2)%p+2,Tt=r[T]-i[0]-(o[O]-e[0]),xt=r[T+1]-i[1]-(o[O+1]-e[1]);x+=Tt*Tt+xt*xt}x<l&&(l=x,c=v)}return c}function xO(o){for(var r=[],e=o.length,i=0;i<e;i+=2)r[i]=o[e-i-2],r[i+1]=o[e-i-1];return r}function hg(o){return o.__isCombineMorphing}var Jx="__mOriginal_";function fg(o,r,e){var i=Jx+r,s=o[i]||o[r];o[i]||(o[i]=o[r]);var l=e.replace,c=e.after,f=e.before;o[r]=function(){var v,p=arguments;return f&&f.apply(this,p),v=l?l.apply(this,p):s.apply(this,p),c&&c.apply(this,p),v}}function Op(o,r){var e=Jx+r;o[e]&&(o[r]=o[e],o[e]=null)}function Qx(o,r){for(var e=0;e<o.length;e++)for(var i=o[e],s=0;s<i.length;){var l=i[s],c=i[s+1];i[s++]=r[0]*l+r[2]*c+r[4],i[s++]=r[1]*l+r[3]*c+r[5]}}function qx(o,r){var e=o.getUpdatedPathProxy(),i=r.getUpdatedPathProxy(),s=function mO(o,r){for(var e,i,s,l=[],c=[],f=0;f<Math.max(o.length,r.length);f++){var p=o[f],v=r[f],m=void 0,x=void 0;p?v?(i=m=(e=_O(p,v))[0],s=x=e[1]):(x=Kx(s||p,p),m=p):(m=Kx(i||v,v),x=v),l.push(m),c.push(x)}return[l,c]}(bm(e),bm(i)),l=s[0],c=s[1],f=o.getComputedTransform(),p=r.getComputedTransform();f&&Qx(l,f),p&&Qx(c,p),fg(r,"updateTransform",{replace:function v(){this.transform=null}}),r.transform=null;var m=function SO(o,r,e,i){for(var l,s=[],c=0;c<o.length;c++){var f=o[c],p=r[c],v=jx(f),m=jx(p);null==l&&(l=v[2]<0!=m[2]<0);var x=[],T=[],O=0,G=1/0,F=[],Q=f.length;l&&(f=xO(f));for(var ft=6*yO(f,p,v,m),Tt=Q-2,xt=0;xt<Tt;xt+=2){var At=(ft+xt)%Tt+2;x[xt+2]=f[At]-v[0],x[xt+3]=f[At+1]-v[1]}if(x[0]=f[ft]-v[0],x[1]=f[ft+1]-v[1],e>0)for(var It=i/e,Nt=-i/2;Nt<=i/2;Nt+=It){var Gt=Math.sin(Nt),Wt=Math.cos(Nt),jt=0;for(xt=0;xt<f.length;xt+=2){var ee=x[xt],oe=x[xt+1],de=p[xt]-m[0],xe=p[xt+1]-m[1],be=de*Wt-xe*Gt,Ae=de*Gt+xe*Wt;F[xt]=be,F[xt+1]=Ae;var ke=be-ee,Je=Ae-oe;jt+=ke*ke+Je*Je}if(jt<G){G=jt,O=Nt;for(var $e=0;$e<F.length;$e++)T[$e]=F[$e]}}else for(var fr=0;fr<Q;fr+=2)T[fr]=p[fr]-m[0],T[fr+1]=p[fr+1]-m[1];s.push({from:x,to:T,fromCp:v,toCp:m,rotation:-O})}return s}(l,c,10,Math.PI),x=[];fg(r,"buildPath",{replace:function(T){for(var O=r.__morphT,G=1-O,F=[],Q=0;Q<m.length;Q++){var ft=m[Q],Tt=ft.from,xt=ft.to,At=ft.rotation*O,It=ft.fromCp,Nt=ft.toCp,Gt=Math.sin(At),Wt=Math.cos(At);(0,Ur.lerp)(F,It,Nt,O);for(var jt=0;jt<Tt.length;jt+=2){var be=Tt[jt]*G+(de=xt[jt])*O,Ae=Tt[jt+1]*G+(xe=xt[jt+1])*O;x[jt]=be*Wt-Ae*Gt+F[0],x[jt+1]=be*Gt+Ae*Wt+F[1]}var ke=x[0],Je=x[1];for(T.moveTo(ke,Je),jt=2;jt<Tt.length;){var de=x[jt++],xe=x[jt++],$e=x[jt++],fr=x[jt++],wr=x[jt++],Dr=x[jt++];ke===de&&Je===xe&&$e===wr&&fr===Dr?T.lineTo(wr,Dr):T.bezierCurveTo(de,xe,$e,fr,wr,Dr),ke=wr,Je=Dr}}}})}function Am(o,r,e){if(!o||!r)return r;var i=e.done,s=e.during;return qx(o,r),r.__morphT=0,r.animateTo({__morphT:1},(0,_.defaults)({during:function(c){r.dirtyShape(),s&&s(c)},done:function(){(function l(){Op(r,"buildPath"),Op(r,"updateTransform"),r.__morphT=-1,r.createPathProxy(),r.dirtyShape()})(),i&&i()}},e)),r}function TO(o,r,e,i,s,l){o=s===e?0:Math.round(32767*(o-e)/(s-e)),r=l===i?0:Math.round(32767*(r-i)/(l-i));for(var p,f=0,v=32768;v>0;v/=2){var m=0,x=0;(o&v)>0&&(m=1),(r&v)>0&&(x=1),f+=v*v*(3*m^x),0===x&&(1===m&&(o=v-1-o,r=v-1-r),p=o,o=r,r=p)}return f}function dg(o){var r=1/0,e=1/0,i=-1/0,s=-1/0,l=(0,_.map)(o,function(f){var p=f.getBoundingRect(),v=f.getComputedTransform(),m=p.x+p.width/2+(v?v[4]:0),x=p.y+p.height/2+(v?v[5]:0);return r=Math.min(m,r),e=Math.min(x,e),i=Math.max(m,i),s=Math.max(x,s),[m,x]});return(0,_.map)(l,function(f,p){return{cp:f,z:TO(f[0],f[1],r,e,i,s),path:o[p]}}).sort(function(f,p){return f.z-p.z}).map(function(f){return f.path})}function tS(o){return function gO(o,r){var s,e=[],i=o.shape;switch(o.type){case"rect":(function uO(o,r,e){for(var i=o.width,s=o.height,l=i>s,c=Wx([i,s],l?0:1,r),f=l?"width":"height",p=l?"height":"width",v=l?"x":"y",m=l?"y":"x",x=o[f]/c.length,T=0;T<c.length;T++)for(var O=o[p]/c[T],G=0;G<c[T];G++){var F={};F[v]=T*x,F[m]=G*O,F[f]=x,F[p]=O,F.x+=o.x,F.y+=o.y,e.push(F)}})(i,r,e),s=Br.Z;break;case"sector":$x(i,r,e),s=bi.C;break;case"circle":$x({r0:0,r:i.r,startAngle:0,endAngle:2*Math.PI,cx:i.cx,cy:i.cy},r,e),s=bi.C;break;default:var l=o.getComputedTransform(),c=l?Math.sqrt(Math.max(l[0]*l[0]+l[1]*l[1],l[2]*l[2]+l[3]*l[3])):1,f=(0,_.map)(function lO(o,r){var e=bm(o),i=[];r=r||1;for(var s=0;s<e.length;s++){var l=e[s],c=[],f=l[0],p=l[1];c.push(f,p);for(var v=2;v<l.length;){var m=l[v++],x=l[v++],T=l[v++],O=l[v++],G=l[v++],F=l[v++];Pm(f,p,m,x,T,O,G,F,c,r),f=G,p=F}i.push(c)}return i}(o.getUpdatedPathProxy(),c),function(ft){return function vO(o){for(var r=[],e=0;e<o.length;)r.push([o[e++],o[e++]]);return r}(ft)}),p=f.length;if(0===p)cg(Yx,{points:f[0]},r,e);else if(p===r)for(var v=0;v<p;v++)e.push({points:f[v]});else{var m=0,x=(0,_.map)(f,function(ft){var Tt=[],xt=[];(0,bl.zk)(ft,Tt,xt);var At=(xt[1]-Tt[1])*(xt[0]-Tt[0]);return m+=At,{poly:ft,area:At}});x.sort(function(ft,Tt){return Tt.area-ft.area});var T=r;for(v=0;v<p;v++){var O=x[v];if(T<=0)break;var G=v===p-1?T:Math.ceil(O.area/m*r);G<0||(cg(Yx,{points:O.poly},G,e),T-=G)}}s=Jn.Z}if(!s)return function dO(o,r){for(var e=[],i=0;i<r;i++)e.push((0,pl.U5)(o));return e}(o,r);var F=[];for(v=0;v<e.length;v++){var Q=new s;Q.setShape(e[v]),pO(o,Q),F.push(Q)}return F}(o.path,o.count)}function eS(o){return(0,_.isArray)(o[0])}function rS(o,r){for(var e=[],i=o.length,s=0;s<i;s++)e.push({one:o[s],many:[]});for(s=0;s<r.length;s++){var l=r[s].length,c=void 0;for(c=0;c<l;c++)e[c%i].many.push(r[s][c])}var f=0;for(s=i-1;s>=0;s--)if(!e[s].many.length){var p=e[f].many;if(p.length<=1){if(!f)return e;f=0}l=p.length;var v=Math.ceil(l/2);e[s].many=p.slice(v,l),e[f].many=p.slice(0,v),f++}return e}var bO={clone:function(o){for(var r=[],e=1-Math.pow(1-o.path.style.opacity,1/o.count),i=0;i<o.count;i++){var s=(0,pl.U5)(o.path);s.setStyle("opacity",e),r.push(s)}return r},split:null};function Em(o,r,e,i,s,l){if(o.length&&r.length){var c=(0,he.ke)("update",i,s);if(c&&c.duration>0){var v,m,f=i.getModel("universalTransition").get("delay"),p=Object.assign({setToFinal:!0},c);eS(o)&&(v=o,m=r),eS(r)&&(v=r,m=o);for(var T=v?v===o:o.length>r.length,O=v?rS(m,v):rS(T?r:o,[T?o:r]),G=0,F=0;F<O.length;F++)G+=O[F].many.length;var Q=0;for(F=0;F<O.length;F++)x(O[F],T,Q,G),Q+=O[F].many.length}}function x(ft,Tt,xt,At,It){var Nt=ft.many,Gt=ft.one;if(1!==Nt.length||It)for(var oe=(0,_.defaults)({dividePath:bO[e],individualDelay:f&&function(Je,$e,fr,wr){return f(Je+xt,At)}},p),de=Tt?function CO(o,r,e){var i=[];!function s(It){for(var Nt=0;Nt<It.length;Nt++){var Gt=It[Nt];hg(Gt)?s(Gt.childrenRef()):Gt instanceof mt.ZP&&i.push(Gt)}}(o);var l=i.length;if(!l)return{fromIndividuals:[],toIndividuals:[],count:0};var f=(e.dividePath||tS)({path:r,count:l});if(f.length!==l)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};i=dg(i),f=dg(f);for(var p=e.done,v=e.during,m=e.individualDelay,x=new vt.ZP,T=0;T<l;T++){var O=i[T],G=f[T];G.parent=r,G.copyTransform(x),m||qx(O,G)}function F(It){for(var Nt=0;Nt<f.length;Nt++)f[Nt].addSelfToZr(It)}function Q(){r.__isCombineMorphing=!1,r.__morphT=-1,r.childrenRef=null,Op(r,"addSelfToZr"),Op(r,"removeSelfFromZr")}r.__isCombineMorphing=!0,r.childrenRef=function(){return f},fg(r,"addSelfToZr",{after:function(It){F(It)}}),fg(r,"removeSelfFromZr",{after:function(It){for(var Nt=0;Nt<f.length;Nt++)f[Nt].removeSelfFromZr(It)}});var ft=f.length;if(m){var Tt=ft,xt=function(){0==--Tt&&(Q(),p&&p())};for(T=0;T<ft;T++){var At=m?(0,_.defaults)({delay:(e.delay||0)+m(T,ft,i[T],f[T]),done:xt},e):e;Am(i[T],f[T],At)}}else r.__morphT=0,r.animateTo({__morphT:1},(0,_.defaults)({during:function(It){for(var Nt=0;Nt<ft;Nt++){var Gt=f[Nt];Gt.__morphT=r.__morphT,Gt.dirtyShape()}v&&v(It)},done:function(){Q();for(var It=0;It<o.length;It++)Op(o[It],"updateTransform");p&&p()}},e));return r.__zr&&F(r.__zr),{fromIndividuals:i,toIndividuals:f,count:ft}}(Nt,Gt,oe):function MO(o,r,e){var i=r.length,s=[],l=e.dividePath||tS;if(hg(o)){!function c(O){for(var G=0;G<O.length;G++){var F=O[G];hg(F)?c(F.childrenRef()):F instanceof mt.ZP&&s.push(F)}}(o.childrenRef());var f=s.length;if(f<i)for(var p=0,v=f;v<i;v++)s.push((0,pl.U5)(s[p++%f]));s.length=i}else{s=l({path:o,count:i});var m=o.getComputedTransform();for(v=0;v<s.length;v++)s[v].setLocalTransform(m);if(s.length!==i)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}s=dg(s),r=dg(r);var x=e.individualDelay;for(v=0;v<i;v++){var T=x?(0,_.defaults)({delay:(e.delay||0)+x(v,i,s[v],r[v])},e):e;Am(s[v],r[v],T)}return{fromIndividuals:s,toIndividuals:r,count:r.length}}(Gt,Nt,oe),xe=de.fromIndividuals,be=de.toIndividuals,Ae=xe.length,ke=0;ke<Ae;ke++)ee=f?(0,_.defaults)({delay:f(ke,Ae)},p):p,l(xe[ke],be[ke],Tt?Nt[ke]:ft.one,Tt?ft.one:Nt[ke],ee);else{var ee,Wt=Tt?Nt[0]:Gt,jt=Tt?Gt:Nt[0];hg(Wt)?x({many:[Wt],one:jt},!0,xt,At,!0):(Am(Wt,jt,ee=f?(0,_.defaults)({delay:f(xt,At)},p):p),l(Wt,jt,Wt,jt,ee))}}}function th(o){if(!o)return[];if((0,_.isArray)(o)){for(var r=[],e=0;e<o.length;e++)r.push(th(o[e]));return r}var i=[];return o.traverse(function(s){s instanceof mt.ZP&&!s.disableMorphing&&!s.invisible&&!s.ignore&&i.push(s)}),i}var PO=(0,dr.Yf)();function iS(o){var r=[];return(0,_.each)(o,function(e){var i=e.data;if(!(i.count()>1e4))for(var s=i.getIndices(),l=function AO(o){for(var r=o.dimensions,e=0;e<r.length;e++){var i=o.getDimensionInfo(r[e]);if(i&&0===i.otherDims.itemGroupId)return r[e]}}(i),c=0;c<s.length;c++)r.push({dataGroupId:e.dataGroupId,data:i,dim:e.dim||l,divide:e.divide,dataIndex:c})}),r}function wm(o,r,e){o.traverse(function(i){i instanceof mt.ZP&&(0,he.KZ)(i,{style:{opacity:0}},r,{dataIndex:e,isFrom:!0})})}function Dm(o){if(o.parent){var r=o.getComputedTransform();o.setLocalTransform(r),o.parent.remove(o)}}function Mf(o){o.stopAnimation(),o.isGroup&&o.traverse(function(r){r.stopAnimation()})}function aS(o,r,e){var i=iS(o),s=iS(r);function l(ft,Tt,xt,At,It){(xt||ft)&&Tt.animateFrom({style:xt&&xt!==ft?(0,_.extend)((0,_.extend)({},xt.style),ft.style):ft.style},It)}function c(ft){for(var Tt=0;Tt<ft.length;Tt++)if(ft[Tt].dim)return ft[Tt].dim}var f=c(i),p=c(s),v=!1;function m(ft,Tt){return function(xt){var At=xt.data,It=xt.dataIndex;if(Tt)return At.getId(It);var Nt=xt.dataGroupId,Gt=ft?f||p:p||f,Wt=Gt&&At.getDimensionInfo(Gt),jt=Wt&&Wt.ordinalMeta;if(Wt){var ee=At.get(Wt.name,It);return jt&&jt.categories[ee]||ee+""}var oe=At.getRawDataItem(It);return oe&&oe.groupId?oe.groupId+"":Nt||At.getId(It)}}var x=function EO(o,r){var e=o.length;if(e!==r.length)return!1;for(var i=0;i<e;i++){var s=o[i],l=r[i];if(s.data.getId(s.dataIndex)!==l.data.getId(l.dataIndex))return!1}return!0}(i,s),T={};if(!x)for(var O=0;O<s.length;O++){var G=s[O],F=G.data.getItemGraphicEl(G.dataIndex);F&&(T[F.id]=!0)}function Q(ft,Tt){var xt=i[Tt],At=s[ft],It=At.data.hostModel,Nt=xt.data.getItemGraphicEl(xt.dataIndex),Gt=At.data.getItemGraphicEl(At.dataIndex);Nt!==Gt?Nt&&T[Nt.id]||Gt&&(Mf(Gt),Nt?(Mf(Nt),Dm(Nt),v=!0,Em(th(Nt),th(Gt),At.divide,It,ft,l)):wm(Gt,It,ft)):Gt&&function OO(o,r,e){var i=(0,he.ke)("update",e,r);i&&o.traverse(function(s){if(s instanceof Ma.ZP){var l=(0,he._W)(s);l&&s.animateFrom({style:l},i)}})}(Gt,At.dataIndex,It)}new Hs.Z(i,s,m(!0,x),m(!1,x),null,"multiple").update(Q).updateManyToOne(function(ft,Tt){var xt=s[ft],At=xt.data,It=At.hostModel,Nt=At.getItemGraphicEl(xt.dataIndex),Gt=(0,_.filter)((0,_.map)(Tt,function(Wt){return i[Wt].data.getItemGraphicEl(i[Wt].dataIndex)}),function(Wt){return Wt&&Wt!==Nt&&!T[Wt.id]});Nt&&(Mf(Nt),Gt.length?((0,_.each)(Gt,function(Wt){Mf(Wt),Dm(Wt)}),v=!0,Em(th(Gt),th(Nt),xt.divide,It,ft,l)):wm(Nt,It,xt.dataIndex))}).updateOneToMany(function(ft,Tt){var xt=i[Tt],At=xt.data.getItemGraphicEl(xt.dataIndex);if(!At||!T[At.id]){var It=(0,_.filter)((0,_.map)(ft,function(Gt){return s[Gt].data.getItemGraphicEl(s[Gt].dataIndex)}),function(Gt){return Gt&&Gt!==At}),Nt=s[ft[0]].data.hostModel;It.length&&((0,_.each)(It,function(Gt){return Mf(Gt)}),At?(Mf(At),Dm(At),v=!0,Em(th(At),th(It),xt.divide,Nt,ft[0],l)):(0,_.each)(It,function(Gt){return wm(Gt,Nt,ft[0])}))}}).updateManyToMany(function(ft,Tt){new Hs.Z(Tt,ft,function(xt){return i[xt].data.getId(i[xt].dataIndex)},function(xt){return s[xt].data.getId(s[xt].dataIndex)}).update(function(xt,At){Q(ft[xt],Tt[At])}).execute()}).execute(),v&&(0,_.each)(r,function(ft){var xt=ft.data.hostModel,At=xt&&e.getViewOfSeriesModel(xt),It=(0,he.ke)("update",xt,0);At&&xt.isAnimationEnabled()&&It&&It.duration>0&&At.group.traverse(function(Nt){Nt instanceof mt.ZP&&!Nt.animators.length&&Nt.animateFrom({style:{opacity:0}},It)})})}function oS(o){return o.getModel("universalTransition").get("seriesKey")||o.id}function sS(o){return(0,_.isArray)(o)?o.sort().join(","):o}function Gu(o){if(o.hostModel)return o.hostModel.getModel("universalTransition").get("divideShape")}function lS(o,r){for(var e=0;e<o.length;e++)if(null!=r.seriesIndex&&r.seriesIndex===o[e].seriesIndex||null!=r.seriesId&&r.seriesId===o[e].id)return e}var NO=D(8130);(0,B.D)([n.N]),(0,B.D)([function si(o){o.registerPainter("svg",Xl)}]),(0,B.D)([function al(o){o.registerChartView(qo),o.registerSeriesModel(Yr),o.registerLayout(oo("line",!0)),o.registerVisual({seriesType:"line",reset:function(r){var e=r.getData(),i=r.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",i)}}),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,Os("line"))},function cl(o){o.registerChartView(ku),o.registerSeriesModel(ui),o.registerLayout(o.PRIORITY.VISUAL.LAYOUT,_.curry(Ui.bK,"bar")),o.registerLayout(o.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,Ui.Bk)("bar")),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,Os("bar")),o.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,e){e.eachComponent({mainType:r.componentType||"series",query:r},function(s){r.sortInfo&&s.axis.setCategorySortInfo(r.sortInfo)})})},function Gn(o){o.registerChartView(Me),o.registerSeriesModel(_n),(0,na.y)("pie",o.registerAction),o.registerLayout((0,_.curry)(hl,"pie")),o.registerProcessor(Ro("pie")),o.registerProcessor(function on(o){return{seriesType:o,reset:function(r,e){var i=r.getData();i.filterSelf(function(s){var l=i.mapDimension("value"),c=i.get(l,s);return!((0,_.isNumber)(c)&&!isNaN(c)&&c<0)})}}}("pie"))},function Xf(o){(0,B.D)(gh),o.registerSeriesModel(jn),o.registerChartView(eh),o.registerLayout(oo("scatter"))},function rd(o){(0,B.D)(ed),o.registerChartView(oa),o.registerSeriesModel(vi),o.registerLayout(mn),o.registerProcessor(Ro("radar")),o.registerPreprocessor(Yf)},function Ih(o){(0,B.D)(gu),o.registerChartView(Bt),o.registerSeriesModel(_e),o.registerLayout(je),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,Xe),(0,na.y)("map",o.registerAction)},function yg(o){o.registerChartView(cd),o.registerSeriesModel(yn),o.registerLayout(mg),o.registerVisual(Zp),function Us(o){o.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(r,e){e.eachComponent({mainType:"series",subType:"tree",query:r},function(i){var s=r.dataIndex,c=i.getData().tree.getNodeByDataIndex(s);c.isExpand=!c.isExpand})}),o.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(r,e,i){e.eachComponent({mainType:"series",subType:"tree",query:r},function(s){var c=Zn(s.coordinateSystem,r,void 0,i);s.setCenter&&s.setCenter(c.center),s.setZoom&&s.setZoom(c.zoom)})})}(o)},function Xp(o){o.registerSeriesModel(_d),o.registerChartView(Lg),o.registerVisual(Tu),o.registerLayout(Bg),function xg(o){for(var r=0;r<Fp.length;r++)o.registerAction({type:Fp[r],update:"updateView"},_.noop);o.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,i){i.eachComponent({mainType:"series",subType:"treemap",query:e},function s(l,c){var p=Ac(e,["treemapZoomToNode","treemapRootToNode"],l);if(p){var v=l.getViewRoot();v&&(e.direction=fd(v,p.node)?"rollUp":"drillDown"),l.resetViewRoot(p.node)}})})}(o)},function i_(o){o.registerChartView(sv),o.registerSeriesModel(r_),o.registerProcessor(Yp),o.registerVisual(Kp),o.registerVisual(Nl),o.registerLayout(jh),o.registerLayout(o.PRIORITY.VISUAL.POST_CHART_LAYOUT,$g),o.registerLayout(Yg),o.registerCoordinateSystem("graphView",{dimensions:ei.dimensions,create:jg}),o.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},_.noop),o.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},_.noop),o.registerAction(n_,function(r,e,i){e.eachComponent({mainType:"series",query:r},function(s){var c=Zn(s.coordinateSystem,r,void 0,i);s.setCenter&&s.setCenter(c.center),s.setZoom&&s.setZoom(c.zoom)})})},function h_(o){o.registerChartView(l_),o.registerSeriesModel(c_)},function __(o){o.registerChartView(d_),o.registerSeriesModel(v_),o.registerLayout(bu),o.registerProcessor(Ro("funnel"))},function X_(o){(0,B.D)(Iv),o.registerChartView(y_),o.registerSeriesModel(C_),o.registerVisual(o.PRIORITY.VISUAL.BRUSH,P_)},function a(o){o.registerChartView(J_),o.registerSeriesModel(q_),o.registerLayout(vp),o.registerVisual(t),o.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(r,e){e.eachComponent({mainType:"series",subType:"sankey",query:r},function(i){i.setNodePosition(r.dataIndex,[r.localX,r.localY])})})},function ge(o){o.registerSeriesModel(g),o.registerChartView(bt),o.registerLayout(Et),o.registerTransform(me)},function zo(o){o.registerChartView(wn),o.registerSeriesModel(Kn),o.registerPreprocessor(Dn),o.registerVisual(ua),o.registerLayout(ki)},function vS(o){o.registerChartView(fS),o.registerSeriesModel(pS),o.registerLayout(oo("effectScatter"))},function IS(o){o.registerChartView(AS),o.registerSeriesModel(DS),o.registerLayout(km),o.registerVisual(NS)},function VS(o){o.registerChartView(zS),o.registerSeriesModel(HS)},function nT(o){o.registerChartView(tT),o.registerSeriesModel(rT),o.registerLayout(o.PRIORITY.VISUAL.LAYOUT,(0,_.curry)(Ui.bK,"pictorialBar")),o.registerLayout(o.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,Ui.Bk)("pictorialBar"))},function hT(o){o.registerChartView(oT),o.registerSeriesModel(lT),o.registerLayout(uT),o.registerProcessor(Ro("themeRiver"))},function MT(o){o.registerChartView(mT),o.registerSeriesModel(xT),o.registerLayout((0,_.curry)(ST,"sunburst")),o.registerProcessor((0,_.curry)(Ro,"sunburst")),o.registerVisual(CT),function gT(o){o.registerAction({type:_0,update:"updateView"},function(r,e){e.eachComponent({mainType:"series",subType:"sunburst",query:r},function i(s,l){var c=Ac(r,[_0],s);if(c){var f=s.getViewRoot();f&&(r.direction=fd(f,c.node)?"rollUp":"drillDown"),s.resetViewRoot(c.node)}})}),o.registerAction({type:i1,update:"none"},function(r,e,i){r=(0,_.extend)({},r),e.eachComponent({mainType:"series",subType:"sunburst",query:r},function s(l){var c=Ac(r,[i1],l);c&&(r.dataIndex=c.node.dataIndex)}),i.dispatchAction((0,_.extend)(r,{type:"highlight"}))}),o.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(r,e,i){r=(0,_.extend)({},r),i.dispatchAction((0,_.extend)(r,{type:"downplay"}))})}(o)},function c2(o){o.registerChartView(qT),o.registerSeriesModel(AT)}]),(0,B.D)(function N2(o){(0,B.D)(gh),(0,B.D)(mp)}),(0,B.D)(function pC(o){(0,B.D)(mp),as.registerAxisPointerClass("PolarAxisPointer",G2),o.registerCoordinateSystem("polar",J2),o.registerComponentModel(F2),o.registerComponentView(dC),Is(o,"angle",k2,hC),Is(o,"radius",z2,fC),o.registerComponentView(eC),o.registerComponentView(sC),o.registerLayout((0,_.curry)(cC,"bar"))}),(0,B.D)(gu),(0,B.D)(function LC(o){(0,B.D)(mp),as.registerAxisPointerClass("SingleAxisPointer",wC),o.registerComponentView(DC),o.registerComponentView(yC),o.registerComponentModel(z0),Is(o,"single",z0,z0.defaultOption),o.registerCoordinateSystem("single",PC)}),(0,B.D)(Iv),(0,B.D)(function FC(o){o.registerComponentModel(IC),o.registerComponentView(BC),o.registerCoordinateSystem("calendar",ZC)}),(0,B.D)(function YC(o){o.registerComponentModel(VC),o.registerComponentView(WC),o.registerPreprocessor(function(r){var e=r.graphic;(0,_.isArray)(e)?r.graphic=e[0]&&e[0].elements?[r.graphic[0]]:[{elements:e}]:e&&!e.elements&&(r.graphic=[{elements:[e]}])})}),(0,B.D)(function JM(o){o.registerComponentModel(dM),o.registerComponentView(_M),mf("saveAsImage",yM),mf("magicType",TM),mf("dataView",NM),mf("dataZoom",jM),mf("restore",FM),(0,B.D)(hM)}),(0,B.D)(function Sb(o){(0,B.D)(mp),o.registerComponentModel(qM),o.registerComponentView(xb),o.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},_.noop),o.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},_.noop)}),(0,B.D)(mp),(0,B.D)(function zb(o){o.registerComponentView(Ib),o.registerComponentModel(Gb),o.registerPreprocessor(Cb),o.registerVisual(o.PRIORITY.VISUAL.BRUSH,Ob),o.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(r,e){e.eachComponent({mainType:"brush",query:r},function(i){i.setAreas(r.areas)})}),o.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},_.noop),o.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},_.noop),mf("brush",kb)}),(0,B.D)(function Vb(o){o.registerComponentModel(Ub),o.registerComponentView(Hb)}),(0,B.D)(function sP(o){o.registerComponentModel($b),o.registerComponentView(nP),o.registerSubTypeDefaulter("timeline",function(){return"slider"}),function iP(o){o.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(r,e,i){var s=e.getComponent("timeline");return s&&null!=r.currentIndex&&(s.setCurrentIndex(r.currentIndex),!s.get("loop",!0)&&s.isIndexMax()&&s.getPlayState()&&(s.setPlayState(!1),i.dispatchAction({type:"timelinePlayChange",playState:!1,from:r.from}))),e.resetOption("timeline",{replaceMerge:s.get("replaceMerge",!0)}),(0,_.defaults)({currentIndex:s.option.currentIndex},r)}),o.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(r,e){var i=e.getComponent("timeline");i&&null!=r.playState&&i.setPlayState(r.playState)})}(o),o.registerPreprocessor(aP)}),(0,B.D)(function _P(o){o.registerComponentModel(uP),o.registerComponentView(gP),o.registerPreprocessor(function(r){om(r.series,"markPoint")&&(r.markPoint=r.markPoint||{})})}),(0,B.D)(function bP(o){o.registerComponentModel(yP),o.registerComponentView(MP),o.registerPreprocessor(function(r){om(r.series,"markLine")&&(r.markLine=r.markLine||{})})}),(0,B.D)(function NP(o){o.registerComponentModel(AP),o.registerComponentView(LP),o.registerPreprocessor(function(r){om(r.series,"markArea")&&(r.markArea=r.markArea||{})})}),(0,B.D)(function XP(o){(0,B.D)(fx),(0,B.D)($P)}),(0,B.D)(function vA(o){(0,B.D)(_x),(0,B.D)(Sx)}),(0,B.D)(_x),(0,B.D)(Sx),(0,B.D)(function UA(o){(0,B.D)(Zx),(0,B.D)(kx)}),(0,B.D)(Zx),(0,B.D)(kx),(0,B.D)(function XA(o){o.registerPreprocessor($A),o.registerVisual(o.PRIORITY.VISUAL.ARIA,WA)}),(0,B.D)(function oO(o){o.registerTransform(iO),o.registerTransform(aO)}),(0,B.D)(sO.N),(0,B.D)(function LO(o){o.registerUpdateLifecycle("series:beforeupdate",function(r,e,i){(0,_.each)((0,dr.kF)(i.seriesTransition),function(s){(0,_.each)((0,dr.kF)(s.to),function(l){for(var c=i.updatedSeries,f=0;f<c.length;f++)(null!=l.seriesIndex&&l.seriesIndex===c[f].seriesIndex||null!=l.seriesId&&l.seriesId===c[f].id)&&(c[f][rr.V]=!0)})})}),o.registerUpdateLifecycle("series:transition",function(r,e,i){var s=PO(e);if(s.oldSeries&&i.updatedSeries&&i.optionChanged){var l=i.seriesTransition;if(l)(0,_.each)((0,dr.kF)(l),function(O){!function DO(o,r,e,i){var s=[],l=[];(0,_.each)((0,dr.kF)(o.from),function(c){var f=lS(r.oldSeries,c);f>=0&&s.push({dataGroupId:r.oldDataGroupIds[f],data:r.oldData[f],divide:Gu(r.oldData[f]),dim:c.dimension})}),(0,_.each)((0,dr.kF)(o.to),function(c){var f=lS(e.updatedSeries,c);if(f>=0){var p=e.updatedSeries[f].getData();l.push({dataGroupId:r.oldDataGroupIds[f],data:p,divide:Gu(p),dim:c.dimension})}}),s.length>0&&l.length>0&&aS(s,l,i)}(O,s,i,e)});else{var c=function wO(o,r){var e=(0,_.createHashMap)(),i=(0,_.createHashMap)(),s=(0,_.createHashMap)();return(0,_.each)(o.oldSeries,function(c,f){var p=o.oldDataGroupIds[f],v=o.oldData[f],m=oS(c),x=sS(m);i.set(x,{dataGroupId:p,data:v}),(0,_.isArray)(m)&&(0,_.each)(m,function(T){s.set(T,{key:x,dataGroupId:p,data:v})})}),(0,_.each)(r.updatedSeries,function(c){if(c.isUniversalTransitionEnabled()&&c.isAnimationEnabled()){var f=c.get("dataGroupId"),p=c.getData(),v=oS(c),m=sS(v),x=i.get(m);if(x)e.set(m,{oldSeries:[{dataGroupId:x.dataGroupId,divide:Gu(x.data),data:x.data}],newSeries:[{dataGroupId:f,divide:Gu(p),data:p}]});else if((0,_.isArray)(v)){var T=[];(0,_.each)(v,function(F){var Q=i.get(F);Q.data&&T.push({dataGroupId:Q.dataGroupId,divide:Gu(Q.data),data:Q.data})}),T.length&&e.set(m,{oldSeries:T,newSeries:[{dataGroupId:f,data:p,divide:Gu(p)}]})}else{var O=s.get(v);if(O){var G=e.get(O.key);G||(G={oldSeries:[{dataGroupId:O.dataGroupId,data:O.data,divide:Gu(O.data)}],newSeries:[]},e.set(O.key,G)),G.newSeries.push({dataGroupId:f,data:p,divide:Gu(p)})}}}}),e}(s,i);(0,_.each)(c.keys(),function(O){var G=c.get(O);aS(G.oldSeries,G.newSeries,e)})}(0,_.each)(i.updatedSeries,function(O){O[rr.V]&&(O[rr.V]=!1)})}for(var f=r.getSeries(),p=s.oldSeries=[],v=s.oldDataGroupIds=[],m=s.oldData=[],x=0;x<f.length;x++){var T=f[x].getData();T.count()<1e4&&(p.push(f[x]),v.push(f[x].get("dataGroupId")),m.push(T))}})}),(0,B.D)(NO.T)},3996:(Ze,te,D)=>{D.d(te,{D:()=>gt,KZ:()=>yt,XD:()=>q,Zi:()=>N,_W:()=>et,bX:()=>k,eq:()=>V,ke:()=>_t});var B=D(6615),n=(0,D(1617).Yf)();function _t($,st,K,_,j){var it;if(st&&st.ecModel){var z=st.ecModel.getUpdatePayload();it=z&&z.animation}var J="update"===$;if(st&&st.isAnimationEnabled()){var Y=void 0,nt=void 0,U=void 0;return _?(Y=(0,B.retrieve2)(_.duration,200),nt=(0,B.retrieve2)(_.easing,"cubicOut"),U=0):(Y=st.getShallow(J?"animationDurationUpdate":"animationDuration"),nt=st.getShallow(J?"animationEasingUpdate":"animationEasing"),U=st.getShallow(J?"animationDelayUpdate":"animationDelay")),it&&(null!=it.duration&&(Y=it.duration),null!=it.easing&&(nt=it.easing),null!=it.delay&&(U=it.delay)),(0,B.isFunction)(U)&&(U=U(K,j)),(0,B.isFunction)(Y)&&(Y=Y(K)),{duration:Y||0,delay:U,easing:nt}}return null}function mt($,st,K,_,j,it,z){var J,tt=!1;(0,B.isFunction)(j)?(z=it,it=j,j=null):(0,B.isObject)(j)&&(it=j.cb,z=j.during,tt=j.isFrom,J=j.removeOpt,j=j.dataIndex);var Y="leave"===$;Y||st.stopAnimation("leave");var nt=_t($,_,j,Y?J||{}:null,_&&_.getAnimationDelayParams?_.getAnimationDelayParams(st,j):null);if(nt&&nt.duration>0){var I={duration:nt.duration,delay:nt.delay||0,easing:nt.easing,done:it,force:!!it||!!z,setToFinal:!Y,scope:$,during:z};tt?st.animateFrom(K,I):st.animateTo(K,I)}else st.stopAnimation(),!tt&&st.attr(K),z&&z(1),it&&it()}function gt($,st,K,_,j,it){mt("update",$,st,K,_,j,it)}function yt($,st,K,_,j,it){mt("enter",$,st,K,_,j,it)}function V($){if(!$.__zr)return!0;for(var st=0;st<$.animators.length;st++)if("leave"===$.animators[st].scope)return!0;return!1}function k($,st,K,_,j,it){V($)||mt("leave",$,st,K,_,j,it)}function X($,st,K,_){$.removeTextContent(),$.removeTextGuideLine(),k($,{style:{opacity:0}},st,K,_)}function q($,st,K){function _(){$.parent&&$.parent.remove($)}$.isGroup?$.traverse(function(j){j.isGroup||X(j,st,K,_)}):X($,st,K,_)}function N($){n($).oldStyle=$.style}function et($){return n($).oldStyle}},9104:(Ze,te,D)=>{D.d(te,{Z:()=>St});var B=D(1617);function St(){var n=(0,B.Yf)();return function(_t){var mt=n(_t),gt=_t.pipelineContext,yt=!!mt.large,V=!!mt.progressiveRender,k=mt.large=!(!gt||!gt.large),X=mt.progressiveRender=!(!gt||!gt.progressiveRender);return(yt!==k||V!==X)&&"reset"}}},6382:(Ze,te,D)=>{D.d(te,{Z:()=>z});var B=D(6615),St=D(8997),n=D(1440),_t=D(2747),mt=D(1617),gt=D(1792),yt=function tt(J){this.coordSysDims=[],this.axisMap=(0,B.createHashMap)(),this.categoryAxisMap=(0,B.createHashMap)(),this.coordSysName=J},k={cartesian2d:function(tt,J,Y,nt){var U=tt.getReferringComponents("xAxis",mt.C6).models[0],w=tt.getReferringComponents("yAxis",mt.C6).models[0];J.coordSysDims=["x","y"],Y.set("x",U),Y.set("y",w),X(U)&&(nt.set("x",U),J.firstCategoryDimIndex=0),X(w)&&(nt.set("y",w),null==J.firstCategoryDimIndex&&(J.firstCategoryDimIndex=1))},singleAxis:function(tt,J,Y,nt){var U=tt.getReferringComponents("singleAxis",mt.C6).models[0];J.coordSysDims=["single"],Y.set("single",U),X(U)&&(nt.set("single",U),J.firstCategoryDimIndex=0)},polar:function(tt,J,Y,nt){var U=tt.getReferringComponents("polar",mt.C6).models[0],w=U.findAxisModel("radiusAxis"),C=U.findAxisModel("angleAxis");J.coordSysDims=["radius","angle"],Y.set("radius",w),Y.set("angle",C),X(w)&&(nt.set("radius",w),J.firstCategoryDimIndex=0),X(C)&&(nt.set("angle",C),null==J.firstCategoryDimIndex&&(J.firstCategoryDimIndex=1))},geo:function(tt,J,Y,nt){J.coordSysDims=["lng","lat"]},parallel:function(tt,J,Y,nt){var U=tt.ecModel,w=U.getComponent("parallel",tt.get("parallelIndex")),C=J.coordSysDims=w.dimensions.slice();(0,B.each)(w.parallelAxisIndex,function(I,P){var M=U.getComponent("parallelAxis",I),A=C[P];Y.set(A,M),X(M)&&(nt.set(A,M),null==J.firstCategoryDimIndex&&(J.firstCategoryDimIndex=P))})}};function X(tt){return"category"===tt.get("type")}var q=D(2671),N=D(3593),et=D(7458),$=D(4143);const z=function _(tt,J,Y){Y=Y||{};var U,nt=J.getSourceManager(),w=!1;tt?(w=!0,U=(0,q.nx)(tt)):w=(U=nt.getSource()).sourceFormat===$.cy;var C=function V(tt){var J=tt.get("coordinateSystem"),Y=new yt(J),nt=k[J];if(nt)return nt(tt,Y,Y.axisMap,Y.categoryAxisMap),Y}(J),I=function st(tt,J){var U,Y=tt.get("coordinateSystem"),nt=gt.Z.get(Y);return J&&J.coordSysDims&&(U=B.map(J.coordSysDims,function(w){var C={name:w},I=J.axisMap.get(w);if(I){var P=I.get("type");C.type=(0,_t.T)(P)}return C})),U||(U=nt&&(nt.getDimensionsInfo?nt.getDimensionsInfo():nt.dimensions.slice())||["x","y"]),U}(J,C),P=Y.useEncodeDefaulter,M=B.isFunction(P)?P:P?B.curry(et.pY,I,J):null,A={coordDimensions:I,generateCoord:Y.generateCoord,encodeDefine:J.getEncode(),encodeDefaulter:M,canOmitUnusedDimensions:!w},R=(0,n.Z)(U,A),Z=function K(tt,J,Y){var nt,U;return Y&&B.each(tt,function(w,C){var P=Y.categoryAxisMap.get(w.coordDim);P&&(null==nt&&(nt=C),w.ordinalMeta=P.getOrdinalMeta(),J&&(w.createInvertedIndices=!0)),null!=w.otherDims.itemName&&(U=!0)}),!U&&null!=nt&&(tt[nt].otherDims.itemName=0),nt}(R.dimensions,Y.createInvertedIndices,C),rt=w?null:nt.getSharedDataStore(R),ot=(0,N.BM)(J,{schema:R,store:rt}),at=new St.Z(R,J);at.setCalculationInfo(ot);var lt=null!=Z&&function j(tt){if(tt.sourceFormat===$.cy){var J=function it(tt){for(var J=0;J<tt.length&&null==tt[J];)J++;return tt[J]}(tt.data||[]);return!B.isArray((0,mt.C4)(J))}}(U)?function(ht,vt,ct,dt){return dt===Z?ct:this.defaultDimValueGetter(ht,vt,ct,dt)}:null;return at.hasItemOption=!1,at.initData(w?U:rt,null,lt),at}},3808:(Ze,te,D)=>{D.d(te,{N:()=>V});var B=D(8299),St=D(2310),n=D(3785),_t=D(4143),mt=D(5495),gt=function(k){function X(){var q=null!==k&&k.apply(this,arguments)||this;return q.type="dataset",q}return(0,B.ZT)(X,k),X.prototype.init=function(q,N,et){k.prototype.init.call(this,q,N,et),this._sourceManager=new mt.U(this),(0,mt.t)(this)},X.prototype.mergeOption=function(q,N){k.prototype.mergeOption.call(this,q,N),(0,mt.t)(this)},X.prototype.optionUpdated=function(){this._sourceManager.dirty()},X.prototype.getSourceManager=function(){return this._sourceManager},X.type="dataset",X.defaultOption={seriesLayoutBy:_t.fY},X}(St.Z),yt=function(k){function X(){var q=null!==k&&k.apply(this,arguments)||this;return q.type="dataset",q}return(0,B.ZT)(X,k),X.type="dataset",X}(n.Z);function V(k){k.registerComponentModel(gt),k.registerComponentView(yt)}},4867:(Ze,te,D)=>{D.d(te,{w:()=>mt});var B=D(6615),St=D(3894),n=D(4727),_t=D(1617);function mt(yt){var _,j,it,z,V=yt.series,k=yt.dataIndex,X=yt.multipleSeries,q=V.getData(),N=q.mapDimensionsAll("defaultedTooltip"),et=N.length,$=V.getRawValue(k),st=(0,B.isArray)($),K=(0,St.jT)(V,k);if(et>1||st&&!et){var tt=function gt(yt,V,k,X,q){var N=V.getData(),et=(0,B.reduce)(yt,function(j,it,z){var tt=N.getDimensionInfo(z);return j||tt&&!1!==tt.tooltip&&null!=tt.displayName},!1),$=[],st=[],K=[];function _(j,it){var z=N.getDimensionInfo(it);!z||!1===z.otherDims.tooltip||(et?K.push((0,St.TX)("nameValue",{markerType:"subItem",markerColor:q,name:z.displayName,value:j,valueType:z.type})):($.push(j),st.push(z.type)))}return X.length?(0,B.each)(X,function(j){_((0,n.hk)(N,k,j),j)}):(0,B.each)(yt,_),{inlineValues:$,inlineValueTypes:st,blocks:K}}($,V,k,N,K);_=tt.inlineValues,j=tt.inlineValueTypes,it=tt.blocks,z=tt.inlineValues[0]}else if(et){var J=q.getDimensionInfo(N[0]);z=_=(0,n.hk)(q,k,N[0]),j=J.type}else z=_=st?$[0]:$;var Y=(0,_t.yu)(V),nt=Y&&V.name||"",U=q.getName(k),w=X?nt:U;return(0,St.TX)("section",{header:nt,noHeader:X||!Y,sortParam:z,blocks:[(0,St.TX)("nameValue",{markerType:"item",markerColor:K,name:w,noName:!(0,B.trim)(w),value:_,valueType:j})].concat(it||[])})}},3894:(Ze,te,D)=>{D.d(te,{BY:()=>K,TX:()=>X,d_:()=>nt,iv:()=>U,jT:()=>Y});var B=D(5917),St=D(2977),n=D(6615),_t=D(6566),mt=D(8301),gt="line-height:1";function yt(w,C){var I=w.color||"#6e7079",P=w.fontSize||12,M=w.fontWeight||"400",A=w.color||"#464646",R=w.fontSize||14,Z=w.fontWeight||"900";return"html"===C?{nameStyle:"font-size:"+(0,B.F1)(P+"")+"px;color:"+(0,B.F1)(I)+";font-weight:"+(0,B.F1)(M+""),valueStyle:"font-size:"+(0,B.F1)(R+"")+"px;color:"+(0,B.F1)(A)+";font-weight:"+(0,B.F1)(Z+"")}:{nameStyle:{fontSize:P,fill:I,fontWeight:M},valueStyle:{fontSize:R,fill:A,fontWeight:Z}}}var V=[0,10,20,30],k=["","\n","\n\n","\n\n\n"];function X(w,C){return C.type=w,C}function q(w){return"section"===w.type}function N(w){return q(w)?$:st}function et(w){if(q(w)){var C=0,I=w.blocks.length,P=I>1||I>0&&!w.noHeader;return(0,n.each)(w.blocks,function(M){var A=et(M);A>=C&&(C=A+ +(P&&(!A||q(M)&&!M.noHeader)))}),C}return 0}function $(w,C,I,P){var M=C.noHeader,A=function _(w){return{html:V[w],richText:k[w]}}(et(C)),R=[],Z=C.blocks||[];(0,n.assert)(!Z||(0,n.isArray)(Z)),Z=Z||[];var rt=w.orderMode;if(C.sortBlocks&&rt){Z=Z.slice();var ot={valueAsc:"asc",valueDesc:"desc"};if((0,n.hasOwn)(ot,rt)){var at=new _t.ID(ot[rt],null);Z.sort(function(ct,dt){return at.evaluate(ct.sortParam,dt.sortParam)})}else"seriesDesc"===rt&&Z.reverse()}(0,n.each)(Z,function(ct,dt){var Mt=C.valueFormatter,Pt=N(ct)(Mt?(0,n.extend)((0,n.extend)({},w),{valueFormatter:Mt}):w,ct,dt>0?A.html:0,P);null!=Pt&&R.push(Pt)});var lt="richText"===w.renderMode?R.join(A.richText):j(R.join(""),M?I:A.html);if(M)return lt;var ht=(0,St.uX)(C.header,"ordinal",w.useUTC),vt=yt(P,w.renderMode).nameStyle;return"richText"===w.renderMode?tt(w,ht,vt)+A.richText+lt:j('<div style="'+vt+";"+gt+';">'+(0,B.F1)(ht)+"</div>"+lt,I)}function st(w,C,I,P){var M=w.renderMode,A=C.noName,R=C.noValue,Z=!C.markerType,rt=C.name,ot=w.useUTC,at=C.valueFormatter||w.valueFormatter||function(Ft){return Ft=(0,n.isArray)(Ft)?Ft:[Ft],(0,n.map)(Ft,function(Ut,kt){return(0,St.uX)(Ut,(0,n.isArray)(vt)?vt[kt]:vt,ot)})};if(!A||!R){var lt=Z?"":w.markupStyleCreator.makeTooltipMarker(C.markerType,C.markerColor||"#333",M),ht=A?"":(0,St.uX)(rt,"ordinal",ot),vt=C.valueType,ct=R?[]:at(C.value),dt=!Z||!A,Mt=!Z&&A,Pt=yt(P,M),wt=Pt.nameStyle,Ot=Pt.valueStyle;return"richText"===M?(Z?"":lt)+(A?"":tt(w,ht,wt))+(R?"":function J(w,C,I,P,M){var A=[M];return I&&A.push({padding:[0,0,0,P?10:20],align:"right"}),w.markupStyleCreator.wrapRichTextStyle((0,n.isArray)(C)?C.join("  "):C,A)}(w,ct,dt,Mt,Ot)):j((Z?"":lt)+(A?"":function it(w,C,I){return'<span style="'+I+";"+(C?"margin-left:2px":"")+'">'+(0,B.F1)(w)+"</span>"}(ht,!Z,wt))+(R?"":function z(w,C,I,P){var A=C?"float:right;margin-left:"+(I?"10px":"20px"):"";return w=(0,n.isArray)(w)?w:[w],'<span style="'+A+";"+P+'">'+(0,n.map)(w,function(R){return(0,B.F1)(R)}).join("&nbsp;&nbsp;")+"</span>"}(ct,dt,Mt,Ot)),I)}}function K(w,C,I,P,M,A){if(w)return N(w)({useUTC:M,renderMode:I,orderMode:P,markupStyleCreator:C,valueFormatter:w.valueFormatter},w,0,A)}function j(w,C){return'<div style="margin: '+C+"px 0 0;"+gt+';">'+w+'<div style="clear:both"></div></div>'}function tt(w,C,I){return w.markupStyleCreator.wrapRichTextStyle(C,I)}function Y(w,C){var I=w.getData().getItemVisual(C,"style");return(0,St.Lz)(I[w.visualDrawType])}function nt(w,C){return w.get("padding")??("richText"===C?[8,10]:10)}var U=function(){function w(){this.richTextStyles={},this._nextStyleNameId=(0,mt.jj)()}return w.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},w.prototype.makeTooltipMarker=function(C,I,P){var M="richText"===P?this._generateStyleName():null,A=(0,St.A0)({color:I,type:C,renderMode:P,markerId:M});return(0,n.isString)(A)?A:(this.richTextStyles[M]=A.style,A.content)},w.prototype.wrapRichTextStyle=function(C,I){var P={};(0,n.isArray)(I)?(0,n.each)(I,function(A){return(0,n.extend)(P,A)}):(0,n.extend)(P,I);var M=this._generateStyleName();return this.richTextStyles[M]=P,"{"+M+"|"+C+"}"},w}()},3525:(Ze,te,D)=>{D.d(te,{Z:()=>U});var B=D(6615),St=D(8301),n=D(585),_t=D(1617),mt=D(6122),gt=(0,_t.Yf)();function X(w,C){var A,R,I=et(w,"labels"),P=(0,mt.rk)(C);return $(I,P)||(B.isFunction(P)?A=z(w,P):(R="auto"===P?function K(w){return gt(w).autoInterval??(gt(w).autoInterval=w.calculateCategoryInterval())}(w):P,A=it(w,R)),st(I,P,{labels:A,labelCategoryInterval:R}))}function et(w,C){return gt(w)[C]||(gt(w)[C]=[])}function $(w,C){for(var I=0;I<w.length;I++)if(w[I].key===C)return w[I].value}function st(w,C,I){return w.push({key:C,value:I}),I}function it(w,C,I){var P=(0,mt.J9)(w),M=w.scale,A=M.getExtent(),R=w.getLabelModel(),Z=[],rt=Math.max((C||0)+1,1),ot=A[0],at=M.count();0!==ot&&rt>1&&at/rt>2&&(ot=Math.round(Math.ceil(ot/rt)*rt));var lt=(0,mt.WY)(w),ht=R.get("showMinLabel")||lt,vt=R.get("showMaxLabel")||lt;ht&&ot!==A[0]&&dt(A[0]);for(var ct=ot;ct<=A[1];ct+=rt)dt(ct);function dt(Mt){var Pt={value:Mt};Z.push(I?Mt:{formattedLabel:P(Pt),rawLabel:M.getLabel(Pt),tickValue:Mt})}return vt&&ct-rt!==A[1]&&dt(A[1]),Z}function z(w,C,I){var P=w.scale,M=(0,mt.J9)(w),A=[];return B.each(P.getTicks(),function(R){var Z=P.getLabel(R),rt=R.value;C(R.value,Z)&&A.push(I?rt:{formattedLabel:M(R),rawLabel:Z,tickValue:rt})}),A}var tt=[0,1];function Y(w,C){var M=(w[1]-w[0])/C/2;w[0]+=M,w[1]-=M}const U=function(){function w(C,I,P){this.onBand=!1,this.inverse=!1,this.dim=C,this.scale=I,this._extent=P||[0,0]}return w.prototype.contain=function(C){var I=this._extent,P=Math.min(I[0],I[1]),M=Math.max(I[0],I[1]);return C>=P&&C<=M},w.prototype.containData=function(C){return this.scale.contain(C)},w.prototype.getExtent=function(){return this._extent.slice()},w.prototype.getPixelPrecision=function(C){return(0,St.M9)(C||this.scale.getExtent(),this._extent)},w.prototype.setExtent=function(C,I){var P=this._extent;P[0]=C,P[1]=I},w.prototype.dataToCoord=function(C,I){var P=this._extent,M=this.scale;return C=M.normalize(C),this.onBand&&"ordinal"===M.type&&Y(P=P.slice(),M.count()),(0,St.NU)(C,tt,P,I)},w.prototype.coordToData=function(C,I){var P=this._extent,M=this.scale;this.onBand&&"ordinal"===M.type&&Y(P=P.slice(),M.count());var A=(0,St.NU)(C,P,tt,I);return this.scale.scale(A)},w.prototype.pointToData=function(C,I){},w.prototype.getTicksCoords=function(C){var I=(C=C||{}).tickModel||this.getTickModel(),P=function V(w,C){return"category"===w.type?function q(w,C){var A,R,I=et(w,"ticks"),P=(0,mt.rk)(C),M=$(I,P);if(M)return M;if((!C.get("show")||w.scale.isBlank())&&(A=[]),B.isFunction(P))A=z(w,P,!0);else if("auto"===P){var Z=X(w,w.getLabelModel());R=Z.labelCategoryInterval,A=B.map(Z.labels,function(rt){return rt.tickValue})}else A=it(w,R=P,!0);return st(I,P,{ticks:A,tickCategoryInterval:R})}(w,C):{ticks:B.map(w.scale.getTicks(),function(I){return I.value})}}(this,I),A=(0,B.map)(P.ticks,function(Z){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(Z):Z),tickValue:Z}},this);return function nt(w,C,I,P){var M=C.length;if(w.onBand&&!I&&M){var R,A=w.getExtent();if(1===M)C[0].coord=A[0],R=C[1]={coord:A[0]};else{var ot=(C[M-1].coord-C[0].coord)/(C[M-1].tickValue-C[0].tickValue);(0,B.each)(C,function(vt){vt.coord-=ot/2});var at=w.scale.getExtent();C.push(R={coord:C[M-1].coord+ot*(1+at[1]-C[M-1].tickValue)})}var lt=A[0]>A[1];ht(C[0].coord,A[0])&&(P?C[0].coord=A[0]:C.shift()),P&&ht(A[0],C[0].coord)&&C.unshift({coord:A[0]}),ht(A[1],R.coord)&&(P?R.coord=A[1]:C.pop()),P&&ht(R.coord,A[1])&&C.push({coord:A[1]})}function ht(vt,ct){return vt=(0,St.NM)(vt),ct=(0,St.NM)(ct),lt?vt>ct:vt<ct}}(this,A,I.get("alignWithLabel"),C.clamp),A},w.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var I=this.model.getModel("minorTick").get("splitNumber");I>0&&I<100||(I=5);var P=this.scale.getMinorTicks(I);return(0,B.map)(P,function(A){return(0,B.map)(A,function(R){return{coord:this.dataToCoord(R),tickValue:R}},this)},this)},w.prototype.getViewLabels=function(){return function yt(w){return"category"===w.type?function k(w){var C=w.getLabelModel(),I=X(w,C);return!C.get("show")||w.scale.isBlank()?{labels:[],labelCategoryInterval:I.labelCategoryInterval}:I}(w):function N(w){var C=w.scale.getTicks(),I=(0,mt.J9)(w);return{labels:B.map(C,function(P,M){return{level:P.level,formattedLabel:I(P,M),rawLabel:w.scale.getLabel(P),tickValue:P.value}})}}(w)}(this).labels},w.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},w.prototype.getTickModel=function(){return this.model.getModel("axisTick")},w.prototype.getBandWidth=function(){var C=this._extent,I=this.scale.getExtent(),P=I[1]-I[0]+(this.onBand?1:0);0===P&&(P=1);var M=Math.abs(C[1]-C[0]);return Math.abs(M)/P},w.prototype.calculateCategoryInterval=function(){return function _(w){var C=function j(w){var C=w.getLabelModel();return{axisRotate:w.getRotate?w.getRotate():w.isHorizontal&&!w.isHorizontal()?90:0,labelRotate:C.get("rotate")||0,font:C.getFont()}}(w),I=(0,mt.J9)(w),P=(C.axisRotate-C.labelRotate)/180*Math.PI,M=w.scale,A=M.getExtent(),R=M.count();if(A[1]-A[0]<1)return 0;var Z=1;R>40&&(Z=Math.max(1,Math.floor(R/40)));for(var rt=A[0],ot=w.dataToCoord(rt+1)-w.dataToCoord(rt),at=Math.abs(ot*Math.cos(P)),lt=Math.abs(ot*Math.sin(P)),ht=0,vt=0;rt<=A[1];rt+=Z){var dt,Mt=n.lP(I({value:rt}),C.font,"center","top");dt=1.3*Mt.height,ht=Math.max(ht,1.3*Mt.width,7),vt=Math.max(vt,dt,7)}var Pt=ht/at,wt=vt/lt;isNaN(Pt)&&(Pt=1/0),isNaN(wt)&&(wt=1/0);var Ot=Math.max(0,Math.floor(Math.min(Pt,wt))),Ft=gt(w.model),Ut=w.getExtent(),kt=Ft.lastAutoInterval,ie=Ft.lastTickCount;return null!=kt&&null!=ie&&Math.abs(kt-Ot)<=1&&Math.abs(ie-R)<=1&&kt>Ot&&Ft.axisExtent0===Ut[0]&&Ft.axisExtent1===Ut[1]?Ot=kt:(Ft.lastTickCount=R,Ft.lastAutoInterval=Ot,Ft.axisExtent0=Ut[0],Ft.axisExtent1=Ut[1]),Ot}(this)},w}()},6122:(Ze,te,D)=>{D.d(te,{aG:()=>C,Do:()=>A,DX:()=>M,PY:()=>ot,rk:()=>Z,Xv:()=>nt,Yb:()=>I,J9:()=>P,Jk:()=>w,WY:()=>rt,AH:()=>at});var B=D(6615),St=D(7140),n=D(98),_t=D(465),mt=D(8253),gt=D(4525),yt=D(1395),V=D(8299),k=D(8301),X=D(3187),q=_t.Z.prototype,N=n.Z.prototype,et=k.NM,$=Math.floor,st=Math.ceil,K=Math.pow,_=Math.log,j=function(lt){function ht(){var vt=null!==lt&&lt.apply(this,arguments)||this;return vt.type="log",vt.base=10,vt._originalScale=new n.Z,vt._interval=0,vt}return(0,V.ZT)(ht,lt),ht.prototype.getTicks=function(vt){var dt=this._extent,Mt=this._originalScale.getExtent(),Pt=N.getTicks.call(this,vt);return B.map(Pt,function(wt){var Ot=wt.value,Ft=k.NM(K(this.base,Ot));return Ft=Ot===dt[0]&&this._fixMin?z(Ft,Mt[0]):Ft,{value:Ft=Ot===dt[1]&&this._fixMax?z(Ft,Mt[1]):Ft}},this)},ht.prototype.setExtent=function(vt,ct){var dt=_(this.base);vt=_(Math.max(0,vt))/dt,ct=_(Math.max(0,ct))/dt,N.setExtent.call(this,vt,ct)},ht.prototype.getExtent=function(){var vt=this.base,ct=q.getExtent.call(this);ct[0]=K(vt,ct[0]),ct[1]=K(vt,ct[1]);var Mt=this._originalScale.getExtent();return this._fixMin&&(ct[0]=z(ct[0],Mt[0])),this._fixMax&&(ct[1]=z(ct[1],Mt[1])),ct},ht.prototype.unionExtent=function(vt){this._originalScale.unionExtent(vt);var ct=this.base;vt[0]=_(vt[0])/_(ct),vt[1]=_(vt[1])/_(ct),q.unionExtent.call(this,vt)},ht.prototype.unionExtentFromData=function(vt,ct){this.unionExtent(vt.getApproximateExtent(ct))},ht.prototype.calcNiceTicks=function(vt){vt=vt||10;var ct=this._extent,dt=ct[1]-ct[0];if(!(dt===1/0||dt<=0)){var Mt=k.Xd(dt);for(vt/dt*Mt<=.5&&(Mt*=10);!isNaN(Mt)&&Math.abs(Mt)<1&&Math.abs(Mt)>0;)Mt*=10;var wt=[k.NM(st(ct[0]/Mt)*Mt),k.NM($(ct[1]/Mt)*Mt)];this._interval=Mt,this._niceExtent=wt}},ht.prototype.calcNiceExtent=function(vt){N.calcNiceExtent.call(this,vt),this._fixMin=vt.fixMin,this._fixMax=vt.fixMax},ht.prototype.parse=function(vt){return vt},ht.prototype.contain=function(vt){return vt=_(vt)/_(this.base),X.XS(vt,this._extent)},ht.prototype.normalize=function(vt){return vt=_(vt)/_(this.base),X.Fv(vt,this._extent)},ht.prototype.scale=function(vt){return vt=X.bA(vt,this._extent),K(this.base,vt)},ht.type="log",ht}(_t.Z),it=j.prototype;function z(lt,ht){return et(lt,k.p8(ht))}it.getMinorTicks=N.getMinorTicks,it.getLabel=N.getLabel,_t.Z.registerClass(j);const tt=j;var J=D(3593),Y=D(3697);function nt(lt,ht){var vt=lt.type,ct=(0,Y.Qw)(lt,ht,lt.getExtent()).calculate();lt.setBlank(ct.isBlank);var dt=ct.min,Mt=ct.max,Pt=ht.ecModel;if(Pt&&"time"===vt){var wt=(0,mt.Ge)("bar",Pt),Ot=!1;if(B.each(wt,function(kt){Ot=Ot||kt.getBaseAxis()===ht.axis}),Ot){var Ft=(0,mt.My)(wt),Ut=function U(lt,ht,vt,ct){var dt=vt.axis.getExtent(),Mt=dt[1]-dt[0],Pt=(0,mt.G_)(ct,vt.axis);if(void 0===Pt)return{min:lt,max:ht};var wt=1/0;B.each(Pt,function(ue){wt=Math.min(ue.offset,wt)});var Ot=-1/0;B.each(Pt,function(ue){Ot=Math.max(ue.offset+ue.width,Ot)}),wt=Math.abs(wt),Ot=Math.abs(Ot);var Ft=wt+Ot,Ut=ht-lt,ie=Ut/(1-(wt+Ot)/Mt)-Ut;return{min:lt-=ie*(wt/Ft),max:ht+=ie*(Ot/Ft)}}(dt,Mt,ht,Ft);dt=Ut.min,Mt=Ut.max}}return{extent:[dt,Mt],fixMin:ct.minFixed,fixMax:ct.maxFixed}}function w(lt,ht){var vt=ht,ct=nt(lt,vt),dt=ct.extent,Mt=vt.get("splitNumber");lt instanceof tt&&(lt.base=vt.get("logBase"));var Pt=lt.type,wt=vt.get("interval"),Ot="interval"===Pt||"time"===Pt;lt.setExtent(dt[0],dt[1]),lt.calcNiceExtent({splitNumber:Mt,fixMin:ct.fixMin,fixMax:ct.fixMax,minInterval:Ot?vt.get("minInterval"):null,maxInterval:Ot?vt.get("maxInterval"):null}),null!=wt&&lt.setInterval&&lt.setInterval(wt)}function C(lt,ht){if(ht=ht||lt.get("type"))switch(ht){case"category":return new St.Z({ordinalMeta:lt.getOrdinalMeta?lt.getOrdinalMeta():lt.getCategories(),extent:[1/0,-1/0]});case"time":return new yt.Z({locale:lt.ecModel.getLocaleModel(),useUTC:lt.ecModel.get("useUTC")});default:return new(_t.Z.getClass(ht)||n.Z)}}function I(lt){var ht=lt.scale.getExtent(),vt=ht[0],ct=ht[1];return!(vt>0&&ct>0||vt<0&&ct<0)}function P(lt){var ct,ht=lt.getLabelModel().get("formatter"),vt="category"===lt.type?lt.scale.getExtent()[0]:null;return"time"===lt.scale.type?(ct=ht,function(dt,Mt){return lt.scale.getFormattedLabel(dt,Mt,ct)}):B.isString(ht)?function(ct){return function(dt){var Mt=lt.scale.getLabel(dt);return ct.replace("{value}",Mt??"")}}(ht):B.isFunction(ht)?function(ct){return function(dt,Mt){return null!=vt&&(Mt=dt.value-vt),ct(M(lt,dt),Mt,null!=dt.level?{level:dt.level}:null)}}(ht):function(ct){return lt.scale.getLabel(ct)}}function M(lt,ht){return"category"===lt.type?lt.scale.getLabel(ht):ht.value}function A(lt){var vt=lt.scale;if(lt.model.get(["axisLabel","show"])&&!vt.isBlank()){var ct,dt,Mt=vt.getExtent();dt=vt instanceof St.Z?vt.count():(ct=vt.getTicks()).length;var Ot,Pt=lt.getLabelModel(),wt=P(lt),Ft=1;dt>40&&(Ft=Math.ceil(dt/40));for(var Ut=0;Ut<dt;Ut+=Ft){var ie=wt(ct?ct[Ut]:{value:Mt[0]+Ut},Ut),Pe=R(Pt.getTextRect(ie),Pt.get("rotate")||0);Ot?Ot.union(Pe):Ot=Pe}return Ot}}function R(lt,ht){var vt=ht*Math.PI/180,ct=lt.width,dt=lt.height,Mt=ct*Math.abs(Math.cos(vt))+Math.abs(dt*Math.sin(vt)),Pt=ct*Math.abs(Math.sin(vt))+Math.abs(dt*Math.cos(vt));return new gt.Z(lt.x,lt.y,Mt,Pt)}function Z(lt){return lt.get("interval")??"auto"}function rt(lt){return"category"===lt.type&&0===Z(lt.getLabelModel())}function ot(lt,ht){var vt={};return B.each(lt.mapDimensionsAll(ht),function(ct){vt[(0,J.IR)(lt,ct)]=!0}),B.keys(vt)}function at(lt,ht,vt){ht&&B.each(ot(ht,vt),function(ct){var dt=ht.getApproximateExtent(ct);dt[0]<lt[0]&&(lt[0]=dt[0]),dt[1]>lt[1]&&(lt[1]=dt[1])})}},9896:(Ze,te,D)=>{D.d(te,{W:()=>B});var B=function(){function St(){}return St.prototype.getNeedCrossZero=function(){return!this.option.scale},St.prototype.getCoordSysModel=function(){},St}()},1491:(Ze,te,D)=>{D.d(te,{Z:()=>n});var B=D(6615);const n=function(){function _t(mt){this.type="cartesian",this._dimList=[],this._axes={},this.name=mt||""}return _t.prototype.getAxis=function(mt){return this._axes[mt]},_t.prototype.getAxes=function(){return B.map(this._dimList,function(mt){return this._axes[mt]},this)},_t.prototype.getAxesByScale=function(mt){return mt=mt.toLowerCase(),B.filter(this.getAxes(),function(gt){return gt.scale.type===mt})},_t.prototype.addAxis=function(mt){var gt=mt.dim;this._axes[gt]=mt,this._dimList.push(gt)},_t}()},3392:(Ze,te,D)=>{D.d(te,{Im:()=>st,Ni:()=>$,Qh:()=>N,jM:()=>et});var B=D(8299),St=D(4525),n=D(8544),_t=D(1244),mt=D(4498),gt=D(6615),yt=[];function V(K,_){for(var j=0;j<K.length;j++)n.applyTransform(K[j],K[j],_)}function k(K,_,j,it){for(var z=0;z<K.length;z++){var tt=K[z];it&&(tt=it.project(tt)),tt&&isFinite(tt[0])&&isFinite(tt[1])&&(n.min(_,_,tt),n.max(j,j,tt))}}var q=function(){function K(_){this.name=_}return K.prototype.setCenter=function(_){this._center=_},K.prototype.getCenter=function(){var _=this._center;return _||(_=this._center=this.calcCenter()),_},K}(),N=function K(_,j){this.type="polygon",this.exterior=_,this.interiors=j},et=function K(_){this.type="linestring",this.points=_},$=function(K){function _(j,it,z){var tt=K.call(this,j)||this;return tt.type="geoJSON",tt.geometries=it,tt._center=z&&[z[0],z[1]],tt}return(0,B.ZT)(_,K),_.prototype.calcCenter=function(){for(var it,j=this.geometries,z=0,tt=0;tt<j.length;tt++){var J=j[tt],Y=J.exterior,nt=Y&&Y.length;nt>z&&(it=J,z=nt)}if(it)return function X(K){for(var _=0,j=0,it=0,z=K.length,tt=K[z-1][0],J=K[z-1][1],Y=0;Y<z;Y++){var nt=K[Y][0],U=K[Y][1],w=tt*U-nt*J;_+=w,j+=(tt+nt)*w,it+=(J+U)*w,tt=nt,J=U}return _?[j/_/3,it/_/3,_]:[K[0][0]||0,K[0][1]||0]}(it.exterior);var U=this.getBoundingRect();return[U.x+U.width/2,U.y+U.height/2]},_.prototype.getBoundingRect=function(j){var it=this._rect;if(it&&!j)return it;var z=[1/0,1/0],tt=[-1/0,-1/0];return(0,gt.each)(this.geometries,function(Y){"polygon"===Y.type?k(Y.exterior,z,tt,j):(0,gt.each)(Y.points,function(nt){k(nt,z,tt,j)})}),isFinite(z[0])&&isFinite(z[1])&&isFinite(tt[0])&&isFinite(tt[1])||(z[0]=z[1]=tt[0]=tt[1]=0),it=new St.Z(z[0],z[1],tt[0]-z[0],tt[1]-z[1]),j||(this._rect=it),it},_.prototype.contain=function(j){var it=this.getBoundingRect(),z=this.geometries;if(!it.contain(j[0],j[1]))return!1;t:for(var tt=0,J=z.length;tt<J;tt++){var Y=z[tt];if("polygon"===Y.type){var U=Y.interiors;if(_t.X(Y.exterior,j[0],j[1])){for(var w=0;w<(U?U.length:0);w++)if(_t.X(U[w],j[0],j[1]))continue t;return!0}}}return!1},_.prototype.transformTo=function(j,it,z,tt){var J=this.getBoundingRect(),Y=J.width/J.height;z?tt||(tt=z/Y):z=Y*tt;for(var nt=new St.Z(j,it,z,tt),U=J.calculateTransform(nt),w=this.geometries,C=0;C<w.length;C++){var I=w[C];"polygon"===I.type?(V(I.exterior,U),(0,gt.each)(I.interiors,function(P){V(P,U)})):(0,gt.each)(I.points,function(P){V(P,U)})}(J=this._rect).copy(nt),this._center=[J.x+J.width/2,J.y+J.height/2]},_.prototype.cloneShallow=function(j){null==j&&(j=this.name);var it=new _(j,this.geometries,this._center);return it._rect=this._rect,it.transformTo=null,it},_}(q),st=function(K){function _(j,it){var z=K.call(this,j)||this;return z.type="geoSVG",z._elOnlyForCalculate=it,z}return(0,B.ZT)(_,K),_.prototype.calcCenter=function(){for(var j=this._elOnlyForCalculate,it=j.getBoundingRect(),z=[it.x+it.width/2,it.y+it.height/2],tt=mt.identity(yt),J=j;J&&!J.isGeoSVGGraphicRoot;)mt.mul(tt,J.getLocalTransform(),tt),J=J.parent;return mt.invert(tt,tt),n.applyTransform(z,z,tt),z},_}(q)},9356:(Ze,te,D)=>{D.d(te,{Z:()=>St});var B={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]};function St(n,_t){if("china"===n){var mt=B[_t.name];if(mt){var gt=_t.getCenter();gt[0]+=mt[0]/10.5,gt[1]+=-mt[1]/14,_t.setCenter(gt)}}}},3153:(Ze,te,D)=>{D.d(te,{Z:()=>gt});var B=D(6615),St=D(3392);function _t(yt,V,k){for(var X=0;X<yt.length;X++)yt[X]=mt(yt[X],V[X],k)}function mt(yt,V,k){for(var X=[],q=V[0],N=V[1],et=0;et<yt.length;et+=2){var $=yt.charCodeAt(et)-64,st=yt.charCodeAt(et+1)-64;$=$>>1^-(1&$),st=st>>1^-(1&st),q=$+=q,N=st+=N,X.push([$/k,st/k])}return X}function gt(yt,V){return yt=function n(yt){if(!yt.UTF8Encoding)return yt;var V=yt,k=V.UTF8Scale;return null==k&&(k=1024),B.each(V.features,function(q){var N=q.geometry,et=N.encodeOffsets,$=N.coordinates;if(et)switch(N.type){case"LineString":N.coordinates=mt($,et,k);break;case"Polygon":case"MultiLineString":_t($,et,k);break;case"MultiPolygon":B.each($,function(st,K){return _t(st,et[K],k)})}}),V.UTF8Encoding=!1,V}(yt),B.map(B.filter(yt.features,function(k){return k.geometry&&k.properties&&k.geometry.coordinates.length>0}),function(k){var X=k.properties,q=k.geometry,N=[];switch(q.type){case"Polygon":var et=q.coordinates;N.push(new St.Qh(et[0],et.slice(1)));break;case"MultiPolygon":B.each(q.coordinates,function(st){st[0]&&N.push(new St.Qh(st[0],st.slice(1)))});break;case"LineString":N.push(new St.jM([q.coordinates]));break;case"MultiLineString":N.push(new St.jM(q.coordinates))}var $=new St.Ni(X[V||"name"],N,X.cp);return $.properties=X,$})}},3697:(Ze,te,D)=>{D.d(te,{Qw:()=>gt});var B=D(6615),St=D(585),n=function(){function V(k,X,q){this._prepareParams(k,X,q)}return V.prototype._prepareParams=function(k,X,q){q[1]<q[0]&&(q=[NaN,NaN]),this._dataMin=q[0],this._dataMax=q[1];var N=this._isOrdinal="ordinal"===k.type;this._needCrossZero="interval"===k.type&&X.getNeedCrossZero&&X.getNeedCrossZero();var et=this._modelMinRaw=X.get("min",!0);(0,B.isFunction)(et)?this._modelMinNum=yt(k,et({min:q[0],max:q[1]})):"dataMin"!==et&&(this._modelMinNum=yt(k,et));var $=this._modelMaxRaw=X.get("max",!0);if((0,B.isFunction)($)?this._modelMaxNum=yt(k,$({min:q[0],max:q[1]})):"dataMax"!==$&&(this._modelMaxNum=yt(k,$)),N)this._axisDataLen=X.getCategories().length;else{var st=X.get("boundaryGap"),K=(0,B.isArray)(st)?st:[st||0,st||0];this._boundaryGapInner="boolean"==typeof K[0]||"boolean"==typeof K[1]?[0,0]:[(0,St.GM)(K[0],1),(0,St.GM)(K[1],1)]}},V.prototype.calculate=function(){var k=this._isOrdinal,X=this._dataMin,q=this._dataMax,N=this._axisDataLen,et=this._boundaryGapInner,$=k?null:q-X||Math.abs(X),st="dataMin"===this._modelMinRaw?X:this._modelMinNum,K="dataMax"===this._modelMaxRaw?q:this._modelMaxNum,_=null!=st,j=null!=K;null==st&&(st=k?N?0:NaN:X-et[0]*$),null==K&&(K=k?N?N-1:NaN:q+et[1]*$),(null==st||!isFinite(st))&&(st=NaN),(null==K||!isFinite(K))&&(K=NaN);var it=(0,B.eqNaN)(st)||(0,B.eqNaN)(K)||k&&!N;this._needCrossZero&&(st>0&&K>0&&!_&&(st=0),st<0&&K<0&&!j&&(K=0));var z=this._determinedMin,tt=this._determinedMax;return null!=z&&(st=z,_=!0),null!=tt&&(K=tt,j=!0),{min:st,max:K,minFixed:_,maxFixed:j,isBlank:it}},V.prototype.modifyDataMinMax=function(k,X){this[mt[k]]=X},V.prototype.setDeterminedMinMax=function(k,X){this[_t[k]]=X},V.prototype.freeze=function(){this.frozen=!0},V}(),_t={min:"_determinedMin",max:"_determinedMax"},mt={min:"_dataMin",max:"_dataMax"};function gt(V,k,X){var q=V.rawExtentInfo;return q||(q=new n(V,k,X),V.rawExtentInfo=q,q)}function yt(V,k){return null==k?null:(0,B.eqNaN)(k)?NaN:V.parse(k)}},1792:(Ze,te,D)=>{D.d(te,{Z:()=>_t});var B=D(6615),St={};const _t=function(){function mt(){this._coordinateSystems=[]}return mt.prototype.create=function(gt,yt){var V=[];B.each(St,function(k,X){var q=k.create(gt,yt);V=V.concat(q||[])}),this._coordinateSystems=V},mt.prototype.update=function(gt,yt){B.each(this._coordinateSystems,function(V){V.update&&V.update(gt,yt)})},mt.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},mt.register=function(gt,yt){St[gt]=yt},mt.get=function(gt){return St[gt]},mt}()},89:(Ze,te,D)=>{D.d(te,{Hr:()=>Ko,$j:()=>Kl,Ok:()=>ia,HO:()=>Un,eU:()=>es,zP:()=>ws,B9:()=>Do,wL:()=>ku,JE:()=>Ds,rp:()=>ul,FU:()=>hl,S1:()=>ll,zl:()=>yo,RS:()=>Ls,qR:()=>cl,yn:()=>ci,I2:()=>On.I2,je:()=>Ji,sq:()=>Jl,Br:()=>Ql,ds:()=>jl,Pu:()=>Lo,aW:()=>rs,OB:()=>Ro,YK:()=>Da,Og:()=>na,jQ:()=>Io,i8:()=>Mr});var B=D(8299),St=D(3318),n=D(6615),_t=D(1156),mt=D(4856),gt=D(7100),yt=D(1617),V=D(7838),k=D(2310),X="";typeof navigator<"u"&&(X=navigator.platform||"");var q="rgba(0, 0, 0, 0.2)";const N={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:q,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:q,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:q,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:q,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:q,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:q,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:X.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var K,_,j,et=D(7458),$=D(332),st=D(7522),it="\0_ec_inner",U=function(Zt){function Ht(){return null!==Zt&&Zt.apply(this,arguments)||this}return(0,B.ZT)(Ht,Zt),Ht.prototype.init=function(Rt,Vt,Yt,se,ve,He){se=se||{},this.option=null,this._theme=new V.Z(se),this._locale=new V.Z(ve),this._optionManager=He},Ht.prototype.setOption=function(Rt,Vt,Yt){var se=M(Vt);this._optionManager.setOption(Rt,Yt,se),this._resetOption(null,se)},Ht.prototype.resetOption=function(Rt,Vt){return this._resetOption(Rt,M(Vt))},Ht.prototype._resetOption=function(Rt,Vt){var Yt=!1,se=this._optionManager;if(!Rt||"recreate"===Rt){var ve=se.mountOption("recreate"===Rt);this.option&&"recreate"!==Rt?(this.restoreData(),this._mergeOption(ve,Vt)):j(this,ve),Yt=!0}if(("timeline"===Rt||"media"===Rt)&&this.restoreData(),!Rt||"recreate"===Rt||"timeline"===Rt){var He=se.getTimelineOption(this);He&&(Yt=!0,this._mergeOption(He,Vt))}if(!Rt||"recreate"===Rt||"media"===Rt){var ze=se.getMediaOption(this);ze.length&&(0,n.each)(ze,function(qe){Yt=!0,this._mergeOption(qe,Vt)},this)}return Yt},Ht.prototype.mergeOption=function(Rt){this._mergeOption(Rt,null)},Ht.prototype._mergeOption=function(Rt,Vt){var Yt=this.option,se=this._componentsMap,ve=this._componentsCount,He=[],ze=(0,n.createHashMap)(),qe=Vt&&Vt.replaceMergeMainTypeMap;(0,et.md)(this),(0,n.each)(Rt,function(fe,Me){null!=fe&&(k.Z.hasClass(Me)?Me&&(He.push(Me),ze.set(Me,!0)):Yt[Me]=null==Yt[Me]?(0,n.clone)(fe):(0,n.merge)(Yt[Me],fe,!0))}),qe&&qe.each(function(fe,Me){k.Z.hasClass(Me)&&!ze.get(Me)&&(He.push(Me),ze.set(Me,!0))}),k.Z.topologicalTravel(He,k.Z.getAllClassMainTypes(),function yr(fe){var Me=(0,$.R)(this,fe,yt.kF(Rt[fe])),Ce=se.get(fe),Ie=Ce?qe&&qe.get(fe)?"replaceMerge":"normalMerge":"replaceAll",Ue=yt.ab(Ce,Me,Ie);yt.O0(Ue,fe,k.Z),Yt[fe]=null,se.set(fe,null),ve.set(fe,0);var br,ir=[],cr=[],xr=0;(0,n.each)(Ue,function(_n,on){var Gn=_n.existing,Hi=_n.newOption;if(Hi){var bn=k.Z.getClass(fe,_n.keyInfo.subType,!("series"===fe));if(!bn)return;if("tooltip"===fe){if(br)return;br=!0}if(Gn&&Gn.constructor===bn)Gn.name=_n.keyInfo.name,Gn.mergeOption(Hi,this),Gn.optionUpdated(Hi,!1);else{var Ns=(0,n.extend)({componentIndex:on},_n.keyInfo);Gn=new bn(Hi,this,this,Ns),(0,n.extend)(Gn,Ns),_n.brandNew&&(Gn.__requireNewView=!0),Gn.init(Hi,this,this),Gn.optionUpdated(null,!0)}}else Gn&&(Gn.mergeOption({},this),Gn.optionUpdated({},!1));Gn?(ir.push(Gn.option),cr.push(Gn),xr++):(ir.push(void 0),cr.push(void 0))},this),Yt[fe]=ir,se.set(fe,cr),ve.set(fe,xr),"series"===fe&&K(this)},this),this._seriesIndices||K(this)},Ht.prototype.getOption=function(){var Rt=(0,n.clone)(this.option);return(0,n.each)(Rt,function(Vt,Yt){if(k.Z.hasClass(Yt)){for(var se=yt.kF(Vt),ve=se.length,He=!1,ze=ve-1;ze>=0;ze--)se[ze]&&!yt.lY(se[ze])?He=!0:(se[ze]=null,!He&&ve--);se.length=ve,Rt[Yt]=se}}),delete Rt[it],Rt},Ht.prototype.getTheme=function(){return this._theme},Ht.prototype.getLocaleModel=function(){return this._locale},Ht.prototype.setUpdatePayload=function(Rt){this._payload=Rt},Ht.prototype.getUpdatePayload=function(){return this._payload},Ht.prototype.getComponent=function(Rt,Vt){var Yt=this._componentsMap.get(Rt);if(Yt){var se=Yt[Vt||0];if(se)return se;if(null==Vt)for(var ve=0;ve<Yt.length;ve++)if(Yt[ve])return Yt[ve]}},Ht.prototype.queryComponents=function(Rt){var Vt=Rt.mainType;if(!Vt)return[];var ze,Yt=Rt.index,se=Rt.id,ve=Rt.name,He=this._componentsMap.get(Vt);return He&&He.length?(null!=Yt?(ze=[],(0,n.each)(yt.kF(Yt),function(qe){He[qe]&&ze.push(He[qe])})):ze=null!=se?I("id",se,He):null!=ve?I("name",ve,He):(0,n.filter)(He,function(qe){return!!qe}),P(ze,Rt)):[]},Ht.prototype.findComponents=function(Rt){var Yt=Rt.mainType,se=function He(qe){var yr=Yt+"Index",fe=Yt+"Id",Me=Yt+"Name";return!qe||null==qe[yr]&&null==qe[fe]&&null==qe[Me]?null:{mainType:Yt,index:qe[yr],id:qe[fe],name:qe[Me]}}(Rt.query);return function ze(qe){return Rt.filter?(0,n.filter)(qe,Rt.filter):qe}(P(se?this.queryComponents(se):(0,n.filter)(this._componentsMap.get(Yt),function(qe){return!!qe}),Rt))},Ht.prototype.eachComponent=function(Rt,Vt,Yt){var se=this._componentsMap;if((0,n.isFunction)(Rt)){var ve=Vt,He=Rt;se.each(function(fe,Me){for(var Ce=0;fe&&Ce<fe.length;Ce++){var Ie=fe[Ce];Ie&&He.call(ve,Me,Ie,Ie.componentIndex)}})}else for(var ze=(0,n.isString)(Rt)?se.get(Rt):(0,n.isObject)(Rt)?this.findComponents(Rt):null,qe=0;ze&&qe<ze.length;qe++){var yr=ze[qe];yr&&Vt.call(Yt,yr,yr.componentIndex)}},Ht.prototype.getSeriesByName=function(Rt){var Vt=yt.U5(Rt,null);return(0,n.filter)(this._componentsMap.get("series"),function(Yt){return!!Yt&&null!=Vt&&Yt.name===Vt})},Ht.prototype.getSeriesByIndex=function(Rt){return this._componentsMap.get("series")[Rt]},Ht.prototype.getSeriesByType=function(Rt){return(0,n.filter)(this._componentsMap.get("series"),function(Vt){return!!Vt&&Vt.subType===Rt})},Ht.prototype.getSeries=function(){return(0,n.filter)(this._componentsMap.get("series"),function(Rt){return!!Rt})},Ht.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},Ht.prototype.eachSeries=function(Rt,Vt){_(this),(0,n.each)(this._seriesIndices,function(Yt){var se=this._componentsMap.get("series")[Yt];Rt.call(Vt,se,Yt)},this)},Ht.prototype.eachRawSeries=function(Rt,Vt){(0,n.each)(this._componentsMap.get("series"),function(Yt){Yt&&Rt.call(Vt,Yt,Yt.componentIndex)})},Ht.prototype.eachSeriesByType=function(Rt,Vt,Yt){_(this),(0,n.each)(this._seriesIndices,function(se){var ve=this._componentsMap.get("series")[se];ve.subType===Rt&&Vt.call(Yt,ve,se)},this)},Ht.prototype.eachRawSeriesByType=function(Rt,Vt,Yt){return(0,n.each)(this.getSeriesByType(Rt),Vt,Yt)},Ht.prototype.isSeriesFiltered=function(Rt){return _(this),null==this._seriesIndicesMap.get(Rt.componentIndex)},Ht.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},Ht.prototype.filterSeries=function(Rt,Vt){_(this);var Yt=[];(0,n.each)(this._seriesIndices,function(se){var ve=this._componentsMap.get("series")[se];Rt.call(Vt,ve,se)&&Yt.push(se)},this),this._seriesIndices=Yt,this._seriesIndicesMap=(0,n.createHashMap)(Yt)},Ht.prototype.restoreData=function(Rt){K(this);var Vt=this._componentsMap,Yt=[];Vt.each(function(se,ve){k.Z.hasClass(ve)&&Yt.push(ve)}),k.Z.topologicalTravel(Yt,k.Z.getAllClassMainTypes(),function(se){(0,n.each)(Vt.get(se),function(ve){ve&&("series"!==se||!function w(Zt,Ht){if(Ht){var Rt=Ht.seriesIndex,Vt=Ht.seriesId,Yt=Ht.seriesName;return null!=Rt&&Zt.componentIndex!==Rt||null!=Vt&&Zt.id!==Vt||null!=Yt&&Zt.name!==Yt}}(ve,Rt))&&ve.restoreData()})})},Ht.internalField=(K=function(Rt){var Vt=Rt._seriesIndices=[];(0,n.each)(Rt._componentsMap.get("series"),function(Yt){Yt&&Vt.push(Yt.componentIndex)}),Rt._seriesIndicesMap=(0,n.createHashMap)(Vt)},_=function(Rt){},void(j=function(Rt,Vt){Rt.option={},Rt.option[it]=1,Rt._componentsMap=(0,n.createHashMap)({series:[]}),Rt._componentsCount=(0,n.createHashMap)();var Yt=Vt.aria;(0,n.isObject)(Yt)&&null==Yt.enabled&&(Yt.enabled=!0),function C(Zt,Ht){var Rt=Zt.color&&!Zt.colorLayer;(0,n.each)(Ht,function(Vt,Yt){"colorLayer"===Yt&&Rt||k.Z.hasClass(Yt)||("object"==typeof Vt?Zt[Yt]=Zt[Yt]?(0,n.merge)(Zt[Yt],Vt,!1):(0,n.clone)(Vt):null==Zt[Yt]&&(Zt[Yt]=Vt))})}(Vt,Rt._theme.option),(0,n.merge)(Vt,N,!1),Rt._mergeOption(Vt,null)})),Ht}(V.Z);function I(Zt,Ht,Rt){if((0,n.isArray)(Ht)){var Vt=(0,n.createHashMap)();return(0,n.each)(Ht,function(se){null!=se&&null!=yt.U5(se,null)&&Vt.set(se,!0)}),(0,n.filter)(Rt,function(se){return se&&Vt.get(se[Zt])})}var Yt=yt.U5(Ht,null);return(0,n.filter)(Rt,function(se){return se&&null!=Yt&&se[Zt]===Yt})}function P(Zt,Ht){return Ht.hasOwnProperty("subType")?(0,n.filter)(Zt,function(Rt){return Rt&&Rt.subType===Ht.subType}):Zt}function M(Zt){var Ht=(0,n.createHashMap)();return Zt&&(0,n.each)(yt.kF(Zt.replaceMerge),function(Rt){Ht.set(Rt,!0)}),{replaceMergeMainTypeMap:Ht}}(0,n.mixin)(U,st._);const A=U;var R=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"];const rt=function Zt(Ht){n.each(R,function(Rt){this[Rt]=n.bind(Ht[Rt],Ht)},this)};var ot=D(1792),at=/^(min|max)?(.+)$/;function vt(Zt,Ht,Rt){var Vt={width:Ht,height:Rt,aspectratio:Ht/Rt},Yt=!0;return(0,n.each)(Zt,function(se,ve){var He=ve.match(at);if(He&&He[1]&&He[2]){var ze=He[1],qe=He[2].toLowerCase();(function ct(Zt,Ht,Rt){return"min"===Rt?Zt>=Ht:"max"===Rt?Zt<=Ht:Zt===Ht})(Vt[qe],se,ze)||(Yt=!1)}}),Yt}const Mt=function(){function Zt(Ht){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=Ht}return Zt.prototype.setOption=function(Ht,Rt,Vt){Ht&&((0,n.each)((0,yt.kF)(Ht.series),function(ve){ve&&ve.data&&(0,n.isTypedArray)(ve.data)&&(0,n.setAsPrimitive)(ve.data)}),(0,n.each)((0,yt.kF)(Ht.dataset),function(ve){ve&&ve.source&&(0,n.isTypedArray)(ve.source)&&(0,n.setAsPrimitive)(ve.source)})),Ht=(0,n.clone)(Ht);var Yt=this._optionBackup,se=function ht(Zt,Ht,Rt){var Yt,se,Vt=[],ve=Zt.baseOption,He=Zt.timeline,ze=Zt.options,qe=Zt.media,yr=!!Zt.media,fe=!!(ze||He||ve&&ve.timeline);function Me(Ce){(0,n.each)(Ht,function(Ie){Ie(Ce,Rt)})}return ve?(se=ve).timeline||(se.timeline=He):((fe||yr)&&(Zt.options=Zt.media=null),se=Zt),yr&&(0,n.isArray)(qe)&&(0,n.each)(qe,function(Ce){Ce&&Ce.option&&(Ce.query?Vt.push(Ce):Yt||(Yt=Ce))}),Me(se),(0,n.each)(ze,function(Ce){return Me(Ce)}),(0,n.each)(Vt,function(Ce){return Me(Ce.option)}),{baseOption:se,timelineOptions:ze||[],mediaDefault:Yt,mediaList:Vt}}(Ht,Rt,!Yt);this._newBaseOption=se.baseOption,Yt?(se.timelineOptions.length&&(Yt.timelineOptions=se.timelineOptions),se.mediaList.length&&(Yt.mediaList=se.mediaList),se.mediaDefault&&(Yt.mediaDefault=se.mediaDefault)):this._optionBackup=se},Zt.prototype.mountOption=function(Ht){var Rt=this._optionBackup;return this._timelineOptions=Rt.timelineOptions,this._mediaList=Rt.mediaList,this._mediaDefault=Rt.mediaDefault,this._currentMediaIndices=[],(0,n.clone)(Ht?Rt.baseOption:this._newBaseOption)},Zt.prototype.getTimelineOption=function(Ht){var Rt,Vt=this._timelineOptions;if(Vt.length){var Yt=Ht.getComponent("timeline");Yt&&(Rt=(0,n.clone)(Vt[Yt.getCurrentIndex()]))}return Rt},Zt.prototype.getMediaOption=function(Ht){var Rt=this._api.getWidth(),Vt=this._api.getHeight(),Yt=this._mediaList,se=this._mediaDefault,ve=[],He=[];if(!Yt.length&&!se)return He;for(var ze=0,qe=Yt.length;ze<qe;ze++)vt(Yt[ze].query,Rt,Vt)&&ve.push(ze);return!ve.length&&se&&(ve=[-1]),ve.length&&!function dt(Zt,Ht){return Zt.join(",")===Ht.join(",")}(ve,this._currentMediaIndices)&&(He=(0,n.map)(ve,function(yr){return(0,n.clone)(-1===yr?se.option:Yt[yr].option)})),this._currentMediaIndices=ve,He},Zt}();var Pt=n.each,wt=n.isObject,Ot=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Ft(Zt){var Ht=Zt&&Zt.itemStyle;if(Ht)for(var Rt=0,Vt=Ot.length;Rt<Vt;Rt++){var Yt=Ot[Rt],se=Ht.normal,ve=Ht.emphasis;se&&se[Yt]&&(Zt[Yt]=Zt[Yt]||{},Zt[Yt].normal?n.merge(Zt[Yt].normal,se[Yt]):Zt[Yt].normal=se[Yt],se[Yt]=null),ve&&ve[Yt]&&(Zt[Yt]=Zt[Yt]||{},Zt[Yt].emphasis?n.merge(Zt[Yt].emphasis,ve[Yt]):Zt[Yt].emphasis=ve[Yt],ve[Yt]=null)}}function Ut(Zt,Ht,Rt){if(Zt&&Zt[Ht]&&(Zt[Ht].normal||Zt[Ht].emphasis)){var Vt=Zt[Ht].normal,Yt=Zt[Ht].emphasis;Vt&&(Rt?(Zt[Ht].normal=Zt[Ht].emphasis=null,n.defaults(Zt[Ht],Vt)):Zt[Ht]=Vt),Yt&&(Zt.emphasis=Zt.emphasis||{},Zt.emphasis[Ht]=Yt,Yt.focus&&(Zt.emphasis.focus=Yt.focus),Yt.blurScope&&(Zt.emphasis.blurScope=Yt.blurScope))}}function kt(Zt){Ut(Zt,"itemStyle"),Ut(Zt,"lineStyle"),Ut(Zt,"areaStyle"),Ut(Zt,"label"),Ut(Zt,"labelLine"),Ut(Zt,"upperLabel"),Ut(Zt,"edgeLabel")}function ie(Zt,Ht){var Rt=wt(Zt)&&Zt[Ht],Vt=wt(Rt)&&Rt.textStyle;if(Vt)for(var Yt=0,se=yt.Td.length;Yt<se;Yt++){var ve=yt.Td[Yt];Vt.hasOwnProperty(ve)&&(Rt[ve]=Vt[ve])}}function ue(Zt){Zt&&(kt(Zt),ie(Zt,"label"),Zt.emphasis&&ie(Zt.emphasis,"label"))}function Se(Zt){return n.isArray(Zt)?Zt:Zt?[Zt]:[]}function De(Zt){return(n.isArray(Zt)?Zt[0]:Zt)||{}}function or(Zt){Zt&&(0,n.each)(Hr,function(Ht){Ht[0]in Zt&&!(Ht[1]in Zt)&&(Zt[Ht[1]]=Zt[Ht[0]])})}var Hr=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Rr=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],qr=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Vr(Zt){var Ht=Zt&&Zt.itemStyle;if(Ht)for(var Rt=0;Rt<qr.length;Rt++){var Vt=qr[Rt][1];null!=Ht[Vt]&&(Ht[qr[Rt][0]]=Ht[Vt])}}function Ve(Zt){!Zt||"edge"===Zt.alignTo&&null!=Zt.margin&&null==Zt.edgeDistance&&(Zt.edgeDistance=Zt.margin)}function er(Zt){!Zt||Zt.downplay&&!Zt.blur&&(Zt.blur=Zt.downplay)}function Lr(Zt,Ht){if(Zt)for(var Rt=0;Rt<Zt.length;Rt++)Ht(Zt[Rt]),Zt[Rt]&&Lr(Zt[Rt].children,Ht)}function Cr(Zt,Ht){(function Fe(Zt,Ht){Pt(Se(Zt.series),function(Vt){wt(Vt)&&function Pe(Zt){if(wt(Zt)){Ft(Zt),kt(Zt),ie(Zt,"label"),ie(Zt,"upperLabel"),ie(Zt,"edgeLabel"),Zt.emphasis&&(ie(Zt.emphasis,"label"),ie(Zt.emphasis,"upperLabel"),ie(Zt.emphasis,"edgeLabel"));var Ht=Zt.markPoint;Ht&&(Ft(Ht),ue(Ht));var Rt=Zt.markLine;Rt&&(Ft(Rt),ue(Rt));var Vt=Zt.markArea;Vt&&ue(Vt);var Yt=Zt.data;if("graph"===Zt.type){Yt=Yt||Zt.nodes;var se=Zt.links||Zt.edges;if(se&&!n.isTypedArray(se))for(var ve=0;ve<se.length;ve++)ue(se[ve]);n.each(Zt.categories,function(qe){kt(qe)})}if(Yt&&!n.isTypedArray(Yt))for(ve=0;ve<Yt.length;ve++)ue(Yt[ve]);if((Ht=Zt.markPoint)&&Ht.data){var He=Ht.data;for(ve=0;ve<He.length;ve++)ue(He[ve])}if((Rt=Zt.markLine)&&Rt.data){var ze=Rt.data;for(ve=0;ve<ze.length;ve++)n.isArray(ze[ve])?(ue(ze[ve][0]),ue(ze[ve][1])):ue(ze[ve])}"gauge"===Zt.type?(ie(Zt,"axisLabel"),ie(Zt,"title"),ie(Zt,"detail")):"treemap"===Zt.type?(Ut(Zt.breadcrumb,"itemStyle"),n.each(Zt.levels,function(qe){kt(qe)})):"tree"===Zt.type&&kt(Zt.leaves)}}(Vt)});var Rt=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];Ht&&Rt.push("valueAxis","categoryAxis","logAxis","timeAxis"),Pt(Rt,function(Vt){Pt(Se(Zt[Vt]),function(Yt){Yt&&(ie(Yt,"axisLabel"),ie(Yt.axisPointer,"label"))})}),Pt(Se(Zt.parallel),function(Vt){var Yt=Vt&&Vt.parallelAxisDefault;ie(Yt,"axisLabel"),ie(Yt&&Yt.axisPointer,"label")}),Pt(Se(Zt.calendar),function(Vt){Ut(Vt,"itemStyle"),ie(Vt,"dayLabel"),ie(Vt,"monthLabel"),ie(Vt,"yearLabel")}),Pt(Se(Zt.radar),function(Vt){ie(Vt,"name"),Vt.name&&null==Vt.axisName&&(Vt.axisName=Vt.name,delete Vt.name),null!=Vt.nameGap&&null==Vt.axisNameGap&&(Vt.axisNameGap=Vt.nameGap,delete Vt.nameGap)}),Pt(Se(Zt.geo),function(Vt){wt(Vt)&&(ue(Vt),Pt(Se(Vt.regions),function(Yt){ue(Yt)}))}),Pt(Se(Zt.timeline),function(Vt){ue(Vt),Ut(Vt,"label"),Ut(Vt,"itemStyle"),Ut(Vt,"controlStyle",!0);var Yt=Vt.data;n.isArray(Yt)&&n.each(Yt,function(se){n.isObject(se)&&(Ut(se,"label"),Ut(se,"itemStyle"))})}),Pt(Se(Zt.toolbox),function(Vt){Ut(Vt,"iconStyle"),Pt(Vt.feature,function(Yt){Ut(Yt,"iconStyle")})}),ie(De(Zt.axisPointer),"label"),ie(De(Zt.tooltip).axisPointer,"label")})(Zt,Ht),Zt.series=(0,yt.kF)(Zt.series),(0,n.each)(Zt.series,function(Rt){if((0,n.isObject)(Rt)){var Vt=Rt.type;if("line"===Vt)null!=Rt.clipOverflow&&(Rt.clip=Rt.clipOverflow);else if("pie"===Vt||"gauge"===Vt){if(null!=Rt.clockWise&&(Rt.clockwise=Rt.clockWise),Ve(Rt.label),(Yt=Rt.data)&&!(0,n.isTypedArray)(Yt))for(var se=0;se<Yt.length;se++)Ve(Yt[se]);null!=Rt.hoverOffset&&(Rt.emphasis=Rt.emphasis||{},(Rt.emphasis.scaleSize=null)&&(Rt.emphasis.scaleSize=Rt.hoverOffset))}else if("gauge"===Vt){var ve=function Ye(Zt,Ht){for(var Rt=Ht.split(","),Vt=Zt,Yt=0;Yt<Rt.length&&null!=(Vt=Vt&&Vt[Rt[Yt]]);Yt++);return Vt}(Rt,"pointer.color");null!=ve&&function tr(Zt,Ht,Rt,Vt){for(var ve,Yt=Ht.split(","),se=Zt,He=0;He<Yt.length-1;He++)null==se[ve=Yt[He]]&&(se[ve]={}),se=se[ve];(Vt||null==se[Yt[He]])&&(se[Yt[He]]=Rt)}(Rt,"itemStyle.color",ve)}else if("bar"===Vt){var Yt;if(Vr(Rt),Vr(Rt.backgroundStyle),Vr(Rt.emphasis),(Yt=Rt.data)&&!(0,n.isTypedArray)(Yt))for(se=0;se<Yt.length;se++)"object"==typeof Yt[se]&&(Vr(Yt[se]),Vr(Yt[se]&&Yt[se].emphasis))}else if("sunburst"===Vt){var He=Rt.highlightPolicy;He&&(Rt.emphasis=Rt.emphasis||{},Rt.emphasis.focus||(Rt.emphasis.focus=He)),er(Rt),Lr(Rt.data,er)}else"graph"===Vt||"sankey"===Vt?function Ar(Zt){!Zt||null!=Zt.focusNodeAdjacency&&(Zt.emphasis=Zt.emphasis||{},null==Zt.emphasis.focus&&(Zt.emphasis.focus="adjacency"))}(Rt):"map"===Vt&&(Rt.mapType&&!Rt.map&&(Rt.map=Rt.mapType),Rt.mapLocation&&(0,n.defaults)(Rt,Rt.mapLocation));null!=Rt.hoverAnimation&&(Rt.emphasis=Rt.emphasis||{},Rt.emphasis&&null==Rt.emphasis.scale&&(Rt.emphasis.scale=Rt.hoverAnimation)),or(Rt)}}),Zt.dataRange&&(Zt.visualMap=Zt.dataRange),(0,n.each)(Rr,function(Rt){var Vt=Zt[Rt];Vt&&((0,n.isArray)(Vt)||(Vt=[Vt]),(0,n.each)(Vt,function(Yt){or(Yt)}))})}var Zr=D(8301);function re(Zt){(0,n.each)(Zt,function(Ht,Rt){var Vt=[],Yt=[NaN,NaN],se=[Ht.stackResultDimension,Ht.stackedOverDimension],ve=Ht.data,He=Ht.isStackedByIndex,ze=Ht.seriesModel.get("stackStrategy")||"samesign";ve.modify(se,function(qe,yr,fe){var Ce,Ie,Me=ve.get(Ht.stackedDimension,fe);if(isNaN(Me))return Yt;He?Ie=ve.getRawIndex(fe):Ce=ve.get(Ht.stackedByDimension,fe);for(var Ue=NaN,ir=Rt-1;ir>=0;ir--){var cr=Zt[ir];if(He||(Ie=cr.data.rawIndexOf(cr.stackedByDimension,Ce)),Ie>=0){var xr=cr.data.getByRawIndex(cr.stackResultDimension,Ie);if("all"===ze||"positive"===ze&&xr>0||"negative"===ze&&xr<0||"samesign"===ze&&Me>=0&&xr>0||"samesign"===ze&&Me<=0&&xr<0){Me=(0,Zr.S$)(Me,xr),Ue=xr;break}}}return Vt[0]=Me,Vt[1]=Ue,Vt})})}var pe=D(4263),we=D(3785),Le=D(4023),Kt=D(4528),ne=D(8418),le=D(3996),Xt=D(2477),Te=D(7166),ye=D(8786),Ne=D(4972),Qe=D(7005),Pr=D(7617),Ir=D(6191),Xr=(0,yt.Yf)(),An={itemStyle:(0,Qe.Z)(Pr.t,!0),lineStyle:(0,Qe.Z)(Ir.v,!0)},$r={lineStyle:"stroke",itemStyle:"fill"};function $n(Zt,Ht){return Zt.visualStyleMapper||An[Ht]||(console.warn("Unknown style type '"+Ht+"'."),An.itemStyle)}function ai(Zt,Ht){return Zt.visualDrawType||$r[Ht]||(console.warn("Unknown style type '"+Ht+"'."),"fill")}var ro={createOnAllSeries:!0,performRawSeries:!0,reset:function(Zt,Ht){var Rt=Zt.getData(),Vt=Zt.visualStyleAccessPath||"itemStyle",Yt=Zt.getModel(Vt),ve=$n(Zt,Vt)(Yt),He=Yt.getShallow("decal");He&&(Rt.setVisual("decal",He),He.dirty=!0);var ze=ai(Zt,Vt),qe=ve[ze],yr=(0,n.isFunction)(qe)?qe:null;if(!ve[ze]||yr||"auto"===ve.fill||"auto"===ve.stroke){var Me=Zt.getColorFromPalette(Zt.name,null,Ht.getSeriesCount());ve[ze]||(ve[ze]=Me,Rt.setVisual("colorFromPalette",!0)),ve.fill="auto"===ve.fill||(0,n.isFunction)(ve.fill)?Me:ve.fill,ve.stroke="auto"===ve.stroke||(0,n.isFunction)(ve.stroke)?Me:ve.stroke}if(Rt.setVisual("style",ve),Rt.setVisual("drawType",ze),!Ht.isSeriesFiltered(Zt)&&yr)return Rt.setVisual("colorFromPalette",!1),{dataEach:function(Ce,Ie){var Ue=Zt.getDataParams(Ie),ir=(0,n.extend)({},ve);ir[ze]=yr(Ue),Ce.setItemVisual(Ie,"style",ir)}}}},qi=new V.Z,fa={createOnAllSeries:!0,performRawSeries:!0,reset:function(Zt,Ht){if(!Zt.ignoreStyleOnData&&!Ht.isSeriesFiltered(Zt)){var Rt=Zt.getData(),Vt=Zt.visualStyleAccessPath||"itemStyle",Yt=$n(Zt,Vt),se=Rt.getVisual("drawType");return{dataEach:Rt.hasItemOption?function(ve,He){var ze=ve.getRawDataItem(He);if(ze&&ze[Vt]){qi.option=ze[Vt];var qe=Yt(qi),yr=ve.ensureUniqueItemVisual(He,"style");(0,n.extend)(yr,qe),qi.option.decal&&(ve.setItemVisual(He,"decal",qi.option.decal),qi.option.decal.dirty=!0),se in qe&&ve.setItemVisual(He,"colorFromPalette",!1)}}:null}}}},Mi={performRawSeries:!0,overallReset:function(Zt){var Ht=(0,n.createHashMap)();Zt.eachSeries(function(Rt){var Vt=Rt.getColorBy();if(!Rt.isColorBySeries()){var Yt=Rt.type+"-"+Vt,se=Ht.get(Yt);se||Ht.set(Yt,se={}),Xr(Rt).scope=se}}),Zt.eachSeries(function(Rt){if(!Rt.isColorBySeries()&&!Zt.isSeriesFiltered(Rt)){var Vt=Rt.getRawData(),Yt={},se=Rt.getData(),ve=Xr(Rt).scope,ze=ai(Rt,Rt.visualStyleAccessPath||"itemStyle");se.each(function(qe){var yr=se.getRawIndex(qe);Yt[yr]=qe}),Vt.each(function(qe){var yr=Yt[qe];if(se.getItemVisual(yr,"colorFromPalette")){var Me=se.ensureUniqueItemVisual(yr,"style"),Ce=Vt.getName(qe)||qe+"",Ie=Vt.count();Me[ze]=Rt.getColorFromPalette(Ce,ve,Ie)}})}})}},Wo=D(4786),To=D(2018),ya=D(8281),ti=Math.PI,vo=D(338),$l=D(6012),go=function(){function Zt(Ht,Rt,Vt,Yt){this._stageTaskMap=(0,n.createHashMap)(),this.ecInstance=Ht,this.api=Rt,Vt=this._dataProcessorHandlers=Vt.slice(),Yt=this._visualHandlers=Yt.slice(),this._allHandlers=Vt.concat(Yt)}return Zt.prototype.restoreData=function(Ht,Rt){Ht.restoreData(Rt),this._stageTaskMap.each(function(Vt){var Yt=Vt.overallTask;Yt&&Yt.dirty()})},Zt.prototype.getPerformArgs=function(Ht,Rt){if(Ht.__pipeline){var Vt=this._pipelineMap.get(Ht.__pipeline.id),Yt=Vt.context,ve=!Rt&&Vt.progressiveEnabled&&(!Yt||Yt.progressiveRender)&&Ht.__idxInPipeline>Vt.blockIndex?Vt.step:null,He=Yt&&Yt.modDataCount;return{step:ve,modBy:null!=He?Math.ceil(He/ve):null,modDataCount:He}}},Zt.prototype.getPipeline=function(Ht){return this._pipelineMap.get(Ht)},Zt.prototype.updateStreamModes=function(Ht,Rt){var Vt=this._pipelineMap.get(Ht.uid),se=Ht.getData().count(),ve=Vt.progressiveEnabled&&Rt.incrementalPrepareRender&&se>=Vt.threshold,He=Ht.get("large")&&se>=Ht.get("largeThreshold"),ze="mod"===Ht.get("progressiveChunkMode")?se:null;Ht.pipelineContext=Vt.context={progressiveRender:ve,modDataCount:ze,large:He}},Zt.prototype.restorePipelines=function(Ht){var Rt=this,Vt=Rt._pipelineMap=(0,n.createHashMap)();Ht.eachSeries(function(Yt){var se=Yt.getProgressive(),ve=Yt.uid;Vt.set(ve,{id:ve,head:null,tail:null,threshold:Yt.getProgressiveThreshold(),progressiveEnabled:se&&!(Yt.preventIncremental&&Yt.preventIncremental()),blockIndex:-1,step:Math.round(se||700),count:0}),Rt._pipe(Yt,Yt.dataTask)})},Zt.prototype.prepareStageTasks=function(){var Ht=this._stageTaskMap,Rt=this.api.getModel(),Vt=this.api;(0,n.each)(this._allHandlers,function(Yt){var se=Ht.get(Yt.uid)||Ht.set(Yt.uid,{});(0,n.assert)(!(Yt.reset&&Yt.overallReset),""),Yt.reset&&this._createSeriesStageTask(Yt,se,Rt,Vt),Yt.overallReset&&this._createOverallStageTask(Yt,se,Rt,Vt)},this)},Zt.prototype.prepareView=function(Ht,Rt,Vt,Yt){var se=Ht.renderTask,ve=se.context;ve.model=Rt,ve.ecModel=Vt,ve.api=Yt,se.__block=!Ht.incrementalPrepareRender,this._pipe(Rt,se)},Zt.prototype.performDataProcessorTasks=function(Ht,Rt){this._performStageTasks(this._dataProcessorHandlers,Ht,Rt,{block:!0})},Zt.prototype.performVisualTasks=function(Ht,Rt,Vt){this._performStageTasks(this._visualHandlers,Ht,Rt,Vt)},Zt.prototype._performStageTasks=function(Ht,Rt,Vt,Yt){Yt=Yt||{};var se=!1,ve=this;function He(ze,qe){return ze.setDirty&&(!ze.dirtyMap||ze.dirtyMap.get(qe.__pipeline.id))}(0,n.each)(Ht,function(ze,qe){if(!Yt.visualType||Yt.visualType===ze.visualType){var yr=ve._stageTaskMap.get(ze.uid),fe=yr.seriesTaskMap,Me=yr.overallTask;if(Me){var Ce,Ie=Me.agentStubMap;Ie.each(function(ir){He(Yt,ir)&&(ir.dirty(),Ce=!0)}),Ce&&Me.dirty(),ve.updatePayload(Me,Vt);var Ue=ve.getPerformArgs(Me,Yt.block);Ie.each(function(ir){ir.perform(Ue)}),Me.perform(Ue)&&(se=!0)}else fe&&fe.each(function(ir,cr){He(Yt,ir)&&ir.dirty();var xr=ve.getPerformArgs(ir,Yt.block);xr.skip=!ze.performRawSeries&&Rt.isSeriesFiltered(ir.context.model),ve.updatePayload(ir,Vt),ir.perform(xr)&&(se=!0)})}}),this.unfinished=se||this.unfinished},Zt.prototype.performSeriesTasks=function(Ht){var Rt;Ht.eachSeries(function(Vt){Rt=Vt.dataTask.perform()||Rt}),this.unfinished=Rt||this.unfinished},Zt.prototype.plan=function(){this._pipelineMap.each(function(Ht){var Rt=Ht.tail;do{if(Rt.__block){Ht.blockIndex=Rt.__idxInPipeline;break}Rt=Rt.getUpstream()}while(Rt)})},Zt.prototype.updatePayload=function(Ht,Rt){"remain"!==Rt&&(Ht.context.payload=Rt)},Zt.prototype._createSeriesStageTask=function(Ht,Rt,Vt,Yt){var se=this,ve=Rt.seriesTaskMap,He=Rt.seriesTaskMap=(0,n.createHashMap)(),ze=Ht.seriesType,qe=Ht.getTargetSeries;function yr(fe){var Me=fe.uid,Ce=He.set(Me,ve&&ve.get(Me)||(0,vo.v)({plan:Za,reset:Co,count:Re}));Ce.context={model:fe,ecModel:Vt,api:Yt,useClearVisual:Ht.isVisual&&!Ht.isLayout,plan:Ht.plan,reset:Ht.reset,scheduler:se},se._pipe(fe,Ce)}Ht.createOnAllSeries?Vt.eachRawSeries(yr):ze?Vt.eachRawSeriesByType(ze,yr):qe&&qe(Vt,Yt).each(yr)},Zt.prototype._createOverallStageTask=function(Ht,Rt,Vt,Yt){var se=this,ve=Rt.overallTask=Rt.overallTask||(0,vo.v)({reset:Fu});ve.context={ecModel:Vt,api:Yt,overallReset:Ht.overallReset,scheduler:se};var He=ve.agentStubMap,ze=ve.agentStubMap=(0,n.createHashMap)(),qe=Ht.seriesType,yr=Ht.getTargetSeries,fe=!0,Me=!1;function Ie(Ue){var ir=Ue.uid,cr=ze.set(ir,He&&He.get(ir)||(Me=!0,(0,vo.v)({reset:Cs,onDirty:$o})));cr.context={model:Ue,overallProgress:fe},cr.agent=ve,cr.__block=fe,se._pipe(Ue,cr)}(0,n.assert)(!Ht.createOnAllSeries,""),qe?Vt.eachRawSeriesByType(qe,Ie):yr?yr(Vt,Yt).each(Ie):(fe=!1,(0,n.each)(Vt.getSeries(),Ie)),Me&&ve.dirty()},Zt.prototype._pipe=function(Ht,Rt){var Yt=this._pipelineMap.get(Ht.uid);!Yt.head&&(Yt.head=Rt),Yt.tail&&Yt.tail.pipe(Rt),Yt.tail=Rt,Rt.__idxInPipeline=Yt.count++,Rt.__pipeline=Yt},Zt.wrapStageHandler=function(Ht,Rt){return(0,n.isFunction)(Ht)&&(Ht={overallReset:Ht,seriesType:Fa(Ht)}),Ht.uid=(0,$l.Kr)("stageHandler"),Rt&&(Ht.visualType=Rt),Ht},Zt}();function Fu(Zt){Zt.overallReset(Zt.ecModel,Zt.api,Zt.payload)}function Cs(Zt){return Zt.overallProgress&&no}function no(){this.agent.dirty(),this.getDownstream().dirty()}function $o(){this.agent&&this.agent.dirty()}function Za(Zt){return Zt.plan?Zt.plan(Zt.model,Zt.ecModel,Zt.api,Zt.payload):null}function Co(Zt){Zt.useClearVisual&&Zt.data.clearAllVisual();var Ht=Zt.resetDefines=(0,yt.kF)(Zt.reset(Zt.model,Zt.ecModel,Zt.api,Zt.payload));return Ht.length>1?(0,n.map)(Ht,function(Rt,Vt){return si(Vt)}):Xl}var Xl=si(0);function si(Zt){return function(Ht,Rt){var Vt=Rt.data,Yt=Rt.resetDefines[Zt];if(Yt&&Yt.dataEach)for(var se=Ht.start;se<Ht.end;se++)Yt.dataEach(Vt,se);else Yt&&Yt.progress&&Yt.progress(Ht,Vt)}}function Re(Zt){return Zt.data.count()}function Fa(Zt){pr=null;try{Zt(rr,Tn)}catch{}return pr}var pr,rr={},Tn={};function gr(Zt,Ht){for(var Rt in Ht.prototype)Zt[Rt]=n.noop}gr(rr,A),gr(Tn,rt),rr.eachSeriesByType=rr.eachRawSeriesByType=function(Zt){pr=Zt},rr.eachComponent=function(Zt){"series"===Zt.mainType&&Zt.subType&&(pr=Zt.subType)};const Yr=go;var he=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const ur={color:he,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],he]};var Fr="#B9B8CE",sr="#100C2A",Xo=function(){return{axisLine:{lineStyle:{color:Fr}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},_o=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Ms={darkMode:!0,color:_o,backgroundColor:sr,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Fr}},textStyle:{color:Fr},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Fr}},dataZoom:{borderColor:"#71708A",textStyle:{color:Fr},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Fr}},timeline:{lineStyle:{color:Fr},label:{color:Fr},controlStyle:{color:Fr,borderColor:Fr}},calendar:{itemStyle:{color:sr},dayLabel:{color:Fr},monthLabel:{color:Fr},yearLabel:{color:Fr}},timeAxis:Xo(),logAxis:Xo(),valueAxis:Xo(),categoryAxis:Xo(),line:{symbol:"circle"},graph:{color:_o},gauge:{title:{color:Fr},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Fr},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Ms.categoryAxis.splitLine.show=!1;const Or=Ms;var bs=D(8789),En=function(){function Zt(){}return Zt.prototype.normalizeQuery=function(Ht){var Rt={},Vt={},Yt={};if(n.isString(Ht)){var se=(0,bs.u9)(Ht);Rt.mainType=se.main||null,Rt.subType=se.sub||null}else{var ve=["Index","Name","Id"],He={name:1,dataIndex:1,dataType:1};n.each(Ht,function(ze,qe){for(var yr=!1,fe=0;fe<ve.length;fe++){var Me=ve[fe],Ce=qe.lastIndexOf(Me);if(Ce>0&&Ce===qe.length-Me.length){var Ie=qe.slice(0,Ce);"data"!==Ie&&(Rt.mainType=Ie,Rt[Me.toLowerCase()]=ze,yr=!0)}}He.hasOwnProperty(qe)&&(Vt[qe]=ze,yr=!0),yr||(Yt[qe]=ze)})}return{cptQuery:Rt,dataQuery:Vt,otherQuery:Yt}},Zt.prototype.filter=function(Ht,Rt){var Vt=this.eventInfo;if(!Vt)return!0;var Yt=Vt.targetEl,se=Vt.packedEvent,ve=Vt.model,He=Vt.view;if(!ve||!He)return!0;var ze=Rt.cptQuery,qe=Rt.dataQuery;return yr(ze,ve,"mainType")&&yr(ze,ve,"subType")&&yr(ze,ve,"index","componentIndex")&&yr(ze,ve,"name")&&yr(ze,ve,"id")&&yr(qe,se,"name")&&yr(qe,se,"dataIndex")&&yr(qe,se,"dataType")&&(!He.filterForExposedEvent||He.filterForExposedEvent(Ht,Rt.otherQuery,Yt,se));function yr(fe,Me,Ce,Ie){return null==fe[Ce]||Me[Ie||Ce]===fe[Ce]}},Zt.prototype.afterTrigger=function(){this.eventInfo=null},Zt}(),xa=["symbol","symbolSize","symbolRotate","symbolOffset"],Sa=xa.concat(["symbolKeepAspect"]),zn={createOnAllSeries:!0,performRawSeries:!0,reset:function(Zt,Ht){var Rt=Zt.getData();if(Zt.legendIcon&&Rt.setVisual("legendIcon",Zt.legendIcon),Zt.hasSymbolVisual){for(var Vt={},Yt={},se=!1,ve=0;ve<xa.length;ve++){var He=xa[ve],ze=Zt.get(He);(0,n.isFunction)(ze)?(se=!0,Yt[He]=ze):Vt[He]=ze}if(Vt.symbol=Vt.symbol||Zt.defaultSymbol,Rt.setVisual((0,n.extend)({legendIcon:Zt.legendIcon||Vt.symbol,symbolKeepAspect:Zt.get("symbolKeepAspect")},Vt)),!Ht.isSeriesFiltered(Zt)){var qe=(0,n.keys)(Yt);return{dataEach:se?function yr(fe,Me){for(var Ce=Zt.getRawValue(Me),Ie=Zt.getDataParams(Me),Ue=0;Ue<qe.length;Ue++){var ir=qe[Ue];fe.setItemVisual(Me,ir,Yt[ir](Ce,Ie))}}:null}}}}},Mo={createOnAllSeries:!0,performRawSeries:!0,reset:function(Zt,Ht){if(Zt.hasSymbolVisual&&!Ht.isSeriesFiltered(Zt))return{dataEach:Zt.getData().hasItemOption?function Vt(Yt,se){for(var ve=Yt.getItemModel(se),He=0;He<Sa.length;He++){var ze=Sa[He],qe=ve.getShallow(ze,!0);null!=qe&&Yt.setItemVisual(se,ze,qe)}}:null}}},Kr=D(2332),ka=D(9723),za=D(7789),ta=D(4314),On=D(2575),Ni=D(3237),ea=D(7587);const xi=new gt.Z;var dr=D(800),kr=D(1524),Mr="5.4.1",Un={zrender:"5.4.1"},Ko={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},Ln="__flagInMainProcess",Fn="__pendingUpdate",Po="__needsUpdateStatus",As=/^[a-zA-Z0-9_]+$/,Ea="__connectUpdateStatus";function vn(Zt){return function(){for(var Ht=[],Rt=0;Rt<arguments.length;Rt++)Ht[Rt]=arguments[Rt];if(!this.isDisposed())return zi(this,Zt,Ht)}}function zr(Zt){return function(){for(var Ht=[],Rt=0;Rt<arguments.length;Rt++)Ht[Rt]=arguments[Rt];return zi(this,Zt,Ht)}}function zi(Zt,Ht,Rt){return Rt[0]=Rt[0]&&Rt[0].toLowerCase(),gt.Z.prototype[Ht].apply(Zt,Rt)}var Ua=function(Zt){function Ht(){return null!==Zt&&Zt.apply(this,arguments)||this}return(0,B.ZT)(Ht,Zt),Ht}(gt.Z),Jo=Ua.prototype;Jo.on=zr("on"),Jo.off=zr("off");var io,Oo,Qo,ao,qo,an,oo,so,wa,Os,al,Ui,Ha,li,Ii,lo,ui,Si,gn=function(Zt){function Ht(Rt,Vt,Yt){var se=Zt.call(this,new En)||this;se._chartsViews=[],se._chartsMap={},se._componentsViews=[],se._componentsMap={},se._pendingActions=[],Yt=Yt||{},(0,n.isString)(Vt)&&(Vt=pa[Vt]),se._dom=Rt;var fe=se._zr=St.init(Rt,{renderer:Yt.renderer||"canvas",devicePixelRatio:Yt.devicePixelRatio,width:Yt.width,height:Yt.height,ssr:Yt.ssr,useDirtyRect:(0,n.retrieve2)(Yt.useDirtyRect,!1),useCoarsePointer:(0,n.retrieve2)(Yt.useCoarsePointer,"auto"),pointerSize:Yt.pointerSize});se._ssr=Yt.ssr,se._throttledZrFlush=(0,Ne.P2)((0,n.bind)(fe.flush,fe),17),(Vt=(0,n.clone)(Vt))&&Cr(Vt,!0),se._theme=Vt,se._locale=(0,On.D0)(Yt.locale||On.sO),se._coordSysMgr=new ot.Z;var Me=se._api=Ii(se);function Ce(Ie,Ue){return Ie.__prio-Ue.__prio}return(0,mt.Z)(Eo,Ce),(0,mt.Z)(Nn,Ce),se._scheduler=new Yr(se,Me,Nn,Eo),se._messageCenter=new Ua,se._initEvents(),se.resize=(0,n.bind)(se.resize,se),fe.animation.on("frame",se._onframe,se),Os(fe,se),al(fe,se),(0,n.setAsPrimitive)(se),se}return(0,B.ZT)(Ht,Zt),Ht.prototype._onframe=function(){if(!this._disposed){Si(this);var Rt=this._scheduler;if(this[Fn]){var Vt=this[Fn].silent;this[Ln]=!0;try{io(this),ao.update.call(this,null,this[Fn].updateParams)}catch(ze){throw this[Ln]=!1,this[Fn]=null,ze}this._zr.flush(),this[Ln]=!1,this[Fn]=null,so.call(this,Vt),wa.call(this,Vt)}else if(Rt.unfinished){var Yt=1,se=this._model,ve=this._api;Rt.unfinished=!1;do{var He=+new Date;Rt.performSeriesTasks(se),Rt.performDataProcessorTasks(se),an(this,se),Rt.performVisualTasks(se),li(this,this._model,ve,"remain",{}),Yt-=+new Date-He}while(Yt>0&&Rt.unfinished);Rt.unfinished||this._zr.flush()}}},Ht.prototype.getDom=function(){return this._dom},Ht.prototype.getId=function(){return this.id},Ht.prototype.getZr=function(){return this._zr},Ht.prototype.isSSR=function(){return this._ssr},Ht.prototype.setOption=function(Rt,Vt,Yt){if(!this[Ln]){if(this._disposed)return;var se,ve,He;if((0,n.isObject)(Vt)&&(Yt=Vt.lazyUpdate,se=Vt.silent,ve=Vt.replaceMerge,He=Vt.transition,Vt=Vt.notMerge),this[Ln]=!0,!this._model||Vt){var ze=new Mt(this._api),qe=this._theme,yr=this._model=new A;yr.scheduler=this._scheduler,yr.ssr=this._ssr,yr.init(null,null,null,qe,this._locale,ze)}this._model.setOption(Rt,{replaceMerge:ve},ts);var fe={seriesTransition:He,optionChanged:!0};if(Yt)this[Fn]={silent:se,updateParams:fe},this[Ln]=!1,this.getZr().wakeUp();else{try{io(this),ao.update.call(this,null,fe)}catch(Me){throw this[Fn]=null,this[Ln]=!1,Me}this._ssr||this._zr.flush(),this[Fn]=null,this[Ln]=!1,so.call(this,se),wa.call(this,se)}}},Ht.prototype.setTheme=function(){(0,ka.Sh)("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Ht.prototype.getModel=function(){return this._model},Ht.prototype.getOption=function(){return this._model&&this._model.getOption()},Ht.prototype.getWidth=function(){return this._zr.getWidth()},Ht.prototype.getHeight=function(){return this._zr.getHeight()},Ht.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||_t.Z.hasGlobalWindow&&window.devicePixelRatio||1},Ht.prototype.getRenderedCanvas=function(Rt){return this.renderToCanvas(Rt)},Ht.prototype.renderToCanvas=function(Rt){return this._zr.painter.getRenderedCanvas({backgroundColor:(Rt=Rt||{}).backgroundColor||this._model.get("backgroundColor"),pixelRatio:Rt.pixelRatio||this.getDevicePixelRatio()})},Ht.prototype.renderToSVGString=function(Rt){return this._zr.painter.renderToString({useViewBox:(Rt=Rt||{}).useViewBox})},Ht.prototype.getSvgDataURL=function(){if(_t.Z.svgSupported){var Rt=this._zr,Vt=Rt.storage.getDisplayList();return(0,n.each)(Vt,function(Yt){Yt.stopAnimation(null,!0)}),Rt.painter.toDataURL()}},Ht.prototype.getDataURL=function(Rt){if(!this._disposed){var Yt=this._model,se=[],ve=this;(0,n.each)((Rt=Rt||{}).excludeComponents,function(ze){Yt.eachComponent({mainType:ze},function(qe){var yr=ve._componentsMap[qe.__viewId];yr.group.ignore||(se.push(yr),yr.group.ignore=!0)})});var He="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(Rt).toDataURL("image/"+(Rt&&Rt.type||"png"));return(0,n.each)(se,function(ze){ze.group.ignore=!1}),He}},Ht.prototype.getConnectedDataURL=function(Rt){if(!this._disposed){var Vt="svg"===Rt.type,Yt=this.group,se=Math.min,ve=Math.max,He=1/0;if(Xn[Yt]){var ze=He,qe=He,yr=-He,fe=-He,Me=[],Ce=Rt&&Rt.pixelRatio||this.getDevicePixelRatio();(0,n.each)(Wa,function(br,Jr){if(br.group===Yt){var _n=Vt?br.getZr().painter.getSvgDom().innerHTML:br.renderToCanvas((0,n.clone)(Rt)),on=br.getDom().getBoundingClientRect();ze=se(on.left,ze),qe=se(on.top,qe),yr=ve(on.right,yr),fe=ve(on.bottom,fe),Me.push({dom:_n,left:on.left,top:on.top})}});var Ie=(yr*=Ce)-(ze*=Ce),Ue=(fe*=Ce)-(qe*=Ce),ir=dr.qW.createCanvas(),cr=St.init(ir,{renderer:Vt?"svg":"canvas"});if(cr.resize({width:Ie,height:Ue}),Vt){var xr="";return(0,n.each)(Me,function(br){xr+='<g transform="translate('+(br.left-ze)+","+(br.top-qe)+')">'+br.dom+"</g>"}),cr.painter.getSvgRoot().innerHTML=xr,Rt.connectedBackgroundColor&&cr.painter.setBackgroundColor(Rt.connectedBackgroundColor),cr.refreshImmediately(),cr.painter.toDataURL()}return Rt.connectedBackgroundColor&&cr.add(new Kt.Z({shape:{x:0,y:0,width:Ie,height:Ue},style:{fill:Rt.connectedBackgroundColor}})),(0,n.each)(Me,function(br){var Jr=new ne.ZP({style:{x:br.left*Ce-ze,y:br.top*Ce-qe,image:br.dom}});cr.add(Jr)}),cr.refreshImmediately(),ir.toDataURL("image/"+(Rt&&Rt.type||"png"))}return this.getDataURL(Rt)}},Ht.prototype.convertToPixel=function(Rt,Vt){return qo(this,"convertToPixel",Rt,Vt)},Ht.prototype.convertFromPixel=function(Rt,Vt){return qo(this,"convertFromPixel",Rt,Vt)},Ht.prototype.containPixel=function(Rt,Vt){if(!this._disposed){var se,ve=yt.pm(this._model,Rt);return(0,n.each)(ve,function(He,ze){ze.indexOf("Models")>=0&&(0,n.each)(He,function(qe){var yr=qe.coordinateSystem;if(yr&&yr.containPoint)se=se||!!yr.containPoint(Vt);else if("seriesModels"===ze){var fe=this._chartsMap[qe.__viewId];fe&&fe.containPoint&&(se=se||fe.containPoint(Vt,qe))}},this)},this),!!se}},Ht.prototype.getVisual=function(Rt,Vt){var se=yt.pm(this._model,Rt,{defaultMainType:"series"}),He=se.seriesModel.getData(),ze=se.hasOwnProperty("dataIndexInside")?se.dataIndexInside:se.hasOwnProperty("dataIndex")?He.indexOfRawIndex(se.dataIndex):null;return null!=ze?(0,Kr.Or)(He,ze,Vt):(0,Kr.UL)(He,Vt)},Ht.prototype.getViewOfComponentModel=function(Rt){return this._componentsMap[Rt.__viewId]},Ht.prototype.getViewOfSeriesModel=function(Rt){return this._chartsMap[Rt.__viewId]},Ht.prototype._initEvents=function(){var Rt=this;(0,n.each)(ji,function(Vt){var Yt=function(se){var ze,ve=Rt.getModel(),He=se.target;if("globalout"===Vt?ze={}:He&&(0,Ni.o)(He,function(Ie){var Ue=(0,Te.A)(Ie);if(Ue&&null!=Ue.dataIndex){var ir=Ue.dataModel||ve.getSeriesByIndex(Ue.seriesIndex);return ze=ir&&ir.getDataParams(Ue.dataIndex,Ue.dataType)||{},!0}if(Ue.eventData)return ze=(0,n.extend)({},Ue.eventData),!0},!0),ze){var yr=ze.componentType,fe=ze.componentIndex;("markLine"===yr||"markPoint"===yr||"markArea"===yr)&&(yr="series",fe=ze.seriesIndex);var Me=yr&&null!=fe&&ve.getComponent(yr,fe),Ce=Me&&Rt["series"===Me.mainType?"_chartsMap":"_componentsMap"][Me.__viewId];ze.event=se,ze.type=Vt,Rt._$eventProcessor.eventInfo={targetEl:He,packedEvent:ze,model:Me,view:Ce},Rt.trigger(Vt,ze)}};Yt.zrEventfulCallAtLast=!0,Rt._zr.on(Vt,Yt,Rt)}),(0,n.each)(ra,function(Vt,Yt){Rt._messageCenter.on(Yt,function(se){this.trigger(Yt,se)},Rt)}),(0,n.each)(["selectchanged"],function(Vt){Rt._messageCenter.on(Vt,function(Yt){this.trigger(Vt,Yt)},Rt)}),(0,za.s)(this._messageCenter,this,this._api)},Ht.prototype.isDisposed=function(){return this._disposed},Ht.prototype.clear=function(){this._disposed||this.setOption({series:[]},!0)},Ht.prototype.dispose=function(){if(!this._disposed){this._disposed=!0,this.getDom()&&yt.P$(this.getDom(),wo,"");var Vt=this,Yt=Vt._api,se=Vt._model;(0,n.each)(Vt._componentsViews,function(ve){ve.dispose(se,Yt)}),(0,n.each)(Vt._chartsViews,function(ve){ve.dispose(se,Yt)}),Vt._zr.dispose(),Vt._dom=Vt._model=Vt._chartsMap=Vt._componentsMap=Vt._chartsViews=Vt._componentsViews=Vt._scheduler=Vt._api=Vt._zr=Vt._throttledZrFlush=Vt._theme=Vt._coordSysMgr=Vt._messageCenter=null,delete Wa[Vt.id]}},Ht.prototype.resize=function(Rt){if(!this[Ln]){if(this._disposed)return;this._zr.resize(Rt);var Vt=this._model;if(this._loadingFX&&this._loadingFX.resize(),Vt){var Yt=Vt.resetOption("media"),se=Rt&&Rt.silent;this[Fn]&&(null==se&&(se=this[Fn].silent),Yt=!0,this[Fn]=null),this[Ln]=!0;try{Yt&&io(this),ao.update.call(this,{type:"resize",animation:(0,n.extend)({duration:0},Rt&&Rt.animation)})}catch(ve){throw this[Ln]=!1,ve}this[Ln]=!1,so.call(this,se),wa.call(this,se)}}},Ht.prototype.showLoading=function(Rt,Vt){if(!this._disposed&&((0,n.isObject)(Rt)&&(Vt=Rt,Rt=""),Rt=Rt||"default",this.hideLoading(),Ri[Rt])){var Yt=Ri[Rt](this._api,Vt),se=this._zr;this._loadingFX=Yt,se.add(Yt)}},Ht.prototype.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},Ht.prototype.makeActionFromEvent=function(Rt){var Vt=(0,n.extend)({},Rt);return Vt.type=ra[Rt.type],Vt},Ht.prototype.dispatchAction=function(Rt,Vt){if(!this._disposed&&((0,n.isObject)(Vt)||(Vt={silent:!!Vt}),Va[Rt.type]&&this._model)){if(this[Ln])return void this._pendingActions.push(Rt);var Yt=Vt.silent;oo.call(this,Rt,Yt);var se=Vt.flush;se?this._zr.flush():!1!==se&&_t.Z.browser.weChat&&this._throttledZrFlush(),so.call(this,Yt),wa.call(this,Yt)}},Ht.prototype.updateLabelLayout=function(){xi.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},Ht.prototype.appendData=function(Rt){if(!this._disposed){var Vt=Rt.seriesIndex;this.getModel().getSeriesByIndex(Vt).appendData(Rt),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},Ht.internalField=function(){function Rt(fe){fe.clearColorPalette(),fe.eachSeries(function(Me){Me.clearColorPalette()})}function Yt(fe){for(var Me=[],Ce=fe.currentStates,Ie=0;Ie<Ce.length;Ie++){var Ue=Ce[Ie];"emphasis"===Ue||"blur"===Ue||"select"===Ue||Me.push(Ue)}fe.selected&&fe.states.select&&Me.push("select"),fe.hoverState===ye.wU&&fe.states.emphasis?Me.push("emphasis"):fe.hoverState===ye.CX&&fe.states.blur&&Me.push("blur"),fe.useStates(Me)}function He(fe,Me){if(!fe.preventAutoZ){var Ce=fe.get("z")||0,Ie=fe.get("zlevel")||0;Me.eachRendered(function(Ue){return ze(Ue,Ce,Ie,-1/0),!0})}}function ze(fe,Me,Ce,Ie){var Ue=fe.getTextContent(),ir=fe.getTextGuideLine();if(fe.isGroup)for(var xr=fe.childrenRef(),br=0;br<xr.length;br++)Ie=Math.max(ze(xr[br],Me,Ce,Ie),Ie);else fe.z=Me,fe.zlevel=Ce,Ie=Math.max(fe.z2,Ie);if(Ue&&(Ue.z=Me,Ue.zlevel=Ce,isFinite(Ie)&&(Ue.z2=Ie+2)),ir){var Jr=fe.textGuideLineConfig;ir.z=Me,ir.zlevel=Ce,isFinite(Ie)&&(ir.z2=Ie+(Jr&&Jr.showAbove?1:-1))}return Ie}function qe(fe,Me){Me.eachRendered(function(Ce){if(!le.eq(Ce)){var Ie=Ce.getTextContent(),Ue=Ce.getTextGuideLine();Ce.stateTransition&&(Ce.stateTransition=null),Ie&&Ie.stateTransition&&(Ie.stateTransition=null),Ue&&Ue.stateTransition&&(Ue.stateTransition=null),Ce.hasState()?(Ce.prevStates=Ce.currentStates,Ce.clearStates()):Ce.prevStates&&(Ce.prevStates=null)}})}function yr(fe,Me){var Ce=fe.getModel("stateAnimation"),Ie=fe.isAnimationEnabled(),Ue=Ce.get("duration"),ir=Ue>0?{duration:Ue,delay:Ce.get("delay"),easing:Ce.get("easing")}:null;Me.eachRendered(function(cr){if(cr.states&&cr.states.emphasis){if(le.eq(cr))return;if(cr instanceof Xt.ZP&&(0,ye.e9)(cr),cr.__dirty){var xr=cr.prevStates;xr&&cr.useStates(xr)}if(Ie){cr.stateTransition=ir;var br=cr.getTextContent(),Jr=cr.getTextGuideLine();br&&(br.stateTransition=ir),Jr&&(Jr.stateTransition=ir)}cr.__dirty&&Yt(cr)}})}io=function(fe){var Me=fe._scheduler;Me.restorePipelines(fe._model),Me.prepareStageTasks(),Oo(fe,!0),Oo(fe,!1),Me.plan()},Oo=function(fe,Me){for(var Ce=fe._model,Ie=fe._scheduler,Ue=Me?fe._componentsViews:fe._chartsViews,ir=Me?fe._componentsMap:fe._chartsMap,cr=fe._zr,xr=fe._api,br=0;br<Ue.length;br++)Ue[br].__alive=!1;function Jr(on){var Gn=on.__requireNewView;on.__requireNewView=!1;var Hi="_ec_"+on.id+"_"+on.type,jn=!Gn&&ir[Hi];if(!jn){var bn=(0,bs.u9)(on.type);(jn=new(Me?we.Z.getClass(bn.main,bn.sub):Le.Z.getClass(bn.sub))).init(Ce,xr),ir[Hi]=jn,Ue.push(jn),cr.add(jn.group)}on.__viewId=jn.__id=Hi,jn.__alive=!0,jn.__model=on,jn.group.__ecComponentInfo={mainType:on.mainType,index:on.componentIndex},!Me&&Ie.prepareView(jn,on,Ce,xr)}for(Me?Ce.eachComponent(function(on,Gn){"series"!==on&&Jr(Gn)}):Ce.eachSeries(Jr),br=0;br<Ue.length;){var _n=Ue[br];_n.__alive?br++:(!Me&&_n.renderTask.dispose(),cr.remove(_n.group),_n.dispose(Ce,xr),Ue.splice(br,1),ir[_n.__id]===_n&&delete ir[_n.__id],_n.__id=_n.group.__ecComponentInfo=null)}},Qo=function(fe,Me,Ce,Ie,Ue){var ir=fe._model;if(ir.setUpdatePayload(Ce),Ie){var cr={};cr[Ie+"Id"]=Ce[Ie+"Id"],cr[Ie+"Index"]=Ce[Ie+"Index"],cr[Ie+"Name"]=Ce[Ie+"Name"];var xr={mainType:Ie,query:cr};Ue&&(xr.subType=Ue);var Jr,br=Ce.excludeSeriesId;null!=br&&(Jr=(0,n.createHashMap)(),(0,n.each)(yt.kF(br),function(on){var Gn=yt.U5(on,null);null!=Gn&&Jr.set(Gn,!0)})),ir&&ir.eachComponent(xr,function(on){if(!Jr||null==Jr.get(on.id))if((0,ye.xp)(Ce))if(on instanceof pe.Z)Ce.type===ye.Ki&&!Ce.notBlur&&!on.get(["emphasis","disabled"])&&(0,ye.UL)(on,Ce,fe._api);else{var Hi=(0,ye.oJ)(on.mainType,on.componentIndex,Ce.name,fe._api),bn=Hi.dispatchers;Ce.type===ye.Ki&&Hi.focusSelf&&!Ce.notBlur&&(0,ye.zI)(on.mainType,on.componentIndex,fe._api),bn&&(0,n.each)(bn,function($a){Ce.type===ye.Ki?(0,ye.fD)($a):(0,ye.Mh)($a)})}else(0,ye.aG)(Ce)&&on instanceof pe.Z&&((0,ye.og)(on,Ce,fe._api),(0,ye.ci)(on),ui(fe))},fe),ir&&ir.eachComponent(xr,function(on){Jr&&null!=Jr.get(on.id)||_n(fe["series"===Ie?"_chartsMap":"_componentsMap"][on.__viewId])},fe)}else(0,n.each)([].concat(fe._componentsViews).concat(fe._chartsViews),_n);function _n(on){on&&on.__alive&&on[Me]&&on[Me](on.__model,ir,fe._api,Ce)}},ao={prepareAndUpdate:function(fe){io(this),ao.update.call(this,fe,{optionChanged:null!=fe.newOption})},update:function(fe,Me){var Ce=this._model,Ie=this._api,Ue=this._zr,ir=this._coordSysMgr,cr=this._scheduler;if(Ce){Ce.setUpdatePayload(fe),cr.restoreData(Ce,fe),cr.performSeriesTasks(Ce),ir.create(Ce,Ie),cr.performDataProcessorTasks(Ce,fe),an(this,Ce),ir.update(Ce,Ie),Rt(Ce),cr.performVisualTasks(Ce,fe),Ui(this,Ce,Ie,fe,Me);var xr=Ce.get("backgroundColor")||"transparent",br=Ce.get("darkMode");Ue.setBackgroundColor(xr),null!=br&&"auto"!==br&&Ue.setDarkMode(br),xi.trigger("afterupdate",Ce,Ie)}},updateTransform:function(fe){var Me=this,Ce=this._model,Ie=this._api;if(Ce){Ce.setUpdatePayload(fe);var Ue=[];Ce.eachComponent(function(cr,xr){if("series"!==cr){var br=Me.getViewOfComponentModel(xr);if(br&&br.__alive)if(br.updateTransform){var Jr=br.updateTransform(xr,Ce,Ie,fe);Jr&&Jr.update&&Ue.push(br)}else Ue.push(br)}});var ir=(0,n.createHashMap)();Ce.eachSeries(function(cr){var xr=Me._chartsMap[cr.__viewId];if(xr.updateTransform){var br=xr.updateTransform(cr,Ce,Ie,fe);br&&br.update&&ir.set(cr.uid,1)}else ir.set(cr.uid,1)}),Rt(Ce),this._scheduler.performVisualTasks(Ce,fe,{setDirty:!0,dirtyMap:ir}),li(this,Ce,Ie,fe,{},ir),xi.trigger("afterupdate",Ce,Ie)}},updateView:function(fe){var Me=this._model;!Me||(Me.setUpdatePayload(fe),Le.Z.markUpdateMethod(fe,"updateView"),Rt(Me),this._scheduler.performVisualTasks(Me,fe,{setDirty:!0}),Ui(this,Me,this._api,fe,{}),xi.trigger("afterupdate",Me,this._api))},updateVisual:function(fe){var Me=this,Ce=this._model;!Ce||(Ce.setUpdatePayload(fe),Ce.eachSeries(function(Ie){Ie.getData().clearAllVisual()}),Le.Z.markUpdateMethod(fe,"updateVisual"),Rt(Ce),this._scheduler.performVisualTasks(Ce,fe,{visualType:"visual",setDirty:!0}),Ce.eachComponent(function(Ie,Ue){if("series"!==Ie){var ir=Me.getViewOfComponentModel(Ue);ir&&ir.__alive&&ir.updateVisual(Ue,Ce,Me._api,fe)}}),Ce.eachSeries(function(Ie){Me._chartsMap[Ie.__viewId].updateVisual(Ie,Ce,Me._api,fe)}),xi.trigger("afterupdate",Ce,this._api))},updateLayout:function(fe){ao.update.call(this,fe)}},qo=function(fe,Me,Ce,Ie){if(!fe._disposed)for(var cr,Ue=fe._model,ir=fe._coordSysMgr.getCoordinateSystems(),xr=yt.pm(Ue,Ce),br=0;br<ir.length;br++){var Jr=ir[br];if(Jr[Me]&&null!=(cr=Jr[Me](Ue,xr,Ie)))return cr}},an=function(fe,Me){var Ce=fe._chartsMap,Ie=fe._scheduler;Me.eachSeries(function(Ue){Ie.updateStreamModes(Ue,Ce[Ue.__viewId])})},oo=function(fe,Me){var Ce=this,Ie=this.getModel(),Ue=fe.type,ir=fe.escapeConnect,cr=Va[Ue],xr=cr.actionInfo,br=(xr.update||"update").split(":"),Jr=br.pop(),_n=null!=br[0]&&(0,bs.u9)(br[0]);this[Ln]=!0;var on=[fe],Gn=!1;fe.batch&&(Gn=!0,on=(0,n.map)(fe.batch,function(Ta){return(Ta=(0,n.defaults)((0,n.extend)({},Ta),fe)).batch=null,Ta}));var jn,Hi=[],bn=(0,ye.aG)(fe),$a=(0,ye.xp)(fe);if($a&&(0,ye.T5)(this._api),(0,n.each)(on,function(Ta){if((jn=(jn=cr.action(Ta,Ce._model,Ce._api))||(0,n.extend)({},Ta)).type=xr.event||jn.type,Hi.push(jn),$a){var zu=yt.zH(fe),Ti=zu.mainTypeSpecified?zu.queryOptionMap.keys()[0]:"series";Qo(Ce,Jr,Ta,Ti),ui(Ce)}else bn?(Qo(Ce,Jr,Ta,"series"),ui(Ce)):_n&&Qo(Ce,Jr,Ta,_n.main,_n.sub)}),"none"!==Jr&&!$a&&!bn&&!_n)try{this[Fn]?(io(this),ao.update.call(this,fe),this[Fn]=null):ao[Jr].call(this,fe)}catch(Ta){throw this[Ln]=!1,Ta}if(jn=Gn?{type:xr.event||Ue,escapeConnect:ir,batch:Hi}:Hi[0],this[Ln]=!1,!Me){var ql=this._messageCenter;if(ql.trigger(jn.type,jn),bn){var Ns={type:"selectchanged",escapeConnect:ir,selected:(0,ye.C5)(Ie),isFromClick:fe.isFromClick||!1,fromAction:fe.type,fromActionPayload:fe};ql.trigger(Ns.type,Ns)}}},so=function(fe){for(var Me=this._pendingActions;Me.length;){var Ce=Me.shift();oo.call(this,Ce,fe)}},wa=function(fe){!fe&&this.trigger("updated")},Os=function(fe,Me){fe.on("rendered",function(Ce){Me.trigger("rendered",Ce),fe.animation.isFinished()&&!Me[Fn]&&!Me._scheduler.unfinished&&!Me._pendingActions.length&&Me.trigger("finished")})},al=function(fe,Me){fe.on("mouseover",function(Ce){var Ue=(0,Ni.o)(Ce.target,ye.Av);Ue&&((0,ye.$l)(Ue,Ce,Me._api),ui(Me))}).on("mouseout",function(Ce){var Ue=(0,Ni.o)(Ce.target,ye.Av);Ue&&((0,ye.xr)(Ue,Ce,Me._api),ui(Me))}).on("click",function(Ce){var Ue=(0,Ni.o)(Ce.target,function(xr){return null!=(0,Te.A)(xr).dataIndex},!0);if(Ue){var ir=Ue.selected?"unselect":"select",cr=(0,Te.A)(Ue);Me._api.dispatchAction({type:ir,dataType:cr.dataType,dataIndexInside:cr.dataIndex,seriesIndex:cr.seriesIndex,isFromClick:!0})}})},Ui=function(fe,Me,Ce,Ie,Ue){(function Vt(fe){var Me=[],Ce=[],Ie=!1;if(fe.eachComponent(function(xr,br){var Jr=br.get("zlevel")||0,_n=br.get("z")||0,on=br.getZLevelKey();Ie=Ie||!!on,("series"===xr?Ce:Me).push({zlevel:Jr,z:_n,idx:br.componentIndex,type:xr,key:on})}),Ie){var ir,cr,Ue=Me.concat(Ce);(0,mt.Z)(Ue,function(xr,br){return xr.zlevel===br.zlevel?xr.z-br.z:xr.zlevel-br.zlevel}),(0,n.each)(Ue,function(xr){var br=fe.getComponent(xr.type,xr.idx),Jr=xr.zlevel,_n=xr.key;null!=ir&&(Jr=Math.max(ir,Jr)),_n?(Jr===ir&&_n!==cr&&Jr++,cr=_n):cr&&(Jr===ir&&Jr++,cr=""),ir=Jr,br.setZLevel(Jr)})}})(Me),Ha(fe,Me,Ce,Ie,Ue),(0,n.each)(fe._chartsViews,function(ir){ir.__alive=!1}),li(fe,Me,Ce,Ie,Ue),(0,n.each)(fe._chartsViews,function(ir){ir.__alive||ir.remove(Me,Ce)})},Ha=function(fe,Me,Ce,Ie,Ue,ir){(0,n.each)(ir||fe._componentsViews,function(cr){var xr=cr.__model;qe(0,cr),cr.render(xr,Me,Ce,Ie),He(xr,cr),yr(xr,cr)})},li=function(fe,Me,Ce,Ie,Ue,ir){var cr=fe._scheduler;Ue=(0,n.extend)(Ue||{},{updatedSeries:Me.getSeries()}),xi.trigger("series:beforeupdate",Me,Ce,Ue);var xr=!1;Me.eachSeries(function(br){var Jr=fe._chartsMap[br.__viewId];Jr.__alive=!0;var _n=Jr.renderTask;cr.updatePayload(_n,Ie),qe(0,Jr),ir&&ir.get(br.uid)&&_n.dirty(),_n.perform(cr.getPerformArgs(_n))&&(xr=!0),Jr.group.silent=!!br.get("silent"),function ve(fe,Me){var Ce=fe.get("blendMode")||null;Me.eachRendered(function(Ie){Ie.isGroup||(Ie.style.blend=Ce)})}(br,Jr),(0,ye.ci)(br)}),cr.unfinished=xr||cr.unfinished,xi.trigger("series:layoutlabels",Me,Ce,Ue),xi.trigger("series:transition",Me,Ce,Ue),Me.eachSeries(function(br){var Jr=fe._chartsMap[br.__viewId];He(br,Jr),yr(br,Jr)}),function se(fe,Me){var Ue=0;fe._zr.storage.traverse(function(ir){ir.isGroup||Ue++}),Ue>Me.get("hoverLayerThreshold")&&!_t.Z.node&&!_t.Z.worker&&Me.eachSeries(function(ir){if(!ir.preventUsingHoverLayer){var cr=fe._chartsMap[ir.__viewId];cr.__alive&&cr.eachRendered(function(xr){xr.states.emphasis&&(xr.states.emphasis.hoverLayer=!0)})}})}(fe,Me),xi.trigger("series:afterupdate",Me,Ce,Ue)},ui=function(fe){fe[Po]=!0,fe.getZr().wakeUp()},Si=function(fe){!fe[Po]||(fe.getZr().storage.traverse(function(Me){le.eq(Me)||Yt(Me)}),fe[Po]=!1)},Ii=function(fe){return new(function(Me){function Ce(){return null!==Me&&Me.apply(this,arguments)||this}return(0,B.ZT)(Ce,Me),Ce.prototype.getCoordinateSystems=function(){return fe._coordSysMgr.getCoordinateSystems()},Ce.prototype.getComponentByElement=function(Ie){for(;Ie;){var Ue=Ie.__ecComponentInfo;if(null!=Ue)return fe._model.getComponent(Ue.mainType,Ue.index);Ie=Ie.parent}},Ce.prototype.enterEmphasis=function(Ie,Ue){(0,ye.fD)(Ie,Ue),ui(fe)},Ce.prototype.leaveEmphasis=function(Ie,Ue){(0,ye.Mh)(Ie,Ue),ui(fe)},Ce.prototype.enterBlur=function(Ie){(0,ye.SX)(Ie),ui(fe)},Ce.prototype.leaveBlur=function(Ie){(0,ye.VP)(Ie),ui(fe)},Ce.prototype.enterSelect=function(Ie){(0,ye.XX)(Ie),ui(fe)},Ce.prototype.leaveSelect=function(Ie){(0,ye.SJ)(Ie),ui(fe)},Ce.prototype.getModel=function(){return fe.getModel()},Ce.prototype.getViewOfComponentModel=function(Ie){return fe.getViewOfComponentModel(Ie)},Ce.prototype.getViewOfSeriesModel=function(Ie){return fe.getViewOfSeriesModel(Ie)},Ce}(rt))(fe)},lo=function(fe){function Me(Ce,Ie){for(var Ue=0;Ue<Ce.length;Ue++)Ce[Ue][Ea]=Ie}(0,n.each)(ra,function(Ce,Ie){fe._messageCenter.on(Ie,function(Ue){if(Xn[fe.group]&&0!==fe[Ea]){if(Ue&&Ue.escapeConnect)return;var ir=fe.makeActionFromEvent(Ue),cr=[];(0,n.each)(Wa,function(xr){xr!==fe&&xr.group===fe.group&&cr.push(xr)}),Me(cr,0),(0,n.each)(cr,function(xr){1!==xr[Ea]&&xr.dispatchAction(ir)}),Me(cr,2)}})})}}(),Ht}(gt.Z),ol=gn.prototype;ol.on=vn("on"),ol.off=vn("off"),ol.one=function(Zt,Ht,Rt){var Vt=this;(0,ka.Sh)("ECharts#one is deprecated."),this.on.call(this,Zt,function Yt(){for(var se=[],ve=0;ve<arguments.length;ve++)se[ve]=arguments[ve];Ht&&Ht.apply&&Ht.apply(this,se),Vt.off(Zt,Yt)},Rt)};var ji=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],Va={},ra={},Nn=[],ts=[],Eo=[],pa={},Ri={},Wa={},Xn={},Yl=+new Date-0,sl=+new Date-0,wo="_echarts_instance_";function ll(Zt,Ht,Rt){var Vt=!(Rt&&Rt.ssr);if(Vt){var Yt=Ds(Zt);if(Yt)return Yt}var se=new gn(Zt,Ht,Rt);return se.id="ec_"+Yl++,Wa[se.id]=se,Vt&&yt.P$(Zt,wo,se.id),lo(se),xi.trigger("afterinit",se),se}function Kl(Zt){if((0,n.isArray)(Zt)){var Ht=Zt;Zt=null,(0,n.each)(Ht,function(Rt){null!=Rt.group&&(Zt=Rt.group)}),Zt=Zt||"g_"+sl++,(0,n.each)(Ht,function(Rt){Rt.group=Zt})}return Xn[Zt]=!0,Zt}function es(Zt){Xn[Zt]=!1}var ws=es;function Do(Zt){(0,n.isString)(Zt)?Zt=Wa[Zt]:Zt instanceof gn||(Zt=Ds(Zt)),Zt instanceof gn&&!Zt.isDisposed()&&Zt.dispose()}function Ds(Zt){return Wa[yt.IL(Zt,wo)]}function ul(Zt){return Wa[Zt]}function rs(Zt,Ht){pa[Zt]=Ht}function jl(Zt){(0,n.indexOf)(ts,Zt)<0&&ts.push(Zt)}function Lo(Zt,Ht){No(Nn,Zt,Ht,2e3)}function Jl(Zt){Da("afterinit",Zt)}function Ql(Zt){Da("afterupdate",Zt)}function Da(Zt,Ht){xi.on(Zt,Ht)}function yo(Zt,Ht,Rt){(0,n.isFunction)(Ht)&&(Rt=Ht,Ht="");var Vt=(0,n.isObject)(Zt)?Zt.type:[Zt,Zt={event:Ht}][0];Zt.event=(Zt.event||Vt).toLowerCase(),!ra[Ht=Zt.event]&&((0,n.assert)(As.test(Vt)&&As.test(Ht)),Va[Vt]||(Va[Vt]={action:Rt,actionInfo:Zt}),ra[Ht]=Vt)}function Ls(Zt,Ht){ot.Z.register(Zt,Ht)}function ku(Zt){var Ht=ot.Z.get(Zt);if(Ht)return Ht.getDimensionsInfo?Ht.getDimensionsInfo():Ht.dimensions.slice()}function cl(Zt,Ht){No(Eo,Zt,Ht,1e3,"layout")}function na(Zt,Ht){No(Eo,Zt,Ht,3e3,"visual")}var sn=[];function No(Zt,Ht,Rt,Vt,Yt){if(((0,n.isFunction)(Ht)||(0,n.isObject)(Ht))&&(Rt=Ht,Ht=Vt),!((0,n.indexOf)(sn,Rt)>=0)){sn.push(Rt);var se=Yr.wrapStageHandler(Rt,Yt);se.__prio=Ht,se.__raw=Rt,Zt.push(se)}}function ci(Zt,Ht){Ri[Zt]=Ht}function Io(Zt){(0,dr.g2)({createCanvas:Zt})}function Ji(Zt,Ht,Rt){var Vt=(0,kr.C)("registerMap");Vt&&Vt(Zt,Ht,Rt)}function hl(Zt){var Ht=(0,kr.C)("getMap");return Ht&&Ht(Zt)}var Ro=ta.DA;na(2e3,ro),na(4500,fa),na(4500,Mi),na(2e3,zn),na(4500,Mo),na(7e3,function mr(Zt,Ht){Zt.eachRawSeries(function(Rt){if(!Zt.isSeriesFiltered(Rt)){var Vt=Rt.getData();Vt.hasItemVisual()&&Vt.each(function(ve){var He=Vt.getItemVisual(ve,"decal");He&&(Vt.ensureUniqueItemVisual(ve,"style").decal=(0,ea.I)(He,Ht))});var Yt=Vt.getVisual("decal");Yt&&(Vt.getVisual("style").decal=(0,ea.I)(Yt,Ht))}})}),jl(Cr),Lo(900,function Nr(Zt){var Ht=(0,n.createHashMap)();Zt.eachSeries(function(Rt){var Vt=Rt.get("stack");if(Vt){var Yt=Ht.get(Vt)||Ht.set(Vt,[]),se=Rt.getData(),ve={stackResultDimension:se.getCalculationInfo("stackResultDimension"),stackedOverDimension:se.getCalculationInfo("stackedOverDimension"),stackedDimension:se.getCalculationInfo("stackedDimension"),stackedByDimension:se.getCalculationInfo("stackedByDimension"),isStackedByIndex:se.getCalculationInfo("isStackedByIndex"),data:se,seriesModel:Rt};if(!ve.stackedDimension||!ve.isStackedByIndex&&!ve.stackedByDimension)return;Yt.length&&se.setCalculationInfo("stackedOnSeries",Yt[Yt.length-1].seriesModel),Yt.push(ve)}}),Ht.each(re)}),ci("default",function yi(Zt,Ht){n.defaults(Ht=Ht||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var Rt=new Wo.Z,Vt=new Kt.Z({style:{fill:Ht.maskColor},zlevel:Ht.zlevel,z:1e4});Rt.add(Vt);var ve,Yt=new To.ZP({style:{text:Ht.text,fill:Ht.textColor,fontSize:Ht.fontSize,fontWeight:Ht.fontWeight,fontStyle:Ht.fontStyle,fontFamily:Ht.fontFamily},zlevel:Ht.zlevel,z:10001}),se=new Kt.Z({style:{fill:"none"},textContent:Yt,textConfig:{position:"right",distance:10},zlevel:Ht.zlevel,z:10001});return Rt.add(se),Ht.showSpinner&&((ve=new ya.Z({shape:{startAngle:-ti/2,endAngle:-ti/2+.1,r:Ht.spinnerRadius},style:{stroke:Ht.color,lineCap:"round",lineWidth:Ht.lineWidth},zlevel:Ht.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*ti/2}).start("circularInOut"),ve.animateShape(!0).when(1e3,{startAngle:3*ti/2}).delay(300).start("circularInOut"),Rt.add(ve)),Rt.resize=function(){var He=Yt.getBoundingRect().width,ze=Ht.showSpinner?Ht.spinnerRadius:0,qe=(Zt.getWidth()-2*ze-(Ht.showSpinner&&He?10:0)-He)/2-(Ht.showSpinner&&He?0:5+He/2)+(Ht.showSpinner?0:He/2)+(He?0:ze),yr=Zt.getHeight()/2;Ht.showSpinner&&ve.setShape({cx:qe,cy:yr}),se.setShape({x:qe-ze,y:yr-ze,width:2*ze,height:2*ze}),Vt.setShape({x:0,y:0,width:Zt.getWidth(),height:Zt.getHeight()})},Rt.resize(),Rt}),yo({type:ye.Ki,event:ye.Ki,update:ye.Ki},n.noop),yo({type:ye.yx,event:ye.yx,update:ye.yx},n.noop),yo({type:ye.Hg,event:ye.Hg,update:ye.Hg},n.noop),yo({type:ye.JQ,event:ye.JQ,update:ye.JQ},n.noop),yo({type:ye.iK,event:ye.iK,update:ye.iK},n.noop),rs("light",ur),rs("dark",Or);var ia={}},1524:(Ze,te,D)=>{D.d(te,{C:()=>n,M:()=>St});var B={};function St(_t,mt){B[_t]=mt}function n(_t){return B[_t]}},2575:(Ze,te,D)=>{D.d(te,{sO:()=>q,D0:()=>et,Li:()=>st,G8:()=>$,I2:()=>N});var B=D(7838),St=D(1156),mt=D(6615),k={},X={},q=St.Z.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase().indexOf("ZH")>-1?"ZH":"EN";function N(K,_){K=K.toUpperCase(),X[K]=new B.Z(_),k[K]=_}function et(K){if((0,mt.isString)(K)){var _=k[K.toUpperCase()]||{};return"ZH"===K||"EN"===K?(0,mt.clone)(_):(0,mt.merge)((0,mt.clone)(_),(0,mt.clone)(k.EN),!1)}return(0,mt.merge)((0,mt.clone)(K),(0,mt.clone)(k.EN),!1)}function $(K){return X[K]}function st(){return X.EN}N("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),N("ZH",{time:{month:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayOfWeekAbbr:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}})},338:(Ze,te,D)=>{D.d(te,{v:()=>St});var B=D(6615);function St(mt){return new n(mt)}var n=function(){function mt(gt){this._reset=(gt=gt||{}).reset,this._plan=gt.plan,this._count=gt.count,this._onDirty=gt.onDirty,this._dirty=!0}return mt.prototype.perform=function(gt){var X,yt=this._upstream,V=gt&&gt.skip;if(this._dirty&&yt){var k=this.context;k.data=k.outputData=yt.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!V&&(X=this._plan(this.context));var K,q=st(this._modBy),N=this._modDataCount||0,et=st(gt&&gt.modBy),$=gt&&gt.modDataCount||0;function st(Y){return!(Y>=1)&&(Y=1),Y}(q!==et||N!==$)&&(X="reset"),(this._dirty||"reset"===X)&&(this._dirty=!1,K=this._doReset(V)),this._modBy=et,this._modDataCount=$;var _=gt&&gt.step;if(this._dueEnd=yt?yt._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var j=this._dueIndex,it=Math.min(null!=_?this._dueIndex+_:1/0,this._dueEnd);if(!V&&(K||j<it)){var z=this._progress;if((0,B.isArray)(z))for(var tt=0;tt<z.length;tt++)this._doProgress(z[tt],j,it,et,$);else this._doProgress(z,j,it,et,$)}this._dueIndex=it,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:it}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},mt.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},mt.prototype._doProgress=function(gt,yt,V,k,X){_t.reset(yt,V,k,X),this._callingProgress=gt,this._callingProgress({start:yt,end:V,count:V-yt,next:_t.next},this.context)},mt.prototype._doReset=function(gt){var yt,V;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!gt&&this._reset&&((yt=this._reset(this.context))&&yt.progress&&(V=yt.forceFirstProgress,yt=yt.progress),(0,B.isArray)(yt)&&!yt.length&&(yt=null)),this._progress=yt,this._modBy=this._modDataCount=null;var k=this._downstream;return k&&k.dirty(),V},mt.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},mt.prototype.pipe=function(gt){(this._downstream!==gt||this._dirty)&&(this._downstream=gt,gt._upstream=this,gt.dirty())},mt.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},mt.prototype.getUpstream=function(){return this._upstream},mt.prototype.getDownstream=function(){return this._downstream},mt.prototype.setOutputEnd=function(gt){this._outputDueEnd=this._settedOutputEnd=gt},mt}(),_t=function(){var mt,gt,yt,V,k,X={reset:function(et,$,st,K){gt=et,mt=$,yt=st,V=K,k=Math.ceil(V/yt),X.next=yt>1&&V>0?N:q}};return X;function q(){return gt<mt?gt++:null}function N(){var et=gt%k*yt+Math.ceil(gt/k),$=gt>=mt?null:et<V?et:gt;return gt++,$}}()},2936:(Ze,te,D)=>{function B(mt){return null==mt?0:mt.length||1}function St(mt){return mt}D.d(te,{Z:()=>_t});const _t=function(){function mt(gt,yt,V,k,X,q){this._old=gt,this._new=yt,this._oldKeyGetter=V||St,this._newKeyGetter=k||St,this.context=X,this._diffModeMultiple="multiple"===q}return mt.prototype.add=function(gt){return this._add=gt,this},mt.prototype.update=function(gt){return this._update=gt,this},mt.prototype.updateManyToOne=function(gt){return this._updateManyToOne=gt,this},mt.prototype.updateOneToMany=function(gt){return this._updateOneToMany=gt,this},mt.prototype.updateManyToMany=function(gt){return this._updateManyToMany=gt,this},mt.prototype.remove=function(gt){return this._remove=gt,this},mt.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},mt.prototype._executeOneToOne=function(){var gt=this._old,yt=this._new,V={},k=new Array(gt.length),X=new Array(yt.length);this._initIndexMap(gt,null,k,"_oldKeyGetter"),this._initIndexMap(yt,V,X,"_newKeyGetter");for(var q=0;q<gt.length;q++){var N=k[q],et=V[N],$=B(et);if($>1){var st=et.shift();1===et.length&&(V[N]=et[0]),this._update&&this._update(st,q)}else 1===$?(V[N]=null,this._update&&this._update(et,q)):this._remove&&this._remove(q)}this._performRestAdd(X,V)},mt.prototype._executeMultiple=function(){var yt=this._new,V={},k={},X=[],q=[];this._initIndexMap(this._old,V,X,"_oldKeyGetter"),this._initIndexMap(yt,k,q,"_newKeyGetter");for(var N=0;N<X.length;N++){var et=X[N],$=V[et],st=k[et],K=B($),_=B(st);if(K>1&&1===_)this._updateManyToOne&&this._updateManyToOne(st,$),k[et]=null;else if(1===K&&_>1)this._updateOneToMany&&this._updateOneToMany(st,$),k[et]=null;else if(1===K&&1===_)this._update&&this._update(st,$),k[et]=null;else if(K>1&&_>1)this._updateManyToMany&&this._updateManyToMany(st,$),k[et]=null;else if(K>1)for(var j=0;j<K;j++)this._remove&&this._remove($[j]);else this._remove&&this._remove($)}this._performRestAdd(q,k)},mt.prototype._performRestAdd=function(gt,yt){for(var V=0;V<gt.length;V++){var k=gt[V],X=yt[k],q=B(X);if(q>1)for(var N=0;N<q;N++)this._add&&this._add(X[N]);else 1===q&&this._add&&this._add(X);yt[k]=null}},mt.prototype._initIndexMap=function(gt,yt,V,k){for(var X=this._diffModeMultiple,q=0;q<gt.length;q++){var N="_ec_"+this[k](gt[q],q);if(X||(V[q]=N),yt){var et=yt[N],$=B(et);0===$?(yt[N]=q,X&&V.push(N)):1===$?yt[N]=[et,q]:et.push(q)}}},mt}()},16:(Ze,te,D)=>{D.d(te,{ZP:()=>K,hG:()=>yt});var X,B=D(6615),St=D(6566),n=D(2671),_t="undefined",mt=typeof Uint32Array===_t?Array:Uint32Array,gt=typeof Uint16Array===_t?Array:Uint16Array,yt=typeof Int32Array===_t?Array:Int32Array,V=typeof Float64Array===_t?Array:Float64Array,k={float:V,int:yt,ordinal:Array,number:Array,time:V};function q(_){return _>65535?mt:gt}function et(_){var j=_.constructor;return j===Array?_.slice():new j(_)}function $(_,j,it,z,tt){var J=k[it||"float"];if(tt){var Y=_[j],nt=Y&&Y.length;if(nt!==z){for(var U=new J(z),w=0;w<nt;w++)U[w]=Y[w];_[j]=U}}else _[j]=new J(z)}const K=function(){function _(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=(0,B.createHashMap)()}return _.prototype.initData=function(j,it,z){this._provider=j,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var tt=j.getSource(),J=this.defaultDimValueGetter=X[tt.sourceFormat];this._dimValueGetter=z||J,this._rawExtent=[],(0,n.QY)(tt),this._dimensions=(0,B.map)(it,function(nt){return{type:nt.type,property:nt.property}}),this._initDataFromProvider(0,j.count())},_.prototype.getProvider=function(){return this._provider},_.prototype.getSource=function(){return this._provider.getSource()},_.prototype.ensureCalculationDimension=function(j,it){var z=this._calcDimNameToIdx,tt=this._dimensions,J=z.get(j);if(null!=J){if(tt[J].type===it)return J}else J=tt.length;return tt[J]={type:it},z.set(j,J),this._chunks[J]=new k[it||"float"](this._rawCount),this._rawExtent[J]=[1/0,-1/0],J},_.prototype.collectOrdinalMeta=function(j,it){var z=this._chunks[j],tt=this._dimensions[j],J=this._rawExtent,Y=tt.ordinalOffset||0,nt=z.length;0===Y&&(J[j]=[1/0,-1/0]);for(var U=J[j],w=Y;w<nt;w++){var C=z[w]=it.parseAndCollect(z[w]);isNaN(C)||(U[0]=Math.min(C,U[0]),U[1]=Math.max(C,U[1]))}tt.ordinalMeta=it,tt.ordinalOffset=nt,tt.type="ordinal"},_.prototype.getOrdinalMeta=function(j){return this._dimensions[j].ordinalMeta},_.prototype.getDimensionProperty=function(j){var it=this._dimensions[j];return it&&it.property},_.prototype.appendData=function(j){var it=this._provider,z=this.count();it.appendData(j);var tt=it.count();return it.persistent||(tt+=z),z<tt&&this._initDataFromProvider(z,tt,!0),[z,tt]},_.prototype.appendValues=function(j,it){for(var z=this._chunks,tt=this._dimensions,J=tt.length,Y=this._rawExtent,nt=this.count(),U=nt+Math.max(j.length,it||0),w=0;w<J;w++)$(z,w,tt[w].type,U,!0);for(var I=[],P=nt;P<U;P++)for(var M=P-nt,A=0;A<J;A++){var R=X.arrayRows.call(this,j[M]||I,tt[A].property,M,A);z[A][P]=R;var Z=Y[A];R<Z[0]&&(Z[0]=R),R>Z[1]&&(Z[1]=R)}return this._rawCount=this._count=U,{start:nt,end:U}},_.prototype._initDataFromProvider=function(j,it,z){for(var tt=this._provider,J=this._chunks,Y=this._dimensions,nt=Y.length,U=this._rawExtent,w=(0,B.map)(Y,function(ot){return ot.property}),C=0;C<nt;C++){var I=Y[C];U[C]||(U[C]=[1/0,-1/0]),$(J,C,I.type,it,z)}if(tt.fillStorage)tt.fillStorage(j,it,J,U);else for(var P=[],M=j;M<it;M++){P=tt.getItem(M,P);for(var A=0;A<nt;A++){var R=J[A],Z=this._dimValueGetter(P,w[A],M,A);R[M]=Z;var rt=U[A];Z<rt[0]&&(rt[0]=Z),Z>rt[1]&&(rt[1]=Z)}}!tt.persistent&&tt.clean&&tt.clean(),this._rawCount=this._count=it,this._extent=[]},_.prototype.count=function(){return this._count},_.prototype.get=function(j,it){if(!(it>=0&&it<this._count))return NaN;var z=this._chunks[j];return z?z[this.getRawIndex(it)]:NaN},_.prototype.getValues=function(j,it){var z=[],tt=[];if(null==it){it=j,j=[];for(var J=0;J<this._dimensions.length;J++)tt.push(J)}else tt=j;J=0;for(var Y=tt.length;J<Y;J++)z.push(this.get(tt[J],it));return z},_.prototype.getByRawIndex=function(j,it){if(!(it>=0&&it<this._rawCount))return NaN;var z=this._chunks[j];return z?z[it]:NaN},_.prototype.getSum=function(j){var z=0;if(this._chunks[j])for(var tt=0,J=this.count();tt<J;tt++){var Y=this.get(j,tt);isNaN(Y)||(z+=Y)}return z},_.prototype.getMedian=function(j){var it=[];this.each([j],function(J){isNaN(J)||it.push(J)});var z=it.sort(function(J,Y){return J-Y}),tt=this.count();return 0===tt?0:tt%2==1?z[(tt-1)/2]:(z[tt/2]+z[tt/2-1])/2},_.prototype.indexOfRawIndex=function(j){if(j>=this._rawCount||j<0)return-1;if(!this._indices)return j;var it=this._indices,z=it[j];if(null!=z&&z<this._count&&z===j)return j;for(var tt=0,J=this._count-1;tt<=J;){var Y=(tt+J)/2|0;if(it[Y]<j)tt=Y+1;else{if(!(it[Y]>j))return Y;J=Y-1}}return-1},_.prototype.indicesOfNearest=function(j,it,z){var J=this._chunks[j],Y=[];if(!J)return Y;null==z&&(z=1/0);for(var nt=1/0,U=-1,w=0,C=0,I=this.count();C<I;C++){var M=it-J[this.getRawIndex(C)],A=Math.abs(M);A<=z&&((A<nt||A===nt&&M>=0&&U<0)&&(nt=A,U=M,w=0),M===U&&(Y[w++]=C))}return Y.length=w,Y},_.prototype.getIndices=function(){var j,it=this._indices;if(it){var tt=this._count;if((z=it.constructor)===Array){j=new z(tt);for(var J=0;J<tt;J++)j[J]=it[J]}else j=new z(it.buffer,0,tt)}else{var z;for(j=new(z=q(this._rawCount))(this.count()),J=0;J<j.length;J++)j[J]=J}return j},_.prototype.filter=function(j,it){if(!this._count)return this;for(var z=this.clone(),tt=z.count(),Y=new(q(z._rawCount))(tt),nt=[],U=j.length,w=0,C=j[0],I=z._chunks,P=0;P<tt;P++){var M=void 0,A=z.getRawIndex(P);if(0===U)M=it(P);else if(1===U)M=it(I[C][A],P);else{for(var Z=0;Z<U;Z++)nt[Z]=I[j[Z]][A];nt[Z]=P,M=it.apply(null,nt)}M&&(Y[w++]=A)}return w<tt&&(z._indices=Y),z._count=w,z._extent=[],z._updateGetRawIdx(),z},_.prototype.selectRange=function(j){var it=this.clone(),z=it._count;if(!z)return this;var tt=(0,B.keys)(j),J=tt.length;if(!J)return this;var Y=it.count(),U=new(q(it._rawCount))(Y),w=0,C=tt[0],I=j[C][0],P=j[C][1],M=it._chunks,A=!1;if(!it._indices){var R=0;if(1===J){for(var Z=M[tt[0]],rt=0;rt<z;rt++)((ot=Z[rt])>=I&&ot<=P||isNaN(ot))&&(U[w++]=R),R++;A=!0}else if(2===J){Z=M[tt[0]];var at=M[tt[1]],lt=j[tt[1]][0],ht=j[tt[1]][1];for(rt=0;rt<z;rt++){var vt=at[rt];((ot=Z[rt])>=I&&ot<=P||isNaN(ot))&&(vt>=lt&&vt<=ht||isNaN(vt))&&(U[w++]=R),R++}A=!0}}if(!A)if(1===J)for(rt=0;rt<Y;rt++){var ct=it.getRawIndex(rt);((ot=M[tt[0]][ct])>=I&&ot<=P||isNaN(ot))&&(U[w++]=ct)}else for(rt=0;rt<Y;rt++){for(var dt=!0,Mt=(ct=it.getRawIndex(rt),0);Mt<J;Mt++){var ot,Pt=tt[Mt];((ot=M[Pt][ct])<j[Pt][0]||ot>j[Pt][1])&&(dt=!1)}dt&&(U[w++]=it.getRawIndex(rt))}return w<Y&&(it._indices=U),it._count=w,it._extent=[],it._updateGetRawIdx(),it},_.prototype.map=function(j,it){var z=this.clone(j);return this._updateDims(z,j,it),z},_.prototype.modify=function(j,it){this._updateDims(this,j,it)},_.prototype._updateDims=function(j,it,z){for(var tt=j._chunks,J=[],Y=it.length,nt=j.count(),U=[],w=j._rawExtent,C=0;C<it.length;C++)w[it[C]]=[1/0,-1/0];for(var I=0;I<nt;I++){for(var P=j.getRawIndex(I),M=0;M<Y;M++)U[M]=tt[it[M]][P];U[Y]=I;var A=z&&z.apply(null,U);if(null!=A)for("object"!=typeof A&&(J[0]=A,A=J),C=0;C<A.length;C++){var R=it[C],Z=A[C],rt=w[R],ot=tt[R];ot&&(ot[P]=Z),Z<rt[0]&&(rt[0]=Z),Z>rt[1]&&(rt[1]=Z)}}},_.prototype.lttbDownSample=function(j,it){var C,I,P,z=this.clone([j],!0),J=z._chunks[j],Y=this.count(),nt=0,U=Math.floor(1/it),w=this.getRawIndex(0),M=new(q(this._rawCount))(Math.min(2*(Math.ceil(Y/U)+2),Y));M[nt++]=w;for(var A=1;A<Y-1;A+=U){for(var R=Math.min(A+U,Y-1),Z=Math.min(A+2*U,Y),rt=(Z+R)/2,ot=0,at=R;at<Z;at++){var ht=J[lt=this.getRawIndex(at)];isNaN(ht)||(ot+=ht)}ot/=Z-R;var vt=A,ct=Math.min(A+U,Y),dt=A-1,Mt=J[w];C=-1,P=vt;var Pt=-1,wt=0;for(at=vt;at<ct;at++){var lt;ht=J[lt=this.getRawIndex(at)],isNaN(ht)?(wt++,Pt<0&&(Pt=lt)):(I=Math.abs((dt-rt)*(ht-Mt)-(dt-at)*(ot-Mt)))>C&&(C=I,P=lt)}wt>0&&wt<ct-vt&&(M[nt++]=Math.min(Pt,P),P=Math.max(Pt,P)),M[nt++]=P,w=P}return M[nt++]=this.getRawIndex(Y-1),z._count=nt,z._indices=M,z.getRawIndex=this._getRawIdx,z},_.prototype.downSample=function(j,it,z,tt){for(var J=this.clone([j],!0),Y=J._chunks,nt=[],U=Math.floor(1/it),w=Y[j],C=this.count(),I=J._rawExtent[j]=[1/0,-1/0],P=new(q(this._rawCount))(Math.ceil(C/U)),M=0,A=0;A<C;A+=U){U>C-A&&(nt.length=U=C-A);for(var R=0;R<U;R++){var Z=this.getRawIndex(A+R);nt[R]=w[Z]}var rt=z(nt),ot=this.getRawIndex(Math.min(A+tt(nt,rt)||0,C-1));w[ot]=rt,rt<I[0]&&(I[0]=rt),rt>I[1]&&(I[1]=rt),P[M++]=ot}return J._count=M,J._indices=P,J._updateGetRawIdx(),J},_.prototype.each=function(j,it){if(this._count)for(var z=j.length,tt=this._chunks,J=0,Y=this.count();J<Y;J++){var nt=this.getRawIndex(J);switch(z){case 0:it(J);break;case 1:it(tt[j[0]][nt],J);break;case 2:it(tt[j[0]][nt],tt[j[1]][nt],J);break;default:for(var U=0,w=[];U<z;U++)w[U]=tt[j[U]][nt];w[U]=J,it.apply(null,w)}}},_.prototype.getDataExtent=function(j){var it=this._chunks[j],z=[1/0,-1/0];if(!it)return z;var Y,tt=this.count();if(!this._indices)return this._rawExtent[j].slice();if(Y=this._extent[j])return Y.slice();for(var nt=(Y=z)[0],U=Y[1],w=0;w<tt;w++){var I=it[this.getRawIndex(w)];I<nt&&(nt=I),I>U&&(U=I)}return this._extent[j]=Y=[nt,U],Y},_.prototype.getRawDataItem=function(j){var it=this.getRawIndex(j);if(this._provider.persistent)return this._provider.getItem(it);for(var z=[],tt=this._chunks,J=0;J<tt.length;J++)z.push(tt[J][it]);return z},_.prototype.clone=function(j,it){var z=new _,tt=this._chunks,J=j&&(0,B.reduce)(j,function(nt,U){return nt[U]=!0,nt},{});if(J)for(var Y=0;Y<tt.length;Y++)z._chunks[Y]=J[Y]?et(tt[Y]):tt[Y];else z._chunks=tt;return this._copyCommonProps(z),it||(z._indices=this._cloneIndices()),z._updateGetRawIdx(),z},_.prototype._copyCommonProps=function(j){j._count=this._count,j._rawCount=this._rawCount,j._provider=this._provider,j._dimensions=this._dimensions,j._extent=(0,B.clone)(this._extent),j._rawExtent=(0,B.clone)(this._rawExtent)},_.prototype._cloneIndices=function(){if(this._indices){var j=this._indices.constructor,it=void 0;if(j===Array){var z=this._indices.length;it=new j(z);for(var tt=0;tt<z;tt++)it[tt]=this._indices[tt]}else it=new j(this._indices);return it}return null},_.prototype._getRawIdxIdentity=function(j){return j},_.prototype._getRawIdx=function(j){return j<this._count&&j>=0?this._indices[j]:-1},_.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},_.internalField=function(){function j(it,z,tt,J){return(0,St.yQ)(it[J],this._dimensions[J])}X={arrayRows:j,objectRows:function(it,z,tt,J){return(0,St.yQ)(it[z],this._dimensions[J])},keyedColumns:j,original:function(it,z,tt,J){var Y=it&&(it.value??it);return(0,St.yQ)(Y instanceof Array?Y[J]:Y,this._dimensions[J])},typedArray:function(it,z,tt,J){return it[J]}}}(),_}()},6677:(Ze,te,D)=>{D.d(te,{ZP:()=>yt});var B=D(6615);function St(V){return"_EC_"+V}var n=function(){function V(k){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=k||!1}return V.prototype.isDirected=function(){return this._directed},V.prototype.addNode=function(k,X){var q=this._nodesMap;if(!q[St(k=null==k?""+X:""+k)]){var N=new _t(k,X);return N.hostGraph=this,this.nodes.push(N),q[St(k)]=N,N}},V.prototype.getNodeByIndex=function(k){var X=this.data.getRawIndex(k);return this.nodes[X]},V.prototype.getNodeById=function(k){return this._nodesMap[St(k)]},V.prototype.addEdge=function(k,X,q){var N=this._nodesMap,et=this._edgesMap;if(B.isNumber(k)&&(k=this.nodes[k]),B.isNumber(X)&&(X=this.nodes[X]),k instanceof _t||(k=N[St(k)]),X instanceof _t||(X=N[St(X)]),k&&X){var $=k.id+"-"+X.id,st=new mt(k,X,q);return st.hostGraph=this,this._directed&&(k.outEdges.push(st),X.inEdges.push(st)),k.edges.push(st),k!==X&&X.edges.push(st),this.edges.push(st),et[$]=st,st}},V.prototype.getEdgeByIndex=function(k){var X=this.edgeData.getRawIndex(k);return this.edges[X]},V.prototype.getEdge=function(k,X){k instanceof _t&&(k=k.id),X instanceof _t&&(X=X.id);var q=this._edgesMap;return this._directed?q[k+"-"+X]:q[k+"-"+X]||q[X+"-"+k]},V.prototype.eachNode=function(k,X){for(var q=this.nodes,N=q.length,et=0;et<N;et++)q[et].dataIndex>=0&&k.call(X,q[et],et)},V.prototype.eachEdge=function(k,X){for(var q=this.edges,N=q.length,et=0;et<N;et++)q[et].dataIndex>=0&&q[et].node1.dataIndex>=0&&q[et].node2.dataIndex>=0&&k.call(X,q[et],et)},V.prototype.breadthFirstTraverse=function(k,X,q,N){if(X instanceof _t||(X=this._nodesMap[St(X)]),X){for(var et="out"===q?"outEdges":"in"===q?"inEdges":"edges",$=0;$<this.nodes.length;$++)this.nodes[$].__visited=!1;if(!k.call(N,X,null))for(var st=[X];st.length;){var K=st.shift(),_=K[et];for($=0;$<_.length;$++){var j=_[$],it=j.node1===K?j.node2:j.node1;if(!it.__visited){if(k.call(N,it,K))return;st.push(it),it.__visited=!0}}}}},V.prototype.update=function(){for(var k=this.data,X=this.edgeData,q=this.nodes,N=this.edges,et=0,$=q.length;et<$;et++)q[et].dataIndex=-1;for(et=0,$=k.count();et<$;et++)q[k.getRawIndex(et)].dataIndex=et;for(X.filterSelf(function(st){var K=N[X.getRawIndex(st)];return K.node1.dataIndex>=0&&K.node2.dataIndex>=0}),et=0,$=N.length;et<$;et++)N[et].dataIndex=-1;for(et=0,$=X.count();et<$;et++)N[X.getRawIndex(et)].dataIndex=et},V.prototype.clone=function(){for(var k=new V(this._directed),X=this.nodes,q=this.edges,N=0;N<X.length;N++)k.addNode(X[N].id,X[N].dataIndex);for(N=0;N<q.length;N++){var et=q[N];k.addEdge(et.node1.id,et.node2.id,et.dataIndex)}return k},V}(),_t=function(){function V(k,X){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=k??"",this.dataIndex=X??-1}return V.prototype.degree=function(){return this.edges.length},V.prototype.inDegree=function(){return this.inEdges.length},V.prototype.outDegree=function(){return this.outEdges.length},V.prototype.getModel=function(k){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(k)},V.prototype.getAdjacentDataIndices=function(){for(var k={edge:[],node:[]},X=0;X<this.edges.length;X++){var q=this.edges[X];q.dataIndex<0||(k.edge.push(q.dataIndex),k.node.push(q.node1.dataIndex,q.node2.dataIndex))}return k},V}(),mt=function(){function V(k,X,q){this.dataIndex=-1,this.node1=k,this.node2=X,this.dataIndex=q??-1}return V.prototype.getModel=function(k){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(k)},V.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},V}();function gt(V,k){return{getValue:function(X){var q=this[V][k];return q.getStore().get(q.getDimensionIndex(X||"value"),this.dataIndex)},setVisual:function(X,q){this.dataIndex>=0&&this[V][k].setItemVisual(this.dataIndex,X,q)},getVisual:function(X){return this[V][k].getItemVisual(this.dataIndex,X)},setLayout:function(X,q){this.dataIndex>=0&&this[V][k].setItemLayout(this.dataIndex,X,q)},getLayout:function(){return this[V][k].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[V][k].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[V][k].getRawIndex(this.dataIndex)}}}B.mixin(_t,gt("hostGraph","data")),B.mixin(mt,gt("hostGraph","edgeData"));const yt=n},872:(Ze,te,D)=>{D.d(te,{Z:()=>mt});var B=D(6615),St=0;function _t(gt){return(0,B.isObject)(gt)&&null!=gt.value?gt.value:gt+""}const mt=function(){function gt(yt){this.categories=yt.categories||[],this._needCollect=yt.needCollect,this._deduplication=yt.deduplication,this.uid=++St}return gt.createByAxisModel=function(yt){var V=yt.option,k=V.data,X=k&&(0,B.map)(k,_t);return new gt({categories:X,needCollect:!X,deduplication:!1!==V.dedplication})},gt.prototype.getOrdinal=function(yt){return this._getOrCreateMap().get(yt)},gt.prototype.parseAndCollect=function(yt){var V,k=this._needCollect;if(!(0,B.isString)(yt)&&!k)return yt;if(k&&!this._deduplication)return this.categories[V=this.categories.length]=yt,V;var X=this._getOrCreateMap();return null==(V=X.get(yt))&&(k?(this.categories[V=this.categories.length]=yt,X.set(yt,V)):V=NaN),V},gt.prototype._getOrCreateMap=function(){return this._map||(this._map=(0,B.createHashMap)(this.categories))},gt}()},8997:(Ze,te,D)=>{D.d(te,{Z:()=>I});var z,tt,J,Y,nt,U,w,B=D(6615),St=D(7838),n=D(2936),_t=D(4727),mt=D(2747),gt=D(5561),yt=D(4143),V=D(1617),k=D(7166),X=D(2671),q=D(16),N=D(5349),et=B.isObject,$=B.map,st=typeof Int32Array>"u"?Array:Int32Array,j=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],it=["_approximateExtent"];const I=function(){function P(M,A){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var R,Z=!1;(0,N.bB)(M)?(R=M.dimensions,this._dimOmitted=M.isDimensionOmitted(),this._schema=M):(Z=!0,R=M),R=R||["x","y"];for(var rt={},ot=[],at={},lt=!1,ht={},vt=0;vt<R.length;vt++){var ct=R[vt],dt=B.isString(ct)?new gt.Z({name:ct}):ct instanceof gt.Z?ct:new gt.Z(ct),Mt=dt.name;dt.type=dt.type||"float",dt.coordDim||(dt.coordDim=Mt,dt.coordDimIndex=0);var Pt=dt.otherDims=dt.otherDims||{};ot.push(Mt),rt[Mt]=dt,null!=ht[Mt]&&(lt=!0),dt.createInvertedIndices&&(at[Mt]=[]),0===Pt.itemName&&(this._nameDimIdx=vt),0===Pt.itemId&&(this._idDimIdx=vt),Z&&(dt.storeDimIndex=vt)}if(this.dimensions=ot,this._dimInfos=rt,this._initGetDimensionInfo(lt),this.hostModel=A,this._invertedIndicesMap=at,this._dimOmitted){var wt=this._dimIdxToName=B.createHashMap();B.each(ot,function(Ot){wt.set(rt[Ot].storeDimIndex,Ot)})}}return P.prototype.getDimension=function(M){var A=this._recognizeDimIndex(M);if(null==A)return M;if(A=M,!this._dimOmitted)return this.dimensions[A];var R=this._dimIdxToName.get(A);if(null!=R)return R;var Z=this._schema.getSourceDimension(A);return Z?Z.name:void 0},P.prototype.getDimensionIndex=function(M){var A=this._recognizeDimIndex(M);if(null!=A)return A;if(null==M)return-1;var R=this._getDimInfo(M);return R?R.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(M):-1},P.prototype._recognizeDimIndex=function(M){if(B.isNumber(M)||null!=M&&!isNaN(M)&&!this._getDimInfo(M)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(M)<0))return+M},P.prototype._getStoreDimIndex=function(M){return this.getDimensionIndex(M)},P.prototype.getDimensionInfo=function(M){return this._getDimInfo(this.getDimension(M))},P.prototype._initGetDimensionInfo=function(M){var A=this._dimInfos;this._getDimInfo=M?function(R){return A.hasOwnProperty(R)?A[R]:void 0}:function(R){return A[R]}},P.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},P.prototype.mapDimension=function(M,A){var R=this._dimSummary;if(null==A)return R.encodeFirstDimNotExtra[M];var Z=R.encode[M];return Z?Z[A]:null},P.prototype.mapDimensionsAll=function(M){return(this._dimSummary.encode[M]||[]).slice()},P.prototype.getStore=function(){return this._store},P.prototype.initData=function(M,A,R){var rt,Z=this;if(M instanceof q.ZP&&(rt=M),!rt){var ot=this.dimensions,at=(0,X.Ld)(M)||B.isArrayLike(M)?new _t.Pl(M,ot.length):M;rt=new q.ZP;var lt=$(ot,function(ht){return{type:Z._dimInfos[ht].type,property:ht}});rt.initData(at,lt,R)}this._store=rt,this._nameList=(A||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,rt.count()),this._dimSummary=(0,mt.y)(this,this._schema),this.userOutput=this._dimSummary.userOutput},P.prototype.appendData=function(M){var A=this._store.appendData(M);this._doInit(A[0],A[1])},P.prototype.appendValues=function(M,A){var R=this._store.appendValues(M,A.length),Z=R.start,rt=R.end,ot=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),A)for(var at=Z;at<rt;at++)this._nameList[at]=A[at-Z],ot&&w(this,at)},P.prototype._updateOrdinalMeta=function(){for(var M=this._store,A=this.dimensions,R=0;R<A.length;R++){var Z=this._dimInfos[A[R]];Z.ordinalMeta&&M.collectOrdinalMeta(Z.storeDimIndex,Z.ordinalMeta)}},P.prototype._shouldMakeIdFromName=function(){var M=this._store.getProvider();return null==this._idDimIdx&&M.getSource().sourceFormat!==yt.J5&&!M.fillStorage},P.prototype._doInit=function(M,A){if(!(M>=A)){var Z=this._store.getProvider();this._updateOrdinalMeta();var rt=this._nameList,ot=this._idList;if(Z.getSource().sourceFormat===yt.cy&&!Z.pure)for(var ht=[],vt=M;vt<A;vt++){var ct=Z.getItem(vt,ht);if(!this.hasItemOption&&(0,V.Co)(ct)&&(this.hasItemOption=!0),ct){var dt=ct.name;null==rt[vt]&&null!=dt&&(rt[vt]=(0,V.U5)(dt,null));var Mt=ct.id;null==ot[vt]&&null!=Mt&&(ot[vt]=(0,V.U5)(Mt,null))}}if(this._shouldMakeIdFromName())for(vt=M;vt<A;vt++)w(this,vt);z(this)}},P.prototype.getApproximateExtent=function(M){return this._approximateExtent[M]||this._store.getDataExtent(this._getStoreDimIndex(M))},P.prototype.setApproximateExtent=function(M,A){A=this.getDimension(A),this._approximateExtent[A]=M.slice()},P.prototype.getCalculationInfo=function(M){return this._calculationInfo[M]},P.prototype.setCalculationInfo=function(M,A){et(M)?B.extend(this._calculationInfo,M):this._calculationInfo[M]=A},P.prototype.getName=function(M){var A=this.getRawIndex(M),R=this._nameList[A];return null==R&&null!=this._nameDimIdx&&(R=J(this,this._nameDimIdx,A)),null==R&&(R=""),R},P.prototype._getCategory=function(M,A){var R=this._store.get(M,A),Z=this._store.getOrdinalMeta(M);return Z?Z.categories[R]:R},P.prototype.getId=function(M){return tt(this,this.getRawIndex(M))},P.prototype.count=function(){return this._store.count()},P.prototype.get=function(M,A){var Z=this._dimInfos[M];if(Z)return this._store.get(Z.storeDimIndex,A)},P.prototype.getByRawIndex=function(M,A){var Z=this._dimInfos[M];if(Z)return this._store.getByRawIndex(Z.storeDimIndex,A)},P.prototype.getIndices=function(){return this._store.getIndices()},P.prototype.getDataExtent=function(M){return this._store.getDataExtent(this._getStoreDimIndex(M))},P.prototype.getSum=function(M){return this._store.getSum(this._getStoreDimIndex(M))},P.prototype.getMedian=function(M){return this._store.getMedian(this._getStoreDimIndex(M))},P.prototype.getValues=function(M,A){var R=this,Z=this._store;return B.isArray(M)?Z.getValues($(M,function(rt){return R._getStoreDimIndex(rt)}),A):Z.getValues(M)},P.prototype.hasValue=function(M){for(var A=this._dimSummary.dataDimIndicesOnCoord,R=0,Z=A.length;R<Z;R++)if(isNaN(this._store.get(A[R],M)))return!1;return!0},P.prototype.indexOfName=function(M){for(var A=0,R=this._store.count();A<R;A++)if(this.getName(A)===M)return A;return-1},P.prototype.getRawIndex=function(M){return this._store.getRawIndex(M)},P.prototype.indexOfRawIndex=function(M){return this._store.indexOfRawIndex(M)},P.prototype.rawIndexOf=function(M,A){var Z=(M&&this._invertedIndicesMap[M])[A];return null==Z||isNaN(Z)?-1:Z},P.prototype.indicesOfNearest=function(M,A,R){return this._store.indicesOfNearest(this._getStoreDimIndex(M),A,R)},P.prototype.each=function(M,A,R){B.isFunction(M)&&(R=A,A=M,M=[]);var Z=R||this,rt=$(Y(M),this._getStoreDimIndex,this);this._store.each(rt,Z?B.bind(A,Z):A)},P.prototype.filterSelf=function(M,A,R){B.isFunction(M)&&(R=A,A=M,M=[]);var Z=R||this,rt=$(Y(M),this._getStoreDimIndex,this);return this._store=this._store.filter(rt,Z?B.bind(A,Z):A),this},P.prototype.selectRange=function(M){var A=this,R={},Z=B.keys(M),rt=[];return B.each(Z,function(ot){var at=A._getStoreDimIndex(ot);R[at]=M[ot],rt.push(at)}),this._store=this._store.selectRange(R),this},P.prototype.mapArray=function(M,A,R){B.isFunction(M)&&(R=A,A=M,M=[]);var Z=[];return this.each(M,function(){Z.push(A&&A.apply(this,arguments))},R=R||this),Z},P.prototype.map=function(M,A,R,Z){var rt=R||Z||this,ot=$(Y(M),this._getStoreDimIndex,this),at=U(this);return at._store=this._store.map(ot,rt?B.bind(A,rt):A),at},P.prototype.modify=function(M,A,R,Z){var ot=R||Z||this,at=$(Y(M),this._getStoreDimIndex,this);this._store.modify(at,ot?B.bind(A,ot):A)},P.prototype.downSample=function(M,A,R,Z){var rt=U(this);return rt._store=this._store.downSample(this._getStoreDimIndex(M),A,R,Z),rt},P.prototype.lttbDownSample=function(M,A){var R=U(this);return R._store=this._store.lttbDownSample(this._getStoreDimIndex(M),A),R},P.prototype.getRawDataItem=function(M){return this._store.getRawDataItem(M)},P.prototype.getItemModel=function(M){var A=this.hostModel,R=this.getRawDataItem(M);return new St.Z(R,A,A&&A.ecModel)},P.prototype.diff=function(M){var A=this;return new n.Z(M?M.getStore().getIndices():[],this.getStore().getIndices(),function(R){return tt(M,R)},function(R){return tt(A,R)})},P.prototype.getVisual=function(M){var A=this._visual;return A&&A[M]},P.prototype.setVisual=function(M,A){this._visual=this._visual||{},et(M)?B.extend(this._visual,M):this._visual[M]=A},P.prototype.getItemVisual=function(M,A){var R=this._itemVisuals[M];return(R&&R[A])??this.getVisual(A)},P.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},P.prototype.ensureUniqueItemVisual=function(M,A){var R=this._itemVisuals,Z=R[M];Z||(Z=R[M]={});var rt=Z[A];return null==rt&&(rt=this.getVisual(A),B.isArray(rt)?rt=rt.slice():et(rt)&&(rt=B.extend({},rt)),Z[A]=rt),rt},P.prototype.setItemVisual=function(M,A,R){var Z=this._itemVisuals[M]||{};this._itemVisuals[M]=Z,et(A)?B.extend(Z,A):Z[A]=R},P.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},P.prototype.setLayout=function(M,A){et(M)?B.extend(this._layout,M):this._layout[M]=A},P.prototype.getLayout=function(M){return this._layout[M]},P.prototype.getItemLayout=function(M){return this._itemLayouts[M]},P.prototype.setItemLayout=function(M,A,R){this._itemLayouts[M]=R?B.extend(this._itemLayouts[M]||{},A):A},P.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},P.prototype.setItemGraphicEl=function(M,A){(0,k.Q)(this.hostModel&&this.hostModel.seriesIndex,this.dataType,M,A),this._graphicEls[M]=A},P.prototype.getItemGraphicEl=function(M){return this._graphicEls[M]},P.prototype.eachItemGraphicEl=function(M,A){B.each(this._graphicEls,function(R,Z){R&&M&&M.call(A,R,Z)})},P.prototype.cloneShallow=function(M){return M||(M=new P(this._schema?this._schema:$(this.dimensions,this._getDimInfo,this),this.hostModel)),nt(M,this),M._store=this._store,M},P.prototype.wrapMethod=function(M,A){var R=this[M];!B.isFunction(R)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(M),this[M]=function(){var Z=R.apply(this,arguments);return A.apply(this,[Z].concat(B.slice(arguments)))})},P.internalField=(z=function(M){var A=M._invertedIndicesMap;B.each(A,function(R,Z){var rt=M._dimInfos[Z],ot=rt.ordinalMeta,at=M._store;if(ot){R=A[Z]=new st(ot.categories.length);for(var lt=0;lt<R.length;lt++)R[lt]=-1;for(lt=0;lt<at.count();lt++)R[at.get(rt.storeDimIndex,lt)]=lt}})},J=function(M,A,R){return(0,V.U5)(M._getCategory(A,R),null)},tt=function(M,A){var R=M._idList[A];return null==R&&null!=M._idDimIdx&&(R=J(M,M._idDimIdx,A)),null==R&&(R="e\0\0"+A),R},Y=function(M){return B.isArray(M)||(M=null!=M?[M]:[]),M},U=function(M){var A=new P(M._schema?M._schema:$(M.dimensions,M._getDimInfo,M),M.hostModel);return nt(A,M),A},nt=function(M,A){B.each(j.concat(A.__wrappedMethods||[]),function(R){A.hasOwnProperty(R)&&(M[R]=A[R])}),M.__wrappedMethods=A.__wrappedMethods,B.each(it,function(R){M[R]=B.clone(A[R])}),M._calculationInfo=B.extend({},A._calculationInfo)},void(w=function(M,A){var R=M._nameList,Z=M._idList,rt=M._nameDimIdx,ot=M._idDimIdx,at=R[A],lt=Z[A];if(null==at&&null!=rt&&(R[A]=at=J(M,rt,A)),null==lt&&null!=ot&&(Z[A]=lt=J(M,ot,A)),null==lt&&null!=at){var ht=M._nameRepeatCount,vt=ht[at]=(ht[at]||0)+1;lt=at,vt>1&&(lt+="__ec__"+vt),Z[A]=lt}})),P}()},5561:(Ze,te,D)=>{D.d(te,{Z:()=>n});var B=D(6615);const n=function _t(mt){this.otherDims={},null!=mt&&B.extend(this,mt)}},2671:(Ze,te,D)=>{D.d(te,{Kp:()=>X,Ld:()=>gt,ML:()=>k,QY:()=>st,_P:()=>yt,nx:()=>V});var B=D(6615),St=D(4143),n=D(1617),_t=D(7458),mt=function K(_){this.data=_.data||(_.sourceFormat===St.hL?{}:[]),this.sourceFormat=_.sourceFormat||St.RA,this.seriesLayoutBy=_.seriesLayoutBy||St.fY,this.startIndex=_.startIndex||0,this.dimensionsDetectedCount=_.dimensionsDetectedCount,this.metaRawOption=_.metaRawOption;var j=this.dimensionsDefine=_.dimensionsDefine;if(j)for(var it=0;it<j.length;it++){var z=j[it];null==z.type&&(0,_t.u7)(this,it)===_t.Dq.Must&&(z.type="ordinal")}};function gt(K){return K instanceof mt}function yt(K,_,j){j=j||X(K);var it=_.seriesLayoutBy,z=function q(K,_,j,it,z){var tt,J;if(!K)return{dimensionsDefine:et(z),startIndex:J,dimensionsDetectedCount:tt};if(_===St.XD){var Y=K;"auto"===it||null==it?$(function(U){null!=U&&"-"!==U&&((0,B.isString)(U)?null==J&&(J=1):J=0)},j,Y,10):J=(0,B.isNumber)(it)?it:it?1:0,!z&&1===J&&(z=[],$(function(U,w){z[w]=null!=U?U+"":""},j,Y,1/0)),tt=z?z.length:j===St.Wc?Y.length:Y[0]?Y[0].length:null}else if(_===St.qb)z||(z=function N(K){for(var j,_=0;_<K.length&&!(j=K[_++]););if(j){var it=[];return(0,B.each)(j,function(z,tt){it.push(tt)}),it}}(K));else if(_===St.hL)z||(z=[],(0,B.each)(K,function(U,w){z.push(w)}));else if(_===St.cy){var nt=(0,n.C4)(K[0]);tt=(0,B.isArray)(nt)&&nt.length||1}return{startIndex:J,dimensionsDefine:et(z),dimensionsDetectedCount:tt}}(K,j,it,_.sourceHeader,_.dimensions);return new mt({data:K,sourceFormat:j,seriesLayoutBy:it,dimensionsDefine:z.dimensionsDefine,startIndex:z.startIndex,dimensionsDetectedCount:z.dimensionsDetectedCount,metaRawOption:(0,B.clone)(_)})}function V(K){return new mt({data:K,sourceFormat:(0,B.isTypedArray)(K)?St.J5:St.cy})}function k(K){return new mt({data:K.data,sourceFormat:K.sourceFormat,seriesLayoutBy:K.seriesLayoutBy,dimensionsDefine:(0,B.clone)(K.dimensionsDefine),startIndex:K.startIndex,dimensionsDetectedCount:K.dimensionsDetectedCount})}function X(K){var _=St.RA;if((0,B.isTypedArray)(K))_=St.J5;else if((0,B.isArray)(K)){0===K.length&&(_=St.XD);for(var j=0,it=K.length;j<it;j++){var z=K[j];if(null!=z){if((0,B.isArray)(z)){_=St.XD;break}if((0,B.isObject)(z)){_=St.qb;break}}}}else if((0,B.isObject)(K))for(var tt in K)if((0,B.hasOwn)(K,tt)&&(0,B.isArrayLike)(K[tt])){_=St.hL;break}return _}function et(K){if(K){var _=(0,B.createHashMap)();return(0,B.map)(K,function(j,it){var z={name:(j=(0,B.isObject)(j)?j:{name:j}).name,displayName:j.displayName,type:j.type};if(null==z.name)return z;z.name+="",null==z.displayName&&(z.displayName=z.name);var tt=_.get(z.name);return tt?z.name+="-"+tt.count++:_.set(z.name,{count:1}),z})}}function $(K,_,j,it){if(_===St.Wc)for(var z=0;z<j.length&&z<it;z++)K(j[z]?j[z][0]:null,z);else{var tt=j[0]||[];for(z=0;z<tt.length&&z<it;z++)K(tt[z],z)}}function st(K){var _=K.sourceFormat;return _===St.qb||_===St.hL}},5349:(Ze,te,D)=>{D.d(te,{Eo:()=>gt,Jj:()=>k,Jl:()=>X,bB:()=>yt,v5:()=>V});var B=D(6615),St=D(1617),n=D(2671),_t=(0,St.Yf)(),mt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},gt=function(){function q(N){this.dimensions=N.dimensions,this._dimOmitted=N.dimensionOmitted,this.source=N.source,this._fullDimCount=N.fullDimensionCount,this._updateDimOmitted(N.dimensionOmitted)}return q.prototype.isDimensionOmitted=function(){return this._dimOmitted},q.prototype._updateDimOmitted=function(N){this._dimOmitted=N,N&&(this._dimNameMap||(this._dimNameMap=k(this.source)))},q.prototype.getSourceDimensionIndex=function(N){return(0,B.retrieve2)(this._dimNameMap.get(N),-1)},q.prototype.getSourceDimension=function(N){var et=this.source.dimensionsDefine;if(et)return et[N]},q.prototype.makeStoreSchema=function(){for(var N=this._fullDimCount,et=(0,n.QY)(this.source),$=!X(N),st="",K=[],_=0,j=0;_<N;_++){var it=void 0,z=void 0,tt=void 0,J=this.dimensions[j];if(J&&J.storeDimIndex===_)it=et?J.name:null,z=J.type,tt=J.ordinalMeta,j++;else{var Y=this.getSourceDimension(_);Y&&(it=et?Y.name:null,z=Y.type)}K.push({property:it,type:z,ordinalMeta:tt}),et&&null!=it&&(!J||!J.isCalculationCoord)&&(st+=$?it.replace(/\`/g,"`1").replace(/\$/g,"`2"):it),st+="$",st+=mt[z]||"f",tt&&(st+=tt.uid),st+="$"}var nt=this.source;return{dimensions:K,hash:[nt.seriesLayoutBy,nt.startIndex,st].join("$$")}},q.prototype.makeOutputDimensionNames=function(){for(var N=[],et=0,$=0;et<this._fullDimCount;et++){var st=void 0,K=this.dimensions[$];if(K&&K.storeDimIndex===et)K.isCalculationCoord||(st=K.name),$++;else{var _=this.getSourceDimension(et);_&&(st=_.name)}N.push(st)}return N},q.prototype.appendCalculationDimension=function(N){this.dimensions.push(N),N.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},q}();function yt(q){return q instanceof gt}function V(q){for(var N=(0,B.createHashMap)(),et=0;et<(q||[]).length;et++){var $=q[et],st=(0,B.isObject)($)?$.name:$;null!=st&&null==N.get(st)&&N.set(st,et)}return N}function k(q){var N=_t(q);return N.dimNameMap||(N.dimNameMap=V(q.dimensionsDefine))}function X(q){return q>30}},1440:(Ze,te,D)=>{D.d(te,{Z:()=>X,q:()=>k});var B=D(4143),St=D(5561),n=D(6615),_t=D(2671),mt=D(16),gt=D(1617),yt=D(7458),V=D(5349);function k($,st){return X($,st).dimensions}function X($,st){(0,_t.Ld)($)||($=(0,_t.nx)($));var K=(st=st||{}).coordDimensions||[],_=st.dimensionsDefine||$.dimensionsDefine||[],j=(0,n.createHashMap)(),it=[],z=function N($,st,K,_){var j=Math.max($.dimensionsDetectedCount||1,st.length,K.length,_||0);return(0,n.each)(st,function(it){var z;(0,n.isObject)(it)&&(z=it.dimsDef)&&(j=Math.max(j,z.length))}),j}($,K,_,st.dimensionsCount),tt=st.canOmitUnusedDimensions&&(0,V.Jl)(z),J=_===$.dimensionsDefine,Y=J?(0,V.Jj)($):(0,V.v5)(_),nt=st.encodeDefine;!nt&&st.encodeDefaulter&&(nt=st.encodeDefaulter($,z));for(var U=(0,n.createHashMap)(nt),w=new mt.hG(z),C=0;C<w.length;C++)w[C]=-1;function I(vt){var ct=w[vt];if(ct<0){var dt=_[vt],Mt=(0,n.isObject)(dt)?dt:{name:dt},Pt=new St.Z,wt=Mt.name;return null!=wt&&null!=Y.get(wt)&&(Pt.name=Pt.displayName=wt),null!=Mt.type&&(Pt.type=Mt.type),null!=Mt.displayName&&(Pt.displayName=Mt.displayName),w[vt]=it.length,Pt.storeDimIndex=vt,it.push(Pt),Pt}return it[ct]}if(!tt)for(C=0;C<z;C++)I(C);U.each(function(vt,ct){var dt=(0,gt.kF)(vt).slice();if(1===dt.length&&!(0,n.isString)(dt[0])&&dt[0]<0)U.set(ct,!1);else{var Mt=U.set(ct,[]);(0,n.each)(dt,function(Pt,wt){var Ot=(0,n.isString)(Pt)?Y.get(Pt):Pt;null!=Ot&&Ot<z&&(Mt[wt]=Ot,M(I(Ot),ct,wt))})}});var P=0;function M(vt,ct,dt){null!=B.f7.get(ct)?vt.otherDims[ct]=dt:(vt.coordDim=ct,vt.coordDimIndex=dt,j.set(ct,!0))}(0,n.each)(K,function(vt){var ct,dt,Mt,Pt;if((0,n.isString)(vt))ct=vt,Pt={};else{ct=(Pt=vt).name;var wt=Pt.ordinalMeta;Pt.ordinalMeta=null,(Pt=(0,n.extend)({},Pt)).ordinalMeta=wt,dt=Pt.dimsDef,Mt=Pt.otherDims,Pt.name=Pt.coordDim=Pt.coordDimIndex=Pt.dimsDef=Pt.otherDims=null}var Ot=U.get(ct);if(!1!==Ot){if(!(Ot=(0,gt.kF)(Ot)).length)for(var Ft=0;Ft<(dt&&dt.length||1);Ft++){for(;P<z&&null!=I(P).coordDim;)P++;P<z&&Ot.push(P++)}(0,n.each)(Ot,function(Ut,kt){var ie=I(Ut);if(J&&null!=Pt.type&&(ie.type=Pt.type),M((0,n.defaults)(ie,Pt),ct,kt),null==ie.name&&dt){var ue=dt[kt];!(0,n.isObject)(ue)&&(ue={name:ue}),ie.name=ie.displayName=ue.name,ie.defaultTooltip=ue.defaultTooltip}Mt&&(0,n.defaults)(ie.otherDims,Mt)})}});var A=st.generateCoord,R=st.generateCoordCount,Z=null!=R;R=A?R||1:0;var rt=A||"value";function ot(vt){null==vt.name&&(vt.name=vt.coordDim)}if(tt)(0,n.each)(it,function(vt){ot(vt)}),it.sort(function(vt,ct){return vt.storeDimIndex-ct.storeDimIndex});else for(var at=0;at<z;at++){var lt=I(at);null==lt.coordDim&&(lt.coordDim=et(rt,j,Z),lt.coordDimIndex=0,(!A||R<=0)&&(lt.isExtraCoord=!0),R--),ot(lt),null==lt.type&&((0,yt.u7)($,at)===yt.Dq.Must||lt.isExtraCoord&&(null!=lt.otherDims.itemName||null!=lt.otherDims.seriesName))&&(lt.type="ordinal")}return function q($){for(var st=(0,n.createHashMap)(),K=0;K<$.length;K++){var _=$[K],j=_.name,it=st.get(j)||0;it>0&&(_.name=j+(it-1)),it++,st.set(j,it)}}(it),new V.Eo({source:$,dimensions:it,fullDimensionCount:z,dimensionOmitted:tt})}function et($,st,K){if(K||st.hasKey($)){for(var _=0;st.hasKey($+_);)_++;$+=_}return st.set($,!0),$}},4727:(Ze,te,D)=>{D.d(te,{Pl:()=>X,_j:()=>et,a:()=>K,hk:()=>tt,tB:()=>it});var mt,gt,yt,V,k,B=D(6615),St=D(1617),n=D(2671),_t=D(4143),X=function(){function Y(nt,U){var w=(0,n.Ld)(nt)?nt:(0,n.nx)(nt);this._source=w;var C=this._data=w.data;w.sourceFormat===_t.J5&&(this._offset=0,this._dimSize=U,this._data=C),k(this,C,w)}return Y.prototype.getSource=function(){return this._source},Y.prototype.count=function(){return 0},Y.prototype.getItem=function(nt,U){},Y.prototype.appendData=function(nt){},Y.prototype.clean=function(){},Y.protoInitialize=((nt=Y.prototype).pure=!1,void(nt.persistent=!0)),Y.internalField=function(){var nt;k=function(P,M,A){var R=A.sourceFormat,Z=A.seriesLayoutBy,rt=A.startIndex,ot=A.dimensionsDefine,at=V[z(R,Z)];if((0,B.extend)(P,at),R===_t.J5)P.getItem=U,P.count=C,P.fillStorage=w;else{var lt=et(R,Z);P.getItem=(0,B.bind)(lt,null,M,rt,ot);var ht=K(R,Z);P.count=(0,B.bind)(ht,null,M,rt,ot)}};var U=function(P,M){M=M||[];for(var A=this._data,R=this._dimSize,Z=R*(P-=this._offset),rt=0;rt<R;rt++)M[rt]=A[Z+rt];return M},w=function(P,M,A,R){for(var Z=this._data,rt=this._dimSize,ot=0;ot<rt;ot++){for(var at=R[ot],lt=at[0]??1/0,ht=at[1]??-1/0,vt=M-P,ct=A[ot],dt=0;dt<vt;dt++){var Mt=Z[dt*rt+ot];ct[P+dt]=Mt,Mt<lt&&(lt=Mt),Mt>ht&&(ht=Mt)}at[0]=lt,at[1]=ht}},C=function(){return this._data?this._data.length/this._dimSize:0};function I(P){for(var M=0;M<P.length;M++)this._data.push(P[M])}(nt={})[_t.XD+"_"+_t.fY]={pure:!0,appendData:I},nt[_t.XD+"_"+_t.Wc]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},nt[_t.qb]={pure:!0,appendData:I},nt[_t.hL]={pure:!0,appendData:function(P){var M=this._data;(0,B.each)(P,function(A,R){for(var Z=M[R]||(M[R]=[]),rt=0;rt<(A||[]).length;rt++)Z.push(A[rt])})}},nt[_t.cy]={appendData:I},nt[_t.J5]={persistent:!1,pure:!0,appendData:function(P){this._data=P},clean:function(){this._offset+=this.count(),this._data=null}},V=nt}(),Y;var nt}(),q=function(Y,nt,U,w){return Y[w]},N=((mt={})[_t.XD+"_"+_t.fY]=function(Y,nt,U,w){return Y[w+nt]},mt[_t.XD+"_"+_t.Wc]=function(Y,nt,U,w,C){w+=nt;for(var I=C||[],P=Y,M=0;M<P.length;M++){var A=P[M];I[M]=A?A[w]:null}return I},mt[_t.qb]=q,mt[_t.hL]=function(Y,nt,U,w,C){for(var I=C||[],P=0;P<U.length;P++){var A=Y[U[P].name];I[P]=A?A[w]:null}return I},mt[_t.cy]=q,mt);function et(Y,nt){return N[z(Y,nt)]}var $=function(Y,nt,U){return Y.length},st=((gt={})[_t.XD+"_"+_t.fY]=function(Y,nt,U){return Math.max(0,Y.length-nt)},gt[_t.XD+"_"+_t.Wc]=function(Y,nt,U){var w=Y[0];return w?Math.max(0,w.length-nt):0},gt[_t.qb]=$,gt[_t.hL]=function(Y,nt,U){var C=Y[U[0].name];return C?C.length:0},gt[_t.cy]=$,gt);function K(Y,nt){return st[z(Y,nt)]}var _=function(Y,nt,U){return Y[nt]},j=((yt={})[_t.XD]=_,yt[_t.qb]=function(Y,nt,U){return Y[U]},yt[_t.hL]=_,yt[_t.cy]=function(Y,nt,U){var w=(0,St.C4)(Y);return w instanceof Array?w[nt]:w},yt[_t.J5]=_,yt);function it(Y){return j[Y]}function z(Y,nt){return Y===_t.XD?Y+"_"+nt:Y}function tt(Y,nt,U){if(Y){var w=Y.getRawDataItem(nt);if(null!=w){var C=Y.getStore(),I=C.getSource().sourceFormat;if(null!=U){var P=Y.getDimensionIndex(U),M=C.getDimensionProperty(P);return it(I)(w,P,M)}var A=w;return I===_t.cy&&(A=(0,St.C4)(w)),A}}}},3593:(Ze,te,D)=>{D.d(te,{BM:()=>n,IR:()=>gt,M:()=>mt});var B=D(6615),St=D(5349);function n(yt,V,k){var N,et,$,X=(k=k||{}).byIndex,q=k.stackedCoordDimension;!function _t(yt){return!(0,St.bB)(yt.schema)}(V)?(N=(et=V.schema).dimensions,$=V.store):N=V;var K,_,j,it,st=!(!yt||!yt.get("stack"));if((0,B.each)(N,function(U,w){(0,B.isString)(U)&&(N[w]=U={name:U}),st&&!U.isExtraCoord&&(!X&&!K&&U.ordinalMeta&&(K=U),!_&&"ordinal"!==U.type&&"time"!==U.type&&(!q||q===U.coordDim)&&(_=U))}),_&&!X&&!K&&(X=!0),_){j="__\0ecstackresult_"+yt.id,it="__\0ecstackedover_"+yt.id,K&&(K.createInvertedIndices=!0);var z=_.coordDim,tt=_.type,J=0;(0,B.each)(N,function(U){U.coordDim===z&&J++});var Y={name:j,coordDim:z,coordDimIndex:J,type:tt,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:N.length},nt={name:it,coordDim:it,coordDimIndex:J+1,type:tt,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:N.length+1};et?($&&(Y.storeDimIndex=$.ensureCalculationDimension(it,tt),nt.storeDimIndex=$.ensureCalculationDimension(j,tt)),et.appendCalculationDimension(Y),et.appendCalculationDimension(nt)):(N.push(Y),N.push(nt))}return{stackedDimension:_&&_.name,stackedByDimension:K&&K.name,isStackedByIndex:X,stackedOverDimension:it,stackResultDimension:j}}function mt(yt,V){return!!V&&V===yt.getCalculationInfo("stackedDimension")}function gt(yt,V){return mt(yt,V)?yt.getCalculationInfo("stackResultDimension"):V}},6566:(Ze,te,D)=>{D.d(te,{ID:()=>k,o2:()=>gt,tR:()=>q,yQ:()=>_t});var B=D(8301),St=D(6615),n=D(9723);function _t(N,et){var $=et&&et.type;return"ordinal"===$?N:("time"===$&&!(0,St.isNumber)(N)&&null!=N&&"-"!==N&&(N=+(0,B.sG)(N)),null==N||""===N?NaN:+N)}var mt=(0,St.createHashMap)({number:function(N){return parseFloat(N)},time:function(N){return+(0,B.sG)(N)},trim:function(N){return(0,St.isString)(N)?(0,St.trim)(N):N}});function gt(N){return mt.get(N)}var yt={lt:function(N,et){return N<et},lte:function(N,et){return N<=et},gt:function(N,et){return N>et},gte:function(N,et){return N>=et}},V=function(){function N(et,$){(0,St.isNumber)($)||(0,n._y)(""),this._opFn=yt[et],this._rvalFloat=(0,B.FK)($)}return N.prototype.evaluate=function(et){return(0,St.isNumber)(et)?this._opFn(et,this._rvalFloat):this._opFn((0,B.FK)(et),this._rvalFloat)},N}(),k=function(){function N(et,$){var st="desc"===et;this._resultLT=st?1:-1,null==$&&($=st?"min":"max"),this._incomparable="min"===$?-1/0:1/0}return N.prototype.evaluate=function(et,$){var st=(0,St.isNumber)(et)?et:(0,B.FK)(et),K=(0,St.isNumber)($)?$:(0,B.FK)($),_=isNaN(st),j=isNaN(K);if(_&&(st=this._incomparable),j&&(K=this._incomparable),_&&j){var it=(0,St.isString)(et),z=(0,St.isString)($);it&&(st=z?et:0),z&&(K=it?$:0)}return st<K?this._resultLT:st>K?-this._resultLT:0},N}(),X=function(){function N(et,$){this._rval=$,this._isEQ=et,this._rvalTypeof=typeof $,this._rvalFloat=(0,B.FK)($)}return N.prototype.evaluate=function(et){var $=et===this._rval;if(!$){var st=typeof et;st!==this._rvalTypeof&&("number"===st||"number"===this._rvalTypeof)&&($=(0,B.FK)(et)===this._rvalFloat)}return this._isEQ?$:!$},N}();function q(N,et){return"eq"===N||"ne"===N?new X("eq"===N,et):(0,St.hasOwn)(yt,N)?new V(N,et):null}},2747:(Ze,te,D)=>{D.d(te,{T:()=>gt,y:()=>_t});var B=D(6615),St=D(4143),n=function(){function V(k,X){this._encode=k,this._schema=X}return V.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},V.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},V}();function _t(V,k){var X={},q=X.encode={},N=(0,B.createHashMap)(),et=[],$=[],st={};(0,B.each)(V.dimensions,function(z){var tt=V.getDimensionInfo(z),J=tt.coordDim;if(J){var Y=tt.coordDimIndex;mt(q,J)[Y]=z,tt.isExtraCoord||(N.set(J,1),function yt(V){return!("ordinal"===V||"time"===V)}(tt.type)&&(et[0]=z),mt(st,J)[Y]=V.getDimensionIndex(tt.name)),tt.defaultTooltip&&$.push(z)}St.f7.each(function(nt,U){var w=mt(q,U),C=tt.otherDims[U];null!=C&&!1!==C&&(w[C]=tt.name)})});var K=[],_={};N.each(function(z,tt){var J=q[tt];_[tt]=J[0],K=K.concat(J)}),X.dataDimsOnCoord=K,X.dataDimIndicesOnCoord=(0,B.map)(K,function(z){return V.getDimensionInfo(z).storeDimIndex}),X.encodeFirstDimNotExtra=_;var j=q.label;j&&j.length&&(et=j.slice());var it=q.tooltip;return it&&it.length?$=it.slice():$.length||($=et.slice()),q.defaultedLabel=et,q.defaultedTooltip=$,X.userOutput=new n(st,k),X}function mt(V,k){return V.hasOwnProperty(k)||(V[k]=[]),V[k]}function gt(V){return"category"===V?"ordinal":"time"===V?"time":"float"}},8446:(Ze,te,D)=>{D.d(te,{Z:()=>et});var B=D(6615),n=(0,D(1617).Yf)();function mt($,st){if(function X($){return n($).mainData===$}(this)){var K=(0,B.extend)({},n(this).datas);K[this.dataType]=st,q(st,K,$)}else N(st,this.dataType,n(this).mainData,$);return st}function gt($,st){return $.struct&&$.struct.update(),st}function yt($,st){return(0,B.each)(n(st).datas,function(K,_){K!==st&&N(K.cloneShallow(),_,st,$)}),st}function V($){var st=n(this).mainData;return null==$||null==st?st:n(st).datas[$]}function k(){var $=n(this).mainData;return null==$?[{data:$}]:(0,B.map)((0,B.keys)(n($).datas),function(st){return{type:st,data:n($).datas[st]}})}function q($,st,K){n($).datas={},(0,B.each)(st,function(_,j){N(_,j,$,K)})}function N($,st,K,_){n(K).datas[st]=$,n($).mainData=K,$.dataType=st,_.struct&&($[_.structAttr]=_.struct,_.struct[_.datasAttr[st]]=$),$.getLinkedData=V,$.getLinkedDataAll=k}const et=function _t($){var st=$.mainData,K=$.datas;K||(K={main:st},$.datasAttr={main:"data"}),$.datas=$.mainData=null,q(st,K,$),(0,B.each)(K,function(_){(0,B.each)(st.TRANSFERABLE_METHODS,function(j){_.wrapMethod(j,(0,B.curry)(mt,$))})}),st.wrapMethod("cloneShallow",(0,B.curry)(yt,$)),(0,B.each)(st.CHANGABLE_METHODS,function(_){st.wrapMethod(_,(0,B.curry)(gt,$))}),(0,B.assert)(K[st.dataType]===st)}},7458:(Ze,te,D)=>{D.d(te,{Dq:()=>_t,JT:()=>X,Ss:()=>V,Wd:()=>k,md:()=>gt,pY:()=>yt,u7:()=>q});var B=D(1617),St=D(6615),n=D(4143),_t={Must:1,Might:2,Not:3},mt=(0,B.Yf)();function gt(et){mt(et).datasetMap=(0,St.createHashMap)()}function yt(et,$,st){var K={},_=k($);if(!_||!et)return K;var Y,nt,j=[],it=[],tt=mt($.ecModel).datasetMap,J=_.uid+"_"+st.seriesLayoutBy;et=et.slice(),(0,St.each)(et,function(I,P){var M=(0,St.isObject)(I)?I:et[P]={name:I};"ordinal"===M.type&&null==Y&&(Y=P,nt=C(M)),K[M.name]=[]});var U=tt.get(J)||tt.set(J,{categoryWayDim:nt,valueWayDim:0});function w(I,P,M){for(var A=0;A<M;A++)I.push(P+A)}function C(I){var P=I.dimsDef;return P?P.length:1}return(0,St.each)(et,function(I,P){var M=I.name,A=C(I);if(null==Y)w(K[M],R=U.valueWayDim,A),w(it,R,A),U.valueWayDim+=A;else if(Y===P)w(K[M],0,A),w(j,0,A);else{var R;w(K[M],R=U.categoryWayDim,A),w(it,R,A),U.categoryWayDim+=A}}),j.length&&(K.itemName=j),it.length&&(K.seriesName=it),K}function V(et,$,st){var K={};if(!k(et))return K;var z,j=$.sourceFormat,it=$.dimensionsDefine;(j===n.qb||j===n.hL)&&(0,St.each)(it,function(Y,nt){"name"===((0,St.isObject)(Y)?Y.name:Y)&&(z=nt)});var tt=function(){for(var Y={},nt={},U=[],w=0,C=Math.min(5,st);w<C;w++){var I=N($.data,j,$.seriesLayoutBy,it,$.startIndex,w);U.push(I);var P=I===_t.Not;if(P&&null==Y.v&&w!==z&&(Y.v=w),(null==Y.n||Y.n===Y.v||!P&&U[Y.n]===_t.Not)&&(Y.n=w),M(Y)&&U[Y.n]!==_t.Not)return Y;P||(I===_t.Might&&null==nt.v&&w!==z&&(nt.v=w),(null==nt.n||nt.n===nt.v)&&(nt.n=w))}function M(A){return null!=A.v&&null!=A.n}return M(Y)?Y:M(nt)?nt:null}();if(tt){K.value=[tt.v];var J=z??tt.n;K.itemName=[J],K.seriesName=[J]}return K}function k(et){if(!et.get("data",!0))return(0,B.HZ)(et.ecModel,"dataset",{index:et.get("datasetIndex",!0),id:et.get("datasetId",!0)},B.C6).models[0]}function X(et){return et.get("transform",!0)||et.get("fromTransformResult",!0)?(0,B.HZ)(et.ecModel,"dataset",{index:et.get("fromDatasetIndex",!0),id:et.get("fromDatasetId",!0)},B.C6).models:[]}function q(et,$){return N(et.data,et.sourceFormat,et.seriesLayoutBy,et.dimensionsDefine,et.startIndex,$)}function N(et,$,st,K,_,j){var it,tt,J;if((0,St.isTypedArray)(et))return _t.Not;if(K){var Y=K[j];(0,St.isObject)(Y)?(tt=Y.name,J=Y.type):(0,St.isString)(Y)&&(tt=Y)}if(null!=J)return"ordinal"===J?_t.Must:_t.Not;if($===n.XD){var nt=et;if(st===n.Wc){for(var U=nt[j],w=0;w<(U||[]).length&&w<5;w++)if(null!=(it=Z(U[_+w])))return it}else for(w=0;w<nt.length&&w<5;w++){var C=nt[_+w];if(C&&null!=(it=Z(C[j])))return it}}else if($===n.qb){var I=et;if(!tt)return _t.Not;for(w=0;w<I.length&&w<5;w++)if((P=I[w])&&null!=(it=Z(P[tt])))return it}else if($===n.hL){if(!tt)return _t.Not;if(!(U=et[tt])||(0,St.isTypedArray)(U))return _t.Not;for(w=0;w<U.length&&w<5;w++)if(null!=(it=Z(U[w])))return it}else if($===n.cy){var A=et;for(w=0;w<A.length&&w<5;w++){var P,R=(0,B.C4)(P=A[w]);if(!(0,St.isArray)(R))return _t.Not;if(null!=(it=Z(R[j])))return it}}function Z(rt){var ot=(0,St.isString)(rt);return null!=rt&&isFinite(rt)&&""!==rt?ot?_t.Might:_t.Not:ot&&"-"!==rt?_t.Must:void 0}return _t.Not}},5495:(Ze,te,D)=>{D.d(te,{U:()=>V,t:()=>k});var B=D(6615),St=D(2671),n=D(4143),_t=D(7458),mt=D(4314),gt=D(16),yt=D(4727),V=function(){function N(et){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=et}return N.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},N.prototype._setLocalSource=function(et,$){this._sourceList=et,this._upstreamSignList=$,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},N.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},N.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},N.prototype._createSource=function(){this._setLocalSource([],[]);var K,_,et=this._sourceHost,$=this._getUpstreamSourceManagers(),st=!!$.length;if(X(et)){var j=et,it=void 0,z=void 0,tt=void 0;if(st){var J=$[0];J.prepareSource(),it=(tt=J.getSource()).data,z=tt.sourceFormat,_=[J._getVersionSign()]}else it=j.get("data",!0),z=(0,B.isTypedArray)(it)?n.J5:n.cy,_=[];var Y=this._getSourceMetaRawOption()||{},nt=tt&&tt.metaRawOption||{},U=(0,B.retrieve2)(Y.seriesLayoutBy,nt.seriesLayoutBy)||null,w=(0,B.retrieve2)(Y.sourceHeader,nt.sourceHeader),C=(0,B.retrieve2)(Y.dimensions,nt.dimensions);K=U!==nt.seriesLayoutBy||!!w!=!!nt.sourceHeader||C?[(0,St._P)(it,{seriesLayoutBy:U,sourceHeader:w,dimensions:C},z)]:[]}else{var P=et;if(st){var M=this._applyTransform($);K=M.sourceList,_=M.upstreamSignList}else{var A=P.get("source",!0);K=[(0,St._P)(A,this._getSourceMetaRawOption(),null)],_=[]}}this._setLocalSource(K,_)},N.prototype._applyTransform=function(et){var $=this._sourceHost,st=$.get("transform",!0),K=$.get("fromTransformResult",!0);null!=K&&1!==et.length&&q("");var j,it=[],z=[];return(0,B.each)(et,function(tt){tt.prepareSource();var J=tt.getSource(K||0);null!=K&&!J&&q(""),it.push(J),z.push(tt._getVersionSign())}),st?j=(0,mt.vK)(st,it,{datasetIndex:$.componentIndex}):null!=K&&(j=[(0,St.ML)(it[0])]),{sourceList:j,upstreamSignList:z}},N.prototype._isDirty=function(){if(this._dirty)return!0;for(var et=this._getUpstreamSourceManagers(),$=0;$<et.length;$++){var st=et[$];if(st._isDirty()||this._upstreamSignList[$]!==st._getVersionSign())return!0}},N.prototype.getSource=function(et){var $=this._sourceList[et=et||0];if(!$){var st=this._getUpstreamSourceManagers();return st[0]&&st[0].getSource(et)}return $},N.prototype.getSharedDataStore=function(et){var $=et.makeStoreSchema();return this._innerGetDataStore($.dimensions,et.source,$.hash)},N.prototype._innerGetDataStore=function(et,$,st){var _=this._storeList,j=_[0];j||(j=_[0]={});var it=j[st];if(!it){var z=this._getUpstreamSourceManagers()[0];X(this._sourceHost)&&z?it=z._innerGetDataStore(et,$,st):(it=new gt.ZP).initData(new yt.Pl($,et.length),et),j[st]=it}return it},N.prototype._getUpstreamSourceManagers=function(){var et=this._sourceHost;if(X(et)){var $=(0,_t.Wd)(et);return $?[$.getSourceManager()]:[]}return(0,B.map)((0,_t.JT)(et),function(st){return st.getSourceManager()})},N.prototype._getSourceMetaRawOption=function(){var $,st,K,et=this._sourceHost;if(X(et))$=et.get("seriesLayoutBy",!0),st=et.get("sourceHeader",!0),K=et.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var _=et;$=_.get("seriesLayoutBy",!0),st=_.get("sourceHeader",!0),K=_.get("dimensions",!0)}return{seriesLayoutBy:$,sourceHeader:st,dimensions:K}},N}();function k(N){N.option.transform&&(0,B.setAsPrimitive)(N.option.transform)}function X(N){return"series"===N.mainType}function q(N){throw new Error(N)}},4314:(Ze,te,D)=>{D.d(te,{DA:()=>st,vK:()=>K});var B=D(4143),St=D(1617),n=D(6615),_t=D(4727),mt=D(6566),gt=D(9723),yt=D(2671),V=function(){function it(){}return it.prototype.getRawData=function(){throw new Error("not supported")},it.prototype.getRawDataItem=function(z){throw new Error("not supported")},it.prototype.cloneRawData=function(){},it.prototype.getDimensionInfo=function(z){},it.prototype.cloneAllDimensionInfo=function(){},it.prototype.count=function(){},it.prototype.retrieveValue=function(z,tt){},it.prototype.retrieveValueFromItem=function(z,tt){},it.prototype.convertValue=function(z,tt){return(0,mt.yQ)(z,tt)},it}();function X(it){return j(it.sourceFormat)||(0,gt._y)(""),it.data}function q(it){var z=it.sourceFormat,tt=it.data;if(j(z)||(0,gt._y)(""),z===B.XD){for(var Y=[],nt=0,U=tt.length;nt<U;nt++)Y.push(tt[nt].slice());return Y}if(z===B.qb){for(Y=[],nt=0,U=tt.length;nt<U;nt++)Y.push((0,n.extend)({},tt[nt]));return Y}}function N(it,z,tt){if(null!=tt){if((0,n.isNumber)(tt)||!isNaN(tt)&&!(0,n.hasOwn)(z,tt))return it[tt];if((0,n.hasOwn)(z,tt))return z[tt]}}function et(it){return(0,n.clone)(it)}var $=(0,n.createHashMap)();function st(it){var z=(it=(0,n.clone)(it)).type;z||(0,gt._y)("");var J=z.split(":");2!==J.length&&(0,gt._y)("");var Y=!1;"echarts"===J[0]&&(z=J[1],Y=!0),it.__isBuiltIn=Y,$.set(z,it)}function K(it,z,tt){var J=(0,St.kF)(it),Y=J.length;Y||(0,gt._y)("");for(var U=0,w=Y;U<w;U++)z=_(J[U],z),U!==w-1&&(z.length=Math.max(z.length,1));return z}function _(it,z,tt,J){z.length||(0,gt._y)(""),(0,n.isObject)(it)||(0,gt._y)("");var U=$.get(it.type);U||(0,gt._y)("");var w=(0,n.map)(z,function(P){return function k(it,z){var tt=new V,J=it.data,Y=tt.sourceFormat=it.sourceFormat,nt=it.startIndex;it.seriesLayoutBy!==B.fY&&(0,gt._y)("");var w=[],C={},I=it.dimensionsDefine;if(I)(0,n.each)(I,function(rt,ot){var at=rt.name,lt={index:ot,name:at,displayName:rt.displayName};w.push(lt),null!=at&&((0,n.hasOwn)(C,at)&&(0,gt._y)(""),C[at]=lt)});else for(var P=0;P<it.dimensionsDetectedCount;P++)w.push({index:P});var M=(0,_t._j)(Y,B.fY);z.__isBuiltIn&&(tt.getRawDataItem=function(rt){return M(J,nt,w,rt)},tt.getRawData=(0,n.bind)(X,null,it)),tt.cloneRawData=(0,n.bind)(q,null,it);var A=(0,_t.a)(Y,B.fY);tt.count=(0,n.bind)(A,null,J,nt,w);var R=(0,_t.tB)(Y);tt.retrieveValue=function(rt,ot){var at=M(J,nt,w,rt);return Z(at,ot)};var Z=tt.retrieveValueFromItem=function(rt,ot){if(null!=rt){var at=w[ot];if(at)return R(rt,ot,at.name)}};return tt.getDimensionInfo=(0,n.bind)(N,null,w,C),tt.cloneAllDimensionInfo=(0,n.bind)(et,null,w),tt}(P,U)}),C=(0,St.kF)(U.transform({upstream:w[0],upstreamList:w,config:(0,n.clone)(it.config)}));return(0,n.map)(C,function(P,M){(0,n.isObject)(P)||(0,gt._y)(""),P.data||(0,gt._y)(""),j((0,yt.Kp)(P.data))||(0,gt._y)("");var Z,rt=z[0];if(rt&&0===M&&!P.dimensions){var ot=rt.startIndex;ot&&(P.data=rt.data.slice(0,ot).concat(P.data)),Z={seriesLayoutBy:B.fY,sourceHeader:ot,dimensions:rt.metaRawOption.dimensions}}else Z={seriesLayoutBy:B.fY,sourceHeader:0,dimensions:P.dimensions};return(0,yt._P)(P.data,Z,null)})}function j(it){return it===B.XD||it===B.qb}},3915:(Ze,te,D)=>{D.d(te,{RD:()=>Lr.Z,TA:()=>q.Z,tF:()=>V.Z,Ir:()=>k.Z,aV:()=>N.Z,Hn:()=>J.Z,Hr:()=>yt.Hr,wJ:()=>X.Z,$_:()=>_,$j:()=>yt.$j,Ok:()=>yt.Ok,HO:()=>yt.HO,eU:()=>yt.eU,zP:()=>yt.zP,B9:()=>yt.B9,OB:()=>Ar.Z,Zy:()=>pe,tv:()=>Zr,Sp:()=>Nr,Zr:()=>re,WU:()=>mt,wL:()=>yt.wL,JE:()=>yt.JE,rp:()=>yt.rp,FU:()=>yt.FU,Q:()=>_t,_y:()=>B,S1:()=>yt.S1,z$:()=>Cr.RV,pI:()=>$,Rx:()=>St,Nu:()=>lt.Z,pQ:()=>lt.Z,zl:()=>yt.zl,RS:()=>yt.RS,qR:()=>yt.qR,yn:()=>yt.yn,I2:()=>yt.I2,je:()=>yt.je,sq:()=>yt.sq,Br:()=>yt.Br,ds:()=>yt.ds,Pu:()=>yt.Pu,aW:()=>yt.aW,rV:()=>yt.OB,YK:()=>yt.YK,Og:()=>yt.Og,jQ:()=>yt.jQ,g2:()=>at.g2,P2:()=>j.P2,XV:()=>n,D$:()=>ot.D,D5:()=>gt,xr:()=>st,i8:()=>yt.i8,gf:()=>K,x_:()=>et});var B={};D.r(B),D.d(B,{createDimensions:()=>C.q,createList:()=>M,createScale:()=>R,createSymbol:()=>I.th,createTextStyle:()=>rt,dataStack:()=>A,enableHoverEmphasis:()=>P.vF,getECData:()=>U.A,getLayoutRect:()=>Y.ME,mixinAxisModelCommonMethods:()=>Z});var St={};D.r(St),D.d(St,{MAX_SAFE_INTEGER:()=>ht.YM,asc:()=>ht.dt,getPercentWithPrecision:()=>ht.eJ,getPixelPrecision:()=>ht.M9,getPrecision:()=>ht.p8,getPrecisionSafe:()=>ht.ZB,isNumeric:()=>ht.kE,isRadianAroundZero:()=>ht.mW,linearMap:()=>ht.NU,nice:()=>ht.kx,numericToNumber:()=>ht.FK,parseDate:()=>ht.sG,quantile:()=>ht.VR,quantity:()=>ht.Xd,quantityExponent:()=>ht.xW,reformIntervals:()=>ht.nR,remRadian:()=>ht.wW,round:()=>ht.NM});var n={};D.r(n),D.d(n,{format:()=>vt.WU,parse:()=>ht.sG});var _t={};D.r(_t),D.d(_t,{Arc:()=>Fe.Z,BezierCurve:()=>De.Z,BoundingRect:()=>Rr.Z,Circle:()=>Ot.Z,CompoundPath:()=>tr.Z,Ellipse:()=>Ft.Z,Group:()=>Mt.Z,Image:()=>Pt.ZP,IncrementalDisplayable:()=>Ye.Z,Line:()=>Se.Z,LinearGradient:()=>or.Z,Polygon:()=>ie.Z,Polyline:()=>ue.Z,RadialGradient:()=>Hr.Z,Rect:()=>Pe.Z,Ring:()=>kt.Z,Sector:()=>Ut.C,Text:()=>wt.ZP,clipPointsByRect:()=>ct.clipPointsByRect,clipRectByRect:()=>ct.clipRectByRect,createIcon:()=>ct.createIcon,extendPath:()=>ct.extendPath,extendShape:()=>ct.extendShape,getShapeClass:()=>ct.getShapeClass,getTransform:()=>ct.getTransform,initProps:()=>dt.KZ,makeImage:()=>ct.makeImage,makePath:()=>ct.makePath,mergePath:()=>ct.mergePath,registerShape:()=>ct.registerShape,resizePath:()=>ct.resizePath,updateProps:()=>dt.D});var mt={};D.r(mt),D.d(mt,{addCommas:()=>qr.OD,capitalFirst:()=>qr.ew,encodeHTML:()=>Vr.F1,formatTime:()=>qr.mr,formatTpl:()=>qr.kF,getTextRect:()=>er,getTooltipMarker:()=>qr.A0,normalizeCssArray:()=>qr.MY,toCamelCase:()=>qr.zW,truncateText:()=>Ve.aF});var gt={};D.r(gt),D.d(gt,{bind:()=>K.bind,clone:()=>K.clone,curry:()=>K.curry,defaults:()=>K.defaults,each:()=>K.each,extend:()=>K.extend,filter:()=>K.filter,indexOf:()=>K.indexOf,inherits:()=>K.inherits,isArray:()=>K.isArray,isFunction:()=>K.isFunction,isObject:()=>K.isObject,isString:()=>K.isString,map:()=>K.map,merge:()=>K.merge,reduce:()=>K.reduce});var yt=D(89),V=D(2310),k=D(3785),X=D(4263),q=D(4023),N=D(8997),et=D(3318),$=D(4498),st=D(8544),K=D(6615),_=D(754),j=D(4972),it=D(6382),z=D(6122),tt=D(9896),J=D(7838),Y=D(942),nt=D(3593),U=D(7166),w=D(8811),C=D(1440),I=D(5773),P=D(8786);function M(Le){return(0,it.Z)(null,Le)}var A={isDimensionStacked:nt.M,enableDataStack:nt.BM,getStackedDimension:nt.IR};function R(Le,Kt){var ne=Kt;Kt instanceof J.Z||(ne=new J.Z(Kt));var le=z.aG(ne);return le.setExtent(Le[0],Le[1]),z.Jk(le,ne),le}function Z(Le){K.mixin(Le,tt.W)}function rt(Le,Kt){return(0,w.Lr)(Le,null,null,"normal"!==(Kt=Kt||{}).state)}var ot=D(8458),at=D(800),lt=D(3153),ht=D(8301),vt=D(8086),ct=D(2694),dt=D(3996),Mt=D(4786),Pt=D(8418),wt=D(2018),Ot=D(7610),Ft=D(3572),Ut=D(785),kt=D(2283),ie=D(8015),ue=D(3628),Pe=D(4528),Se=D(541),De=D(1838),Fe=D(8281),Ye=D(8123),tr=D(1803),or=D(8481),Hr=D(3033),Rr=D(4525),qr=D(2977),Vr=D(5917),Ve=D(7189);function er(Le,Kt,ne,le,Xt,Te,ye,Ne){return new wt.ZP({style:{text:Le,font:Kt,align:ne,verticalAlign:le,padding:Xt,rich:Te,overflow:ye?"truncate":null,lineHeight:Ne}}).getBoundingRect()}var Ar=D(1156),Lr=D(3525),Cr=D(4202);function Zr(Le){var Kt=V.Z.extend(Le);return V.Z.registerClass(Kt),Kt}function Nr(Le){var Kt=k.Z.extend(Le);return k.Z.registerClass(Kt),Kt}function re(Le){var Kt=X.Z.extend(Le);return X.Z.registerClass(Kt),Kt}function pe(Le){var Kt=q.Z.extend(Le);return q.Z.registerClass(Kt),Kt}var we=D(8130);(0,ot.D)(we.T)},8458:(Ze,te,D)=>{D.d(te,{D:()=>q});var B=D(89),St=D(3785),n=D(4023),_t=D(2310),mt=D(4263),gt=D(6615),yt=D(1524),V=D(3318),k=[],X={registerPreprocessor:B.ds,registerProcessor:B.Pu,registerPostInit:B.sq,registerPostUpdate:B.Br,registerUpdateLifecycle:B.YK,registerAction:B.zl,registerCoordinateSystem:B.RS,registerLayout:B.qR,registerVisual:B.Og,registerTransform:B.OB,registerLoading:B.yn,registerMap:B.je,registerImpl:yt.M,PRIORITY:B.Hr,ComponentModel:_t.Z,ComponentView:St.Z,SeriesModel:mt.Z,ChartView:n.Z,registerComponentModel:function(N){_t.Z.registerClass(N)},registerComponentView:function(N){St.Z.registerClass(N)},registerSeriesModel:function(N){mt.Z.registerClass(N)},registerChartView:function(N){n.Z.registerClass(N)},registerSubTypeDefaulter:function(N,et){_t.Z.registerSubTypeDefaulter(N,et)},registerPainter:function(N,et){(0,V.registerPainter)(N,et)}};function q(N){(0,gt.isArray)(N)?(0,gt.each)(N,function(et){q(et)}):(0,gt.indexOf)(k,N)>=0||(k.push(N),(0,gt.isFunction)(N)&&(N={install:N}),N.install(X))}},8130:(Ze,te,D)=>{D.d(te,{T:()=>J});var B=D(1617),St=D(4525),n=D(3996),_t=D(7166),mt=D(8301),gt=D(5028),yt=D(4409),V=D(6615),k=D(4206),X=D(8811);function q(Y){if(Y){for(var nt=[],U=0;U<Y.length;U++)nt.push(Y[U].slice());return nt}}function N(Y,nt){var U=Y.label,w=nt&&nt.getTextGuideLine();return{dataIndex:Y.dataIndex,dataType:Y.dataType,seriesIndex:Y.seriesModel.seriesIndex,text:Y.label.style.text,rect:Y.hostRect,labelRect:Y.rect,align:U.style.align,verticalAlign:U.style.verticalAlign,labelLinePoints:q(w&&w.shape.points)}}var et=["align","verticalAlign","width","height","fontSize"],$=new gt.ZP,st=(0,B.Yf)(),K=(0,B.Yf)();function _(Y,nt,U){for(var w=0;w<U.length;w++){var C=U[w];null!=nt[C]&&(Y[C]=nt[C])}}var j=["x","y","rotation"];const z=function(){function Y(){this._labelList=[],this._chartViewList=[]}return Y.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},Y.prototype._addLabel=function(nt,U,w,C,I){var P=C.style,A=C.__hostTarget.textConfig||{},R=C.getComputedTransform(),Z=C.getBoundingRect().plain();St.Z.applyTransform(Z,Z,R),R?$.setLocalTransform(R):($.x=$.y=$.rotation=$.originX=$.originY=0,$.scaleX=$.scaleY=1);var ot,rt=C.__hostTarget;if(rt){ot=rt.getBoundingRect().plain();var at=rt.getComputedTransform();St.Z.applyTransform(ot,ot,at)}var lt=ot&&rt.getTextGuideLine();this._labelList.push({label:C,labelLine:lt,seriesModel:w,dataIndex:nt,dataType:U,layoutOption:I,computedLayoutOption:null,rect:Z,hostRect:ot,priority:ot?ot.width*ot.height:0,defaultAttr:{ignore:C.ignore,labelGuideIgnore:lt&&lt.ignore,x:$.x,y:$.y,scaleX:$.scaleX,scaleY:$.scaleY,rotation:$.rotation,style:{x:P.x,y:P.y,align:P.align,verticalAlign:P.verticalAlign,width:P.width,height:P.height,fontSize:P.fontSize},cursor:C.cursor,attachedPos:A.position,attachedRot:A.rotation}})},Y.prototype.addLabelsOfSeries=function(nt){var U=this;this._chartViewList.push(nt);var w=nt.__model,C=w.get("labelLayout");!(0,V.isFunction)(C)&&!(0,V.keys)(C).length||nt.group.traverse(function(I){if(I.ignore)return!0;var P=I.getTextContent(),M=(0,_t.A)(I);P&&!P.disableLabelLayout&&U._addLabel(M.dataIndex,M.dataType,w,P,C)})},Y.prototype.updateLayoutConfig=function(nt){var U=nt.getWidth(),w=nt.getHeight();function C(Mt,Pt){return function(){(0,yt.d)(Mt,Pt)}}for(var I=0;I<this._labelList.length;I++){var P=this._labelList[I],M=P.label,A=M.__hostTarget,R=P.defaultAttr,Z=void 0;Z=(0,V.isFunction)(P.layoutOption)?P.layoutOption(N(P,A)):P.layoutOption,P.computedLayoutOption=Z=Z||{};var rt=Math.PI/180;A&&A.setTextConfig({local:!1,position:null!=Z.x||null!=Z.y?null:R.attachedPos,rotation:null!=Z.rotate?Z.rotate*rt:R.attachedRot,offset:[Z.dx||0,Z.dy||0]});var ot=!1;if(null!=Z.x?(M.x=(0,mt.GM)(Z.x,U),M.setStyle("x",0),ot=!0):(M.x=R.x,M.setStyle("x",R.style.x)),null!=Z.y?(M.y=(0,mt.GM)(Z.y,w),M.setStyle("y",0),ot=!0):(M.y=R.y,M.setStyle("y",R.style.y)),Z.labelLinePoints){var at=A.getTextGuideLine();at&&(at.setShape({points:Z.labelLinePoints}),ot=!1)}st(M).needsUpdateLabelLine=ot,M.rotation=null!=Z.rotate?Z.rotate*rt:R.rotation,M.scaleX=R.scaleX,M.scaleY=R.scaleY;for(var ht=0;ht<et.length;ht++){var vt=et[ht];M.setStyle(vt,null!=Z[vt]?Z[vt]:R.style[vt])}if(Z.draggable){if(M.draggable=!0,M.cursor="move",A){var ct=P.seriesModel;null!=P.dataIndex&&(ct=P.seriesModel.getData(P.dataType).getItemModel(P.dataIndex)),M.on("drag",C(A,ct.getModel("labelLine")))}}else M.off("drag"),M.cursor=R.cursor}},Y.prototype.layout=function(nt){var U=nt.getWidth(),w=nt.getHeight(),C=(0,k.VT)(this._labelList),I=(0,V.filter)(C,function(A){return"shiftX"===A.layoutOption.moveOverlap}),P=(0,V.filter)(C,function(A){return"shiftY"===A.layoutOption.moveOverlap});(0,k.WE)(I,0,U),(0,k.GI)(P,0,w);var M=(0,V.filter)(C,function(A){return A.layoutOption.hideOverlap});(0,k.yl)(M)},Y.prototype.processLabelsOverall=function(){var nt=this;(0,V.each)(this._chartViewList,function(U){var w=U.__model,C=U.ignoreLabelLineUpdate,I=w.isAnimationEnabled();U.group.traverse(function(P){if(P.ignore&&!P.forceLabelAnimation)return!0;var M=!C,A=P.getTextContent();!M&&A&&(M=st(A).needsUpdateLabelLine),M&&nt._updateLabelLine(P,w),I&&nt._animateLabels(P,w)})})},Y.prototype._updateLabelLine=function(nt,U){var w=nt.getTextContent(),C=(0,_t.A)(nt),I=C.dataIndex;if(w&&null!=I){var P=U.getData(C.dataType),M=P.getItemModel(I),A={},R=P.getItemVisual(I,"style"),Z=P.getVisual("drawType");A.stroke=R[Z];var rt=M.getModel("labelLine");(0,yt.Iu)(nt,(0,yt.$x)(M),A),(0,yt.d)(nt,rt)}},Y.prototype._animateLabels=function(nt,U){var w=nt.getTextContent(),C=nt.getTextGuideLine();if(w&&(nt.forceLabelAnimation||!w.ignore&&!w.invisible&&!nt.disableLabelAnimation&&!(0,n.eq)(nt))){var P=(I=st(w)).oldLayout,M=(0,_t.A)(nt),A=M.dataIndex,R={x:w.x,y:w.y,rotation:w.rotation},Z=U.getData(M.dataType);if(P){w.attr(P);var ot=nt.prevStates;ot&&((0,V.indexOf)(ot,"select")>=0&&w.attr(I.oldLayoutSelect),(0,V.indexOf)(ot,"emphasis")>=0&&w.attr(I.oldLayoutEmphasis)),(0,n.D)(w,R,U,A)}else if(w.attr(R),!(0,X.qA)(w).valueAnimation){var rt=(0,V.retrieve2)(w.style.opacity,1);w.style.opacity=0,(0,n.KZ)(w,{style:{opacity:rt}},U,A)}if(I.oldLayout=R,w.states.select){var at=I.oldLayoutSelect={};_(at,R,j),_(at,w.states.select,j)}if(w.states.emphasis){var lt=I.oldLayoutEmphasis={};_(lt,R,j),_(lt,w.states.emphasis,j)}(0,X.tD)(w,A,Z,U,U)}if(C&&!C.ignore&&!C.invisible){var I=K(C),ht={points:C.shape.points};(P=I.oldLayout)?(C.attr({shape:P}),(0,n.D)(C,{shape:ht},U)):(C.setShape(ht),C.style.strokePercent=0,(0,n.KZ)(C,{style:{strokePercent:1}},U)),I.oldLayout=ht}},Y}();var tt=(0,B.Yf)();function J(Y){Y.registerUpdateLifecycle("series:beforeupdate",function(nt,U,w){var C=tt(U).labelManager;C||(C=tt(U).labelManager=new z),C.clearLabels()}),Y.registerUpdateLifecycle("series:layoutlabels",function(nt,U,w){var C=tt(U).labelManager;w.updatedSeries.forEach(function(I){C.addLabelsOfSeries(U.getViewOfSeriesModel(I))}),C.updateLayoutConfig(U),C.layout(U),C.processLabelsOverall()})}},4409:(Ze,te,D)=>{D.d(te,{$x:()=>rt,Iu:()=>Z,_A:()=>M,d:()=>w,qK:()=>P});var B=D(9947),St=D(2477),n=D(3628),_t=D(7034),mt=D(4301),gt=D(6846),yt=D(6615),V=D(4498),k=D(8544),X=D(8786),q=2*Math.PI,N=_t.Z.CMD,et=["top","right","bottom","left"];function $(ot,at,lt,ht,vt){var ct=lt.width,dt=lt.height;switch(ot){case"top":ht.set(lt.x+ct/2,lt.y-at),vt.set(0,-1);break;case"bottom":ht.set(lt.x+ct/2,lt.y+dt+at),vt.set(0,1);break;case"left":ht.set(lt.x-at,lt.y+dt/2),vt.set(-1,0);break;case"right":ht.set(lt.x+ct+at,lt.y+dt/2),vt.set(1,0)}}function st(ot,at,lt,ht,vt,ct,dt,Mt,Pt){dt-=ot,Mt-=at;var wt=Math.sqrt(dt*dt+Mt*Mt),Ot=(dt/=wt)*lt+ot,Ft=(Mt/=wt)*lt+at;if(Math.abs(ht-vt)%q<1e-4)return Pt[0]=Ot,Pt[1]=Ft,wt-lt;if(ct){var Ut=ht;ht=(0,mt.m)(vt),vt=(0,mt.m)(Ut)}else ht=(0,mt.m)(ht),vt=(0,mt.m)(vt);ht>vt&&(vt+=q);var kt=Math.atan2(Mt,dt);if(kt<0&&(kt+=q),kt>=ht&&kt<=vt||kt+q>=ht&&kt+q<=vt)return Pt[0]=Ot,Pt[1]=Ft,wt-lt;var ie=lt*Math.cos(ht)+ot,ue=lt*Math.sin(ht)+at,Pe=lt*Math.cos(vt)+ot,Se=lt*Math.sin(vt)+at,De=(ie-dt)*(ie-dt)+(ue-Mt)*(ue-Mt),Fe=(Pe-dt)*(Pe-dt)+(Se-Mt)*(Se-Mt);return De<Fe?(Pt[0]=ie,Pt[1]=ue,Math.sqrt(De)):(Pt[0]=Pe,Pt[1]=Se,Math.sqrt(Fe))}function K(ot,at,lt,ht,vt,ct,dt,Mt){var Pt=vt-ot,wt=ct-at,Ot=lt-ot,Ft=ht-at,Ut=Math.sqrt(Ot*Ot+Ft*Ft),ie=(Pt*(Ot/=Ut)+wt*(Ft/=Ut))/Ut;Mt&&(ie=Math.min(Math.max(ie,0),1));var ue=dt[0]=ot+(ie*=Ut)*Ot,Pe=dt[1]=at+ie*Ft;return Math.sqrt((ue-vt)*(ue-vt)+(Pe-ct)*(Pe-ct))}function _(ot,at,lt,ht,vt,ct,dt){lt<0&&(ot+=lt,lt=-lt),ht<0&&(at+=ht,ht=-ht);var Mt=ot+lt,Pt=at+ht,wt=dt[0]=Math.min(Math.max(vt,ot),Mt),Ot=dt[1]=Math.min(Math.max(ct,at),Pt);return Math.sqrt((wt-vt)*(wt-vt)+(Ot-ct)*(Ot-ct))}var j=[];function it(ot,at,lt){var ht=_(at.x,at.y,at.width,at.height,ot.x,ot.y,j);return lt.set(j[0],j[1]),ht}function z(ot,at,lt){for(var Mt,Pt,ht=0,vt=0,ct=0,dt=0,wt=1/0,Ot=at.data,Ft=ot.x,Ut=ot.y,kt=0;kt<Ot.length;){var ie=Ot[kt++];1===kt&&(ct=ht=Ot[kt],dt=vt=Ot[kt+1]);var ue=wt;switch(ie){case N.M:ht=ct=Ot[kt++],vt=dt=Ot[kt++];break;case N.L:ue=K(ht,vt,Ot[kt],Ot[kt+1],Ft,Ut,j,!0),ht=Ot[kt++],vt=Ot[kt++];break;case N.C:ue=(0,gt.t1)(ht,vt,Ot[kt++],Ot[kt++],Ot[kt++],Ot[kt++],Ot[kt],Ot[kt+1],Ft,Ut,j),ht=Ot[kt++],vt=Ot[kt++];break;case N.Q:ue=(0,gt.Wr)(ht,vt,Ot[kt++],Ot[kt++],Ot[kt],Ot[kt+1],Ft,Ut,j),ht=Ot[kt++],vt=Ot[kt++];break;case N.A:var Pe=Ot[kt++],Se=Ot[kt++],De=Ot[kt++],Fe=Ot[kt++],Ye=Ot[kt++],tr=Ot[kt++];kt+=1;var or=!!(1-Ot[kt++]);Mt=Math.cos(Ye)*De+Pe,Pt=Math.sin(Ye)*Fe+Se,kt<=1&&(ct=Mt,dt=Pt),ue=st(Pe,Se,Fe,Ye,Ye+tr,or,(Ft-Pe)*Fe/De+Pe,Ut,j),ht=Math.cos(Ye+tr)*De+Pe,vt=Math.sin(Ye+tr)*Fe+Se;break;case N.R:ue=_(ct=ht=Ot[kt++],dt=vt=Ot[kt++],Ot[kt++],Ot[kt++],Ft,Ut,j);break;case N.Z:ue=K(ht,vt,ct,dt,Ft,Ut,j,!0),ht=ct,vt=dt}ue<wt&&(wt=ue,lt.set(j[0],j[1]))}return wt}var tt=new B.Z,J=new B.Z,Y=new B.Z,nt=new B.Z,U=new B.Z;function w(ot,at){if(ot){var lt=ot.getTextGuideLine(),ht=ot.getTextContent();if(ht&&lt){var vt=ot.textGuideLineConfig||{},ct=[[0,0],[0,0],[0,0]],dt=vt.candidates||et,Mt=ht.getBoundingRect().clone();Mt.applyTransform(ht.getComputedTransform());var Pt=1/0,wt=vt.anchor,Ot=ot.getComputedTransform(),Ft=Ot&&(0,V.invert)([],Ot),Ut=at.get("length2")||0;wt&&Y.copy(wt);for(var kt=0;kt<dt.length;kt++){$(dt[kt],0,Mt,tt,nt),B.Z.scaleAndAdd(J,tt,nt,Ut),J.transform(Ft);var ue=ot.getBoundingRect(),Pe=wt?wt.distance(J):ot instanceof St.ZP?z(J,ot.path,Y):it(J,ue,Y);Pe<Pt&&(Pt=Pe,J.transform(Ot),Y.transform(Ot),Y.toArray(ct[0]),J.toArray(ct[1]),tt.toArray(ct[2]))}P(ct,at.get("minTurnAngle")),lt.setShape({points:ct})}}}var C=[],I=new B.Z;function P(ot,at){if(at<=180&&at>0){at=at/180*Math.PI,tt.fromArray(ot[0]),J.fromArray(ot[1]),Y.fromArray(ot[2]),B.Z.sub(nt,tt,J),B.Z.sub(U,Y,J);var lt=nt.len(),ht=U.len();if(!(lt<.001||ht<.001)){nt.scale(1/lt),U.scale(1/ht);var vt=nt.dot(U);if(Math.cos(at)<vt){var dt=K(J.x,J.y,Y.x,Y.y,tt.x,tt.y,C,!1);I.fromArray(C),I.scaleAndAdd(U,dt/Math.tan(Math.PI-at));var Mt=Y.x!==J.x?(I.x-J.x)/(Y.x-J.x):(I.y-J.y)/(Y.y-J.y);if(isNaN(Mt))return;Mt<0?B.Z.copy(I,J):Mt>1&&B.Z.copy(I,Y),I.toArray(ot[1])}}}}function M(ot,at,lt){if(lt<=180&&lt>0){lt=lt/180*Math.PI,tt.fromArray(ot[0]),J.fromArray(ot[1]),Y.fromArray(ot[2]),B.Z.sub(nt,J,tt),B.Z.sub(U,Y,J);var ht=nt.len(),vt=U.len();if(!(ht<.001||vt<.001)&&(nt.scale(1/ht),U.scale(1/vt),nt.dot(at)<Math.cos(lt))){var Mt=K(J.x,J.y,Y.x,Y.y,tt.x,tt.y,C,!1);I.fromArray(C);var Pt=Math.PI/2,Ot=Pt+Math.acos(U.dot(at))-lt;if(Ot>=Pt)B.Z.copy(I,Y);else{I.scaleAndAdd(U,Mt/Math.tan(Math.PI/2-Ot));var Ft=Y.x!==J.x?(I.x-J.x)/(Y.x-J.x):(I.y-J.y)/(Y.y-J.y);if(isNaN(Ft))return;Ft<0?B.Z.copy(I,J):Ft>1&&B.Z.copy(I,Y)}I.toArray(ot[1])}}}function A(ot,at,lt,ht){var vt="normal"===lt,ct=vt?ot:ot.ensureState(lt);ct.ignore=at;var dt=ht.get("smooth");dt&&!0===dt&&(dt=.3),ct.shape=ct.shape||{},dt>0&&(ct.shape.smooth=dt);var Mt=ht.getModel("lineStyle").getLineStyle();vt?ot.useStyle(Mt):ct.style=Mt}function R(ot,at){var lt=at.smooth,ht=at.points;if(ht)if(ot.moveTo(ht[0][0],ht[0][1]),lt>0&&ht.length>=3){var vt=k.dist(ht[0],ht[1]),ct=k.dist(ht[1],ht[2]);if(!vt||!ct)return ot.lineTo(ht[1][0],ht[1][1]),void ot.lineTo(ht[2][0],ht[2][1]);var dt=Math.min(vt,ct)*lt,Mt=k.lerp([],ht[1],ht[0],dt/vt),Pt=k.lerp([],ht[1],ht[2],dt/ct),wt=k.lerp([],Mt,Pt,.5);ot.bezierCurveTo(Mt[0],Mt[1],Mt[0],Mt[1],wt[0],wt[1]),ot.bezierCurveTo(Pt[0],Pt[1],Pt[0],Pt[1],ht[2][0],ht[2][1])}else for(var Ot=1;Ot<ht.length;Ot++)ot.lineTo(ht[Ot][0],ht[Ot][1])}function Z(ot,at,lt){var ht=ot.getTextGuideLine(),vt=ot.getTextContent();if(vt){for(var ct=at.normal,dt=ct.get("show"),Mt=vt.ignore,Pt=0;Pt<X.qc.length;Pt++){var wt=X.qc[Pt],Ot=at[wt],Ft="normal"===wt;if(Ot){var Ut=Ot.get("show");if((Ft?Mt:(0,yt.retrieve2)(vt.states[wt]&&vt.states[wt].ignore,Mt))||!(0,yt.retrieve2)(Ut,dt)){var ie=Ft?ht:ht&&ht.states[wt];ie&&(ie.ignore=!0);continue}ht||(ht=new n.Z,ot.setTextGuideLine(ht),!Ft&&(Mt||!dt)&&A(ht,!0,"normal",at.normal),ot.stateProxy&&(ht.stateProxy=ot.stateProxy)),A(ht,!1,wt,Ot)}}if(ht){(0,yt.defaults)(ht.style,lt),ht.style.fill=null;var ue=ct.get("showAbove");(ot.textGuideLineConfig=ot.textGuideLineConfig||{}).showAbove=ue||!1,ht.buildPath=R}}else ht&&ot.removeTextGuideLine()}function rt(ot,at){for(var lt={normal:ot.getModel(at=at||"labelLine")},ht=0;ht<X.L1.length;ht++){var vt=X.L1[ht];lt[vt]=ot.getModel([vt,at])}return lt}},4206:(Ze,te,D)=>{D.d(te,{GI:()=>gt,VT:()=>n,WE:()=>mt,yl:()=>yt});var B=D(9726),St=D(4525);function n(V){for(var k=[],X=0;X<V.length;X++){var q=V[X];if(!q.defaultAttr.ignore){var N=q.label,et=N.getComputedTransform(),$=N.getBoundingRect(),st=!et||et[1]<1e-5&&et[2]<1e-5,K=N.style.margin||0,_=$.clone();_.applyTransform(et),_.x-=K/2,_.y-=K/2,_.width+=K,_.height+=K;var j=st?new B.Z($,et):null;k.push({label:N,labelLine:q.labelLine,rect:_,localRect:$,obb:j,priority:q.priority,defaultAttr:q.defaultAttr,layoutOption:q.computedLayoutOption,axisAligned:st,transform:et})}}return k}function _t(V,k,X,q,N,et){var $=V.length;if(!($<2)){V.sort(function(Z,rt){return Z.rect[k]-rt.rect[k]});for(var K,st=0,_=!1,j=[],it=0,z=0;z<$;z++){var tt=V[z],J=tt.rect;(K=J[k]-st)<0&&(J[k]-=K,tt.label[k]-=K,_=!0);var Y=Math.max(-K,0);j.push(Y),it+=Y,st=J[k]+J[X]}it>0&&et&&M(-it/$,0,$);var w,C,nt=V[0],U=V[$-1];return I(),w<0&&A(-w,.8),C<0&&A(C,.8),I(),P(w,C,1),P(C,w,-1),I(),w<0&&R(-w),C<0&&R(C),_}function I(){w=nt.rect[k]-q,C=N-U.rect[k]-U.rect[X]}function P(Z,rt,ot){if(Z<0){var at=Math.min(rt,-Z);if(at>0){M(at*ot,0,$);var lt=at+Z;lt<0&&A(-lt*ot,1)}else A(-Z*ot,1)}}function M(Z,rt,ot){0!==Z&&(_=!0);for(var at=rt;at<ot;at++){var lt=V[at];lt.rect[k]+=Z,lt.label[k]+=Z}}function A(Z,rt){for(var ot=[],at=0,lt=1;lt<$;lt++){var ht=V[lt-1].rect,vt=Math.max(V[lt].rect[k]-ht[k]-ht[X],0);ot.push(vt),at+=vt}if(at){var ct=Math.min(Math.abs(Z)/at,rt);if(Z>0)for(lt=0;lt<$-1;lt++)M(ot[lt]*ct,0,lt+1);else for(lt=$-1;lt>0;lt--)M(-ot[lt-1]*ct,lt,$)}}function R(Z){var rt=Z<0?-1:1;Z=Math.abs(Z);for(var ot=Math.ceil(Z/($-1)),at=0;at<$-1;at++)if(rt>0?M(ot,0,at+1):M(-ot,$-at-1,$),(Z-=ot)<=0)return}}function mt(V,k,X,q){return _t(V,"x","width",k,X,q)}function gt(V,k,X,q){return _t(V,"y","height",k,X,q)}function yt(V){var k=[];V.sort(function(Y,nt){return nt.priority-Y.priority});var X=new St.Z(0,0,0,0);function q(Y){if(!Y.ignore){var nt=Y.ensureState("emphasis");null==nt.ignore&&(nt.ignore=!1)}Y.ignore=!0}for(var N=0;N<V.length;N++){var et=V[N],$=et.axisAligned,st=et.localRect,K=et.transform,_=et.label,j=et.labelLine;X.copy(et.rect),X.width-=.1,X.height-=.1,X.x+=.05,X.y+=.05;for(var it=et.obb,z=!1,tt=0;tt<k.length;tt++){var J=k[tt];if(X.intersect(J.rect)){if($&&J.axisAligned){z=!0;break}if(J.obb||(J.obb=new B.Z(J.localRect,J.transform)),it||(it=new B.Z(st,K)),it.intersect(J.obb)){z=!0;break}}}z?(q(_),j&&q(j)):(_.attr("ignore",et.defaultAttr.ignore),j&&j.attr("ignore",et.defaultAttr.labelGuideIgnore),k.push(et))}}},8811:(Ze,te,D)=>{D.d(te,{Lr:()=>q,k3:()=>X,nC:()=>N,ni:()=>k,pe:()=>tt,qA:()=>z,qT:()=>it,tD:()=>J});var B=D(2018),St=D(6615),n=D(8786),_t=D(1617),mt=D(3996),gt={};function yt(Y,nt){for(var U=0;U<n.L1.length;U++){var w=n.L1[U],C=nt[w],I=Y.ensureState(w);I.style=I.style||{},I.style.text=C}var P=Y.currentStates.slice();Y.clearStates(!0),Y.setStyle({text:nt.normal}),Y.useStates(P,!0)}function V(Y,nt,U){var M,w=Y.labelFetcher,C=Y.labelDataIndex,I=Y.labelDimIndex,P=nt.normal;w&&(M=w.getFormattedLabel(C,"normal",null,I,P&&P.get("formatter"),null!=U?{interpolatedValue:U}:null)),null==M&&(M=(0,St.isFunction)(Y.defaultText)?Y.defaultText(C,Y,U):Y.defaultText);for(var A={normal:M},R=0;R<n.L1.length;R++){var Z=n.L1[R],rt=nt[Z];A[Z]=(0,St.retrieve2)(w?w.getFormattedLabel(C,Z,null,I,rt&&rt.get("formatter")):null,M)}return A}function k(Y,nt,U,w){U=U||gt;for(var C=Y instanceof B.ZP,I=!1,P=0;P<n.qc.length;P++)if((M=nt[n.qc[P]])&&M.getShallow("show")){I=!0;break}var A=C?Y:Y.getTextContent();if(I){C||(A||(A=new B.ZP,Y.setTextContent(A)),Y.stateProxy&&(A.stateProxy=Y.stateProxy));var R=V(U,nt),Z=nt.normal,rt=!!Z.getShallow("show"),ot=q(Z,w&&w.normal,U,!1,!C);for(ot.text=R.normal,C||Y.setTextConfig(N(Z,U,!1)),P=0;P<n.L1.length;P++){var M,at=n.L1[P];if(M=nt[at]){var lt=A.ensureState(at),ht=!!(0,St.retrieve2)(M.getShallow("show"),rt);ht!==rt&&(lt.ignore=!ht),lt.style=q(M,w&&w[at],U,!0,!C),lt.style.text=R[at],C||(Y.ensureState(at).textConfig=N(M,U,!0))}}A.silent=!!Z.getShallow("silent"),null!=A.style.x&&(ot.x=A.style.x),null!=A.style.y&&(ot.y=A.style.y),A.ignore=!rt,A.useStyle(ot),A.dirty(),U.enableTextSetter&&(z(A).setLabelText=function(ct){var dt=V(U,nt,ct);yt(A,dt)})}else A&&(A.ignore=!0);Y.dirty()}function X(Y,nt){for(var U={normal:Y.getModel(nt=nt||"label")},w=0;w<n.L1.length;w++){var C=n.L1[w];U[C]=Y.getModel([C,nt])}return U}function q(Y,nt,U,w,C){var I={};return function et(Y,nt,U,w,C){U=U||gt;var A,I=nt.ecModel,P=I&&I.option.textStyle,M=function $(Y){for(var nt;Y&&Y!==Y.ecModel;){var U=(Y.option||gt).rich;if(U){nt=nt||{};for(var w=(0,St.keys)(U),C=0;C<w.length;C++)nt[w[C]]=1}Y=Y.parentModel}return nt}(nt);if(M)for(var R in A={},M)if(M.hasOwnProperty(R)){var Z=nt.getModel(["rich",R]);j(A[R]={},Z,P,U,w,C,!1,!0)}A&&(Y.rich=A);var rt=nt.get("overflow");rt&&(Y.overflow=rt);var ot=nt.get("minMargin");null!=ot&&(Y.margin=ot),j(Y,nt,P,U,w,C,!0,!1)}(I,Y,U,w,C),nt&&(0,St.extend)(I,nt),I}function N(Y,nt,U){nt=nt||{};var C,w={},I=Y.getShallow("rotate"),P=(0,St.retrieve2)(Y.getShallow("distance"),U?null:5),M=Y.getShallow("offset");return"outside"===(C=Y.getShallow("position")||(U?null:"inside"))&&(C=nt.defaultOutsidePosition||"top"),null!=C&&(w.position=C),null!=M&&(w.offset=M),null!=I&&(I*=Math.PI/180,w.rotation=I),null!=P&&(w.distance=P),w.outsideFill="inherit"===Y.get("color")?nt.inheritColor||null:"auto",w}var st=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],K=["align","lineHeight","width","height","tag","verticalAlign"],_=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function j(Y,nt,U,w,C,I,P,M){U=!C&&U||gt;var A=w&&w.inheritColor,R=nt.getShallow("color"),Z=nt.getShallow("textBorderColor"),rt=(0,St.retrieve2)(nt.getShallow("opacity"),U.opacity);("inherit"===R||"auto"===R)&&(R=A||null),("inherit"===Z||"auto"===Z)&&(Z=A||null),I||(R=R||U.color,Z=Z||U.textBorderColor),null!=R&&(Y.fill=R),null!=Z&&(Y.stroke=Z);var ot=(0,St.retrieve2)(nt.getShallow("textBorderWidth"),U.textBorderWidth);null!=ot&&(Y.lineWidth=ot);var at=(0,St.retrieve2)(nt.getShallow("textBorderType"),U.textBorderType);null!=at&&(Y.lineDash=at);var lt=(0,St.retrieve2)(nt.getShallow("textBorderDashOffset"),U.textBorderDashOffset);null!=lt&&(Y.lineDashOffset=lt),!C&&null==rt&&!M&&(rt=w&&w.defaultOpacity),null!=rt&&(Y.opacity=rt),!C&&!I&&null==Y.fill&&w.inheritColor&&(Y.fill=w.inheritColor);for(var ht=0;ht<st.length;ht++)null!=(ct=(0,St.retrieve2)(nt.getShallow(vt=st[ht]),U[vt]))&&(Y[vt]=ct);for(ht=0;ht<K.length;ht++)null!=(ct=nt.getShallow(vt=K[ht]))&&(Y[vt]=ct);if(null==Y.verticalAlign){var dt=nt.getShallow("baseline");null!=dt&&(Y.verticalAlign=dt)}if(!P||!w.disableBox){for(ht=0;ht<_.length;ht++){var vt,ct;null!=(ct=nt.getShallow(vt=_[ht]))&&(Y[vt]=ct)}var Mt=nt.getShallow("borderType");null!=Mt&&(Y.borderDash=Mt),("auto"===Y.backgroundColor||"inherit"===Y.backgroundColor)&&A&&(Y.backgroundColor=A),("auto"===Y.borderColor||"inherit"===Y.borderColor)&&A&&(Y.borderColor=A)}}function it(Y,nt){var U=nt&&nt.getModel("textStyle");return(0,St.trim)([Y.fontStyle||U&&U.getShallow("fontStyle")||"",Y.fontWeight||U&&U.getShallow("fontWeight")||"",(Y.fontSize||U&&U.getShallow("fontSize")||12)+"px",Y.fontFamily||U&&U.getShallow("fontFamily")||"sans-serif"].join(" "))}var z=(0,_t.Yf)();function tt(Y,nt,U,w){if(Y){var C=z(Y);C.prevValue=C.value,C.value=U;var I=nt.normal;C.valueAnimation=I.get("valueAnimation"),C.valueAnimation&&(C.precision=I.get("precision"),C.defaultInterpolatedText=w,C.statesModels=nt)}}function J(Y,nt,U,w,C){var I=z(Y);if(I.valueAnimation&&I.prevValue!==I.value){var P=I.defaultInterpolatedText,M=(0,St.retrieve2)(I.interpolatedValue,I.prevValue),A=I.value;Y.percent=0,(null==I.prevValue?mt.KZ:mt.D)(Y,{percent:1},w,nt,null,function R(Z){var rt=(0,_t.pk)(U,I.precision,M,A,Z);I.interpolatedValue=1===Z?null:rt;var ot=V({labelDataIndex:nt,labelFetcher:C,defaultText:P?P(rt):rt+""},I.statesModels,rt);yt(Y,ot)})}}},8253:(Ze,te,D)=>{D.d(te,{Bk:()=>K,G_:()=>$,Ge:()=>X,Gk:()=>k,My:()=>N,bK:()=>st});var B=D(6615),St=D(8301),n=D(3593),_t=D(9104),mt=D(2448),gt="__ec_stack_";function yt(z){return z.get("stack")||gt+z.seriesIndex}function V(z){return z.dim+z.index}function k(z){var tt=[],J=z.axis,Y="axis0";if("category"===J.type){for(var nt=J.getBandWidth(),U=0;U<z.count;U++)tt.push((0,B.defaults)({bandWidth:nt,axisKey:Y,stackId:gt+U},z));var w=et(tt),C=[];for(U=0;U<z.count;U++){var I=w[Y][gt+U];I.offsetCenter=I.offset+I.width/2,C.push(I)}return C}}function X(z,tt){var J=[];return tt.eachSeriesByType(z,function(Y){_(Y)&&J.push(Y)}),J}function N(z){var tt=function q(z){var tt={};(0,B.each)(z,function(I){var M=I.coordinateSystem.getBaseAxis();if("time"===M.type||"value"===M.type)for(var A=I.getData(),R=M.dim+"_"+M.index,Z=A.getDimensionIndex(A.mapDimension(M.dim)),rt=A.getStore(),ot=0,at=rt.count();ot<at;++ot){var lt=rt.get(Z,ot);tt[R]?tt[R].push(lt):tt[R]=[lt]}});var J={};for(var Y in tt)if(tt.hasOwnProperty(Y)){var nt=tt[Y];if(nt){nt.sort(function(I,P){return I-P});for(var U=null,w=1;w<nt.length;++w){var C=nt[w]-nt[w-1];C>0&&(U=null===U?C:Math.min(U,C))}J[Y]=U}}return J}(z),J=[];return(0,B.each)(z,function(Y){var C,U=Y.coordinateSystem.getBaseAxis(),w=U.getExtent();if("category"===U.type)C=U.getBandWidth();else if("value"===U.type||"time"===U.type){var P=tt[U.dim+"_"+U.index],M=Math.abs(w[1]-w[0]),A=U.scale.getExtent(),R=Math.abs(A[1]-A[0]);C=P?M/R*P:M}else{var Z=Y.getData();C=Math.abs(w[1]-w[0])/Z.count()}var rt=(0,St.GM)(Y.get("barWidth"),C),ot=(0,St.GM)(Y.get("barMaxWidth"),C),at=(0,St.GM)(Y.get("barMinWidth")||(j(Y)?.5:1),C),lt=Y.get("barGap"),ht=Y.get("barCategoryGap");J.push({bandWidth:C,barWidth:rt,barMaxWidth:ot,barMinWidth:at,barGap:lt,barCategoryGap:ht,axisKey:V(U),stackId:yt(Y)})}),et(J)}function et(z){var tt={};(0,B.each)(z,function(Y,nt){var U=Y.axisKey,w=Y.bandWidth,C=tt[U]||{bandWidth:w,remainedWidth:w,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},I=C.stacks;tt[U]=C;var P=Y.stackId;I[P]||C.autoWidthCount++,I[P]=I[P]||{width:0,maxWidth:0};var M=Y.barWidth;M&&!I[P].width&&(I[P].width=M,M=Math.min(C.remainedWidth,M),C.remainedWidth-=M);var A=Y.barMaxWidth;A&&(I[P].maxWidth=A);var R=Y.barMinWidth;R&&(I[P].minWidth=R);var Z=Y.barGap;null!=Z&&(C.gap=Z);var rt=Y.barCategoryGap;null!=rt&&(C.categoryGap=rt)});var J={};return(0,B.each)(tt,function(Y,nt){J[nt]={};var U=Y.stacks,w=Y.bandWidth,C=Y.categoryGap;if(null==C){var I=(0,B.keys)(U).length;C=Math.max(35-4*I,15)+"%"}var P=(0,St.GM)(C,w),M=(0,St.GM)(Y.gap,1),A=Y.remainedWidth,R=Y.autoWidthCount,Z=(A-P)/(R+(R-1)*M);Z=Math.max(Z,0),(0,B.each)(U,function(lt){var ht=lt.maxWidth,vt=lt.minWidth;if(lt.width){var ct=lt.width;ht&&(ct=Math.min(ct,ht)),vt&&(ct=Math.max(ct,vt)),lt.width=ct,A-=ct+M*ct,R--}else ct=Z,ht&&ht<ct&&(ct=Math.min(ht,A)),vt&&vt>ct&&(ct=vt),ct!==Z&&(lt.width=ct,A-=ct+M*ct,R--)}),Z=(A-P)/(R+(R-1)*M),Z=Math.max(Z,0);var ot,rt=0;(0,B.each)(U,function(lt,ht){lt.width||(lt.width=Z),ot=lt,rt+=lt.width*(1+M)}),ot&&(rt-=ot.width*M);var at=-rt/2;(0,B.each)(U,function(lt,ht){J[nt][ht]=J[nt][ht]||{bandWidth:w,offset:at,width:lt.width},at+=lt.width*(1+M)})}),J}function $(z,tt,J){if(z&&tt){var Y=z[V(tt)];return null!=Y&&null!=J?Y[yt(J)]:Y}}function st(z,tt){var J=X(z,tt),Y=N(J);(0,B.each)(J,function(nt){var U=nt.getData(),C=nt.coordinateSystem.getBaseAxis(),I=yt(nt),P=Y[V(C)][I];U.setLayout({bandWidth:P.bandWidth,offset:P.offset,size:P.width})})}function K(z){return{seriesType:z,plan:(0,_t.Z)(),reset:function(tt){if(_(tt)){var J=tt.getData(),Y=tt.coordinateSystem,nt=Y.getBaseAxis(),U=Y.getOtherAxis(nt),w=J.getDimensionIndex(J.mapDimension(U.dim)),C=J.getDimensionIndex(J.mapDimension(nt.dim)),I=tt.get("showBackground",!0),P=J.mapDimension(U.dim),M=J.getCalculationInfo("stackResultDimension"),A=(0,n.M)(J,P)&&!!J.getCalculationInfo("stackedOnSeries"),R=U.isHorizontal(),Z=function it(z,tt){return tt.toGlobalCoord(tt.dataToCoord("log"===tt.type?1:0))}(0,U),rt=j(tt),ot=tt.get("barMinHeight")||0,at=M&&J.getDimensionIndex(M),lt=J.getLayout("size"),ht=J.getLayout("offset");return{progress:function(vt,ct){for(var Ut,dt=vt.count,Mt=rt&&(0,mt.o)(3*dt),Pt=rt&&I&&(0,mt.o)(3*dt),wt=rt&&(0,mt.o)(dt),Ot=Y.master.getRect(),Ft=R?Ot.width:Ot.height,kt=ct.getStore(),ie=0;null!=(Ut=vt.next());){var ue=kt.get(A?at:w,Ut),Pe=kt.get(C,Ut),Se=Z,De=void 0;A&&(De=+ue-kt.get(w,Ut));var Fe=void 0,Ye=void 0,tr=void 0,or=void 0;if(R){var Hr=Y.dataToPoint([ue,Pe]);A&&(Se=Y.dataToPoint([De,Pe])[0]),Fe=Se,Ye=Hr[1]+ht,tr=Hr[0]-Se,or=lt,Math.abs(tr)<ot&&(tr=(tr<0?-1:1)*ot)}else Hr=Y.dataToPoint([Pe,ue]),A&&(Se=Y.dataToPoint([Pe,De])[1]),Fe=Hr[0]+ht,Ye=Se,tr=lt,or=Hr[1]-Se,Math.abs(or)<ot&&(or=(or<=0?-1:1)*ot);rt?(Mt[ie]=Fe,Mt[ie+1]=Ye,Mt[ie+2]=R?tr:or,Pt&&(Pt[ie]=R?Ot.x:Fe,Pt[ie+1]=R?Ye:Ot.y,Pt[ie+2]=Ft),wt[Ut]=Ut):ct.setItemLayout(Ut,{x:Fe,y:Ye,width:tr,height:or}),ie+=3}rt&&ct.setLayout({largePoints:Mt,largeDataIndices:wt,largeBackgroundPoints:Pt,valueAxisHorizontal:R})}}}}}}function _(z){return z.coordinateSystem&&"cartesian2d"===z.coordinateSystem.type}function j(z){return z.pipelineContext&&z.pipelineContext.large}},7789:(Ze,te,D)=>{D.d(te,{s:()=>mt,y:()=>n});var B=D(6615),St=D(1617);function n(gt,yt){function V(k,X){var q=[];return k.eachComponent({mainType:"series",subType:gt,query:X},function(N){q.push(N.seriesIndex)}),q}(0,B.each)([[gt+"ToggleSelect","toggleSelect"],[gt+"Select","select"],[gt+"UnSelect","unselect"]],function(k){yt(k[0],function(X,q,N){X=(0,B.extend)({},X),N.dispatchAction((0,B.extend)(X,{type:k[1],seriesIndex:V(q,X)}))})})}function _t(gt,yt,V,k,X){var q=gt+yt;V.isSilent(q)||k.eachComponent({mainType:"series",subType:"pie"},function(N){for(var et=N.seriesIndex,$=N.option.selectedMap,st=X.selected,K=0;K<st.length;K++)if(st[K].seriesIndex===et){var _=N.getData(),j=(0,St.gO)(_,X.fromActionPayload);V.trigger(q,{type:q,seriesId:N.id,name:(0,B.isArray)(j)?_.getName(j[0]):_.getName(j),selected:(0,B.isString)($)?$:(0,B.extend)({},$)})}})}function mt(gt,yt,V){gt.on("selectchanged",function(k){var X=V.getModel();k.isFromClick?(_t("map","selectchanged",yt,X,k),_t("pie","selectchanged",yt,X,k)):"select"===k.fromAction?(_t("map","selected",yt,X,k),_t("pie","selected",yt,X,k)):"unselect"===k.fromAction&&(_t("map","unselected",yt,X,k),_t("pie","unselected",yt,X,k))})}},2310:(Ze,te,D)=>{D.d(te,{Z:()=>q});var B=D(8299),St=D(6615),n=D(7838),_t=D(6012),mt=D(8789),gt=D(1617),yt=D(942),V=(0,gt.Yf)(),k=function(N){function et($,st,K){var _=N.call(this,$,st,K)||this;return _.uid=_t.Kr("ec_cpt_model"),_}return(0,B.ZT)(et,N),et.prototype.init=function($,st,K){this.mergeDefaultAndTheme($,K)},et.prototype.mergeDefaultAndTheme=function($,st){var K=yt.YD(this),_=K?yt.tE($):{},j=st.getTheme();St.merge($,j.get(this.mainType)),St.merge($,this.getDefaultOption()),K&&yt.dt($,_,K)},et.prototype.mergeOption=function($,st){St.merge(this.option,$,!0);var K=yt.YD(this);K&&yt.dt(this.option,$,K)},et.prototype.optionUpdated=function($,st){},et.prototype.getDefaultOption=function(){var $=this.constructor;if(!(0,mt.PT)($))return $.defaultOption;var st=V(this);if(!st.defaultOption){for(var K=[],_=$;_;){var j=_.prototype.defaultOption;j&&K.push(j),_=_.superClass}for(var it={},z=K.length-1;z>=0;z--)it=St.merge(it,K[z],!0);st.defaultOption=it}return st.defaultOption},et.prototype.getReferringComponents=function($,st){var _=$+"Id";return(0,gt.HZ)(this.ecModel,$,{index:this.get($+"Index",!0),id:this.get(_,!0)},st)},et.prototype.getBoxLayoutParams=function(){var $=this;return{left:$.get("left"),top:$.get("top"),right:$.get("right"),bottom:$.get("bottom"),width:$.get("width"),height:$.get("height")}},et.prototype.getZLevelKey=function(){return""},et.prototype.setZLevel=function($){this.option.zlevel=$},et.protoInitialize=(($=et.prototype).type="component",$.id="",$.name="",$.mainType="",$.subType="",void($.componentIndex=0)),et;var $}(n.Z);(0,mt.pw)(k,n.Z),(0,mt.au)(k),_t.cj(k),_t.jS(k,function X(N){var et=[];return St.each(k.getClassesByMainType(N),function($){et=et.concat($.dependencies||$.prototype.dependencies||[])}),et=St.map(et,function($){return(0,mt.u9)($).main}),"dataset"!==N&&St.indexOf(et,"dataset")<=0&&et.unshift("dataset"),et});const q=k},7838:(Ze,te,D)=>{D.d(te,{Z:()=>j});var B=D(1156),St=D(8789),mt=(0,D(7005).Z)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),gt=function(){function it(){}return it.prototype.getAreaStyle=function(z,tt){return mt(this,z,tt)},it}(),yt=D(8811),V=D(2018),k=["textStyle","color"],X=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],q=new V.ZP;const et=function(){function it(){}return it.prototype.getTextColor=function(z){var tt=this.ecModel;return this.getShallow("color")||(!z&&tt?tt.get(k):null)},it.prototype.getFont=function(){return(0,yt.qT)({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},it.prototype.getTextRect=function(z){for(var tt={text:z,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},J=0;J<X.length;J++)tt[X[J]]=this.getShallow(X[J]);return q.useStyle(tt),q.update(),q.getBoundingRect()},it}();var $=D(6191),st=D(7617),K=D(6615),_=function(){function it(z,tt,J){this.parentModel=tt,this.ecModel=J,this.option=z}return it.prototype.init=function(z,tt,J){for(var Y=[],nt=3;nt<arguments.length;nt++)Y[nt-3]=arguments[nt]},it.prototype.mergeOption=function(z,tt){(0,K.merge)(this.option,z,!0)},it.prototype.get=function(z,tt){return null==z?this.option:this._doGet(this.parsePath(z),!tt&&this.parentModel)},it.prototype.getShallow=function(z,tt){var J=this.option,Y=null==J?J:J[z];if(null==Y&&!tt){var nt=this.parentModel;nt&&(Y=nt.getShallow(z))}return Y},it.prototype.getModel=function(z,tt){var J=null!=z,Y=J?this.parsePath(z):null;return new it(J?this._doGet(Y):this.option,tt=tt||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(Y)),this.ecModel)},it.prototype.isEmpty=function(){return null==this.option},it.prototype.restoreData=function(){},it.prototype.clone=function(){return new(0,this.constructor)((0,K.clone)(this.option))},it.prototype.parsePath=function(z){return"string"==typeof z?z.split("."):z},it.prototype.resolveParentPath=function(z){return z},it.prototype.isAnimationEnabled=function(){if(!B.Z.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},it.prototype._doGet=function(z,tt){var J=this.option;if(!z)return J;for(var Y=0;Y<z.length&&(!z[Y]||null!=(J=J&&"object"==typeof J?J[z[Y]]:null));Y++);return null==J&&tt&&(J=tt._doGet(this.resolveParentPath(z),tt.parentModel)),J},it}();(0,St.dm)(_),(0,St.Qj)(_),(0,K.mixin)(_,$.K),(0,K.mixin)(_,st.D),(0,K.mixin)(_,gt),(0,K.mixin)(_,et);const j=_},4263:(Ze,te,D)=>{D.d(te,{V:()=>st,Z:()=>U});var B=D(8299),St=D(6615),n=D(1156),_t=D(1617),mt=D(2310),gt=D(7522),yt=D(8488),V=D(942),k=D(338),X=D(8789),q=D(5495),N=D(4867),et=_t.Yf();function $(w,C){return w.getName(C)||w.getId(C)}var st="__universalTransitionEnabled",K=function(w){function C(){var I=null!==w&&w.apply(this,arguments)||this;return I._selectedDataIndicesMap={},I}return(0,B.ZT)(C,w),C.prototype.init=function(I,P,M){this.seriesIndex=this.componentIndex,this.dataTask=(0,k.v)({count:it,reset:z}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(I,M),(et(this).sourceManager=new q.U(this)).prepareSource();var R=this.getInitialData(I,M);J(R,this),this.dataTask.context.data=R,et(this).dataBeforeProcessed=R,_(this),this._initSelectedMapFromData(R)},C.prototype.mergeDefaultAndTheme=function(I,P){var M=(0,V.YD)(this),A=M?(0,V.tE)(I):{},R=this.subType;mt.Z.hasClass(R)&&(R+="Series"),St.merge(I,P.getTheme().get(this.subType)),St.merge(I,this.getDefaultOption()),_t.Cc(I,"label",["show"]),this.fillDataTextStyle(I.data),M&&(0,V.dt)(I,A,M)},C.prototype.mergeOption=function(I,P){I=St.merge(this.option,I,!0),this.fillDataTextStyle(I.data);var M=(0,V.YD)(this);M&&(0,V.dt)(this.option,I,M);var A=et(this).sourceManager;A.dirty(),A.prepareSource();var R=this.getInitialData(I,P);J(R,this),this.dataTask.dirty(),this.dataTask.context.data=R,et(this).dataBeforeProcessed=R,_(this),this._initSelectedMapFromData(R)},C.prototype.fillDataTextStyle=function(I){if(I&&!St.isTypedArray(I))for(var P=["show"],M=0;M<I.length;M++)I[M]&&I[M].label&&_t.Cc(I[M],"label",P)},C.prototype.getInitialData=function(I,P){},C.prototype.appendData=function(I){this.getRawData().appendData(I.data)},C.prototype.getData=function(I){var P=nt(this);if(P){var M=P.context.data;return null==I?M:M.getLinkedData(I)}return et(this).data},C.prototype.getAllData=function(){var I=this.getData();return I&&I.getLinkedDataAll?I.getLinkedDataAll():[{data:I}]},C.prototype.setData=function(I){var P=nt(this);if(P){var M=P.context;M.outputData=I,P!==this.dataTask&&(M.data=I)}et(this).data=I},C.prototype.getEncode=function(){var I=this.get("encode",!0);if(I)return St.createHashMap(I)},C.prototype.getSourceManager=function(){return et(this).sourceManager},C.prototype.getSource=function(){return this.getSourceManager().getSource()},C.prototype.getRawData=function(){return et(this).dataBeforeProcessed},C.prototype.getColorBy=function(){return this.get("colorBy")||"series"},C.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},C.prototype.getBaseAxis=function(){var I=this.coordinateSystem;return I&&I.getBaseAxis&&I.getBaseAxis()},C.prototype.formatTooltip=function(I,P,M){return(0,N.w)({series:this,dataIndex:I,multipleSeries:P})},C.prototype.isAnimationEnabled=function(){var I=this.ecModel;if(n.Z.node&&(!I||!I.ssr))return!1;var P=this.getShallow("animation");return P&&this.getData().count()>this.getShallow("animationThreshold")&&(P=!1),!!P},C.prototype.restoreData=function(){this.dataTask.dirty()},C.prototype.getColorFromPalette=function(I,P,M){var A=this.ecModel,R=gt._.prototype.getColorFromPalette.call(this,I,P,M);return R||(R=A.getColorFromPalette(I,P,M)),R},C.prototype.coordDimToDataDim=function(I){return this.getRawData().mapDimensionsAll(I)},C.prototype.getProgressive=function(){return this.get("progressive")},C.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},C.prototype.select=function(I,P){this._innerSelect(this.getData(P),I)},C.prototype.unselect=function(I,P){var M=this.option.selectedMap;if(M){var A=this.option.selectedMode,R=this.getData(P);if("series"===A||"all"===M)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var Z=0;Z<I.length;Z++){var ot=$(R,I[Z]);M[ot]=!1,this._selectedDataIndicesMap[ot]=-1}}},C.prototype.toggleSelect=function(I,P){for(var M=[],A=0;A<I.length;A++)M[0]=I[A],this.isSelected(I[A],P)?this.unselect(M,P):this.select(M,P)},C.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var I=this._selectedDataIndicesMap,P=St.keys(I),M=[],A=0;A<P.length;A++){var R=I[P[A]];R>=0&&M.push(R)}return M},C.prototype.isSelected=function(I,P){var M=this.option.selectedMap;if(!M)return!1;var A=this.getData(P);return("all"===M||M[$(A,I)])&&!A.getItemModel(I).get(["select","disabled"])},C.prototype.isUniversalTransitionEnabled=function(){if(this[st])return!0;var I=this.option.universalTransition;return!!I&&(!0===I||I&&I.enabled)},C.prototype._innerSelect=function(I,P){var M,A,R=this.option,Z=R.selectedMode,rt=P.length;if(Z&&rt)if("series"===Z)R.selectedMap="all";else if("multiple"===Z){St.isObject(R.selectedMap)||(R.selectedMap={});for(var ot=R.selectedMap,at=0;at<rt;at++){var lt=P[at];ot[ht=$(I,lt)]=!0,this._selectedDataIndicesMap[ht]=I.getRawIndex(lt)}}else if("single"===Z||!0===Z){var vt=P[rt-1],ht=$(I,vt);R.selectedMap=((M={})[ht]=!0,M),this._selectedDataIndicesMap=((A={})[ht]=I.getRawIndex(vt),A)}},C.prototype._initSelectedMapFromData=function(I){if(!this.option.selectedMap){var P=[];I.hasItemOption&&I.each(function(M){var A=I.getRawDataItem(M);A&&A.selected&&P.push(M)}),P.length>0&&this._innerSelect(I,P)}},C.registerClass=function(I){return mt.Z.registerClass(I)},C.protoInitialize=((I=C.prototype).type="series.__base__",I.seriesIndex=0,I.ignoreStyleOnData=!1,I.hasSymbolVisual=!1,I.defaultSymbol="circle",I.visualStyleAccessPath="itemStyle",void(I.visualDrawType="fill")),C;var I}(mt.Z);function _(w){var C=w.name;_t.yu(w)||(w.name=function j(w){var C=w.getRawData(),I=C.mapDimensionsAll("seriesName"),P=[];return St.each(I,function(M){var A=C.getDimensionInfo(M);A.displayName&&P.push(A.displayName)}),P.join(" ")}(w)||C)}function it(w){return w.model.getRawData().count()}function z(w){var C=w.model;return C.setData(C.getRawData().cloneShallow()),tt}function tt(w,C){C.outputData&&w.end>C.outputData.count()&&C.model.getRawData().cloneShallow(C.outputData)}function J(w,C){St.each(St.concatArray(w.CHANGABLE_METHODS,w.DOWNSAMPLE_METHODS),function(I){w.wrapMethod(I,St.curry(Y,C))})}function Y(w,C){var I=nt(w);return I&&I.setOutputEnd((C||this).count()),C}function nt(w){var C=(w.ecModel||{}).scheduler,I=C&&C.getPipeline(w.uid);if(I){var P=I.currentTask;if(P){var M=P.agentStubMap;M&&(P=M.get(w.uid))}return P}}St.mixin(K,yt.X),St.mixin(K,gt._),(0,X.pw)(K,mt.Z);const U=K},332:(Ze,te,D)=>{D.d(te,{R:()=>_t,f:()=>n});var B=D(6615),St=(0,B.createHashMap)();function n(mt,gt){(0,B.assert)(null==St.get(mt)&&gt),St.set(mt,gt)}function _t(mt,gt,yt){var V=St.get(gt);if(!V)return yt;var k=V(mt);return k?yt.concat(k):yt}},8488:(Ze,te,D)=>{D.d(te,{X:()=>mt,f:()=>gt});var B=D(6615),St=D(4727),n=D(2977),_t=/\{@(.+?)\}/g,mt=function(){function yt(){}return yt.prototype.getDataParams=function(V,k){var X=this.getData(k),q=this.getRawValue(V,k),N=X.getRawIndex(V),et=X.getName(V),$=X.getRawDataItem(V),st=X.getItemVisual(V,"style"),K=st&&st[X.getItemVisual(V,"drawType")||"fill"],_=st&&st.stroke,j=this.mainType,it="series"===j,z=X.userOutput&&X.userOutput.get();return{componentType:j,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:it?this.subType:null,seriesIndex:this.seriesIndex,seriesId:it?this.id:null,seriesName:it?this.name:null,name:et,dataIndex:N,data:$,dataType:k,value:q,color:K,borderColor:_,dimensionNames:z?z.fullDimensions:null,encode:z?z.encode:null,$vars:["seriesName","name","value"]}},yt.prototype.getFormattedLabel=function(V,k,X,q,N,et){k=k||"normal";var $=this.getData(X),st=this.getDataParams(V,X);return et&&(st.value=et.interpolatedValue),null!=q&&B.isArray(st.value)&&(st.value=st.value[q]),N||(N=$.getItemModel(V).get("normal"===k?["label","formatter"]:[k,"label","formatter"])),B.isFunction(N)?(st.status=k,st.dimensionIndex=q,N(st)):B.isString(N)?(0,n.kF)(N,st).replace(_t,function(j,it){var z=it.length,tt=it;"["===tt.charAt(0)&&"]"===tt.charAt(z-1)&&(tt=+tt.slice(1,z-1));var J=(0,St.hk)($,V,tt);if(et&&B.isArray(et.interpolatedValue)){var Y=$.getDimensionIndex(tt);Y>=0&&(J=et.interpolatedValue[Y])}return null!=J?J+"":""}):void 0},yt.prototype.getRawValue=function(V,k){return(0,St.hk)(this.getData(k),V)},yt.prototype.formatTooltip=function(V,k,X){},yt}();function gt(yt){var V,k;return B.isObject(yt)?yt.type&&(k=yt):V=yt,{text:V,frag:k}}},7617:(Ze,te,D)=>{D.d(te,{D:()=>_t,t:()=>St});var B=D(7005),St=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],n=(0,B.Z)(St),_t=function(){function mt(){}return mt.prototype.getItemStyle=function(gt,yt){return n(this,gt,yt)},mt}()},6191:(Ze,te,D)=>{D.d(te,{K:()=>_t,v:()=>St});var B=D(7005),St=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],n=(0,B.Z)(St),_t=function(){function mt(){}return mt.prototype.getLineStyle=function(gt){return n(this,gt)},mt}()},7005:(Ze,te,D)=>{D.d(te,{Z:()=>St});var B=D(6615);function St(n,_t){for(var mt=0;mt<n.length;mt++)n[mt][1]||(n[mt][1]=n[mt][0]);return _t=_t||!1,function(gt,yt,V){for(var k={},X=0;X<n.length;X++){var q=n[X][1];if(!(yt&&B.indexOf(yt,q)>=0||V&&B.indexOf(V,q)<0)){var N=gt.getShallow(q,_t);null!=N&&(k[n[X][0]]=N)}}return k}}},7522:(Ze,te,D)=>{D.d(te,{_:()=>_t,i:()=>mt});var B=D(1617),St=(0,B.Yf)(),n=(0,B.Yf)(),_t=function(){function k(){}return k.prototype.getColorFromPalette=function(X,q,N){var et=(0,B.kF)(this.get("color",!0)),$=this.get("colorLayer",!0);return yt(this,St,et,$,X,q,N)},k.prototype.clearColorPalette=function(){!function V(k,X){X(k).paletteIdx=0,X(k).paletteNameMap={}}(this,St)},k}();function mt(k,X,q,N){var et=(0,B.kF)(k.get(["aria","decal","decals"]));return yt(k,n,et,null,X,q,N)}function yt(k,X,q,N,et,$,st){var K=X($=$||k),_=K.paletteIdx||0,j=K.paletteNameMap=K.paletteNameMap||{};if(j.hasOwnProperty(et))return j[et];var it=null!=st&&N?function gt(k,X){for(var q=k.length,N=0;N<q;N++)if(k[N].length>X)return k[N];return k[q-1]}(N,st):q;if((it=it||q)&&it.length){var z=it[_];return et&&(j[et]=z),K.paletteIdx=(_+1)%it.length,z}}},5770:(Ze,te,D)=>{D.d(te,{N:()=>Y});var B=D(6905),St=D(6615),n=D(4311),_t=D(7100),mt=D(6430),gt=D(4202),yt=D(4525),V=D(6195),k=D(800);function X(nt,U,w){var C=k.qW.createCanvas(),I=U.getWidth(),P=U.getHeight(),M=C.style;return M&&(M.position="absolute",M.left="0",M.top="0",M.width=I+"px",M.height=P+"px",C.setAttribute("data-zr-dom-id",nt)),C.width=I*w,C.height=P*w,C}const N=function(nt){function U(w,C,I){var M,P=nt.call(this)||this;P.motionBlur=!1,P.lastFrameAlpha=.7,P.dpr=1,P.virtual=!1,P.config={},P.incremental=!1,P.zlevel=0,P.maxRepaintRectCount=5,P.__dirty=!0,P.__firstTimePaint=!0,P.__used=!1,P.__drawIndex=0,P.__startIndex=0,P.__endIndex=0,P.__prevStartIndex=null,P.__prevEndIndex=null,I=I||B.KL,"string"==typeof w?M=X(w,C,I):St.isObject(w)&&(w=(M=w).id),P.id=w,P.dom=M;var A=M.style;return A&&(St.disableUserSelect(M),M.onselectstart=function(){return!1},A.padding="0",A.margin="0",A.borderWidth="0"),P.painter=C,P.dpr=I,P}return(0,n.ZT)(U,nt),U.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},U.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},U.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},U.prototype.setUnpainted=function(){this.__firstTimePaint=!0},U.prototype.createBackBuffer=function(){var w=this.dpr;this.domBack=X("back-"+this.id,this.painter,w),this.ctxBack=this.domBack.getContext("2d"),1!==w&&this.ctxBack.scale(w,w)},U.prototype.createRepaintRects=function(w,C,I,P){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var ct,M=[],A=this.maxRepaintRectCount,R=!1,Z=new yt.Z(0,0,0,0);function rt(Mt){if(Mt.isFinite()&&!Mt.isZero())if(0===M.length)(Pt=new yt.Z(0,0,0,0)).copy(Mt),M.push(Pt);else{for(var wt=!1,Ot=1/0,Ft=0,Ut=0;Ut<M.length;++Ut){var kt=M[Ut];if(kt.intersect(Mt)){var ie=new yt.Z(0,0,0,0);ie.copy(kt),ie.union(Mt),M[Ut]=ie,wt=!0;break}if(R){Z.copy(Mt),Z.union(kt);var De=Z.width*Z.height-Mt.width*Mt.height-kt.width*kt.height;De<Ot&&(Ot=De,Ft=Ut)}}var Pt;R&&(M[Ft].union(Mt),wt=!0),wt||((Pt=new yt.Z(0,0,0,0)).copy(Mt),M.push(Pt)),R||(R=M.length>=A)}}for(var ot=this.__startIndex;ot<this.__endIndex;++ot)if(at=w[ot]){var lt=at.shouldBePainted(I,P,!0,!0);(ht=at.__isRendered&&(at.__dirty&V.YV||!lt)?at.getPrevPaintRect():null)&&rt(ht);var vt=lt&&(at.__dirty&V.YV||!at.__isRendered)?at.getPaintRect():null;vt&&rt(vt)}for(ot=this.__prevStartIndex;ot<this.__prevEndIndex;++ot){var at,ht;lt=(at=C[ot]).shouldBePainted(I,P,!0,!0),!at||lt&&at.__zr||!at.__isRendered||(ht=at.getPrevPaintRect())&&rt(ht)}do{for(ct=!1,ot=0;ot<M.length;)if(M[ot].isZero())M.splice(ot,1);else{for(var dt=ot+1;dt<M.length;)M[ot].intersect(M[dt])?(ct=!0,M[ot].union(M[dt]),M.splice(dt,1)):dt++;ot++}}while(ct);return this._paintRects=M,M},U.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},U.prototype.resize=function(w,C){var I=this.dpr,P=this.dom,M=P.style,A=this.domBack;M&&(M.width=w+"px",M.height=C+"px"),P.width=w*I,P.height=C*I,A&&(A.width=w*I,A.height=C*I,1!==I&&this.ctxBack.scale(I,I))},U.prototype.clear=function(w,C,I){var P=this.dom,M=this.ctx,A=P.width,R=P.height;C=C||this.clearColor;var Z=this.motionBlur&&!w,rt=this.lastFrameAlpha,ot=this.dpr,at=this;Z&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(P,0,0,A/ot,R/ot));var lt=this.domBack;function ht(vt,ct,dt,Mt){if(M.clearRect(vt,ct,dt,Mt),C&&"transparent"!==C){var Pt=void 0;St.isGradientObject(C)?(Pt=(C.global||C.__width===dt&&C.__height===Mt)&&C.__canvasGradient||(0,mt.ZF)(M,C,{x:0,y:0,width:dt,height:Mt}),C.__canvasGradient=Pt,C.__width=dt,C.__height=Mt):St.isImagePatternObject(C)&&(C.scaleX=C.scaleX||ot,C.scaleY=C.scaleY||ot,Pt=(0,gt.RZ)(M,C,{dirty:function(){at.setUnpainted(),at.__painter.refresh()}})),M.save(),M.fillStyle=Pt||C,M.fillRect(vt,ct,dt,Mt),M.restore()}Z&&(M.save(),M.globalAlpha=rt,M.drawImage(lt,vt,ct,dt,Mt),M.restore())}!I||Z?ht(0,0,A,R):I.length&&St.each(I,function(vt){ht(vt.x*ot,vt.y*ot,vt.width*ot,vt.height*ot)})},U}(_t.Z);var et=D(663),$=D(1156),K=314159,_=.01;const J=function(){function nt(U,w,C,I){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var P=!U.nodeName||"CANVAS"===U.nodeName.toUpperCase();this._opts=C=St.extend({},C||{}),this.dpr=C.devicePixelRatio||B.KL,this._singleCanvas=P,this.root=U,U.style&&(St.disableUserSelect(U),U.innerHTML=""),this.storage=w;var A=this._zlevelList;this._prevDisplayList=[];var R=this._layers;if(P){var rt=U,ot=rt.width,at=rt.height;null!=C.width&&(ot=C.width),null!=C.height&&(at=C.height),this.dpr=C.devicePixelRatio||1,rt.width=ot*this.dpr,rt.height=at*this.dpr,this._width=ot,this._height=at;var lt=new N(rt,this,this.dpr);lt.__builtin__=!0,lt.initContext(),R[K]=lt,lt.zlevel=K,A.push(K),this._domRoot=U}else{this._width=(0,mt.ap)(U,0,C),this._height=(0,mt.ap)(U,1,C);var Z=this._domRoot=function z(nt,U){var w=document.createElement("div");return w.style.cssText=["position:relative","width:"+nt+"px","height:"+U+"px","padding:0","margin:0","border-width:0"].join(";")+";",w}(this._width,this._height);U.appendChild(Z)}}return nt.prototype.getType=function(){return"canvas"},nt.prototype.isSingleCanvas=function(){return this._singleCanvas},nt.prototype.getViewportRoot=function(){return this._domRoot},nt.prototype.getViewportRootOffset=function(){var U=this.getViewportRoot();if(U)return{offsetLeft:U.offsetLeft||0,offsetTop:U.offsetTop||0}},nt.prototype.refresh=function(U){var w=this.storage.getDisplayList(!0),C=this._prevDisplayList,I=this._zlevelList;this._redrawId=Math.random(),this._paintList(w,C,U,this._redrawId);for(var P=0;P<I.length;P++){var A=this._layers[I[P]];!A.__builtin__&&A.refresh&&A.refresh(0===P?this._backgroundColor:null)}return this._opts.useDirtyRect&&(this._prevDisplayList=w.slice()),this},nt.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},nt.prototype._paintHoverList=function(U){var w=U.length,C=this._hoverlayer;if(C&&C.clear(),w){for(var P,I={inHover:!0,viewWidth:this._width,viewHeight:this._height},M=0;M<w;M++){var A=U[M];A.__inHover&&(C||(C=this._hoverlayer=this.getLayer(1e5)),P||(P=C.ctx).save(),(0,gt.Dm)(P,A,I,M===w-1))}P&&P.restore()}},nt.prototype.getHoverLayer=function(){return this.getLayer(1e5)},nt.prototype.paintOne=function(U,w){(0,gt.RV)(U,w)},nt.prototype._paintList=function(U,w,C,I){if(this._redrawId===I){C=C||!1,this._updateLayerStatus(U);var P=this._doPaintList(U,w,C),M=P.finished,A=P.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),A&&this._paintHoverList(U),M)this.eachLayer(function(Z){Z.afterBrush&&Z.afterBrush()});else{var R=this;(0,et.Z)(function(){R._paintList(U,w,C,I)})}}},nt.prototype._compositeManually=function(){var U=this.getLayer(K).ctx,w=this._domRoot.width,C=this._domRoot.height;U.clearRect(0,0,w,C),this.eachBuiltinLayer(function(I){I.virtual&&U.drawImage(I.dom,0,0,w,C)})},nt.prototype._doPaintList=function(U,w,C){for(var I=this,P=[],M=this._opts.useDirtyRect,A=0;A<this._zlevelList.length;A++){var Z=this._layers[this._zlevelList[A]];Z.__builtin__&&Z!==this._hoverlayer&&(Z.__dirty||C)&&P.push(Z)}for(var rt=!0,ot=!1,at=function(vt){var ct=P[vt],dt=ct.ctx,Mt=M&&ct.createRepaintRects(U,w,lt._width,lt._height),Pt=C?ct.__startIndex:ct.__drawIndex,wt=!C&&ct.incremental&&Date.now,Ot=wt&&Date.now(),Ft=ct.zlevel===lt._zlevelList[0]?lt._backgroundColor:null;if(ct.__startIndex===ct.__endIndex)ct.clear(!1,Ft,Mt);else if(Pt===ct.__startIndex){var Ut=U[Pt];(!Ut.incremental||!Ut.notClear||C)&&ct.clear(!1,Ft,Mt)}-1===Pt&&(console.error("For some unknown reason. drawIndex is -1"),Pt=ct.__startIndex);var kt,ie=function(De){var Fe={inHover:!1,allClipped:!1,prevEl:null,viewWidth:I._width,viewHeight:I._height};for(kt=Pt;kt<ct.__endIndex;kt++){var Ye=U[kt];if(Ye.__inHover&&(ot=!0),I._doPaintEl(Ye,ct,M,De,Fe,kt===ct.__endIndex-1),wt&&Date.now()-Ot>15)break}Fe.prevElClipPaths&&dt.restore()};if(Mt)if(0===Mt.length)kt=ct.__endIndex;else for(var ue=lt.dpr,Pe=0;Pe<Mt.length;++Pe){var Se=Mt[Pe];dt.save(),dt.beginPath(),dt.rect(Se.x*ue,Se.y*ue,Se.width*ue,Se.height*ue),dt.clip(),ie(Se),dt.restore()}else dt.save(),ie(),dt.restore();ct.__drawIndex=kt,ct.__drawIndex<ct.__endIndex&&(rt=!1)},lt=this,ht=0;ht<P.length;ht++)at(ht);return $.Z.wxa&&St.each(this._layers,function(vt){vt&&vt.ctx&&vt.ctx.draw&&vt.ctx.draw()}),{finished:rt,needsRefreshHover:ot}},nt.prototype._doPaintEl=function(U,w,C,I,P,M){var A=w.ctx;if(C){var R=U.getPaintRect();(!I||R&&R.intersect(I))&&((0,gt.Dm)(A,U,P,M),U.setPrevPaintRect(R))}else(0,gt.Dm)(A,U,P,M)},nt.prototype.getLayer=function(U,w){this._singleCanvas&&!this._needsManuallyCompositing&&(U=K);var C=this._layers[U];return C||((C=new N("zr_"+U,this,this.dpr)).zlevel=U,C.__builtin__=!0,this._layerConfig[U]?St.merge(C,this._layerConfig[U],!0):this._layerConfig[U-_]&&St.merge(C,this._layerConfig[U-_],!0),w&&(C.virtual=w),this.insertLayer(U,C),C.initContext()),C},nt.prototype.insertLayer=function(U,w){var C=this._layers,I=this._zlevelList,P=I.length,M=this._domRoot,A=null,R=-1;if(!C[U]&&function it(nt){return!(!nt||!nt.__builtin__&&("function"!=typeof nt.resize||"function"!=typeof nt.refresh))}(w)){if(P>0&&U>I[0]){for(R=0;R<P-1&&!(I[R]<U&&I[R+1]>U);R++);A=C[I[R]]}if(I.splice(R+1,0,U),C[U]=w,!w.virtual)if(A){var Z=A.dom;Z.nextSibling?M.insertBefore(w.dom,Z.nextSibling):M.appendChild(w.dom)}else M.firstChild?M.insertBefore(w.dom,M.firstChild):M.appendChild(w.dom);w.__painter=this}},nt.prototype.eachLayer=function(U,w){for(var C=this._zlevelList,I=0;I<C.length;I++){var P=C[I];U.call(w,this._layers[P],P)}},nt.prototype.eachBuiltinLayer=function(U,w){for(var C=this._zlevelList,I=0;I<C.length;I++){var P=C[I],M=this._layers[P];M.__builtin__&&U.call(w,M,P)}},nt.prototype.eachOtherLayer=function(U,w){for(var C=this._zlevelList,I=0;I<C.length;I++){var P=C[I],M=this._layers[P];M.__builtin__||U.call(w,M,P)}},nt.prototype.getLayers=function(){return this._layers},nt.prototype._updateLayerStatus=function(U){function w(ot){P&&(P.__endIndex!==ot&&(P.__dirty=!0),P.__endIndex=ot)}if(this.eachBuiltinLayer(function(ot,at){ot.__dirty=ot.__used=!1}),this._singleCanvas)for(var C=1;C<U.length;C++)if((I=U[C]).zlevel!==U[C-1].zlevel||I.incremental){this._needsManuallyCompositing=!0;break}var A,R,P=null,M=0;for(R=0;R<U.length;R++){var I,Z=(I=U[R]).zlevel,rt=void 0;A!==Z&&(A=Z,M=0),I.incremental?((rt=this.getLayer(Z+.001,this._needsManuallyCompositing)).incremental=!0,M=1):rt=this.getLayer(Z+(M>0?_:0),this._needsManuallyCompositing),rt.__builtin__||St.logError("ZLevel "+Z+" has been used by unkown layer "+rt.id),rt!==P&&(rt.__used=!0,rt.__startIndex!==R&&(rt.__dirty=!0),rt.__startIndex=R,rt.__drawIndex=rt.incremental?-1:R,w(R),P=rt),I.__dirty&V.YV&&!I.__inHover&&(rt.__dirty=!0,rt.incremental&&rt.__drawIndex<0&&(rt.__drawIndex=R))}w(R),this.eachBuiltinLayer(function(ot,at){!ot.__used&&ot.getElementCount()>0&&(ot.__dirty=!0,ot.__startIndex=ot.__endIndex=ot.__drawIndex=0),ot.__dirty&&ot.__drawIndex<0&&(ot.__drawIndex=ot.__startIndex)})},nt.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},nt.prototype._clearLayer=function(U){U.clear()},nt.prototype.setBackgroundColor=function(U){this._backgroundColor=U,St.each(this._layers,function(w){w.setUnpainted()})},nt.prototype.configLayer=function(U,w){if(w){var C=this._layerConfig;C[U]?St.merge(C[U],w,!0):C[U]=w;for(var I=0;I<this._zlevelList.length;I++){var P=this._zlevelList[I];P!==U&&P!==U+_||St.merge(this._layers[P],C[U],!0)}}},nt.prototype.delLayer=function(U){var w=this._layers,C=this._zlevelList,I=w[U];!I||(I.dom.parentNode.removeChild(I.dom),delete w[U],C.splice(St.indexOf(C,U),1))},nt.prototype.resize=function(U,w){if(this._domRoot.style){var C=this._domRoot;C.style.display="none";var I=this._opts,P=this.root;if(null!=U&&(I.width=U),null!=w&&(I.height=w),U=(0,mt.ap)(P,0,I),w=(0,mt.ap)(P,1,I),C.style.display="",this._width!==U||w!==this._height){for(var M in C.style.width=U+"px",C.style.height=w+"px",this._layers)this._layers.hasOwnProperty(M)&&this._layers[M].resize(U,w);this.refresh(!0)}this._width=U,this._height=w}else{if(null==U||null==w)return;this._width=U,this._height=w,this.getLayer(K).resize(U,w)}return this},nt.prototype.clearLayer=function(U){var w=this._layers[U];w&&w.clear()},nt.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},nt.prototype.getRenderedCanvas=function(U){if(this._singleCanvas&&!this._compositeManually)return this._layers[K].dom;var w=new N("image",this,(U=U||{}).pixelRatio||this.dpr);w.initContext(),w.clear(!1,U.backgroundColor||this._backgroundColor);var C=w.ctx;if(U.pixelRatio<=this.dpr){this.refresh();var I=w.dom.width,P=w.dom.height;this.eachLayer(function(ot){ot.__builtin__?C.drawImage(ot.dom,0,0,I,P):ot.renderToCanvas&&(C.save(),ot.renderToCanvas(C),C.restore())})}else for(var M={inHover:!1,viewWidth:this._width,viewHeight:this._height},A=this.storage.getDisplayList(!0),R=0,Z=A.length;R<Z;R++)(0,gt.Dm)(C,A[R],M,R===Z-1);return w.dom},nt.prototype.getWidth=function(){return this._width},nt.prototype.getHeight=function(){return this._height},nt}();function Y(nt){nt.registerPainter("canvas",J)}},98:(Ze,te,D)=>{D.d(te,{Z:()=>V});var B=D(8299),St=D(8301),n=D(2977),_t=D(465),mt=D(3187),gt=St.NM,yt=function(k){function X(){var q=null!==k&&k.apply(this,arguments)||this;return q.type="interval",q._interval=0,q._intervalPrecision=2,q}return(0,B.ZT)(X,k),X.prototype.parse=function(q){return q},X.prototype.contain=function(q){return mt.XS(q,this._extent)},X.prototype.normalize=function(q){return mt.Fv(q,this._extent)},X.prototype.scale=function(q){return mt.bA(q,this._extent)},X.prototype.setExtent=function(q,N){var et=this._extent;isNaN(q)||(et[0]=parseFloat(q)),isNaN(N)||(et[1]=parseFloat(N))},X.prototype.unionExtent=function(q){var N=this._extent;q[0]<N[0]&&(N[0]=q[0]),q[1]>N[1]&&(N[1]=q[1]),this.setExtent(N[0],N[1])},X.prototype.getInterval=function(){return this._interval},X.prototype.setInterval=function(q){this._interval=q,this._niceExtent=this._extent.slice(),this._intervalPrecision=mt.lb(q)},X.prototype.getTicks=function(q){var N=this._interval,et=this._extent,$=this._niceExtent,st=this._intervalPrecision,K=[];if(!N)return K;et[0]<$[0]&&K.push(q?{value:gt($[0]-N,st)}:{value:et[0]});for(var j=$[0];j<=$[1]&&(K.push({value:j}),(j=gt(j+N,st))!==K[K.length-1].value);)if(K.length>1e4)return[];var it=K.length?K[K.length-1].value:$[1];return et[1]>it&&K.push(q?{value:gt(it+N,st)}:{value:et[1]}),K},X.prototype.getMinorTicks=function(q){for(var N=this.getTicks(!0),et=[],$=this.getExtent(),st=1;st<N.length;st++){for(var _=N[st-1],j=0,it=[],tt=(N[st].value-_.value)/q;j<q-1;){var J=gt(_.value+(j+1)*tt);J>$[0]&&J<$[1]&&it.push(J),j++}et.push(it)}return et},X.prototype.getLabel=function(q,N){if(null==q)return"";var et=N&&N.precision;null==et?et=St.p8(q.value)||0:"auto"===et&&(et=this._intervalPrecision);var $=gt(q.value,et,!0);return n.OD($)},X.prototype.calcNiceTicks=function(q,N,et){q=q||5;var $=this._extent,st=$[1]-$[0];if(isFinite(st)){st<0&&(st=-st,$.reverse());var K=mt.Qf($,q,N,et);this._intervalPrecision=K.intervalPrecision,this._interval=K.interval,this._niceExtent=K.niceTickExtent}},X.prototype.calcNiceExtent=function(q){var N=this._extent;if(N[0]===N[1])if(0!==N[0]){var et=Math.abs(N[0]);q.fixMax||(N[1]+=et/2),N[0]-=et/2}else N[1]=1;isFinite(N[1]-N[0])||(N[0]=0,N[1]=1),this.calcNiceTicks(q.splitNumber,q.minInterval,q.maxInterval);var st=this._interval;q.fixMin||(N[0]=gt(Math.floor(N[0]/st)*st)),q.fixMax||(N[1]=gt(Math.ceil(N[1]/st)*st))},X.prototype.setNiceExtent=function(q,N){this._niceExtent=[q,N]},X.type="interval",X}(_t.Z);_t.Z.registerClass(yt);const V=yt},7140:(Ze,te,D)=>{D.d(te,{Z:()=>yt});var B=D(8299),St=D(465),n=D(872),_t=D(3187),mt=D(6615),gt=function(V){function k(X){var q=V.call(this,X)||this;q.type="ordinal";var N=q.getSetting("ordinalMeta");return N||(N=new n.Z({})),(0,mt.isArray)(N)&&(N=new n.Z({categories:(0,mt.map)(N,function(et){return(0,mt.isObject)(et)?et.value:et})})),q._ordinalMeta=N,q._extent=q.getSetting("extent")||[0,N.categories.length-1],q}return(0,B.ZT)(k,V),k.prototype.parse=function(X){return null==X?NaN:(0,mt.isString)(X)?this._ordinalMeta.getOrdinal(X):Math.round(X)},k.prototype.contain=function(X){return X=this.parse(X),_t.XS(X,this._extent)&&null!=this._ordinalMeta.categories[X]},k.prototype.normalize=function(X){return X=this._getTickNumber(this.parse(X)),_t.Fv(X,this._extent)},k.prototype.scale=function(X){return X=Math.round(_t.bA(X,this._extent)),this.getRawOrdinalNumber(X)},k.prototype.getTicks=function(){for(var X=[],q=this._extent,N=q[0];N<=q[1];)X.push({value:N}),N++;return X},k.prototype.getMinorTicks=function(X){},k.prototype.setSortInfo=function(X){if(null!=X){for(var q=X.ordinalNumbers,N=this._ordinalNumbersByTick=[],et=this._ticksByOrdinalNumber=[],$=0,st=this._ordinalMeta.categories.length,K=Math.min(st,q.length);$<K;++$){var _=q[$];N[$]=_,et[_]=$}for(var j=0;$<st;++$){for(;null!=et[j];)j++;N.push(j),et[j]=$}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},k.prototype._getTickNumber=function(X){var q=this._ticksByOrdinalNumber;return q&&X>=0&&X<q.length?q[X]:X},k.prototype.getRawOrdinalNumber=function(X){var q=this._ordinalNumbersByTick;return q&&X>=0&&X<q.length?q[X]:X},k.prototype.getLabel=function(X){if(!this.isBlank()){var q=this.getRawOrdinalNumber(X.value),N=this._ordinalMeta.categories[q];return null==N?"":N+""}},k.prototype.count=function(){return this._extent[1]-this._extent[0]+1},k.prototype.unionExtentFromData=function(X,q){this.unionExtent(X.getApproximateExtent(q))},k.prototype.isInExtentRange=function(X){return X=this._getTickNumber(X),this._extent[0]<=X&&this._extent[1]>=X},k.prototype.getOrdinalMeta=function(){return this._ordinalMeta},k.prototype.calcNiceTicks=function(){},k.prototype.calcNiceExtent=function(){},k.type="ordinal",k}(St.Z);St.Z.registerClass(gt);const yt=gt},465:(Ze,te,D)=>{D.d(te,{Z:()=>n});var B=D(8789),St=function(){function _t(mt){this._setting=mt||{},this._extent=[1/0,-1/0]}return _t.prototype.getSetting=function(mt){return this._setting[mt]},_t.prototype.unionExtent=function(mt){var gt=this._extent;mt[0]<gt[0]&&(gt[0]=mt[0]),mt[1]>gt[1]&&(gt[1]=mt[1])},_t.prototype.unionExtentFromData=function(mt,gt){this.unionExtent(mt.getApproximateExtent(gt))},_t.prototype.getExtent=function(){return this._extent.slice()},_t.prototype.setExtent=function(mt,gt){var yt=this._extent;isNaN(mt)||(yt[0]=mt),isNaN(gt)||(yt[1]=gt)},_t.prototype.isInExtentRange=function(mt){return this._extent[0]<=mt&&this._extent[1]>=mt},_t.prototype.isBlank=function(){return this._isBlank},_t.prototype.setBlank=function(mt){this._isBlank=mt},_t}();B.au(St);const n=St},1395:(Ze,te,D)=>{D.d(te,{Z:()=>it});var B=D(8299),St=D(8301),n=D(8086),_t=D(3187),mt=D(98),gt=D(465),yt=D(6615),k=function(z){function tt(J){var Y=z.call(this,J)||this;return Y.type="time",Y}return(0,B.ZT)(tt,z),tt.prototype.getLabel=function(J){var Y=this.getSetting("useUTC");return(0,n.WU)(J.value,n.V8[(0,n.xC)((0,n.Tj)(this._minLevelUnit))]||n.V8.second,Y,this.getSetting("locale"))},tt.prototype.getFormattedLabel=function(J,Y,nt){var U=this.getSetting("useUTC"),w=this.getSetting("locale");return(0,n.k7)(J,Y,nt,w,U)},tt.prototype.getTicks=function(){var Y=this._extent,nt=[];if(!this._interval)return nt;nt.push({value:Y[0],level:0});var U=this.getSetting("useUTC"),w=function j(z,tt,J,Y){var U=n.FW,w=0;function C(Ft,Ut,kt,ie,ue,Pe,Se){for(var De=new Date(Ut),Fe=Ut,Ye=De[ie]();Fe<kt&&Fe<=Y[1];)Se.push({value:Fe}),De[ue](Ye+=Ft),Fe=De.getTime();Se.push({value:Fe,notAdd:!0})}function I(Ft,Ut,kt){var ie=[],ue=!Ut.length;if(!function q(z,tt,J,Y){var nt=St.sG(tt),U=St.sG(J),w=function(rt){return(0,n.q5)(nt,rt,Y)===(0,n.q5)(U,rt,Y)},C=function(){return w("year")},I=function(){return C()&&w("month")},P=function(){return I()&&w("day")},M=function(){return P()&&w("hour")},A=function(){return M()&&w("minute")},R=function(){return A()&&w("second")};switch(z){case"year":return C();case"month":return I();case"day":return P();case"hour":return M();case"minute":return A();case"second":return R();case"millisecond":return R()&&w("millisecond")}}((0,n.Tj)(Ft),Y[0],Y[1],J)){ue&&(Ut=[{value:_(new Date(Y[0]),Ft,J)},{value:Y[1]}]);for(var Pe=0;Pe<Ut.length-1;Pe++){var Se=Ut[Pe].value,De=Ut[Pe+1].value;if(Se!==De){var Fe=void 0,Ye=void 0,tr=void 0;switch(Ft){case"year":Fe=Math.max(1,Math.round(tt/n.s2/365)),Ye=(0,n.sx)(J),tr=(0,n.xL)(J);break;case"half-year":case"quarter":case"month":Fe=et(tt),Ye=(0,n.CW)(J),tr=(0,n.vh)(J);break;case"week":case"half-week":case"day":Fe=N(tt),Ye=(0,n.xz)(J),tr=(0,n.f5)(J),!0;break;case"half-day":case"quarter-day":case"hour":Fe=$(tt),Ye=(0,n.Wp)(J),tr=(0,n.En)(J);break;case"minute":Fe=st(tt,!0),Ye=(0,n.fn)(J),tr=(0,n.eN)(J);break;case"second":Fe=st(tt,!1),Ye=(0,n.MV)(J),tr=(0,n.rM)(J);break;case"millisecond":Fe=K(tt),Ye=(0,n.RZ)(J),tr=(0,n.cb)(J)}C(Fe,Se,De,Ye,tr,0,ie),"year"===Ft&&kt.length>1&&0===Pe&&kt.unshift({value:kt[0].value-Fe})}}for(Pe=0;Pe<ie.length;Pe++)kt.push(ie[Pe]);return ie}}for(var P=[],M=[],A=0,R=0,Z=0;Z<U.length&&w++<1e4;++Z){var rt=(0,n.Tj)(U[Z]);if((0,n.$K)(U[Z])&&(I(U[Z],P[P.length-1]||[],M),rt!==(U[Z+1]?(0,n.Tj)(U[Z+1]):null))){if(M.length){R=A,M.sort(function(Ft,Ut){return Ft.value-Ut.value});for(var at=[],lt=0;lt<M.length;++lt){var ht=M[lt].value;(0===lt||M[lt-1].value!==ht)&&(at.push(M[lt]),ht>=Y[0]&&ht<=Y[1]&&A++)}var vt=(Y[1]-Y[0])/tt;if(A>1.5*vt&&R>vt/1.5||(P.push(at),A>vt||z===U[Z]))break}M=[]}}var ct=(0,yt.filter)((0,yt.map)(P,function(Ft){return(0,yt.filter)(Ft,function(Ut){return Ut.value>=Y[0]&&Ut.value<=Y[1]&&!Ut.notAdd})}),function(Ft){return Ft.length>0}),dt=[],Mt=ct.length-1;for(Z=0;Z<ct.length;++Z)for(var Pt=ct[Z],wt=0;wt<Pt.length;++wt)dt.push({value:Pt[wt].value,level:Mt-Z});dt.sort(function(Ft,Ut){return Ft.value-Ut.value});var Ot=[];for(Z=0;Z<dt.length;++Z)(0===Z||dt[Z].value!==dt[Z-1].value)&&Ot.push(dt[Z]);return Ot}(this._minLevelUnit,this._approxInterval,U,Y);return(nt=nt.concat(w)).push({value:Y[1],level:0}),nt},tt.prototype.calcNiceExtent=function(J){var Y=this._extent;if(Y[0]===Y[1]&&(Y[0]-=n.s2,Y[1]+=n.s2),Y[1]===-1/0&&Y[0]===1/0){var nt=new Date;Y[1]=+new Date(nt.getFullYear(),nt.getMonth(),nt.getDate()),Y[0]=Y[1]-n.s2}this.calcNiceTicks(J.splitNumber,J.minInterval,J.maxInterval)},tt.prototype.calcNiceTicks=function(J,Y,nt){var U=this._extent;this._approxInterval=(U[1]-U[0])/(J=J||10),null!=Y&&this._approxInterval<Y&&(this._approxInterval=Y),null!=nt&&this._approxInterval>nt&&(this._approxInterval=nt);var C=X.length,I=Math.min(function(z,tt,J,Y){for(;J<Y;){var nt=J+Y>>>1;z[nt][1]<tt?J=nt+1:Y=nt}return J}(X,this._approxInterval,0,C),C-1);this._interval=X[I][1],this._minLevelUnit=X[Math.max(I-1,0)][0]},tt.prototype.parse=function(J){return(0,yt.isNumber)(J)?J:+St.sG(J)},tt.prototype.contain=function(J){return _t.XS(this.parse(J),this._extent)},tt.prototype.normalize=function(J){return _t.Fv(this.parse(J),this._extent)},tt.prototype.scale=function(J){return _t.bA(J,this._extent)},tt.type="time",tt}(mt.Z),X=[["second",n.WT],["minute",n.yR],["hour",n.dV],["quarter-day",6*n.dV],["half-day",12*n.dV],["day",1.2*n.s2],["half-week",3.5*n.s2],["week",7*n.s2],["month",31*n.s2],["quarter",95*n.s2],["half-year",n.P5/2],["year",n.P5]];function N(z,tt){return(z/=n.s2)>16?16:z>7.5?7:z>3.5?4:z>1.5?2:1}function et(z){return(z/=30*n.s2)>6?6:z>3?3:z>2?2:1}function $(z){return(z/=n.dV)>12?12:z>6?6:z>3.5?4:z>2?2:1}function st(z,tt){return(z/=tt?n.yR:n.WT)>30?30:z>20?20:z>15?15:z>10?10:z>5?5:z>2?2:1}function K(z){return St.kx(z,!0)}function _(z,tt,J){var Y=new Date(z);switch((0,n.Tj)(tt)){case"year":case"month":Y[(0,n.vh)(J)](0);case"day":Y[(0,n.f5)(J)](1);case"hour":Y[(0,n.En)(J)](0);case"minute":Y[(0,n.eN)(J)](0);case"second":Y[(0,n.rM)(J)](0),Y[(0,n.cb)(J)](0)}return Y.getTime()}gt.Z.registerClass(k);const it=k},3187:(Ze,te,D)=>{D.d(te,{Fv:()=>X,Qf:()=>_t,XS:()=>k,bA:()=>q,lM:()=>n,lb:()=>gt,r1:()=>mt});var B=D(8301);function n(N){return"interval"===N.type||"log"===N.type}function _t(N,et,$,st){var K={},j=K.interval=(0,B.kx)((N[1]-N[0])/et,!0);null!=$&&j<$&&(j=K.interval=$),null!=st&&j>st&&(j=K.interval=st);var it=K.intervalPrecision=gt(j);return function V(N,et){!isFinite(N[0])&&(N[0]=et[0]),!isFinite(N[1])&&(N[1]=et[1]),yt(N,0,et),yt(N,1,et),N[0]>N[1]&&(N[0]=N[1])}(K.niceTickExtent=[(0,B.NM)(Math.ceil(N[0]/j)*j,it),(0,B.NM)(Math.floor(N[1]/j)*j,it)],N),K}function mt(N){var et=Math.pow(10,(0,B.xW)(N)),$=N/et;return $?2===$?$=3:3===$?$=5:$*=2:$=1,(0,B.NM)($*et)}function gt(N){return(0,B.p8)(N)+2}function yt(N,et,$){N[et]=Math.max(Math.min(N[et],$[1]),$[0])}function k(N,et){return N>=et[0]&&N<=et[1]}function X(N,et){return et[1]===et[0]?.5:(N-et[0])/(et[1]-et[0])}function q(N,et){return N*(et[1]-et[0])+et[0]}},8789:(Ze,te,D)=>{D.d(te,{PT:()=>V,Qj:()=>et,au:()=>K,dm:()=>k,pw:()=>q,u9:()=>gt});var B=D(8299),St=D(6615),_t="___EC__COMPONENT__CONTAINER___",mt="___EC__EXTENDED_CLASS___";function gt(_){var j={main:"",sub:""};if(_){var it=_.split(".");j.main=it[0]||"",j.sub=it[1]||""}return j}function V(_){return!(!_||!_[mt])}function k(_,j){_.$constructor=_,_.extend=function(it){var tt,z=this;return function X(_){return St.isFunction(_)&&/^class\s/.test(Function.prototype.toString.call(_))}(z)?tt=function(J){function Y(){return J.apply(this,arguments)||this}return(0,B.ZT)(Y,J),Y}(z):(tt=function(){(it.$constructor||z).apply(this,arguments)},St.inherits(tt,this)),St.extend(tt.prototype,it),tt[mt]=!0,tt.extend=this.extend,tt.superCall=$,tt.superApply=st,tt.superClass=z,tt}}function q(_,j){_.extend=j.extend}var N=Math.round(10*Math.random());function et(_){var j=["__\0is_clz",N++].join("_");_.prototype[j]=!0,_.isInstance=function(it){return!(!it||!it[j])}}function $(_,j){for(var it=[],z=2;z<arguments.length;z++)it[z-2]=arguments[z];return this.superClass.prototype[j].apply(_,it)}function st(_,j,it){return this.superClass.prototype[j].apply(_,it)}function K(_){var j={};_.registerClass=function(z){var tt=z.type||z.prototype.type;if(tt){(function yt(_){St.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(_),'componentType "'+_+'" illegal')})(tt),z.prototype.type=tt;var J=gt(tt);if(J.sub){if(J.sub!==_t){var Y=function it(z){var tt=j[z.main];return(!tt||!tt[_t])&&((tt=j[z.main]={})[_t]=!0),tt}(J);Y[J.sub]=z}}else j[J.main]=z}return z},_.getClass=function(z,tt,J){var Y=j[z];if(Y&&Y[_t]&&(Y=tt?Y[tt]:null),J&&!Y)throw new Error(tt?"Component "+z+"."+(tt||"")+" is used but not imported.":z+".type should be specified.");return Y},_.getClassesByMainType=function(z){var tt=gt(z),J=[],Y=j[tt.main];return Y&&Y[_t]?St.each(Y,function(nt,U){U!==_t&&J.push(nt)}):J.push(Y),J},_.hasClass=function(z){var tt=gt(z);return!!j[tt.main]},_.getAllClassMainTypes=function(){var z=[];return St.each(j,function(tt,J){z.push(J)}),z},_.hasSubTypes=function(z){var tt=gt(z),J=j[tt.main];return J&&J[_t]}}},6012:(Ze,te,D)=>{D.d(te,{Kr:()=>_t,ZL:()=>yt,cj:()=>mt,jS:()=>gt});var B=D(6615),St=D(8789),n=Math.round(10*Math.random());function _t(V){return[V||"",n++].join("_")}function mt(V){var k={};V.registerSubTypeDefaulter=function(X,q){var N=(0,St.u9)(X);k[N.main]=q},V.determineSubType=function(X,q){var N=q.type;if(!N){var et=(0,St.u9)(X).main;V.hasSubTypes(X)&&k[et]&&(N=k[et](q))}return N}}function gt(V,k){function q(et,$){return et[$]||(et[$]={predecessor:[],successor:[]}),et[$]}V.topologicalTravel=function(et,$,st,K){if(et.length){var _=function X(et){var $={},st=[];return B.each(et,function(K){var _=q($,K),it=function N(et,$){var st=[];return B.each(et,function(K){B.indexOf($,K)>=0&&st.push(K)}),st}(_.originalDeps=k(K),et);_.entryCount=it.length,0===_.entryCount&&st.push(K),B.each(it,function(z){B.indexOf(_.predecessor,z)<0&&_.predecessor.push(z);var tt=q($,z);B.indexOf(tt.successor,z)<0&&tt.successor.push(K)})}),{graph:$,noEntryList:st}}($),j=_.graph,it=_.noEntryList,z={};for(B.each(et,function(w){z[w]=!0});it.length;){var tt=it.pop(),J=j[tt],Y=!!z[tt];Y&&(st.call(K,tt,J.originalDeps.slice()),delete z[tt]),B.each(J.successor,Y?U:nt)}B.each(z,function(){throw new Error("")})}function nt(w){j[w].entryCount--,0===j[w].entryCount&&it.push(w)}function U(w){z[w]=!0,nt(w)}}}function yt(V,k){return B.merge(B.merge({},V,!0),k,!0)}},7587:(Ze,te,D)=>{D.d(te,{I:()=>$});var B=Math.round(9*Math.random()),St="function"==typeof Object.defineProperty;const _t=function(){function z(){this._id="__ec_inner_"+B++}return z.prototype.get=function(tt){return this._guard(tt)[this._id]},z.prototype.set=function(tt,J){var Y=this._guard(tt);return St?Object.defineProperty(Y,this._id,{value:J,enumerable:!1,configurable:!0}):Y[this._id]=J,this},z.prototype.delete=function(tt){return!!this.has(tt)&&(delete this._guard(tt)[this._id],!0)},z.prototype.has=function(tt){return!!this._guard(tt)[this._id]},z.prototype._guard=function(tt){if(tt!==Object(tt))throw TypeError("Value of WeakMap is not a non-null object.");return tt},z}();var mt=D(9286),gt=D(6615),yt=D(8301),V=D(5773),k=D(4202),X=D(800),q=new _t,N=new mt.ZP(100),et=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function $(z,tt){if("none"===z)return null;var J=tt.getDevicePixelRatio(),Y=tt.getZr(),nt="svg"===Y.painter.type;z.dirty&&q.delete(z);var U=q.get(z);if(U)return U;var w=(0,gt.defaults)(z,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===w.backgroundColor&&(w.backgroundColor=null);var C={repeat:"repeat"};return function I(P){for(var M=[J],A=!0,R=0;R<et.length;++R){var Z=w[et[R]];if(null!=Z&&!(0,gt.isArray)(Z)&&!(0,gt.isString)(Z)&&!(0,gt.isNumber)(Z)&&"boolean"!=typeof Z){A=!1;break}M.push(Z)}var rt;if(A){rt=M.join(",")+(nt?"-svg":"");var ot=N.get(rt);ot&&(nt?P.svgElement=ot:P.image=ot)}var wt,at=K(w.dashArrayX),lt=function _(z){if(!z||"object"==typeof z&&0===z.length)return[0,0];if((0,gt.isNumber)(z)){var tt=Math.ceil(z);return[tt,tt]}var J=(0,gt.map)(z,function(Y){return Math.ceil(Y)});return z.length%2?J.concat(J):J}(w.dashArrayY),ht=st(w.symbol),vt=function j(z){return(0,gt.map)(z,function(tt){return it(tt)})}(at),ct=it(lt),dt=!nt&&X.qW.createCanvas(),Mt=nt&&{tag:"g",attrs:{},key:"dcl",children:[]},Pt=function Ot(){for(var Ut=1,kt=0,ie=vt.length;kt<ie;++kt)Ut=(0,yt.nl)(Ut,vt[kt]);var ue=1;for(kt=0,ie=ht.length;kt<ie;++kt)ue=(0,yt.nl)(ue,ht[kt].length);Ut*=ue;var Pe=ct*vt.length*ht.length;return{width:Math.max(1,Math.min(Ut,w.maxTileWidth)),height:Math.max(1,Math.min(Pe,w.maxTileHeight))}}();dt&&(dt.width=Pt.width*J,dt.height=Pt.height*J,wt=dt.getContext("2d")),function Ft(){wt&&(wt.clearRect(0,0,dt.width,dt.height),w.backgroundColor&&(wt.fillStyle=w.backgroundColor,wt.fillRect(0,0,dt.width,dt.height)));for(var Ut=0,kt=0;kt<lt.length;++kt)Ut+=lt[kt];if(!(Ut<=0))for(var ie=-ct,ue=0,Pe=0,Se=0;ie<Pt.height;){if(ue%2==0){for(var De=Pe/2%ht.length,Fe=0,Ye=0,tr=0;Fe<2*Pt.width;){var or=0;for(kt=0;kt<at[Se].length;++kt)or+=at[Se][kt];if(or<=0)break;if(Ye%2==0){var Hr=.5*(1-w.symbolSize);Ar(Fe+at[Se][Ye]*Hr,ie+lt[ue]*Hr,at[Se][Ye]*w.symbolSize,lt[ue]*w.symbolSize,ht[De][tr/2%ht[De].length])}Fe+=at[Se][Ye],++tr,++Ye===at[Se].length&&(Ye=0)}++Se===at.length&&(Se=0)}ie+=lt[ue],++Pe,++ue===lt.length&&(ue=0)}function Ar(Lr,Cr,Zr,Nr,re){var pe=nt?1:J,we=(0,V.th)(re,Lr*pe,Cr*pe,Zr*pe,Nr*pe,w.color,w.symbolKeepAspect);if(nt){var Le=Y.painter.renderOneToVNode(we);Le&&Mt.children.push(Le)}else(0,k.RV)(wt,we)}}(),A&&N.put(rt,dt||Mt),P.image=dt,P.svgElement=Mt,P.svgWidth=Pt.width,P.svgHeight=Pt.height}(C),C.rotation=w.rotation,C.scaleX=C.scaleY=nt?1:1/J,q.set(z,C),z.dirty=!1,C}function st(z){if(!z||0===z.length)return[["rect"]];if((0,gt.isString)(z))return[[z]];for(var tt=!0,J=0;J<z.length;++J)if(!(0,gt.isString)(z[J])){tt=!1;break}if(tt)return st([z]);var Y=[];for(J=0;J<z.length;++J)(0,gt.isString)(z[J])?Y.push([z[J]]):Y.push(z[J]);return Y}function K(z){if(!z||0===z.length)return[[0,0]];if((0,gt.isNumber)(z))return[[tt=Math.ceil(z),tt]];for(var J=!0,Y=0;Y<z.length;++Y)if(!(0,gt.isNumber)(z[Y])){J=!1;break}if(J)return K([z]);var nt=[];for(Y=0;Y<z.length;++Y)if((0,gt.isNumber)(z[Y])){var tt=Math.ceil(z[Y]);nt.push([tt,tt])}else tt=(0,gt.map)(z[Y],function(C){return Math.ceil(C)}),nt.push(tt.length%2==1?tt.concat(tt):tt);return nt}function it(z){for(var tt=0,J=0;J<z.length;++J)tt+=z[J];return z.length%2==1?2*tt:tt}},3237:(Ze,te,D)=>{function B(St,n,_t){for(var mt;St&&(!n(St)||(mt=St,!_t));)St=St.__hostTarget||St.parent;return mt}D.d(te,{o:()=>B})},2977:(Ze,te,D)=>{D.d(te,{A0:()=>et,Lz:()=>K,MI:()=>_,MY:()=>yt,OD:()=>mt,ew:()=>st,kF:()=>q,mr:()=>$,uX:()=>V,wx:()=>N,zW:()=>gt});var B=D(6615),St=D(5917),n=D(8301),_t=D(8086);function mt(j){if(!(0,n.kE)(j))return B.isString(j)?j:"-";var it=(j+"").split(".");return it[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(it.length>1?"."+it[1]:"")}function gt(j,it){return j=(j||"").toLowerCase().replace(/-(.)/g,function(z,tt){return tt.toUpperCase()}),it&&j&&(j=j.charAt(0).toUpperCase()+j.slice(1)),j}var yt=B.normalizeCssArray;function V(j,it,z){function J(I){return I&&B.trim(I)?I:"-"}function Y(I){return!(null==I||isNaN(I)||!isFinite(I))}var nt="time"===it,U=j instanceof Date;if(nt||U){var w=nt?(0,n.sG)(j):j;if(!isNaN(+w))return(0,_t.WU)(w,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",z);if(U)return"-"}if("ordinal"===it)return B.isStringSafe(j)?J(j):B.isNumber(j)&&Y(j)?j+"":"-";var C=(0,n.FK)(j);return Y(C)?mt(C):B.isStringSafe(j)?J(j):"boolean"==typeof j?j+"":"-"}var k=["a","b","c","d","e","f","g"],X=function(j,it){return"{"+j+(it??"")+"}"};function q(j,it,z){B.isArray(it)||(it=[it]);var tt=it.length;if(!tt)return"";for(var J=it[0].$vars||[],Y=0;Y<J.length;Y++){var nt=k[Y];j=j.replace(X(nt),X(nt,0))}for(var U=0;U<tt;U++)for(var w=0;w<J.length;w++){var C=it[U][J[w]];j=j.replace(X(k[w],U),z?(0,St.F1)(C):C)}return j}function N(j,it,z){return B.each(it,function(tt,J){j=j.replace("{"+J+"}",z?(0,St.F1)(tt):tt)}),j}function et(j,it){var z=B.isString(j)?{color:j,extraCssText:it}:j||{},tt=z.color,J=z.type;it=z.extraCssText;var Y=z.renderMode||"html";return tt?"html"===Y?"subItem"===J?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+(0,St.F1)(tt)+";"+(it||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+(0,St.F1)(tt)+";"+(it||"")+'"></span>':{renderMode:Y,content:"{"+(z.markerId||"markerX")+"|}  ",style:"subItem"===J?{width:4,height:4,borderRadius:2,backgroundColor:tt}:{width:10,height:10,borderRadius:5,backgroundColor:tt}}:""}function $(j,it,z){("week"===j||"month"===j||"quarter"===j||"half-year"===j||"year"===j)&&(j="MM-dd\nyyyy");var tt=(0,n.sG)(it),J=z?"getUTC":"get",Y=tt[J+"FullYear"](),nt=tt[J+"Month"]()+1,U=tt[J+"Date"](),w=tt[J+"Hours"](),C=tt[J+"Minutes"](),I=tt[J+"Seconds"](),P=tt[J+"Milliseconds"]();return j.replace("MM",(0,_t.vk)(nt,2)).replace("M",nt).replace("yyyy",Y).replace("yy",(0,_t.vk)(Y%100+"",2)).replace("dd",(0,_t.vk)(U,2)).replace("d",U).replace("hh",(0,_t.vk)(w,2)).replace("h",w).replace("mm",(0,_t.vk)(C,2)).replace("m",C).replace("ss",(0,_t.vk)(I,2)).replace("s",I).replace("SSS",(0,_t.vk)(P,3))}function st(j){return j&&j.charAt(0).toUpperCase()+j.substr(1)}function K(j,it){return it=it||"transparent",B.isString(j)?j:B.isObject(j)&&j.colorStops&&(j.colorStops[0]||{}).color||it}function _(j,it){if("_blank"===it||"blank"===it){var z=window.open();z.opener=null,z.location.href=j}else window.open(j,it)}},2694:(Ze,te,D)=>{D.r(te),D.d(te,{Arc:()=>j.Z,BezierCurve:()=>_.Z,BoundingRect:()=>J.Z,Circle:()=>k.Z,CompoundPath:()=>it.Z,Ellipse:()=>X.Z,Group:()=>yt.Z,Image:()=>gt.ZP,IncrementalDisplayable:()=>U.Z,Line:()=>K.Z,LinearGradient:()=>z.Z,OrientedBoundingRect:()=>Y.Z,Path:()=>_t.ZP,Point:()=>nt.Z,Polygon:()=>et.Z,Polyline:()=>$.Z,RadialGradient:()=>tt.Z,Rect:()=>st.Z,Ring:()=>N.Z,Sector:()=>q.C,Text:()=>V.ZP,applyTransform:()=>Ut,clipPointsByRect:()=>Se,clipRectByRect:()=>De,createIcon:()=>Fe,extendPath:()=>ot,extendShape:()=>Z,getShapeClass:()=>lt,getTransform:()=>Ft,groupTransition:()=>Pe,initProps:()=>P.KZ,isElementRemoved:()=>P.eq,lineLineIntersect:()=>tr,linePolygonIntersect:()=>Ye,makeImage:()=>vt,makePath:()=>ht,mergePath:()=>dt,registerShape:()=>at,removeElement:()=>P.bX,removeElementWithFadeOut:()=>P.XD,resizePath:()=>Mt,setTooltipConfig:()=>Rr,subPixelOptimize:()=>Ot,subPixelOptimizeLine:()=>Pt,subPixelOptimizeRect:()=>wt,transformDirection:()=>kt,traverseElements:()=>Vr,updateProps:()=>P.D});var B=D(2710),St=D(4498),n=D(8544),_t=D(2477),mt=D(5028),gt=D(8418),yt=D(4786),V=D(2018),k=D(7610),X=D(3572),q=D(785),N=D(2283),et=D(8015),$=D(3628),st=D(4528),K=D(541),_=D(1838),j=D(8281),it=D(1803),z=D(8481),tt=D(3033),J=D(4525),Y=D(9726),nt=D(9947),U=D(8123),w=D(7441),C=D(6615),I=D(7166),P=D(3996),M=Math.max,A=Math.min,R={};function Z(Ve){return _t.ZP.extend(Ve)}var rt=B.Pc;function ot(Ve,er){return rt(Ve,er)}function at(Ve,er){R[Ve]=er}function lt(Ve){if(R.hasOwnProperty(Ve))return R[Ve]}function ht(Ve,er,Ar,Lr){var Cr=B.iR(Ve,er);return Ar&&("center"===Lr&&(Ar=ct(Ar,Cr.getBoundingRect())),Mt(Cr,Ar)),Cr}function vt(Ve,er,Ar){var Lr=new gt.ZP({style:{image:Ve,x:er.x,y:er.y,width:er.width,height:er.height},onload:function(Cr){"center"===Ar&&Lr.setStyle(ct(er,{width:Cr.width,height:Cr.height}))}});return Lr}function ct(Ve,er){var Cr,Ar=er.width/er.height,Lr=Ve.height*Ar;return Cr=Lr<=Ve.width?Ve.height:(Lr=Ve.width)/Ar,{x:Ve.x+Ve.width/2-Lr/2,y:Ve.y+Ve.height/2-Cr/2,width:Lr,height:Cr}}var dt=B.AA;function Mt(Ve,er){if(Ve.applyTransform){var Lr=Ve.getBoundingRect().calculateTransform(er);Ve.applyTransform(Lr)}}function Pt(Ve,er){return w._3(Ve,Ve,{lineWidth:er}),Ve}function wt(Ve){return w.Pw(Ve.shape,Ve.shape,Ve.style),Ve}var Ot=w.vu;function Ft(Ve,er){for(var Ar=St.identity([]);Ve&&Ve!==er;)St.mul(Ar,Ve.getLocalTransform(),Ar),Ve=Ve.parent;return Ar}function Ut(Ve,er,Ar){return er&&!(0,C.isArrayLike)(er)&&(er=mt.ZP.getLocalTransform(er)),Ar&&(er=St.invert([],er)),n.applyTransform([],Ve,er)}function kt(Ve,er,Ar){var Lr=0===er[4]||0===er[5]||0===er[0]?1:Math.abs(2*er[4]/er[0]),Cr=0===er[4]||0===er[5]||0===er[2]?1:Math.abs(2*er[4]/er[2]),Zr=["left"===Ve?-Lr:"right"===Ve?Lr:0,"top"===Ve?-Cr:"bottom"===Ve?Cr:0];return Zr=Ut(Zr,er,Ar),Math.abs(Zr[0])>Math.abs(Zr[1])?Zr[0]>0?"right":"left":Zr[1]>0?"bottom":"top"}function ie(Ve){return!Ve.isGroup}function Pe(Ve,er,Ar){if(Ve&&er){var Zr=function Lr(Nr){var re={};return Nr.traverse(function(pe){ie(pe)&&pe.anid&&(re[pe.anid]=pe)}),re}(Ve);er.traverse(function(Nr){if(ie(Nr)&&Nr.anid){var re=Zr[Nr.anid];if(re){var pe=Cr(Nr);Nr.attr(Cr(re)),(0,P.D)(Nr,pe,Ar,(0,I.A)(Nr).dataIndex)}}})}function Cr(Nr){var re={x:Nr.x,y:Nr.y,rotation:Nr.rotation};return function ue(Ve){return null!=Ve.shape}(Nr)&&(re.shape=(0,C.extend)({},Nr.shape)),re}}function Se(Ve,er){return(0,C.map)(Ve,function(Ar){var Lr=Ar[0];Lr=M(Lr,er.x),Lr=A(Lr,er.x+er.width);var Cr=Ar[1];return Cr=M(Cr,er.y),[Lr,Cr=A(Cr,er.y+er.height)]})}function De(Ve,er){var Ar=M(Ve.x,er.x),Lr=A(Ve.x+Ve.width,er.x+er.width),Cr=M(Ve.y,er.y),Zr=A(Ve.y+Ve.height,er.y+er.height);if(Lr>=Ar&&Zr>=Cr)return{x:Ar,y:Cr,width:Lr-Ar,height:Zr-Cr}}function Fe(Ve,er,Ar){var Lr=(0,C.extend)({rectHover:!0},er),Cr=Lr.style={strokeNoScale:!0};if(Ar=Ar||{x:-1,y:-1,width:2,height:2},Ve)return 0===Ve.indexOf("image://")?(Cr.image=Ve.slice(8),(0,C.defaults)(Cr,Ar),new gt.ZP(Lr)):ht(Ve.replace("path://",""),Lr,Ar,"center")}function Ye(Ve,er,Ar,Lr,Cr){for(var Zr=0,Nr=Cr[Cr.length-1];Zr<Cr.length;Zr++){var re=Cr[Zr];if(tr(Ve,er,Ar,Lr,re[0],re[1],Nr[0],Nr[1]))return!0;Nr=re}}function tr(Ve,er,Ar,Lr,Cr,Zr,Nr,re){var pe=Ar-Ve,we=Lr-er,Le=Nr-Cr,Kt=re-Zr,ne=or(Le,Kt,pe,we);if(function Hr(Ve){return Ve<=1e-6&&Ve>=-1e-6}(ne))return!1;var le=Ve-Cr,Xt=er-Zr,Te=or(le,Xt,pe,we)/ne;if(Te<0||Te>1)return!1;var ye=or(le,Xt,Le,Kt)/ne;return!(ye<0||ye>1)}function or(Ve,er,Ar,Lr){return Ve*Lr-Ar*er}function Rr(Ve){var er=Ve.itemTooltipOption,Ar=Ve.componentModel,Lr=Ve.itemName,Cr=(0,C.isString)(er)?{formatter:er}:er,Zr=Ar.mainType,Nr=Ar.componentIndex,re={componentType:Zr,name:Lr,$vars:["name"]};re[Zr+"Index"]=Nr;var pe=Ve.formatterParamsExtra;pe&&(0,C.each)((0,C.keys)(pe),function(Le){(0,C.hasOwn)(re,Le)||(re[Le]=pe[Le],re.$vars.push(Le))});var we=(0,I.A)(Ve.el);we.componentMainType=Zr,we.componentIndex=Nr,we.tooltipConfig={name:Lr,option:(0,C.defaults)({content:Lr,formatterParams:re},Cr)}}function qr(Ve,er){var Ar;Ve.isGroup&&(Ar=er(Ve)),Ar||Ve.traverse(er)}function Vr(Ve,er){if(Ve)if((0,C.isArray)(Ve))for(var Ar=0;Ar<Ve.length;Ar++)qr(Ve[Ar],er);else qr(Ve,er)}at("circle",k.Z),at("ellipse",X.Z),at("sector",q.C),at("ring",N.Z),at("polygon",et.Z),at("polyline",$.Z),at("rect",st.Z),at("line",K.Z),at("bezierCurve",_.Z),at("arc",j.Z)},7166:(Ze,te,D)=>{D.d(te,{A:()=>St,Q:()=>n});var St=(0,D(1617).Yf)(),n=function(_t,mt,gt,yt){if(yt){var V=St(yt);V.dataIndex=gt,V.dataType=mt,V.seriesIndex=_t,"group"===yt.type&&yt.traverse(function(k){var X=St(k);X.seriesIndex=_t,X.dataIndex=gt,X.dataType=mt})}}},942:(Ze,te,D)=>{D.d(te,{BZ:()=>k,ME:()=>et,QM:()=>st,QT:()=>it,YD:()=>K,dt:()=>_,gN:()=>gt,lq:()=>N,p$:()=>$,tE:()=>j});var B=D(6615),St=D(4525),n=D(8301),_t=D(2977),mt=B.each,gt=["left","right","top","bottom","width","height"],yt=[["width","left","right"],["height","top","bottom"]];function V(z,tt,J,Y,nt){var U=0,w=0;null==Y&&(Y=1/0),null==nt&&(nt=1/0);var C=0;tt.eachChild(function(I,P){var Z,rt,M=I.getBoundingRect(),A=tt.childAt(P+1),R=A&&A.getBoundingRect();if("horizontal"===z){var ot=M.width+(R?-R.x+M.x:0);(Z=U+ot)>Y||I.newline?(U=0,Z=ot,w+=C+J,C=M.height):C=Math.max(C,M.height)}else{var at=M.height+(R?-R.y+M.y:0);(rt=w+at)>nt||I.newline?(U+=C+J,w=0,rt=at,C=M.width):C=Math.max(C,M.width)}I.newline||(I.x=U,I.y=w,I.markRedraw(),"horizontal"===z?U=Z+J:w=rt+J)})}var k=V;function N(z,tt,J){var Y=tt.width,nt=tt.height,U=(0,n.GM)(z.left,Y),w=(0,n.GM)(z.top,nt),C=(0,n.GM)(z.right,Y),I=(0,n.GM)(z.bottom,nt);return(isNaN(U)||isNaN(parseFloat(z.left)))&&(U=0),(isNaN(C)||isNaN(parseFloat(z.right)))&&(C=Y),(isNaN(w)||isNaN(parseFloat(z.top)))&&(w=0),(isNaN(I)||isNaN(parseFloat(z.bottom)))&&(I=nt),J=_t.MY(J||0),{width:Math.max(C-U-J[1]-J[3],0),height:Math.max(I-w-J[0]-J[2],0)}}function et(z,tt,J){J=_t.MY(J||0);var Y=tt.width,nt=tt.height,U=(0,n.GM)(z.left,Y),w=(0,n.GM)(z.top,nt),C=(0,n.GM)(z.right,Y),I=(0,n.GM)(z.bottom,nt),P=(0,n.GM)(z.width,Y),M=(0,n.GM)(z.height,nt),A=J[2]+J[0],R=J[1]+J[3],Z=z.aspect;switch(isNaN(P)&&(P=Y-C-R-U),isNaN(M)&&(M=nt-I-A-w),null!=Z&&(isNaN(P)&&isNaN(M)&&(Z>Y/nt?P=.8*Y:M=.8*nt),isNaN(P)&&(P=Z*M),isNaN(M)&&(M=P/Z)),isNaN(U)&&(U=Y-C-P-R),isNaN(w)&&(w=nt-I-M-A),z.left||z.right){case"center":U=Y/2-P/2-J[3];break;case"right":U=Y-P-R}switch(z.top||z.bottom){case"middle":case"center":w=nt/2-M/2-J[0];break;case"bottom":w=nt-M-A}U=U||0,w=w||0,isNaN(P)&&(P=Y-R-U-(C||0)),isNaN(M)&&(M=nt-A-w-(I||0));var rt=new St.Z(U+J[3],w+J[0],P,M);return rt.margin=J,rt}function $(z,tt,J,Y,nt,U){var P,w=!nt||!nt.hv||nt.hv[0],C=!nt||!nt.hv||nt.hv[1],I=nt&&nt.boundingMode||"all";if((U=U||z).x=z.x,U.y=z.y,!w&&!C)return!1;if("raw"===I)P="group"===z.type?new St.Z(0,0,+tt.width||0,+tt.height||0):z.getBoundingRect();else if(P=z.getBoundingRect(),z.needLocalTransform()){var M=z.getLocalTransform();(P=P.clone()).applyTransform(M)}var A=et(B.defaults({width:P.width,height:P.height},tt),J,Y),R=w?A.x-P.x:0,Z=C?A.y-P.y:0;return"raw"===I?(U.x=R,U.y=Z):(U.x+=R,U.y+=Z),U===z&&z.markRedraw(),!0}function st(z,tt){return null!=z[yt[tt][0]]||null!=z[yt[tt][1]]&&null!=z[yt[tt][2]]}function K(z){var tt=z.layoutMode||z.constructor.layoutMode;return B.isObject(tt)?tt:tt?{type:tt}:null}function _(z,tt,J){var Y=J&&J.ignoreSize;!B.isArray(Y)&&(Y=[Y,Y]);var nt=w(yt[0],0),U=w(yt[1],1);function w(M,A){var R={},Z=0,rt={},ot=0;if(mt(M,function(vt){rt[vt]=z[vt]}),mt(M,function(vt){C(tt,vt)&&(R[vt]=rt[vt]=tt[vt]),I(R,vt)&&Z++,I(rt,vt)&&ot++}),Y[A])return I(tt,M[1])?rt[M[2]]=null:I(tt,M[2])&&(rt[M[1]]=null),rt;if(2===ot||!Z)return rt;if(Z>=2)return R;for(var lt=0;lt<M.length;lt++){var ht=M[lt];if(!C(R,ht)&&C(z,ht)){R[ht]=z[ht];break}}return R}function C(M,A){return M.hasOwnProperty(A)}function I(M,A){return null!=M[A]&&"auto"!==M[A]}function P(M,A,R){mt(M,function(Z){A[Z]=R[Z]})}P(yt[0],z,nt),P(yt[1],z,U)}function j(z){return it({},z)}function it(z,tt){return tt&&z&&mt(gt,function(J){tt.hasOwnProperty(J)&&(z[J]=tt[J])}),z}B.curry(V,"vertical"),B.curry(V,"horizontal")},9723:(Ze,te,D)=>{D.d(te,{Sh:()=>V,ZK:()=>gt,_y:()=>q});var St={},n=typeof console<"u"&&console.warn&&console.log;function gt(N,et){!function _t(N,et,$){if(n){if($){if(St[et])return;St[et]=!0}console[N]("[ECharts] "+et)}}("warn",N,et)}function V(N){}function q(N){throw new Error(N)}},1617:(Ze,te,D)=>{D.d(te,{C4:()=>X,C6:()=>ot,Cc:()=>V,Co:()=>q,HZ:()=>lt,IL:()=>vt,O0:()=>C,P$:()=>ht,Td:()=>k,U5:()=>tt,U9:()=>ct,XI:()=>P,Yf:()=>A,ab:()=>N,g0:()=>w,gO:()=>M,iP:()=>at,kF:()=>yt,lY:()=>U,pk:()=>Mt,pm:()=>Z,pv:()=>dt,yu:()=>nt,zH:()=>rt});var B=D(6615),St=D(1156),n=D(8301);function _t(Pt,wt,Ot){return(wt-Pt)*Ot+Pt}var mt="series\0";function yt(Pt){return Pt instanceof Array?Pt:null==Pt?[]:[Pt]}function V(Pt,wt,Ot){if(Pt){Pt[wt]=Pt[wt]||{},Pt.emphasis=Pt.emphasis||{},Pt.emphasis[wt]=Pt.emphasis[wt]||{};for(var Ft=0,Ut=Ot.length;Ft<Ut;Ft++){var kt=Ot[Ft];!Pt.emphasis[wt].hasOwnProperty(kt)&&Pt[wt].hasOwnProperty(kt)&&(Pt.emphasis[wt][kt]=Pt[wt][kt])}}}var k=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function X(Pt){return!(0,B.isObject)(Pt)||(0,B.isArray)(Pt)||Pt instanceof Date?Pt:Pt.value}function q(Pt){return(0,B.isObject)(Pt)&&!(Pt instanceof Array)}function N(Pt,wt,Ot){var Ft="normalMerge"===Ot,Ut="replaceMerge"===Ot,kt="replaceAll"===Ot;Pt=Pt||[],wt=(wt||[]).slice();var ie=(0,B.createHashMap)();(0,B.each)(wt,function(Pe,Se){(0,B.isObject)(Pe)||(wt[Se]=null)});var ue=function et(Pt,wt,Ot){var Ft=[];if("replaceAll"===Ot)return Ft;for(var Ut=0;Ut<Pt.length;Ut++){var kt=Pt[Ut];kt&&null!=kt.id&&wt.set(kt.id,Ut),Ft.push({existing:"replaceMerge"===Ot||U(kt)?null:kt,newOption:null,keyInfo:null,brandNew:null})}return Ft}(Pt,ie,Ot);return(Ft||Ut)&&function $(Pt,wt,Ot,Ft){(0,B.each)(Ft,function(Ut,kt){if(Ut&&null!=Ut.id){var ie=z(Ut.id),ue=Ot.get(ie);if(null!=ue){var Pe=Pt[ue];(0,B.assert)(!Pe.newOption,'Duplicated option on id "'+ie+'".'),Pe.newOption=Ut,Pe.existing=wt[ue],Ft[kt]=null}}})}(ue,Pt,ie,wt),Ft&&function st(Pt,wt){(0,B.each)(wt,function(Ot,Ft){if(Ot&&null!=Ot.name)for(var Ut=0;Ut<Pt.length;Ut++){var kt=Pt[Ut].existing;if(!Pt[Ut].newOption&&kt&&(null==kt.id||null==Ot.id)&&!U(Ot)&&!U(kt)&&it("name",kt,Ot))return Pt[Ut].newOption=Ot,void(wt[Ft]=null)}})}(ue,wt),Ft||Ut?function K(Pt,wt,Ot){(0,B.each)(wt,function(Ft){if(Ft){for(var Ut,kt=0;(Ut=Pt[kt])&&(Ut.newOption||U(Ut.existing)||Ut.existing&&null!=Ft.id&&!it("id",Ft,Ut.existing));)kt++;Ut?(Ut.newOption=Ft,Ut.brandNew=Ot):Pt.push({newOption:Ft,brandNew:Ot,existing:null,keyInfo:null}),kt++}})}(ue,wt,Ut):kt&&function _(Pt,wt){(0,B.each)(wt,function(Ot){Pt.push({newOption:Ot,brandNew:!0,existing:null,keyInfo:null})})}(ue,wt),function j(Pt){var wt=(0,B.createHashMap)();(0,B.each)(Pt,function(Ot){var Ft=Ot.existing;Ft&&wt.set(Ft.id,Ot)}),(0,B.each)(Pt,function(Ot){var Ft=Ot.newOption;(0,B.assert)(!Ft||null==Ft.id||!wt.get(Ft.id)||wt.get(Ft.id)===Ot,"id duplicates: "+(Ft&&Ft.id)),Ft&&null!=Ft.id&&wt.set(Ft.id,Ot),!Ot.keyInfo&&(Ot.keyInfo={})}),(0,B.each)(Pt,function(Ot,Ft){var Ut=Ot.existing,kt=Ot.newOption,ie=Ot.keyInfo;if((0,B.isObject)(kt)){if(ie.name=null!=kt.name?z(kt.name):Ut?Ut.name:mt+Ft,Ut)ie.id=z(Ut.id);else if(null!=kt.id)ie.id=z(kt.id);else{var ue=0;do{ie.id="\0"+ie.name+"\0"+ue++}while(wt.get(ie.id))}wt.set(ie.id,Ot)}})}(ue),ue}function it(Pt,wt,Ot){var Ft=tt(wt[Pt],null),Ut=tt(Ot[Pt],null);return null!=Ft&&null!=Ut&&Ft===Ut}function z(Pt){return tt(Pt,"")}function tt(Pt,wt){return null==Pt?wt:(0,B.isString)(Pt)?Pt:(0,B.isNumber)(Pt)||(0,B.isStringSafe)(Pt)?Pt+"":wt}function nt(Pt){var wt=Pt.name;return!(!wt||!wt.indexOf(mt))}function U(Pt){return Pt&&null!=Pt.id&&0===z(Pt.id).indexOf("\0_ec_\0")}function w(Pt){return"\0_ec_\0"+Pt}function C(Pt,wt,Ot){(0,B.each)(Pt,function(Ft){var Ut=Ft.newOption;(0,B.isObject)(Ut)&&(Ft.keyInfo.mainType=wt,Ft.keyInfo.subType=function I(Pt,wt,Ot,Ft){return wt.type?wt.type:Ot?Ot.subType:Ft.determineSubType(Pt,wt)}(wt,Ut,Ft.existing,Ot))})}function P(Pt,wt){var Ot={},Ft={};return Ut(Pt||[],Ot),Ut(wt||[],Ft,Ot),[kt(Ot),kt(Ft)];function Ut(ie,ue,Pe){for(var Se=0,De=ie.length;Se<De;Se++){var Fe=tt(ie[Se].seriesId,null);if(null==Fe)return;for(var Ye=yt(ie[Se].dataIndex),tr=Pe&&Pe[Fe],or=0,Hr=Ye.length;or<Hr;or++){var Rr=Ye[or];tr&&tr[Rr]?tr[Rr]=null:(ue[Fe]||(ue[Fe]={}))[Rr]=1}}}function kt(ie,ue){var Pe=[];for(var Se in ie)if(ie.hasOwnProperty(Se)&&null!=ie[Se])if(ue)Pe.push(+Se);else{var De=kt(ie[Se],!0);De.length&&Pe.push({seriesId:Se,dataIndex:De})}return Pe}}function M(Pt,wt){return null!=wt.dataIndexInside?wt.dataIndexInside:null!=wt.dataIndex?(0,B.isArray)(wt.dataIndex)?(0,B.map)(wt.dataIndex,function(Ot){return Pt.indexOfRawIndex(Ot)}):Pt.indexOfRawIndex(wt.dataIndex):null!=wt.name?(0,B.isArray)(wt.name)?(0,B.map)(wt.name,function(Ot){return Pt.indexOfName(Ot)}):Pt.indexOfName(wt.name):void 0}function A(){var Pt="__ec_inner_"+R++;return function(wt){return wt[Pt]||(wt[Pt]={})}}var R=(0,n.jj)();function Z(Pt,wt,Ot){var Ft=rt(wt,Ot),kt=Ft.queryOptionMap,ue=Ft.others,Pe=Ot?Ot.defaultMainType:null;return!Ft.mainTypeSpecified&&Pe&&kt.set(Pe,{}),kt.each(function(Se,De){var Fe=lt(Pt,De,Se,{useDefault:Pe===De,enableAll:!Ot||null==Ot.enableAll||Ot.enableAll,enableNone:!Ot||null==Ot.enableNone||Ot.enableNone});ue[De+"Models"]=Fe.models,ue[De+"Model"]=Fe.models[0]}),ue}function rt(Pt,wt){var Ot;if((0,B.isString)(Pt)){var Ft={};Ft[Pt+"Index"]=0,Ot=Ft}else Ot=Pt;var Ut=(0,B.createHashMap)(),kt={},ie=!1;return(0,B.each)(Ot,function(ue,Pe){if("dataIndex"!==Pe&&"dataIndexInside"!==Pe){var Se=Pe.match(/^(\w+)(Index|Id|Name)$/)||[],De=Se[1],Fe=(Se[2]||"").toLowerCase();!De||!Fe||wt&&wt.includeMainTypes&&(0,B.indexOf)(wt.includeMainTypes,De)<0||(ie=ie||!!De,(Ut.get(De)||Ut.set(De,{}))[Fe]=ue)}else kt[Pe]=ue}),{mainTypeSpecified:ie,queryOptionMap:Ut,others:kt}}var ot={useDefault:!0,enableAll:!1,enableNone:!1},at={useDefault:!1,enableAll:!0,enableNone:!0};function lt(Pt,wt,Ot,Ft){Ft=Ft||ot;var Ut=Ot.index,kt=Ot.id,ie=Ot.name,ue={models:null,specified:null!=Ut||null!=kt||null!=ie};if(!ue.specified){var Pe=void 0;return ue.models=Ft.useDefault&&(Pe=Pt.getComponent(wt))?[Pe]:[],ue}return"none"===Ut||!1===Ut?((0,B.assert)(Ft.enableNone,'`"none"` or `false` is not a valid value on index option.'),ue.models=[],ue):("all"===Ut&&((0,B.assert)(Ft.enableAll,'`"all"` is not a valid value on index option.'),Ut=kt=ie=null),ue.models=Pt.queryComponents({mainType:wt,index:Ut,id:kt,name:ie}),ue)}function ht(Pt,wt,Ot){Pt.setAttribute?Pt.setAttribute(wt,Ot):Pt[wt]=Ot}function vt(Pt,wt){return Pt.getAttribute?Pt.getAttribute(wt):Pt[wt]}function ct(Pt){return"auto"===Pt?St.Z.domSupported?"html":"richText":Pt||"html"}function dt(Pt,wt){var Ot=(0,B.createHashMap)(),Ft=[];return(0,B.each)(Pt,function(Ut){var kt=wt(Ut);(Ot.get(kt)||(Ft.push(kt),Ot.set(kt,[]))).push(Ut)}),{keys:Ft,buckets:Ot}}function Mt(Pt,wt,Ot,Ft,Ut){var kt=null==wt||"auto"===wt;if(null==Ft)return Ft;if((0,B.isNumber)(Ft)){var ie=_t(Ot||0,Ft,Ut);return(0,n.NM)(ie,kt?Math.max((0,n.p8)(Ot||0),(0,n.p8)(Ft)):wt)}if((0,B.isString)(Ft))return Ut<1?Ot:Ft;for(var ue=[],Pe=Ot,Se=Ft,De=Math.max(Pe?Pe.length:0,Se.length),Fe=0;Fe<De;++Fe){var Ye=Pt.getDimensionInfo(Fe);if(Ye&&"ordinal"===Ye.type)ue[Fe]=(Ut<1&&Pe?Pe:Se)[Fe];else{var tr=Pe&&Pe[Fe]?Pe[Fe]:0,or=Se[Fe];ie=_t(tr,or,Ut),ue[Fe]=(0,n.NM)(ie,kt?Math.max((0,n.p8)(tr),(0,n.p8)(or)):wt)}}return ue}},8301:(Ze,te,D)=>{D.d(te,{FK:()=>U,GM:()=>gt,HD:()=>et,M9:()=>q,NM:()=>yt,NU:()=>mt,S$:()=>$,VR:()=>Y,Xd:()=>z,YM:()=>st,ZB:()=>X,dt:()=>V,eJ:()=>N,jj:()=>C,kE:()=>w,kx:()=>J,mW:()=>_,nR:()=>nt,nl:()=>P,p8:()=>k,sG:()=>it,wW:()=>K,xW:()=>tt});var B=D(6615);function mt(M,A,R,Z){var rt=A[0],ot=A[1],at=R[0],lt=R[1],ht=ot-rt,vt=lt-at;if(0===ht)return 0===vt?at:(at+lt)/2;if(Z)if(ht>0){if(M<=rt)return at;if(M>=ot)return lt}else{if(M>=rt)return at;if(M<=ot)return lt}else{if(M===rt)return at;if(M===ot)return lt}return(M-rt)/ht*vt+at}function gt(M,A){switch(M){case"center":case"middle":M="50%";break;case"left":case"top":M="0%";break;case"right":case"bottom":M="100%"}return B.isString(M)?function _t(M){return M.replace(/^\s+|\s+$/g,"")}(M).match(/%$/)?parseFloat(M)/100*A:parseFloat(M):null==M?NaN:+M}function yt(M,A,R){return null==A&&(A=10),A=Math.min(Math.max(0,A),20),M=(+M).toFixed(A),R?M:+M}function V(M){return M.sort(function(A,R){return A-R}),M}function k(M){if(M=+M,isNaN(M))return 0;if(M>1e-14)for(var A=1,R=0;R<15;R++,A*=10)if(Math.round(M*A)/A===M)return R;return X(M)}function X(M){var A=M.toString().toLowerCase(),R=A.indexOf("e"),Z=R>0?+A.slice(R+1):0,rt=R>0?R:A.length,ot=A.indexOf(".");return Math.max(0,(ot<0?0:rt-1-ot)-Z)}function q(M,A){var R=Math.log,Z=Math.LN10,rt=Math.floor(R(M[1]-M[0])/Z),ot=Math.round(R(Math.abs(A[1]-A[0]))/Z),at=Math.min(Math.max(-rt+ot,0),20);return isFinite(at)?at:20}function N(M,A,R){return M[A]&&et(M,R)[A]||0}function et(M,A){var R=B.reduce(M,function(Pt,wt){return Pt+(isNaN(wt)?0:wt)},0);if(0===R)return[];for(var Z=Math.pow(10,A),rt=B.map(M,function(Pt){return(isNaN(Pt)?0:Pt)/R*Z*100}),ot=100*Z,at=B.map(rt,function(Pt){return Math.floor(Pt)}),lt=B.reduce(at,function(Pt,wt){return Pt+wt},0),ht=B.map(rt,function(Pt,wt){return Pt-at[wt]});lt<ot;){for(var vt=Number.NEGATIVE_INFINITY,ct=null,dt=0,Mt=ht.length;dt<Mt;++dt)ht[dt]>vt&&(vt=ht[dt],ct=dt);++at[ct],ht[ct]=0,++lt}return B.map(at,function(Pt){return Pt/Z})}function $(M,A){var R=Math.max(k(M),k(A)),Z=M+A;return R>20?Z:yt(Z,R)}var st=9007199254740991;function K(M){var A=2*Math.PI;return(M%A+A)%A}function _(M){return M>-1e-4&&M<1e-4}var j=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function it(M){if(M instanceof Date)return M;if(B.isString(M)){var A=j.exec(M);if(!A)return new Date(NaN);if(A[8]){var R=+A[4]||0;return"Z"!==A[8].toUpperCase()&&(R-=+A[8].slice(0,3)),new Date(Date.UTC(+A[1],+(A[2]||1)-1,+A[3]||1,R,+(A[5]||0),+A[6]||0,A[7]?+A[7].substring(0,3):0))}return new Date(+A[1],+(A[2]||1)-1,+A[3]||1,+A[4]||0,+(A[5]||0),+A[6]||0,A[7]?+A[7].substring(0,3):0)}return null==M?new Date(NaN):new Date(Math.round(M))}function z(M){return Math.pow(10,tt(M))}function tt(M){if(0===M)return 0;var A=Math.floor(Math.log(M)/Math.LN10);return M/Math.pow(10,A)>=10&&A++,A}function J(M,A){var R=tt(M),Z=Math.pow(10,R),rt=M/Z;return M=(A?rt<1.5?1:rt<2.5?2:rt<4?3:rt<7?5:10:rt<1?1:rt<2?2:rt<3?3:rt<5?5:10)*Z,R>=-20?+M.toFixed(R<0?-R:0):M}function Y(M,A){var R=(M.length-1)*A+1,Z=Math.floor(R),rt=+M[Z-1],ot=R-Z;return ot?rt+ot*(M[Z]-rt):rt}function nt(M){M.sort(function(ht,vt){return lt(ht,vt,0)?-1:1});for(var A=-1/0,R=1,Z=0;Z<M.length;){for(var rt=M[Z].interval,ot=M[Z].close,at=0;at<2;at++)rt[at]<=A&&(rt[at]=A,ot[at]=at?1:1-R),A=rt[at],R=ot[at];rt[0]===rt[1]&&ot[0]*ot[1]!=1?M.splice(Z,1):Z++}return M;function lt(ht,vt,ct){return ht.interval[ct]<vt.interval[ct]||ht.interval[ct]===vt.interval[ct]&&(ht.close[ct]-vt.close[ct]==(ct?-1:1)||!ct&&lt(ht,vt,1))}}function U(M){var A=parseFloat(M);return A==M&&(0!==A||!B.isString(M)||M.indexOf("x")<=0)?A:NaN}function w(M){return!isNaN(U(M))}function C(){return Math.round(9*Math.random())}function I(M,A){return 0===A?M:I(A,M%A)}function P(M,A){return null==M?A:null==A?M:M*A/I(M,A)}},8786:(Ze,te,D)=>{D.d(te,{$l:()=>or,Av:()=>pe,C5:()=>Vr,CX:()=>N,Gl:()=>ot,Hg:()=>z,Ib:()=>Lr,JQ:()=>tt,Ki:()=>j,L1:()=>$,MA:()=>Mt,Mh:()=>Ft,Nj:()=>re,RW:()=>Le,SJ:()=>ue,SX:()=>Ut,T5:()=>Se,UL:()=>Ye,VP:()=>kt,WO:()=>Nr,XX:()=>ie,aG:()=>Kt,ci:()=>qr,e9:()=>le,fD:()=>Ot,iK:()=>J,k5:()=>Ar,oJ:()=>tr,og:()=>Rr,qc:()=>st,th:()=>we,vF:()=>Ve,wU:()=>et,xp:()=>ne,xr:()=>Hr,yx:()=>it,zI:()=>Fe,zr:()=>K});var B=D(9286),St=D(6615),n=D(7166),_t=D(754),mt=D(1617),gt=D(2477),yt=1,V={},k=(0,mt.Yf)(),X=(0,mt.Yf)(),N=1,et=2,$=["emphasis","blur","select"],st=["normal","emphasis","blur","select"],K=10,j="highlight",it="downplay",z="select",tt="unselect",J="toggleSelect";function Y(Xt){return null!=Xt&&"none"!==Xt}var nt=new B.ZP(100);function U(Xt){if((0,St.isString)(Xt)){var Te=nt.get(Xt);return Te||(Te=_t.lift(Xt,-.1),nt.put(Xt,Te)),Te}if((0,St.isGradientObject)(Xt)){var ye=(0,St.extend)({},Xt);return ye.colorStops=(0,St.map)(Xt.colorStops,function(Ne){return{offset:Ne.offset,color:_t.lift(Ne.color,-.1)}}),ye}return Xt}function w(Xt,Te,ye){Xt.onHoverStateChange&&(Xt.hoverState||0)!==ye&&Xt.onHoverStateChange(Te),Xt.hoverState=ye}function C(Xt){w(Xt,"emphasis",et)}function I(Xt){Xt.hoverState===et&&w(Xt,"normal",0)}function P(Xt){w(Xt,"blur",N)}function M(Xt){Xt.hoverState===N&&w(Xt,"normal",0)}function A(Xt){Xt.selected=!0}function R(Xt){Xt.selected=!1}function Z(Xt,Te,ye){Te(Xt,ye)}function rt(Xt,Te,ye){Z(Xt,Te,ye),Xt.isGroup&&Xt.traverse(function(Ne){Z(Ne,Te,ye)})}function ot(Xt,Te){switch(Te){case"emphasis":Xt.hoverState=et;break;case"normal":Xt.hoverState=0;break;case"blur":Xt.hoverState=N;break;case"select":Xt.selected=!0}}function dt(Xt,Te){var ye=this.states[Xt];if(this.style){if("emphasis"===Xt)return function ht(Xt,Te,ye,Ne){var Qe=ye&&(0,St.indexOf)(ye,"select")>=0,Pr=!1;if(Xt instanceof gt.ZP){var Ir=k(Xt),Xr=Qe&&Ir.selectFill||Ir.normalFill,An=Qe&&Ir.selectStroke||Ir.normalStroke;if(Y(Xr)||Y(An)){var $r=(Ne=Ne||{}).style||{};"inherit"===$r.fill?(Pr=!0,Ne=(0,St.extend)({},Ne),($r=(0,St.extend)({},$r)).fill=Xr):!Y($r.fill)&&Y(Xr)?(Pr=!0,Ne=(0,St.extend)({},Ne),($r=(0,St.extend)({},$r)).fill=U(Xr)):!Y($r.stroke)&&Y(An)&&(Pr||(Ne=(0,St.extend)({},Ne),$r=(0,St.extend)({},$r)),$r.stroke=U(An)),Ne.style=$r}}return Ne&&null==Ne.z2&&(Pr||(Ne=(0,St.extend)({},Ne)),Ne.z2=Xt.z2+(Xt.z2EmphasisLift??K)),Ne}(this,0,Te,ye);if("blur"===Xt)return function ct(Xt,Te,ye){var Ne=(0,St.indexOf)(Xt.currentStates,Te)>=0,Qe=Xt.style.opacity,Pr=Ne?null:function lt(Xt,Te,ye,Ne){for(var Qe=Xt.style,Pr={},Ir=0;Ir<Te.length;Ir++){var Xr=Te[Ir];Pr[Xr]=Qe[Xr]??(Ne&&Ne[Xr])}for(Ir=0;Ir<Xt.animators.length;Ir++){var $r=Xt.animators[Ir];$r.__fromStateTransition&&$r.__fromStateTransition.indexOf(ye)<0&&"style"===$r.targetName&&$r.saveTo(Pr,Te)}return Pr}(Xt,["opacity"],Te,{opacity:1}),Ir=(ye=ye||{}).style||{};return null==Ir.opacity&&(ye=(0,St.extend)({},ye),Ir=(0,St.extend)({opacity:Ne?Qe:.1*Pr.opacity},Ir),ye.style=Ir),ye}(this,Xt,ye);if("select"===Xt)return function vt(Xt,Te,ye){return ye&&null==ye.z2&&((ye=(0,St.extend)({},ye)).z2=Xt.z2+(Xt.z2SelectLift??9)),ye}(this,0,ye)}return ye}function Mt(Xt){Xt.stateProxy=dt;var Te=Xt.getTextContent(),ye=Xt.getTextGuideLine();Te&&(Te.stateProxy=dt),ye&&(ye.stateProxy=dt)}function Pt(Xt,Te){!Pe(Xt,Te)&&!Xt.__highByOuter&&rt(Xt,C)}function wt(Xt,Te){!Pe(Xt,Te)&&!Xt.__highByOuter&&rt(Xt,I)}function Ot(Xt,Te){Xt.__highByOuter|=1<<(Te||0),rt(Xt,C)}function Ft(Xt,Te){!(Xt.__highByOuter&=~(1<<(Te||0)))&&rt(Xt,I)}function Ut(Xt){rt(Xt,P)}function kt(Xt){rt(Xt,M)}function ie(Xt){rt(Xt,A)}function ue(Xt){rt(Xt,R)}function Pe(Xt,Te){return Xt.__highDownSilentOnTouch&&Te.zrByTouch}function Se(Xt){var Te=Xt.getModel(),ye=[],Ne=[];Te.eachComponent(function(Qe,Pr){var Ir=X(Pr),Xr="series"===Qe,An=Xr?Xt.getViewOfSeriesModel(Pr):Xt.getViewOfComponentModel(Pr);!Xr&&Ne.push(An),Ir.isBlured&&(An.group.traverse(function($r){M($r)}),Xr&&ye.push(Pr)),Ir.isBlured=!1}),(0,St.each)(Ne,function(Qe){Qe&&Qe.toggleBlurSeries&&Qe.toggleBlurSeries(ye,!1,Te)})}function De(Xt,Te,ye,Ne){var Qe=Ne.getModel();function Pr($r,$n){for(var ai=0;ai<$n.length;ai++){var ro=$r.getItemGraphicEl($n[ai]);ro&&kt(ro)}}if(ye=ye||"coordinateSystem",null!=Xt&&Te&&"none"!==Te){var Ir=Qe.getSeriesByIndex(Xt),Xr=Ir.coordinateSystem;Xr&&Xr.master&&(Xr=Xr.master);var An=[];Qe.eachSeries(function($r){var $n=Ir===$r,ai=$r.coordinateSystem;if(ai&&ai.master&&(ai=ai.master),!("series"===ye&&!$n||"coordinateSystem"===ye&&!(ai&&Xr?ai===Xr:$n)||"series"===Te&&$n)){if(Ne.getViewOfSeriesModel($r).group.traverse(function(Wo){P(Wo)}),(0,St.isArrayLike)(Te))Pr($r.getData(),Te);else if((0,St.isObject)(Te))for(var fa=(0,St.keys)(Te),Mi=0;Mi<fa.length;Mi++)Pr($r.getData(fa[Mi]),Te[fa[Mi]]);An.push($r),X($r).isBlured=!0}}),Qe.eachComponent(function($r,$n){if("series"!==$r){var ai=Ne.getViewOfComponentModel($n);ai&&ai.toggleBlurSeries&&ai.toggleBlurSeries(An,!0,Qe)}})}}function Fe(Xt,Te,ye){if(null!=Xt&&null!=Te){var Ne=ye.getModel().getComponent(Xt,Te);if(Ne){X(Ne).isBlured=!0;var Qe=ye.getViewOfComponentModel(Ne);!Qe||!Qe.focusBlurEnabled||Qe.group.traverse(function(Pr){P(Pr)})}}}function Ye(Xt,Te,ye){var Ne=Xt.seriesIndex,Qe=Xt.getData(Te.dataType);if(Qe){var Pr=(0,mt.gO)(Qe,Te);Pr=((0,St.isArray)(Pr)?Pr[0]:Pr)||0;var Ir=Qe.getItemGraphicEl(Pr);if(!Ir)for(var Xr=Qe.count(),An=0;!Ir&&An<Xr;)Ir=Qe.getItemGraphicEl(An++);if(Ir){var $r=(0,n.A)(Ir);De(Ne,$r.focus,$r.blurScope,ye)}else{var $n=Xt.get(["emphasis","focus"]),ai=Xt.get(["emphasis","blurScope"]);null!=$n&&De(Ne,$n,ai,ye)}}}function tr(Xt,Te,ye,Ne){var Qe={focusSelf:!1,dispatchers:null};if(null==Xt||"series"===Xt||null==Te||null==ye)return Qe;var Pr=Ne.getModel().getComponent(Xt,Te);if(!Pr)return Qe;var Ir=Ne.getViewOfComponentModel(Pr);if(!Ir||!Ir.findHighDownDispatchers)return Qe;for(var An,Xr=Ir.findHighDownDispatchers(ye),$r=0;$r<Xr.length;$r++)if("self"===(0,n.A)(Xr[$r]).focus){An=!0;break}return{focusSelf:An,dispatchers:Xr}}function or(Xt,Te,ye){var Ne=(0,n.A)(Xt),Qe=tr(Ne.componentMainType,Ne.componentIndex,Ne.componentHighDownName,ye),Pr=Qe.dispatchers;Pr?(Qe.focusSelf&&Fe(Ne.componentMainType,Ne.componentIndex,ye),(0,St.each)(Pr,function(Xr){return Pt(Xr,Te)})):(De(Ne.seriesIndex,Ne.focus,Ne.blurScope,ye),"self"===Ne.focus&&Fe(Ne.componentMainType,Ne.componentIndex,ye),Pt(Xt,Te))}function Hr(Xt,Te,ye){Se(ye);var Ne=(0,n.A)(Xt),Qe=tr(Ne.componentMainType,Ne.componentIndex,Ne.componentHighDownName,ye).dispatchers;Qe?(0,St.each)(Qe,function(Pr){return wt(Pr,Te)}):wt(Xt,Te)}function Rr(Xt,Te,ye){if(Kt(Te)){var Ne=Te.dataType,Qe=Xt.getData(Ne),Pr=(0,mt.gO)(Qe,Te);(0,St.isArray)(Pr)||(Pr=[Pr]),Xt[Te.type===J?"toggleSelect":Te.type===z?"select":"unselect"](Pr,Ne)}}function qr(Xt){var Te=Xt.getAllData();(0,St.each)(Te,function(ye){var Qe=ye.type;ye.data.eachItemGraphicEl(function(Pr,Ir){Xt.isSelected(Ir,Qe)?ie(Pr):ue(Pr)})})}function Vr(Xt){var Te=[];return Xt.eachSeries(function(ye){var Ne=ye.getAllData();(0,St.each)(Ne,function(Qe){var Ir=Qe.type,Xr=ye.getSelectedDataIndices();if(Xr.length>0){var An={dataIndex:Xr,seriesIndex:ye.seriesIndex};null!=Ir&&(An.dataType=Ir),Te.push(An)}})}),Te}function Ve(Xt,Te,ye){re(Xt,!0),rt(Xt,Mt),Lr(Xt,Te,ye)}function Ar(Xt,Te,ye,Ne){Ne?function er(Xt){re(Xt,!1)}(Xt):Ve(Xt,Te,ye)}function Lr(Xt,Te,ye){var Ne=(0,n.A)(Xt);null!=Te?(Ne.focus=Te,Ne.blurScope=ye):Ne.focus&&(Ne.focus=null)}var Cr=["emphasis","blur","select"],Zr={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Nr(Xt,Te,ye,Ne){ye=ye||"itemStyle";for(var Qe=0;Qe<Cr.length;Qe++){var Pr=Cr[Qe],Ir=Te.getModel([Pr,ye]);Xt.ensureState(Pr).style=Ne?Ne(Ir):Ir[Zr[ye]]()}}function re(Xt,Te){var ye=!1===Te,Ne=Xt;Xt.highDownSilentOnTouch&&(Ne.__highDownSilentOnTouch=Xt.highDownSilentOnTouch),(!ye||Ne.__highDownDispatcher)&&(Ne.__highByOuter=Ne.__highByOuter||0,Ne.__highDownDispatcher=!ye)}function pe(Xt){return!(!Xt||!Xt.__highDownDispatcher)}function we(Xt,Te,ye){var Ne=(0,n.A)(Xt);Ne.componentMainType=Te.mainType,Ne.componentIndex=Te.componentIndex,Ne.componentHighDownName=ye}function Le(Xt){var Te=V[Xt];return null==Te&&yt<=32&&(Te=V[Xt]=yt++),Te}function Kt(Xt){var Te=Xt.type;return Te===z||Te===tt||Te===J}function ne(Xt){var Te=Xt.type;return Te===j||Te===it}function le(Xt){var Te=k(Xt);Te.normalFill=Xt.style.fill,Te.normalStroke=Xt.style.stroke;var ye=Xt.states.select||{};Te.selectFill=ye.style&&ye.style.fill||null,Te.selectStroke=ye.style&&ye.style.stroke||null}},5773:(Ze,te,D)=>{D.d(te,{Cq:()=>tt,Pw:()=>K,th:()=>it,zp:()=>z});var B=D(6615),St=D(2477),n=D(541),_t=D(4528),mt=D(7610),gt=D(2694),yt=D(4525),V=D(585),k=D(8301),X=St.ZP.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(J,Y){var nt=Y.cx,U=Y.cy,w=Y.width/2,C=Y.height/2;J.moveTo(nt,U-C),J.lineTo(nt+w,U+C),J.lineTo(nt-w,U+C),J.closePath()}}),q=St.ZP.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(J,Y){var nt=Y.cx,U=Y.cy,w=Y.width/2,C=Y.height/2;J.moveTo(nt,U-C),J.lineTo(nt+w,U),J.lineTo(nt,U+C),J.lineTo(nt-w,U),J.closePath()}}),N=St.ZP.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(J,Y){var nt=Y.x,U=Y.y,w=Y.width/5*3,C=Math.max(w,Y.height),I=w/2,P=I*I/(C-I),M=U-C+I+P,A=Math.asin(P/I),R=Math.cos(A)*I,Z=Math.sin(A),rt=Math.cos(A),ot=.6*I,at=.7*I;J.moveTo(nt-R,M+P),J.arc(nt,M,I,Math.PI-A,2*Math.PI+A),J.bezierCurveTo(nt+R-Z*ot,M+P+rt*ot,nt,U-at,nt,U),J.bezierCurveTo(nt,U-at,nt-R+Z*ot,M+P+rt*ot,nt-R,M+P),J.closePath()}}),et=St.ZP.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(J,Y){var nt=Y.height,w=Y.x,C=Y.y,I=Y.width/3*2;J.moveTo(w,C),J.lineTo(w+I,C+nt),J.lineTo(w,C+nt/4*3),J.lineTo(w-I,C+nt),J.lineTo(w,C),J.closePath()}}),st={line:function(J,Y,nt,U,w){w.x1=J,w.y1=Y+U/2,w.x2=J+nt,w.y2=Y+U/2},rect:function(J,Y,nt,U,w){w.x=J,w.y=Y,w.width=nt,w.height=U},roundRect:function(J,Y,nt,U,w){w.x=J,w.y=Y,w.width=nt,w.height=U,w.r=Math.min(nt,U)/4},square:function(J,Y,nt,U,w){var C=Math.min(nt,U);w.x=J,w.y=Y,w.width=C,w.height=C},circle:function(J,Y,nt,U,w){w.cx=J+nt/2,w.cy=Y+U/2,w.r=Math.min(nt,U)/2},diamond:function(J,Y,nt,U,w){w.cx=J+nt/2,w.cy=Y+U/2,w.width=nt,w.height=U},pin:function(J,Y,nt,U,w){w.x=J+nt/2,w.y=Y+U/2,w.width=nt,w.height=U},arrow:function(J,Y,nt,U,w){w.x=J+nt/2,w.y=Y+U/2,w.width=nt,w.height=U},triangle:function(J,Y,nt,U,w){w.cx=J+nt/2,w.cy=Y+U/2,w.width=nt,w.height=U}},K={};(0,B.each)({line:n.Z,rect:_t.Z,roundRect:_t.Z,square:_t.Z,circle:mt.Z,diamond:q,pin:N,arrow:et,triangle:X},function(J,Y){K[Y]=new J});var _=St.ZP.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(J,Y,nt){var U=(0,V.wI)(J,Y,nt),w=this.shape;return w&&"pin"===w.symbolType&&"inside"===Y.position&&(U.y=nt.y+.4*nt.height),U},buildPath:function(J,Y,nt){var U=Y.symbolType;if("none"!==U){var w=K[U];w||(w=K[U="rect"]),st[U](Y.x,Y.y,Y.width,Y.height,w.shape),w.buildPath(J,w.shape,nt)}}});function j(J,Y){if("image"!==this.type){var nt=this.style;this.__isEmptyBrush?(nt.stroke=J,nt.fill=Y||"#fff",nt.lineWidth=2):"line"===this.shape.symbolType?nt.stroke=J:nt.fill=J,this.markRedraw()}}function it(J,Y,nt,U,w,C,I){var M,P=0===J.indexOf("empty");return P&&(J=J.substr(5,1).toLowerCase()+J.substr(6)),(M=0===J.indexOf("image://")?gt.makeImage(J.slice(8),new yt.Z(Y,nt,U,w),I?"center":"cover"):0===J.indexOf("path://")?gt.makePath(J.slice(7),{},new yt.Z(Y,nt,U,w),I?"center":"cover"):new _({shape:{symbolType:J,x:Y,y:nt,width:U,height:w}})).__isEmptyBrush=P,M.setColor=j,C&&M.setColor(C),M}function z(J){return(0,B.isArray)(J)||(J=[+J,+J]),[J[0]||0,J[1]||0]}function tt(J,Y){if(null!=J)return(0,B.isArray)(J)||(J=[J,J]),[(0,k.GM)(J[0],Y[0])||0,(0,k.GM)((0,B.retrieve2)(J[1],J[0]),Y[1])||0]}},4972:(Ze,te,D)=>{D.d(te,{P2:()=>_t,T9:()=>mt,ZH:()=>gt});var B="\0__throttleOriginMethod",St="\0__throttleRate",n="\0__throttleType";function _t(yt,V,k){var X,$,st,K,_,q=0,N=0,et=null;function j(){N=(new Date).getTime(),et=null,yt.apply(st,K||[])}V=V||0;var it=function(){for(var z=[],tt=0;tt<arguments.length;tt++)z[tt]=arguments[tt];X=(new Date).getTime(),st=this,K=z;var J=_||V,Y=_||k;_=null,$=X-(Y?q:N)-J,clearTimeout(et),Y?et=setTimeout(j,J):$>=0?j():et=setTimeout(j,-$),q=X};return it.clear=function(){et&&(clearTimeout(et),et=null)},it.debounceNextCall=function(z){_=z},it}function mt(yt,V,k,X){var q=yt[V];if(q){var N=q[B]||q;if(q[St]!==k||q[n]!==X){if(null==k||!X)return yt[V]=N;(q=yt[V]=_t(N,k,"debounce"===X))[B]=N,q[n]=X,q[St]=k}return q}}function gt(yt,V){var k=yt[V];k&&k[B]&&(k.clear&&k.clear(),yt[V]=k[B])}},8086:(Ze,te,D)=>{D.d(te,{$K:()=>_,CW:()=>nt,En:()=>Z,FW:()=>$,MV:()=>I,P5:()=>k,RZ:()=>P,Tj:()=>K,V8:()=>N,WT:()=>mt,WU:()=>it,Wp:()=>w,cb:()=>at,dV:()=>yt,eN:()=>rt,f5:()=>R,fn:()=>C,k7:()=>z,q5:()=>J,rM:()=>ot,s2:()=>V,sx:()=>Y,vh:()=>A,vk:()=>st,xC:()=>j,xL:()=>M,xz:()=>U,yR:()=>gt});var B=D(6615),St=D(8301),n=D(2575),_t=D(7838),mt=1e3,gt=60*mt,yt=60*gt,V=24*yt,k=365*V,X={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},q="{yyyy}-{MM}-{dd}",N={year:"{yyyy}",month:"{yyyy}-{MM}",day:q,hour:q+" "+X.hour,minute:q+" "+X.minute,second:q+" "+X.second,millisecond:X.none},et=["year","month","day","hour","minute","second","millisecond"],$=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function st(lt,ht){return"0000".substr(0,ht-(lt+="").length)+lt}function K(lt){switch(lt){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return lt}}function _(lt){return lt===K(lt)}function j(lt){switch(lt){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function it(lt,ht,vt,ct){var dt=St.sG(lt),Mt=dt[Y(vt)](),Pt=dt[nt(vt)]()+1,wt=Math.floor((Pt-1)/3)+1,Ot=dt[U(vt)](),Ft=dt["get"+(vt?"UTC":"")+"Day"](),Ut=dt[w(vt)](),kt=(Ut-1)%12+1,ie=dt[C(vt)](),ue=dt[I(vt)](),Pe=dt[P(vt)](),De=(ct instanceof _t.Z?ct:(0,n.G8)(ct||n.sO)||(0,n.Li)()).getModel("time"),Fe=De.get("month"),Ye=De.get("monthAbbr"),tr=De.get("dayOfWeek"),or=De.get("dayOfWeekAbbr");return(ht||"").replace(/{yyyy}/g,Mt+"").replace(/{yy}/g,Mt%100+"").replace(/{Q}/g,wt+"").replace(/{MMMM}/g,Fe[Pt-1]).replace(/{MMM}/g,Ye[Pt-1]).replace(/{MM}/g,st(Pt,2)).replace(/{M}/g,Pt+"").replace(/{dd}/g,st(Ot,2)).replace(/{d}/g,Ot+"").replace(/{eeee}/g,tr[Ft]).replace(/{ee}/g,or[Ft]).replace(/{e}/g,Ft+"").replace(/{HH}/g,st(Ut,2)).replace(/{H}/g,Ut+"").replace(/{hh}/g,st(kt+"",2)).replace(/{h}/g,kt+"").replace(/{mm}/g,st(ie,2)).replace(/{m}/g,ie+"").replace(/{ss}/g,st(ue,2)).replace(/{s}/g,ue+"").replace(/{SSS}/g,st(Pe,3)).replace(/{S}/g,Pe+"")}function z(lt,ht,vt,ct,dt){var Mt=null;if(B.isString(vt))Mt=vt;else if(B.isFunction(vt))Mt=vt(lt.value,ht,{level:lt.level});else{var Pt=B.extend({},X);if(lt.level>0)for(var wt=0;wt<et.length;++wt)Pt[et[wt]]="{primary|"+Pt[et[wt]]+"}";var Ot=vt?!1===vt.inherit?vt:B.defaults(vt,Pt):Pt,Ft=tt(lt.value,dt);if(Ot[Ft])Mt=Ot[Ft];else if(Ot.inherit){for(wt=$.indexOf(Ft)-1;wt>=0;--wt)if(Ot[Ft]){Mt=Ot[Ft];break}Mt=Mt||Pt.none}if(B.isArray(Mt)){var kt=null==lt.level?0:lt.level>=0?lt.level:Mt.length+lt.level;Mt=Mt[kt=Math.min(kt,Mt.length-1)]}}return it(new Date(lt.value),Mt,dt,ct)}function tt(lt,ht){var vt=St.sG(lt),ct=vt[nt(ht)]()+1,dt=vt[U(ht)](),Mt=vt[w(ht)](),Pt=vt[C(ht)](),wt=vt[I(ht)](),Ft=0===vt[P(ht)](),Ut=Ft&&0===wt,kt=Ut&&0===Pt,ie=kt&&0===Mt,ue=ie&&1===dt;return ue&&1===ct?"year":ue?"month":ie?"day":kt?"hour":Ut?"minute":Ft?"second":"millisecond"}function J(lt,ht,vt){var ct=B.isNumber(lt)?St.sG(lt):lt;switch(ht=ht||tt(lt,vt)){case"year":return ct[Y(vt)]();case"half-year":return ct[nt(vt)]()>=6?1:0;case"quarter":return Math.floor((ct[nt(vt)]()+1)/4);case"month":return ct[nt(vt)]();case"day":return ct[U(vt)]();case"half-day":return ct[w(vt)]()/24;case"hour":return ct[w(vt)]();case"minute":return ct[C(vt)]();case"second":return ct[I(vt)]();case"millisecond":return ct[P(vt)]()}}function Y(lt){return lt?"getUTCFullYear":"getFullYear"}function nt(lt){return lt?"getUTCMonth":"getMonth"}function U(lt){return lt?"getUTCDate":"getDate"}function w(lt){return lt?"getUTCHours":"getHours"}function C(lt){return lt?"getUTCMinutes":"getMinutes"}function I(lt){return lt?"getUTCSeconds":"getSeconds"}function P(lt){return lt?"getUTCMilliseconds":"getMilliseconds"}function M(lt){return lt?"setUTCFullYear":"setFullYear"}function A(lt){return lt?"setUTCMonth":"setMonth"}function R(lt){return lt?"setUTCDate":"setDate"}function Z(lt){return lt?"setUTCHours":"setHours"}function rt(lt){return lt?"setUTCMinutes":"setMinutes"}function ot(lt){return lt?"setUTCSeconds":"setSeconds"}function at(lt){return lt?"setUTCMilliseconds":"setMilliseconds"}},4143:(Ze,te,D)=>{D.d(te,{J5:()=>yt,RA:()=>V,Wc:()=>X,XD:()=>_t,cy:()=>n,f7:()=>St,fY:()=>k,hL:()=>gt,qb:()=>mt});var St=(0,D(6615).createHashMap)(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),n="original",_t="arrayRows",mt="objectRows",gt="keyedColumns",yt="typedArray",V="unknown",k="column",X="row"},2448:(Ze,te,D)=>{D.d(te,{o:()=>_t});var B=D(6615),St=typeof Float32Array<"u",n=St?Float32Array:Array;function _t(mt){return(0,B.isArray)(mt)?St?new Float32Array(mt):mt:new n(mt)}},4023:(Ze,te,D)=>{D.d(te,{Z:()=>j});var B=D(6615),St=D(4786),n=D(6012),_t=D(8789),mt=D(1617),gt=D(8786),yt=D(338),V=D(9104),k=D(2694),X=mt.Yf(),q=(0,V.Z)(),N=function(){function it(){this.group=new St.Z,this.uid=n.Kr("viewChart"),this.renderTask=(0,yt.v)({plan:st,reset:K}),this.renderTask.context={view:this}}return it.prototype.init=function(z,tt){},it.prototype.render=function(z,tt,J,Y){},it.prototype.highlight=function(z,tt,J,Y){var nt=z.getData(Y&&Y.dataType);!nt||$(nt,Y,"emphasis")},it.prototype.downplay=function(z,tt,J,Y){var nt=z.getData(Y&&Y.dataType);!nt||$(nt,Y,"normal")},it.prototype.remove=function(z,tt){this.group.removeAll()},it.prototype.dispose=function(z,tt){},it.prototype.updateView=function(z,tt,J,Y){this.render(z,tt,J,Y)},it.prototype.updateLayout=function(z,tt,J,Y){this.render(z,tt,J,Y)},it.prototype.updateVisual=function(z,tt,J,Y){this.render(z,tt,J,Y)},it.prototype.eachRendered=function(z){(0,k.traverseElements)(this.group,z)},it.markUpdateMethod=function(z,tt){X(z).updateMethod=tt},it.protoInitialize=void(it.prototype.type="chart"),it}();function et(it,z,tt){it&&(0,gt.Av)(it)&&("emphasis"===z?gt.fD:gt.Mh)(it,tt)}function $(it,z,tt){var J=mt.gO(it,z),Y=z&&null!=z.highlightKey?(0,gt.RW)(z.highlightKey):null;null!=J?(0,B.each)(mt.kF(J),function(nt){et(it.getItemGraphicEl(nt),tt,Y)}):it.eachItemGraphicEl(function(nt){et(nt,tt,Y)})}function st(it){return q(it.model)}function K(it){var z=it.model,tt=it.ecModel,J=it.api,Y=it.payload,nt=z.pipelineContext.progressiveRender,U=it.view,w=Y&&X(Y).updateMethod,C=nt?"incrementalPrepareRender":w&&U[w]?w:"render";return"render"!==C&&U[C](z,tt,J,Y),_[C]}_t.dm(N,["dispose"]),_t.au(N);var _={incrementalPrepareRender:{progress:function(it,z){z.view.incrementalRender(it,z.model,z.ecModel,z.api,z.payload)}},render:{forceFirstProgress:!0,progress:function(it,z){z.view.render(z.model,z.ecModel,z.api,z.payload)}}};const j=N},3785:(Ze,te,D)=>{D.d(te,{Z:()=>mt});var B=D(4786),St=D(6012),n=D(8789),_t=function(){function gt(){this.group=new B.Z,this.uid=St.Kr("viewComponent")}return gt.prototype.init=function(yt,V){},gt.prototype.render=function(yt,V,k,X){},gt.prototype.dispose=function(yt,V){},gt.prototype.updateView=function(yt,V,k,X){},gt.prototype.updateLayout=function(yt,V,k,X){},gt.prototype.updateVisual=function(yt,V,k,X){},gt.prototype.toggleBlurSeries=function(yt,V,k){},gt.prototype.eachRendered=function(yt){var V=this.group;V&&V.traverse(yt)},gt}();n.dm(_t),n.au(_t);const mt=_t},2332:(Ze,te,D)=>{function B(_t,mt,gt){switch(gt){case"color":return _t.getItemVisual(mt,"style")[_t.getVisual("drawType")];case"opacity":return _t.getItemVisual(mt,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return _t.getItemVisual(mt,gt)}}function St(_t,mt){switch(mt){case"color":return _t.getVisual("style")[_t.getVisual("drawType")];case"opacity":return _t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return _t.getVisual(mt)}}function n(_t,mt,gt,yt){switch(gt){case"color":_t.ensureUniqueItemVisual(mt,"style")[_t.getVisual("drawType")]=yt,_t.setItemVisual(mt,"colorFromPalette",!1);break;case"opacity":_t.ensureUniqueItemVisual(mt,"style").opacity=yt;break;case"symbol":case"symbolSize":case"liftZ":_t.setItemVisual(mt,gt,yt)}}D.d(te,{LZ:()=>n,Or:()=>B,UL:()=>St})},2501:(Ze,te,D)=>{D.d(te,{Z:()=>Y});var B=D(5028),St=D(1694),n=D(4525),_t=D(7100),mt=D(585),gt=D(6615),yt=D(6905),V=D(754),k=D(6195),X="__zr_normal__",q=B.dN.concat(["ignore"]),N=(0,gt.reduce)(B.dN,function(nt,U){return nt[U]=!0,nt},{ignore:!1}),et={},$=new n.Z(0,0,0,0),st=function(){function nt(U){this.id=(0,gt.guid)(),this.animators=[],this.currentStates=[],this.states={},this._init(U)}return nt.prototype._init=function(U){this.attr(U)},nt.prototype.drift=function(U,w,C){switch(this.draggable){case"horizontal":w=0;break;case"vertical":U=0}var I=this.transform;I||(I=this.transform=[1,0,0,1,0,0]),I[4]+=U,I[5]+=w,this.decomposeTransform(),this.markRedraw()},nt.prototype.beforeUpdate=function(){},nt.prototype.afterUpdate=function(){},nt.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},nt.prototype.updateInnerText=function(U){var w=this._textContent;if(w&&(!w.ignore||U)){this.textConfig||(this.textConfig={});var C=this.textConfig,I=C.local,P=w.innerTransformable,M=void 0,A=void 0,R=!1;P.parent=I?this:null;var Z=!1;if(P.copyTransform(w),null!=C.position){var rt=$;rt.copy(C.layoutRect?C.layoutRect:this.getBoundingRect()),I||rt.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(et,C,rt):(0,mt.wI)(et,C,rt),P.x=et.x,P.y=et.y,M=et.align,A=et.verticalAlign;var ot=C.origin;if(ot&&null!=C.rotation){var at=void 0,lt=void 0;"center"===ot?(at=.5*rt.width,lt=.5*rt.height):(at=(0,mt.GM)(ot[0],rt.width),lt=(0,mt.GM)(ot[1],rt.height)),Z=!0,P.originX=-P.x+at+(I?0:rt.x),P.originY=-P.y+lt+(I?0:rt.y)}}null!=C.rotation&&(P.rotation=C.rotation);var ht=C.offset;ht&&(P.x+=ht[0],P.y+=ht[1],Z||(P.originX=-ht[0],P.originY=-ht[1]));var vt=C.inside??("string"==typeof C.position&&C.position.indexOf("inside")>=0),ct=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),dt=void 0,Mt=void 0,Pt=void 0;vt&&this.canBeInsideText()?(Mt=C.insideStroke,(null==(dt=C.insideFill)||"auto"===dt)&&(dt=this.getInsideTextFill()),(null==Mt||"auto"===Mt)&&(Mt=this.getInsideTextStroke(dt),Pt=!0)):(Mt=C.outsideStroke,(null==(dt=C.outsideFill)||"auto"===dt)&&(dt=this.getOutsideFill()),(null==Mt||"auto"===Mt)&&(Mt=this.getOutsideStroke(dt),Pt=!0)),((dt=dt||"#000")!==ct.fill||Mt!==ct.stroke||Pt!==ct.autoStroke||M!==ct.align||A!==ct.verticalAlign)&&(R=!0,ct.fill=dt,ct.stroke=Mt,ct.autoStroke=Pt,ct.align=M,ct.verticalAlign=A,w.setDefaultTextStyle(ct)),w.__dirty|=k.YV,R&&w.dirtyStyle(!0)}},nt.prototype.canBeInsideText=function(){return!0},nt.prototype.getInsideTextFill=function(){return"#fff"},nt.prototype.getInsideTextStroke=function(U){return"#000"},nt.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?yt.GD:yt.vU},nt.prototype.getOutsideStroke=function(U){var w=this.__zr&&this.__zr.getBackgroundColor(),C="string"==typeof w&&(0,V.parse)(w);C||(C=[255,255,255,1]);for(var I=C[3],P=this.__zr.isDarkMode(),M=0;M<3;M++)C[M]=C[M]*I+(P?0:255)*(1-I);return C[3]=1,(0,V.stringify)(C,"rgba")},nt.prototype.traverse=function(U,w){},nt.prototype.attrKV=function(U,w){"textConfig"===U?this.setTextConfig(w):"textContent"===U?this.setTextContent(w):"clipPath"===U?this.setClipPath(w):"extra"===U?(this.extra=this.extra||{},(0,gt.extend)(this.extra,w)):this[U]=w},nt.prototype.hide=function(){this.ignore=!0,this.markRedraw()},nt.prototype.show=function(){this.ignore=!1,this.markRedraw()},nt.prototype.attr=function(U,w){if("string"==typeof U)this.attrKV(U,w);else if((0,gt.isObject)(U))for(var I=(0,gt.keys)(U),P=0;P<I.length;P++){var M=I[P];this.attrKV(M,U[M])}return this.markRedraw(),this},nt.prototype.saveCurrentToNormalState=function(U){this._innerSaveToNormal(U);for(var w=this._normalState,C=0;C<this.animators.length;C++){var I=this.animators[C],P=I.__fromStateTransition;if(!(I.getLoop()||P&&P!==X)){var M=I.targetName;I.saveTo(M?w[M]:w)}}},nt.prototype._innerSaveToNormal=function(U){var w=this._normalState;w||(w=this._normalState={}),U.textConfig&&!w.textConfig&&(w.textConfig=this.textConfig),this._savePrimaryToNormal(U,w,q)},nt.prototype._savePrimaryToNormal=function(U,w,C){for(var I=0;I<C.length;I++){var P=C[I];null!=U[P]&&!(P in w)&&(w[P]=this[P])}},nt.prototype.hasState=function(){return this.currentStates.length>0},nt.prototype.getState=function(U){return this.states[U]},nt.prototype.ensureState=function(U){var w=this.states;return w[U]||(w[U]={}),w[U]},nt.prototype.clearStates=function(U){this.useState(X,!1,U)},nt.prototype.useState=function(U,w,C,I){var P=U===X;if(this.hasState()||!P){var A=this.currentStates,R=this.stateTransition;if(!((0,gt.indexOf)(A,U)>=0)||!w&&1!==A.length){var Z;if(this.stateProxy&&!P&&(Z=this.stateProxy(U)),Z||(Z=this.states&&this.states[U]),!Z&&!P)return void(0,gt.logError)("State "+U+" not exists.");P||this.saveCurrentToNormalState(Z);var rt=!!(Z&&Z.hoverLayer||I);rt&&this._toggleHoverLayerFlag(!0),this._applyStateObj(U,Z,this._normalState,w,!C&&!this.__inHover&&R&&R.duration>0,R);var ot=this._textContent,at=this._textGuide;return ot&&ot.useState(U,w,C,rt),at&&at.useState(U,w,C,rt),P?(this.currentStates=[],this._normalState={}):w?this.currentStates.push(U):this.currentStates=[U],this._updateAnimationTargets(),this.markRedraw(),!rt&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~k.YV),Z}}},nt.prototype.useStates=function(U,w,C){if(U.length){var I=[],P=this.currentStates,M=U.length,A=M===P.length;if(A)for(var R=0;R<M;R++)if(U[R]!==P[R]){A=!1;break}if(A)return;for(R=0;R<M;R++){var Z=U[R],rt=void 0;this.stateProxy&&(rt=this.stateProxy(Z,U)),rt||(rt=this.states[Z]),rt&&I.push(rt)}var ot=I[M-1],at=!!(ot&&ot.hoverLayer||C);at&&this._toggleHoverLayerFlag(!0);var lt=this._mergeStates(I),ht=this.stateTransition;this.saveCurrentToNormalState(lt),this._applyStateObj(U.join(","),lt,this._normalState,!1,!w&&!this.__inHover&&ht&&ht.duration>0,ht);var vt=this._textContent,ct=this._textGuide;vt&&vt.useStates(U,w,at),ct&&ct.useStates(U,w,at),this._updateAnimationTargets(),this.currentStates=U.slice(),this.markRedraw(),!at&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~k.YV)}else this.clearStates()},nt.prototype._updateAnimationTargets=function(){for(var U=0;U<this.animators.length;U++){var w=this.animators[U];w.targetName&&w.changeTarget(this[w.targetName])}},nt.prototype.removeState=function(U){var w=(0,gt.indexOf)(this.currentStates,U);if(w>=0){var C=this.currentStates.slice();C.splice(w,1),this.useStates(C)}},nt.prototype.replaceState=function(U,w,C){var I=this.currentStates.slice(),P=(0,gt.indexOf)(I,U),M=(0,gt.indexOf)(I,w)>=0;P>=0?M?I.splice(P,1):I[P]=w:C&&!M&&I.push(w),this.useStates(I)},nt.prototype.toggleState=function(U,w){w?this.useState(U,!0):this.removeState(U)},nt.prototype._mergeStates=function(U){for(var C,w={},I=0;I<U.length;I++){var P=U[I];(0,gt.extend)(w,P),P.textConfig&&(0,gt.extend)(C=C||{},P.textConfig)}return C&&(w.textConfig=C),w},nt.prototype._applyStateObj=function(U,w,C,I,P,M){var A=!(w&&I);w&&w.textConfig?(this.textConfig=(0,gt.extend)({},I?this.textConfig:C.textConfig),(0,gt.extend)(this.textConfig,w.textConfig)):A&&C.textConfig&&(this.textConfig=C.textConfig);for(var R={},Z=!1,rt=0;rt<q.length;rt++){var ot=q[rt],at=P&&N[ot];w&&null!=w[ot]?at?(Z=!0,R[ot]=w[ot]):this[ot]=w[ot]:A&&null!=C[ot]&&(at?(Z=!0,R[ot]=C[ot]):this[ot]=C[ot])}if(!P)for(rt=0;rt<this.animators.length;rt++){var lt=this.animators[rt],ht=lt.targetName;lt.getLoop()||lt.__changeFinalValue(ht?(w||C)[ht]:w||C)}Z&&this._transitionState(U,R,M)},nt.prototype._attachComponent=function(U){if((!U.__zr||U.__hostTarget)&&U!==this){var w=this.__zr;w&&U.addSelfToZr(w),U.__zr=w,U.__hostTarget=this}},nt.prototype._detachComponent=function(U){U.__zr&&U.removeSelfFromZr(U.__zr),U.__zr=null,U.__hostTarget=null},nt.prototype.getClipPath=function(){return this._clipPath},nt.prototype.setClipPath=function(U){this._clipPath&&this._clipPath!==U&&this.removeClipPath(),this._attachComponent(U),this._clipPath=U,this.markRedraw()},nt.prototype.removeClipPath=function(){var U=this._clipPath;U&&(this._detachComponent(U),this._clipPath=null,this.markRedraw())},nt.prototype.getTextContent=function(){return this._textContent},nt.prototype.setTextContent=function(U){var w=this._textContent;w!==U&&(w&&w!==U&&this.removeTextContent(),U.innerTransformable=new B.ZP,this._attachComponent(U),this._textContent=U,this.markRedraw())},nt.prototype.setTextConfig=function(U){this.textConfig||(this.textConfig={}),(0,gt.extend)(this.textConfig,U),this.markRedraw()},nt.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},nt.prototype.removeTextContent=function(){var U=this._textContent;U&&(U.innerTransformable=null,this._detachComponent(U),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},nt.prototype.getTextGuideLine=function(){return this._textGuide},nt.prototype.setTextGuideLine=function(U){this._textGuide&&this._textGuide!==U&&this.removeTextGuideLine(),this._attachComponent(U),this._textGuide=U,this.markRedraw()},nt.prototype.removeTextGuideLine=function(){var U=this._textGuide;U&&(this._detachComponent(U),this._textGuide=null,this.markRedraw())},nt.prototype.markRedraw=function(){this.__dirty|=k.YV;var U=this.__zr;U&&(this.__inHover?U.refreshHover():U.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},nt.prototype.dirty=function(){this.markRedraw()},nt.prototype._toggleHoverLayerFlag=function(U){this.__inHover=U;var w=this._textContent,C=this._textGuide;w&&(w.__inHover=U),C&&(C.__inHover=U)},nt.prototype.addSelfToZr=function(U){if(this.__zr!==U){this.__zr=U;var w=this.animators;if(w)for(var C=0;C<w.length;C++)U.animation.addAnimator(w[C]);this._clipPath&&this._clipPath.addSelfToZr(U),this._textContent&&this._textContent.addSelfToZr(U),this._textGuide&&this._textGuide.addSelfToZr(U)}},nt.prototype.removeSelfFromZr=function(U){if(this.__zr){this.__zr=null;var w=this.animators;if(w)for(var C=0;C<w.length;C++)U.animation.removeAnimator(w[C]);this._clipPath&&this._clipPath.removeSelfFromZr(U),this._textContent&&this._textContent.removeSelfFromZr(U),this._textGuide&&this._textGuide.removeSelfFromZr(U)}},nt.prototype.animate=function(U,w,C){var P=new St.Z(U?this[U]:this,w,C);return U&&(P.targetName=U),this.addAnimator(P,U),P},nt.prototype.addAnimator=function(U,w){var C=this.__zr,I=this;U.during(function(){I.updateDuringAnimation(w)}).done(function(){var P=I.animators,M=(0,gt.indexOf)(P,U);M>=0&&P.splice(M,1)}),this.animators.push(U),C&&C.animation.addAnimator(U),C&&C.wakeUp()},nt.prototype.updateDuringAnimation=function(U){this.markRedraw()},nt.prototype.stopAnimation=function(U,w){for(var C=this.animators,I=C.length,P=[],M=0;M<I;M++){var A=C[M];U&&U!==A.scope?P.push(A):A.stop(w)}return this.animators=P,this},nt.prototype.animateTo=function(U,w,C){K(this,U,w,C)},nt.prototype.animateFrom=function(U,w,C){K(this,U,w,C,!0)},nt.prototype._transitionState=function(U,w,C,I){for(var P=K(this,w,C,I),M=0;M<P.length;M++)P[M].__fromStateTransition=U},nt.prototype.getBoundingRect=function(){return null},nt.prototype.getPaintRect=function(){return null},nt.initDefaultProps=function(){var U=nt.prototype;function I(P,M,A,R){function Z(rt,ot){Object.defineProperty(ot,0,{get:function(){return rt[A]},set:function(at){rt[A]=at}}),Object.defineProperty(ot,1,{get:function(){return rt[R]},set:function(at){rt[R]=at}})}Object.defineProperty(U,P,{get:function(){return this[M]||Z(this,this[M]=[]),this[M]},set:function(rt){this[A]=rt[0],this[R]=rt[1],this[M]=rt,Z(this,rt)}})}U.type="element",U.name="",U.ignore=U.silent=U.isGroup=U.draggable=U.dragging=U.ignoreClip=U.__inHover=!1,U.__dirty=k.YV,Object.defineProperty&&(I("position","_legacyPos","x","y"),I("scale","_legacyScale","scaleX","scaleY"),I("origin","_legacyOrigin","originX","originY"))}(),nt}();function K(nt,U,w,C,I){var P=[];J(nt,"",nt,U,w=w||{},C,P,I);var M=P.length,A=!1,R=w.done,Z=w.aborted,rt=function(){A=!0,--M<=0&&(A?R&&R():Z&&Z())},ot=function(){--M<=0&&(A?R&&R():Z&&Z())};M||R&&R(),P.length>0&&w.during&&P[0].during(function(ht,vt){w.during(vt)});for(var at=0;at<P.length;at++){var lt=P[at];rt&&lt.done(rt),ot&&lt.aborted(ot),w.force&&lt.duration(w.duration),lt.start(w.easing)}return P}function _(nt,U,w){for(var C=0;C<w;C++)nt[C]=U[C]}function it(nt,U,w){if((0,gt.isArrayLike)(U[w]))if((0,gt.isArrayLike)(nt[w])||(nt[w]=[]),(0,gt.isTypedArray)(U[w])){var C=U[w].length;nt[w].length!==C&&(nt[w]=new U[w].constructor(C),_(nt[w],U[w],C))}else{var I=U[w],P=nt[w],M=I.length;if(function j(nt){return(0,gt.isArrayLike)(nt[0])}(I))for(var A=I[0].length,R=0;R<M;R++)P[R]?_(P[R],I[R],A):P[R]=Array.prototype.slice.call(I[R]);else _(P,I,M);P.length=I.length}else nt[w]=U[w]}function J(nt,U,w,C,I,P,M,A){for(var R=(0,gt.keys)(C),Z=I.duration,rt=I.delay,ot=I.additive,at=I.setToFinal,lt=!(0,gt.isObject)(P),ht=nt.animators,vt=[],ct=0;ct<R.length;ct++){var Mt=C[dt=R[ct]];if(null!=Mt&&null!=w[dt]&&(lt||P[dt]))if(!(0,gt.isObject)(Mt)||(0,gt.isArrayLike)(Mt)||(0,gt.isGradientObject)(Mt))vt.push(dt);else{if(U){A||(w[dt]=Mt,nt.updateDuringAnimation(U));continue}J(nt,dt,w[dt],Mt,I,P&&P[dt],M,A)}else A||(w[dt]=Mt,nt.updateDuringAnimation(U),vt.push(dt))}var Pt=vt.length;if(!ot&&Pt)for(var wt=0;wt<ht.length;wt++)if((Ot=ht[wt]).targetName===U&&Ot.stopTracks(vt)){var Ut=(0,gt.indexOf)(ht,Ot);ht.splice(Ut,1)}if(I.force||(vt=(0,gt.filter)(vt,function(Pe){return!function z(nt,U){return nt===U||(0,gt.isArrayLike)(nt)&&(0,gt.isArrayLike)(U)&&function tt(nt,U){var w=nt.length;if(w!==U.length)return!1;for(var C=0;C<w;C++)if(nt[C]!==U[C])return!1;return!0}(nt,U)}(C[Pe],w[Pe])}),Pt=vt.length),Pt>0||I.force&&!M.length){var Ot,kt=void 0,ie=void 0,ue=void 0;if(A)for(ie={},at&&(kt={}),wt=0;wt<Pt;wt++)ie[dt=vt[wt]]=w[dt],at?kt[dt]=C[dt]:w[dt]=C[dt];else if(at)for(ue={},wt=0;wt<Pt;wt++){var dt;ue[dt=vt[wt]]=(0,St.V)(w[dt]),it(w,C,dt)}(Ot=new St.Z(w,!1,!1,ot?(0,gt.filter)(ht,function(Se){return Se.targetName===U}):null)).targetName=U,I.scope&&(Ot.scope=I.scope),at&&kt&&Ot.whenWithKeys(0,kt,vt),ue&&Ot.whenWithKeys(0,ue,vt),Ot.whenWithKeys(Z??500,A?ie:C,vt).delay(rt||0),nt.addAnimator(Ot,U),M.push(Ot)}}(0,gt.mixin)(st,_t.Z),(0,gt.mixin)(st,B.ZP);const Y=st},1694:(Ze,te,D)=>{D.d(te,{V:()=>_,Z:()=>R});var B={linear:function(Z){return Z},quadraticIn:function(Z){return Z*Z},quadraticOut:function(Z){return Z*(2-Z)},quadraticInOut:function(Z){return(Z*=2)<1?.5*Z*Z:-.5*(--Z*(Z-2)-1)},cubicIn:function(Z){return Z*Z*Z},cubicOut:function(Z){return--Z*Z*Z+1},cubicInOut:function(Z){return(Z*=2)<1?.5*Z*Z*Z:.5*((Z-=2)*Z*Z+2)},quarticIn:function(Z){return Z*Z*Z*Z},quarticOut:function(Z){return 1- --Z*Z*Z*Z},quarticInOut:function(Z){return(Z*=2)<1?.5*Z*Z*Z*Z:-.5*((Z-=2)*Z*Z*Z-2)},quinticIn:function(Z){return Z*Z*Z*Z*Z},quinticOut:function(Z){return--Z*Z*Z*Z*Z+1},quinticInOut:function(Z){return(Z*=2)<1?.5*Z*Z*Z*Z*Z:.5*((Z-=2)*Z*Z*Z*Z+2)},sinusoidalIn:function(Z){return 1-Math.cos(Z*Math.PI/2)},sinusoidalOut:function(Z){return Math.sin(Z*Math.PI/2)},sinusoidalInOut:function(Z){return.5*(1-Math.cos(Math.PI*Z))},exponentialIn:function(Z){return 0===Z?0:Math.pow(1024,Z-1)},exponentialOut:function(Z){return 1===Z?1:1-Math.pow(2,-10*Z)},exponentialInOut:function(Z){return 0===Z?0:1===Z?1:(Z*=2)<1?.5*Math.pow(1024,Z-1):.5*(2-Math.pow(2,-10*(Z-1)))},circularIn:function(Z){return 1-Math.sqrt(1-Z*Z)},circularOut:function(Z){return Math.sqrt(1- --Z*Z)},circularInOut:function(Z){return(Z*=2)<1?-.5*(Math.sqrt(1-Z*Z)-1):.5*(Math.sqrt(1-(Z-=2)*Z)+1)},elasticIn:function(Z){var rt,ot=.1;return 0===Z?0:1===Z?1:(!ot||ot<1?(ot=1,rt=.1):rt=.4*Math.asin(1/ot)/(2*Math.PI),-ot*Math.pow(2,10*(Z-=1))*Math.sin((Z-rt)*(2*Math.PI)/.4))},elasticOut:function(Z){var rt,ot=.1;return 0===Z?0:1===Z?1:(!ot||ot<1?(ot=1,rt=.1):rt=.4*Math.asin(1/ot)/(2*Math.PI),ot*Math.pow(2,-10*Z)*Math.sin((Z-rt)*(2*Math.PI)/.4)+1)},elasticInOut:function(Z){var rt,ot=.1;return 0===Z?0:1===Z?1:(!ot||ot<1?(ot=1,rt=.1):rt=.4*Math.asin(1/ot)/(2*Math.PI),(Z*=2)<1?ot*Math.pow(2,10*(Z-=1))*Math.sin((Z-rt)*(2*Math.PI)/.4)*-.5:ot*Math.pow(2,-10*(Z-=1))*Math.sin((Z-rt)*(2*Math.PI)/.4)*.5+1)},backIn:function(Z){return Z*Z*(2.70158*Z-1.70158)},backOut:function(Z){return--Z*Z*(2.70158*Z+1.70158)+1},backInOut:function(Z){var rt=2.5949095;return(Z*=2)<1?Z*Z*((rt+1)*Z-rt)*.5:.5*((Z-=2)*Z*((rt+1)*Z+rt)+2)},bounceIn:function(Z){return 1-B.bounceOut(1-Z)},bounceOut:function(Z){return Z<1/2.75?7.5625*Z*Z:Z<2/2.75?7.5625*(Z-=1.5/2.75)*Z+.75:Z<2.5/2.75?7.5625*(Z-=2.25/2.75)*Z+.9375:7.5625*(Z-=2.625/2.75)*Z+.984375},bounceInOut:function(Z){return Z<.5?.5*B.bounceIn(2*Z):.5*B.bounceOut(2*Z-1)+.5}};const St=B;var n=D(6615),_t=D(6776);const gt=function(){function Z(rt){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=rt.life||1e3,this._delay=rt.delay||0,this.loop=rt.loop||!1,this.onframe=rt.onframe||n.noop,this.ondestroy=rt.ondestroy||n.noop,this.onrestart=rt.onrestart||n.noop,rt.easing&&this.setEasing(rt.easing)}return Z.prototype.step=function(rt,ot){if(this._inited||(this._startTime=rt+this._delay,this._inited=!0),!this._paused){var at=this._life,lt=rt-this._startTime-this._pausedTime,ht=lt/at;ht<0&&(ht=0),ht=Math.min(ht,1);var vt=this.easingFunc,ct=vt?vt(ht):ht;if(this.onframe(ct),1===ht){if(!this.loop)return!0;this._startTime=rt-lt%at,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=ot},Z.prototype.pause=function(){this._paused=!0},Z.prototype.resume=function(){this._paused=!1},Z.prototype.setEasing=function(rt){this.easing=rt,this.easingFunc=(0,n.isFunction)(rt)?rt:St[rt]||(0,_t.H)(rt)},Z}();var yt=D(754),V=D(4687),k=Array.prototype.slice;function X(Z,rt,ot){return(rt-Z)*ot+Z}function q(Z,rt,ot,at){for(var lt=rt.length,ht=0;ht<lt;ht++)Z[ht]=X(rt[ht],ot[ht],at);return Z}function et(Z,rt,ot,at){for(var lt=rt.length,ht=0;ht<lt;ht++)Z[ht]=rt[ht]+ot[ht]*at;return Z}function $(Z,rt,ot,at){for(var lt=rt.length,ht=lt&&rt[0].length,vt=0;vt<lt;vt++){Z[vt]||(Z[vt]=[]);for(var ct=0;ct<ht;ct++)Z[vt][ct]=rt[vt][ct]+ot[vt][ct]*at}return Z}function st(Z,rt){for(var ot=Z.length,at=rt.length,lt=ot>at?rt:Z,ht=Math.min(ot,at),vt=lt[ht-1]||{color:[0,0,0,0],offset:0},ct=ht;ct<Math.max(ot,at);ct++)lt.push({offset:vt.offset,color:vt.color.slice()})}function K(Z,rt,ot){var at=Z,lt=rt;if(at.push&&lt.push){var ht=at.length,vt=lt.length;if(ht!==vt)if(ht>vt)at.length=vt;else for(var dt=ht;dt<vt;dt++)at.push(1===ot?lt[dt]:k.call(lt[dt]));var Mt=at[0]&&at[0].length;for(dt=0;dt<at.length;dt++)if(1===ot)isNaN(at[dt])&&(at[dt]=lt[dt]);else for(var Pt=0;Pt<Mt;Pt++)isNaN(at[dt][Pt])&&(at[dt][Pt]=lt[dt][Pt])}}function _(Z){if((0,n.isArrayLike)(Z)){var rt=Z.length;if((0,n.isArrayLike)(Z[0])){for(var ot=[],at=0;at<rt;at++)ot.push(k.call(Z[at]));return ot}return k.call(Z)}return Z}function j(Z){return Z[0]=Math.floor(Z[0])||0,Z[1]=Math.floor(Z[1])||0,Z[2]=Math.floor(Z[2])||0,Z[3]=Z[3]??1,"rgba("+Z.join(",")+")"}function C(Z){return 4===Z||5===Z}function I(Z){return 1===Z||2===Z}var P=[0,0,0,0],M=function(){function Z(rt){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=rt}return Z.prototype.isFinished=function(){return this._finished},Z.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},Z.prototype.needsAnimate=function(){return this.keyframes.length>=1},Z.prototype.getAdditiveTrack=function(){return this._additiveTrack},Z.prototype.addKeyframe=function(rt,ot,at){this._needsSort=!0;var lt=this.keyframes,ht=lt.length,vt=!1,ct=6,dt=ot;if((0,n.isArrayLike)(ot)){var Mt=function it(Z){return(0,n.isArrayLike)(Z&&Z[0])?2:1}(ot);ct=Mt,(1===Mt&&!(0,n.isNumber)(ot[0])||2===Mt&&!(0,n.isNumber)(ot[0][0]))&&(vt=!0)}else if((0,n.isNumber)(ot)&&!(0,n.eqNaN)(ot))ct=0;else if((0,n.isString)(ot))if(isNaN(+ot)){var Pt=yt.parse(ot);Pt&&(dt=Pt,ct=3)}else ct=0;else if((0,n.isGradientObject)(ot)){var wt=(0,n.extend)({},dt);wt.colorStops=(0,n.map)(ot.colorStops,function(Ft){return{offset:Ft.offset,color:yt.parse(Ft.color)}}),(0,V.I1)(ot)?ct=4:(0,V.gO)(ot)&&(ct=5),dt=wt}0===ht?this.valType=ct:(ct!==this.valType||6===ct)&&(vt=!0),this.discrete=this.discrete||vt;var Ot={time:rt,value:dt,rawValue:ot,percent:0};return at&&(Ot.easing=at,Ot.easingFunc=(0,n.isFunction)(at)?at:St[at]||(0,_t.H)(at)),lt.push(Ot),Ot},Z.prototype.prepare=function(rt,ot){var at=this.keyframes;this._needsSort&&at.sort(function(kt,ie){return kt.time-ie.time});for(var lt=this.valType,ht=at.length,vt=at[ht-1],ct=this.discrete,dt=I(lt),Mt=C(lt),Pt=0;Pt<ht;Pt++){var wt=at[Pt],Ot=wt.value,Ft=vt.value;wt.percent=wt.time/rt,ct||(dt&&Pt!==ht-1?K(Ot,Ft,lt):Mt&&st(Ot.colorStops,Ft.colorStops))}if(!ct&&5!==lt&&ot&&this.needsAnimate()&&ot.needsAnimate()&&lt===ot.valType&&!ot._finished){this._additiveTrack=ot;var Ut=at[0].value;for(Pt=0;Pt<ht;Pt++)0===lt?at[Pt].additiveValue=at[Pt].value-Ut:3===lt?at[Pt].additiveValue=et([],at[Pt].value,Ut,-1):I(lt)&&(at[Pt].additiveValue=1===lt?et([],at[Pt].value,Ut,-1):$([],at[Pt].value,Ut,-1))}},Z.prototype.step=function(rt,ot){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var Pt,Ft,Ut,at=null!=this._additiveTrack,lt=at?"additiveValue":"value",ht=this.valType,vt=this.keyframes,ct=vt.length,dt=this.propName,Mt=3===ht,wt=this._lastFr,Ot=Math.min;if(1===ct)Ft=Ut=vt[0];else{if(ot<0)Pt=0;else if(ot<this._lastFrP){for(Pt=Ot(wt+1,ct-1);Pt>=0&&!(vt[Pt].percent<=ot);Pt--);Pt=Ot(Pt,ct-2)}else{for(Pt=wt;Pt<ct&&!(vt[Pt].percent>ot);Pt++);Pt=Ot(Pt-1,ct-2)}Ut=vt[Pt+1],Ft=vt[Pt]}if(Ft&&Ut){this._lastFr=Pt,this._lastFrP=ot;var ie=Ut.percent-Ft.percent,ue=0===ie?1:Ot((ot-Ft.percent)/ie,1);Ut.easingFunc&&(ue=Ut.easingFunc(ue));var Pe=at?this._additiveValue:Mt?P:rt[dt];if((I(ht)||Mt)&&!Pe&&(Pe=this._additiveValue=[]),this.discrete)rt[dt]=ue<1?Ft.rawValue:Ut.rawValue;else if(I(ht))1===ht?q(Pe,Ft[lt],Ut[lt],ue):function N(Z,rt,ot,at){for(var lt=rt.length,ht=lt&&rt[0].length,vt=0;vt<lt;vt++){Z[vt]||(Z[vt]=[]);for(var ct=0;ct<ht;ct++)Z[vt][ct]=X(rt[vt][ct],ot[vt][ct],at)}}(Pe,Ft[lt],Ut[lt],ue);else if(C(ht)){var Se=Ft[lt],De=Ut[lt],Fe=4===ht;rt[dt]={type:Fe?"linear":"radial",x:X(Se.x,De.x,ue),y:X(Se.y,De.y,ue),colorStops:(0,n.map)(Se.colorStops,function(tr,or){var Hr=De.colorStops[or];return{offset:X(tr.offset,Hr.offset,ue),color:j(q([],tr.color,Hr.color,ue))}}),global:De.global},Fe?(rt[dt].x2=X(Se.x2,De.x2,ue),rt[dt].y2=X(Se.y2,De.y2,ue)):rt[dt].r=X(Se.r,De.r,ue)}else if(Mt)q(Pe,Ft[lt],Ut[lt],ue),at||(rt[dt]=j(Pe));else{var Ye=X(Ft[lt],Ut[lt],ue);at?this._additiveValue=Ye:rt[dt]=Ye}at&&this._addToTarget(rt)}}},Z.prototype._addToTarget=function(rt){var ot=this.valType,at=this.propName,lt=this._additiveValue;0===ot?rt[at]=rt[at]+lt:3===ot?(yt.parse(rt[at],P),et(P,P,lt,1),rt[at]=j(P)):1===ot?et(rt[at],rt[at],lt,1):2===ot&&$(rt[at],rt[at],lt,1)},Z}();const R=function(){function Z(rt,ot,at,lt){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=rt,this._loop=ot,ot&&lt?(0,n.logError)("Can' use additive animation on looped animation."):(this._additiveAnimators=lt,this._allowDiscrete=at)}return Z.prototype.getMaxTime=function(){return this._maxTime},Z.prototype.getDelay=function(){return this._delay},Z.prototype.getLoop=function(){return this._loop},Z.prototype.getTarget=function(){return this._target},Z.prototype.changeTarget=function(rt){this._target=rt},Z.prototype.when=function(rt,ot,at){return this.whenWithKeys(rt,ot,(0,n.keys)(ot),at)},Z.prototype.whenWithKeys=function(rt,ot,at,lt){for(var ht=this._tracks,vt=0;vt<at.length;vt++){var ct=at[vt],dt=ht[ct];if(!dt){dt=ht[ct]=new M(ct);var Mt=void 0,Pt=this._getAdditiveTrack(ct);if(Pt){var wt=Pt.keyframes,Ot=wt[wt.length-1];Mt=Ot&&Ot.value,3===Pt.valType&&Mt&&(Mt=j(Mt))}else Mt=this._target[ct];if(null==Mt)continue;rt>0&&dt.addKeyframe(0,_(Mt),lt),this._trackKeys.push(ct)}dt.addKeyframe(rt,_(ot[ct]),lt)}return this._maxTime=Math.max(this._maxTime,rt),this},Z.prototype.pause=function(){this._clip.pause(),this._paused=!0},Z.prototype.resume=function(){this._clip.resume(),this._paused=!1},Z.prototype.isPaused=function(){return!!this._paused},Z.prototype.duration=function(rt){return this._maxTime=rt,this._force=!0,this},Z.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var rt=this._doneCbs;if(rt)for(var ot=rt.length,at=0;at<ot;at++)rt[at].call(this)},Z.prototype._abortedCallback=function(){this._setTracksFinished();var rt=this.animation,ot=this._abortedCbs;if(rt&&rt.removeClip(this._clip),this._clip=null,ot)for(var at=0;at<ot.length;at++)ot[at].call(this)},Z.prototype._setTracksFinished=function(){for(var rt=this._tracks,ot=this._trackKeys,at=0;at<ot.length;at++)rt[ot[at]].setFinished()},Z.prototype._getAdditiveTrack=function(rt){var ot,at=this._additiveAnimators;if(at)for(var lt=0;lt<at.length;lt++){var ht=at[lt].getTrack(rt);ht&&(ot=ht)}return ot},Z.prototype.start=function(rt){if(!(this._started>0)){this._started=1;for(var ot=this,at=[],lt=this._maxTime||0,ht=0;ht<this._trackKeys.length;ht++){var vt=this._trackKeys[ht],ct=this._tracks[vt],dt=this._getAdditiveTrack(vt),Mt=ct.keyframes,Pt=Mt.length;if(ct.prepare(lt,dt),ct.needsAnimate())if(!this._allowDiscrete&&ct.discrete){var wt=Mt[Pt-1];wt&&(ot._target[ct.propName]=wt.rawValue),ct.setFinished()}else at.push(ct)}if(at.length||this._force){var Ot=new gt({life:lt,loop:this._loop,delay:this._delay||0,onframe:function(Ft){ot._started=2;var Ut=ot._additiveAnimators;if(Ut){for(var kt=!1,ie=0;ie<Ut.length;ie++)if(Ut[ie]._clip){kt=!0;break}kt||(ot._additiveAnimators=null)}for(ie=0;ie<at.length;ie++)at[ie].step(ot._target,Ft);var ue=ot._onframeCbs;if(ue)for(ie=0;ie<ue.length;ie++)ue[ie](ot._target,Ft)},ondestroy:function(){ot._doneCallback()}});this._clip=Ot,this.animation&&this.animation.addClip(Ot),rt&&Ot.setEasing(rt)}else this._doneCallback();return this}},Z.prototype.stop=function(rt){this._clip&&(rt&&this._clip.onframe(1),this._abortedCallback())},Z.prototype.delay=function(rt){return this._delay=rt,this},Z.prototype.during=function(rt){return rt&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(rt)),this},Z.prototype.done=function(rt){return rt&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(rt)),this},Z.prototype.aborted=function(rt){return rt&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(rt)),this},Z.prototype.getClip=function(){return this._clip},Z.prototype.getTrack=function(rt){return this._tracks[rt]},Z.prototype.getTracks=function(){var rt=this;return(0,n.map)(this._trackKeys,function(ot){return rt._tracks[ot]})},Z.prototype.stopTracks=function(rt,ot){if(!rt.length||!this._clip)return!0;for(var at=this._tracks,lt=this._trackKeys,ht=0;ht<rt.length;ht++){var vt=at[rt[ht]];vt&&!vt.isFinished()&&(ot?vt.step(this._target,1):1===this._started&&vt.step(this._target,0),vt.setFinished())}var ct=!0;for(ht=0;ht<lt.length;ht++)if(!at[lt[ht]].isFinished()){ct=!1;break}return ct&&this._abortedCallback(),ct},Z.prototype.saveTo=function(rt,ot,at){if(rt){ot=ot||this._trackKeys;for(var lt=0;lt<ot.length;lt++){var ht=ot[lt],vt=this._tracks[ht];if(vt&&!vt.isFinished()){var ct=vt.keyframes,dt=ct[at?0:ct.length-1];dt&&(rt[ht]=_(dt.rawValue))}}}},Z.prototype.__changeFinalValue=function(rt,ot){ot=ot||(0,n.keys)(rt);for(var at=0;at<ot.length;at++){var lt=ot[at],ht=this._tracks[lt];if(ht){var vt=ht.keyframes;if(vt.length>1){var ct=vt.pop();ht.addKeyframe(ct.time,rt[lt]),ht.prepare(this._maxTime,ht.getAdditiveTrack())}}}},Z}()},6776:(Ze,te,D)=>{D.d(te,{H:()=>_t});var B=D(6846),St=D(6615),n=/cubic-bezier\(([0-9,\.e ]+)\)/;function _t(mt){var gt=mt&&n.exec(mt);if(gt){var yt=gt[1].split(","),V=+(0,St.trim)(yt[0]),k=+(0,St.trim)(yt[1]),X=+(0,St.trim)(yt[2]),q=+(0,St.trim)(yt[3]);if(isNaN(V+k+X+q))return;var N=[];return function(et){return et<=0?0:et>=1?1:(0,B.kD)(0,V,X,1,et,N)&&(0,B.af)(0,k,q,1,N[0])}}}},663:(Ze,te,D)=>{D.d(te,{Z:()=>n});const n=D(1156).Z.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(_t){return setTimeout(_t,16)}},9022:(Ze,te,D)=>{D.d(te,{a:()=>n});var B=D(6615);function n(_t){var mt=_t.style,gt=mt.lineDash&&mt.lineWidth>0&&function St(_t,mt){return _t&&"solid"!==_t&&mt>0?"dashed"===_t?[4*mt,2*mt]:"dotted"===_t?[mt]:(0,B.isNumber)(_t)?[_t]:(0,B.isArray)(_t)?_t:null:null}(mt.lineDash,mt.lineWidth),yt=mt.lineDashOffset;if(gt){var V=mt.strokeNoScale&&_t.getLineScale?_t.getLineScale():1;V&&1!==V&&(gt=(0,B.map)(gt,function(k){return k/V}),yt/=V)}return[gt,yt]}},4202:(Ze,te,D)=>{D.d(te,{Dm:()=>ht,RV:()=>lt,RZ:()=>j});var B=D(4081),St=D(7034),n=D(5486),_t=D(6430),mt=D(2477),gt=D(8418),yt=D(3008),V=D(6615),k=D(9022),X=D(6195),q=D(800),N=new St.Z(!0);function et(ct){var dt=ct.stroke;return!(null==dt||"none"===dt||!(ct.lineWidth>0))}function $(ct){return"string"==typeof ct&&"none"!==ct}function st(ct){var dt=ct.fill;return null!=dt&&"none"!==dt}function K(ct,dt){if(null!=dt.fillOpacity&&1!==dt.fillOpacity){var Mt=ct.globalAlpha;ct.globalAlpha=dt.fillOpacity*dt.opacity,ct.fill(),ct.globalAlpha=Mt}else ct.fill()}function _(ct,dt){if(null!=dt.strokeOpacity&&1!==dt.strokeOpacity){var Mt=ct.globalAlpha;ct.globalAlpha=dt.strokeOpacity*dt.opacity,ct.stroke(),ct.globalAlpha=Mt}else ct.stroke()}function j(ct,dt,Mt){var Pt=(0,n.Gq)(dt.image,dt.__image,Mt);if((0,n.v5)(Pt)){var wt=ct.createPattern(Pt,dt.repeat||"repeat");if("function"==typeof DOMMatrix&&wt&&wt.setTransform){var Ot=new DOMMatrix;Ot.translateSelf(dt.x||0,dt.y||0),Ot.rotateSelf(0,0,(dt.rotation||0)*V.RADIAN_TO_DEGREE),Ot.scaleSelf(dt.scaleX||1,dt.scaleY||1),wt.setTransform(Ot)}return wt}}var J=["shadowBlur","shadowOffsetX","shadowOffsetY"],Y=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function nt(ct,dt,Mt,Pt,wt){var Ot=!1;if(!Pt&&dt===(Mt=Mt||{}))return!1;if(Pt||dt.opacity!==Mt.opacity){ot(ct,wt),Ot=!0;var Ft=Math.max(Math.min(dt.opacity,1),0);ct.globalAlpha=isNaN(Ft)?B.tj.opacity:Ft}(Pt||dt.blend!==Mt.blend)&&(Ot||(ot(ct,wt),Ot=!0),ct.globalCompositeOperation=dt.blend||B.tj.blend);for(var Ut=0;Ut<J.length;Ut++){var kt=J[Ut];(Pt||dt[kt]!==Mt[kt])&&(Ot||(ot(ct,wt),Ot=!0),ct[kt]=ct.dpr*(dt[kt]||0))}return(Pt||dt.shadowColor!==Mt.shadowColor)&&(Ot||(ot(ct,wt),Ot=!0),ct.shadowColor=dt.shadowColor||B.tj.shadowColor),Ot}function U(ct,dt,Mt,Pt,wt){var Ot=at(dt,wt.inHover),Ft=Pt?null:Mt&&at(Mt,wt.inHover)||{};if(Ot===Ft)return!1;var Ut=nt(ct,Ot,Ft,Pt,wt);if((Pt||Ot.fill!==Ft.fill)&&(Ut||(ot(ct,wt),Ut=!0),$(Ot.fill)&&(ct.fillStyle=Ot.fill)),(Pt||Ot.stroke!==Ft.stroke)&&(Ut||(ot(ct,wt),Ut=!0),$(Ot.stroke)&&(ct.strokeStyle=Ot.stroke)),(Pt||Ot.opacity!==Ft.opacity)&&(Ut||(ot(ct,wt),Ut=!0),ct.globalAlpha=Ot.opacity??1),dt.hasStroke()){var ie=Ot.lineWidth/(Ot.strokeNoScale&&dt.getLineScale?dt.getLineScale():1);ct.lineWidth!==ie&&(Ut||(ot(ct,wt),Ut=!0),ct.lineWidth=ie)}for(var ue=0;ue<Y.length;ue++){var Pe=Y[ue],Se=Pe[0];(Pt||Ot[Se]!==Ft[Se])&&(Ut||(ot(ct,wt),Ut=!0),ct[Se]=Ot[Se]||Pe[1])}return Ut}function C(ct,dt){var Mt=dt.transform,Pt=ct.dpr||1;Mt?ct.setTransform(Pt*Mt[0],Pt*Mt[1],Pt*Mt[2],Pt*Mt[3],Pt*Mt[4],Pt*Mt[5]):ct.setTransform(Pt,0,0,Pt,0,0)}function ot(ct,dt){dt.batchFill&&ct.fill(),dt.batchStroke&&ct.stroke(),dt.batchFill="",dt.batchStroke=""}function at(ct,dt){return dt&&ct.__hoverStyle||ct.style}function lt(ct,dt){ht(ct,dt,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function ht(ct,dt,Mt,Pt){var wt=dt.transform;if(!dt.shouldBePainted(Mt.viewWidth,Mt.viewHeight,!1,!1))return dt.__dirty&=~X.YV,void(dt.__isRendered=!1);var Ot=dt.__clipPaths,Ft=Mt.prevElClipPaths,Ut=!1,kt=!1;if((!Ft||(0,_t.cF)(Ot,Ft))&&(Ft&&Ft.length&&(ot(ct,Mt),ct.restore(),kt=Ut=!0,Mt.prevElClipPaths=null,Mt.allClipped=!1,Mt.prevEl=null),Ot&&Ot.length&&(ot(ct,Mt),ct.save(),function I(ct,dt,Mt){for(var Pt=!1,wt=0;wt<ct.length;wt++){var Ot=ct[wt];Pt=Pt||Ot.isZeroArea(),C(dt,Ot),dt.beginPath(),Ot.buildPath(dt,Ot.shape),dt.clip()}Mt.allClipped=Pt}(Ot,ct,Mt),Ut=!0),Mt.prevElClipPaths=Ot),Mt.allClipped)dt.__isRendered=!1;else{dt.beforeBrush&&dt.beforeBrush(),dt.innerBeforeBrush();var ie=Mt.prevEl;ie||(kt=Ut=!0);var ue=dt instanceof mt.ZP&&dt.autoBatch&&function rt(ct){var dt=st(ct),Mt=et(ct);return!(ct.lineDash||!(+dt^+Mt)||dt&&"string"!=typeof ct.fill||Mt&&"string"!=typeof ct.stroke||ct.strokePercent<1||ct.strokeOpacity<1||ct.fillOpacity<1)}(dt.style);Ut||function P(ct,dt){return ct&&dt?ct[0]!==dt[0]||ct[1]!==dt[1]||ct[2]!==dt[2]||ct[3]!==dt[3]||ct[4]!==dt[4]||ct[5]!==dt[5]:!(!ct&&!dt)}(wt,ie.transform)?(ot(ct,Mt),C(ct,dt)):ue||ot(ct,Mt);var Pe=at(dt,Mt.inHover);dt instanceof mt.ZP?(1!==Mt.lastDrawType&&(kt=!0,Mt.lastDrawType=1),U(ct,dt,ie,kt,Mt),(!ue||!Mt.batchFill&&!Mt.batchStroke)&&ct.beginPath(),function it(ct,dt,Mt,Pt){var wt,Ot=et(Mt),Ft=st(Mt),Ut=Mt.strokePercent,kt=Ut<1,ie=!dt.path;(!dt.silent||kt)&&ie&&dt.createPathProxy();var ue=dt.path||N,Pe=dt.__dirty;if(!Pt){var Se=Mt.fill,De=Mt.stroke,Fe=Ft&&!!Se.colorStops,Ye=Ot&&!!De.colorStops,tr=Ft&&!!Se.image,or=Ot&&!!De.image,Hr=void 0,Rr=void 0,qr=void 0,Vr=void 0,Ve=void 0;(Fe||Ye)&&(Ve=dt.getBoundingRect()),Fe&&(Hr=Pe?(0,_t.ZF)(ct,Se,Ve):dt.__canvasFillGradient,dt.__canvasFillGradient=Hr),Ye&&(Rr=Pe?(0,_t.ZF)(ct,De,Ve):dt.__canvasStrokeGradient,dt.__canvasStrokeGradient=Rr),tr&&(qr=Pe||!dt.__canvasFillPattern?j(ct,Se,dt):dt.__canvasFillPattern,dt.__canvasFillPattern=qr),or&&(Vr=Pe||!dt.__canvasStrokePattern?j(ct,De,dt):dt.__canvasStrokePattern,dt.__canvasStrokePattern=qr),Fe?ct.fillStyle=Hr:tr&&(qr?ct.fillStyle=qr:Ft=!1),Ye?ct.strokeStyle=Rr:or&&(Vr?ct.strokeStyle=Vr:Ot=!1)}var Ar,Lr,er=dt.getGlobalScale();ue.setScale(er[0],er[1],dt.segmentIgnoreThreshold),ct.setLineDash&&Mt.lineDash&&(Ar=(wt=(0,k.a)(dt))[0],Lr=wt[1]);var Cr=!0;(ie||Pe&X.RH)&&(ue.setDPR(ct.dpr),kt?ue.setContext(null):(ue.setContext(ct),Cr=!1),ue.reset(),dt.buildPath(ue,dt.shape,Pt),ue.toStatic(),dt.pathUpdated()),Cr&&ue.rebuildPath(ct,kt?Ut:1),Ar&&(ct.setLineDash(Ar),ct.lineDashOffset=Lr),Pt||(Mt.strokeFirst?(Ot&&_(ct,Mt),Ft&&K(ct,Mt)):(Ft&&K(ct,Mt),Ot&&_(ct,Mt))),Ar&&ct.setLineDash([])}(ct,dt,Pe,ue),ue&&(Mt.batchFill=Pe.fill||"",Mt.batchStroke=Pe.stroke||"")):dt instanceof yt.Z?(3!==Mt.lastDrawType&&(kt=!0,Mt.lastDrawType=3),U(ct,dt,ie,kt,Mt),function tt(ct,dt,Mt){var Pt,wt=Mt.text;if(null!=wt&&(wt+=""),wt){ct.font=Mt.font||q.Uo,ct.textAlign=Mt.textAlign,ct.textBaseline=Mt.textBaseline;var Ot=void 0,Ft=void 0;ct.setLineDash&&Mt.lineDash&&(Ot=(Pt=(0,k.a)(dt))[0],Ft=Pt[1]),Ot&&(ct.setLineDash(Ot),ct.lineDashOffset=Ft),Mt.strokeFirst?(et(Mt)&&ct.strokeText(wt,Mt.x,Mt.y),st(Mt)&&ct.fillText(wt,Mt.x,Mt.y)):(st(Mt)&&ct.fillText(wt,Mt.x,Mt.y),et(Mt)&&ct.strokeText(wt,Mt.x,Mt.y)),Ot&&ct.setLineDash([])}}(ct,dt,Pe)):dt instanceof gt.ZP?(2!==Mt.lastDrawType&&(kt=!0,Mt.lastDrawType=2),function w(ct,dt,Mt,Pt,wt){nt(ct,at(dt,wt.inHover),Mt&&at(Mt,wt.inHover),Pt,wt)}(ct,dt,ie,kt,Mt),function z(ct,dt,Mt){var Pt=dt.__image=(0,n.Gq)(Mt.image,dt.__image,dt,dt.onload);if(Pt&&(0,n.v5)(Pt)){var wt=Mt.x||0,Ot=Mt.y||0,Ft=dt.getWidth(),Ut=dt.getHeight(),kt=Pt.width/Pt.height;if(null==Ft&&null!=Ut?Ft=Ut*kt:null==Ut&&null!=Ft?Ut=Ft/kt:null==Ft&&null==Ut&&(Ft=Pt.width,Ut=Pt.height),Mt.sWidth&&Mt.sHeight)ct.drawImage(Pt,ie=Mt.sx||0,ue=Mt.sy||0,Mt.sWidth,Mt.sHeight,wt,Ot,Ft,Ut);else if(Mt.sx&&Mt.sy){var ie,ue;ct.drawImage(Pt,ie=Mt.sx,ue=Mt.sy,Ft-ie,Ut-ue,wt,Ot,Ft,Ut)}else ct.drawImage(Pt,wt,Ot,Ft,Ut)}}(ct,dt,Pe)):dt.getTemporalDisplayables&&(4!==Mt.lastDrawType&&(kt=!0,Mt.lastDrawType=4),function vt(ct,dt,Mt){var Pt=dt.getDisplayables(),wt=dt.getTemporalDisplayables();ct.save();var Ft,Ut,Ot={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:Mt.viewWidth,viewHeight:Mt.viewHeight,inHover:Mt.inHover};for(Ft=dt.getCursor(),Ut=Pt.length;Ft<Ut;Ft++)(kt=Pt[Ft]).beforeBrush&&kt.beforeBrush(),kt.innerBeforeBrush(),ht(ct,kt,Ot,Ft===Ut-1),kt.innerAfterBrush(),kt.afterBrush&&kt.afterBrush(),Ot.prevEl=kt;for(var ie=0,ue=wt.length;ie<ue;ie++){var kt;(kt=wt[ie]).beforeBrush&&kt.beforeBrush(),kt.innerBeforeBrush(),ht(ct,kt,Ot,ie===ue-1),kt.innerAfterBrush(),kt.afterBrush&&kt.afterBrush(),Ot.prevEl=kt}dt.clearTemporalDisplayables(),dt.notClear=!0,ct.restore()}(ct,dt,Mt)),ue&&Pt&&ot(ct,Mt),dt.innerAfterBrush(),dt.afterBrush&&dt.afterBrush(),Mt.prevEl=dt,dt.__dirty=0,dt.__isRendered=!0}}},6430:(Ze,te,D)=>{function B(V){return isFinite(V)}function _t(V,k,X){for(var q="radial"===k.type?function n(V,k,X){var q=X.width,N=X.height,et=Math.min(q,N),$=k.x??.5,st=k.y??.5,K=k.r??.5;return k.global||($=$*q+X.x,st=st*N+X.y,K*=et),$=B($)?$:.5,st=B(st)?st:.5,K=K>=0&&B(K)?K:.5,V.createRadialGradient($,st,0,$,st,K)}(V,k,X):function St(V,k,X){var q=k.x??0,N=k.x2??1,et=k.y??0,$=k.y2??0;return k.global||(q=q*X.width+X.x,N=N*X.width+X.x,et=et*X.height+X.y,$=$*X.height+X.y),q=B(q)?q:0,N=B(N)?N:1,et=B(et)?et:0,$=B($)?$:0,V.createLinearGradient(q,et,N,$)}(V,k,X),N=k.colorStops,et=0;et<N.length;et++)q.addColorStop(N[et].offset,N[et].color);return q}function mt(V,k){if(V===k||!V&&!k)return!1;if(!V||!k||V.length!==k.length)return!0;for(var X=0;X<V.length;X++)if(V[X]!==k[X])return!0;return!1}function gt(V){return parseInt(V,10)}function yt(V,k,X){var q=["width","height"][k],N=["clientWidth","clientHeight"][k],et=["paddingLeft","paddingTop"][k],$=["paddingRight","paddingBottom"][k];if(null!=X[q]&&"auto"!==X[q])return parseFloat(X[q]);var st=document.defaultView.getComputedStyle(V);return(V[N]||gt(st[q])||gt(V.style[q]))-(gt(st[et])||0)-(gt(st[$])||0)|0}D.d(te,{ZF:()=>_t,ap:()=>yt,cF:()=>mt})},6905:(Ze,te,D)=>{D.d(te,{Ak:()=>mt,GD:()=>yt,KL:()=>_t,iv:()=>V,vU:()=>gt});var St=1;D(1156).Z.hasGlobalWindow&&(St=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var _t=St,mt=.4,gt="#333",yt="#ccc",V="#eee"},31:(Ze,te,D)=>{function B(St,n,_t,mt,gt,yt,V){if(0===gt)return!1;var X,k=gt;if(V>n+k&&V>mt+k||V<n-k&&V<mt-k||yt>St+k&&yt>_t+k||yt<St-k&&yt<_t-k)return!1;if(St===_t)return Math.abs(yt-St)<=k/2;var N=(X=(n-mt)/(St-_t))*yt-V+(St*mt-_t*n)/(St-_t);return N*N/(X*X+1)<=k/2*k/2}D.d(te,{m:()=>B})},1244:(Ze,te,D)=>{D.d(te,{X:()=>_t});var B=D(6567);function n(mt,gt){return Math.abs(mt-gt)<1e-8}function _t(mt,gt,yt){var V=0,k=mt[0];if(!k)return!1;for(var X=1;X<mt.length;X++){var q=mt[X];V+=(0,B.Z)(k[0],k[1],q[0],q[1],gt,yt),k=q}var N=mt[0];return(!n(k[0],N[0])||!n(k[1],N[1]))&&(V+=(0,B.Z)(k[0],k[1],N[0],N[1],gt,yt)),0!==V}},7538:(Ze,te,D)=>{D.d(te,{m:()=>St});var B=D(6846);function St(n,_t,mt,gt,yt,V,k,X,q){if(0===k)return!1;var N=k;return!(q>_t+N&&q>gt+N&&q>V+N||q<_t-N&&q<gt-N&&q<V-N||X>n+N&&X>mt+N&&X>yt+N||X<n-N&&X<mt-N&&X<yt-N)&&(0,B.Wr)(n,_t,mt,gt,yt,V,X,q,null)<=N/2}},585:(Ze,te,D)=>{D.d(te,{Dp:()=>X,GM:()=>N,M3:()=>V,dz:()=>mt,lP:()=>yt,mU:()=>k,wI:()=>et});var B=D(4525),St=D(9286),n=D(800),_t={};function mt($,st){var K=_t[st=st||n.Uo];K||(K=_t[st]=new St.ZP(500));var _=K.get($);return null==_&&(_=n.qW.measureText($,st).width,K.put($,_)),_}function gt($,st,K,_){var j=mt($,st),it=X(st),z=V(0,j,K),tt=k(0,it,_);return new B.Z(z,tt,j,it)}function yt($,st,K,_){var j=(($||"")+"").split("\n");if(1===j.length)return gt(j[0],st,K,_);for(var z=new B.Z(0,0,0,0),tt=0;tt<j.length;tt++){var J=gt(j[tt],st,K,_);0===tt?z.copy(J):z.union(J)}return z}function V($,st,K){return"right"===K?$-=st:"center"===K&&($-=st/2),$}function k($,st,K){return"middle"===K?$-=st/2:"bottom"===K&&($-=st),$}function X($){return mt("\u56fd",$)}function N($,st){return"string"==typeof $?$.lastIndexOf("%")>=0?parseFloat($)/100*st:parseFloat($):$}function et($,st,K){var _=st.position||"inside",j=null!=st.distance?st.distance:5,it=K.height,z=K.width,tt=it/2,J=K.x,Y=K.y,nt="left",U="top";if(_ instanceof Array)J+=N(_[0],K.width),Y+=N(_[1],K.height),nt=null,U=null;else switch(_){case"left":J-=j,Y+=tt,nt="right",U="middle";break;case"right":J+=j+z,Y+=tt,U="middle";break;case"top":J+=z/2,Y-=j,nt="center",U="bottom";break;case"bottom":J+=z/2,Y+=it+j,nt="center";break;case"inside":J+=z/2,Y+=tt,nt="center",U="middle";break;case"insideLeft":J+=j,Y+=tt,U="middle";break;case"insideRight":J+=z-j,Y+=tt,nt="right",U="middle";break;case"insideTop":J+=z/2,Y+=j,nt="center";break;case"insideBottom":J+=z/2,Y+=it-j,nt="center",U="bottom";break;case"insideTopLeft":J+=j,Y+=j;break;case"insideTopRight":J+=z-j,Y+=j,nt="right";break;case"insideBottomLeft":J+=j,Y+=it-j,U="bottom";break;case"insideBottomRight":J+=z-j,Y+=it-j,nt="right",U="bottom"}return($=$||{}).x=J,$.y=Y,$.align=nt,$.verticalAlign=U,$}},4301:(Ze,te,D)=>{D.d(te,{m:()=>St});var B=2*Math.PI;function St(n){return(n%=B)<0&&(n+=B),n}},6567:(Ze,te,D)=>{function B(St,n,_t,mt,gt,yt){if(yt>n&&yt>mt||yt<n&&yt<mt||mt===n)return 0;var V=(yt-n)/(mt-n),k=mt<n?1:-1;(1===V||0===V)&&(k=mt<n?.5:-.5);var X=V*(_t-St)+St;return X===gt?1/0:X>gt?k:0}D.d(te,{Z:()=>B})},4525:(Ze,te,D)=>{D.d(te,{Z:()=>N});var B=D(4498),St=D(9947),n=Math.min,_t=Math.max,mt=new St.Z,gt=new St.Z,yt=new St.Z,V=new St.Z,k=new St.Z,X=new St.Z;const N=function(){function et($,st,K,_){K<0&&($+=K,K=-K),_<0&&(st+=_,_=-_),this.x=$,this.y=st,this.width=K,this.height=_}return et.prototype.union=function($){var st=n($.x,this.x),K=n($.y,this.y);this.width=isFinite(this.x)&&isFinite(this.width)?_t($.x+$.width,this.x+this.width)-st:$.width,this.height=isFinite(this.y)&&isFinite(this.height)?_t($.y+$.height,this.y+this.height)-K:$.height,this.x=st,this.y=K},et.prototype.applyTransform=function($){et.applyTransform(this,this,$)},et.prototype.calculateTransform=function($){var K=$.width/this.width,_=$.height/this.height,j=B.create();return B.translate(j,j,[-this.x,-this.y]),B.scale(j,j,[K,_]),B.translate(j,j,[$.x,$.y]),j},et.prototype.intersect=function($,st){if(!$)return!1;$ instanceof et||($=et.create($));var K=this,_=K.x,j=K.x+K.width,it=K.y,z=K.y+K.height,tt=$.x,J=$.x+$.width,Y=$.y,nt=$.y+$.height,U=!(j<tt||J<_||z<Y||nt<it);if(st){var w=1/0,C=0,I=Math.abs(j-tt),P=Math.abs(J-_),M=Math.abs(z-Y),A=Math.abs(nt-it),R=Math.min(I,P),Z=Math.min(M,A);j<tt||J<_?R>C&&(C=R,St.Z.set(X,I<P?-I:P,0)):R<w&&(w=R,St.Z.set(k,I<P?I:-P,0)),z<Y||nt<it?Z>C&&(C=Z,St.Z.set(X,0,M<A?-M:A)):R<w&&(w=R,St.Z.set(k,0,M<A?M:-A))}return st&&St.Z.copy(st,U?k:X),U},et.prototype.contain=function($,st){var K=this;return $>=K.x&&$<=K.x+K.width&&st>=K.y&&st<=K.y+K.height},et.prototype.clone=function(){return new et(this.x,this.y,this.width,this.height)},et.prototype.copy=function($){et.copy(this,$)},et.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},et.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},et.prototype.isZero=function(){return 0===this.width||0===this.height},et.create=function($){return new et($.x,$.y,$.width,$.height)},et.copy=function($,st){$.x=st.x,$.y=st.y,$.width=st.width,$.height=st.height},et.applyTransform=function($,st,K){if(K){if(K[1]<1e-5&&K[1]>-1e-5&&K[2]<1e-5&&K[2]>-1e-5){var _=K[0],j=K[3],z=K[5];return $.x=st.x*_+K[4],$.y=st.y*j+z,$.width=st.width*_,$.height=st.height*j,$.width<0&&($.x+=$.width,$.width=-$.width),void($.height<0&&($.y+=$.height,$.height=-$.height))}mt.x=yt.x=st.x,mt.y=V.y=st.y,gt.x=V.x=st.x+st.width,gt.y=yt.y=st.y+st.height,mt.transform(K),V.transform(K),gt.transform(K),yt.transform(K),$.x=n(mt.x,gt.x,yt.x,V.x),$.y=n(mt.y,gt.y,yt.y,V.y);var tt=_t(mt.x,gt.x,yt.x,V.x),J=_t(mt.y,gt.y,yt.y,V.y);$.width=tt-$.x,$.height=J-$.y}else $!==st&&et.copy($,st)},et}()},7100:(Ze,te,D)=>{D.d(te,{Z:()=>St});const St=function(){function n(_t){_t&&(this._$eventProcessor=_t)}return n.prototype.on=function(_t,mt,gt,yt){this._$handlers||(this._$handlers={});var V=this._$handlers;if("function"==typeof mt&&(yt=gt,gt=mt,mt=null),!gt||!_t)return this;var k=this._$eventProcessor;null!=mt&&k&&k.normalizeQuery&&(mt=k.normalizeQuery(mt)),V[_t]||(V[_t]=[]);for(var X=0;X<V[_t].length;X++)if(V[_t][X].h===gt)return this;var q={h:gt,query:mt,ctx:yt||this,callAtLast:gt.zrEventfulCallAtLast},N=V[_t].length-1,et=V[_t][N];return et&&et.callAtLast?V[_t].splice(N,0,q):V[_t].push(q),this},n.prototype.isSilent=function(_t){var mt=this._$handlers;return!mt||!mt[_t]||!mt[_t].length},n.prototype.off=function(_t,mt){var gt=this._$handlers;if(!gt)return this;if(!_t)return this._$handlers={},this;if(mt){if(gt[_t]){for(var yt=[],V=0,k=gt[_t].length;V<k;V++)gt[_t][V].h!==mt&&yt.push(gt[_t][V]);gt[_t]=yt}gt[_t]&&0===gt[_t].length&&delete gt[_t]}else delete gt[_t];return this},n.prototype.trigger=function(_t){for(var mt=[],gt=1;gt<arguments.length;gt++)mt[gt-1]=arguments[gt];if(!this._$handlers)return this;var yt=this._$handlers[_t],V=this._$eventProcessor;if(yt)for(var k=mt.length,X=yt.length,q=0;q<X;q++){var N=yt[q];if(!V||!V.filter||null==N.query||V.filter(_t,N.query))switch(k){case 0:N.h.call(N.ctx);break;case 1:N.h.call(N.ctx,mt[0]);break;case 2:N.h.call(N.ctx,mt[0],mt[1]);break;default:N.h.apply(N.ctx,mt)}}return V&&V.afterTrigger&&V.afterTrigger(_t),this},n.prototype.triggerWithContext=function(_t){for(var mt=[],gt=1;gt<arguments.length;gt++)mt[gt-1]=arguments[gt];if(!this._$handlers)return this;var yt=this._$handlers[_t],V=this._$eventProcessor;if(yt)for(var k=mt.length,X=mt[k-1],q=yt.length,N=0;N<q;N++){var et=yt[N];if(!V||!V.filter||null==et.query||V.filter(_t,et.query))switch(k){case 0:et.h.call(X);break;case 1:et.h.call(X,mt[0]);break;case 2:et.h.call(X,mt[0],mt[1]);break;default:et.h.apply(X,mt.slice(1,k-1))}}return V&&V.afterTrigger&&V.afterTrigger(_t),this},n}()},9286:(Ze,te,D)=>{D.d(te,{ZP:()=>_t});var B=function mt(gt){this.value=gt},St=function(){function mt(){this._len=0}return mt.prototype.insert=function(gt){var yt=new B(gt);return this.insertEntry(yt),yt},mt.prototype.insertEntry=function(gt){this.head?(this.tail.next=gt,gt.prev=this.tail,gt.next=null,this.tail=gt):this.head=this.tail=gt,this._len++},mt.prototype.remove=function(gt){var yt=gt.prev,V=gt.next;yt?yt.next=V:this.head=V,V?V.prev=yt:this.tail=yt,gt.next=gt.prev=null,this._len--},mt.prototype.len=function(){return this._len},mt.prototype.clear=function(){this.head=this.tail=null,this._len=0},mt}();const _t=function(){function mt(gt){this._list=new St,this._maxSize=10,this._map={},this._maxSize=gt}return mt.prototype.put=function(gt,yt){var V=this._list,k=this._map,X=null;if(null==k[gt]){var q=V.len(),N=this._lastRemovedEntry;if(q>=this._maxSize&&q>0){var et=V.head;V.remove(et),delete k[et.key],X=et.value,this._lastRemovedEntry=et}N?N.value=yt:N=new B(yt),N.key=gt,V.insertEntry(N),k[gt]=N}return X},mt.prototype.get=function(gt){var yt=this._map[gt],V=this._list;if(null!=yt)return yt!==V.tail&&(V.remove(yt),V.insertEntry(yt)),yt.value},mt.prototype.clear=function(){this._list.clear(),this._map={}},mt.prototype.len=function(){return this._list.len()},mt}()},9726:(Ze,te,D)=>{D.d(te,{Z:()=>yt});var B=D(9947),St=[0,0],n=[0,0],_t=new B.Z,mt=new B.Z;const yt=function(){function V(k,X){this._corners=[],this._axes=[],this._origin=[0,0];for(var q=0;q<4;q++)this._corners[q]=new B.Z;for(q=0;q<2;q++)this._axes[q]=new B.Z;k&&this.fromBoundingRect(k,X)}return V.prototype.fromBoundingRect=function(k,X){var q=this._corners,N=this._axes,et=k.x,$=k.y,st=et+k.width,K=$+k.height;if(q[0].set(et,$),q[1].set(st,$),q[2].set(st,K),q[3].set(et,K),X)for(var _=0;_<4;_++)q[_].transform(X);for(B.Z.sub(N[0],q[1],q[0]),B.Z.sub(N[1],q[3],q[0]),N[0].normalize(),N[1].normalize(),_=0;_<2;_++)this._origin[_]=N[_].dot(q[0])},V.prototype.intersect=function(k,X){var q=!0,N=!X;return _t.set(1/0,1/0),mt.set(0,0),!this._intersectCheckOneSide(this,k,_t,mt,N,1)&&(q=!1,N)||!this._intersectCheckOneSide(k,this,_t,mt,N,-1)&&(q=!1,N)||N||B.Z.copy(X,q?_t:mt),q},V.prototype._intersectCheckOneSide=function(k,X,q,N,et,$){for(var st=!0,K=0;K<2;K++){var _=this._axes[K];if(this._getProjMinMaxOnAxis(K,k._corners,St),this._getProjMinMaxOnAxis(K,X._corners,n),St[1]<n[0]||St[0]>n[1]){if(st=!1,et)return st;var j=Math.abs(n[0]-St[1]),it=Math.abs(St[0]-n[1]);Math.min(j,it)>N.len()&&B.Z.scale(N,_,j<it?-j*$:it*$)}else q&&(j=Math.abs(n[0]-St[1]),it=Math.abs(St[0]-n[1]),Math.min(j,it)<q.len()&&B.Z.scale(q,_,j<it?j*$:-it*$))}return st},V.prototype._getProjMinMaxOnAxis=function(k,X,q){for(var N=this._axes[k],et=this._origin,$=X[0].dot(N)+et[k],st=$,K=$,_=1;_<X.length;_++){var j=X[_].dot(N)+et[k];st=Math.min(j,st),K=Math.max(j,K)}q[0]=st,q[1]=K},V}()},7034:(Ze,te,D)=>{D.d(te,{L:()=>Y,Z:()=>U});var B=D(8544),St=D(4525),n=D(6905),_t=D(3020),mt=D(6846),gt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},yt=[],V=[],k=[],X=[],q=[],N=[],et=Math.min,$=Math.max,st=Math.cos,K=Math.sin,_=Math.abs,j=Math.PI,it=2*j,z=typeof Float32Array<"u",tt=[];function J(w){return Math.round(w/j*1e8)/1e8%2*j}function Y(w,C){var I=J(w[0]);I<0&&(I+=it);var M=w[1];M+=I-w[0],!C&&M-I>=it?M=I+it:C&&I-M>=it?M=I-it:!C&&I>M?M=I+(it-J(I-M)):C&&I<M&&(M=I-(it-J(M-I))),w[0]=I,w[1]=M}const U=function(){function w(C){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,C&&(this._saveData=!1),this._saveData&&(this.data=[])}return w.prototype.increaseVersion=function(){this._version++},w.prototype.getVersion=function(){return this._version},w.prototype.setScale=function(C,I,P){(P=P||0)>0&&(this._ux=_(P/n.KL/C)||0,this._uy=_(P/n.KL/I)||0)},w.prototype.setDPR=function(C){this.dpr=C},w.prototype.setContext=function(C){this._ctx=C},w.prototype.getContext=function(){return this._ctx},w.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},w.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},w.prototype.moveTo=function(C,I){return this._drawPendingPt(),this.addData(gt.M,C,I),this._ctx&&this._ctx.moveTo(C,I),this._x0=C,this._y0=I,this._xi=C,this._yi=I,this},w.prototype.lineTo=function(C,I){var P=_(C-this._xi),M=_(I-this._yi),A=P>this._ux||M>this._uy;if(this.addData(gt.L,C,I),this._ctx&&A&&this._ctx.lineTo(C,I),A)this._xi=C,this._yi=I,this._pendingPtDist=0;else{var R=P*P+M*M;R>this._pendingPtDist&&(this._pendingPtX=C,this._pendingPtY=I,this._pendingPtDist=R)}return this},w.prototype.bezierCurveTo=function(C,I,P,M,A,R){return this._drawPendingPt(),this.addData(gt.C,C,I,P,M,A,R),this._ctx&&this._ctx.bezierCurveTo(C,I,P,M,A,R),this._xi=A,this._yi=R,this},w.prototype.quadraticCurveTo=function(C,I,P,M){return this._drawPendingPt(),this.addData(gt.Q,C,I,P,M),this._ctx&&this._ctx.quadraticCurveTo(C,I,P,M),this._xi=P,this._yi=M,this},w.prototype.arc=function(C,I,P,M,A,R){return this._drawPendingPt(),tt[0]=M,tt[1]=A,Y(tt,R),this.addData(gt.A,C,I,P,P,M=tt[0],(A=tt[1])-M,0,R?0:1),this._ctx&&this._ctx.arc(C,I,P,M,A,R),this._xi=st(A)*P+C,this._yi=K(A)*P+I,this},w.prototype.arcTo=function(C,I,P,M,A){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(C,I,P,M,A),this},w.prototype.rect=function(C,I,P,M){return this._drawPendingPt(),this._ctx&&this._ctx.rect(C,I,P,M),this.addData(gt.R,C,I,P,M),this},w.prototype.closePath=function(){this._drawPendingPt(),this.addData(gt.Z);var C=this._ctx,I=this._x0,P=this._y0;return C&&C.closePath(),this._xi=I,this._yi=P,this},w.prototype.fill=function(C){C&&C.fill(),this.toStatic()},w.prototype.stroke=function(C){C&&C.stroke(),this.toStatic()},w.prototype.len=function(){return this._len},w.prototype.setData=function(C){var I=C.length;(!this.data||this.data.length!==I)&&z&&(this.data=new Float32Array(I));for(var P=0;P<I;P++)this.data[P]=C[P];this._len=I},w.prototype.appendPath=function(C){C instanceof Array||(C=[C]);for(var I=C.length,P=0,M=this._len,A=0;A<I;A++)P+=C[A].len();for(z&&this.data instanceof Float32Array&&(this.data=new Float32Array(M+P)),A=0;A<I;A++)for(var R=C[A].data,Z=0;Z<R.length;Z++)this.data[M++]=R[Z];this._len=M},w.prototype.addData=function(C,I,P,M,A,R,Z,rt,ot){if(this._saveData){var at=this.data;this._len+arguments.length>at.length&&(this._expandData(),at=this.data);for(var lt=0;lt<arguments.length;lt++)at[this._len++]=arguments[lt]}},w.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},w.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var C=[],I=0;I<this._len;I++)C[I]=this.data[I];this.data=C}},w.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var C=this.data;C instanceof Array&&(C.length=this._len,z&&this._len>11&&(this.data=new Float32Array(C)))}},w.prototype.getBoundingRect=function(){k[0]=k[1]=q[0]=q[1]=Number.MAX_VALUE,X[0]=X[1]=N[0]=N[1]=-Number.MAX_VALUE;var R,C=this.data,I=0,P=0,M=0,A=0;for(R=0;R<this._len;){var Z=C[R++],rt=1===R;switch(rt&&(M=I=C[R],A=P=C[R+1]),Z){case gt.M:I=M=C[R++],P=A=C[R++],q[0]=M,q[1]=A,N[0]=M,N[1]=A;break;case gt.L:(0,_t.u4)(I,P,C[R],C[R+1],q,N),I=C[R++],P=C[R++];break;case gt.C:(0,_t.H9)(I,P,C[R++],C[R++],C[R++],C[R++],C[R],C[R+1],q,N),I=C[R++],P=C[R++];break;case gt.Q:(0,_t.mJ)(I,P,C[R++],C[R++],C[R],C[R+1],q,N),I=C[R++],P=C[R++];break;case gt.A:var ot=C[R++],at=C[R++],lt=C[R++],ht=C[R++],vt=C[R++],ct=C[R++]+vt;R+=1;var dt=!C[R++];rt&&(M=st(vt)*lt+ot,A=K(vt)*ht+at),(0,_t.qL)(ot,at,lt,ht,vt,ct,dt,q,N),I=st(ct)*lt+ot,P=K(ct)*ht+at;break;case gt.R:M=I=C[R++],A=P=C[R++];var Mt=C[R++],Pt=C[R++];(0,_t.u4)(M,A,M+Mt,A+Pt,q,N);break;case gt.Z:I=M,P=A}B.min(k,k,q),B.max(X,X,N)}return 0===R&&(k[0]=k[1]=X[0]=X[1]=0),new St.Z(k[0],k[1],X[0]-k[0],X[1]-k[1])},w.prototype._calculateLength=function(){var C=this.data,I=this._len,P=this._ux,M=this._uy,A=0,R=0,Z=0,rt=0;this._pathSegLen||(this._pathSegLen=[]);for(var ot=this._pathSegLen,at=0,lt=0,ht=0;ht<I;){var vt=C[ht++],ct=1===ht;ct&&(Z=A=C[ht],rt=R=C[ht+1]);var dt=-1;switch(vt){case gt.M:A=Z=C[ht++],R=rt=C[ht++];break;case gt.L:var Mt=C[ht++],Ot=(Pt=C[ht++])-R;(_(wt=Mt-A)>P||_(Ot)>M||ht===I-1)&&(dt=Math.sqrt(wt*wt+Ot*Ot),A=Mt,R=Pt);break;case gt.C:var Ft=C[ht++],Ut=C[ht++],Pt=(Mt=C[ht++],C[ht++]),kt=C[ht++],ie=C[ht++];dt=(0,mt.Ci)(A,R,Ft,Ut,Mt,Pt,kt,ie,10),A=kt,R=ie;break;case gt.Q:Ft=C[ht++],Ut=C[ht++],Mt=C[ht++],Pt=C[ht++],dt=(0,mt.wQ)(A,R,Ft,Ut,Mt,Pt,10),A=Mt,R=Pt;break;case gt.A:var ue=C[ht++],Pe=C[ht++],Se=C[ht++],De=C[ht++],Fe=C[ht++],Ye=C[ht++],tr=Ye+Fe;ht+=1,ht++,ct&&(Z=st(Fe)*Se+ue,rt=K(Fe)*De+Pe),dt=$(Se,De)*et(it,Math.abs(Ye)),A=st(tr)*Se+ue,R=K(tr)*De+Pe;break;case gt.R:Z=A=C[ht++],rt=R=C[ht++],dt=2*C[ht++]+2*C[ht++];break;case gt.Z:var wt=Z-A;Ot=rt-R,dt=Math.sqrt(wt*wt+Ot*Ot),A=Z,R=rt}dt>=0&&(ot[lt++]=dt,at+=dt)}return this._pathLen=at,at},w.prototype.rebuildPath=function(C,I){var Z,rt,ot,at,lt,ht,ct,wt,Ft,Ut,P=this.data,M=this._ux,A=this._uy,R=this._len,vt=I<1,Mt=0,Pt=0,Ot=0;if(!vt||(this._pathSegLen||this._calculateLength(),ct=this._pathSegLen,wt=I*this._pathLen))t:for(var kt=0;kt<R;){var ie=P[kt++],ue=1===kt;switch(ue&&(Z=ot=P[kt],rt=at=P[kt+1]),ie!==gt.L&&Ot>0&&(C.lineTo(Ft,Ut),Ot=0),ie){case gt.M:Z=ot=P[kt++],rt=at=P[kt++],C.moveTo(ot,at);break;case gt.L:lt=P[kt++],ht=P[kt++];var Pe=_(lt-ot),Se=_(ht-at);if(Pe>M||Se>A){if(vt){if(Mt+(De=ct[Pt++])>wt){C.lineTo(ot*(1-(Fe=(wt-Mt)/De))+lt*Fe,at*(1-Fe)+ht*Fe);break t}Mt+=De}C.lineTo(lt,ht),ot=lt,at=ht,Ot=0}else{var Ye=Pe*Pe+Se*Se;Ye>Ot&&(Ft=lt,Ut=ht,Ot=Ye)}break;case gt.C:var tr=P[kt++],or=P[kt++],Hr=P[kt++],Rr=P[kt++],qr=P[kt++],Vr=P[kt++];if(vt){if(Mt+(De=ct[Pt++])>wt){(0,mt.Vz)(ot,tr,Hr,qr,Fe=(wt-Mt)/De,yt),(0,mt.Vz)(at,or,Rr,Vr,Fe,V),C.bezierCurveTo(yt[1],V[1],yt[2],V[2],yt[3],V[3]);break t}Mt+=De}C.bezierCurveTo(tr,or,Hr,Rr,qr,Vr),ot=qr,at=Vr;break;case gt.Q:if(tr=P[kt++],or=P[kt++],Hr=P[kt++],Rr=P[kt++],vt){if(Mt+(De=ct[Pt++])>wt){(0,mt.Lx)(ot,tr,Hr,Fe=(wt-Mt)/De,yt),(0,mt.Lx)(at,or,Rr,Fe,V),C.quadraticCurveTo(yt[1],V[1],yt[2],V[2]);break t}Mt+=De}C.quadraticCurveTo(tr,or,Hr,Rr),ot=Hr,at=Rr;break;case gt.A:var Ve=P[kt++],er=P[kt++],Ar=P[kt++],Lr=P[kt++],Cr=P[kt++],Zr=P[kt++],Nr=P[kt++],re=!P[kt++],pe=Ar>Lr?Ar:Lr,we=_(Ar-Lr)>.001,Le=Cr+Zr,Kt=!1;if(vt&&(Mt+(De=ct[Pt++])>wt&&(Le=Cr+Zr*(wt-Mt)/De,Kt=!0),Mt+=De),we&&C.ellipse?C.ellipse(Ve,er,Ar,Lr,Nr,Cr,Le,re):C.arc(Ve,er,pe,Cr,Le,re),Kt)break t;ue&&(Z=st(Cr)*Ar+Ve,rt=K(Cr)*Lr+er),ot=st(Le)*Ar+Ve,at=K(Le)*Lr+er;break;case gt.R:Z=ot=P[kt],rt=at=P[kt+1],lt=P[kt++],ht=P[kt++];var ne=P[kt++],le=P[kt++];if(vt){if(Mt+(De=ct[Pt++])>wt){var Xt=wt-Mt;C.moveTo(lt,ht),C.lineTo(lt+et(Xt,ne),ht),(Xt-=ne)>0&&C.lineTo(lt+ne,ht+et(Xt,le)),(Xt-=le)>0&&C.lineTo(lt+$(ne-Xt,0),ht+le),(Xt-=ne)>0&&C.lineTo(lt,ht+$(le-Xt,0));break t}Mt+=De}C.rect(lt,ht,ne,le);break;case gt.Z:if(vt){var De;if(Mt+(De=ct[Pt++])>wt){var Fe;C.lineTo(ot*(1-(Fe=(wt-Mt)/De))+Z*Fe,at*(1-Fe)+rt*Fe);break t}Mt+=De}C.closePath(),ot=Z,at=rt}}},w.prototype.clone=function(){var C=new w,I=this.data;return C.data=I.slice?I.slice():Array.prototype.slice.call(I),C._len=this._len,C},w.CMD=gt,w.initDefaultProps=((C=w.prototype)._saveData=!0,C._ux=0,C._uy=0,C._pendingPtDist=0,void(C._version=0)),w;var C}()},9947:(Ze,te,D)=>{D.d(te,{Z:()=>St});const St=function(){function n(_t,mt){this.x=_t||0,this.y=mt||0}return n.prototype.copy=function(_t){return this.x=_t.x,this.y=_t.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(_t,mt){return this.x=_t,this.y=mt,this},n.prototype.equal=function(_t){return _t.x===this.x&&_t.y===this.y},n.prototype.add=function(_t){return this.x+=_t.x,this.y+=_t.y,this},n.prototype.scale=function(_t){this.x*=_t,this.y*=_t},n.prototype.scaleAndAdd=function(_t,mt){this.x+=_t.x*mt,this.y+=_t.y*mt},n.prototype.sub=function(_t){return this.x-=_t.x,this.y-=_t.y,this},n.prototype.dot=function(_t){return this.x*_t.x+this.y*_t.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var _t=this.len();return this.x/=_t,this.y/=_t,this},n.prototype.distance=function(_t){var mt=this.x-_t.x,gt=this.y-_t.y;return Math.sqrt(mt*mt+gt*gt)},n.prototype.distanceSquare=function(_t){var mt=this.x-_t.x,gt=this.y-_t.y;return mt*mt+gt*gt},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(_t){if(_t){var mt=this.x,gt=this.y;return this.x=_t[0]*mt+_t[2]*gt+_t[4],this.y=_t[1]*mt+_t[3]*gt+_t[5],this}},n.prototype.toArray=function(_t){return _t[0]=this.x,_t[1]=this.y,_t},n.prototype.fromArray=function(_t){this.x=_t[0],this.y=_t[1]},n.set=function(_t,mt,gt){_t.x=mt,_t.y=gt},n.copy=function(_t,mt){_t.x=mt.x,_t.y=mt.y},n.len=function(_t){return Math.sqrt(_t.x*_t.x+_t.y*_t.y)},n.lenSquare=function(_t){return _t.x*_t.x+_t.y*_t.y},n.dot=function(_t,mt){return _t.x*mt.x+_t.y*mt.y},n.add=function(_t,mt,gt){_t.x=mt.x+gt.x,_t.y=mt.y+gt.y},n.sub=function(_t,mt,gt){_t.x=mt.x-gt.x,_t.y=mt.y-gt.y},n.scale=function(_t,mt,gt){_t.x=mt.x*gt,_t.y=mt.y*gt},n.scaleAndAdd=function(_t,mt,gt,yt){_t.x=mt.x+gt.x*yt,_t.y=mt.y+gt.y*yt},n.lerp=function(_t,mt,gt,yt){var V=1-yt;_t.x=V*mt.x+yt*gt.x,_t.y=V*mt.y+yt*gt.y},n}()},5028:(Ze,te,D)=>{D.d(te,{ZP:()=>et,dN:()=>q,kY:()=>N});var B=D(4498),St=D(8544),n=B.identity;function mt($){return $>5e-5||$<-5e-5}var gt=[],yt=[],V=B.create(),k=Math.abs,X=function(){function $(){}return $.prototype.getLocalTransform=function(st){return $.getLocalTransform(this,st)},$.prototype.setPosition=function(st){this.x=st[0],this.y=st[1]},$.prototype.setScale=function(st){this.scaleX=st[0],this.scaleY=st[1]},$.prototype.setSkew=function(st){this.skewX=st[0],this.skewY=st[1]},$.prototype.setOrigin=function(st){this.originX=st[0],this.originY=st[1]},$.prototype.needLocalTransform=function(){return mt(this.rotation)||mt(this.x)||mt(this.y)||mt(this.scaleX-1)||mt(this.scaleY-1)||mt(this.skewX)||mt(this.skewY)},$.prototype.updateTransform=function(){var st=this.parent&&this.parent.transform,K=this.needLocalTransform(),_=this.transform;K||st?(_=_||B.create(),K?this.getLocalTransform(_):n(_),st&&(K?B.mul(_,st,_):B.copy(_,st)),this.transform=_,this._resolveGlobalScaleRatio(_)):_&&n(_)},$.prototype._resolveGlobalScaleRatio=function(st){var K=this.globalScaleRatio;if(null!=K&&1!==K){this.getGlobalScale(gt);var _=gt[0]<0?-1:1,j=gt[1]<0?-1:1,it=((gt[0]-_)*K+_)/gt[0]||0,z=((gt[1]-j)*K+j)/gt[1]||0;st[0]*=it,st[1]*=it,st[2]*=z,st[3]*=z}this.invTransform=this.invTransform||B.create(),B.invert(this.invTransform,st)},$.prototype.getComputedTransform=function(){for(var st=this,K=[];st;)K.push(st),st=st.parent;for(;st=K.pop();)st.updateTransform();return this.transform},$.prototype.setLocalTransform=function(st){if(st){var K=st[0]*st[0]+st[1]*st[1],_=st[2]*st[2]+st[3]*st[3],j=Math.atan2(st[1],st[0]),it=Math.PI/2+j-Math.atan2(st[3],st[2]);_=Math.sqrt(_)*Math.cos(it),K=Math.sqrt(K),this.skewX=it,this.skewY=0,this.rotation=-j,this.x=+st[4],this.y=+st[5],this.scaleX=K,this.scaleY=_,this.originX=0,this.originY=0}},$.prototype.decomposeTransform=function(){if(this.transform){var st=this.parent,K=this.transform;st&&st.transform&&(B.mul(yt,st.invTransform,K),K=yt);var _=this.originX,j=this.originY;(_||j)&&(V[4]=_,V[5]=j,B.mul(yt,K,V),yt[4]-=_,yt[5]-=j,K=yt),this.setLocalTransform(K)}},$.prototype.getGlobalScale=function(st){var K=this.transform;return st=st||[],K?(st[0]=Math.sqrt(K[0]*K[0]+K[1]*K[1]),st[1]=Math.sqrt(K[2]*K[2]+K[3]*K[3]),K[0]<0&&(st[0]=-st[0]),K[3]<0&&(st[1]=-st[1]),st):(st[0]=1,st[1]=1,st)},$.prototype.transformCoordToLocal=function(st,K){var _=[st,K],j=this.invTransform;return j&&St.applyTransform(_,_,j),_},$.prototype.transformCoordToGlobal=function(st,K){var _=[st,K],j=this.transform;return j&&St.applyTransform(_,_,j),_},$.prototype.getLineScale=function(){var st=this.transform;return st&&k(st[0]-1)>1e-10&&k(st[3]-1)>1e-10?Math.sqrt(k(st[0]*st[3]-st[2]*st[1])):1},$.prototype.copyTransform=function(st){N(this,st)},$.getLocalTransform=function(st,K){K=K||[];var _=st.originX||0,j=st.originY||0,it=st.scaleX,z=st.scaleY,tt=st.anchorX,J=st.anchorY,Y=st.rotation||0,nt=st.x,U=st.y,w=st.skewX?Math.tan(st.skewX):0,C=st.skewY?Math.tan(-st.skewY):0;if(_||j||tt||J){var I=_+tt,P=j+J;K[4]=-I*it-w*P*z,K[5]=-P*z-C*I*it}else K[4]=K[5]=0;return K[0]=it,K[3]=z,K[1]=C*it,K[2]=w*z,Y&&B.rotate(K,K,Y),K[4]+=_+nt,K[5]+=j+U,K},$.initDefaultProps=((st=$.prototype).scaleX=st.scaleY=st.globalScaleRatio=1,void(st.x=st.y=st.originX=st.originY=st.skewX=st.skewY=st.rotation=st.anchorX=st.anchorY=0)),$;var st}(),q=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function N($,st){for(var K=0;K<q.length;K++){var _=q[K];$[_]=st[_]}}const et=X},3020:(Ze,te,D)=>{D.d(te,{H9:()=>st,mJ:()=>K,qL:()=>_,u4:()=>N,zk:()=>q});var B=D(8544),St=D(6846),n=Math.min,_t=Math.max,mt=Math.sin,gt=Math.cos,yt=2*Math.PI,V=B.create(),k=B.create(),X=B.create();function q(j,it,z){if(0!==j.length){for(var tt=j[0],J=tt[0],Y=tt[0],nt=tt[1],U=tt[1],w=1;w<j.length;w++)J=n(J,(tt=j[w])[0]),Y=_t(Y,tt[0]),nt=n(nt,tt[1]),U=_t(U,tt[1]);it[0]=J,it[1]=nt,z[0]=Y,z[1]=U}}function N(j,it,z,tt,J,Y){J[0]=n(j,z),J[1]=n(it,tt),Y[0]=_t(j,z),Y[1]=_t(it,tt)}var et=[],$=[];function st(j,it,z,tt,J,Y,nt,U,w,C){var I=St.pP,P=St.af,M=I(j,z,J,nt,et);w[0]=1/0,w[1]=1/0,C[0]=-1/0,C[1]=-1/0;for(var A=0;A<M;A++){var R=P(j,z,J,nt,et[A]);w[0]=n(R,w[0]),C[0]=_t(R,C[0])}for(M=I(it,tt,Y,U,$),A=0;A<M;A++){var Z=P(it,tt,Y,U,$[A]);w[1]=n(Z,w[1]),C[1]=_t(Z,C[1])}w[0]=n(j,w[0]),C[0]=_t(j,C[0]),w[0]=n(nt,w[0]),C[0]=_t(nt,C[0]),w[1]=n(it,w[1]),C[1]=_t(it,C[1]),w[1]=n(U,w[1]),C[1]=_t(U,C[1])}function K(j,it,z,tt,J,Y,nt,U){var w=St.QC,C=St.Zm,I=_t(n(w(j,z,J),1),0),P=_t(n(w(it,tt,Y),1),0),M=C(j,z,J,I),A=C(it,tt,Y,P);nt[0]=n(j,J,M),nt[1]=n(it,Y,A),U[0]=_t(j,J,M),U[1]=_t(it,Y,A)}function _(j,it,z,tt,J,Y,nt,U,w){var C=B.min,I=B.max,P=Math.abs(J-Y);if(P%yt<1e-4&&P>1e-4)return U[0]=j-z,U[1]=it-tt,w[0]=j+z,void(w[1]=it+tt);if(V[0]=gt(J)*z+j,V[1]=mt(J)*tt+it,k[0]=gt(Y)*z+j,k[1]=mt(Y)*tt+it,C(U,V,k),I(w,V,k),(J%=yt)<0&&(J+=yt),(Y%=yt)<0&&(Y+=yt),J>Y&&!nt?Y+=yt:J<Y&&nt&&(J+=yt),nt){var M=Y;Y=J,J=M}for(var A=0;A<Y;A+=Math.PI/2)A>J&&(X[0]=gt(A)*z+j,X[1]=mt(A)*tt+it,C(U,X,U),I(w,X,w))}},6846:(Ze,te,D)=>{D.d(te,{AZ:()=>tt,Ci:()=>it,Jz:()=>J,Lx:()=>nt,QC:()=>Y,Vz:()=>_,Wr:()=>U,X_:()=>$,Zm:()=>z,af:()=>et,kD:()=>st,pP:()=>K,t1:()=>j,wQ:()=>w});var B=D(8544),St=Math.pow,n=Math.sqrt,gt=n(3),yt=1/3,V=(0,B.create)(),k=(0,B.create)(),X=(0,B.create)();function q(C){return C>-1e-8&&C<1e-8}function N(C){return C>1e-8||C<-1e-8}function et(C,I,P,M,A){var R=1-A;return R*R*(R*C+3*A*I)+A*A*(A*M+3*R*P)}function $(C,I,P,M,A){var R=1-A;return 3*(((I-C)*R+2*(P-I)*A)*R+(M-P)*A*A)}function st(C,I,P,M,A,R){var Z=M+3*(I-P)-C,rt=3*(P-2*I+C),ot=3*(I-C),at=C-A,lt=rt*rt-3*Z*ot,ht=rt*ot-9*Z*at,vt=ot*ot-3*rt*at,ct=0;if(q(lt)&&q(ht))q(rt)?R[0]=0:(dt=-ot/rt)>=0&&dt<=1&&(R[ct++]=dt);else{var Mt=ht*ht-4*lt*vt;if(q(Mt)){var Pt=ht/lt,wt=-Pt/2;(dt=-rt/Z+Pt)>=0&&dt<=1&&(R[ct++]=dt),wt>=0&&wt<=1&&(R[ct++]=wt)}else if(Mt>0){var Ot=n(Mt),Ft=lt*rt+1.5*Z*(-ht+Ot),Ut=lt*rt+1.5*Z*(-ht-Ot);(dt=(-rt-((Ft=Ft<0?-St(-Ft,yt):St(Ft,yt))+(Ut=Ut<0?-St(-Ut,yt):St(Ut,yt))))/(3*Z))>=0&&dt<=1&&(R[ct++]=dt)}else{var kt=(2*lt*rt-3*Z*ht)/(2*n(lt*lt*lt)),ie=Math.acos(kt)/3,ue=n(lt),Pe=Math.cos(ie),dt=(-rt-2*ue*Pe)/(3*Z),Se=(wt=(-rt+ue*(Pe+gt*Math.sin(ie)))/(3*Z),(-rt+ue*(Pe-gt*Math.sin(ie)))/(3*Z));dt>=0&&dt<=1&&(R[ct++]=dt),wt>=0&&wt<=1&&(R[ct++]=wt),Se>=0&&Se<=1&&(R[ct++]=Se)}}return ct}function K(C,I,P,M,A){var R=6*P-12*I+6*C,Z=9*I+3*M-3*C-9*P,rt=3*I-3*C,ot=0;if(q(Z))N(R)&&(at=-rt/R)>=0&&at<=1&&(A[ot++]=at);else{var lt=R*R-4*Z*rt;if(q(lt))A[0]=-R/(2*Z);else if(lt>0){var at,ht=n(lt),vt=(-R-ht)/(2*Z);(at=(-R+ht)/(2*Z))>=0&&at<=1&&(A[ot++]=at),vt>=0&&vt<=1&&(A[ot++]=vt)}}return ot}function _(C,I,P,M,A,R){var Z=(I-C)*A+C,rt=(P-I)*A+I,ot=(M-P)*A+P,at=(rt-Z)*A+Z,lt=(ot-rt)*A+rt,ht=(lt-at)*A+at;R[0]=C,R[1]=Z,R[2]=at,R[3]=ht,R[4]=ht,R[5]=lt,R[6]=ot,R[7]=M}function j(C,I,P,M,A,R,Z,rt,ot,at,lt){var ht,dt,Mt,Pt,wt,vt=.005,ct=1/0;V[0]=ot,V[1]=at;for(var Ot=0;Ot<1;Ot+=.05)k[0]=et(C,P,A,Z,Ot),k[1]=et(I,M,R,rt,Ot),(Pt=(0,B.distSquare)(V,k))<ct&&(ht=Ot,ct=Pt);ct=1/0;for(var Ft=0;Ft<32&&!(vt<1e-4);Ft++)Mt=ht+vt,k[0]=et(C,P,A,Z,dt=ht-vt),k[1]=et(I,M,R,rt,dt),Pt=(0,B.distSquare)(k,V),dt>=0&&Pt<ct?(ht=dt,ct=Pt):(X[0]=et(C,P,A,Z,Mt),X[1]=et(I,M,R,rt,Mt),wt=(0,B.distSquare)(X,V),Mt<=1&&wt<ct?(ht=Mt,ct=wt):vt*=.5);return lt&&(lt[0]=et(C,P,A,Z,ht),lt[1]=et(I,M,R,rt,ht)),n(ct)}function it(C,I,P,M,A,R,Z,rt,ot){for(var at=C,lt=I,ht=0,vt=1/ot,ct=1;ct<=ot;ct++){var dt=ct*vt,Mt=et(C,P,A,Z,dt),Pt=et(I,M,R,rt,dt),wt=Mt-at,Ot=Pt-lt;ht+=Math.sqrt(wt*wt+Ot*Ot),at=Mt,lt=Pt}return ht}function z(C,I,P,M){var A=1-M;return A*(A*C+2*M*I)+M*M*P}function tt(C,I,P,M){return 2*((1-M)*(I-C)+M*(P-I))}function J(C,I,P,M,A){var R=C-2*I+P,Z=2*(I-C),rt=C-M,ot=0;if(q(R))N(Z)&&(at=-rt/Z)>=0&&at<=1&&(A[ot++]=at);else{var lt=Z*Z-4*R*rt;if(q(lt))(at=-Z/(2*R))>=0&&at<=1&&(A[ot++]=at);else if(lt>0){var at,ht=n(lt),vt=(-Z-ht)/(2*R);(at=(-Z+ht)/(2*R))>=0&&at<=1&&(A[ot++]=at),vt>=0&&vt<=1&&(A[ot++]=vt)}}return ot}function Y(C,I,P){var M=C+P-2*I;return 0===M?.5:(C-I)/M}function nt(C,I,P,M,A){var R=(I-C)*M+C,Z=(P-I)*M+I,rt=(Z-R)*M+R;A[0]=C,A[1]=R,A[2]=rt,A[3]=rt,A[4]=Z,A[5]=P}function U(C,I,P,M,A,R,Z,rt,ot){var at,lt=.005,ht=1/0;V[0]=Z,V[1]=rt;for(var vt=0;vt<1;vt+=.05)k[0]=z(C,P,A,vt),k[1]=z(I,M,R,vt),(ct=(0,B.distSquare)(V,k))<ht&&(at=vt,ht=ct);ht=1/0;for(var dt=0;dt<32&&!(lt<1e-4);dt++){var Mt=at-lt,Pt=at+lt;k[0]=z(C,P,A,Mt),k[1]=z(I,M,R,Mt);var ct=(0,B.distSquare)(k,V);if(Mt>=0&&ct<ht)at=Mt,ht=ct;else{X[0]=z(C,P,A,Pt),X[1]=z(I,M,R,Pt);var wt=(0,B.distSquare)(X,V);Pt<=1&&wt<ht?(at=Pt,ht=wt):lt*=.5}}return ot&&(ot[0]=z(C,P,A,at),ot[1]=z(I,M,R,at)),n(ht)}function w(C,I,P,M,A,R,Z){for(var rt=C,ot=I,at=0,lt=1/Z,ht=1;ht<=Z;ht++){var vt=ht*lt,ct=z(C,P,A,vt),dt=z(I,M,R,vt),Mt=ct-rt,Pt=dt-ot;at+=Math.sqrt(Mt*Mt+Pt*Pt),rt=ct,ot=dt}return at}},5917:(Ze,te,D)=>{D.d(te,{F1:()=>$,UK:()=>q,A4:()=>V,YB:()=>yt});var B=D(1156),St=Math.log(2);function n(st,K,_,j,it,z){var tt=j+"-"+it,J=st.length;if(z.hasOwnProperty(tt))return z[tt];if(1===K){var Y=Math.round(Math.log((1<<J)-1&~it)/St);return st[_][Y]}for(var nt=j|1<<_,U=_+1;j&1<<U;)U++;for(var w=0,C=0,I=0;C<J;C++){var P=1<<C;P&it||(w+=(I%2?-1:1)*st[_][C]*n(st,K-1,U,nt,it|P,z),I++)}return z[tt]=w,w}function _t(st,K){var _=[[st[0],st[1],1,0,0,0,-K[0]*st[0],-K[0]*st[1]],[0,0,0,st[0],st[1],1,-K[1]*st[0],-K[1]*st[1]],[st[2],st[3],1,0,0,0,-K[2]*st[2],-K[2]*st[3]],[0,0,0,st[2],st[3],1,-K[3]*st[2],-K[3]*st[3]],[st[4],st[5],1,0,0,0,-K[4]*st[4],-K[4]*st[5]],[0,0,0,st[4],st[5],1,-K[5]*st[4],-K[5]*st[5]],[st[6],st[7],1,0,0,0,-K[6]*st[6],-K[6]*st[7]],[0,0,0,st[6],st[7],1,-K[7]*st[6],-K[7]*st[7]]],j={},it=n(_,8,0,0,0,j);if(0!==it){for(var z=[],tt=0;tt<8;tt++)for(var J=0;J<8;J++)null==z[J]&&(z[J]=0),z[J]+=((tt+J)%2?-1:1)*n(_,7,0===tt?1:0,1<<tt,1<<J,j)/it*K[tt];return function(Y,nt,U){var w=nt*z[6]+U*z[7]+1;Y[0]=(nt*z[0]+U*z[1]+z[2])/w,Y[1]=(nt*z[3]+U*z[4]+z[5])/w}}}var mt="___zrEVENTSAVED",gt=[];function yt(st,K,_,j,it){return V(gt,K,j,it,!0)&&V(st,_,gt[0],gt[1])}function V(st,K,_,j,it){if(K.getBoundingClientRect&&B.Z.domSupported&&!q(K)){var z=K[mt]||(K[mt]={}),tt=function k(st,K){var _=K.markers;if(_)return _;_=K.markers=[];for(var j=["left","right"],it=["top","bottom"],z=0;z<4;z++){var tt=document.createElement("div"),Y=z%2,nt=(z>>1)%2;tt.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",j[Y]+":0",it[nt]+":0",j[1-Y]+":auto",it[1-nt]+":auto",""].join("!important;"),st.appendChild(tt),_.push(tt)}return _}(K,z),J=function X(st,K,_){for(var j=_?"invTrans":"trans",it=K[j],z=K.srcCoords,tt=[],J=[],Y=!0,nt=0;nt<4;nt++){var U=st[nt].getBoundingClientRect(),w=2*nt,C=U.left,I=U.top;tt.push(C,I),Y=Y&&z&&C===z[w]&&I===z[w+1],J.push(st[nt].offsetLeft,st[nt].offsetTop)}return Y&&it?it:(K.srcCoords=tt,K[j]=_?_t(J,tt):_t(tt,J))}(tt,z,it);if(J)return J(st,_,j),!0}return!1}function q(st){return"CANVAS"===st.nodeName.toUpperCase()}var N=/([&<>"'])/g,et={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function $(st){return null==st?"":(st+"").replace(N,function(K,_){return et[_]})}},1156:(Ze,te,D)=>{D.d(te,{Z:()=>mt});var B=function gt(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},n=new function gt(){this.browser=new B,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(n.wxa=!0,n.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?n.worker=!0:typeof navigator>"u"?(n.node=!0,n.svgSupported=!0):function _t(gt,yt){var V=yt.browser,k=gt.match(/Firefox\/([\d.]+)/),X=gt.match(/MSIE\s([\d.]+)/)||gt.match(/Trident\/.+?rv:(([\d.]+))/),q=gt.match(/Edge?\/([\d.]+)/),N=/micromessenger/i.test(gt);k&&(V.firefox=!0,V.version=k[1]),X&&(V.ie=!0,V.version=X[1]),q&&(V.edge=!0,V.version=q[1],V.newEdge=+q[1].split(".")[0]>18),N&&(V.weChat=!0),yt.svgSupported=typeof SVGRect<"u",yt.touchEventsSupported="ontouchstart"in window&&!V.ie&&!V.edge,yt.pointerEventsSupported="onpointerdown"in window&&(V.edge||V.ie&&+V.version>=11),yt.domSupported=typeof document<"u";var et=document.documentElement.style;yt.transform3dSupported=(V.ie&&"transition"in et||V.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in et)&&!("OTransition"in et),yt.transformSupported=yt.transform3dSupported||V.ie&&+V.version>=9}(navigator.userAgent,n);const mt=n},3626:(Ze,te,D)=>{D.d(te,{OD:()=>k,Oo:()=>q,eV:()=>gt,iP:()=>V,sT:()=>et,x1:()=>$,xg:()=>N});var B=D(1156),St=D(5917),n=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_t=[],mt=B.Z.browser.firefox&&+B.Z.browser.version.split(".")[0]<39;function gt(st,K,_,j){return _=_||{},j?yt(st,K,_):mt&&null!=K.layerX&&K.layerX!==K.offsetX?(_.zrX=K.layerX,_.zrY=K.layerY):null!=K.offsetX?(_.zrX=K.offsetX,_.zrY=K.offsetY):yt(st,K,_),_}function yt(st,K,_){if(B.Z.domSupported&&st.getBoundingClientRect){var j=K.clientX,it=K.clientY;if((0,St.UK)(st)){var z=st.getBoundingClientRect();return _.zrX=j-z.left,void(_.zrY=it-z.top)}if((0,St.A4)(_t,st,j,it))return _.zrX=_t[0],void(_.zrY=_t[1])}_.zrX=_.zrY=0}function V(st){return st||window.event}function k(st,K,_){if(null!=(K=V(K)).zrX)return K;var j=K.type;if(j&&j.indexOf("touch")>=0){var tt="touchend"!==j?K.targetTouches[0]:K.changedTouches[0];tt&&gt(st,tt,K,_)}else{gt(st,K,K,_);var z=function X(st){var K=st.wheelDelta;if(K)return K;var _=st.deltaX,j=st.deltaY;return null==_||null==j?K:3*Math.abs(0!==j?j:_)*(j>0?-1:j<0?1:_>0?-1:1)}(K);K.zrDelta=z?z/120:-(K.detail||0)/3}var J=K.button;return null==K.which&&void 0!==J&&n.test(K.type)&&(K.which=1&J?1:2&J?3:4&J?2:0),K}function q(st,K,_,j){st.addEventListener(K,_,j)}function N(st,K,_,j){st.removeEventListener(K,_,j)}var et=function(st){st.preventDefault(),st.stopPropagation(),st.cancelBubble=!0};function $(st){return 2===st.which||3===st.which}},4498:(Ze,te,D)=>{function B(){return[1,0,0,1,0,0]}function St(X){return X[0]=1,X[1]=0,X[2]=0,X[3]=1,X[4]=0,X[5]=0,X}function n(X,q){return X[0]=q[0],X[1]=q[1],X[2]=q[2],X[3]=q[3],X[4]=q[4],X[5]=q[5],X}function _t(X,q,N){var $=q[1]*N[0]+q[3]*N[1],st=q[0]*N[2]+q[2]*N[3],K=q[1]*N[2]+q[3]*N[3],_=q[0]*N[4]+q[2]*N[5]+q[4],j=q[1]*N[4]+q[3]*N[5]+q[5];return X[0]=q[0]*N[0]+q[2]*N[1],X[1]=$,X[2]=st,X[3]=K,X[4]=_,X[5]=j,X}function mt(X,q,N){return X[0]=q[0],X[1]=q[1],X[2]=q[2],X[3]=q[3],X[4]=q[4]+N[0],X[5]=q[5]+N[1],X}function gt(X,q,N){var et=q[0],$=q[2],st=q[4],K=q[1],_=q[3],j=q[5],it=Math.sin(N),z=Math.cos(N);return X[0]=et*z+K*it,X[1]=-et*it+K*z,X[2]=$*z+_*it,X[3]=-$*it+z*_,X[4]=z*st+it*j,X[5]=z*j-it*st,X}function yt(X,q,N){var et=N[0],$=N[1];return X[0]=q[0]*et,X[1]=q[1]*$,X[2]=q[2]*et,X[3]=q[3]*$,X[4]=q[4]*et,X[5]=q[5]*$,X}function V(X,q){var N=q[0],et=q[2],$=q[4],st=q[1],K=q[3],_=q[5],j=N*K-st*et;return j?(X[0]=K*(j=1/j),X[1]=-st*j,X[2]=-et*j,X[3]=N*j,X[4]=(et*_-K*$)*j,X[5]=(st*$-N*_)*j,X):null}function k(X){var q=[1,0,0,1,0,0];return n(q,X),q}D.r(te),D.d(te,{clone:()=>k,copy:()=>n,create:()=>B,identity:()=>St,invert:()=>V,mul:()=>_t,rotate:()=>gt,scale:()=>yt,translate:()=>mt})},800:(Ze,te,D)=>{D.d(te,{Uo:()=>n,g2:()=>X,n5:()=>B,qW:()=>k,rk:()=>St});var q,N,B=12,St="sans-serif",n=B+"px "+St,V=function yt(q){var N={};if(typeof JSON>"u")return N;for(var et=0;et<q.length;et++){var $=String.fromCharCode(et+32),st=(q.charCodeAt(et)-20)/100;N[$]=st}return N}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),k={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(et,$){if(!q){var st=k.createCanvas();q=st&&st.getContext("2d")}if(q)return N!==$&&(N=q.font=$||n),q.measureText(et);et=et||"";var K=/(\d+)px/.exec($=$||n),_=K&&+K[1]||B,j=0;if($.indexOf("mono")>=0)j=_*et.length;else for(var it=0;it<et.length;it++){var z=V[et[it]];j+=null==z?_:z*_}return{width:j}},loadImage:function(q,N,et){var $=new Image;return $.onload=N,$.onerror=et,$.src=q,$}};function X(q){for(var N in k)q[N]&&(k[N]=q[N])}},4856:(Ze,te,D)=>{function mt(N,et,$,st){var K=et+1;if(K===$)return 1;if(st(N[K++],N[et])<0){for(;K<$&&st(N[K],N[K-1])<0;)K++;!function gt(N,et,$){for($--;et<$;){var st=N[et];N[et++]=N[$],N[$--]=st}}(N,et,K)}else for(;K<$&&st(N[K],N[K-1])>=0;)K++;return K-et}function yt(N,et,$,st,K){for(st===et&&st++;st<$;st++){for(var z,_=N[st],j=et,it=st;j<it;)K(_,N[z=j+it>>>1])<0?it=z:j=z+1;var tt=st-j;switch(tt){case 3:N[j+3]=N[j+2];case 2:N[j+2]=N[j+1];case 1:N[j+1]=N[j];break;default:for(;tt>0;)N[j+tt]=N[j+tt-1],tt--}N[j]=_}}function V(N,et,$,st,K,_){var j=0,it=0,z=1;if(_(N,et[$+K])>0){for(it=st-K;z<it&&_(N,et[$+K+z])>0;)j=z,(z=1+(z<<1))<=0&&(z=it);z>it&&(z=it),j+=K,z+=K}else{for(it=K+1;z<it&&_(N,et[$+K-z])<=0;)j=z,(z=1+(z<<1))<=0&&(z=it);z>it&&(z=it);var tt=j;j=K-z,z=K-tt}for(j++;j<z;){var J=j+(z-j>>>1);_(N,et[$+J])>0?j=J+1:z=J}return z}function k(N,et,$,st,K,_){var j=0,it=0,z=1;if(_(N,et[$+K])<0){for(it=K+1;z<it&&_(N,et[$+K-z])<0;)j=z,(z=1+(z<<1))<=0&&(z=it);z>it&&(z=it);var tt=j;j=K-z,z=K-tt}else{for(it=st-K;z<it&&_(N,et[$+K+z])>=0;)j=z,(z=1+(z<<1))<=0&&(z=it);z>it&&(z=it),j+=K,z+=K}for(j++;j<z;){var J=j+(z-j>>>1);_(N,et[$+J])<0?z=J:j=J+1}return z}function q(N,et,$,st){$||($=0),st||(st=N.length);var K=st-$;if(!(K<2)){var _=0;if(K<32)return void yt(N,$,st,$+(_=mt(N,$,st,et)),et);var j=function X(N,et){var j,it,$=7,z=0,tt=[];function U(I){var P=j[I],M=it[I],A=j[I+1],R=it[I+1];it[I]=M+R,I===z-3&&(j[I+1]=j[I+2],it[I+1]=it[I+2]),z--;var Z=k(N[A],N,P,M,0,et);P+=Z,0!=(M-=Z)&&0!==(R=V(N[P+M-1],N,A,R,R-1,et))&&(M<=R?function w(I,P,M,A){var R=0;for(R=0;R<P;R++)tt[R]=N[I+R];var Z=0,rt=M,ot=I;if(N[ot++]=N[rt++],0!=--A)if(1!==P){for(var lt,ht,vt,at=$;;){lt=0,ht=0,vt=!1;do{if(et(N[rt],tt[Z])<0){if(N[ot++]=N[rt++],ht++,lt=0,0==--A){vt=!0;break}}else if(N[ot++]=tt[Z++],lt++,ht=0,1==--P){vt=!0;break}}while((lt|ht)<at);if(vt)break;do{if(0!==(lt=k(N[rt],tt,Z,P,0,et))){for(R=0;R<lt;R++)N[ot+R]=tt[Z+R];if(ot+=lt,Z+=lt,(P-=lt)<=1){vt=!0;break}}if(N[ot++]=N[rt++],0==--A){vt=!0;break}if(0!==(ht=V(tt[Z],N,rt,A,0,et))){for(R=0;R<ht;R++)N[ot+R]=N[rt+R];if(ot+=ht,rt+=ht,0==(A-=ht)){vt=!0;break}}if(N[ot++]=tt[Z++],1==--P){vt=!0;break}at--}while(lt>=7||ht>=7);if(vt)break;at<0&&(at=0),at+=2}if(($=at)<1&&($=1),1===P){for(R=0;R<A;R++)N[ot+R]=N[rt+R];N[ot+A]=tt[Z]}else{if(0===P)throw new Error;for(R=0;R<P;R++)N[ot+R]=tt[Z+R]}}else{for(R=0;R<A;R++)N[ot+R]=N[rt+R];N[ot+A]=tt[Z]}else for(R=0;R<P;R++)N[ot+R]=tt[Z+R]}(P,M,A,R):function C(I,P,M,A){var R=0;for(R=0;R<A;R++)tt[R]=N[M+R];var Z=I+P-1,rt=A-1,ot=M+A-1,at=0,lt=0;if(N[ot--]=N[Z--],0!=--P)if(1!==A){for(var ht=$;;){var vt=0,ct=0,dt=!1;do{if(et(tt[rt],N[Z])<0){if(N[ot--]=N[Z--],vt++,ct=0,0==--P){dt=!0;break}}else if(N[ot--]=tt[rt--],ct++,vt=0,1==--A){dt=!0;break}}while((vt|ct)<ht);if(dt)break;do{if(0!=(vt=P-k(tt[rt],N,I,P,P-1,et))){for(P-=vt,lt=1+(ot-=vt),at=1+(Z-=vt),R=vt-1;R>=0;R--)N[lt+R]=N[at+R];if(0===P){dt=!0;break}}if(N[ot--]=tt[rt--],1==--A){dt=!0;break}if(0!=(ct=A-V(N[Z],tt,0,A,A-1,et))){for(A-=ct,lt=1+(ot-=ct),at=1+(rt-=ct),R=0;R<ct;R++)N[lt+R]=tt[at+R];if(A<=1){dt=!0;break}}if(N[ot--]=N[Z--],0==--P){dt=!0;break}ht--}while(vt>=7||ct>=7);if(dt)break;ht<0&&(ht=0),ht+=2}if(($=ht)<1&&($=1),1===A){for(lt=1+(ot-=P),at=1+(Z-=P),R=P-1;R>=0;R--)N[lt+R]=N[at+R];N[ot]=tt[rt]}else{if(0===A)throw new Error;for(at=ot-(A-1),R=0;R<A;R++)N[at+R]=tt[R]}}else{for(lt=1+(ot-=P),at=1+(Z-=P),R=P-1;R>=0;R--)N[lt+R]=N[at+R];N[ot]=tt[rt]}else for(at=ot-(A-1),R=0;R<A;R++)N[at+R]=tt[R]}(P,M,A,R))}return j=[],it=[],{mergeRuns:function Y(){for(;z>1;){var I=z-2;if(I>=1&&it[I-1]<=it[I]+it[I+1]||I>=2&&it[I-2]<=it[I]+it[I-1])it[I-1]<it[I+1]&&I--;else if(it[I]>it[I+1])break;U(I)}},forceMergeRuns:function nt(){for(;z>1;){var I=z-2;I>0&&it[I-1]<it[I+1]&&I--,U(I)}},pushRun:function J(I,P){j[z]=I,it[z]=P,z+=1}}}(N,et),it=function _t(N){for(var et=0;N>=32;)et|=1&N,N>>=1;return N+et}(K);do{if((_=mt(N,$,st,et))<it){var z=K;z>it&&(z=it),yt(N,$,$+z,$+_,et),_=z}j.pushRun($,_),j.mergeRuns(),K-=_,$+=_}while(0!==K);j.forceMergeRuns()}}D.d(te,{Z:()=>q})},6615:(Ze,te,D)=>{D.r(te),D.d(te,{HashMap:()=>Vr,RADIAN_TO_DEGREE:()=>Nr,assert:()=>De,bind:()=>Z,clone:()=>K,concatArray:()=>er,createCanvas:()=>tt,createHashMap:()=>Ve,createObject:()=>Ar,curry:()=>rt,defaults:()=>z,disableUserSelect:()=>Lr,each:()=>w,eqNaN:()=>Ut,extend:()=>it,filter:()=>P,find:()=>M,guid:()=>$,hasOwn:()=>Cr,indexOf:()=>J,inherits:()=>Y,isArray:()=>ot,isArrayLike:()=>U,isBuiltInObject:()=>dt,isDom:()=>Pt,isFunction:()=>at,isGradientObject:()=>wt,isImagePatternObject:()=>Ot,isNumber:()=>vt,isObject:()=>ct,isPrimitive:()=>or,isRegExp:()=>Ft,isString:()=>lt,isStringSafe:()=>ht,isTypedArray:()=>Mt,keys:()=>A,logError:()=>st,map:()=>C,merge:()=>_,mergeAll:()=>j,mixin:()=>nt,noop:()=>Zr,normalizeCssArray:()=>Se,reduce:()=>I,retrieve:()=>kt,retrieve2:()=>ie,retrieve3:()=>ue,setAsPrimitive:()=>tr,slice:()=>Pe,trim:()=>Fe});var B=D(800),St=I(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(re,pe){return re["[object "+pe+"]"]=!0,re},{}),n=I(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(re,pe){return re["[object "+pe+"Array]"]=!0,re},{}),_t=Object.prototype.toString,mt=Array.prototype,gt=mt.forEach,yt=mt.filter,V=mt.slice,k=mt.map,X=function(){}.constructor,q=X?X.prototype:null,N="__proto__",et=2311;function $(){return et++}function st(){for(var re=[],pe=0;pe<arguments.length;pe++)re[pe]=arguments[pe];typeof console<"u"&&console.error.apply(console,re)}function K(re){if(null==re||"object"!=typeof re)return re;var pe=re,we=_t.call(re);if("[object Array]"===we){if(!or(re)){pe=[];for(var Le=0,Kt=re.length;Le<Kt;Le++)pe[Le]=K(re[Le])}}else if(n[we]){if(!or(re)){var ne=re.constructor;if(ne.from)pe=ne.from(re);else for(pe=new ne(re.length),Le=0,Kt=re.length;Le<Kt;Le++)pe[Le]=re[Le]}}else if(!St[we]&&!or(re)&&!Pt(re))for(var le in pe={},re)re.hasOwnProperty(le)&&le!==N&&(pe[le]=K(re[le]));return pe}function _(re,pe,we){if(!ct(pe)||!ct(re))return we?K(pe):re;for(var Le in pe)if(pe.hasOwnProperty(Le)&&Le!==N){var Kt=re[Le],ne=pe[Le];!ct(ne)||!ct(Kt)||ot(ne)||ot(Kt)||Pt(ne)||Pt(Kt)||dt(ne)||dt(Kt)||or(ne)||or(Kt)?(we||!(Le in re))&&(re[Le]=K(pe[Le])):_(Kt,ne,we)}return re}function j(re,pe){for(var we=re[0],Le=1,Kt=re.length;Le<Kt;Le++)we=_(we,re[Le],pe);return we}function it(re,pe){if(Object.assign)Object.assign(re,pe);else for(var we in pe)pe.hasOwnProperty(we)&&we!==N&&(re[we]=pe[we]);return re}function z(re,pe,we){for(var Le=A(pe),Kt=0;Kt<Le.length;Kt++){var ne=Le[Kt];(we?null!=pe[ne]:null==re[ne])&&(re[ne]=pe[ne])}return re}var tt=B.qW.createCanvas;function J(re,pe){if(re){if(re.indexOf)return re.indexOf(pe);for(var we=0,Le=re.length;we<Le;we++)if(re[we]===pe)return we}return-1}function Y(re,pe){var we=re.prototype;function Le(){}for(var Kt in Le.prototype=pe.prototype,re.prototype=new Le,we)we.hasOwnProperty(Kt)&&(re.prototype[Kt]=we[Kt]);re.prototype.constructor=re,re.superClass=pe}function nt(re,pe,we){if(re="prototype"in re?re.prototype:re,pe="prototype"in pe?pe.prototype:pe,Object.getOwnPropertyNames)for(var Le=Object.getOwnPropertyNames(pe),Kt=0;Kt<Le.length;Kt++){var ne=Le[Kt];"constructor"!==ne&&(we?null!=pe[ne]:null==re[ne])&&(re[ne]=pe[ne])}else z(re,pe,we)}function U(re){return!(!re||"string"==typeof re)&&"number"==typeof re.length}function w(re,pe,we){if(re&&pe)if(re.forEach&&re.forEach===gt)re.forEach(pe,we);else if(re.length===+re.length)for(var Le=0,Kt=re.length;Le<Kt;Le++)pe.call(we,re[Le],Le,re);else for(var ne in re)re.hasOwnProperty(ne)&&pe.call(we,re[ne],ne,re)}function C(re,pe,we){if(!re)return[];if(!pe)return Pe(re);if(re.map&&re.map===k)return re.map(pe,we);for(var Le=[],Kt=0,ne=re.length;Kt<ne;Kt++)Le.push(pe.call(we,re[Kt],Kt,re));return Le}function I(re,pe,we,Le){if(re&&pe){for(var Kt=0,ne=re.length;Kt<ne;Kt++)we=pe.call(Le,we,re[Kt],Kt,re);return we}}function P(re,pe,we){if(!re)return[];if(!pe)return Pe(re);if(re.filter&&re.filter===yt)return re.filter(pe,we);for(var Le=[],Kt=0,ne=re.length;Kt<ne;Kt++)pe.call(we,re[Kt],Kt,re)&&Le.push(re[Kt]);return Le}function M(re,pe,we){if(re&&pe)for(var Le=0,Kt=re.length;Le<Kt;Le++)if(pe.call(we,re[Le],Le,re))return re[Le]}function A(re){if(!re)return[];if(Object.keys)return Object.keys(re);var pe=[];for(var we in re)re.hasOwnProperty(we)&&pe.push(we);return pe}var Z=q&&at(q.bind)?q.call.bind(q.bind):function R(re,pe){for(var we=[],Le=2;Le<arguments.length;Le++)we[Le-2]=arguments[Le];return function(){return re.apply(pe,we.concat(V.call(arguments)))}};function rt(re){for(var pe=[],we=1;we<arguments.length;we++)pe[we-1]=arguments[we];return function(){return re.apply(this,pe.concat(V.call(arguments)))}}function ot(re){return Array.isArray?Array.isArray(re):"[object Array]"===_t.call(re)}function at(re){return"function"==typeof re}function lt(re){return"string"==typeof re}function ht(re){return"[object String]"===_t.call(re)}function vt(re){return"number"==typeof re}function ct(re){var pe=typeof re;return"function"===pe||!!re&&"object"===pe}function dt(re){return!!St[_t.call(re)]}function Mt(re){return!!n[_t.call(re)]}function Pt(re){return"object"==typeof re&&"number"==typeof re.nodeType&&"object"==typeof re.ownerDocument}function wt(re){return null!=re.colorStops}function Ot(re){return null!=re.image}function Ft(re){return"[object RegExp]"===_t.call(re)}function Ut(re){return re!=re}function kt(){for(var re=[],pe=0;pe<arguments.length;pe++)re[pe]=arguments[pe];for(var we=0,Le=re.length;we<Le;we++)if(null!=re[we])return re[we]}function ie(re,pe){return re??pe}function ue(re,pe,we){return re??pe??we}function Pe(re){for(var pe=[],we=1;we<arguments.length;we++)pe[we-1]=arguments[we];return V.apply(re,pe)}function Se(re){if("number"==typeof re)return[re,re,re,re];var pe=re.length;return 2===pe?[re[0],re[1],re[0],re[1]]:3===pe?[re[0],re[1],re[2],re[1]]:re}function De(re,pe){if(!re)throw new Error(pe)}function Fe(re){return null==re?null:"function"==typeof re.trim?re.trim():re.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Ye="__ec_primitive__";function tr(re){re[Ye]=!0}function or(re){return re[Ye]}var Hr=function(){function re(){this.data={}}return re.prototype.delete=function(pe){var we=this.has(pe);return we&&delete this.data[pe],we},re.prototype.has=function(pe){return this.data.hasOwnProperty(pe)},re.prototype.get=function(pe){return this.data[pe]},re.prototype.set=function(pe,we){return this.data[pe]=we,this},re.prototype.keys=function(){return A(this.data)},re.prototype.forEach=function(pe){var we=this.data;for(var Le in we)we.hasOwnProperty(Le)&&pe(we[Le],Le)},re}(),Rr="function"==typeof Map,Vr=function(){function re(pe){var we=ot(pe);this.data=function qr(){return Rr?new Map:new Hr}();var Le=this;function Kt(ne,le){we?Le.set(ne,le):Le.set(le,ne)}pe instanceof re?pe.each(Kt):pe&&w(pe,Kt)}return re.prototype.hasKey=function(pe){return this.data.has(pe)},re.prototype.get=function(pe){return this.data.get(pe)},re.prototype.set=function(pe,we){return this.data.set(pe,we),we},re.prototype.each=function(pe,we){this.data.forEach(function(Le,Kt){pe.call(we,Le,Kt)})},re.prototype.keys=function(){var pe=this.data.keys();return Rr?Array.from(pe):pe},re.prototype.removeKey=function(pe){this.data.delete(pe)},re}();function Ve(re){return new Vr(re)}function er(re,pe){for(var we=new re.constructor(re.length+pe.length),Le=0;Le<re.length;Le++)we[Le]=re[Le];var Kt=re.length;for(Le=0;Le<pe.length;Le++)we[Le+Kt]=pe[Le];return we}function Ar(re,pe){var we;if(Object.create)we=Object.create(re);else{var Le=function(){};Le.prototype=re,we=new Le}return pe&&it(we,pe),we}function Lr(re){var pe=re.style;pe.webkitUserSelect="none",pe.userSelect="none",pe.webkitTapHighlightColor="rgba(0,0,0,0)",pe["-webkit-touch-callout"]="none"}function Cr(re,pe){return re.hasOwnProperty(pe)}function Zr(){}var Nr=180/Math.PI},8544:(Ze,te,D)=>{function B(w,C){return null==w&&(w=0),null==C&&(C=0),[w,C]}function St(w,C){return w[0]=C[0],w[1]=C[1],w}function n(w){return[w[0],w[1]]}function _t(w,C,I){return w[0]=C,w[1]=I,w}function mt(w,C,I){return w[0]=C[0]+I[0],w[1]=C[1]+I[1],w}function gt(w,C,I,P){return w[0]=C[0]+I[0]*P,w[1]=C[1]+I[1]*P,w}function yt(w,C,I){return w[0]=C[0]-I[0],w[1]=C[1]-I[1],w}function V(w){return Math.sqrt(X(w))}D.r(te),D.d(te,{add:()=>mt,applyTransform:()=>Y,clone:()=>n,copy:()=>St,create:()=>B,dist:()=>j,distSquare:()=>z,distance:()=>_,distanceSquare:()=>it,div:()=>et,dot:()=>$,len:()=>V,lenSquare:()=>X,length:()=>k,lengthSquare:()=>q,lerp:()=>J,max:()=>U,min:()=>nt,mul:()=>N,negate:()=>tt,normalize:()=>K,scale:()=>st,scaleAndAdd:()=>gt,set:()=>_t,sub:()=>yt});var k=V;function X(w){return w[0]*w[0]+w[1]*w[1]}var q=X;function N(w,C,I){return w[0]=C[0]*I[0],w[1]=C[1]*I[1],w}function et(w,C,I){return w[0]=C[0]/I[0],w[1]=C[1]/I[1],w}function $(w,C){return w[0]*C[0]+w[1]*C[1]}function st(w,C,I){return w[0]=C[0]*I,w[1]=C[1]*I,w}function K(w,C){var I=V(C);return 0===I?(w[0]=0,w[1]=0):(w[0]=C[0]/I,w[1]=C[1]/I),w}function _(w,C){return Math.sqrt((w[0]-C[0])*(w[0]-C[0])+(w[1]-C[1])*(w[1]-C[1]))}var j=_;function it(w,C){return(w[0]-C[0])*(w[0]-C[0])+(w[1]-C[1])*(w[1]-C[1])}var z=it;function tt(w,C){return w[0]=-C[0],w[1]=-C[1],w}function J(w,C,I,P){return w[0]=C[0]+P*(I[0]-C[0]),w[1]=C[1]+P*(I[1]-C[1]),w}function Y(w,C,I){var P=C[0],M=C[1];return w[0]=I[0]*P+I[2]*M+I[4],w[1]=I[1]*P+I[3]*M+I[5],w}function nt(w,C,I){return w[0]=Math.min(C[0],I[0]),w[1]=Math.min(C[1],I[1]),w}function U(w,C,I){return w[0]=Math.max(C[0],I[0]),w[1]=Math.max(C[1],I[1]),w}},1803:(Ze,te,D)=>{D.d(te,{Z:()=>_t});var B=D(4311),St=D(2477);const _t=function(mt){function gt(){var yt=null!==mt&&mt.apply(this,arguments)||this;return yt.type="compound",yt}return(0,B.ZT)(gt,mt),gt.prototype._updatePathDirty=function(){for(var yt=this.shape.paths,V=this.shapeChanged(),k=0;k<yt.length;k++)V=V||yt[k].shapeChanged();V&&this.dirtyShape()},gt.prototype.beforeBrush=function(){this._updatePathDirty();for(var yt=this.shape.paths||[],V=this.getGlobalScale(),k=0;k<yt.length;k++)yt[k].path||yt[k].createPathProxy(),yt[k].path.setScale(V[0],V[1],yt[k].segmentIgnoreThreshold)},gt.prototype.buildPath=function(yt,V){for(var k=V.paths||[],X=0;X<k.length;X++)k[X].buildPath(yt,k[X].shape,!0)},gt.prototype.afterBrush=function(){for(var yt=this.shape.paths||[],V=0;V<yt.length;V++)yt[V].pathUpdated()},gt.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),St.ZP.prototype.getBoundingRect.call(this)},gt}(St.ZP)},4081:(Ze,te,D)=>{D.d(te,{ZP:()=>st,ik:()=>V,tj:()=>yt});var B=D(4311),St=D(2501),n=D(4525),_t=D(6615),mt=D(6195),gt="__zr_style_"+Math.round(10*Math.random()),yt={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},V={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};yt[gt]=!0;var k=["z","z2","invisible"],X=["invisible"],q=function(K){function _(j){return K.call(this,j)||this}return(0,B.ZT)(_,K),_.prototype._init=function(j){for(var it=(0,_t.keys)(j),z=0;z<it.length;z++){var tt=it[z];"style"===tt?this.useStyle(j[tt]):K.prototype.attrKV.call(this,tt,j[tt])}this.style||this.useStyle({})},_.prototype.beforeBrush=function(){},_.prototype.afterBrush=function(){},_.prototype.innerBeforeBrush=function(){},_.prototype.innerAfterBrush=function(){},_.prototype.shouldBePainted=function(j,it,z,tt){var J=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function $(K,_,j){return N.copy(K.getBoundingRect()),K.transform&&N.applyTransform(K.transform),et.width=_,et.height=j,!N.intersect(et)}(this,j,it)||J&&!J[0]&&!J[3])return!1;if(z&&this.__clipPaths)for(var Y=0;Y<this.__clipPaths.length;++Y)if(this.__clipPaths[Y].isZeroArea())return!1;if(tt&&this.parent)for(var nt=this.parent;nt;){if(nt.ignore)return!1;nt=nt.parent}return!0},_.prototype.contain=function(j,it){return this.rectContain(j,it)},_.prototype.traverse=function(j,it){j.call(it,this)},_.prototype.rectContain=function(j,it){var z=this.transformCoordToLocal(j,it);return this.getBoundingRect().contain(z[0],z[1])},_.prototype.getPaintRect=function(){var j=this._paintRect;if(!this._paintRect||this.__dirty){var it=this.transform,z=this.getBoundingRect(),tt=this.style,J=tt.shadowBlur||0,Y=tt.shadowOffsetX||0,nt=tt.shadowOffsetY||0;j=this._paintRect||(this._paintRect=new n.Z(0,0,0,0)),it?n.Z.applyTransform(j,z,it):j.copy(z),(J||Y||nt)&&(j.width+=2*J+Math.abs(Y),j.height+=2*J+Math.abs(nt),j.x=Math.min(j.x,j.x+Y-J),j.y=Math.min(j.y,j.y+nt-J));var U=this.dirtyRectTolerance;j.isZero()||(j.x=Math.floor(j.x-U),j.y=Math.floor(j.y-U),j.width=Math.ceil(j.width+1+2*U),j.height=Math.ceil(j.height+1+2*U))}return j},_.prototype.setPrevPaintRect=function(j){j?(this._prevPaintRect=this._prevPaintRect||new n.Z(0,0,0,0),this._prevPaintRect.copy(j)):this._prevPaintRect=null},_.prototype.getPrevPaintRect=function(){return this._prevPaintRect},_.prototype.animateStyle=function(j){return this.animate("style",j)},_.prototype.updateDuringAnimation=function(j){"style"===j?this.dirtyStyle():this.markRedraw()},_.prototype.attrKV=function(j,it){"style"!==j?K.prototype.attrKV.call(this,j,it):this.style?this.setStyle(it):this.useStyle(it)},_.prototype.setStyle=function(j,it){return"string"==typeof j?this.style[j]=it:(0,_t.extend)(this.style,j),this.dirtyStyle(),this},_.prototype.dirtyStyle=function(j){j||this.markRedraw(),this.__dirty|=mt.SE,this._rect&&(this._rect=null)},_.prototype.dirty=function(){this.dirtyStyle()},_.prototype.styleChanged=function(){return!!(this.__dirty&mt.SE)},_.prototype.styleUpdated=function(){this.__dirty&=~mt.SE},_.prototype.createStyle=function(j){return(0,_t.createObject)(yt,j)},_.prototype.useStyle=function(j){j[gt]||(j=this.createStyle(j)),this.__inHover?this.__hoverStyle=j:this.style=j,this.dirtyStyle()},_.prototype.isStyleObject=function(j){return j[gt]},_.prototype._innerSaveToNormal=function(j){K.prototype._innerSaveToNormal.call(this,j);var it=this._normalState;j.style&&!it.style&&(it.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(j,it,k)},_.prototype._applyStateObj=function(j,it,z,tt,J,Y){K.prototype._applyStateObj.call(this,j,it,z,tt,J,Y);var U,nt=!(it&&tt);if(it&&it.style?J?tt?U=it.style:(U=this._mergeStyle(this.createStyle(),z.style),this._mergeStyle(U,it.style)):(U=this._mergeStyle(this.createStyle(),tt?this.style:z.style),this._mergeStyle(U,it.style)):nt&&(U=z.style),U)if(J){var w=this.style;if(this.style=this.createStyle(nt?{}:w),nt)for(var C=(0,_t.keys)(w),I=0;I<C.length;I++)(P=C[I])in U&&(U[P]=U[P],this.style[P]=w[P]);var M=(0,_t.keys)(U);for(I=0;I<M.length;I++)this.style[P=M[I]]=this.style[P];this._transitionState(j,{style:U},Y,this.getAnimationStyleProps())}else this.useStyle(U);var A=this.__inHover?X:k;for(I=0;I<A.length;I++){var P=A[I];it&&null!=it[P]?this[P]=it[P]:nt&&null!=z[P]&&(this[P]=z[P])}},_.prototype._mergeStates=function(j){for(var z,it=K.prototype._mergeStates.call(this,j),tt=0;tt<j.length;tt++){var J=j[tt];J.style&&this._mergeStyle(z=z||{},J.style)}return z&&(it.style=z),it},_.prototype._mergeStyle=function(j,it){return(0,_t.extend)(j,it),j},_.prototype.getAnimationStyleProps=function(){return V},_.initDefaultProps=((j=_.prototype).type="displayable",j.invisible=!1,j.z=0,j.z2=0,j.zlevel=0,j.culling=!1,j.cursor="pointer",j.rectHover=!1,j.incremental=!1,j._rect=null,j.dirtyRectTolerance=0,void(j.__dirty=mt.YV|mt.SE)),_;var j}(St.Z),N=new n.Z(0,0,0,0),et=new n.Z(0,0,0,0);const st=q},808:(Ze,te,D)=>{D.d(te,{Z:()=>St});const St=function(){function n(_t){this.colorStops=_t||[]}return n.prototype.addColorStop=function(_t,mt){this.colorStops.push({offset:_t,color:mt})},n}()},4786:(Ze,te,D)=>{D.d(te,{Z:()=>gt});var B=D(4311),St=D(6615),n=D(2501),_t=D(4525),mt=function(yt){function V(k){var X=yt.call(this)||this;return X.isGroup=!0,X._children=[],X.attr(k),X}return(0,B.ZT)(V,yt),V.prototype.childrenRef=function(){return this._children},V.prototype.children=function(){return this._children.slice()},V.prototype.childAt=function(k){return this._children[k]},V.prototype.childOfName=function(k){for(var X=this._children,q=0;q<X.length;q++)if(X[q].name===k)return X[q]},V.prototype.childCount=function(){return this._children.length},V.prototype.add=function(k){return k&&k!==this&&k.parent!==this&&(this._children.push(k),this._doAdd(k)),this},V.prototype.addBefore=function(k,X){if(k&&k!==this&&k.parent!==this&&X&&X.parent===this){var q=this._children,N=q.indexOf(X);N>=0&&(q.splice(N,0,k),this._doAdd(k))}return this},V.prototype.replace=function(k,X){var q=St.indexOf(this._children,k);return q>=0&&this.replaceAt(X,q),this},V.prototype.replaceAt=function(k,X){var q=this._children,N=q[X];if(k&&k!==this&&k.parent!==this&&k!==N){q[X]=k,N.parent=null;var et=this.__zr;et&&N.removeSelfFromZr(et),this._doAdd(k)}return this},V.prototype._doAdd=function(k){k.parent&&k.parent.remove(k),k.parent=this;var X=this.__zr;X&&X!==k.__zr&&k.addSelfToZr(X),X&&X.refresh()},V.prototype.remove=function(k){var X=this.__zr,q=this._children,N=St.indexOf(q,k);return N<0||(q.splice(N,1),k.parent=null,X&&k.removeSelfFromZr(X),X&&X.refresh()),this},V.prototype.removeAll=function(){for(var k=this._children,X=this.__zr,q=0;q<k.length;q++){var N=k[q];X&&N.removeSelfFromZr(X),N.parent=null}return k.length=0,this},V.prototype.eachChild=function(k,X){for(var q=this._children,N=0;N<q.length;N++)k.call(X,q[N],N);return this},V.prototype.traverse=function(k,X){for(var q=0;q<this._children.length;q++){var N=this._children[q],et=k.call(X,N);N.isGroup&&!et&&N.traverse(k,X)}return this},V.prototype.addSelfToZr=function(k){yt.prototype.addSelfToZr.call(this,k);for(var X=0;X<this._children.length;X++)this._children[X].addSelfToZr(k)},V.prototype.removeSelfFromZr=function(k){yt.prototype.removeSelfFromZr.call(this,k);for(var X=0;X<this._children.length;X++)this._children[X].removeSelfFromZr(k)},V.prototype.getBoundingRect=function(k){for(var X=new _t.Z(0,0,0,0),q=k||this._children,N=[],et=null,$=0;$<q.length;$++){var st=q[$];if(!st.ignore&&!st.invisible){var K=st.getBoundingRect(),_=st.getLocalTransform(N);_?(_t.Z.applyTransform(X,K,_),(et=et||X.clone()).union(X)):(et=et||K.clone()).union(K)}}return et||X},V}(n.Z);mt.prototype.type="group";const gt=mt},8418:(Ze,te,D)=>{D.d(te,{ZP:()=>k});var B=D(4311),St=D(4081),n=D(4525),_t=D(6615),mt=(0,_t.defaults)({x:0,y:0},St.tj),gt={style:(0,_t.defaults)({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},St.ik.style)},V=function(X){function q(){return null!==X&&X.apply(this,arguments)||this}return(0,B.ZT)(q,X),q.prototype.createStyle=function(N){return(0,_t.createObject)(mt,N)},q.prototype._getSize=function(N){var et=this.style,$=et[N];if(null!=$)return $;var st=function yt(X){return!!(X&&"string"!=typeof X&&X.width&&X.height)}(et.image)?et.image:this.__image;if(!st)return 0;var K="width"===N?"height":"width",_=et[K];return null==_?st[N]:st[N]/st[K]*_},q.prototype.getWidth=function(){return this._getSize("width")},q.prototype.getHeight=function(){return this._getSize("height")},q.prototype.getAnimationStyleProps=function(){return gt},q.prototype.getBoundingRect=function(){var N=this.style;return this._rect||(this._rect=new n.Z(N.x||0,N.y||0,this.getWidth(),this.getHeight())),this._rect},q}(St.ZP);V.prototype.type="image";const k=V},8123:(Ze,te,D)=>{D.d(te,{Z:()=>gt});var B=D(4311),St=D(4081),n=D(4525),_t=[];const gt=function(yt){function V(){var k=null!==yt&&yt.apply(this,arguments)||this;return k.notClear=!0,k.incremental=!0,k._displayables=[],k._temporaryDisplayables=[],k._cursor=0,k}return(0,B.ZT)(V,yt),V.prototype.traverse=function(k,X){k.call(X,this)},V.prototype.useStyle=function(){this.style={}},V.prototype.getCursor=function(){return this._cursor},V.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},V.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},V.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},V.prototype.addDisplayable=function(k,X){X?this._temporaryDisplayables.push(k):this._displayables.push(k),this.markRedraw()},V.prototype.addDisplayables=function(k,X){X=X||!1;for(var q=0;q<k.length;q++)this.addDisplayable(k[q],X)},V.prototype.getDisplayables=function(){return this._displayables},V.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},V.prototype.eachPendingDisplayable=function(k){for(var X=this._cursor;X<this._displayables.length;X++)k&&k(this._displayables[X]);for(X=0;X<this._temporaryDisplayables.length;X++)k&&k(this._temporaryDisplayables[X])},V.prototype.update=function(){this.updateTransform();for(var k=this._cursor;k<this._displayables.length;k++)(X=this._displayables[k]).parent=this,X.update(),X.parent=null;for(k=0;k<this._temporaryDisplayables.length;k++){var X;(X=this._temporaryDisplayables[k]).parent=this,X.update(),X.parent=null}},V.prototype.getBoundingRect=function(){if(!this._rect){for(var k=new n.Z(1/0,1/0,-1/0,-1/0),X=0;X<this._displayables.length;X++){var q=this._displayables[X],N=q.getBoundingRect().clone();q.needLocalTransform()&&N.applyTransform(q.getLocalTransform(_t)),k.union(N)}this._rect=k}return this._rect},V.prototype.contain=function(k,X){var q=this.transformCoordToLocal(k,X);if(this.getBoundingRect().contain(q[0],q[1]))for(var et=0;et<this._displayables.length;et++)if(this._displayables[et].contain(k,X))return!0;return!1},V}(St.ZP)},8481:(Ze,te,D)=>{D.d(te,{Z:()=>_t});var B=D(4311);const _t=function(mt){function gt(yt,V,k,X,q,N){var et=mt.call(this,q)||this;return et.x=yt??0,et.y=V??0,et.x2=k??1,et.y2=X??0,et.type="linear",et.global=N||!1,et}return(0,B.ZT)(gt,mt),gt}(D(808).Z)},2477:(Ze,te,D)=>{D.d(te,{$t:()=>M,ZP:()=>rt});var B=D(4311),St=D(4081),n=D(7034),_t=D(31),mt=D(6846);function gt(ot,at,lt,ht,vt,ct,dt,Mt,Pt,wt,Ot){if(0===Pt)return!1;var Ft=Pt;return!(Ot>at+Ft&&Ot>ht+Ft&&Ot>ct+Ft&&Ot>Mt+Ft||Ot<at-Ft&&Ot<ht-Ft&&Ot<ct-Ft&&Ot<Mt-Ft||wt>ot+Ft&&wt>lt+Ft&&wt>vt+Ft&&wt>dt+Ft||wt<ot-Ft&&wt<lt-Ft&&wt<vt-Ft&&wt<dt-Ft)&&mt.t1(ot,at,lt,ht,vt,ct,dt,Mt,wt,Ot,null)<=Ft/2}var yt=D(7538),V=D(4301),k=2*Math.PI;function X(ot,at,lt,ht,vt,ct,dt,Mt,Pt){if(0===dt)return!1;var wt=dt;Mt-=ot,Pt-=at;var Ot=Math.sqrt(Mt*Mt+Pt*Pt);if(Ot-wt>lt||Ot+wt<lt)return!1;if(Math.abs(ht-vt)%k<1e-4)return!0;if(ct){var Ft=ht;ht=(0,V.m)(vt),vt=(0,V.m)(Ft)}else ht=(0,V.m)(ht),vt=(0,V.m)(vt);ht>vt&&(vt+=k);var Ut=Math.atan2(Pt,Mt);return Ut<0&&(Ut+=k),Ut>=ht&&Ut<=vt||Ut+k>=ht&&Ut+k<=vt}var q=D(6567),N=n.Z.CMD,et=2*Math.PI,K=[-1,-1,-1],_=[-1,-1];function j(){var ot=_[0];_[0]=_[1],_[1]=ot}function it(ot,at,lt,ht,vt,ct,dt,Mt,Pt,wt){if(wt>at&&wt>ht&&wt>ct&&wt>Mt||wt<at&&wt<ht&&wt<ct&&wt<Mt)return 0;var Ot=mt.kD(at,ht,ct,Mt,wt,K);if(0===Ot)return 0;for(var Ft=0,Ut=-1,kt=void 0,ie=void 0,ue=0;ue<Ot;ue++){var Pe=K[ue],Se=0===Pe||1===Pe?.5:1;mt.af(ot,lt,vt,dt,Pe)<Pt||(Ut<0&&(Ut=mt.pP(at,ht,ct,Mt,_),_[1]<_[0]&&Ut>1&&j(),kt=mt.af(at,ht,ct,Mt,_[0]),Ut>1&&(ie=mt.af(at,ht,ct,Mt,_[1]))),Ft+=2===Ut?Pe<_[0]?kt<at?Se:-Se:Pe<_[1]?ie<kt?Se:-Se:Mt<ie?Se:-Se:Pe<_[0]?kt<at?Se:-Se:Mt<kt?Se:-Se)}return Ft}function z(ot,at,lt,ht,vt,ct,dt,Mt){if(Mt>at&&Mt>ht&&Mt>ct||Mt<at&&Mt<ht&&Mt<ct)return 0;var Pt=mt.Jz(at,ht,ct,Mt,K);if(0===Pt)return 0;var wt=mt.QC(at,ht,ct);if(wt>=0&&wt<=1){for(var Ot=0,Ft=mt.Zm(at,ht,ct,wt),Ut=0;Ut<Pt;Ut++){var kt=0===K[Ut]||1===K[Ut]?.5:1;mt.Zm(ot,lt,vt,K[Ut])<dt||(Ot+=K[Ut]<wt?Ft<at?kt:-kt:ct<Ft?kt:-kt)}return Ot}return kt=0===K[0]||1===K[0]?.5:1,mt.Zm(ot,lt,vt,K[0])<dt?0:ct<at?kt:-kt}function tt(ot,at,lt,ht,vt,ct,dt,Mt){if((Mt-=at)>lt||Mt<-lt)return 0;var Pt=Math.sqrt(lt*lt-Mt*Mt);K[0]=-Pt,K[1]=Pt;var wt=Math.abs(ht-vt);if(wt<1e-4)return 0;if(wt>=et-1e-4){ht=0,vt=et;var Ot=ct?1:-1;return dt>=K[0]+ot&&dt<=K[1]+ot?Ot:0}if(ht>vt){var Ft=ht;ht=vt,vt=Ft}ht<0&&(ht+=et,vt+=et);for(var Ut=0,kt=0;kt<2;kt++){var ie=K[kt];if(ie+ot>dt){var ue=Math.atan2(Mt,ie);Ot=ct?1:-1,ue<0&&(ue=et+ue),(ue>=ht&&ue<=vt||ue+et>=ht&&ue+et<=vt)&&(ue>Math.PI/2&&ue<1.5*Math.PI&&(Ot=-Ot),Ut+=Ot)}}return Ut}function J(ot,at,lt,ht,vt){for(var Ut,kt,ct=ot.data,dt=ot.len(),Mt=0,Pt=0,wt=0,Ot=0,Ft=0,ie=0;ie<dt;){var ue=ct[ie++],Pe=1===ie;switch(ue===N.M&&ie>1&&(lt||(Mt+=(0,q.Z)(Pt,wt,Ot,Ft,ht,vt))),Pe&&(Ot=Pt=ct[ie],Ft=wt=ct[ie+1]),ue){case N.M:Pt=Ot=ct[ie++],wt=Ft=ct[ie++];break;case N.L:if(lt){if(_t.m(Pt,wt,ct[ie],ct[ie+1],at,ht,vt))return!0}else Mt+=(0,q.Z)(Pt,wt,ct[ie],ct[ie+1],ht,vt)||0;Pt=ct[ie++],wt=ct[ie++];break;case N.C:if(lt){if(gt(Pt,wt,ct[ie++],ct[ie++],ct[ie++],ct[ie++],ct[ie],ct[ie+1],at,ht,vt))return!0}else Mt+=it(Pt,wt,ct[ie++],ct[ie++],ct[ie++],ct[ie++],ct[ie],ct[ie+1],ht,vt)||0;Pt=ct[ie++],wt=ct[ie++];break;case N.Q:if(lt){if(yt.m(Pt,wt,ct[ie++],ct[ie++],ct[ie],ct[ie+1],at,ht,vt))return!0}else Mt+=z(Pt,wt,ct[ie++],ct[ie++],ct[ie],ct[ie+1],ht,vt)||0;Pt=ct[ie++],wt=ct[ie++];break;case N.A:var Se=ct[ie++],De=ct[ie++],Fe=ct[ie++],Ye=ct[ie++],tr=ct[ie++],or=ct[ie++];ie+=1;var Hr=!!(1-ct[ie++]);Ut=Math.cos(tr)*Fe+Se,kt=Math.sin(tr)*Ye+De,Pe?(Ot=Ut,Ft=kt):Mt+=(0,q.Z)(Pt,wt,Ut,kt,ht,vt);var Rr=(ht-Se)*Ye/Fe+Se;if(lt){if(X(Se,De,Ye,tr,tr+or,Hr,at,Rr,vt))return!0}else Mt+=tt(Se,De,Ye,tr,tr+or,Hr,Rr,vt);Pt=Math.cos(tr+or)*Fe+Se,wt=Math.sin(tr+or)*Ye+De;break;case N.R:if(Ot=Pt=ct[ie++],Ft=wt=ct[ie++],Ut=Ot+ct[ie++],kt=Ft+ct[ie++],lt){if(_t.m(Ot,Ft,Ut,Ft,at,ht,vt)||_t.m(Ut,Ft,Ut,kt,at,ht,vt)||_t.m(Ut,kt,Ot,kt,at,ht,vt)||_t.m(Ot,kt,Ot,Ft,at,ht,vt))return!0}else Mt+=(0,q.Z)(Ut,Ft,Ut,kt,ht,vt),Mt+=(0,q.Z)(Ot,kt,Ot,Ft,ht,vt);break;case N.Z:if(lt){if(_t.m(Pt,wt,Ot,Ft,at,ht,vt))return!0}else Mt+=(0,q.Z)(Pt,wt,Ot,Ft,ht,vt);Pt=Ot,wt=Ft}}return!lt&&!function st(ot,at){return Math.abs(ot-at)<1e-4}(wt,Ft)&&(Mt+=(0,q.Z)(Pt,wt,Ot,Ft,ht,vt)||0),0!==Mt}var U=D(6615),w=D(754),C=D(6905),I=D(6195),P=D(5028),M=(0,U.defaults)({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},St.tj),A={style:(0,U.defaults)({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},St.ik.style)},R=P.dN.concat(["invisible","culling","z","z2","zlevel","parent"]);const rt=function(ot){function at(lt){return ot.call(this,lt)||this}return(0,B.ZT)(at,ot),at.prototype.update=function(){var lt=this;ot.prototype.update.call(this);var ht=this.style;if(ht.decal){var vt=this._decalEl=this._decalEl||new at;vt.buildPath===at.prototype.buildPath&&(vt.buildPath=function(Pt){lt.buildPath(Pt,lt.shape)}),vt.silent=!0;var ct=vt.style;for(var dt in ht)ct[dt]!==ht[dt]&&(ct[dt]=ht[dt]);ct.fill=ht.fill?ht.decal:null,ct.decal=null,ct.shadowColor=null,ht.strokeFirst&&(ct.stroke=null);for(var Mt=0;Mt<R.length;++Mt)vt[R[Mt]]=this[R[Mt]];vt.__dirty|=I.YV}else this._decalEl&&(this._decalEl=null)},at.prototype.getDecalElement=function(){return this._decalEl},at.prototype._init=function(lt){var ht=(0,U.keys)(lt);this.shape=this.getDefaultShape();var vt=this.getDefaultStyle();vt&&this.useStyle(vt);for(var ct=0;ct<ht.length;ct++){var dt=ht[ct],Mt=lt[dt];"style"===dt?this.style?(0,U.extend)(this.style,Mt):this.useStyle(Mt):"shape"===dt?(0,U.extend)(this.shape,Mt):ot.prototype.attrKV.call(this,dt,Mt)}this.style||this.useStyle({})},at.prototype.getDefaultStyle=function(){return null},at.prototype.getDefaultShape=function(){return{}},at.prototype.canBeInsideText=function(){return this.hasFill()},at.prototype.getInsideTextFill=function(){var lt=this.style.fill;if("none"!==lt){if((0,U.isString)(lt)){var ht=(0,w.lum)(lt,0);return ht>.5?C.vU:ht>.2?C.iv:C.GD}if(lt)return C.GD}return C.vU},at.prototype.getInsideTextStroke=function(lt){var ht=this.style.fill;if((0,U.isString)(ht)){var vt=this.__zr;if(!(!vt||!vt.isDarkMode())==(0,w.lum)(lt,0)<C.Ak)return ht}},at.prototype.buildPath=function(lt,ht,vt){},at.prototype.pathUpdated=function(){this.__dirty&=~I.RH},at.prototype.getUpdatedPathProxy=function(lt){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,lt),this.path},at.prototype.createPathProxy=function(){this.path=new n.Z(!1)},at.prototype.hasStroke=function(){var lt=this.style,ht=lt.stroke;return!(null==ht||"none"===ht||!(lt.lineWidth>0))},at.prototype.hasFill=function(){var ht=this.style.fill;return null!=ht&&"none"!==ht},at.prototype.getBoundingRect=function(){var lt=this._rect,ht=this.style,vt=!lt;if(vt){var ct=!1;this.path||(ct=!0,this.createPathProxy());var dt=this.path;(ct||this.__dirty&I.RH)&&(dt.beginPath(),this.buildPath(dt,this.shape,!1),this.pathUpdated()),lt=dt.getBoundingRect()}if(this._rect=lt,this.hasStroke()&&this.path&&this.path.len()>0){var Mt=this._rectStroke||(this._rectStroke=lt.clone());if(this.__dirty||vt){Mt.copy(lt);var Pt=ht.strokeNoScale?this.getLineScale():1,wt=ht.lineWidth;this.hasFill()||(wt=Math.max(wt,this.strokeContainThreshold??4)),Pt>1e-10&&(Mt.width+=wt/Pt,Mt.height+=wt/Pt,Mt.x-=wt/Pt/2,Mt.y-=wt/Pt/2)}return Mt}return lt},at.prototype.contain=function(lt,ht){var vt=this.transformCoordToLocal(lt,ht),ct=this.getBoundingRect(),dt=this.style;if(ct.contain(lt=vt[0],ht=vt[1])){var Mt=this.path;if(this.hasStroke()){var Pt=dt.lineWidth,wt=dt.strokeNoScale?this.getLineScale():1;if(wt>1e-10&&(this.hasFill()||(Pt=Math.max(Pt,this.strokeContainThreshold)),function nt(ot,at,lt,ht){return J(ot,at,!0,lt,ht)}(Mt,Pt/wt,lt,ht)))return!0}if(this.hasFill())return function Y(ot,at,lt){return J(ot,0,!1,at,lt)}(Mt,lt,ht)}return!1},at.prototype.dirtyShape=function(){this.__dirty|=I.RH,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},at.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},at.prototype.animateShape=function(lt){return this.animate("shape",lt)},at.prototype.updateDuringAnimation=function(lt){"style"===lt?this.dirtyStyle():"shape"===lt?this.dirtyShape():this.markRedraw()},at.prototype.attrKV=function(lt,ht){"shape"===lt?this.setShape(ht):ot.prototype.attrKV.call(this,lt,ht)},at.prototype.setShape=function(lt,ht){var vt=this.shape;return vt||(vt=this.shape={}),"string"==typeof lt?vt[lt]=ht:(0,U.extend)(vt,lt),this.dirtyShape(),this},at.prototype.shapeChanged=function(){return!!(this.__dirty&I.RH)},at.prototype.createStyle=function(lt){return(0,U.createObject)(M,lt)},at.prototype._innerSaveToNormal=function(lt){ot.prototype._innerSaveToNormal.call(this,lt);var ht=this._normalState;lt.shape&&!ht.shape&&(ht.shape=(0,U.extend)({},this.shape))},at.prototype._applyStateObj=function(lt,ht,vt,ct,dt,Mt){ot.prototype._applyStateObj.call(this,lt,ht,vt,ct,dt,Mt);var wt,Pt=!(ht&&ct);if(ht&&ht.shape?dt?ct?wt=ht.shape:(wt=(0,U.extend)({},vt.shape),(0,U.extend)(wt,ht.shape)):(wt=(0,U.extend)({},ct?this.shape:vt.shape),(0,U.extend)(wt,ht.shape)):Pt&&(wt=vt.shape),wt)if(dt){this.shape=(0,U.extend)({},this.shape);for(var Ot={},Ft=(0,U.keys)(wt),Ut=0;Ut<Ft.length;Ut++){var kt=Ft[Ut];"object"==typeof wt[kt]?this.shape[kt]=wt[kt]:Ot[kt]=wt[kt]}this._transitionState(lt,{shape:Ot},Mt)}else this.shape=wt,this.dirtyShape()},at.prototype._mergeStates=function(lt){for(var vt,ht=ot.prototype._mergeStates.call(this,lt),ct=0;ct<lt.length;ct++){var dt=lt[ct];dt.shape&&this._mergeStyle(vt=vt||{},dt.shape)}return vt&&(ht.shape=vt),ht},at.prototype.getAnimationStyleProps=function(){return A},at.prototype.isZeroArea=function(){return!1},at.extend=function(lt){var ht=function(ct){function dt(Mt){var Pt=ct.call(this,Mt)||this;return lt.init&&lt.init.call(Pt,Mt),Pt}return(0,B.ZT)(dt,ct),dt.prototype.getDefaultStyle=function(){return(0,U.clone)(lt.style)},dt.prototype.getDefaultShape=function(){return(0,U.clone)(lt.shape)},dt}(at);for(var vt in lt)"function"==typeof lt[vt]&&(ht.prototype[vt]=lt[vt]);return ht},at.initDefaultProps=((lt=at.prototype).type="path",lt.strokeContainThreshold=5,lt.segmentIgnoreThreshold=0,lt.subPixelOptimize=!1,lt.autoBatch=!1,void(lt.__dirty=I.YV|I.SE|I.RH)),at;var lt}(St.ZP)},3033:(Ze,te,D)=>{D.d(te,{Z:()=>_t});var B=D(4311);const _t=function(mt){function gt(yt,V,k,X,q){var N=mt.call(this,X)||this;return N.x=yt??.5,N.y=V??.5,N.r=k??.5,N.type="radial",N.global=q||!1,N}return(0,B.ZT)(gt,mt),gt}(D(808).Z)},3008:(Ze,te,D)=>{D.d(te,{Z:()=>k});var B=D(4311),St=D(4081),n=D(585),_t=D(2477),mt=D(6615),gt=D(800),yt=(0,mt.defaults)({strokeFirst:!0,font:gt.Uo,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},_t.$t),V=function(X){function q(){return null!==X&&X.apply(this,arguments)||this}return(0,B.ZT)(q,X),q.prototype.hasStroke=function(){var N=this.style,et=N.stroke;return null!=et&&"none"!==et&&N.lineWidth>0},q.prototype.hasFill=function(){var et=this.style.fill;return null!=et&&"none"!==et},q.prototype.createStyle=function(N){return(0,mt.createObject)(yt,N)},q.prototype.setBoundingRect=function(N){this._rect=N},q.prototype.getBoundingRect=function(){var N=this.style;if(!this._rect){var et=N.text;null!=et?et+="":et="";var $=(0,n.lP)(et,N.font,N.textAlign,N.textBaseline);if($.x+=N.x||0,$.y+=N.y||0,this.hasStroke()){var st=N.lineWidth;$.x-=st/2,$.y-=st/2,$.width+=st,$.height+=st}this._rect=$}return this._rect},q.initDefaultProps=void(q.prototype.dirtyRectTolerance=10),q}(St.ZP);V.prototype.type="tspan";const k=V},2018:(Ze,te,D)=>{D.d(te,{VG:()=>j,Y1:()=>z,ZP:()=>I});var B=D(4311),St=D(7189),n=D(3008),_t=D(6615),mt=D(585),gt=D(8418),yt=D(4528),V=D(4525),k=D(4081),X=D(800),q={fill:"#000"},et={style:(0,_t.defaults)({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},k.ik.style)},$=function(P){function M(A){var R=P.call(this)||this;return R.type="text",R._children=[],R._defaultStyle=q,R.attr(A),R}return(0,B.ZT)(M,P),M.prototype.childrenRef=function(){return this._children},M.prototype.update=function(){P.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var A=0;A<this._children.length;A++){var R=this._children[A];R.zlevel=this.zlevel,R.z=this.z,R.z2=this.z2,R.culling=this.culling,R.cursor=this.cursor,R.invisible=this.invisible}},M.prototype.updateTransform=function(){var A=this.innerTransformable;A?(A.updateTransform(),A.transform&&(this.transform=A.transform)):P.prototype.updateTransform.call(this)},M.prototype.getLocalTransform=function(A){var R=this.innerTransformable;return R?R.getLocalTransform(A):P.prototype.getLocalTransform.call(this,A)},M.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),P.prototype.getComputedTransform.call(this)},M.prototype._updateSubTexts=function(){this._childCursor=0,function tt(P){J(P),(0,_t.each)(P.rich,J)}(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},M.prototype.addSelfToZr=function(A){P.prototype.addSelfToZr.call(this,A);for(var R=0;R<this._children.length;R++)this._children[R].__zr=A},M.prototype.removeSelfFromZr=function(A){P.prototype.removeSelfFromZr.call(this,A);for(var R=0;R<this._children.length;R++)this._children[R].__zr=null},M.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var A=new V.Z(0,0,0,0),R=this._children,Z=[],rt=null,ot=0;ot<R.length;ot++){var at=R[ot],lt=at.getBoundingRect(),ht=at.getLocalTransform(Z);ht?(A.copy(lt),A.applyTransform(ht),(rt=rt||A.clone()).union(A)):(rt=rt||lt.clone()).union(lt)}this._rect=rt||A}return this._rect},M.prototype.setDefaultTextStyle=function(A){this._defaultStyle=A||q},M.prototype.setTextContent=function(A){},M.prototype._mergeStyle=function(A,R){if(!R)return A;var Z=R.rich,rt=A.rich||Z&&{};return(0,_t.extend)(A,R),Z&&rt?(this._mergeRich(rt,Z),A.rich=rt):rt&&(A.rich=rt),A},M.prototype._mergeRich=function(A,R){for(var Z=(0,_t.keys)(R),rt=0;rt<Z.length;rt++){var ot=Z[rt];A[ot]=A[ot]||{},(0,_t.extend)(A[ot],R[ot])}},M.prototype.getAnimationStyleProps=function(){return et},M.prototype._getOrCreateChild=function(A){var R=this._children[this._childCursor];return(!R||!(R instanceof A))&&(R=new A),this._children[this._childCursor++]=R,R.__zr=this.__zr,R.parent=this,R},M.prototype._updatePlainTexts=function(){var A=this.style,R=A.font||X.Uo,Z=A.padding,rt=w(A),ot=(0,St.NY)(rt,A),at=C(A),lt=!!A.backgroundColor,ht=ot.outerHeight,vt=ot.outerWidth,ct=ot.contentWidth,dt=ot.lines,Mt=ot.lineHeight,Pt=this._defaultStyle,wt=A.x||0,Ot=A.y||0,Ft=A.align||Pt.align||"left",Ut=A.verticalAlign||Pt.verticalAlign||"top",kt=wt,ie=(0,mt.mU)(Ot,ot.contentHeight,Ut);if(at||Z){var ue=(0,mt.M3)(wt,vt,Ft),Pe=(0,mt.mU)(Ot,ht,Ut);at&&this._renderBackground(A,A,ue,Pe,vt,ht)}ie+=Mt/2,Z&&(kt=U(wt,Ft,Z),"top"===Ut?ie+=Z[0]:"bottom"===Ut&&(ie-=Z[2]));for(var Se=0,De=!1,Fe=(nt("fill"in A?A.fill:(De=!0,Pt.fill))),Ye=(Y("stroke"in A?A.stroke:lt||Pt.autoStroke&&!De?null:(Se=2,Pt.stroke))),tr=A.textShadowBlur>0,or=null!=A.width&&("truncate"===A.overflow||"break"===A.overflow||"breakAll"===A.overflow),Hr=ot.calculatedLineHeight,Rr=0;Rr<dt.length;Rr++){var qr=this._getOrCreateChild(n.Z),Vr=qr.createStyle();qr.useStyle(Vr),Vr.text=dt[Rr],Vr.x=kt,Vr.y=ie,Ft&&(Vr.textAlign=Ft),Vr.textBaseline="middle",Vr.opacity=A.opacity,Vr.strokeFirst=!0,tr&&(Vr.shadowBlur=A.textShadowBlur||0,Vr.shadowColor=A.textShadowColor||"transparent",Vr.shadowOffsetX=A.textShadowOffsetX||0,Vr.shadowOffsetY=A.textShadowOffsetY||0),Vr.stroke=Ye,Vr.fill=Fe,Ye&&(Vr.lineWidth=A.lineWidth||Se,Vr.lineDash=A.lineDash,Vr.lineDashOffset=A.lineDashOffset||0),Vr.font=R,it(Vr,A),ie+=Mt,or&&qr.setBoundingRect(new V.Z((0,mt.M3)(Vr.x,A.width,Vr.textAlign),(0,mt.mU)(Vr.y,Hr,Vr.textBaseline),ct,Hr))}},M.prototype._updateRichTexts=function(){var A=this.style,R=w(A),Z=(0,St.$F)(R,A),rt=Z.width,ot=Z.outerWidth,at=Z.outerHeight,lt=A.padding,vt=A.y||0,ct=this._defaultStyle,Mt=A.verticalAlign||ct.verticalAlign,Pt=(0,mt.M3)(A.x||0,ot,A.align||ct.align),wt=(0,mt.mU)(vt,at,Mt),Ot=Pt,Ft=wt;lt&&(Ot+=lt[3],Ft+=lt[0]);var Ut=Ot+rt;C(A)&&this._renderBackground(A,A,Pt,wt,ot,at);for(var kt=!!A.backgroundColor,ie=0;ie<Z.lines.length;ie++){for(var ue=Z.lines[ie],Pe=ue.tokens,Se=Pe.length,De=ue.lineHeight,Fe=ue.width,Ye=0,tr=Ot,or=Ut,Hr=Se-1,Rr=void 0;Ye<Se&&(!(Rr=Pe[Ye]).align||"left"===Rr.align);)this._placeToken(Rr,A,De,Ft,tr,"left",kt),Fe-=Rr.width,tr+=Rr.width,Ye++;for(;Hr>=0&&"right"===(Rr=Pe[Hr]).align;)this._placeToken(Rr,A,De,Ft,or,"right",kt),Fe-=Rr.width,or-=Rr.width,Hr--;for(tr+=(rt-(tr-Ot)-(Ut-or)-Fe)/2;Ye<=Hr;)this._placeToken(Rr=Pe[Ye],A,De,Ft,tr+Rr.width/2,"center",kt),tr+=Rr.width,Ye++;Ft+=De}},M.prototype._placeToken=function(A,R,Z,rt,ot,at,lt){var ht=R.rich[A.styleName]||{};ht.text=A.text;var vt=A.verticalAlign,ct=rt+Z/2;"top"===vt?ct=rt+A.height/2:"bottom"===vt&&(ct=rt+Z-A.height/2),!A.isLineHolder&&C(ht)&&this._renderBackground(ht,R,"right"===at?ot-A.width:"center"===at?ot-A.width/2:ot,ct-A.height/2,A.width,A.height);var Mt=!!ht.backgroundColor,Pt=A.textPadding;Pt&&(ot=U(ot,at,Pt),ct-=A.height/2-Pt[0]-A.innerHeight/2);var wt=this._getOrCreateChild(n.Z),Ot=wt.createStyle();wt.useStyle(Ot);var Ft=this._defaultStyle,Ut=!1,kt=0,ie=nt("fill"in ht?ht.fill:"fill"in R?R.fill:(Ut=!0,Ft.fill)),ue=Y("stroke"in ht?ht.stroke:"stroke"in R?R.stroke:Mt||lt||Ft.autoStroke&&!Ut?null:(kt=2,Ft.stroke)),Pe=ht.textShadowBlur>0||R.textShadowBlur>0;Ot.text=A.text,Ot.x=ot,Ot.y=ct,Pe&&(Ot.shadowBlur=ht.textShadowBlur||R.textShadowBlur||0,Ot.shadowColor=ht.textShadowColor||R.textShadowColor||"transparent",Ot.shadowOffsetX=ht.textShadowOffsetX||R.textShadowOffsetX||0,Ot.shadowOffsetY=ht.textShadowOffsetY||R.textShadowOffsetY||0),Ot.textAlign=at,Ot.textBaseline="middle",Ot.font=A.font||X.Uo,Ot.opacity=(0,_t.retrieve3)(ht.opacity,R.opacity,1),it(Ot,ht),ue&&(Ot.lineWidth=(0,_t.retrieve3)(ht.lineWidth,R.lineWidth,kt),Ot.lineDash=(0,_t.retrieve2)(ht.lineDash,R.lineDash),Ot.lineDashOffset=R.lineDashOffset||0,Ot.stroke=ue),ie&&(Ot.fill=ie);var Se=A.contentWidth,De=A.contentHeight;wt.setBoundingRect(new V.Z((0,mt.M3)(Ot.x,Se,Ot.textAlign),(0,mt.mU)(Ot.y,De,Ot.textBaseline),Se,De))},M.prototype._renderBackground=function(A,R,Z,rt,ot,at){var wt,Ot,Ut,lt=A.backgroundColor,ht=A.borderWidth,vt=A.borderColor,ct=lt&&lt.image,dt=lt&&!ct,Mt=A.borderRadius,Pt=this;if(dt||A.lineHeight||ht&&vt){(wt=this._getOrCreateChild(yt.Z)).useStyle(wt.createStyle()),wt.style.fill=null;var Ft=wt.shape;Ft.x=Z,Ft.y=rt,Ft.width=ot,Ft.height=at,Ft.r=Mt,wt.dirtyShape()}if(dt)(Ut=wt.style).fill=lt||null,Ut.fillOpacity=(0,_t.retrieve2)(A.fillOpacity,1);else if(ct){(Ot=this._getOrCreateChild(gt.ZP)).onload=function(){Pt.dirtyStyle()};var kt=Ot.style;kt.image=lt.image,kt.x=Z,kt.y=rt,kt.width=ot,kt.height=at}ht&&vt&&((Ut=wt.style).lineWidth=ht,Ut.stroke=vt,Ut.strokeOpacity=(0,_t.retrieve2)(A.strokeOpacity,1),Ut.lineDash=A.borderDash,Ut.lineDashOffset=A.borderDashOffset||0,wt.strokeContainThreshold=0,wt.hasFill()&&wt.hasStroke()&&(Ut.strokeFirst=!0,Ut.lineWidth*=2));var ie=(wt||Ot).style;ie.shadowBlur=A.shadowBlur||0,ie.shadowColor=A.shadowColor||"transparent",ie.shadowOffsetX=A.shadowOffsetX||0,ie.shadowOffsetY=A.shadowOffsetY||0,ie.opacity=(0,_t.retrieve3)(A.opacity,R.opacity,1)},M.makeFont=function(A){var R="";return z(A)&&(R=[A.fontStyle,A.fontWeight,j(A.fontSize),A.fontFamily||"sans-serif"].join(" ")),R&&(0,_t.trim)(R)||A.textFont||A.font},M}(k.ZP),st={left:!0,right:1,center:1},K={top:1,bottom:1,middle:1},_=["fontStyle","fontWeight","fontSize","fontFamily"];function j(P){return"string"!=typeof P||-1===P.indexOf("px")&&-1===P.indexOf("rem")&&-1===P.indexOf("em")?isNaN(+P)?X.n5+"px":P+"px":P}function it(P,M){for(var A=0;A<_.length;A++){var R=_[A],Z=M[R];null!=Z&&(P[R]=Z)}}function z(P){return null!=P.fontSize||P.fontFamily||P.fontWeight}function J(P){if(P){P.font=$.makeFont(P);var M=P.align;"middle"===M&&(M="center"),P.align=null==M||st[M]?M:"left";var A=P.verticalAlign;"center"===A&&(A="middle"),P.verticalAlign=null==A||K[A]?A:"top",P.padding&&(P.padding=(0,_t.normalizeCssArray)(P.padding))}}function Y(P,M){return null==P||M<=0||"transparent"===P||"none"===P?null:P.image||P.colorStops?"#000":P}function nt(P){return null==P||"none"===P?null:P.image||P.colorStops?"#000":P}function U(P,M,A){return"right"===M?P-A[1]:"center"===M?P+A[3]/2-A[1]/2:P+A[3]}function w(P){var M=P.text;return null!=M&&(M+=""),M}function C(P){return!!(P.backgroundColor||P.lineHeight||P.borderWidth&&P.borderColor)}const I=$},6195:(Ze,te,D)=>{D.d(te,{RH:()=>n,SE:()=>St,YV:()=>B});var B=1,St=2,n=4},5486:(Ze,te,D)=>{D.d(te,{Gq:()=>mt,ko:()=>_t,v5:()=>yt});var B=D(9286),St=D(800),n=new B.ZP(50);function _t(V){if("string"==typeof V){var k=n.get(V);return k&&k.image}return V}function mt(V,k,X,q,N){if(V){if("string"==typeof V){if(k&&k.__zrImageSrc===V||!X)return k;var et=n.get(V),$={hostEl:X,cb:q,cbPayload:N};return et?!yt(k=et.image)&&et.pending.push($):((k=St.qW.loadImage(V,gt,gt)).__zrImageSrc=V,n.put(V,k.__cachedImgObj={image:k,pending:[$]})),k}return V}return k}function gt(){var V=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var k=0;k<V.pending.length;k++){var X=V.pending[k],q=X.cb;q&&q(this,X.cbPayload),X.hostEl.dirty()}V.pending.length=0}function yt(V){return V&&V.width&&V.height}},7189:(Ze,te,D)=>{D.d(te,{$F:()=>et,NY:()=>k,aF:()=>mt});var B=D(5486),St=D(6615),n=D(585),_t=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function mt(it,z,tt,J,Y){if(!z)return"";var nt=(it+"").split("\n");Y=gt(z,tt,J,Y);for(var U=0,w=nt.length;U<w;U++)nt[U]=yt(nt[U],Y);return nt.join("\n")}function gt(it,z,tt,J){var Y=(0,St.extend)({},J=J||{});Y.font=z,tt=(0,St.retrieve2)(tt,"..."),Y.maxIterations=(0,St.retrieve2)(J.maxIterations,2);var nt=Y.minChar=(0,St.retrieve2)(J.minChar,0);Y.cnCharWidth=(0,n.dz)("\u56fd",z);var U=Y.ascCharWidth=(0,n.dz)("a",z);Y.placeholder=(0,St.retrieve2)(J.placeholder,"");for(var w=it=Math.max(0,it-1),C=0;C<nt&&w>=U;C++)w-=U;var I=(0,n.dz)(tt,z);return I>w&&(tt="",I=0),w=it-I,Y.ellipsis=tt,Y.ellipsisWidth=I,Y.contentWidth=w,Y.containerWidth=it,Y}function yt(it,z){var tt=z.containerWidth,J=z.font,Y=z.contentWidth;if(!tt)return"";var nt=(0,n.dz)(it,J);if(nt<=tt)return it;for(var U=0;;U++){if(nt<=Y||U>=z.maxIterations){it+=z.ellipsis;break}var w=0===U?V(it,Y,z.ascCharWidth,z.cnCharWidth):nt>0?Math.floor(it.length*Y/nt):0;it=it.substr(0,w),nt=(0,n.dz)(it,J)}return""===it&&(it=z.placeholder),it}function V(it,z,tt,J){for(var Y=0,nt=0,U=it.length;nt<U&&Y<z;nt++){var w=it.charCodeAt(nt);Y+=0<=w&&w<=127?tt:J}return nt}function k(it,z){null!=it&&(it+="");var M,tt=z.overflow,J=z.padding,Y=z.font,nt="truncate"===tt,U=(0,n.Dp)(Y),w=(0,St.retrieve2)(z.lineHeight,U),C=!!z.backgroundColor,I="truncate"===z.lineOverflow,P=z.width,A=(M=null==P||"break"!==tt&&"breakAll"!==tt?it?it.split("\n"):[]:it?j(it,z.font,P,"breakAll"===tt,0).lines:[]).length*w,R=(0,St.retrieve2)(z.height,A);if(A>R&&I){var Z=Math.floor(R/w);M=M.slice(0,Z)}if(it&&nt&&null!=P)for(var rt=gt(P,Y,z.ellipsis,{minChar:z.truncateMinChar,placeholder:z.placeholder}),ot=0;ot<M.length;ot++)M[ot]=yt(M[ot],rt);var at=R,lt=0;for(ot=0;ot<M.length;ot++)lt=Math.max((0,n.dz)(M[ot],Y),lt);null==P&&(P=lt);var ht=lt;return J&&(at+=J[0]+J[2],ht+=J[1]+J[3],P+=J[1]+J[3]),C&&(ht=P),{lines:M,height:R,outerWidth:ht,outerHeight:at,lineHeight:w,calculatedLineHeight:U,contentWidth:lt,contentHeight:A,width:P}}var X=function it(){},q=function it(z){this.tokens=[],z&&(this.tokens=z)},N=function it(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function et(it,z){var tt=new N;if(null!=it&&(it+=""),!it)return tt;for(var C,J=z.width,Y=z.height,nt=z.overflow,U="break"!==nt&&"breakAll"!==nt||null==J?null:{width:J,accumWidth:0,breakAll:"breakAll"===nt},w=_t.lastIndex=0;null!=(C=_t.exec(it));){var I=C.index;I>w&&$(tt,it.substring(w,I),z,U),$(tt,C[2],z,U,C[1]),w=_t.lastIndex}w<it.length&&$(tt,it.substring(w,it.length),z,U);var P=[],M=0,A=0,R=z.padding,Z="truncate"===nt,rt="truncate"===z.lineOverflow;function ot(De,Fe,Ye){De.width=Fe,De.lineHeight=Ye,M+=Ye,A=Math.max(A,Fe)}t:for(var at=0;at<tt.lines.length;at++){for(var lt=tt.lines[at],ht=0,vt=0,ct=0;ct<lt.tokens.length;ct++){var Mt=(dt=lt.tokens[ct]).styleName&&z.rich[dt.styleName]||{},Pt=dt.textPadding=Mt.padding,wt=Pt?Pt[1]+Pt[3]:0,Ot=dt.font=Mt.font||z.font;dt.contentHeight=(0,n.Dp)(Ot);var Ft=(0,St.retrieve2)(Mt.height,dt.contentHeight);if(dt.innerHeight=Ft,Pt&&(Ft+=Pt[0]+Pt[2]),dt.height=Ft,dt.lineHeight=(0,St.retrieve3)(Mt.lineHeight,z.lineHeight,Ft),dt.align=Mt&&Mt.align||z.align,dt.verticalAlign=Mt&&Mt.verticalAlign||"middle",rt&&null!=Y&&M+dt.lineHeight>Y){ct>0?(lt.tokens=lt.tokens.slice(0,ct),ot(lt,vt,ht),tt.lines=tt.lines.slice(0,at+1)):tt.lines=tt.lines.slice(0,at);break t}var Ut=Mt.width,kt=null==Ut||"auto"===Ut;if("string"==typeof Ut&&"%"===Ut.charAt(Ut.length-1))dt.percentWidth=Ut,P.push(dt),dt.contentWidth=(0,n.dz)(dt.text,Ot);else{if(kt){var ie=Mt.backgroundColor,ue=ie&&ie.image;ue&&(ue=B.ko(ue),B.v5(ue)&&(dt.width=Math.max(dt.width,ue.width*Ft/ue.height)))}var Pe=Z&&null!=J?J-vt:null;null!=Pe&&Pe<dt.width?!kt||Pe<wt?(dt.text="",dt.width=dt.contentWidth=0):(dt.text=mt(dt.text,Pe-wt,Ot,z.ellipsis,{minChar:z.truncateMinChar}),dt.width=dt.contentWidth=(0,n.dz)(dt.text,Ot)):dt.contentWidth=(0,n.dz)(dt.text,Ot)}dt.width+=wt,vt+=dt.width,Mt&&(ht=Math.max(ht,dt.lineHeight))}ot(lt,vt,ht)}for(tt.outerWidth=tt.width=(0,St.retrieve2)(J,A),tt.outerHeight=tt.height=(0,St.retrieve2)(Y,M),tt.contentHeight=M,tt.contentWidth=A,R&&(tt.outerWidth+=R[1]+R[3],tt.outerHeight+=R[0]+R[2]),at=0;at<P.length;at++){var dt;(dt=P[at]).width=parseInt(dt.percentWidth,10)/100*tt.width}return tt}function $(it,z,tt,J,Y){var P,M,nt=""===z,U=Y&&tt.rich[Y]||{},w=it.lines,C=U.font||tt.font,I=!1;if(J){var A=U.padding,R=A?A[1]+A[3]:0;if(null!=U.width&&"auto"!==U.width){var Z=(0,n.GM)(U.width,J.width)+R;w.length>0&&Z+J.accumWidth>J.width&&(P=z.split("\n"),I=!0),J.accumWidth=Z}else{var rt=j(z,C,J.width,J.breakAll,J.accumWidth);J.accumWidth=rt.accumWidth+R,M=rt.linesWidths,P=rt.lines}}else P=z.split("\n");for(var ot=0;ot<P.length;ot++){var at=P[ot],lt=new X;if(lt.styleName=Y,lt.text=at,lt.isLineHolder=!at&&!nt,lt.width="number"==typeof U.width?U.width:M?M[ot]:(0,n.dz)(at,C),ot||I)w.push(new q([lt]));else{var ht=(w[w.length-1]||(w[0]=new q)).tokens,vt=ht.length;1===vt&&ht[0].isLineHolder?ht[0]=lt:(at||!vt||nt)&&ht.push(lt)}}}var K=(0,St.reduce)(",&?/;] ".split(""),function(it,z){return it[z]=!0,it},{});function _(it){return!function st(it){var z=it.charCodeAt(0);return z>=33&&z<=383}(it)||!!K[it]}function j(it,z,tt,J,Y){for(var nt=[],U=[],w="",C="",I=0,P=0,M=0;M<it.length;M++){var A=it.charAt(M);if("\n"!==A){var R=(0,n.dz)(A,z),Z=!J&&!_(A);(nt.length?P+R>tt:Y+P+R>tt)?P?(w||C)&&(Z?(w||(w=C,C="",P=I=0),nt.push(w),U.push(P-I),C+=A,w="",P=I+=R):(C&&(w+=C,C="",I=0),nt.push(w),U.push(P),w=A,P=R)):Z?(nt.push(C),U.push(I),C=A,I=R):(nt.push(A),U.push(R)):(P+=R,Z?(C+=A,I+=R):(C&&(w+=C,C="",I=0),w+=A))}else C&&(w+=C,P+=I),nt.push(w),U.push(P),w="",C="",I=0,P=0}return!nt.length&&!w&&(w=it,C="",I=0),C&&(w+=C),w&&(nt.push(w),U.push(P)),1===nt.length&&(P+=Y),{accumWidth:P,lines:nt,linesWidths:U}}},139:(Ze,te,D)=>{D.d(te,{L:()=>n});var B=D(8544);function n(_t,mt,gt){var yt=mt.smooth,V=mt.points;if(V&&V.length>=2){if(yt){var k=function St(_t,mt,gt,yt){var N,et,$,st,V=[],k=[],X=[],q=[];if(yt){$=[1/0,1/0],st=[-1/0,-1/0];for(var K=0,_=_t.length;K<_;K++)(0,B.min)($,$,_t[K]),(0,B.max)(st,st,_t[K]);(0,B.min)($,$,yt[0]),(0,B.max)(st,st,yt[1])}for(K=0,_=_t.length;K<_;K++){var j=_t[K];if(gt)N=_t[K?K-1:_-1],et=_t[(K+1)%_];else{if(0===K||K===_-1){V.push((0,B.clone)(_t[K]));continue}N=_t[K-1],et=_t[K+1]}(0,B.sub)(k,et,N),(0,B.scale)(k,k,mt);var it=(0,B.distance)(j,N),z=(0,B.distance)(j,et),tt=it+z;0!==tt&&(it/=tt,z/=tt),(0,B.scale)(X,k,-it),(0,B.scale)(q,k,z);var J=(0,B.add)([],j,X),Y=(0,B.add)([],j,q);yt&&((0,B.max)(J,J,$),(0,B.min)(J,J,st),(0,B.max)(Y,Y,$),(0,B.min)(Y,Y,st)),V.push(J),V.push(Y)}return gt&&V.push(V.shift()),V}(V,yt,gt,mt.smoothConstraint);_t.moveTo(V[0][0],V[0][1]);for(var X=V.length,q=0;q<(gt?X:X-1);q++){var N=k[2*q],et=k[2*q+1],$=V[(q+1)%X];_t.bezierCurveTo(N[0],N[1],et[0],et[1],$[0],$[1])}}else{_t.moveTo(V[0][0],V[0][1]),q=1;for(var st=V.length;q<st;q++)_t.lineTo(V[q][0],V[q][1])}gt&&_t.closePath()}}},7441:(Ze,te,D)=>{D.d(te,{Pw:()=>n,_3:()=>St,vu:()=>_t});var B=Math.round;function St(mt,gt,yt){if(gt){var V=gt.x1,k=gt.x2,X=gt.y1,q=gt.y2;mt.x1=V,mt.x2=k,mt.y1=X,mt.y2=q;var N=yt&&yt.lineWidth;return N&&(B(2*V)===B(2*k)&&(mt.x1=mt.x2=_t(V,N,!0)),B(2*X)===B(2*q)&&(mt.y1=mt.y2=_t(X,N,!0))),mt}}function n(mt,gt,yt){if(gt){var V=gt.x,k=gt.y,X=gt.width,q=gt.height;mt.x=V,mt.y=k,mt.width=X,mt.height=q;var N=yt&&yt.lineWidth;return N&&(mt.x=_t(V,N,!0),mt.y=_t(k,N,!0),mt.width=Math.max(_t(V+X,N,!1)-mt.x,0===X?0:1),mt.height=Math.max(_t(k+q,N,!1)-mt.y,0===q?0:1)),mt}}function _t(mt,gt,yt){if(!gt)return mt;var V=B(2*mt);return(V+B(gt))%2==0?V/2:(V+(yt?1:-1))/2}},8281:(Ze,te,D)=>{D.d(te,{Z:()=>mt});var B=D(4311),St=D(2477),n=function gt(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},_t=function(gt){function yt(V){return gt.call(this,V)||this}return(0,B.ZT)(yt,gt),yt.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},yt.prototype.getDefaultShape=function(){return new n},yt.prototype.buildPath=function(V,k){var X=k.cx,q=k.cy,N=Math.max(k.r,0),et=k.startAngle,$=k.endAngle,st=k.clockwise,K=Math.cos(et),_=Math.sin(et);V.moveTo(K*N+X,_*N+q),V.arc(X,q,N,et,$,!st)},yt}(St.ZP);_t.prototype.type="arc";const mt=_t},1838:(Ze,te,D)=>{D.d(te,{Z:()=>k});var B=D(4311),St=D(2477),n=D(8544),_t=D(6846),mt=[],gt=function X(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function yt(X,q,N){return null!=X.cpx2||null!=X.cpy2?[(N?_t.X_:_t.af)(X.x1,X.cpx1,X.cpx2,X.x2,q),(N?_t.X_:_t.af)(X.y1,X.cpy1,X.cpy2,X.y2,q)]:[(N?_t.AZ:_t.Zm)(X.x1,X.cpx1,X.x2,q),(N?_t.AZ:_t.Zm)(X.y1,X.cpy1,X.y2,q)]}var V=function(X){function q(N){return X.call(this,N)||this}return(0,B.ZT)(q,X),q.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},q.prototype.getDefaultShape=function(){return new gt},q.prototype.buildPath=function(N,et){var $=et.x1,st=et.y1,K=et.x2,_=et.y2,j=et.cpx1,it=et.cpy1,z=et.cpx2,tt=et.cpy2,J=et.percent;0!==J&&(N.moveTo($,st),null==z||null==tt?(J<1&&((0,_t.Lx)($,j,K,J,mt),j=mt[1],K=mt[2],(0,_t.Lx)(st,it,_,J,mt),it=mt[1],_=mt[2]),N.quadraticCurveTo(j,it,K,_)):(J<1&&((0,_t.Vz)($,j,z,K,J,mt),j=mt[1],z=mt[2],K=mt[3],(0,_t.Vz)(st,it,tt,_,J,mt),it=mt[1],tt=mt[2],_=mt[3]),N.bezierCurveTo(j,it,z,tt,K,_)))},q.prototype.pointAt=function(N){return yt(this.shape,N,!1)},q.prototype.tangentAt=function(N){var et=yt(this.shape,N,!0);return n.normalize(et,et)},q}(St.ZP);V.prototype.type="bezier-curve";const k=V},7610:(Ze,te,D)=>{D.d(te,{Z:()=>mt});var B=D(4311),St=D(2477),n=function gt(){this.cx=0,this.cy=0,this.r=0},_t=function(gt){function yt(V){return gt.call(this,V)||this}return(0,B.ZT)(yt,gt),yt.prototype.getDefaultShape=function(){return new n},yt.prototype.buildPath=function(V,k){V.moveTo(k.cx+k.r,k.cy),V.arc(k.cx,k.cy,k.r,0,2*Math.PI)},yt}(St.ZP);_t.prototype.type="circle";const mt=_t},3572:(Ze,te,D)=>{D.d(te,{Z:()=>mt});var B=D(4311),St=D(2477),n=function gt(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},_t=function(gt){function yt(V){return gt.call(this,V)||this}return(0,B.ZT)(yt,gt),yt.prototype.getDefaultShape=function(){return new n},yt.prototype.buildPath=function(V,k){var X=.5522848,q=k.cx,N=k.cy,et=k.rx,$=k.ry,st=et*X,K=$*X;V.moveTo(q-et,N),V.bezierCurveTo(q-et,N-K,q-st,N-$,q,N-$),V.bezierCurveTo(q+st,N-$,q+et,N-K,q+et,N),V.bezierCurveTo(q+et,N+K,q+st,N+$,q,N+$),V.bezierCurveTo(q-st,N+$,q-et,N+K,q-et,N),V.closePath()},yt}(St.ZP);_t.prototype.type="ellipse";const mt=_t},541:(Ze,te,D)=>{D.d(te,{Z:()=>yt});var B=D(4311),St=D(2477),n=D(7441),_t={},mt=function V(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},gt=function(V){function k(X){return V.call(this,X)||this}return(0,B.ZT)(k,V),k.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},k.prototype.getDefaultShape=function(){return new mt},k.prototype.buildPath=function(X,q){var N,et,$,st;if(this.subPixelOptimize){var K=(0,n._3)(_t,q,this.style);N=K.x1,et=K.y1,$=K.x2,st=K.y2}else N=q.x1,et=q.y1,$=q.x2,st=q.y2;var _=q.percent;0!==_&&(X.moveTo(N,et),_<1&&($=N*(1-_)+$*_,st=et*(1-_)+st*_),X.lineTo($,st))},k.prototype.pointAt=function(X){var q=this.shape;return[q.x1*(1-X)+q.x2*X,q.y1*(1-X)+q.y2*X]},k}(St.ZP);gt.prototype.type="line";const yt=gt},8015:(Ze,te,D)=>{D.d(te,{Z:()=>gt});var B=D(4311),St=D(2477),n=D(139),_t=function yt(){this.points=null,this.smooth=0,this.smoothConstraint=null},mt=function(yt){function V(k){return yt.call(this,k)||this}return(0,B.ZT)(V,yt),V.prototype.getDefaultShape=function(){return new _t},V.prototype.buildPath=function(k,X){n.L(k,X,!0)},V}(St.ZP);mt.prototype.type="polygon";const gt=mt},3628:(Ze,te,D)=>{D.d(te,{Z:()=>gt});var B=D(4311),St=D(2477),n=D(139),_t=function yt(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},mt=function(yt){function V(k){return yt.call(this,k)||this}return(0,B.ZT)(V,yt),V.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},V.prototype.getDefaultShape=function(){return new _t},V.prototype.buildPath=function(k,X){n.L(k,X,!1)},V}(St.ZP);mt.prototype.type="polyline";const gt=mt},4528:(Ze,te,D)=>{D.d(te,{Z:()=>V});var B=D(4311),St=D(2477),_t=D(7441),mt=function k(){this.x=0,this.y=0,this.width=0,this.height=0},gt={},yt=function(k){function X(q){return k.call(this,q)||this}return(0,B.ZT)(X,k),X.prototype.getDefaultShape=function(){return new mt},X.prototype.buildPath=function(q,N){var et,$,st,K;if(this.subPixelOptimize){var _=(0,_t.Pw)(gt,N,this.style);et=_.x,$=_.y,st=_.width,K=_.height,_.r=N.r,N=_}else et=N.x,$=N.y,st=N.width,K=N.height;N.r?function n(k,X){var K,_,j,it,z,q=X.x,N=X.y,et=X.width,$=X.height,st=X.r;et<0&&(q+=et,et=-et),$<0&&(N+=$,$=-$),"number"==typeof st?K=_=j=it=st:st instanceof Array?1===st.length?K=_=j=it=st[0]:2===st.length?(K=j=st[0],_=it=st[1]):3===st.length?(K=st[0],_=it=st[1],j=st[2]):(K=st[0],_=st[1],j=st[2],it=st[3]):K=_=j=it=0,K+_>et&&(K*=et/(z=K+_),_*=et/z),j+it>et&&(j*=et/(z=j+it),it*=et/z),_+j>$&&(_*=$/(z=_+j),j*=$/z),K+it>$&&(K*=$/(z=K+it),it*=$/z),k.moveTo(q+K,N),k.lineTo(q+et-_,N),0!==_&&k.arc(q+et-_,N+_,_,-Math.PI/2,0),k.lineTo(q+et,N+$-j),0!==j&&k.arc(q+et-j,N+$-j,j,0,Math.PI/2),k.lineTo(q+it,N+$),0!==it&&k.arc(q+it,N+$-it,it,Math.PI/2,Math.PI),k.lineTo(q,N+K),0!==K&&k.arc(q+K,N+K,K,Math.PI,1.5*Math.PI)}(q,N):q.rect(et,$,st,K)},X.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},X}(St.ZP);yt.prototype.type="rect";const V=yt},2283:(Ze,te,D)=>{D.d(te,{Z:()=>mt});var B=D(4311),St=D(2477),n=function gt(){this.cx=0,this.cy=0,this.r=0,this.r0=0},_t=function(gt){function yt(V){return gt.call(this,V)||this}return(0,B.ZT)(yt,gt),yt.prototype.getDefaultShape=function(){return new n},yt.prototype.buildPath=function(V,k){var X=k.cx,q=k.cy,N=2*Math.PI;V.moveTo(X+k.r,q),V.arc(X,q,k.r,0,N,!1),V.moveTo(X+k.r0,q),V.arc(X,q,k.r0,0,N,!0)},yt}(St.ZP);_t.prototype.type="ring";const mt=_t},785:(Ze,te,D)=>{D.d(te,{C:()=>tt});var B=D(4311),St=D(2477),n=D(6615),_t=Math.PI,mt=2*_t,gt=Math.sin,yt=Math.cos,V=Math.acos,k=Math.atan2,X=Math.abs,q=Math.sqrt,N=Math.max,et=Math.min,$=1e-4;function K(J,Y,nt,U,w,C,I){var P=J-nt,M=Y-U,A=(I?C:-C)/q(P*P+M*M),R=A*M,Z=-A*P,rt=J+R,ot=Y+Z,at=nt+R,lt=U+Z,ht=(rt+at)/2,vt=(ot+lt)/2,ct=at-rt,dt=lt-ot,Mt=ct*ct+dt*dt,Pt=w-C,wt=rt*lt-at*ot,Ot=(dt<0?-1:1)*q(N(0,Pt*Pt*Mt-wt*wt)),Ft=(wt*dt-ct*Ot)/Mt,Ut=(-wt*ct-dt*Ot)/Mt,kt=(wt*dt+ct*Ot)/Mt,ie=(-wt*ct+dt*Ot)/Mt,ue=Ft-ht,Pe=Ut-vt,Se=kt-ht,De=ie-vt;return ue*ue+Pe*Pe>Se*Se+De*De&&(Ft=kt,Ut=ie),{cx:Ft,cy:Ut,x0:-R,y0:-Z,x1:Ft*(w/Pt-1),y1:Ut*(w/Pt-1)}}var it=function J(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},z=function(J){function Y(nt){return J.call(this,nt)||this}return(0,B.ZT)(Y,J),Y.prototype.getDefaultShape=function(){return new it},Y.prototype.buildPath=function(nt,U){!function j(J,Y){var nt,U=N(Y.r,0),w=N(Y.r0||0,0),C=U>0;if(C||w>0){if(C||(U=w,w=0),w>U){var P=U;U=w,w=P}var M=Y.startAngle,A=Y.endAngle;if(!isNaN(M)&&!isNaN(A)){var R=Y.cx,Z=Y.cy,rt=!!Y.clockwise,ot=X(A-M),at=ot>mt&&ot%mt;if(at>$&&(ot=at),U>$)if(ot>mt-$)J.moveTo(R+U*yt(M),Z+U*gt(M)),J.arc(R,Z,U,M,A,!rt),w>$&&(J.moveTo(R+w*yt(A),Z+w*gt(A)),J.arc(R,Z,w,A,M,rt));else{var lt=void 0,ht=void 0,vt=void 0,ct=void 0,dt=void 0,Mt=void 0,Pt=void 0,wt=void 0,Ot=void 0,Ft=void 0,Ut=void 0,kt=void 0,ie=void 0,ue=void 0,Pe=void 0,Se=void 0,De=U*yt(M),Fe=U*gt(M),Ye=w*yt(A),tr=w*gt(A),or=ot>$;if(or){var Hr=Y.cornerRadius;Hr&&(nt=function _(J){var Y;if((0,n.isArray)(J)){var nt=J.length;if(!nt)return J;Y=1===nt?[J[0],J[0],0,0]:2===nt?[J[0],J[0],J[1],J[1]]:3===nt?J.concat(J[2]):J}else Y=[J,J,J,J];return Y}(Hr),lt=nt[0],ht=nt[1],vt=nt[2],ct=nt[3]);var Rr=X(U-w)/2;if(dt=et(Rr,vt),Mt=et(Rr,ct),Pt=et(Rr,lt),wt=et(Rr,ht),Ut=Ot=N(dt,Mt),kt=Ft=N(Pt,wt),(Ot>$||Ft>$)&&(ie=U*yt(A),ue=U*gt(A),Pe=w*yt(M),Se=w*gt(M),ot<_t)){var qr=function st(J,Y,nt,U,w,C,I,P){var M=nt-J,A=U-Y,R=I-w,Z=P-C,rt=Z*M-R*A;if(!(rt*rt<$))return[J+(rt=(R*(Y-C)-Z*(J-w))/rt)*M,Y+rt*A]}(De,Fe,Pe,Se,ie,ue,Ye,tr);if(qr){var Vr=De-qr[0],Ve=Fe-qr[1],er=ie-qr[0],Ar=ue-qr[1],Lr=1/gt(V((Vr*er+Ve*Ar)/(q(Vr*Vr+Ve*Ve)*q(er*er+Ar*Ar)))/2),Cr=q(qr[0]*qr[0]+qr[1]*qr[1]);Ut=et(Ot,(U-Cr)/(Lr+1)),kt=et(Ft,(w-Cr)/(Lr-1))}}}if(or)if(Ut>$){var Zr=et(vt,Ut),Nr=et(ct,Ut),re=K(Pe,Se,De,Fe,U,Zr,rt),pe=K(ie,ue,Ye,tr,U,Nr,rt);J.moveTo(R+re.cx+re.x0,Z+re.cy+re.y0),Ut<Ot&&Zr===Nr?J.arc(R+re.cx,Z+re.cy,Ut,k(re.y0,re.x0),k(pe.y0,pe.x0),!rt):(Zr>0&&J.arc(R+re.cx,Z+re.cy,Zr,k(re.y0,re.x0),k(re.y1,re.x1),!rt),J.arc(R,Z,U,k(re.cy+re.y1,re.cx+re.x1),k(pe.cy+pe.y1,pe.cx+pe.x1),!rt),Nr>0&&J.arc(R+pe.cx,Z+pe.cy,Nr,k(pe.y1,pe.x1),k(pe.y0,pe.x0),!rt))}else J.moveTo(R+De,Z+Fe),J.arc(R,Z,U,M,A,!rt);else J.moveTo(R+De,Z+Fe);w>$&&or?kt>$?(Zr=et(lt,kt),re=K(Ye,tr,ie,ue,w,-(Nr=et(ht,kt)),rt),pe=K(De,Fe,Pe,Se,w,-Zr,rt),J.lineTo(R+re.cx+re.x0,Z+re.cy+re.y0),kt<Ft&&Zr===Nr?J.arc(R+re.cx,Z+re.cy,kt,k(re.y0,re.x0),k(pe.y0,pe.x0),!rt):(Nr>0&&J.arc(R+re.cx,Z+re.cy,Nr,k(re.y0,re.x0),k(re.y1,re.x1),!rt),J.arc(R,Z,w,k(re.cy+re.y1,re.cx+re.x1),k(pe.cy+pe.y1,pe.cx+pe.x1),rt),Zr>0&&J.arc(R+pe.cx,Z+pe.cy,Zr,k(pe.y1,pe.x1),k(pe.y0,pe.x0),!rt))):(J.lineTo(R+Ye,Z+tr),J.arc(R,Z,w,A,M,rt)):J.lineTo(R+Ye,Z+tr)}else J.moveTo(R,Z);J.closePath()}}}(nt,U)},Y.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},Y}(St.ZP);z.prototype.type="sector";const tt=z},4687:(Ze,te,D)=>{D.d(te,{Cv:()=>_,Gk:()=>nt,H3:()=>J,I1:()=>z,Pn:()=>k,R:()=>it,gA:()=>U,gO:()=>tt,i2:()=>$,jY:()=>N,m1:()=>Y,mU:()=>et,n1:()=>st,oF:()=>w,qV:()=>q,ut:()=>mt,zT:()=>yt});var B=D(6615),St=D(754),n=D(1156),_t=Math.round;function mt(C){var I;if(C&&"transparent"!==C){if("string"==typeof C&&C.indexOf("rgba")>-1){var P=(0,St.parse)(C);P&&(C="rgb("+P[0]+","+P[1]+","+P[2]+")",I=P[3])}}else C="none";return{color:C,opacity:I??1}}function yt(C){return C<1e-4&&C>-1e-4}function V(C){return _t(1e3*C)/1e3}function k(C){return _t(1e4*C)/1e4}function q(C){return"matrix("+V(C[0])+","+V(C[1])+","+V(C[2])+","+V(C[3])+","+k(C[4])+","+k(C[5])+")"}var N={left:"start",right:"end",center:"middle",middle:"middle"};function et(C,I,P){return"top"===P?C+=I/2:"bottom"===P&&(C-=I/2),C}function $(C){return C&&(C.shadowBlur||C.shadowOffsetX||C.shadowOffsetY)}function st(C){var I=C.style,P=C.getGlobalScale();return[I.shadowColor,(I.shadowBlur||0).toFixed(2),(I.shadowOffsetX||0).toFixed(2),(I.shadowOffsetY||0).toFixed(2),P[0],P[1]].join(",")}function _(C){return C&&!!C.image}function it(C){return _(C)||function j(C){return C&&!!C.svgElement}(C)}function z(C){return"linear"===C.type}function tt(C){return"radial"===C.type}function J(C){return C&&("linear"===C.type||"radial"===C.type)}function Y(C){return"url(#"+C+")"}function nt(C){var I=C.getGlobalScale(),P=Math.max(I[0],I[1]);return Math.max(Math.ceil(Math.log(P)/Math.log(10)),1)}function U(C){var I=C.x||0,P=C.y||0,M=(C.rotation||0)*B.RADIAN_TO_DEGREE,A=(0,B.retrieve2)(C.scaleX,1),R=(0,B.retrieve2)(C.scaleY,1),Z=C.skewX||0,rt=C.skewY||0,ot=[];return(I||P)&&ot.push("translate("+I+"px,"+P+"px)"),M&&ot.push("rotate("+M+")"),(1!==A||1!==R)&&ot.push("scale("+A+","+R+")"),(Z||rt)&&ot.push("skew("+_t(Z*B.RADIAN_TO_DEGREE)+"deg, "+_t(rt*B.RADIAN_TO_DEGREE)+"deg)"),ot.join(" ")}var w=n.Z.hasGlobalWindow&&(0,B.isFunction)(window.btoa)?function(C){return window.btoa(unescape(encodeURIComponent(C)))}:typeof Buffer<"u"?function(C){return Buffer.from(C).toString("base64")}:function(C){return null}},754:(Ze,te,D)=>{D.r(te),D.d(te,{fastLerp:()=>z,fastMapToColor:()=>tt,lerp:()=>J,lift:()=>j,lum:()=>C,mapToColor:()=>Y,modifyAlpha:()=>U,modifyHSL:()=>nt,parse:()=>st,random:()=>I,stringify:()=>w,toHex:()=>it});var B=D(9286),St={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(P){return(P=Math.round(P))<0?0:P>255?255:P}function mt(P){return P<0?0:P>1?1:P}function gt(P){var M=P;return M.length&&"%"===M.charAt(M.length-1)?n(parseFloat(M)/100*255):n(parseInt(M,10))}function yt(P){var M=P;return M.length&&"%"===M.charAt(M.length-1)?mt(parseFloat(M)/100):mt(parseFloat(M))}function V(P,M,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?P+(M-P)*A*6:2*A<1?M:3*A<2?P+(M-P)*(2/3-A)*6:P}function k(P,M,A){return P+(M-P)*A}function X(P,M,A,R,Z){return P[0]=M,P[1]=A,P[2]=R,P[3]=Z,P}function q(P,M){return P[0]=M[0],P[1]=M[1],P[2]=M[2],P[3]=M[3],P}var N=new B.ZP(20),et=null;function $(P,M){et&&q(et,M),et=N.put(P,et||M.slice())}function st(P,M){if(P){M=M||[];var A=N.get(P);if(A)return q(M,A);var R=(P+="").replace(/ /g,"").toLowerCase();if(R in St)return q(M,St[R]),$(P,M),M;var rt,Z=R.length;if("#"===R.charAt(0))return 4===Z||5===Z?(rt=parseInt(R.slice(1,4),16))>=0&&rt<=4095?(X(M,(3840&rt)>>4|(3840&rt)>>8,240&rt|(240&rt)>>4,15&rt|(15&rt)<<4,5===Z?parseInt(R.slice(4),16)/15:1),$(P,M),M):void X(M,0,0,0,1):7===Z||9===Z?(rt=parseInt(R.slice(1,7),16))>=0&&rt<=16777215?(X(M,(16711680&rt)>>16,(65280&rt)>>8,255&rt,9===Z?parseInt(R.slice(7),16)/255:1),$(P,M),M):void X(M,0,0,0,1):void 0;var ot=R.indexOf("("),at=R.indexOf(")");if(-1!==ot&&at+1===Z){var lt=R.substr(0,ot),ht=R.substr(ot+1,at-(ot+1)).split(","),vt=1;switch(lt){case"rgba":if(4!==ht.length)return 3===ht.length?X(M,+ht[0],+ht[1],+ht[2],1):X(M,0,0,0,1);vt=yt(ht.pop());case"rgb":return ht.length>=3?(X(M,gt(ht[0]),gt(ht[1]),gt(ht[2]),3===ht.length?vt:yt(ht[3])),$(P,M),M):void X(M,0,0,0,1);case"hsla":return 4!==ht.length?void X(M,0,0,0,1):(ht[3]=yt(ht[3]),K(ht,M),$(P,M),M);case"hsl":return 3!==ht.length?void X(M,0,0,0,1):(K(ht,M),$(P,M),M);default:return}}X(M,0,0,0,1)}}function K(P,M){var A=(parseFloat(P[0])%360+360)%360/360,R=yt(P[1]),Z=yt(P[2]),rt=Z<=.5?Z*(R+1):Z+R-Z*R,ot=2*Z-rt;return X(M=M||[],n(255*V(ot,rt,A+1/3)),n(255*V(ot,rt,A)),n(255*V(ot,rt,A-1/3)),1),4===P.length&&(M[3]=P[3]),M}function j(P,M){var A=st(P);if(A){for(var R=0;R<3;R++)A[R]=M<0?A[R]*(1-M)|0:(255-A[R])*M+A[R]|0,A[R]>255?A[R]=255:A[R]<0&&(A[R]=0);return w(A,4===A.length?"rgba":"rgb")}}function it(P){var M=st(P);if(M)return((1<<24)+(M[0]<<16)+(M[1]<<8)+ +M[2]).toString(16).slice(1)}function z(P,M,A){if(M&&M.length&&P>=0&&P<=1){A=A||[];var R=P*(M.length-1),Z=Math.floor(R),rt=Math.ceil(R),ot=M[Z],at=M[rt],lt=R-Z;return A[0]=n(k(ot[0],at[0],lt)),A[1]=n(k(ot[1],at[1],lt)),A[2]=n(k(ot[2],at[2],lt)),A[3]=mt(k(ot[3],at[3],lt)),A}}var tt=z;function J(P,M,A){if(M&&M.length&&P>=0&&P<=1){var R=P*(M.length-1),Z=Math.floor(R),rt=Math.ceil(R),ot=st(M[Z]),at=st(M[rt]),lt=R-Z,ht=w([n(k(ot[0],at[0],lt)),n(k(ot[1],at[1],lt)),n(k(ot[2],at[2],lt)),mt(k(ot[3],at[3],lt))],"rgba");return A?{color:ht,leftIndex:Z,rightIndex:rt,value:R}:ht}}var Y=J;function nt(P,M,A,R){var Z=st(P);if(P)return Z=function _(P){if(P){var lt,ht,M=P[0]/255,A=P[1]/255,R=P[2]/255,Z=Math.min(M,A,R),rt=Math.max(M,A,R),ot=rt-Z,at=(rt+Z)/2;if(0===ot)lt=0,ht=0;else{ht=at<.5?ot/(rt+Z):ot/(2-rt-Z);var vt=((rt-M)/6+ot/2)/ot,ct=((rt-A)/6+ot/2)/ot,dt=((rt-R)/6+ot/2)/ot;M===rt?lt=dt-ct:A===rt?lt=1/3+vt-dt:R===rt&&(lt=2/3+ct-vt),lt<0&&(lt+=1),lt>1&&(lt-=1)}var Mt=[360*lt,ht,at];return null!=P[3]&&Mt.push(P[3]),Mt}}(Z),null!=M&&(Z[0]=function _t(P){return(P=Math.round(P))<0?0:P>360?360:P}(M)),null!=A&&(Z[1]=yt(A)),null!=R&&(Z[2]=yt(R)),w(K(Z),"rgba")}function U(P,M){var A=st(P);if(A&&null!=M)return A[3]=mt(M),w(A,"rgba")}function w(P,M){if(P&&P.length){var A=P[0]+","+P[1]+","+P[2];return("rgba"===M||"hsva"===M||"hsla"===M)&&(A+=","+P[3]),M+"("+A+")"}}function C(P,M){var A=st(P);return A?(.299*A[0]+.587*A[1]+.114*A[2])*A[3]/255+(1-A[3])*M:0}function I(){return w([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")}},2710:(Ze,te,D)=>{D.d(te,{U5:()=>I,iR:()=>U,Pc:()=>w,AA:()=>C});var B=D(4311),St=D(2477),n=D(7034),_t=D(8544),mt=n.Z.CMD,gt=[[],[],[]],yt=Math.sqrt,V=Math.atan2;function k(P,M){if(M){var Z,rt,ot,at,lt,ht,A=P.data,R=P.len(),vt=mt.M,ct=mt.C,dt=mt.L,Mt=mt.R,Pt=mt.A,wt=mt.Q;for(ot=0,at=0;ot<R;){switch(Z=A[ot++],at=ot,rt=0,Z){case vt:case dt:rt=1;break;case ct:rt=3;break;case wt:rt=2;break;case Pt:var Ot=M[4],Ft=M[5],Ut=yt(M[0]*M[0]+M[1]*M[1]),kt=yt(M[2]*M[2]+M[3]*M[3]),ie=V(-M[1]/kt,M[0]/Ut);A[ot]*=Ut,A[ot++]+=Ot,A[ot]*=kt,A[ot++]+=Ft,A[ot++]*=Ut,A[ot++]*=kt,A[ot++]+=ie,A[ot++]+=ie,at=ot+=2;break;case Mt:ht[0]=A[ot++],ht[1]=A[ot++],(0,_t.applyTransform)(ht,ht,M),A[at++]=ht[0],A[at++]=ht[1],ht[0]+=A[ot++],ht[1]+=A[ot++],(0,_t.applyTransform)(ht,ht,M),A[at++]=ht[0],A[at++]=ht[1]}for(lt=0;lt<rt;lt++){var ue=gt[lt];ue[0]=A[ot++],ue[1]=A[ot++],(0,_t.applyTransform)(ue,ue,M),A[at++]=ue[0],A[at++]=ue[1]}}P.increaseVersion()}}var X=D(6615),q=Math.sqrt,N=Math.sin,et=Math.cos,$=Math.PI;function st(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])}function K(P,M){return(P[0]*M[0]+P[1]*M[1])/(st(P)*st(M))}function _(P,M){return(P[0]*M[1]<P[1]*M[0]?-1:1)*Math.acos(K(P,M))}function j(P,M,A,R,Z,rt,ot,at,lt,ht,vt){var ct=lt*($/180),dt=et(ct)*(P-A)/2+N(ct)*(M-R)/2,Mt=-1*N(ct)*(P-A)/2+et(ct)*(M-R)/2,Pt=dt*dt/(ot*ot)+Mt*Mt/(at*at);Pt>1&&(ot*=q(Pt),at*=q(Pt));var wt=(Z===rt?-1:1)*q((ot*ot*(at*at)-ot*ot*(Mt*Mt)-at*at*(dt*dt))/(ot*ot*(Mt*Mt)+at*at*(dt*dt)))||0,Ot=wt*ot*Mt/at,Ft=wt*-at*dt/ot,Ut=(P+A)/2+et(ct)*Ot-N(ct)*Ft,kt=(M+R)/2+N(ct)*Ot+et(ct)*Ft,ie=_([1,0],[(dt-Ot)/ot,(Mt-Ft)/at]),ue=[(dt-Ot)/ot,(Mt-Ft)/at],Pe=[(-1*dt-Ot)/ot,(-1*Mt-Ft)/at],Se=_(ue,Pe);if(K(ue,Pe)<=-1&&(Se=$),K(ue,Pe)>=1&&(Se=0),Se<0){var De=Math.round(Se/$*1e6)/1e6;Se=2*$+De%2*$}vt.addData(ht,Ut,kt,ot,at,ie,Se,ct,rt)}var it=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,z=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,J=function(P){function M(){return null!==P&&P.apply(this,arguments)||this}return(0,B.ZT)(M,P),M.prototype.applyTransform=function(A){},M}(St.ZP);function Y(P){return null!=P.setData}function nt(P,M){var A=function tt(P){var M=new n.Z;if(!P)return M;var ot,A=0,R=0,Z=A,rt=R,at=n.Z.CMD,lt=P.match(it);if(!lt)return M;for(var ht=0;ht<lt.length;ht++){for(var vt=lt[ht],ct=vt.charAt(0),dt=void 0,Mt=vt.match(z)||[],Pt=Mt.length,wt=0;wt<Pt;wt++)Mt[wt]=parseFloat(Mt[wt]);for(var Ot=0;Ot<Pt;){var Ft=void 0,Ut=void 0,kt=void 0,ie=void 0,ue=void 0,Pe=void 0,Se=void 0,De=A,Fe=R,Ye=void 0,tr=void 0;switch(ct){case"l":A+=Mt[Ot++],R+=Mt[Ot++],M.addData(dt=at.L,A,R);break;case"L":A=Mt[Ot++],R=Mt[Ot++],M.addData(dt=at.L,A,R);break;case"m":A+=Mt[Ot++],R+=Mt[Ot++],M.addData(dt=at.M,A,R),Z=A,rt=R,ct="l";break;case"M":A=Mt[Ot++],R=Mt[Ot++],M.addData(dt=at.M,A,R),Z=A,rt=R,ct="L";break;case"h":A+=Mt[Ot++],M.addData(dt=at.L,A,R);break;case"H":A=Mt[Ot++],M.addData(dt=at.L,A,R);break;case"v":R+=Mt[Ot++],M.addData(dt=at.L,A,R);break;case"V":R=Mt[Ot++],M.addData(dt=at.L,A,R);break;case"C":M.addData(dt=at.C,Mt[Ot++],Mt[Ot++],Mt[Ot++],Mt[Ot++],Mt[Ot++],Mt[Ot++]),A=Mt[Ot-2],R=Mt[Ot-1];break;case"c":M.addData(dt=at.C,Mt[Ot++]+A,Mt[Ot++]+R,Mt[Ot++]+A,Mt[Ot++]+R,Mt[Ot++]+A,Mt[Ot++]+R),A+=Mt[Ot-2],R+=Mt[Ot-1];break;case"S":Ft=A,Ut=R,Ye=M.len(),tr=M.data,ot===at.C&&(Ft+=A-tr[Ye-4],Ut+=R-tr[Ye-3]),De=Mt[Ot++],Fe=Mt[Ot++],A=Mt[Ot++],R=Mt[Ot++],M.addData(dt=at.C,Ft,Ut,De,Fe,A,R);break;case"s":Ft=A,Ut=R,Ye=M.len(),tr=M.data,ot===at.C&&(Ft+=A-tr[Ye-4],Ut+=R-tr[Ye-3]),De=A+Mt[Ot++],Fe=R+Mt[Ot++],A+=Mt[Ot++],R+=Mt[Ot++],M.addData(dt=at.C,Ft,Ut,De,Fe,A,R);break;case"Q":De=Mt[Ot++],Fe=Mt[Ot++],A=Mt[Ot++],R=Mt[Ot++],M.addData(dt=at.Q,De,Fe,A,R);break;case"q":De=Mt[Ot++]+A,Fe=Mt[Ot++]+R,A+=Mt[Ot++],R+=Mt[Ot++],M.addData(dt=at.Q,De,Fe,A,R);break;case"T":Ft=A,Ut=R,Ye=M.len(),tr=M.data,ot===at.Q&&(Ft+=A-tr[Ye-4],Ut+=R-tr[Ye-3]),A=Mt[Ot++],R=Mt[Ot++],M.addData(dt=at.Q,Ft,Ut,A,R);break;case"t":Ft=A,Ut=R,Ye=M.len(),tr=M.data,ot===at.Q&&(Ft+=A-tr[Ye-4],Ut+=R-tr[Ye-3]),A+=Mt[Ot++],R+=Mt[Ot++],M.addData(dt=at.Q,Ft,Ut,A,R);break;case"A":kt=Mt[Ot++],ie=Mt[Ot++],ue=Mt[Ot++],Pe=Mt[Ot++],Se=Mt[Ot++],j(De=A,Fe=R,A=Mt[Ot++],R=Mt[Ot++],Pe,Se,kt,ie,ue,dt=at.A,M);break;case"a":kt=Mt[Ot++],ie=Mt[Ot++],ue=Mt[Ot++],Pe=Mt[Ot++],Se=Mt[Ot++],j(De=A,Fe=R,A+=Mt[Ot++],R+=Mt[Ot++],Pe,Se,kt,ie,ue,dt=at.A,M)}}("z"===ct||"Z"===ct)&&(M.addData(dt=at.Z),A=Z,R=rt),ot=dt}return M.toStatic(),M}(P),R=(0,X.extend)({},M);return R.buildPath=function(Z){var rt;Y(Z)?(Z.setData(A.data),(rt=Z.getContext())&&Z.rebuildPath(rt,1)):A.rebuildPath(rt=Z,1)},R.applyTransform=function(Z){k(A,Z),this.dirtyShape()},R}function U(P,M){return new J(nt(P,M))}function w(P,M){var A=nt(P,M);return function(Z){function rt(ot){var at=Z.call(this,ot)||this;return at.applyTransform=A.applyTransform,at.buildPath=A.buildPath,at}return(0,B.ZT)(rt,Z),rt}(J)}function C(P,M){for(var A=[],R=P.length,Z=0;Z<R;Z++)A.push(P[Z].getUpdatedPathProxy(!0));var ot=new St.ZP(M);return ot.createPathProxy(),ot.buildPath=function(at){if(Y(at)){at.appendPath(A);var lt=at.getContext();lt&&at.rebuildPath(lt,1)}},ot}function I(P,M){M=M||{};var A=new St.ZP;return P.shape&&A.setShape(P.shape),A.setStyle(P.style),M.bakeTransform?k(A.path,P.getComputedTransform()):M.toLocal?A.setLocalTransform(P.getComputedTransform()):A.copyTransform(P),A.buildPath=P.buildPath,A.applyTransform=A.applyTransform,A.z=P.z,A.z2=P.z2,A.zlevel=P.zlevel,A}},3318:(Ze,te,D)=>{D.r(te),D.d(te,{dispose:()=>Nr,disposeAll:()=>re,getInstance:()=>pe,init:()=>Zr,registerPainter:()=>we,version:()=>Le});var B=D(1156),St=D(6615),n=D(4311),_t=D(8544),mt=function Kt(ne,le){this.target=ne,this.topTarget=le&&le.topTarget},gt=function(){function Kt(ne){this.handler=ne,ne.on("mousedown",this._dragStart,this),ne.on("mousemove",this._drag,this),ne.on("mouseup",this._dragEnd,this)}return Kt.prototype._dragStart=function(ne){for(var le=ne.target;le&&!le.draggable;)le=le.parent||le.__hostTarget;le&&(this._draggingTarget=le,le.dragging=!0,this._x=ne.offsetX,this._y=ne.offsetY,this.handler.dispatchToElement(new mt(le,ne),"dragstart",ne.event))},Kt.prototype._drag=function(ne){var le=this._draggingTarget;if(le){var Xt=ne.offsetX,Te=ne.offsetY,ye=Xt-this._x,Ne=Te-this._y;this._x=Xt,this._y=Te,le.drift(ye,Ne,ne),this.handler.dispatchToElement(new mt(le,ne),"drag",ne.event);var Qe=this.handler.findHover(Xt,Te,le).target,Pr=this._dropTarget;this._dropTarget=Qe,le!==Qe&&(Pr&&Qe!==Pr&&this.handler.dispatchToElement(new mt(Pr,ne),"dragleave",ne.event),Qe&&Qe!==Pr&&this.handler.dispatchToElement(new mt(Qe,ne),"dragenter",ne.event))}},Kt.prototype._dragEnd=function(ne){var le=this._draggingTarget;le&&(le.dragging=!1),this.handler.dispatchToElement(new mt(le,ne),"dragend",ne.event),this._dropTarget&&this.handler.dispatchToElement(new mt(this._dropTarget,ne),"drop",ne.event),this._draggingTarget=null,this._dropTarget=null},Kt}();const yt=gt;var V=D(7100),k=D(3626),X=function(){function Kt(){this._track=[]}return Kt.prototype.recognize=function(ne,le,Xt){return this._doTrack(ne,le,Xt),this._recognize(ne)},Kt.prototype.clear=function(){return this._track.length=0,this},Kt.prototype._doTrack=function(ne,le,Xt){var Te=ne.touches;if(Te){for(var ye={points:[],touches:[],target:le,event:ne},Ne=0,Qe=Te.length;Ne<Qe;Ne++){var Pr=Te[Ne],Ir=k.eV(Xt,Pr,{});ye.points.push([Ir.zrX,Ir.zrY]),ye.touches.push(Pr)}this._track.push(ye)}},Kt.prototype._recognize=function(ne){for(var le in et)if(et.hasOwnProperty(le)){var Xt=et[le](this._track,ne);if(Xt)return Xt}},Kt}();function q(Kt){var ne=Kt[1][0]-Kt[0][0],le=Kt[1][1]-Kt[0][1];return Math.sqrt(ne*ne+le*le)}var et={pinch:function(Kt,ne){var le=Kt.length;if(le){var Xt=(Kt[le-1]||{}).points,Te=(Kt[le-2]||{}).points||Xt;if(Te&&Te.length>1&&Xt&&Xt.length>1){var ye=q(Xt)/q(Te);!isFinite(ye)&&(ye=1),ne.pinchScale=ye;var Ne=function N(Kt){return[(Kt[0][0]+Kt[1][0])/2,(Kt[0][1]+Kt[1][1])/2]}(Xt);return ne.pinchX=Ne[0],ne.pinchY=Ne[1],{type:"pinch",target:Kt[0].target,event:ne}}}}},$=D(4525);function _(){k.sT(this.event)}var j=function(Kt){function ne(){var le=null!==Kt&&Kt.apply(this,arguments)||this;return le.handler=null,le}return(0,n.ZT)(ne,Kt),ne.prototype.dispose=function(){},ne.prototype.setCursor=function(){},ne}(V.Z),it=function Kt(ne,le){this.x=ne,this.y=le},z=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tt=new $.Z(0,0,0,0),J=function(Kt){function ne(le,Xt,Te,ye,Ne){var Qe=Kt.call(this)||this;return Qe._hovered=new it(0,0),Qe.storage=le,Qe.painter=Xt,Qe.painterRoot=ye,Qe._pointerSize=Ne,Te=Te||new j,Qe.proxy=null,Qe.setHandlerProxy(Te),Qe._draggingMgr=new yt(Qe),Qe}return(0,n.ZT)(ne,Kt),ne.prototype.setHandlerProxy=function(le){this.proxy&&this.proxy.dispose(),le&&(St.each(z,function(Xt){le.on&&le.on(Xt,this[Xt],this)},this),le.handler=this),this.proxy=le},ne.prototype.mousemove=function(le){var Xt=le.zrX,Te=le.zrY,ye=U(this,Xt,Te),Ne=this._hovered,Qe=Ne.target;Qe&&!Qe.__zr&&(Qe=(Ne=this.findHover(Ne.x,Ne.y)).target);var Pr=this._hovered=ye?new it(Xt,Te):this.findHover(Xt,Te),Ir=Pr.target,Xr=this.proxy;Xr.setCursor&&Xr.setCursor(Ir?Ir.cursor:"default"),Qe&&Ir!==Qe&&this.dispatchToElement(Ne,"mouseout",le),this.dispatchToElement(Pr,"mousemove",le),Ir&&Ir!==Qe&&this.dispatchToElement(Pr,"mouseover",le)},ne.prototype.mouseout=function(le){var Xt=le.zrEventControl;"only_globalout"!==Xt&&this.dispatchToElement(this._hovered,"mouseout",le),"no_globalout"!==Xt&&this.trigger("globalout",{type:"globalout",event:le})},ne.prototype.resize=function(){this._hovered=new it(0,0)},ne.prototype.dispatch=function(le,Xt){var Te=this[le];Te&&Te.call(this,Xt)},ne.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},ne.prototype.setCursorStyle=function(le){var Xt=this.proxy;Xt.setCursor&&Xt.setCursor(le)},ne.prototype.dispatchToElement=function(le,Xt,Te){var ye=(le=le||{}).target;if(!ye||!ye.silent){for(var Ne="on"+Xt,Qe=function K(Kt,ne,le){return{type:Kt,event:le,target:ne.target,topTarget:ne.topTarget,cancelBubble:!1,offsetX:le.zrX,offsetY:le.zrY,gestureEvent:le.gestureEvent,pinchX:le.pinchX,pinchY:le.pinchY,pinchScale:le.pinchScale,wheelDelta:le.zrDelta,zrByTouch:le.zrByTouch,which:le.which,stop:_}}(Xt,le,Te);ye&&(ye[Ne]&&(Qe.cancelBubble=!!ye[Ne].call(ye,Qe)),ye.trigger(Xt,Qe),ye=ye.__hostTarget?ye.__hostTarget:ye.parent,!Qe.cancelBubble););Qe.cancelBubble||(this.trigger(Xt,Qe),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(Pr){"function"==typeof Pr[Ne]&&Pr[Ne].call(Pr,Qe),Pr.trigger&&Pr.trigger(Xt,Qe)}))}},ne.prototype.findHover=function(le,Xt,Te){var ye=this.storage.getDisplayList(),Ne=new it(le,Xt);if(nt(ye,Ne,le,Xt,Te),this._pointerSize&&!Ne.target){for(var Qe=[],Pr=this._pointerSize,Ir=Pr/2,Xr=new $.Z(le-Ir,Xt-Ir,Pr,Pr),An=ye.length-1;An>=0;An--){var $r=ye[An];$r!==Te&&!$r.ignore&&!$r.ignoreCoarsePointer&&(!$r.parent||!$r.parent.ignoreCoarsePointer)&&(tt.copy($r.getBoundingRect()),$r.transform&&tt.applyTransform($r.transform),tt.intersect(Xr)&&Qe.push($r))}if(Qe.length)for(var ai=Math.PI/12,ro=2*Math.PI,qi=0;qi<Ir;qi+=4)for(var fa=0;fa<ro;fa+=ai)if(nt(Qe,Ne,le+qi*Math.cos(fa),Xt+qi*Math.sin(fa),Te),Ne.target)return Ne}return Ne},ne.prototype.processGesture=function(le,Xt){this._gestureMgr||(this._gestureMgr=new X);var Te=this._gestureMgr;"start"===Xt&&Te.clear();var ye=Te.recognize(le,this.findHover(le.zrX,le.zrY,null).target,this.proxy.dom);if("end"===Xt&&Te.clear(),ye){var Ne=ye.type;le.gestureEvent=Ne;var Qe=new it;Qe.target=ye.target,this.dispatchToElement(Qe,Ne,ye.event)}},ne}(V.Z);function Y(Kt,ne,le){if(Kt[Kt.rectHover?"rectContain":"contain"](ne,le)){for(var Xt=Kt,Te=void 0,ye=!1;Xt;){if(Xt.ignoreClip&&(ye=!0),!ye){var Ne=Xt.getClipPath();if(Ne&&!Ne.contain(ne,le))return!1;Xt.silent&&(Te=!0)}Xt=Xt.__hostTarget||Xt.parent}return!Te||"silent"}return!1}function nt(Kt,ne,le,Xt,Te){for(var ye=Kt.length-1;ye>=0;ye--){var Ne=Kt[ye],Qe=void 0;if(Ne!==Te&&!Ne.ignore&&(Qe=Y(Ne,le,Xt))&&(!ne.topTarget&&(ne.topTarget=Ne),"silent"!==Qe)){ne.target=Ne;break}}}function U(Kt,ne,le){var Xt=Kt.painter;return ne<0||ne>Xt.getWidth()||le<0||le>Xt.getHeight()}St.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(Kt){J.prototype[Kt]=function(ne){var ye,Ne,le=ne.zrX,Xt=ne.zrY,Te=U(this,le,Xt);if(("mouseup"!==Kt||!Te)&&(Ne=(ye=this.findHover(le,Xt)).target),"mousedown"===Kt)this._downEl=Ne,this._downPoint=[ne.zrX,ne.zrY],this._upEl=Ne;else if("mouseup"===Kt)this._upEl=Ne;else if("click"===Kt){if(this._downEl!==this._upEl||!this._downPoint||_t.dist(this._downPoint,[ne.zrX,ne.zrY])>4)return;this._downPoint=null}this.dispatchToElement(ye,Kt,ne)}});const w=J;var C=D(4856),I=D(6195),P=!1;function M(){P||(P=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function A(Kt,ne){return Kt.zlevel===ne.zlevel?Kt.z===ne.z?Kt.z2-ne.z2:Kt.z-ne.z:Kt.zlevel-ne.zlevel}var R=function(){function Kt(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=A}return Kt.prototype.traverse=function(ne,le){for(var Xt=0;Xt<this._roots.length;Xt++)this._roots[Xt].traverse(ne,le)},Kt.prototype.getDisplayList=function(ne,le){le=le||!1;var Xt=this._displayList;return(ne||!Xt.length)&&this.updateDisplayList(le),Xt},Kt.prototype.updateDisplayList=function(ne){this._displayListLen=0;for(var le=this._roots,Xt=this._displayList,Te=0,ye=le.length;Te<ye;Te++)this._updateAndAddDisplayable(le[Te],null,ne);Xt.length=this._displayListLen,(0,C.Z)(Xt,A)},Kt.prototype._updateAndAddDisplayable=function(ne,le,Xt){if(!ne.ignore||Xt){ne.beforeUpdate(),ne.update(),ne.afterUpdate();var Te=ne.getClipPath();if(ne.ignoreClip)le=null;else if(Te){le=le?le.slice():[];for(var ye=Te,Ne=ne;ye;)ye.parent=Ne,ye.updateTransform(),le.push(ye),Ne=ye,ye=ye.getClipPath()}if(ne.childrenRef){for(var Qe=ne.childrenRef(),Pr=0;Pr<Qe.length;Pr++){var Ir=Qe[Pr];ne.__dirty&&(Ir.__dirty|=I.YV),this._updateAndAddDisplayable(Ir,le,Xt)}ne.__dirty=0}else{var Xr=ne;le&&le.length?Xr.__clipPaths=le:Xr.__clipPaths&&Xr.__clipPaths.length>0&&(Xr.__clipPaths=[]),isNaN(Xr.z)&&(M(),Xr.z=0),isNaN(Xr.z2)&&(M(),Xr.z2=0),isNaN(Xr.zlevel)&&(M(),Xr.zlevel=0),this._displayList[this._displayListLen++]=Xr}var An=ne.getDecalElement&&ne.getDecalElement();An&&this._updateAndAddDisplayable(An,le,Xt);var $r=ne.getTextGuideLine();$r&&this._updateAndAddDisplayable($r,le,Xt);var $n=ne.getTextContent();$n&&this._updateAndAddDisplayable($n,le,Xt)}},Kt.prototype.addRoot=function(ne){ne.__zr&&ne.__zr.storage===this||this._roots.push(ne)},Kt.prototype.delRoot=function(ne){if(ne instanceof Array)for(var le=0,Xt=ne.length;le<Xt;le++)this.delRoot(ne[le]);else{var Te=St.indexOf(this._roots,ne);Te>=0&&this._roots.splice(Te,1)}},Kt.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},Kt.prototype.getRoots=function(){return this._roots},Kt.prototype.dispose=function(){this._displayList=null,this._roots=null},Kt}();const Z=R;var rt=D(663),ot=D(1694);function at(){return(new Date).getTime()}var lt=function(Kt){function ne(le){var Xt=Kt.call(this)||this;return Xt._running=!1,Xt._time=0,Xt._pausedTime=0,Xt._pauseStart=0,Xt._paused=!1,Xt.stage=(le=le||{}).stage||{},Xt}return(0,n.ZT)(ne,Kt),ne.prototype.addClip=function(le){le.animation&&this.removeClip(le),this._head?(this._tail.next=le,le.prev=this._tail,le.next=null,this._tail=le):this._head=this._tail=le,le.animation=this},ne.prototype.addAnimator=function(le){le.animation=this;var Xt=le.getClip();Xt&&this.addClip(Xt)},ne.prototype.removeClip=function(le){if(le.animation){var Xt=le.prev,Te=le.next;Xt?Xt.next=Te:this._head=Te,Te?Te.prev=Xt:this._tail=Xt,le.next=le.prev=le.animation=null}},ne.prototype.removeAnimator=function(le){var Xt=le.getClip();Xt&&this.removeClip(Xt),le.animation=null},ne.prototype.update=function(le){for(var Xt=at()-this._pausedTime,Te=Xt-this._time,ye=this._head;ye;){var Ne=ye.next;ye.step(Xt,Te)&&(ye.ondestroy(),this.removeClip(ye)),ye=Ne}this._time=Xt,le||(this.trigger("frame",Te),this.stage.update&&this.stage.update())},ne.prototype._startLoop=function(){var le=this;this._running=!0,(0,rt.Z)(function Xt(){le._running&&((0,rt.Z)(Xt),!le._paused&&le.update())})},ne.prototype.start=function(){this._running||(this._time=at(),this._pausedTime=0,this._startLoop())},ne.prototype.stop=function(){this._running=!1},ne.prototype.pause=function(){this._paused||(this._pauseStart=at(),this._paused=!0)},ne.prototype.resume=function(){this._paused&&(this._pausedTime+=at()-this._pauseStart,this._paused=!1)},ne.prototype.clear=function(){for(var le=this._head;le;){var Xt=le.next;le.prev=le.next=le.animation=null,le=Xt}this._head=this._tail=null},ne.prototype.isFinished=function(){return null==this._head},ne.prototype.animate=function(le,Xt){Xt=Xt||{},this.start();var Te=new ot.Z(le,Xt.loop);return this.addAnimator(Te),Te},ne}(V.Z);const ht=lt;var Kt,le,ct=B.Z.domSupported,dt=(le={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Kt=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:St.map(Kt,function(Te){var ye=Te.replace("mouse","pointer");return le.hasOwnProperty(ye)?ye:Te})}),Mt_mouse=["mousemove","mouseup"],Mt_pointer=["pointermove","pointerup"],Pt=!1;function wt(Kt){var ne=Kt.pointerType;return"pen"===ne||"touch"===ne}function Ft(Kt){Kt&&(Kt.zrByTouch=!0)}function kt(Kt,ne){for(var le=ne,Xt=!1;le&&9!==le.nodeType&&!(Xt=le.domBelongToZr||le!==ne&&le===Kt.painterRoot);)le=le.parentNode;return Xt}var ie=function Kt(ne,le){this.stopPropagation=St.noop,this.stopImmediatePropagation=St.noop,this.preventDefault=St.noop,this.type=le.type,this.target=this.currentTarget=ne.dom,this.pointerType=le.pointerType,this.clientX=le.clientX,this.clientY=le.clientY},ue={mousedown:function(Kt){Kt=(0,k.OD)(this.dom,Kt),this.__mayPointerCapture=[Kt.zrX,Kt.zrY],this.trigger("mousedown",Kt)},mousemove:function(Kt){Kt=(0,k.OD)(this.dom,Kt);var ne=this.__mayPointerCapture;ne&&(Kt.zrX!==ne[0]||Kt.zrY!==ne[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",Kt)},mouseup:function(Kt){Kt=(0,k.OD)(this.dom,Kt),this.__togglePointerCapture(!1),this.trigger("mouseup",Kt)},mouseout:function(Kt){kt(this,(Kt=(0,k.OD)(this.dom,Kt)).toElement||Kt.relatedTarget)||(this.__pointerCapturing&&(Kt.zrEventControl="no_globalout"),this.trigger("mouseout",Kt))},wheel:function(Kt){Pt=!0,Kt=(0,k.OD)(this.dom,Kt),this.trigger("mousewheel",Kt)},mousewheel:function(Kt){Pt||(Kt=(0,k.OD)(this.dom,Kt),this.trigger("mousewheel",Kt))},touchstart:function(Kt){Ft(Kt=(0,k.OD)(this.dom,Kt)),this.__lastTouchMoment=new Date,this.handler.processGesture(Kt,"start"),ue.mousemove.call(this,Kt),ue.mousedown.call(this,Kt)},touchmove:function(Kt){Ft(Kt=(0,k.OD)(this.dom,Kt)),this.handler.processGesture(Kt,"change"),ue.mousemove.call(this,Kt)},touchend:function(Kt){Ft(Kt=(0,k.OD)(this.dom,Kt)),this.handler.processGesture(Kt,"end"),ue.mouseup.call(this,Kt),+new Date-+this.__lastTouchMoment<300&&ue.click.call(this,Kt)},pointerdown:function(Kt){ue.mousedown.call(this,Kt)},pointermove:function(Kt){wt(Kt)||ue.mousemove.call(this,Kt)},pointerup:function(Kt){ue.mouseup.call(this,Kt)},pointerout:function(Kt){wt(Kt)||ue.mouseout.call(this,Kt)}};St.each(["click","dblclick","contextmenu"],function(Kt){ue[Kt]=function(ne){ne=(0,k.OD)(this.dom,ne),this.trigger(Kt,ne)}});var Pe={pointermove:function(Kt){wt(Kt)||Pe.mousemove.call(this,Kt)},pointerup:function(Kt){Pe.mouseup.call(this,Kt)},mousemove:function(Kt){this.trigger("mousemove",Kt)},mouseup:function(Kt){var ne=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",Kt),ne&&(Kt.zrEventControl="only_globalout",this.trigger("mouseout",Kt))}};function Fe(Kt,ne,le,Xt){Kt.mounted[ne]=le,Kt.listenerOpts[ne]=Xt,(0,k.Oo)(Kt.domTarget,ne,le,Xt)}function Ye(Kt){var ne=Kt.mounted;for(var le in ne)ne.hasOwnProperty(le)&&(0,k.xg)(Kt.domTarget,le,ne[le],Kt.listenerOpts[le]);Kt.mounted={}}var tr=function Kt(ne,le){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=ne,this.domHandlers=le},or=function(Kt){function ne(le,Xt){var Te=Kt.call(this)||this;return Te.__pointerCapturing=!1,Te.dom=le,Te.painterRoot=Xt,Te._localHandlerScope=new tr(le,ue),ct&&(Te._globalHandlerScope=new tr(document,Pe)),function Se(Kt,ne){var le=ne.domHandlers;B.Z.pointerEventsSupported?St.each(dt.pointer,function(Xt){Fe(ne,Xt,function(Te){le[Xt].call(Kt,Te)})}):(B.Z.touchEventsSupported&&St.each(dt.touch,function(Xt){Fe(ne,Xt,function(Te){le[Xt].call(Kt,Te),function Ot(Kt){Kt.touching=!0,null!=Kt.touchTimer&&(clearTimeout(Kt.touchTimer),Kt.touchTimer=null),Kt.touchTimer=setTimeout(function(){Kt.touching=!1,Kt.touchTimer=null},700)}(ne)})}),St.each(dt.mouse,function(Xt){Fe(ne,Xt,function(Te){Te=(0,k.iP)(Te),ne.touching||le[Xt].call(Kt,Te)})}))}(Te,Te._localHandlerScope),Te}return(0,n.ZT)(ne,Kt),ne.prototype.dispose=function(){Ye(this._localHandlerScope),ct&&Ye(this._globalHandlerScope)},ne.prototype.setCursor=function(le){this.dom.style&&(this.dom.style.cursor=le||"default")},ne.prototype.__togglePointerCapture=function(le){if(this.__mayPointerCapture=null,ct&&+this.__pointerCapturing^+le){this.__pointerCapturing=le;var Xt=this._globalHandlerScope;le?function De(Kt,ne){function le(Xt){Fe(ne,Xt,function Te(ye){ye=(0,k.iP)(ye),kt(Kt,ye.target)||(ye=function Ut(Kt,ne){return(0,k.OD)(Kt.dom,new ie(Kt,ne),!0)}(Kt,ye),ne.domHandlers[Xt].call(Kt,ye))},{capture:!0})}B.Z.pointerEventsSupported?St.each(Mt_pointer,le):B.Z.touchEventsSupported||St.each(Mt_mouse,le)}(this,Xt):Ye(Xt)}},ne}(V.Z);const Hr=or;var Rr=D(754),qr=D(6905),Vr=D(4786),Ve={},er={},Cr=function(){function Kt(ne,le,Xt){var Te=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,Xt=Xt||{},this.dom=le,this.id=ne;var ye=new Z,Ne=Xt.renderer||"canvas";Ve[Ne]||(Ne=St.keys(Ve)[0]),Xt.useDirtyRect=Xt.useDirtyRect??!1;var Qe=new Ve[Ne](le,ye,Xt,ne),Pr=Xt.ssr||Qe.ssrOnly;this.storage=ye,this.painter=Qe;var $n,Ir=B.Z.node||B.Z.worker||Pr?null:new Hr(Qe.getViewportRoot(),Qe.root),Xr=Xt.useCoarsePointer;(null==Xr||"auto"===Xr?B.Z.touchEventsSupported:!!Xr)&&($n=St.retrieve2(Xt.pointerSize,44)),this.handler=new w(ye,Qe,Ir,Qe.root,$n),this.animation=new ht({stage:{update:Pr?null:function(){return Te._flush(!0)}}}),Pr||this.animation.start()}return Kt.prototype.add=function(ne){!ne||(this.storage.addRoot(ne),ne.addSelfToZr(this),this.refresh())},Kt.prototype.remove=function(ne){!ne||(this.storage.delRoot(ne),ne.removeSelfFromZr(this),this.refresh())},Kt.prototype.configLayer=function(ne,le){this.painter.configLayer&&this.painter.configLayer(ne,le),this.refresh()},Kt.prototype.setBackgroundColor=function(ne){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(ne),this.refresh(),this._backgroundColor=ne,this._darkMode=function Lr(Kt){if(!Kt)return!1;if("string"==typeof Kt)return(0,Rr.lum)(Kt,1)<qr.Ak;if(Kt.colorStops){for(var ne=Kt.colorStops,le=0,Xt=ne.length,Te=0;Te<Xt;Te++)le+=(0,Rr.lum)(ne[Te].color,1);return(le/=Xt)<qr.Ak}return!1}(ne)},Kt.prototype.getBackgroundColor=function(){return this._backgroundColor},Kt.prototype.setDarkMode=function(ne){this._darkMode=ne},Kt.prototype.isDarkMode=function(){return this._darkMode},Kt.prototype.refreshImmediately=function(ne){ne||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},Kt.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},Kt.prototype.flush=function(){this._flush(!1)},Kt.prototype._flush=function(ne){var le,Xt=at();this._needsRefresh&&(le=!0,this.refreshImmediately(ne)),this._needsRefreshHover&&(le=!0,this.refreshHoverImmediately());var Te=at();le?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:Te-Xt})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},Kt.prototype.setSleepAfterStill=function(ne){this._sleepAfterStill=ne},Kt.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},Kt.prototype.refreshHover=function(){this._needsRefreshHover=!0},Kt.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},Kt.prototype.resize=function(ne){this.painter.resize((ne=ne||{}).width,ne.height),this.handler.resize()},Kt.prototype.clearAnimation=function(){this.animation.clear()},Kt.prototype.getWidth=function(){return this.painter.getWidth()},Kt.prototype.getHeight=function(){return this.painter.getHeight()},Kt.prototype.setCursorStyle=function(ne){this.handler.setCursorStyle(ne)},Kt.prototype.findHover=function(ne,le){return this.handler.findHover(ne,le)},Kt.prototype.on=function(ne,le,Xt){return this.handler.on(ne,le,Xt),this},Kt.prototype.off=function(ne,le){this.handler.off(ne,le)},Kt.prototype.trigger=function(ne,le){this.handler.trigger(ne,le)},Kt.prototype.clear=function(){for(var ne=this.storage.getRoots(),le=0;le<ne.length;le++)ne[le]instanceof Vr.Z&&ne[le].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},Kt.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function Ar(Kt){delete er[Kt]}(this.id)},Kt}();function Zr(Kt,ne){var le=new Cr(St.guid(),Kt,ne);return er[le.id]=le,le}function Nr(Kt){Kt.dispose()}function re(){for(var Kt in er)er.hasOwnProperty(Kt)&&er[Kt].dispose();er={}}function pe(Kt){return er[Kt]}function we(Kt,ne){Ve[Kt]=ne}var Le="5.4.1"},8299:(Ze,te,D)=>{D.d(te,{ZT:()=>St});var B=function(C,I){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,M){P.__proto__=M}||function(P,M){for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(P[A]=M[A])})(C,I)};function St(C,I){if("function"!=typeof I&&null!==I)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function P(){this.constructor=C}B(C,I),C.prototype=null===I?Object.create(I):(P.prototype=I.prototype,new P)}},4311:(Ze,te,D)=>{D.d(te,{ZT:()=>St});var B=function(C,I){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,M){P.__proto__=M}||function(P,M){for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(P[A]=M[A])})(C,I)};function St(C,I){if("function"!=typeof I&&null!==I)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function P(){this.constructor=C}B(C,I),C.prototype=null===I?Object.create(I):(P.prototype=I.prototype,new P)}},4984:(Ze,te,D)=>{D.d(te,{Ns:()=>et,_w:()=>N});var B=D(5861),St=D(4650),n=D(9646),_t=D(515),mt=D(7579),gt=D(4049),yt=D(9751),V=D(9468),k=D(3900);class X{constructor(st){this.changes=st}static of(st){return new X(st)}notEmpty(st){if(this.changes[st]){const K=this.changes[st].currentValue;if(null!=K)return(0,n.of)(K)}return _t.E}has(st){return this.changes[st]?(0,n.of)(this.changes[st].currentValue):_t.E}notFirst(st){return this.changes[st]&&!this.changes[st].isFirstChange()?(0,n.of)(this.changes[st].currentValue):_t.E}notFirstAndEmpty(st){if(this.changes[st]&&!this.changes[st].isFirstChange()){const K=this.changes[st].currentValue;if(null!=K)return(0,n.of)(K)}return _t.E}}const q=new St.OlP("NGX_ECHARTS_CONFIG");let N=(()=>{class ${constructor(K,_,j){this.el=_,this.ngZone=j,this.autoResize=!0,this.loadingType="default",this.chartInit=new St.vpe,this.optionsError=new St.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new mt.x,this.echarts=K.echarts}ngOnChanges(K){const _=X.of(K);_.notFirstAndEmpty("options").subscribe(j=>this.onOptionsChange(j)),_.notFirstAndEmpty("merge").subscribe(j=>this.setOption(j)),_.has("loading").subscribe(j=>this.toggleLoading(!!j)),_.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe((0,V.p)(100,gt.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(K){this.chart&&(K?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(K,_){if(this.chart)try{this.chart.setOption(K,_)}catch(j){console.error(j),this.optionsError.emit(j)}}refreshChart(){var K=this;return(0,B.Z)(function*(){K.dispose(),yield K.initChart()})()}createChart(){const K=this.el.nativeElement;if(window&&window.getComputedStyle){const _=window.getComputedStyle(K,null).getPropertyValue("height");(!_||"0px"===_)&&(!K.style.height||"0px"===K.style.height)&&(K.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:j})=>j(K,this.theme,this.initOpts)))}initChart(){var K=this;return(0,B.Z)(function*(){yield K.onOptionsChange(K.options),K.merge&&K.chart&&K.setOption(K.merge)})()}onOptionsChange(K){var _=this;return(0,B.Z)(function*(){!K||(_.chart||(_.chart=yield _.createChart(),_.chartInit.emit(_.chart)),_.setOption(_.options,!0))})()}createLazyEvent(K){return this.chartInit.pipe((0,k.w)(_=>new yt.y(j=>(_.on(K,it=>this.ngZone.run(()=>j.next(it))),()=>{this.chart&&(this.chart.isDisposed()||_.off(K))}))))}}return $.\u0275fac=function(K){return new(K||$)(St.Y36(q),St.Y36(St.SBq),St.Y36(St.R0b))},$.\u0275dir=St.lG2({type:$,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[St.TTD]}),$})(),et=(()=>{class ${static forRoot(K){return{ngModule:$,providers:[{provide:q,useValue:K}]}}static forChild(){return{ngModule:$}}}return $.\u0275fac=function(K){return new(K||$)},$.\u0275mod=St.oAB({type:$}),$.\u0275inj=St.cJS({}),$})()}}]);